(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jg={exports:{}},Ra={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0=Symbol.for("react.transitional.element"),R0=Symbol.for("react.fragment");function Xg(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:N0,type:e,key:i,ref:t!==void 0?t:null,props:n}}Ra.Fragment=R0;Ra.jsx=Xg;Ra.jsxs=Xg;Jg.exports=Ra;var s=Jg.exports,Wg={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=Symbol.for("react.transitional.element"),D0=Symbol.for("react.portal"),j0=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),U0=Symbol.for("react.profiler"),L0=Symbol.for("react.consumer"),P0=Symbol.for("react.context"),V0=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),H0=Symbol.for("react.memo"),Kg=Symbol.for("react.lazy"),zf=Symbol.iterator;function B0(e){return e===null||typeof e!="object"?null:(e=zf&&e[zf]||e["@@iterator"],typeof e=="function"?e:null)}var Zg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qg=Object.assign,ep={};function kl(e,t,n){this.props=e,this.context=t,this.refs=ep,this.updater=n||Zg}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tp(){}tp.prototype=kl.prototype;function Cd(e,t,n){this.props=e,this.context=t,this.refs=ep,this.updater=n||Zg}var Td=Cd.prototype=new tp;Td.constructor=Cd;Qg(Td,kl.prototype);Td.isPureReactComponent=!0;var Gf=Array.isArray,ct={H:null,A:null,T:null,S:null,V:null},np=Object.prototype.hasOwnProperty;function bd(e,t,n,i,o,l){return n=l.ref,{$$typeof:vd,type:e,key:t,ref:n!==void 0?n:null,props:l}}function F0(e,t){return bd(e.type,t,void 0,void 0,void 0,e.props)}function Sd(e){return typeof e=="object"&&e!==null&&e.$$typeof===vd}function z0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qf=/\/+/g;function bc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?z0(""+e.key):t.toString(36)}function Of(){}function G0(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Of,Of):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function $o(e,t,n,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case vd:case D0:c=!0;break;case Kg:return c=e._init,$o(c(e._payload),t,n,i,o)}}if(c)return o=o(e),c=i===""?"."+bc(e,0):i,Gf(o)?(n="",c!=null&&(n=c.replace(qf,"$&/")+"/"),$o(o,t,n,"",function(d){return d})):o!=null&&(Sd(o)&&(o=F0(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(qf,"$&/")+"/")+c)),t.push(o)),1;c=0;var u=i===""?".":i+":";if(Gf(e))for(var f=0;f<e.length;f++)i=e[f],l=u+bc(i,f),c+=$o(i,t,n,l,o);else if(f=B0(e),typeof f=="function")for(e=f.call(e),f=0;!(i=e.next()).done;)i=i.value,l=u+bc(i,f++),c+=$o(i,t,n,l,o);else if(l==="object"){if(typeof e.then=="function")return $o(G0(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function ys(e,t,n){if(e==null)return e;var i=[],o=0;return $o(e,i,"","",function(l){return t.call(n,l,o++)}),i}function q0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function O0(){}Re.Children={map:ys,forEach:function(e,t,n){ys(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ys(e,function(){t++}),t},toArray:function(e){return ys(e,function(t){return t})||[]},only:function(e){if(!Sd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=kl;Re.Fragment=j0;Re.Profiler=U0;Re.PureComponent=Cd;Re.StrictMode=I0;Re.Suspense=$0;Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct;Re.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ct.H.useMemoCache(e)}};Re.cache=function(e){return function(){return e.apply(null,arguments)}};Re.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Qg({},e.props),o=e.key,l=void 0;if(t!=null)for(c in t.ref!==void 0&&(l=void 0),t.key!==void 0&&(o=""+t.key),t)!np.call(t,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&t.ref===void 0||(i[c]=t[c]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return bd(e.type,o,void 0,void 0,l,i)};Re.createContext=function(e){return e={$$typeof:P0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:L0,_context:e},e};Re.createElement=function(e,t,n){var i,o={},l=null;if(t!=null)for(i in t.key!==void 0&&(l=""+t.key),t)np.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return bd(e,l,void 0,void 0,null,o)};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:V0,render:e}};Re.isValidElement=Sd;Re.lazy=function(e){return{$$typeof:Kg,_payload:{_status:-1,_result:e},_init:q0}};Re.memo=function(e,t){return{$$typeof:H0,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=ct.T,n={};ct.T=n;try{var i=e(),o=ct.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(O0,Yf)}catch(l){Yf(l)}finally{ct.T=t}};Re.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()};Re.use=function(e){return ct.H.use(e)};Re.useActionState=function(e,t,n){return ct.H.useActionState(e,t,n)};Re.useCallback=function(e,t){return ct.H.useCallback(e,t)};Re.useContext=function(e){return ct.H.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e,t){return ct.H.useDeferredValue(e,t)};Re.useEffect=function(e,t,n){var i=ct.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};Re.useId=function(){return ct.H.useId()};Re.useImperativeHandle=function(e,t,n){return ct.H.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return ct.H.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return ct.H.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return ct.H.useMemo(e,t)};Re.useOptimistic=function(e,t){return ct.H.useOptimistic(e,t)};Re.useReducer=function(e,t,n){return ct.H.useReducer(e,t,n)};Re.useRef=function(e){return ct.H.useRef(e)};Re.useState=function(e){return ct.H.useState(e)};Re.useSyncExternalStore=function(e,t,n){return ct.H.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return ct.H.useTransition()};Re.version="19.1.1";Wg.exports=Re;var M=Wg.exports;const kt=Yg(M);var ip={exports:{}},Da={},op={exports:{}},lp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,de){var xe=ee.length;ee.push(de);e:for(;0<xe;){var Q=xe-1>>>1,O=ee[Q];if(0<o(O,de))ee[Q]=de,ee[xe]=O,xe=Q;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var de=ee[0],xe=ee.pop();if(xe!==de){ee[0]=xe;e:for(var Q=0,O=ee.length,oe=O>>>1;Q<oe;){var Te=2*(Q+1)-1,Me=ee[Te],H=Te+1,ve=ee[H];if(0>o(Me,xe))H<O&&0>o(ve,Me)?(ee[Q]=ve,ee[H]=xe,Q=H):(ee[Q]=Me,ee[Te]=xe,Q=Te);else if(H<O&&0>o(ve,xe))ee[Q]=ve,ee[H]=xe,Q=H;else break e}}return de}function o(ee,de){var xe=ee.sortIndex-de.sortIndex;return xe!==0?xe:ee.id-de.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],m=1,h=null,g=3,p=!1,b=!1,S=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function v(ee){for(var de=n(d);de!==null;){if(de.callback===null)i(d);else if(de.startTime<=ee)i(d),de.sortIndex=de.expirationTime,t(f,de);else break;de=n(d)}}function A(ee){if(S=!1,v(ee),!b)if(n(f)!==null)b=!0,_||(_=!0,Z());else{var de=n(d);de!==null&&Se(A,de.startTime-ee)}}var _=!1,N=-1,V=5,q=-1;function U(){return E?!0:!(e.unstable_now()-q<V)}function D(){if(E=!1,_){var ee=e.unstable_now();q=ee;var de=!0;try{e:{b=!1,S&&(S=!1,y(N),N=-1),p=!0;var xe=g;try{t:{for(v(ee),h=n(f);h!==null&&!(h.expirationTime>ee&&U());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,g=h.priorityLevel;var O=Q(h.expirationTime<=ee);if(ee=e.unstable_now(),typeof O=="function"){h.callback=O,v(ee),de=!0;break t}h===n(f)&&i(f),v(ee)}else i(f);h=n(f)}if(h!==null)de=!0;else{var oe=n(d);oe!==null&&Se(A,oe.startTime-ee),de=!1}}break e}finally{h=null,g=xe,p=!1}de=void 0}}finally{de?Z():_=!1}}}var Z;if(typeof C=="function")Z=function(){C(D)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Ce=be.port2;be.port1.onmessage=D,Z=function(){Ce.postMessage(null)}}else Z=function(){x(D,0)};function Se(ee,de){N=x(function(){ee(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var de=3;break;default:de=g}var xe=g;g=de;try{return ee()}finally{g=xe}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var xe=g;g=ee;try{return de()}finally{g=xe}},e.unstable_scheduleCallback=function(ee,de,xe){var Q=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Q+xe:Q):xe=Q,ee){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=xe+O,ee={id:m++,callback:de,priorityLevel:ee,startTime:xe,expirationTime:O,sortIndex:-1},xe>Q?(ee.sortIndex=xe,t(d,ee),n(f)===null&&ee===n(d)&&(S?(y(N),N=-1):S=!0,Se(A,xe-Q))):(ee.sortIndex=O,t(f,ee),b||p||(b=!0,_||(_=!0,Z()))),ee},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(ee){var de=g;return function(){var xe=g;g=de;try{return ee.apply(this,arguments)}finally{g=xe}}}})(lp);op.exports=lp;var Y0=op.exports,rp={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=M;function sp(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ei(){}var Yt={d:{f:Ei,r:function(){throw Error(sp(522))},D:Ei,C:Ei,L:Ei,m:Ei,X:Ei,S:Ei,M:Ei},p:0,findDOMNode:null},X0=Symbol.for("react.portal");function W0(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X0,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var fr=J0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ja(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Yt;Jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(sp(299));return W0(e,t,null,n)};Jt.flushSync=function(e){var t=fr.T,n=Yt.p;try{if(fr.T=null,Yt.p=2,e)return e()}finally{fr.T=t,Yt.p=n,Yt.d.f()}};Jt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Yt.d.C(e,t))};Jt.prefetchDNS=function(e){typeof e=="string"&&Yt.d.D(e)};Jt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=ja(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Yt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:l}):n==="script"&&Yt.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Jt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=ja(t.as,t.crossOrigin);Yt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Yt.d.M(e)};Jt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=ja(n,t.crossOrigin);Yt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Jt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=ja(t.as,t.crossOrigin);Yt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Yt.d.m(e)};Jt.requestFormReset=function(e){Yt.d.r(e)};Jt.unstable_batchedUpdates=function(e,t){return e(t)};Jt.useFormState=function(e,t,n){return fr.H.useFormState(e,t,n)};Jt.useFormStatus=function(){return fr.H.useHostTransitionStatus()};Jt.version="19.1.1";function ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ap)}catch(e){console.error(e)}}ap(),rp.exports=Jt;var K0=rp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t=Y0,cp=M,Z0=K0;function G(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function up(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jf(e){if(qr(e)!==e)throw Error(G(188))}function Q0(e){var t=e.alternate;if(!t){if(t=qr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Jf(o),e;if(l===i)return Jf(o),t;l=l.sibling}throw Error(G(188))}if(n.return!==i.return)n=o,i=l;else{for(var c=!1,u=o.child;u;){if(u===n){c=!0,n=o,i=l;break}if(u===i){c=!0,i=o,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,i=o;break}if(u===i){c=!0,i=l,n=o;break}u=u.sibling}if(!c)throw Error(G(189))}}if(n.alternate!==i)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function fp(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=fp(e),t!==null)return t;e=e.sibling}return null}var ot=Object.assign,eC=Symbol.for("react.element"),xs=Symbol.for("react.transitional.element"),ar=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),mp=Symbol.for("react.strict_mode"),au=Symbol.for("react.profiler"),tC=Symbol.for("react.provider"),hp=Symbol.for("react.consumer"),si=Symbol.for("react.context"),wd=Symbol.for("react.forward_ref"),cu=Symbol.for("react.suspense"),uu=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),du=Symbol.for("react.activity"),nC=Symbol.for("react.memo_cache_sentinel"),Xf=Symbol.iterator;function Wl(e){return e===null||typeof e!="object"?null:(e=Xf&&e[Xf]||e["@@iterator"],typeof e=="function"?e:null)}var iC=Symbol.for("react.client.reference");function fu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===iC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Go:return"Fragment";case au:return"Profiler";case mp:return"StrictMode";case cu:return"Suspense";case uu:return"SuspenseList";case du:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ar:return"Portal";case si:return(e.displayName||"Context")+".Provider";case hp:return(e._context.displayName||"Context")+".Consumer";case wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ed:return t=e.displayName||null,t!==null?t:fu(e.type)||"Memo";case _i:t=e._payload,e=e._init;try{return fu(e(t))}catch{}}return null}var cr=Array.isArray,we=cp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye=Z0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fo={pending:!1,data:null,method:null,action:null},mu=[],qo=-1;function Zn(e){return{current:e}}function Ut(e){0>qo||(e.current=mu[qo],mu[qo]=null,qo--)}function ut(e,t){qo++,mu[qo]=e.current,e.current=t}var Xn=Zn(null),kr=Zn(null),Hi=Zn(null),Zs=Zn(null);function Qs(e,t){switch(ut(Hi,t),ut(kr,e),ut(Xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?eh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=eh(t),e=Rx(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ut(Xn),ut(Xn,e)}function pl(){Ut(Xn),Ut(kr),Ut(Hi)}function hu(e){e.memoizedState!==null&&ut(Zs,e);var t=Xn.current,n=Rx(t,e.type);t!==n&&(ut(kr,e),ut(Xn,n))}function ea(e){kr.current===e&&(Ut(Xn),Ut(kr)),Zs.current===e&&(Ut(Zs),Vr._currentValue=fo)}var gu=Object.prototype.hasOwnProperty,Md=_t.unstable_scheduleCallback,Sc=_t.unstable_cancelCallback,oC=_t.unstable_shouldYield,lC=_t.unstable_requestPaint,Wn=_t.unstable_now,rC=_t.unstable_getCurrentPriorityLevel,gp=_t.unstable_ImmediatePriority,pp=_t.unstable_UserBlockingPriority,ta=_t.unstable_NormalPriority,sC=_t.unstable_LowPriority,yp=_t.unstable_IdlePriority,aC=_t.log,cC=_t.unstable_setDisableYieldValue,Or=null,cn=null;function Ui(e){if(typeof aC=="function"&&cC(e),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Or,e)}catch{}}var un=Math.clz32?Math.clz32:fC,uC=Math.log,dC=Math.LN2;function fC(e){return e>>>=0,e===0?32:31-(uC(e)/dC|0)|0}var vs=256,Cs=4194304;function ao(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ia(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,l=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var u=i&134217727;return u!==0?(i=u&~l,i!==0?o=ao(i):(c&=u,c!==0?o=ao(c):n||(n=u&~e,n!==0&&(o=ao(n))))):(u=i&~l,u!==0?o=ao(u):c!==0?o=ao(c):n||(n=i&~e,n!==0&&(o=ao(n)))),o===0?0:t!==0&&t!==o&&!(t&l)&&(l=o&-o,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:o}function Yr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function mC(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xp(){var e=vs;return vs<<=1,!(vs&4194048)&&(vs=256),e}function vp(){var e=Cs;return Cs<<=1,!(Cs&62914560)&&(Cs=4194304),e}function wc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hC(e,t,n,i,o,l){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var u=e.entanglements,f=e.expirationTimes,d=e.hiddenUpdates;for(n=c&~n;0<n;){var m=31-un(n),h=1<<m;u[m]=0,f[m]=-1;var g=d[m];if(g!==null)for(d[m]=null,m=0;m<g.length;m++){var p=g[m];p!==null&&(p.lane&=-536870913)}n&=~h}i!==0&&Cp(e,i,0),l!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=l&~(c&~t))}function Cp(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-un(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Tp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-un(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function Ad(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function bp(){var e=Ye.p;return e!==0?e:(e=window.event,e===void 0?32:Bx(e.type))}function gC(e,t){var n=Ye.p;try{return Ye.p=e,t()}finally{Ye.p=n}}var Ki=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ki,Qt="__reactProps$"+Ki,_l="__reactContainer$"+Ki,pu="__reactEvents$"+Ki,pC="__reactListeners$"+Ki,yC="__reactHandles$"+Ki,Wf="__reactResources$"+Ki,Xr="__reactMarker$"+Ki;function _d(e){delete e[Ft],delete e[Qt],delete e[pu],delete e[pC],delete e[yC]}function Oo(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_l]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ih(e);e!==null;){if(n=e[Ft])return n;e=ih(e)}return t}e=n,n=e.parentNode}return null}function Nl(e){if(e=e[Ft]||e[_l]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ur(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(G(33))}function ol(e){var t=e[Wf];return t||(t=e[Wf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function jt(e){e[Xr]=!0}var Sp=new Set,wp={};function Eo(e,t){yl(e,t),yl(e+"Capture",t)}function yl(e,t){for(wp[e]=t,e=0;e<t.length;e++)Sp.add(t[e])}var xC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kf={},Zf={};function vC(e){return gu.call(Zf,e)?!0:gu.call(Kf,e)?!1:xC.test(e)?Zf[e]=!0:(Kf[e]=!0,!1)}function Ls(e,t,n){if(vC(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ts(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ni(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Ec,Qf;function Ho(e){if(Ec===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ec=t&&t[1]||"",Qf=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ec+e+Qf}var Mc=!1;function Ac(e,t){if(!e||Mc)return"";Mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(p){var g=p}Reflect.construct(e,[],h)}else{try{h.call()}catch(p){g=p}e.call(h.prototype)}}else{try{throw Error()}catch(p){g=p}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(p){if(p&&g&&typeof p.stack=="string")return[p.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),c=l[0],u=l[1];if(c&&u){var f=c.split(`
`),d=u.split(`
`);for(o=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(i===f.length||o===d.length)for(i=f.length-1,o=d.length-1;1<=i&&0<=o&&f[i]!==d[o];)o--;for(;1<=i&&0<=o;i--,o--)if(f[i]!==d[o]){if(i!==1||o!==1)do if(i--,o--,0>o||f[i]!==d[o]){var m=`
`+f[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=o);break}}}finally{Mc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ho(n):""}function CC(e){switch(e.tag){case 26:case 27:case 5:return Ho(e.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 15:return Ac(e.type,!1);case 11:return Ac(e.type.render,!1);case 1:return Ac(e.type,!0);case 31:return Ho("Activity");default:return""}}function em(e){try{var t="";do t+=CC(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ep(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TC(e){var t=Ep(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){i=""+c,l.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function na(e){e._valueTracker||(e._valueTracker=TC(e))}function Mp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ep(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bC=/[\n"\\]/g;function wn(e){return e.replace(bC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yu(e,t,n,i,o,l,c,u){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Tn(t)):e.value!==""+Tn(t)&&(e.value=""+Tn(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?xu(e,c,Tn(t)):n!=null?xu(e,c,Tn(n)):i!=null&&e.removeAttribute("value"),o==null&&l!=null&&(e.defaultChecked=!!l),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.name=""+Tn(u):e.removeAttribute("name")}function Ap(e,t,n,i,o,l,c,u){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;n=n!=null?""+Tn(n):"",t=t!=null?""+Tn(t):n,u||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=u?e.checked:!!i,e.defaultChecked=!!i,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function xu(e,t,n){t==="number"&&ia(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ll(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Tn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function kp(e,t,n){if(t!=null&&(t=""+Tn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Tn(n):""}function _p(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(G(92));if(cr(i)){if(1<i.length)throw Error(G(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Tn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function xl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var SC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tm(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||SC.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Np(e,t,n){if(t!=null&&typeof t!="object")throw Error(G(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&tm(e,o,i)}else for(var l in t)t.hasOwnProperty(l)&&tm(e,l,t[l])}function Nd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ps(e){return EC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var vu=null;function Rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yo=null,rl=null;function nm(e){var t=Nl(e);if(t&&(e=t.stateNode)){var n=e[Qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+wn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[Qt]||null;if(!o)throw Error(G(90));yu(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Mp(i)}break e;case"textarea":kp(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ll(e,!!n.multiple,t,!1)}}}var kc=!1;function Rp(e,t,n){if(kc)return e(t,n);kc=!0;try{var i=e(t);return i}finally{if(kc=!1,(Yo!==null||rl!==null)&&(Ga(),Yo&&(t=Yo,e=rl,rl=Yo=null,nm(t),e)))for(t=0;t<e.length;t++)nm(e[t])}}function _r(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Qt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=!1;if(hi)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Cu=!1}var Li=null,Dd=null,Vs=null;function Dp(){if(Vs)return Vs;var e,t=Dd,n=t.length,i,o="value"in Li?Li.value:Li.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===o[l-i];i++);return Vs=o.slice(e,1<i?1-i:void 0)}function $s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bs(){return!0}function im(){return!1}function en(e){function t(n,i,o,l,c){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?bs:im,this.isPropagationStopped=im,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),t}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=en(Mo),Wr=ot({},Mo,{view:0,detail:0}),MC=en(Wr),_c,Nc,Zl,La=ot({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zl&&(Zl&&e.type==="mousemove"?(_c=e.screenX-Zl.screenX,Nc=e.screenY-Zl.screenY):Nc=_c=0,Zl=e),_c)},movementY:function(e){return"movementY"in e?e.movementY:Nc}}),om=en(La),AC=ot({},La,{dataTransfer:0}),kC=en(AC),_C=ot({},Wr,{relatedTarget:0}),Rc=en(_C),NC=ot({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),RC=en(NC),DC=ot({},Mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jC=en(DC),IC=ot({},Mo,{data:0}),lm=en(IC),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PC[e])?!!t[e]:!1}function jd(){return VC}var $C=ot({},Wr,{key:function(e){if(e.key){var t=UC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?LC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jd,charCode:function(e){return e.type==="keypress"?$s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HC=en($C),BC=ot({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rm=en(BC),FC=ot({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jd}),zC=en(FC),GC=ot({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),qC=en(GC),OC=ot({},La,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YC=en(OC),JC=ot({},Mo,{newState:0,oldState:0}),XC=en(JC),WC=[9,13,27,32],Id=hi&&"CompositionEvent"in window,mr=null;hi&&"documentMode"in document&&(mr=document.documentMode);var KC=hi&&"TextEvent"in window&&!mr,jp=hi&&(!Id||mr&&8<mr&&11>=mr),sm=" ",am=!1;function Ip(e,t){switch(e){case"keyup":return WC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jo=!1;function ZC(e,t){switch(e){case"compositionend":return Up(t);case"keypress":return t.which!==32?null:(am=!0,sm);case"textInput":return e=t.data,e===sm&&am?null:e;default:return null}}function QC(e,t){if(Jo)return e==="compositionend"||!Id&&Ip(e,t)?(e=Dp(),Vs=Dd=Li=null,Jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jp&&t.locale!=="ko"?null:t.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eT[e.type]:t==="textarea"}function Lp(e,t,n,i){Yo?rl?rl.push(i):rl=[i]:Yo=i,t=Ta(t,"onChange"),0<t.length&&(n=new Ua("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var hr=null,Nr=null;function tT(e){kx(e,0)}function Pa(e){var t=ur(e);if(Mp(t))return e}function um(e,t){if(e==="change")return t}var Pp=!1;if(hi){var Dc;if(hi){var jc="oninput"in document;if(!jc){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),jc=typeof dm.oninput=="function"}Dc=jc}else Dc=!1;Pp=Dc&&(!document.documentMode||9<document.documentMode)}function fm(){hr&&(hr.detachEvent("onpropertychange",Vp),Nr=hr=null)}function Vp(e){if(e.propertyName==="value"&&Pa(Nr)){var t=[];Lp(t,Nr,e,Rd(e)),Rp(tT,t)}}function nT(e,t,n){e==="focusin"?(fm(),hr=t,Nr=n,hr.attachEvent("onpropertychange",Vp)):e==="focusout"&&fm()}function iT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pa(Nr)}function oT(e,t){if(e==="click")return Pa(t)}function lT(e,t){if(e==="input"||e==="change")return Pa(t)}function rT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:rT;function Rr(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!gu.call(t,o)||!mn(e[o],t[o]))return!1}return!0}function mm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hm(e,t){var n=mm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mm(n)}}function $p(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$p(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ia(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ia(e.document)}return t}function Ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sT=hi&&"documentMode"in document&&11>=document.documentMode,Xo=null,Tu=null,gr=null,bu=!1;function gm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bu||Xo==null||Xo!==ia(i)||(i=Xo,"selectionStart"in i&&Ud(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),gr&&Rr(gr,i)||(gr=i,i=Ta(Tu,"onSelect"),0<i.length&&(t=new Ua("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Xo)))}function ro(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wo={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},Ic={},Bp={};hi&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Ao(e){if(Ic[e])return Ic[e];if(!Wo[e])return e;var t=Wo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bp)return Ic[e]=t[n];return e}var Fp=Ao("animationend"),zp=Ao("animationiteration"),Gp=Ao("animationstart"),aT=Ao("transitionrun"),cT=Ao("transitionstart"),uT=Ao("transitioncancel"),qp=Ao("transitionend"),Op=new Map,Su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Su.push("scrollEnd");function $n(e,t){Op.set(e,t),Eo(t,[e])}var pm=new WeakMap;function En(e,t){if(typeof e=="object"&&e!==null){var n=pm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:em(t)},pm.set(e,t),t)}return{value:e,source:t,stack:em(t)}}var Cn=[],Ko=0,Ld=0;function Va(){for(var e=Ko,t=Ld=Ko=0;t<e;){var n=Cn[t];Cn[t++]=null;var i=Cn[t];Cn[t++]=null;var o=Cn[t];Cn[t++]=null;var l=Cn[t];if(Cn[t++]=null,i!==null&&o!==null){var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}l!==0&&Yp(n,o,l)}}function $a(e,t,n,i){Cn[Ko++]=e,Cn[Ko++]=t,Cn[Ko++]=n,Cn[Ko++]=i,Ld|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Pd(e,t,n,i){return $a(e,t,n,i),oa(e)}function Rl(e,t){return $a(e,null,null,t),oa(e)}function Yp(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,l=e.return;l!==null;)l.childLanes|=n,i=l.alternate,i!==null&&(i.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(o=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,o&&t!==null&&(o=31-un(n),e=l.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),l):null}function oa(e){if(50<Er)throw Er=0,Gu=null,Error(G(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Zo={};function dT(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,i){return new dT(e,t,n,i)}function Vd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fi(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Jp(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hs(e,t,n,i,o,l){var c=0;if(i=e,typeof e=="function")Vd(e)&&(c=1);else if(typeof e=="string")c=mb(e,n,Xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case du:return e=an(31,n,t,o),e.elementType=du,e.lanes=l,e;case Go:return mo(n.children,o,l,t);case mp:c=8,o|=24;break;case au:return e=an(12,n,t,o|2),e.elementType=au,e.lanes=l,e;case cu:return e=an(13,n,t,o),e.elementType=cu,e.lanes=l,e;case uu:return e=an(19,n,t,o),e.elementType=uu,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tC:case si:c=10;break e;case hp:c=9;break e;case wd:c=11;break e;case Ed:c=14;break e;case _i:c=16,i=null;break e}c=29,n=Error(G(130,e===null?"null":typeof e,"")),i=null}return t=an(c,n,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function mo(e,t,n,i){return e=an(7,e,i,t),e.lanes=n,e}function Uc(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function Lc(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qo=[],el=0,la=null,ra=0,bn=[],Sn=0,ho=null,ai=1,ci="";function co(e,t){Qo[el++]=ra,Qo[el++]=la,la=e,ra=t}function Xp(e,t,n){bn[Sn++]=ai,bn[Sn++]=ci,bn[Sn++]=ho,ho=e;var i=ai;e=ci;var o=32-un(i)-1;i&=~(1<<o),n+=1;var l=32-un(t)+o;if(30<l){var c=o-o%5;l=(i&(1<<c)-1).toString(32),i>>=c,o-=c,ai=1<<32-un(t)+o|n<<o|i,ci=l+e}else ai=1<<l|n<<o|i,ci=e}function $d(e){e.return!==null&&(co(e,1),Xp(e,1,0))}function Hd(e){for(;e===la;)la=Qo[--el],Qo[el]=null,ra=Qo[--el],Qo[el]=null;for(;e===ho;)ho=bn[--Sn],bn[Sn]=null,ci=bn[--Sn],bn[Sn]=null,ai=bn[--Sn],bn[Sn]=null}var Ot=null,ht=null,Oe=!1,go=null,Yn=!1,wu=Error(G(519));function vo(e){var t=Error(G(418,""));throw Dr(En(t,e)),wu}function ym(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ft]=e,t[Qt]=i,n){case"dialog":Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":case"embed":Ie("load",t);break;case"video":case"audio":for(n=0;n<Ur.length;n++)Ie(Ur[n],t);break;case"source":Ie("error",t);break;case"img":case"image":case"link":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"input":Ie("invalid",t),Ap(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),na(t);break;case"select":Ie("invalid",t);break;case"textarea":Ie("invalid",t),_p(t,i.value,i.defaultValue,i.children),na(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Nx(t.textContent,n)?(i.popover!=null&&(Ie("beforetoggle",t),Ie("toggle",t)),i.onScroll!=null&&Ie("scroll",t),i.onScrollEnd!=null&&Ie("scrollend",t),i.onClick!=null&&(t.onclick=Ya),t=!0):t=!1,t||vo(e)}function xm(e){for(Ot=e.return;Ot;)switch(Ot.tag){case 5:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Ot=Ot.return}}function Ql(e){if(e!==Ot)return!1;if(!Oe)return xm(e),Oe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Wu(e.type,e.memoizedProps)),n=!n),n&&ht&&vo(e),xm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){ht=Vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}ht=null}}else t===27?(t=ht,Zi(e.type)?(e=Qu,Qu=null,ht=e):ht=t):ht=Ot?Vn(e.stateNode.nextSibling):null;return!0}function Kr(){ht=Ot=null,Oe=!1}function vm(){var e=go;return e!==null&&(Zt===null?Zt=e:Zt.push.apply(Zt,e),go=null),e}function Dr(e){go===null?go=[e]:go.push(e)}var Eu=Zn(null),ko=null,ui=null;function Ri(e,t,n){ut(Eu,t._currentValue),t._currentValue=n}function mi(e){e._currentValue=Eu.current,Ut(Eu)}function Mu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Au(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){var c=o.child;l=l.firstContext;e:for(;l!==null;){var u=l;l=o;for(var f=0;f<t.length;f++)if(u.context===t[f]){l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Mu(l.return,n,e),i||(c=null);break e}l=u.next}}else if(o.tag===18){if(c=o.return,c===null)throw Error(G(341));c.lanes|=n,l=c.alternate,l!==null&&(l.lanes|=n),Mu(c,n,e),c=null}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}}function Zr(e,t,n,i){e=null;for(var o=t,l=!1;o!==null;){if(!l){if(o.flags&524288)l=!0;else if(o.flags&262144)break}if(o.tag===10){var c=o.alternate;if(c===null)throw Error(G(387));if(c=c.memoizedProps,c!==null){var u=o.type;mn(o.pendingProps.value,c.value)||(e!==null?e.push(u):e=[u])}}else if(o===Zs.current){if(c=o.alternate,c===null)throw Error(G(387));c.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Vr):e=[Vr])}o=o.return}e!==null&&Au(t,e,n,i),t.flags|=262144}function sa(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Co(e){ko=e,ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zt(e){return Wp(ko,e)}function Ss(e,t){return ko===null&&Co(e),Wp(e,t)}function Wp(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ui===null){if(e===null)throw Error(G(308));ui=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ui=ui.next=t;return n}var fT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},mT=_t.unstable_scheduleCallback,hT=_t.unstable_NormalPriority,Mt={$$typeof:si,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new fT,data:new Map,refCount:0}}function Qr(e){e.refCount--,e.refCount===0&&mT(hT,function(){e.controller.abort()})}var pr=null,ku=0,vl=0,sl=null;function gT(e,t){if(pr===null){var n=pr=[];ku=0,vl=df(),sl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ku++,t.then(Cm,Cm),t}function Cm(){if(--ku===0&&pr!==null){sl!==null&&(sl.status="fulfilled");var e=pr;pr=null,vl=0,sl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function pT(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var Tm=we.S;we.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&gT(e,t),Tm!==null&&Tm(e,t)};var po=Zn(null);function Fd(){var e=po.current;return e!==null?e:tt.pooledCache}function Bs(e,t){t===null?ut(po,po.current):ut(po,t.pool)}function Kp(){var e=Fd();return e===null?null:{parent:Mt._currentValue,pool:e}}var es=Error(G(460)),Zp=Error(G(474)),Ha=Error(G(542)),_u={then:function(){}};function bm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ws(){}function Qp(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ws,ws),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wm(e),e;default:if(typeof t.status=="string")t.then(ws,ws);else{if(e=tt,e!==null&&100<e.shellSuspendCounter)throw Error(G(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wm(e),e}throw yr=t,es}}var yr=null;function Sm(){if(yr===null)throw Error(G(459));var e=yr;return yr=null,e}function wm(e){if(e===es||e===Ha)throw Error(G(483))}var Ni=!1;function zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,We&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=oa(e),Yp(e,null,n),t}return $a(e,i,t,n),oa(e)}function xr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tp(e,n)}}function Pc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?o=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ru=!1;function vr(){if(Ru){var e=sl;if(e!==null)throw e}}function Cr(e,t,n,i){Ru=!1;var o=e.updateQueue;Ni=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,d=f.next;f.next=null,c===null?l=d:c.next=d,c=f;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==c&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=f))}if(l!==null){var h=o.baseState;c=0,m=d=f=null,u=l;do{var g=u.lane&-536870913,p=g!==u.lane;if(p?(Ve&g)===g:(i&g)===g){g!==0&&g===vl&&(Ru=!0),m!==null&&(m=m.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var b=e,S=u;g=t;var E=n;switch(S.tag){case 1:if(b=S.payload,typeof b=="function"){h=b.call(E,h,g);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,g=typeof b=="function"?b.call(E,h,g):b,g==null)break e;h=ot({},h,g);break e;case 2:Ni=!0}}g=u.callback,g!==null&&(e.flags|=64,p&&(e.flags|=8192),p=o.callbacks,p===null?o.callbacks=[g]:p.push(g))}else p={lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=p,f=h):m=m.next=p,c|=g;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;p=u,u=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);m===null&&(f=h),o.baseState=f,o.firstBaseUpdate=d,o.lastBaseUpdate=m,l===null&&(o.shared.lanes=0),Wi|=c,e.lanes=c,e.memoizedState=h}}function ey(e,t){if(typeof e!="function")throw Error(G(191,e));e.call(t)}function ty(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ey(n[e],t)}var Cl=Zn(null),aa=Zn(0);function Em(e,t){e=yi,ut(aa,e),ut(Cl,t),yi=e|t.baseLanes}function Du(){ut(aa,yi),ut(Cl,Cl.current)}function Gd(){yi=aa.current,Ut(Cl),Ut(aa)}var Ji=0,je=null,Qe=null,bt=null,ca=!1,al=!1,To=!1,ua=0,jr=0,cl=null,yT=0;function vt(){throw Error(G(321))}function qd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mn(e[n],t[n]))return!1;return!0}function Od(e,t,n,i,o,l){return Ji=l,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,we.H=e===null||e.memoizedState===null?Dy:jy,To=!1,l=n(i,o),To=!1,al&&(l=iy(t,n,i,o)),ny(e),l}function ny(e){we.H=da;var t=Qe!==null&&Qe.next!==null;if(Ji=0,bt=Qe=je=null,ca=!1,jr=0,cl=null,t)throw Error(G(300));e===null||It||(e=e.dependencies,e!==null&&sa(e)&&(It=!0))}function iy(e,t,n,i){je=e;var o=0;do{if(al&&(cl=null),jr=0,al=!1,25<=o)throw Error(G(301));if(o+=1,bt=Qe=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}we.H=wT,l=t(n,i)}while(al);return l}function xT(){var e=we.H,t=e.useState()[0];return t=typeof t.then=="function"?ts(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(je.flags|=1024),t}function Yd(){var e=ua!==0;return ua=0,e}function Jd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Xd(e){if(ca){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ca=!1}Ji=0,bt=Qe=je=null,al=!1,jr=ua=0,cl=null}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?je.memoizedState=bt=e:bt=bt.next=e,bt}function St(){if(Qe===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=bt===null?je.memoizedState:bt.next;if(t!==null)bt=t,Qe=e;else{if(e===null)throw je.alternate===null?Error(G(467)):Error(G(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},bt===null?je.memoizedState=bt=e:bt=bt.next=e}return bt}function Wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ts(e){var t=jr;return jr+=1,cl===null&&(cl=[]),e=Qp(cl,e,t),t=je,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,we.H=t===null||t.memoizedState===null?Dy:jy),e}function Ba(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ts(e);if(e.$$typeof===si)return zt(e)}throw Error(G(438,String(e)))}function Kd(e){var t=null,n=je.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=je.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Wd(),je.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=nC;return t.index++,n}function gi(e,t){return typeof t=="function"?t(e):t}function Fs(e){var t=St();return Zd(t,Qe,e)}function Zd(e,t,n){var i=e.queue;if(i===null)throw Error(G(311));i.lastRenderedReducer=n;var o=e.baseQueue,l=i.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}t.baseQueue=o=l,i.pending=null}if(l=e.baseState,o===null)e.memoizedState=l;else{t=o.next;var u=c=null,f=null,d=t,m=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(Ve&h)===h:(Ji&h)===h){var g=d.revertLane;if(g===0)f!==null&&(f=f.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===vl&&(m=!0);else if((Ji&g)===g){d=d.next,g===vl&&(m=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=h,c=l):f=f.next=h,je.lanes|=g,Wi|=g;h=d.action,To&&n(l,h),l=d.hasEagerState?d.eagerState:n(l,h)}else g={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=g,c=l):f=f.next=g,je.lanes|=h,Wi|=h;d=d.next}while(d!==null&&d!==t);if(f===null?c=l:f.next=u,!mn(l,e.memoizedState)&&(It=!0,m&&(n=sl,n!==null)))throw n;e.memoizedState=l,e.baseState=c,e.baseQueue=f,i.lastRenderedState=l}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Vc(e){var t=St(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do l=e(l,c.action),c=c.next;while(c!==o);mn(l,t.memoizedState)||(It=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function oy(e,t,n){var i=je,o=St(),l=Oe;if(l){if(n===void 0)throw Error(G(407));n=n()}else n=t();var c=!mn((Qe||o).memoizedState,n);c&&(o.memoizedState=n,It=!0),o=o.queue;var u=sy.bind(null,i,o,e);if(ns(2048,8,u,[e]),o.getSnapshot!==t||c||bt!==null&&bt.memoizedState.tag&1){if(i.flags|=2048,Tl(9,Fa(),ry.bind(null,i,o,n,t),null),tt===null)throw Error(G(349));l||Ji&124||ly(i,t,n)}return n}function ly(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=je.updateQueue,t===null?(t=Wd(),je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ry(e,t,n,i){t.value=n,t.getSnapshot=i,ay(t)&&cy(e)}function sy(e,t,n){return n(function(){ay(t)&&cy(e)})}function ay(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mn(e,n)}catch{return!0}}function cy(e){var t=Rl(e,2);t!==null&&fn(t,e,2)}function ju(e){var t=Wt();if(typeof e=="function"){var n=e;if(e=n(),To){Ui(!0);try{n()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t}function uy(e,t,n,i){return e.baseState=n,Zd(e,Qe,typeof i=="function"?i:gi)}function vT(e,t,n,i,o){if(za(e))throw Error(G(485));if(e=t.action,e!==null){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){l.listeners.push(c)}};we.T!==null?n(!0):l.isTransition=!1,i(l),n=t.pending,n===null?(l.next=t.pending=l,dy(t,l)):(l.next=n.next,t.pending=n.next=l)}}function dy(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var l=we.T,c={};we.T=c;try{var u=n(o,i),f=we.S;f!==null&&f(c,u),Mm(e,t,u)}catch(d){Iu(e,t,d)}finally{we.T=l}}else try{l=n(o,i),Mm(e,t,l)}catch(d){Iu(e,t,d)}}function Mm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Am(e,t,i)},function(i){return Iu(e,t,i)}):Am(e,t,n)}function Am(e,t,n){t.status="fulfilled",t.value=n,fy(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,dy(e,n)))}function Iu(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,fy(t),t=t.next;while(t!==i)}e.action=null}function fy(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function my(e,t){return t}function km(e,t){if(Oe){var n=tt.formState;if(n!==null){e:{var i=je;if(Oe){if(ht){t:{for(var o=ht,l=Yn;o.nodeType!==8;){if(!l){o=null;break t}if(o=Vn(o.nextSibling),o===null){o=null;break t}}l=o.data,o=l==="F!"||l==="F"?o:null}if(o){ht=Vn(o.nextSibling),i=o.data==="F!";break e}}vo(i)}i=!1}i&&(t=n[0])}}return n=Wt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:t},n.queue=i,n=_y.bind(null,je,i),i.dispatch=n,i=ju(!1),l=nf.bind(null,je,!1,i.queue),i=Wt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=vT.bind(null,je,o,l,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function _m(e){var t=St();return hy(t,Qe,e)}function hy(e,t,n){if(t=Zd(e,t,my)[0],e=Fs(gi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ts(t)}catch(c){throw c===es?Ha:c}else i=t;t=St();var o=t.queue,l=o.dispatch;return n!==t.memoizedState&&(je.flags|=2048,Tl(9,Fa(),CT.bind(null,o,n),null)),[i,l,e]}function CT(e,t){e.action=t}function Nm(e){var t=St(),n=Qe;if(n!==null)return hy(t,n,e);St(),t=t.memoizedState,n=St();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Tl(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=je.updateQueue,t===null&&(t=Wd(),je.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Fa(){return{destroy:void 0,resource:void 0}}function gy(){return St().memoizedState}function zs(e,t,n,i){var o=Wt();i=i===void 0?null:i,je.flags|=e,o.memoizedState=Tl(1|t,Fa(),n,i)}function ns(e,t,n,i){var o=St();i=i===void 0?null:i;var l=o.memoizedState.inst;Qe!==null&&i!==null&&qd(i,Qe.memoizedState.deps)?o.memoizedState=Tl(t,l,n,i):(je.flags|=e,o.memoizedState=Tl(1|t,l,n,i))}function Rm(e,t){zs(8390656,8,e,t)}function py(e,t){ns(2048,8,e,t)}function yy(e,t){return ns(4,2,e,t)}function xy(e,t){return ns(4,4,e,t)}function vy(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cy(e,t,n){n=n!=null?n.concat([e]):null,ns(4,4,vy.bind(null,t,e),n)}function Qd(){}function Ty(e,t){var n=St();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&qd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function by(e,t){var n=St();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&qd(t,i[1]))return i[0];if(i=e(),To){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i}function ef(e,t,n){return n===void 0||Ji&1073741824?e.memoizedState=t:(e.memoizedState=n,e=fx(),je.lanes|=e,Wi|=e,n)}function Sy(e,t,n,i){return mn(n,t)?n:Cl.current!==null?(e=ef(e,n,i),mn(e,t)||(It=!0),e):Ji&42?(e=fx(),je.lanes|=e,Wi|=e,t):(It=!0,e.memoizedState=n)}function wy(e,t,n,i,o){var l=Ye.p;Ye.p=l!==0&&8>l?l:8;var c=we.T,u={};we.T=u,nf(e,!1,t,n);try{var f=o(),d=we.S;if(d!==null&&d(u,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=pT(f,i);Tr(e,t,m,dn(e))}else Tr(e,t,i,dn(e))}catch(h){Tr(e,t,{then:function(){},status:"rejected",reason:h},dn())}finally{Ye.p=l,we.T=c}}function TT(){}function Uu(e,t,n,i){if(e.tag!==5)throw Error(G(476));var o=Ey(e).queue;wy(e,o,t,fo,n===null?TT:function(){return My(e),n(i)})}function Ey(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fo,baseState:fo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:fo},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function My(e){var t=Ey(e).next.queue;Tr(e,t,{},dn())}function tf(){return zt(Vr)}function Ay(){return St().memoizedState}function ky(){return St().memoizedState}function bT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=dn();e=Bi(n);var i=Fi(t,e,n);i!==null&&(fn(i,t,n),xr(i,t,n)),t={cache:Bd()},e.payload=t;return}t=t.return}}function ST(e,t,n){var i=dn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Ny(t,n):(n=Pd(e,t,n,i),n!==null&&(fn(n,e,i),Ry(n,t,i)))}function _y(e,t,n){var i=dn();Tr(e,t,n,i)}function Tr(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Ny(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var c=t.lastRenderedState,u=l(c,n);if(o.hasEagerState=!0,o.eagerState=u,mn(u,c))return $a(e,t,o,0),tt===null&&Va(),!1}catch{}finally{}if(n=Pd(e,t,o,i),n!==null)return fn(n,e,i),Ry(n,t,i),!0}return!1}function nf(e,t,n,i){if(i={lane:2,revertLane:df(),action:i,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(G(479))}else t=Pd(e,n,i,2),t!==null&&fn(t,e,2)}function za(e){var t=e.alternate;return e===je||t!==null&&t===je}function Ny(e,t){al=ca=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ry(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tp(e,n)}}var da={readContext:zt,use:Ba,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},Dy={readContext:zt,use:Ba,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Rm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,zs(4194308,4,vy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){zs(4,2,e,t)},useMemo:function(e,t){var n=Wt();t=t===void 0?null:t;var i=e();if(To){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Wt();if(n!==void 0){var o=n(t);if(To){Ui(!0);try{n(t)}finally{Ui(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=ST.bind(null,je,e),[i.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:function(e){e=ju(e);var t=e.queue,n=_y.bind(null,je,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qd,useDeferredValue:function(e,t){var n=Wt();return ef(n,e,t)},useTransition:function(){var e=ju(!1);return e=wy.bind(null,je,e.queue,!0,!1),Wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=je,o=Wt();if(Oe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),tt===null)throw Error(G(349));Ve&124||ly(i,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Rm(sy.bind(null,i,l,e),[e]),i.flags|=2048,Tl(9,Fa(),ry.bind(null,i,l,n,t),null),n},useId:function(){var e=Wt(),t=tt.identifierPrefix;if(Oe){var n=ci,i=ai;n=(i&~(1<<32-un(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=ua++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=yT++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:tf,useFormState:km,useActionState:km,useOptimistic:function(e){var t=Wt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=nf.bind(null,je,!0,n),n.dispatch=t,[e,t]},useMemoCache:Kd,useCacheRefresh:function(){return Wt().memoizedState=bT.bind(null,je)}},jy={readContext:zt,use:Ba,useCallback:Ty,useContext:zt,useEffect:py,useImperativeHandle:Cy,useInsertionEffect:yy,useLayoutEffect:xy,useMemo:by,useReducer:Fs,useRef:gy,useState:function(){return Fs(gi)},useDebugValue:Qd,useDeferredValue:function(e,t){var n=St();return Sy(n,Qe.memoizedState,e,t)},useTransition:function(){var e=Fs(gi)[0],t=St().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:oy,useId:Ay,useHostTransitionStatus:tf,useFormState:_m,useActionState:_m,useOptimistic:function(e,t){var n=St();return uy(n,Qe,e,t)},useMemoCache:Kd,useCacheRefresh:ky},wT={readContext:zt,use:Ba,useCallback:Ty,useContext:zt,useEffect:py,useImperativeHandle:Cy,useInsertionEffect:yy,useLayoutEffect:xy,useMemo:by,useReducer:Vc,useRef:gy,useState:function(){return Vc(gi)},useDebugValue:Qd,useDeferredValue:function(e,t){var n=St();return Qe===null?ef(n,e,t):Sy(n,Qe.memoizedState,e,t)},useTransition:function(){var e=Vc(gi)[0],t=St().memoizedState;return[typeof e=="boolean"?e:ts(e),t]},useSyncExternalStore:oy,useId:Ay,useHostTransitionStatus:tf,useFormState:Nm,useActionState:Nm,useOptimistic:function(e,t){var n=St();return Qe!==null?uy(n,Qe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:ky},ul=null,Ir=0;function Es(e){var t=Ir;return Ir+=1,ul===null&&(ul=[]),Qp(ul,e,t)}function er(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ms(e,t){throw t.$$typeof===eC?Error(G(525)):(e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dm(e){var t=e._init;return t(e._payload)}function Iy(e){function t(x,y){if(e){var C=x.deletions;C===null?(x.deletions=[y],x.flags|=16):C.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function i(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function o(x,y){return x=fi(x,y),x.index=0,x.sibling=null,x}function l(x,y,C){return x.index=C,e?(C=x.alternate,C!==null?(C=C.index,C<y?(x.flags|=67108866,y):C):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function c(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function u(x,y,C,v){return y===null||y.tag!==6?(y=Uc(C,x.mode,v),y.return=x,y):(y=o(y,C),y.return=x,y)}function f(x,y,C,v){var A=C.type;return A===Go?m(x,y,C.props.children,v,C.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===_i&&Dm(A)===y.type)?(y=o(y,C.props),er(y,C),y.return=x,y):(y=Hs(C.type,C.key,C.props,null,x.mode,v),er(y,C),y.return=x,y)}function d(x,y,C,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Lc(C,x.mode,v),y.return=x,y):(y=o(y,C.children||[]),y.return=x,y)}function m(x,y,C,v,A){return y===null||y.tag!==7?(y=mo(C,x.mode,v,A),y.return=x,y):(y=o(y,C),y.return=x,y)}function h(x,y,C){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Uc(""+y,x.mode,C),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xs:return C=Hs(y.type,y.key,y.props,null,x.mode,C),er(C,y),C.return=x,C;case ar:return y=Lc(y,x.mode,C),y.return=x,y;case _i:var v=y._init;return y=v(y._payload),h(x,y,C)}if(cr(y)||Wl(y))return y=mo(y,x.mode,C,null),y.return=x,y;if(typeof y.then=="function")return h(x,Es(y),C);if(y.$$typeof===si)return h(x,Ss(x,y),C);Ms(x,y)}return null}function g(x,y,C,v){var A=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return A!==null?null:u(x,y,""+C,v);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case xs:return C.key===A?f(x,y,C,v):null;case ar:return C.key===A?d(x,y,C,v):null;case _i:return A=C._init,C=A(C._payload),g(x,y,C,v)}if(cr(C)||Wl(C))return A!==null?null:m(x,y,C,v,null);if(typeof C.then=="function")return g(x,y,Es(C),v);if(C.$$typeof===si)return g(x,y,Ss(x,C),v);Ms(x,C)}return null}function p(x,y,C,v,A){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return x=x.get(C)||null,u(y,x,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xs:return x=x.get(v.key===null?C:v.key)||null,f(y,x,v,A);case ar:return x=x.get(v.key===null?C:v.key)||null,d(y,x,v,A);case _i:var _=v._init;return v=_(v._payload),p(x,y,C,v,A)}if(cr(v)||Wl(v))return x=x.get(C)||null,m(y,x,v,A,null);if(typeof v.then=="function")return p(x,y,C,Es(v),A);if(v.$$typeof===si)return p(x,y,C,Ss(y,v),A);Ms(y,v)}return null}function b(x,y,C,v){for(var A=null,_=null,N=y,V=y=0,q=null;N!==null&&V<C.length;V++){N.index>V?(q=N,N=null):q=N.sibling;var U=g(x,N,C[V],v);if(U===null){N===null&&(N=q);break}e&&N&&U.alternate===null&&t(x,N),y=l(U,y,V),_===null?A=U:_.sibling=U,_=U,N=q}if(V===C.length)return n(x,N),Oe&&co(x,V),A;if(N===null){for(;V<C.length;V++)N=h(x,C[V],v),N!==null&&(y=l(N,y,V),_===null?A=N:_.sibling=N,_=N);return Oe&&co(x,V),A}for(N=i(N);V<C.length;V++)q=p(N,x,V,C[V],v),q!==null&&(e&&q.alternate!==null&&N.delete(q.key===null?V:q.key),y=l(q,y,V),_===null?A=q:_.sibling=q,_=q);return e&&N.forEach(function(D){return t(x,D)}),Oe&&co(x,V),A}function S(x,y,C,v){if(C==null)throw Error(G(151));for(var A=null,_=null,N=y,V=y=0,q=null,U=C.next();N!==null&&!U.done;V++,U=C.next()){N.index>V?(q=N,N=null):q=N.sibling;var D=g(x,N,U.value,v);if(D===null){N===null&&(N=q);break}e&&N&&D.alternate===null&&t(x,N),y=l(D,y,V),_===null?A=D:_.sibling=D,_=D,N=q}if(U.done)return n(x,N),Oe&&co(x,V),A;if(N===null){for(;!U.done;V++,U=C.next())U=h(x,U.value,v),U!==null&&(y=l(U,y,V),_===null?A=U:_.sibling=U,_=U);return Oe&&co(x,V),A}for(N=i(N);!U.done;V++,U=C.next())U=p(N,x,V,U.value,v),U!==null&&(e&&U.alternate!==null&&N.delete(U.key===null?V:U.key),y=l(U,y,V),_===null?A=U:_.sibling=U,_=U);return e&&N.forEach(function(Z){return t(x,Z)}),Oe&&co(x,V),A}function E(x,y,C,v){if(typeof C=="object"&&C!==null&&C.type===Go&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case xs:e:{for(var A=C.key;y!==null;){if(y.key===A){if(A=C.type,A===Go){if(y.tag===7){n(x,y.sibling),v=o(y,C.props.children),v.return=x,x=v;break e}}else if(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===_i&&Dm(A)===y.type){n(x,y.sibling),v=o(y,C.props),er(v,C),v.return=x,x=v;break e}n(x,y);break}else t(x,y);y=y.sibling}C.type===Go?(v=mo(C.props.children,x.mode,v,C.key),v.return=x,x=v):(v=Hs(C.type,C.key,C.props,null,x.mode,v),er(v,C),v.return=x,x=v)}return c(x);case ar:e:{for(A=C.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(x,y.sibling),v=o(y,C.children||[]),v.return=x,x=v;break e}else{n(x,y);break}else t(x,y);y=y.sibling}v=Lc(C,x.mode,v),v.return=x,x=v}return c(x);case _i:return A=C._init,C=A(C._payload),E(x,y,C,v)}if(cr(C))return b(x,y,C,v);if(Wl(C)){if(A=Wl(C),typeof A!="function")throw Error(G(150));return C=A.call(C),S(x,y,C,v)}if(typeof C.then=="function")return E(x,y,Es(C),v);if(C.$$typeof===si)return E(x,y,Ss(x,C),v);Ms(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,y!==null&&y.tag===6?(n(x,y.sibling),v=o(y,C),v.return=x,x=v):(n(x,y),v=Uc(C,x.mode,v),v.return=x,x=v),c(x)):n(x,y)}return function(x,y,C,v){try{Ir=0;var A=E(x,y,C,v);return ul=null,A}catch(N){if(N===es||N===Ha)throw N;var _=an(29,N,null,x.mode);return _.lanes=v,_.return=x,_}finally{}}}var bl=Iy(!0),Uy=Iy(!1),kn=Zn(null),Kn=null;function Di(e){var t=e.alternate;ut(At,At.current&1),ut(kn,e),Kn===null&&(t===null||Cl.current!==null||t.memoizedState!==null)&&(Kn=e)}function Ly(e){if(e.tag===22){if(ut(At,At.current),ut(kn,e),Kn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Kn=e)}}else ji()}function ji(){ut(At,At.current),ut(kn,kn.current)}function di(e){Ut(kn),Kn===e&&(Kn=null),Ut(At)}var At=Zn(0);function fa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Zu(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function $c(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ot({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lu={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=dn(),o=Bi(i);o.payload=t,n!=null&&(o.callback=n),t=Fi(e,o,i),t!==null&&(fn(t,e,i),xr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=dn(),o=Bi(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Fi(e,o,i),t!==null&&(fn(t,e,i),xr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dn(),i=Bi(n);i.tag=2,t!=null&&(i.callback=t),t=Fi(e,i,n),t!==null&&(fn(t,e,n),xr(t,e,n))}};function jm(e,t,n,i,o,l,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,c):t.prototype&&t.prototype.isPureReactComponent?!Rr(n,i)||!Rr(o,l):!0}function Im(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Lu.enqueueReplaceState(t,t.state,null)}function bo(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=ot({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var ma=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Py(e){ma(e)}function Vy(e){console.error(e)}function $y(e){ma(e)}function ha(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Um(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Pu(e,t,n){return n=Bi(n),n.tag=3,n.payload={element:null},n.callback=function(){ha(e,t)},n}function Hy(e){return e=Bi(e),e.tag=3,e}function By(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=i.value;e.payload=function(){return o(l)},e.callback=function(){Um(t,n,i)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Um(t,n,i),typeof o!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:""})})}function ET(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Zr(t,n,o,!0),n=kn.current,n!==null){switch(n.tag){case 13:return Kn===null?qu():n.alternate===null&&gt===0&&(gt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===_u?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Wc(e,i,o)),!1;case 22:return n.flags|=65536,i===_u?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Wc(e,i,o)),!1}throw Error(G(435,n.tag))}return Wc(e,i,o),qu(),!1}if(Oe)return t=kn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==wu&&(e=Error(G(422),{cause:i}),Dr(En(e,n)))):(i!==wu&&(t=Error(G(423),{cause:i}),Dr(En(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=En(i,n),o=Pu(e.stateNode,i,o),Pc(e,o),gt!==4&&(gt=2)),!1;var l=Error(G(520),{cause:i});if(l=En(l,n),wr===null?wr=[l]:wr.push(l),gt!==4&&(gt=2),t===null)return!0;i=En(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Pu(n.stateNode,i,e),Pc(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(zi===null||!zi.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Hy(o),By(o,e,n,i),Pc(n,o),!1}n=n.return}while(n!==null);return!1}var Fy=Error(G(461)),It=!1;function Lt(e,t,n,i){t.child=e===null?Uy(t,null,n,i):bl(t,e.child,n,i)}function Lm(e,t,n,i,o){n=n.render;var l=t.ref;if("ref"in i){var c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}else c=i;return Co(t),i=Od(e,t,n,c,l,o),u=Yd(),e!==null&&!It?(Jd(e,t,o),pi(e,t,o)):(Oe&&u&&$d(t),t.flags|=1,Lt(e,t,i,o),t.child)}function Pm(e,t,n,i,o){if(e===null){var l=n.type;return typeof l=="function"&&!Vd(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,zy(e,t,l,i,o)):(e=Hs(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!of(e,o)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:Rr,n(c,i)&&e.ref===t.ref)return pi(e,t,o)}return t.flags|=1,e=fi(l,i),e.ref=t.ref,e.return=t,t.child=e}function zy(e,t,n,i,o){if(e!==null){var l=e.memoizedProps;if(Rr(l,i)&&e.ref===t.ref)if(It=!1,t.pendingProps=i=l,of(e,o))e.flags&131072&&(It=!0);else return t.lanes=e.lanes,pi(e,t,o)}return Vu(e,t,n,i,o)}function Gy(e,t,n){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=l!==null?l.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;t.childLanes=l&~i}else t.childLanes=0,t.child=null;return Vm(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Bs(t,l!==null?l.cachePool:null),l!==null?Em(t,l):Du(),Ly(t);else return t.lanes=t.childLanes=536870912,Vm(e,t,l!==null?l.baseLanes|n:n,n)}else l!==null?(Bs(t,l.cachePool),Em(t,l),ji(),t.memoizedState=null):(e!==null&&Bs(t,null),Du(),ji());return Lt(e,t,o,n),t.child}function Vm(e,t,n,i){var o=Fd();return o=o===null?null:{parent:Mt._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Bs(t,null),Du(),Ly(t),e!==null&&Zr(e,t,i,!0),null}function Gs(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(G(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Vu(e,t,n,i,o){return Co(t),n=Od(e,t,n,i,void 0,o),i=Yd(),e!==null&&!It?(Jd(e,t,o),pi(e,t,o)):(Oe&&i&&$d(t),t.flags|=1,Lt(e,t,n,o),t.child)}function $m(e,t,n,i,o,l){return Co(t),t.updateQueue=null,n=iy(t,i,n,o),ny(e),i=Yd(),e!==null&&!It?(Jd(e,t,l),pi(e,t,l)):(Oe&&i&&$d(t),t.flags|=1,Lt(e,t,n,l),t.child)}function Hm(e,t,n,i,o){if(Co(t),t.stateNode===null){var l=Zo,c=n.contextType;typeof c=="object"&&c!==null&&(l=zt(c)),l=new n(i,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Lu,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=i,l.state=t.memoizedState,l.refs={},zd(t),c=n.contextType,l.context=typeof c=="object"&&c!==null?zt(c):Zo,l.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&($c(t,n,c,i),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(c=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),c!==l.state&&Lu.enqueueReplaceState(l,l.state,null),Cr(t,i,l,o),vr(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){l=t.stateNode;var u=t.memoizedProps,f=bo(n,u);l.props=f;var d=l.context,m=n.contextType;c=Zo,typeof m=="object"&&m!==null&&(c=zt(m));var h=n.getDerivedStateFromProps;m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function",u=t.pendingProps!==u,m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u||d!==c)&&Im(t,l,i,c),Ni=!1;var g=t.memoizedState;l.state=g,Cr(t,i,l,o),vr(),d=t.memoizedState,u||g!==d||Ni?(typeof h=="function"&&($c(t,n,h,i),d=t.memoizedState),(f=Ni||jm(t,n,f,i,g,d,c))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),l.props=i,l.state=d,l.context=c,i=f):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Nu(e,t),c=t.memoizedProps,m=bo(n,c),l.props=m,h=t.pendingProps,g=l.context,d=n.contextType,f=Zo,typeof d=="object"&&d!==null&&(f=zt(d)),u=n.getDerivedStateFromProps,(d=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||g!==f)&&Im(t,l,i,f),Ni=!1,g=t.memoizedState,l.state=g,Cr(t,i,l,o),vr();var p=t.memoizedState;c!==h||g!==p||Ni||e!==null&&e.dependencies!==null&&sa(e.dependencies)?(typeof u=="function"&&($c(t,n,u,i),p=t.memoizedState),(m=Ni||jm(t,n,m,i,g,p,f)||e!==null&&e.dependencies!==null&&sa(e.dependencies))?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,p,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,p,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),l.props=i,l.state=p,l.context=f,i=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),i=!1)}return l=i,Gs(e,t),i=(t.flags&128)!==0,l||i?(l=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&i?(t.child=bl(t,e.child,null,o),t.child=bl(t,null,n,o)):Lt(e,t,n,o),t.memoizedState=l.state,e=t.child):e=pi(e,t,o),e}function Bm(e,t,n,i){return Kr(),t.flags|=256,Lt(e,t,n,i),t.child}var Hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:Kp()}}function Fc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Mn),e}function qy(e,t,n){var i=t.pendingProps,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(At.current&2)!==0),c&&(o=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(o?Di(t):ji(),Oe){var u=ht,f;if(f=u){e:{for(f=u,u=Yn;f.nodeType!==8;){if(!u){u=null;break e}if(f=Vn(f.nextSibling),f===null){u=null;break e}}u=f}u!==null?(t.memoizedState={dehydrated:u,treeContext:ho!==null?{id:ai,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},f=an(18,null,null,0),f.stateNode=u,f.return=t,t.child=f,Ot=t,ht=null,f=!0):f=!1}f||vo(t)}if(u=t.memoizedState,u!==null&&(u=u.dehydrated,u!==null))return Zu(u)?t.lanes=32:t.lanes=536870912,null;di(t)}return u=i.children,i=i.fallback,o?(ji(),o=t.mode,u=ga({mode:"hidden",children:u},o),i=mo(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,o=t.child,o.memoizedState=Bc(n),o.childLanes=Fc(e,c,n),t.memoizedState=Hc,i):(Di(t),$u(t,u))}if(f=e.memoizedState,f!==null&&(u=f.dehydrated,u!==null)){if(l)t.flags&256?(Di(t),t.flags&=-257,t=zc(e,t,n)):t.memoizedState!==null?(ji(),t.child=e.child,t.flags|=128,t=null):(ji(),o=i.fallback,u=t.mode,i=ga({mode:"visible",children:i.children},u),o=mo(o,u,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,bl(t,e.child,null,n),i=t.child,i.memoizedState=Bc(n),i.childLanes=Fc(e,c,n),t.memoizedState=Hc,t=o);else if(Di(t),Zu(u)){if(c=u.nextSibling&&u.nextSibling.dataset,c)var d=c.dgst;c=d,i=Error(G(419)),i.stack="",i.digest=c,Dr({value:i,source:null,stack:null}),t=zc(e,t,n)}else if(It||Zr(e,t,n,!1),c=(n&e.childLanes)!==0,It||c){if(c=tt,c!==null&&(i=n&-n,i=i&42?1:Ad(i),i=i&(c.suspendedLanes|n)?0:i,i!==0&&i!==f.retryLane))throw f.retryLane=i,Rl(e,i),fn(c,e,i),Fy;u.data==="$?"||qu(),t=zc(e,t,n)}else u.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,ht=Vn(u.nextSibling),Ot=t,Oe=!0,go=null,Yn=!1,e!==null&&(bn[Sn++]=ai,bn[Sn++]=ci,bn[Sn++]=ho,ai=e.id,ci=e.overflow,ho=t),t=$u(t,i.children),t.flags|=4096);return t}return o?(ji(),o=i.fallback,u=t.mode,f=e.child,d=f.sibling,i=fi(f,{mode:"hidden",children:i.children}),i.subtreeFlags=f.subtreeFlags&65011712,d!==null?o=fi(d,o):(o=mo(o,u,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,u=e.child.memoizedState,u===null?u=Bc(n):(f=u.cachePool,f!==null?(d=Mt._currentValue,f=f.parent!==d?{parent:d,pool:d}:f):f=Kp(),u={baseLanes:u.baseLanes|n,cachePool:f}),o.memoizedState=u,o.childLanes=Fc(e,c,n),t.memoizedState=Hc,i):(Di(t),n=e.child,e=n.sibling,n=fi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function $u(e,t){return t=ga({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ga(e,t){return e=an(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zc(e,t,n){return bl(t,e.child,null,n),e=$u(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fm(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Mu(e.return,t,n)}function Gc(e,t,n,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function Oy(e,t,n){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(Lt(e,t,i.children,n),i=At.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fm(e,n,t);else if(e.tag===19)Fm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(ut(At,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&fa(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gc(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&fa(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gc(t,!0,n,null,l);break;case"together":Gc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Zr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=fi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function of(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&sa(e)))}function MT(e,t,n){switch(t.tag){case 3:Qs(t,t.stateNode.containerInfo),Ri(t,Mt,e.memoizedState.cache),Kr();break;case 27:case 5:hu(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:Ri(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(t),t.flags|=128,null):n&t.child.childLanes?qy(e,t,n):(Di(t),e=pi(e,t,n),e!==null?e.sibling:null);Di(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Zr(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return Oy(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ut(At,At.current),i)break;return null;case 22:case 23:return t.lanes=0,Gy(e,t,n);case 24:Ri(t,Mt,e.memoizedState.cache)}return pi(e,t,n)}function Yy(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)It=!0;else{if(!of(e,n)&&!(t.flags&128))return It=!1,MT(e,t,n);It=!!(e.flags&131072)}else It=!1,Oe&&t.flags&1048576&&Xp(t,ra,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")Vd(i)?(e=bo(i,e),t.tag=1,t=Hm(null,t,i,e,n)):(t.tag=0,t=Vu(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===wd){t.tag=11,t=Lm(null,t,i,e,n);break e}else if(o===Ed){t.tag=14,t=Pm(null,t,i,e,n);break e}}throw t=fu(i)||i,Error(G(306,t,""))}}return t;case 0:return Vu(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=bo(i,t.pendingProps),Hm(e,t,i,o,n);case 3:e:{if(Qs(t,t.stateNode.containerInfo),e===null)throw Error(G(387));i=t.pendingProps;var l=t.memoizedState;o=l.element,Nu(e,t),Cr(t,i,null,n);var c=t.memoizedState;if(i=c.cache,Ri(t,Mt,i),i!==l.cache&&Au(t,[Mt],n,!0),vr(),i=c.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Bm(e,t,i,n);break e}else if(i!==o){o=En(Error(G(424)),t),Dr(o),t=Bm(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ht=Vn(e.firstChild),Ot=t,Oe=!0,go=null,Yn=!0,n=Uy(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Kr(),i===o){t=pi(e,t,n);break e}Lt(e,t,i,n)}t=t.child}return t;case 26:return Gs(e,t),e===null?(n=lh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Oe||(n=t.type,e=t.pendingProps,i=ba(Hi.current).createElement(n),i[Ft]=t,i[Qt]=e,Vt(i,n,e),jt(i),t.stateNode=i):t.memoizedState=lh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return hu(t),e===null&&Oe&&(i=t.stateNode=jx(t.type,t.pendingProps,Hi.current),Ot=t,Yn=!0,o=ht,Zi(t.type)?(Qu=o,ht=Vn(i.firstChild)):ht=o),Lt(e,t,t.pendingProps.children,n),Gs(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((o=i=ht)&&(i=eb(i,t.type,t.pendingProps,Yn),i!==null?(t.stateNode=i,Ot=t,ht=Vn(i.firstChild),Yn=!1,o=!0):o=!1),o||vo(t)),hu(t),o=t.type,l=t.pendingProps,c=e!==null?e.memoizedProps:null,i=l.children,Wu(o,l)?i=null:c!==null&&Wu(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=Od(e,t,xT,null,null,n),Vr._currentValue=o),Gs(e,t),Lt(e,t,i,n),t.child;case 6:return e===null&&Oe&&((e=n=ht)&&(n=tb(n,t.pendingProps,Yn),n!==null?(t.stateNode=n,Ot=t,ht=null,e=!0):e=!1),e||vo(t)),null;case 13:return qy(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=bl(t,null,i,n):Lt(e,t,i,n),t.child;case 11:return Lm(e,t,t.type,t.pendingProps,n);case 7:return Lt(e,t,t.pendingProps,n),t.child;case 8:return Lt(e,t,t.pendingProps.children,n),t.child;case 12:return Lt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ri(t,t.type,i.value),Lt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,Co(t),o=zt(o),i=i(o),t.flags|=1,Lt(e,t,i,n),t.child;case 14:return Pm(e,t,t.type,t.pendingProps,n);case 15:return zy(e,t,t.type,t.pendingProps,n);case 19:return Oy(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=ga(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=fi(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Gy(e,t,n);case 24:return Co(t),i=zt(Mt),e===null?(o=Fd(),o===null&&(o=tt,l=Bd(),o.pooledCache=l,l.refCount++,l!==null&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:i,cache:o},zd(t),Ri(t,Mt,o)):(e.lanes&n&&(Nu(e,t),Cr(t,null,null,n),vr()),o=e.memoizedState,l=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ri(t,Mt,i)):(i=l.cache,Ri(t,Mt,i),i!==o.cache&&Au(t,[Mt],n,!0))),Lt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(G(156,t.tag))}function ii(e){e.flags|=4}function zm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Lx(t)){if(t=kn.current,t!==null&&((Ve&4194048)===Ve?Kn!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||t!==Kn))throw yr=_u,Zp;e.flags|=8192}}function As(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?vp():536870912,e.lanes|=t,Sl|=t)}function tr(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function AT(e,t,n){var i=t.pendingProps;switch(Hd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return ft(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),mi(Mt),pl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ql(t)?ii(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vm())),ft(t),null;case 26:return n=t.memoizedState,e===null?(ii(t),n!==null?(ft(t),zm(t,n)):(ft(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ii(t),ft(t),zm(t,n)):(ft(t),t.flags&=-16777217):(e.memoizedProps!==i&&ii(t),ft(t),t.flags&=-16777217),null;case 27:ea(t),n=Hi.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(G(166));return ft(t),null}e=Xn.current,Ql(t)?ym(t):(e=jx(o,i,n),t.stateNode=e,ii(t))}return ft(t),null;case 5:if(ea(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(G(166));return ft(t),null}if(e=Xn.current,Ql(t))ym(t);else{switch(o=ba(Hi.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Ft]=t,e[Qt]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Vt(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ii(t)}}return ft(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(G(166));if(e=Hi.current,Ql(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Ot,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Nx(e.nodeValue,n)),e||vo(t)}else e=ba(e).createTextNode(i),e[Ft]=t,t.stateNode=e}return ft(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Ql(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(G(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[Ft]=t}else Kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),o=!1}else o=vm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(di(t),t):(di(t),null)}if(di(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var l=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),As(t,t.updateQueue),ft(t),null;case 4:return pl(),e===null&&ff(t.stateNode.containerInfo),ft(t),null;case 10:return mi(t.type),ft(t),null;case 19:if(Ut(At),o=t.memoizedState,o===null)return ft(t),null;if(i=(t.flags&128)!==0,l=o.rendering,l===null)if(i)tr(o,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=fa(e),l!==null){for(t.flags|=128,tr(o,!1),e=l.updateQueue,t.updateQueue=e,As(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Jp(n,e),n=n.sibling;return ut(At,At.current&1|2),t.child}e=e.sibling}o.tail!==null&&Wn()>ya&&(t.flags|=128,i=!0,tr(o,!1),t.lanes=4194304)}else{if(!i)if(e=fa(l),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,As(t,e),tr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Oe)return ft(t),null}else 2*Wn()-o.renderingStartTime>ya&&n!==536870912&&(t.flags|=128,i=!0,tr(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Wn(),t.sibling=null,e=At.current,ut(At,i?e&1|2:e&1),t):(ft(t),null);case 22:case 23:return di(t),Gd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),n=t.updateQueue,n!==null&&As(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Ut(po),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),mi(Mt),ft(t),null;case 25:return null;case 30:return null}throw Error(G(156,t.tag))}function kT(e,t){switch(Hd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mi(Mt),pl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ea(t),null;case 13:if(di(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ut(At),null;case 4:return pl(),null;case 10:return mi(t.type),null;case 22:case 23:return di(t),Gd(),e!==null&&Ut(po),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return mi(Mt),null;case 25:return null;default:return null}}function Jy(e,t){switch(Hd(t),t.tag){case 3:mi(Mt),pl();break;case 26:case 27:case 5:ea(t);break;case 4:pl();break;case 13:di(t);break;case 19:Ut(At);break;case 10:mi(t.type);break;case 22:case 23:di(t),Gd(),e!==null&&Ut(po);break;case 24:mi(Mt)}}function is(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var l=n.create,c=n.inst;i=l(),c.destroy=i}n=n.next}while(n!==o)}}catch(u){et(t,t.return,u)}}function Xi(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var l=o.next;i=l;do{if((i.tag&e)===e){var c=i.inst,u=c.destroy;if(u!==void 0){c.destroy=void 0,o=t;var f=n,d=u;try{d()}catch(m){et(o,f,m)}}}i=i.next}while(i!==l)}}catch(m){et(t,t.return,m)}}function Xy(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ty(t,n)}catch(i){et(e,e.return,i)}}}function Wy(e,t,n){n.props=bo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){et(e,t,i)}}function br(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){et(e,t,o)}}function Jn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){et(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){et(e,t,o)}else n.current=null}function Ky(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){et(e,e.return,o)}}function qc(e,t,n){try{var i=e.stateNode;XT(i,e.type,n,t),i[Qt]=t}catch(o){et(e,e.return,o)}}function Zy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zi(e.type)||e.tag===4}function Oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ya));else if(i!==4&&(i===27&&Zi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Hu(e,t,n),e=e.sibling;e!==null;)Hu(e,t,n),e=e.sibling}function pa(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Zi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(pa(e,t,n),e=e.sibling;e!==null;)pa(e,t,n),e=e.sibling}function Qy(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Vt(t,i,n),t[Ft]=e,t[Qt]=n}catch(l){et(e,e.return,l)}}var ri=!1,Ct=!1,Yc=!1,Gm=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function _T(e,t){if(e=e.containerInfo,Ju=Ma,e=Hp(e),Ud(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var c=0,u=-1,f=-1,d=0,m=0,h=e,g=null;t:for(;;){for(var p;h!==n||o!==0&&h.nodeType!==3||(u=c+o),h!==l||i!==0&&h.nodeType!==3||(f=c+i),h.nodeType===3&&(c+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===e)break t;if(g===n&&++d===o&&(u=c),g===l&&++m===i&&(f=c),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xu={focusedElem:e,selectionRange:n},Ma=!1,Dt=t;Dt!==null;)if(t=Dt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Dt=e;else for(;Dt!==null;){switch(t=Dt,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,i=n.stateNode;try{var b=bo(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(b,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(S){et(n,n.return,S)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ku(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ku(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(G(163))}if(e=t.sibling,e!==null){e.return=t.return,Dt=e;break}Dt=t.return}}function ex(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Mi(e,n),i&4&&is(5,n);break;case 1:if(Mi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){et(n,n.return,c)}else{var o=bo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){et(n,n.return,c)}}i&64&&Xy(n),i&512&&br(n,n.return);break;case 3:if(Mi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ty(e,t)}catch(c){et(n,n.return,c)}}break;case 27:t===null&&i&4&&Qy(n);case 26:case 5:Mi(e,n),t===null&&i&4&&Ky(n),i&512&&br(n,n.return);break;case 12:Mi(e,n);break;case 13:Mi(e,n),i&4&&ix(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=VT.bind(null,n),nb(e,n))));break;case 22:if(i=n.memoizedState!==null||ri,!i){t=t!==null&&t.memoizedState!==null||Ct,o=ri;var l=Ct;ri=i,(Ct=t)&&!l?ki(e,n,(n.subtreeFlags&8772)!==0):Mi(e,n),ri=o,Ct=l}break;case 30:break;default:Mi(e,n)}}function tx(e){var t=e.alternate;t!==null&&(e.alternate=null,tx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_d(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var st=null,Kt=!1;function oi(e,t,n){for(n=n.child;n!==null;)nx(e,t,n),n=n.sibling}function nx(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Or,n)}catch{}switch(n.tag){case 26:Ct||Jn(n,t),oi(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ct||Jn(n,t);var i=st,o=Kt;Zi(n.type)&&(st=n.stateNode,Kt=!1),oi(e,t,n),Mr(n.stateNode),st=i,Kt=o;break;case 5:Ct||Jn(n,t);case 6:if(i=st,o=Kt,st=null,oi(e,t,n),st=i,Kt=o,st!==null)if(Kt)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(n.stateNode)}catch(l){et(n,t,l)}else try{st.removeChild(n.stateNode)}catch(l){et(n,t,l)}break;case 18:st!==null&&(Kt?(e=st,nh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Br(e)):nh(st,n.stateNode));break;case 4:i=st,o=Kt,st=n.stateNode.containerInfo,Kt=!0,oi(e,t,n),st=i,Kt=o;break;case 0:case 11:case 14:case 15:Ct||Xi(2,n,t),Ct||Xi(4,n,t),oi(e,t,n);break;case 1:Ct||(Jn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Wy(n,t,i)),oi(e,t,n);break;case 21:oi(e,t,n);break;case 22:Ct=(i=Ct)||n.memoizedState!==null,oi(e,t,n),Ct=i;break;default:oi(e,t,n)}}function ix(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Br(e)}catch(n){et(t,t.return,n)}}function NT(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gm),t;default:throw Error(G(435,e.tag))}}function Jc(e,t){var n=NT(e);t.forEach(function(i){var o=$T.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function ln(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],l=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 27:if(Zi(u.type)){st=u.stateNode,Kt=!1;break e}break;case 5:st=u.stateNode,Kt=!1;break e;case 3:case 4:st=u.stateNode.containerInfo,Kt=!0;break e}u=u.return}if(st===null)throw Error(G(160));nx(l,c,o),st=null,Kt=!1,l=o.alternate,l!==null&&(l.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ox(t,e),t=t.sibling}var Pn=null;function ox(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ln(t,e),rn(e),i&4&&(Xi(3,e,e.return),is(3,e),Xi(5,e,e.return));break;case 1:ln(t,e),rn(e),i&512&&(Ct||n===null||Jn(n,n.return)),i&64&&ri&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Pn;if(ln(t,e),rn(e),i&512&&(Ct||n===null||Jn(n,n.return)),i&4){var l=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":l=o.getElementsByTagName("title")[0],(!l||l[Xr]||l[Ft]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=o.createElement(i),o.head.insertBefore(l,o.querySelector("head > title"))),Vt(l,i,n),l[Ft]=e,jt(l),i=l;break e;case"link":var c=sh("link","href",o).get(i+(n.href||""));if(c){for(var u=0;u<c.length;u++)if(l=c[u],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(u,1);break t}}l=o.createElement(i),Vt(l,i,n),o.head.appendChild(l);break;case"meta":if(c=sh("meta","content",o).get(i+(n.content||""))){for(u=0;u<c.length;u++)if(l=c[u],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(u,1);break t}}l=o.createElement(i),Vt(l,i,n),o.head.appendChild(l);break;default:throw Error(G(468,i))}l[Ft]=e,jt(l),i=l}e.stateNode=i}else ah(o,e.type,e.stateNode);else e.stateNode=rh(o,i,e.memoizedProps);else l!==i?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,i===null?ah(o,e.type,e.stateNode):rh(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps)}break;case 27:ln(t,e),rn(e),i&512&&(Ct||n===null||Jn(n,n.return)),n!==null&&i&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ln(t,e),rn(e),i&512&&(Ct||n===null||Jn(n,n.return)),e.flags&32){o=e.stateNode;try{xl(o,"")}catch(p){et(e,e.return,p)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,qc(e,o,n!==null?n.memoizedProps:o)),i&1024&&(Yc=!0);break;case 6:if(ln(t,e),rn(e),i&4){if(e.stateNode===null)throw Error(G(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){et(e,e.return,p)}}break;case 3:if(Ys=null,o=Pn,Pn=Sa(t.containerInfo),ln(t,e),Pn=o,rn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Br(t.containerInfo)}catch(p){et(e,e.return,p)}Yc&&(Yc=!1,lx(e));break;case 4:i=Pn,Pn=Sa(e.stateNode.containerInfo),ln(t,e),rn(e),Pn=i;break;case 12:ln(t,e),rn(e);break;case 13:ln(t,e),rn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cf=Wn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Jc(e,i)));break;case 22:o=e.memoizedState!==null;var f=n!==null&&n.memoizedState!==null,d=ri,m=Ct;if(ri=d||o,Ct=m||f,ln(t,e),Ct=m,ri=d,rn(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||f||ri||Ct||uo(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){f=n=t;try{if(l=f.stateNode,o)c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{u=f.stateNode;var h=f.memoizedProps.style,g=h!=null&&h.hasOwnProperty("display")?h.display:null;u.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(p){et(f,f.return,p)}}}else if(t.tag===6){if(n===null){f=t;try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(p){et(f,f.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Jc(e,n))));break;case 19:ln(t,e),rn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Jc(e,i)));break;case 30:break;case 21:break;default:ln(t,e),rn(e)}}function rn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Zy(i)){n=i;break}i=i.return}if(n==null)throw Error(G(160));switch(n.tag){case 27:var o=n.stateNode,l=Oc(e);pa(e,l,o);break;case 5:var c=n.stateNode;n.flags&32&&(xl(c,""),n.flags&=-33);var u=Oc(e);pa(e,u,c);break;case 3:case 4:var f=n.stateNode.containerInfo,d=Oc(e);Hu(e,d,f);break;default:throw Error(G(161))}}catch(m){et(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;lx(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Mi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ex(e,t.alternate,t),t=t.sibling}function uo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Xi(4,t,t.return),uo(t);break;case 1:Jn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Wy(t,t.return,n),uo(t);break;case 27:Mr(t.stateNode);case 26:case 5:Jn(t,t.return),uo(t);break;case 22:t.memoizedState===null&&uo(t);break;case 30:uo(t);break;default:uo(t)}e=e.sibling}}function ki(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,l=t,c=l.flags;switch(l.tag){case 0:case 11:case 15:ki(o,l,n),is(4,l);break;case 1:if(ki(o,l,n),i=l,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(d){et(i,i.return,d)}if(i=l,o=i.updateQueue,o!==null){var u=i.stateNode;try{var f=o.shared.hiddenCallbacks;if(f!==null)for(o.shared.hiddenCallbacks=null,o=0;o<f.length;o++)ey(f[o],u)}catch(d){et(i,i.return,d)}}n&&c&64&&Xy(l),br(l,l.return);break;case 27:Qy(l);case 26:case 5:ki(o,l,n),n&&i===null&&c&4&&Ky(l),br(l,l.return);break;case 12:ki(o,l,n);break;case 13:ki(o,l,n),n&&c&4&&ix(o,l);break;case 22:l.memoizedState===null&&ki(o,l,n),br(l,l.return);break;case 30:break;default:ki(o,l,n)}t=t.sibling}}function lf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Qr(n))}function rf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qr(e))}function qn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rx(e,t,n,i),t=t.sibling}function rx(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:qn(e,t,n,i),o&2048&&is(9,t);break;case 1:qn(e,t,n,i);break;case 3:qn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Qr(e)));break;case 12:if(o&2048){qn(e,t,n,i),e=t.stateNode;try{var l=t.memoizedProps,c=l.id,u=l.onPostCommit;typeof u=="function"&&u(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){et(t,t.return,f)}}else qn(e,t,n,i);break;case 13:qn(e,t,n,i);break;case 23:break;case 22:l=t.stateNode,c=t.alternate,t.memoizedState!==null?l._visibility&2?qn(e,t,n,i):Sr(e,t):l._visibility&2?qn(e,t,n,i):(l._visibility|=2,Bo(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&lf(c,t);break;case 24:qn(e,t,n,i),o&2048&&rf(t.alternate,t);break;default:qn(e,t,n,i)}}function Bo(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,c=t,u=n,f=i,d=c.flags;switch(c.tag){case 0:case 11:case 15:Bo(l,c,u,f,o),is(8,c);break;case 23:break;case 22:var m=c.stateNode;c.memoizedState!==null?m._visibility&2?Bo(l,c,u,f,o):Sr(l,c):(m._visibility|=2,Bo(l,c,u,f,o)),o&&d&2048&&lf(c.alternate,c);break;case 24:Bo(l,c,u,f,o),o&&d&2048&&rf(c.alternate,c);break;default:Bo(l,c,u,f,o)}t=t.sibling}}function Sr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:Sr(n,i),o&2048&&lf(i.alternate,i);break;case 24:Sr(n,i),o&2048&&rf(i.alternate,i);break;default:Sr(n,i)}t=t.sibling}}var dr=8192;function Po(e){if(e.subtreeFlags&dr)for(e=e.child;e!==null;)sx(e),e=e.sibling}function sx(e){switch(e.tag){case 26:Po(e),e.flags&dr&&e.memoizedState!==null&&gb(Pn,e.memoizedState,e.memoizedProps);break;case 5:Po(e);break;case 3:case 4:var t=Pn;Pn=Sa(e.stateNode.containerInfo),Po(e),Pn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=dr,dr=16777216,Po(e),dr=t):Po(e));break;default:Po(e)}}function ax(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function nr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Dt=i,ux(i,e)}ax(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cx(e),e=e.sibling}function cx(e){switch(e.tag){case 0:case 11:case 15:nr(e),e.flags&2048&&Xi(9,e,e.return);break;case 3:nr(e);break;case 12:nr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qs(e)):nr(e);break;default:nr(e)}}function qs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Dt=i,ux(i,e)}ax(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Xi(8,t,t.return),qs(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,qs(t));break;default:qs(t)}e=e.sibling}}function ux(e,t){for(;Dt!==null;){var n=Dt;switch(n.tag){case 0:case 11:case 15:Xi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Qr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Dt=i;else e:for(n=e;Dt!==null;){i=Dt;var o=i.sibling,l=i.return;if(tx(i),i===n){Dt=null;break e}if(o!==null){o.return=l,Dt=o;break e}Dt=l}}}var RT={getCacheForType:function(e){var t=zt(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},DT=typeof WeakMap=="function"?WeakMap:Map,We=0,tt=null,Ue=null,Ve=0,Xe=0,sn=null,Pi=!1,Dl=!1,sf=!1,yi=0,gt=0,Wi=0,yo=0,af=0,Mn=0,Sl=0,wr=null,Zt=null,Bu=!1,cf=0,ya=1/0,xa=null,zi=null,Pt=0,Gi=null,wl=null,dl=0,Fu=0,zu=null,dx=null,Er=0,Gu=null;function dn(){if(We&2&&Ve!==0)return Ve&-Ve;if(we.T!==null){var e=vl;return e!==0?e:df()}return bp()}function fx(){Mn===0&&(Mn=!(Ve&536870912)||Oe?xp():536870912);var e=kn.current;return e!==null&&(e.flags|=32),Mn}function fn(e,t,n){(e===tt&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)&&(El(e,0),Vi(e,Ve,Mn,!1)),Jr(e,n),(!(We&2)||e!==tt)&&(e===tt&&(!(We&2)&&(yo|=n),gt===4&&Vi(e,Ve,Mn,!1)),Qn(e))}function mx(e,t,n){if(We&6)throw Error(G(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Yr(e,t),o=i?UT(e,t):Xc(e,t,!0),l=i;do{if(o===0){Dl&&!i&&Vi(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!jT(n)){o=Xc(e,t,!1),l=!1;continue}if(o===2){if(l=t,e.errorRecoveryDisabledLanes&l)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var u=e;o=wr;var f=u.current.memoizedState.isDehydrated;if(f&&(El(u,c).flags|=256),c=Xc(u,c,!1),c!==2){if(sf&&!f){u.errorRecoveryDisabledLanes|=l,yo|=l,o=4;break e}l=Zt,Zt=o,l!==null&&(Zt===null?Zt=l:Zt.push.apply(Zt,l))}o=c}if(l=!1,o!==2)continue}}if(o===1){El(e,0),Vi(e,t,0,!0);break}e:{switch(i=e,l=o,l){case 0:case 1:throw Error(G(345));case 4:if((t&4194048)!==t)break;case 6:Vi(i,t,Mn,!Pi);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(G(329))}if((t&62914560)===t&&(o=cf+300-Wn(),10<o)){if(Vi(i,t,Mn,!Pi),Ia(i,0,!0)!==0)break e;i.timeoutHandle=Dx(qm.bind(null,i,n,Zt,xa,Bu,t,Mn,yo,Sl,Pi,l,2,-0,0),o);break e}qm(i,n,Zt,xa,Bu,t,Mn,yo,Sl,Pi,l,0,-0,0)}}break}while(!0);Qn(e)}function qm(e,t,n,i,o,l,c,u,f,d,m,h,g,p){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(Pr={stylesheets:null,count:0,unsuspend:hb},sx(t),h=pb(),h!==null)){e.cancelPendingCommit=h(Ym.bind(null,e,t,l,n,i,o,c,u,f,m,1,g,p)),Vi(e,l,c,!d);return}Ym(e,t,l,n,i,o,c,u,f)}function jT(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!mn(l(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vi(e,t,n,i){t&=~af,t&=~yo,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var l=31-un(o),c=1<<l;i[l]=-1,o&=~c}n!==0&&Cp(e,n,t)}function Ga(){return We&6?!0:(os(0),!1)}function uf(){if(Ue!==null){if(Xe===0)var e=Ue.return;else e=Ue,ui=ko=null,Xd(e),ul=null,Ir=0,e=Ue;for(;e!==null;)Jy(e.alternate,e),e=e.return;Ue=null}}function El(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,KT(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uf(),tt=e,Ue=n=fi(e.current,null),Ve=t,Xe=0,sn=null,Pi=!1,Dl=Yr(e,t),sf=!1,Sl=Mn=af=yo=Wi=gt=0,Zt=wr=null,Bu=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-un(i),l=1<<o;t|=e[o],i&=~l}return yi=t,Va(),n}function hx(e,t){je=null,we.H=da,t===es||t===Ha?(t=Sm(),Xe=3):t===Zp?(t=Sm(),Xe=4):Xe=t===Fy?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,sn=t,Ue===null&&(gt=1,ha(e,En(t,e.current)))}function gx(){var e=we.H;return we.H=da,e===null?da:e}function px(){var e=we.A;return we.A=RT,e}function qu(){gt=4,Pi||(Ve&4194048)!==Ve&&kn.current!==null||(Dl=!0),!(Wi&134217727)&&!(yo&134217727)||tt===null||Vi(tt,Ve,Mn,!1)}function Xc(e,t,n){var i=We;We|=2;var o=gx(),l=px();(tt!==e||Ve!==t)&&(xa=null,El(e,t)),t=!1;var c=gt;e:do try{if(Xe!==0&&Ue!==null){var u=Ue,f=sn;switch(Xe){case 8:uf(),c=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(t=!0);var d=Xe;if(Xe=0,sn=null,tl(e,u,f,d),n&&Dl){c=0;break e}break;default:d=Xe,Xe=0,sn=null,tl(e,u,f,d)}}IT(),c=gt;break}catch(m){hx(e,m)}while(!0);return t&&e.shellSuspendCounter++,ui=ko=null,We=i,we.H=o,we.A=l,Ue===null&&(tt=null,Ve=0,Va()),c}function IT(){for(;Ue!==null;)yx(Ue)}function UT(e,t){var n=We;We|=2;var i=gx(),o=px();tt!==e||Ve!==t?(xa=null,ya=Wn()+500,El(e,t)):Dl=Yr(e,t);e:do try{if(Xe!==0&&Ue!==null){t=Ue;var l=sn;t:switch(Xe){case 1:Xe=0,sn=null,tl(e,t,l,1);break;case 2:case 9:if(bm(l)){Xe=0,sn=null,Om(t);break}t=function(){Xe!==2&&Xe!==9||tt!==e||(Xe=7),Qn(e)},l.then(t,t);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:bm(l)?(Xe=0,sn=null,Om(t)):(Xe=0,sn=null,tl(e,t,l,7));break;case 5:var c=null;switch(Ue.tag){case 26:c=Ue.memoizedState;case 5:case 27:var u=Ue;if(!c||Lx(c)){Xe=0,sn=null;var f=u.sibling;if(f!==null)Ue=f;else{var d=u.return;d!==null?(Ue=d,qa(d)):Ue=null}break t}}Xe=0,sn=null,tl(e,t,l,5);break;case 6:Xe=0,sn=null,tl(e,t,l,6);break;case 8:uf(),gt=6;break e;default:throw Error(G(462))}}LT();break}catch(m){hx(e,m)}while(!0);return ui=ko=null,we.H=i,we.A=o,We=n,Ue!==null?0:(tt=null,Ve=0,Va(),gt)}function LT(){for(;Ue!==null&&!oC();)yx(Ue)}function yx(e){var t=Yy(e.alternate,e,yi);e.memoizedProps=e.pendingProps,t===null?qa(e):Ue=t}function Om(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=$m(n,t,t.pendingProps,t.type,void 0,Ve);break;case 11:t=$m(n,t,t.pendingProps,t.type.render,t.ref,Ve);break;case 5:Xd(t);default:Jy(n,t),t=Ue=Jp(t,yi),t=Yy(n,t,yi)}e.memoizedProps=e.pendingProps,t===null?qa(e):Ue=t}function tl(e,t,n,i){ui=ko=null,Xd(t),ul=null,Ir=0;var o=t.return;try{if(ET(e,o,t,n,Ve)){gt=1,ha(e,En(n,e.current)),Ue=null;return}}catch(l){if(o!==null)throw Ue=o,l;gt=1,ha(e,En(n,e.current)),Ue=null;return}t.flags&32768?(Oe||i===1?e=!0:Dl||Ve&536870912?e=!1:(Pi=e=!0,(i===2||i===9||i===3||i===6)&&(i=kn.current,i!==null&&i.tag===13&&(i.flags|=16384))),xx(t,e)):qa(t)}function qa(e){var t=e;do{if(t.flags&32768){xx(t,Pi);return}e=t.return;var n=AT(t.alternate,t,yi);if(n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);gt===0&&(gt=5)}function xx(e,t){do{var n=kT(e.alternate,e);if(n!==null){n.flags&=32767,Ue=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=n}while(e!==null);gt=6,Ue=null}function Ym(e,t,n,i,o,l,c,u,f){e.cancelPendingCommit=null;do Oa();while(Pt!==0);if(We&6)throw Error(G(327));if(t!==null){if(t===e.current)throw Error(G(177));if(l=t.lanes|t.childLanes,l|=Ld,hC(e,n,l,c,u,f),e===tt&&(Ue=tt=null,Ve=0),wl=t,Gi=e,dl=n,Fu=l,zu=o,dx=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,HT(ta,function(){return Sx(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=we.T,we.T=null,o=Ye.p,Ye.p=2,c=We,We|=4;try{_T(e,t,n)}finally{We=c,Ye.p=o,we.T=i}}Pt=1,vx(),Cx(),Tx()}}function vx(){if(Pt===1){Pt=0;var e=Gi,t=wl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=we.T,we.T=null;var i=Ye.p;Ye.p=2;var o=We;We|=4;try{ox(t,e);var l=Xu,c=Hp(e.containerInfo),u=l.focusedElem,f=l.selectionRange;if(c!==u&&u&&u.ownerDocument&&$p(u.ownerDocument.documentElement,u)){if(f!==null&&Ud(u)){var d=f.start,m=f.end;if(m===void 0&&(m=d),"selectionStart"in u)u.selectionStart=d,u.selectionEnd=Math.min(m,u.value.length);else{var h=u.ownerDocument||document,g=h&&h.defaultView||window;if(g.getSelection){var p=g.getSelection(),b=u.textContent.length,S=Math.min(f.start,b),E=f.end===void 0?S:Math.min(f.end,b);!p.extend&&S>E&&(c=E,E=S,S=c);var x=hm(u,S),y=hm(u,E);if(x&&y&&(p.rangeCount!==1||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var C=h.createRange();C.setStart(x.node,x.offset),p.removeAllRanges(),S>E?(p.addRange(C),p.extend(y.node,y.offset)):(C.setEnd(y.node,y.offset),p.addRange(C))}}}}for(h=[],p=u;p=p.parentNode;)p.nodeType===1&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<h.length;u++){var v=h[u];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}Ma=!!Ju,Xu=Ju=null}finally{We=o,Ye.p=i,we.T=n}}e.current=t,Pt=2}}function Cx(){if(Pt===2){Pt=0;var e=Gi,t=wl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=we.T,we.T=null;var i=Ye.p;Ye.p=2;var o=We;We|=4;try{ex(e,t.alternate,t)}finally{We=o,Ye.p=i,we.T=n}}Pt=3}}function Tx(){if(Pt===4||Pt===3){Pt=0,lC();var e=Gi,t=wl,n=dl,i=dx;t.subtreeFlags&10256||t.flags&10256?Pt=5:(Pt=0,wl=Gi=null,bx(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(zi=null),kd(n),t=t.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Or,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=we.T,o=Ye.p,Ye.p=2,we.T=null;try{for(var l=e.onRecoverableError,c=0;c<i.length;c++){var u=i[c];l(u.value,{componentStack:u.stack})}}finally{we.T=t,Ye.p=o}}dl&3&&Oa(),Qn(e),o=e.pendingLanes,n&4194090&&o&42?e===Gu?Er++:(Er=0,Gu=e):Er=0,os(0)}}function bx(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Qr(t)))}function Oa(e){return vx(),Cx(),Tx(),Sx()}function Sx(){if(Pt!==5)return!1;var e=Gi,t=Fu;Fu=0;var n=kd(dl),i=we.T,o=Ye.p;try{Ye.p=32>n?32:n,we.T=null,n=zu,zu=null;var l=Gi,c=dl;if(Pt=0,wl=Gi=null,dl=0,We&6)throw Error(G(331));var u=We;if(We|=4,cx(l.current),rx(l,l.current,c,n),We=u,os(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Or,l)}catch{}return!0}finally{Ye.p=o,we.T=i,bx(e,t)}}function Jm(e,t,n){t=En(n,t),t=Pu(e.stateNode,t,2),e=Fi(e,t,2),e!==null&&(Jr(e,2),Qn(e))}function et(e,t,n){if(e.tag===3)Jm(e,e,n);else for(;t!==null;){if(t.tag===3){Jm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zi===null||!zi.has(i))){e=En(n,e),n=Hy(2),i=Fi(t,n,2),i!==null&&(By(n,i,t,e),Jr(i,2),Qn(i));break}}t=t.return}}function Wc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new DT;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(sf=!0,o.add(n),e=PT.bind(null,e,t,n),t.then(e,e))}function PT(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tt===e&&(Ve&n)===n&&(gt===4||gt===3&&(Ve&62914560)===Ve&&300>Wn()-cf?!(We&2)&&El(e,0):af|=n,Sl===Ve&&(Sl=0)),Qn(e)}function wx(e,t){t===0&&(t=vp()),e=Rl(e,t),e!==null&&(Jr(e,t),Qn(e))}function VT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wx(e,n)}function $T(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(G(314))}i!==null&&i.delete(t),wx(e,n)}function HT(e,t){return Md(e,t)}var va=null,Fo=null,Ou=!1,Ca=!1,Kc=!1,xo=0;function Qn(e){e!==Fo&&e.next===null&&(Fo===null?va=Fo=e:Fo=Fo.next=e),Ca=!0,Ou||(Ou=!0,FT())}function os(e,t){if(!Kc&&Ca){Kc=!0;do for(var n=!1,i=va;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var l=0;else{var c=i.suspendedLanes,u=i.pingedLanes;l=(1<<31-un(42|e)+1)-1,l&=o&~(c&~u),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,Xm(i,l))}else l=Ve,l=Ia(i,i===tt?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(l&3)||Yr(i,l)||(n=!0,Xm(i,l));i=i.next}while(n);Kc=!1}}function BT(){Ex()}function Ex(){Ca=Ou=!1;var e=0;xo!==0&&(WT()&&(e=xo),xo=0);for(var t=Wn(),n=null,i=va;i!==null;){var o=i.next,l=Mx(i,t);l===0?(i.next=null,n===null?va=o:n.next=o,o===null&&(Fo=n)):(n=i,(e!==0||l&3)&&(Ca=!0)),i=o}os(e)}function Mx(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var c=31-un(l),u=1<<c,f=o[c];f===-1?(!(u&n)||u&i)&&(o[c]=mC(u,t)):f<=t&&(e.expiredLanes|=u),l&=~u}if(t=tt,n=Ve,n=Ia(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Xe===2||Xe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Yr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Sc(i),kd(n)){case 2:case 8:n=pp;break;case 32:n=ta;break;case 268435456:n=yp;break;default:n=ta}return i=Ax.bind(null,e),n=Md(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Sc(i),e.callbackPriority=2,e.callbackNode=null,2}function Ax(e,t){if(Pt!==0&&Pt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Oa()&&e.callbackNode!==n)return null;var i=Ve;return i=Ia(e,e===tt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(mx(e,i,t),Mx(e,Wn()),e.callbackNode!=null&&e.callbackNode===n?Ax.bind(null,e):null)}function Xm(e,t){if(Oa())return null;mx(e,t,!0)}function FT(){ZT(function(){We&6?Md(gp,BT):Ex()})}function df(){return xo===0&&(xo=xp()),xo}function Wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ps(""+e)}function Km(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function zT(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var l=Wm((o[Qt]||null).action),c=i.submitter;c&&(t=(t=c[Qt]||null)?Wm(t.formAction):c.getAttribute("formAction"),t!==null&&(l=t,c=null));var u=new Ua("action","action",null,i,o);e.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(xo!==0){var f=c?Km(o,c):new FormData(o);Uu(n,{pending:!0,data:f,method:o.method,action:l},null,f)}}else typeof l=="function"&&(u.preventDefault(),f=c?Km(o,c):new FormData(o),Uu(n,{pending:!0,data:f,method:o.method,action:l},l,f))},currentTarget:o}]})}}for(var Zc=0;Zc<Su.length;Zc++){var Qc=Su[Zc],GT=Qc.toLowerCase(),qT=Qc[0].toUpperCase()+Qc.slice(1);$n(GT,"on"+qT)}$n(Fp,"onAnimationEnd");$n(zp,"onAnimationIteration");$n(Gp,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(aT,"onTransitionRun");$n(cT,"onTransitionStart");$n(uT,"onTransitionCancel");$n(qp,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function kx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var c=i.length-1;0<=c;c--){var u=i[c],f=u.instance,d=u.currentTarget;if(u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){ma(m)}o.currentTarget=null,l=f}else for(c=0;c<i.length;c++){if(u=i[c],f=u.instance,d=u.currentTarget,u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){ma(m)}o.currentTarget=null,l=f}}}}function Ie(e,t){var n=t[pu];n===void 0&&(n=t[pu]=new Set);var i=e+"__bubble";n.has(i)||(_x(t,e,2,!1),n.add(i))}function eu(e,t,n){var i=0;t&&(i|=4),_x(n,e,i,t)}var ks="_reactListening"+Math.random().toString(36).slice(2);function ff(e){if(!e[ks]){e[ks]=!0,Sp.forEach(function(n){n!=="selectionchange"&&(OT.has(n)||eu(n,!1,e),eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ks]||(t[ks]=!0,eu("selectionchange",!1,t))}}function _x(e,t,n,i){switch(Bx(t)){case 2:var o=vb;break;case 8:o=Cb;break;default:o=pf}n=o.bind(null,t,n,e),o=void 0,!Cu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function tu(e,t,n,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var u=i.stateNode.containerInfo;if(u===o)break;if(c===4)for(c=i.return;c!==null;){var f=c.tag;if((f===3||f===4)&&c.stateNode.containerInfo===o)return;c=c.return}for(;u!==null;){if(c=Oo(u),c===null)return;if(f=c.tag,f===5||f===6||f===26||f===27){i=l=c;continue e}u=u.parentNode}}i=i.return}Rp(function(){var d=l,m=Rd(n),h=[];e:{var g=Op.get(e);if(g!==void 0){var p=Ua,b=e;switch(e){case"keypress":if($s(n)===0)break e;case"keydown":case"keyup":p=HC;break;case"focusin":b="focus",p=Rc;break;case"focusout":b="blur",p=Rc;break;case"beforeblur":case"afterblur":p=Rc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=zC;break;case Fp:case zp:case Gp:p=RC;break;case qp:p=qC;break;case"scroll":case"scrollend":p=MC;break;case"wheel":p=YC;break;case"copy":case"cut":case"paste":p=jC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rm;break;case"toggle":case"beforetoggle":p=XC}var S=(t&4)!==0,E=!S&&(e==="scroll"||e==="scrollend"),x=S?g!==null?g+"Capture":null:g;S=[];for(var y=d,C;y!==null;){var v=y;if(C=v.stateNode,v=v.tag,v!==5&&v!==26&&v!==27||C===null||x===null||(v=_r(y,x),v!=null&&S.push(Lr(y,v,C))),E)break;y=y.return}0<S.length&&(g=new p(g,b,null,n,m),h.push({event:g,listeners:S}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==vu&&(b=n.relatedTarget||n.fromElement)&&(Oo(b)||b[_l]))break e;if((p||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=d,b=b?Oo(b):null,b!==null&&(E=qr(b),S=b.tag,b!==E||S!==5&&S!==27&&S!==6)&&(b=null)):(p=null,b=d),p!==b)){if(S=om,v="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(S=rm,v="onPointerLeave",x="onPointerEnter",y="pointer"),E=p==null?g:ur(p),C=b==null?g:ur(b),g=new S(v,y+"leave",p,n,m),g.target=E,g.relatedTarget=C,v=null,Oo(m)===d&&(S=new S(x,y+"enter",b,n,m),S.target=C,S.relatedTarget=E,v=S),E=v,p&&b)t:{for(S=p,x=b,y=0,C=S;C;C=Vo(C))y++;for(C=0,v=x;v;v=Vo(v))C++;for(;0<y-C;)S=Vo(S),y--;for(;0<C-y;)x=Vo(x),C--;for(;y--;){if(S===x||x!==null&&S===x.alternate)break t;S=Vo(S),x=Vo(x)}S=null}else S=null;p!==null&&Zm(h,g,p,S,!1),b!==null&&E!==null&&Zm(h,E,b,S,!0)}}e:{if(g=d?ur(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var A=um;else if(cm(g))if(Pp)A=lT;else{A=iT;var _=nT}else p=g.nodeName,!p||p.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&Nd(d.elementType)&&(A=um):A=oT;if(A&&(A=A(e,d))){Lp(h,A,n,m);break e}_&&_(e,g,d),e==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&xu(g,"number",g.value)}switch(_=d?ur(d):window,e){case"focusin":(cm(_)||_.contentEditable==="true")&&(Xo=_,Tu=d,gr=null);break;case"focusout":gr=Tu=Xo=null;break;case"mousedown":bu=!0;break;case"contextmenu":case"mouseup":case"dragend":bu=!1,gm(h,n,m);break;case"selectionchange":if(sT)break;case"keydown":case"keyup":gm(h,n,m)}var N;if(Id)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Jo?Ip(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(jp&&n.locale!=="ko"&&(Jo||V!=="onCompositionStart"?V==="onCompositionEnd"&&Jo&&(N=Dp()):(Li=m,Dd="value"in Li?Li.value:Li.textContent,Jo=!0)),_=Ta(d,V),0<_.length&&(V=new lm(V,e,null,n,m),h.push({event:V,listeners:_}),N?V.data=N:(N=Up(n),N!==null&&(V.data=N)))),(N=KC?ZC(e,n):QC(e,n))&&(V=Ta(d,"onBeforeInput"),0<V.length&&(_=new lm("onBeforeInput","beforeinput",null,n,m),h.push({event:_,listeners:V}),_.data=N)),zT(h,e,d,n,m)}kx(h,t)})}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ta(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||l===null||(o=_r(e,n),o!=null&&i.unshift(Lr(e,o,l)),o=_r(e,t),o!=null&&i.push(Lr(e,o,l))),e.tag===3)return i;e=e.return}return[]}function Vo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zm(e,t,n,i,o){for(var l=t._reactName,c=[];n!==null&&n!==i;){var u=n,f=u.alternate,d=u.stateNode;if(u=u.tag,f!==null&&f===i)break;u!==5&&u!==26&&u!==27||d===null||(f=d,o?(d=_r(n,l),d!=null&&c.unshift(Lr(n,d,f))):o||(d=_r(n,l),d!=null&&c.push(Lr(n,d,f)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var YT=/\r\n?/g,JT=/\u0000|\uFFFD/g;function Qm(e){return(typeof e=="string"?e:""+e).replace(YT,`
`).replace(JT,"")}function Nx(e,t){return t=Qm(t),Qm(e)===t}function Ya(){}function Ze(e,t,n,i,o,l){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||xl(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&xl(e,""+i);break;case"className":Ts(e,"class",i);break;case"tabIndex":Ts(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(e,n,i);break;case"style":Np(e,i,l);break;case"data":if(t!=="object"){Ts(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ps(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&Ze(e,t,"name",o.name,o,null),Ze(e,t,"formEncType",o.formEncType,o,null),Ze(e,t,"formMethod",o.formMethod,o,null),Ze(e,t,"formTarget",o.formTarget,o,null)):(Ze(e,t,"encType",o.encType,o,null),Ze(e,t,"method",o.method,o,null),Ze(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ps(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Ya);break;case"onScroll":i!=null&&Ie("scroll",e);break;case"onScrollEnd":i!=null&&Ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(G(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(G(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Ps(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ie("beforetoggle",e),Ie("toggle",e),Ls(e,"popover",i);break;case"xlinkActuate":ni(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ni(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ni(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ni(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ni(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ni(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ni(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ni(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ni(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ls(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wC.get(n)||n,Ls(e,n,i))}}function Yu(e,t,n,i,o,l){switch(n){case"style":Np(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(G(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(G(60));e.innerHTML=n}}break;case"children":typeof i=="string"?xl(e,i):(typeof i=="number"||typeof i=="bigint")&&xl(e,""+i);break;case"onScroll":i!=null&&Ie("scroll",e);break;case"onScrollEnd":i!=null&&Ie("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Ya);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wp.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),l=e[Qt]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,o),typeof i=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Ls(e,n,i)}}}function Vt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",e),Ie("load",e);var i=!1,o=!1,l;for(l in n)if(n.hasOwnProperty(l)){var c=n[l];if(c!=null)switch(l){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(G(137,t));default:Ze(e,t,l,c,n,null)}}o&&Ze(e,t,"srcSet",n.srcSet,n,null),i&&Ze(e,t,"src",n.src,n,null);return;case"input":Ie("invalid",e);var u=l=c=o=null,f=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":o=m;break;case"type":c=m;break;case"checked":f=m;break;case"defaultChecked":d=m;break;case"value":l=m;break;case"defaultValue":u=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(G(137,t));break;default:Ze(e,t,i,m,n,null)}}Ap(e,l,u,f,d,c,o,!1),na(e);return;case"select":Ie("invalid",e),i=c=l=null;for(o in n)if(n.hasOwnProperty(o)&&(u=n[o],u!=null))switch(o){case"value":l=u;break;case"defaultValue":c=u;break;case"multiple":i=u;default:Ze(e,t,o,u,n,null)}t=l,n=c,e.multiple=!!i,t!=null?ll(e,!!i,t,!1):n!=null&&ll(e,!!i,n,!0);return;case"textarea":Ie("invalid",e),l=o=i=null;for(c in n)if(n.hasOwnProperty(c)&&(u=n[c],u!=null))switch(c){case"value":i=u;break;case"defaultValue":o=u;break;case"children":l=u;break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(G(91));break;default:Ze(e,t,c,u,n,null)}_p(e,i,o,l),na(e);return;case"option":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ze(e,t,f,i,n,null)}return;case"dialog":Ie("beforetoggle",e),Ie("toggle",e),Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":Ie("load",e);break;case"video":case"audio":for(i=0;i<Ur.length;i++)Ie(Ur[i],e);break;case"image":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"embed":case"source":case"link":Ie("error",e),Ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(G(137,t));default:Ze(e,t,d,i,n,null)}return;default:if(Nd(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Yu(e,t,m,i,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!=null&&Ze(e,t,u,i,n,null))}function XT(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,c=null,u=null,f=null,d=null,m=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&h!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":f=h;default:i.hasOwnProperty(p)||Ze(e,t,p,null,i,h)}}for(var g in i){var p=i[g];if(h=n[g],i.hasOwnProperty(g)&&(p!=null||h!=null))switch(g){case"type":l=p;break;case"name":o=p;break;case"checked":d=p;break;case"defaultChecked":m=p;break;case"value":c=p;break;case"defaultValue":u=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(G(137,t));break;default:p!==h&&Ze(e,t,g,p,i,h)}}yu(e,c,u,f,d,m,l,o);return;case"select":p=c=u=g=null;for(l in n)if(f=n[l],n.hasOwnProperty(l)&&f!=null)switch(l){case"value":break;case"multiple":p=f;default:i.hasOwnProperty(l)||Ze(e,t,l,null,i,f)}for(o in i)if(l=i[o],f=n[o],i.hasOwnProperty(o)&&(l!=null||f!=null))switch(o){case"value":g=l;break;case"defaultValue":u=l;break;case"multiple":c=l;default:l!==f&&Ze(e,t,o,l,i,f)}t=u,n=c,i=p,g!=null?ll(e,!!n,g,!1):!!i!=!!n&&(t!=null?ll(e,!!n,t,!0):ll(e,!!n,n?[]:"",!1));return;case"textarea":p=g=null;for(u in n)if(o=n[u],n.hasOwnProperty(u)&&o!=null&&!i.hasOwnProperty(u))switch(u){case"value":break;case"children":break;default:Ze(e,t,u,null,i,o)}for(c in i)if(o=i[c],l=n[c],i.hasOwnProperty(c)&&(o!=null||l!=null))switch(c){case"value":g=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(G(91));break;default:o!==l&&Ze(e,t,c,o,i,l)}kp(e,g,p);return;case"option":for(var b in n)if(g=n[b],n.hasOwnProperty(b)&&g!=null&&!i.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Ze(e,t,b,null,i,g)}for(f in i)if(g=i[f],p=n[f],i.hasOwnProperty(f)&&g!==p&&(g!=null||p!=null))switch(f){case"selected":e.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ze(e,t,f,g,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)g=n[S],n.hasOwnProperty(S)&&g!=null&&!i.hasOwnProperty(S)&&Ze(e,t,S,null,i,g);for(d in i)if(g=i[d],p=n[d],i.hasOwnProperty(d)&&g!==p&&(g!=null||p!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(G(137,t));break;default:Ze(e,t,d,g,i,p)}return;default:if(Nd(t)){for(var E in n)g=n[E],n.hasOwnProperty(E)&&g!==void 0&&!i.hasOwnProperty(E)&&Yu(e,t,E,void 0,i,g);for(m in i)g=i[m],p=n[m],!i.hasOwnProperty(m)||g===p||g===void 0&&p===void 0||Yu(e,t,m,g,i,p);return}}for(var x in n)g=n[x],n.hasOwnProperty(x)&&g!=null&&!i.hasOwnProperty(x)&&Ze(e,t,x,null,i,g);for(h in i)g=i[h],p=n[h],!i.hasOwnProperty(h)||g===p||g==null&&p==null||Ze(e,t,h,g,i,p)}var Ju=null,Xu=null;function ba(e){return e.nodeType===9?e:e.ownerDocument}function eh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rx(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nu=null;function WT(){var e=window.event;return e&&e.type==="popstate"?e===nu?!1:(nu=e,!0):(nu=null,!1)}var Dx=typeof setTimeout=="function"?setTimeout:void 0,KT=typeof clearTimeout=="function"?clearTimeout:void 0,th=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof th<"u"?function(e){return th.resolve(null).then(e).catch(QT)}:Dx;function QT(e){setTimeout(function(){throw e})}function Zi(e){return e==="head"}function nh(e,t){var n=t,i=0,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(0<i&&8>i){n=i;var c=e.ownerDocument;if(n&1&&Mr(c.documentElement),n&2&&Mr(c.body),n&4)for(n=c.head,Mr(n),c=n.firstChild;c;){var u=c.nextSibling,f=c.nodeName;c[Xr]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=u}}if(o===0){e.removeChild(l),Br(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:i=n.charCodeAt(0)-48;else i=0;n=l}while(n);Br(t)}function Ku(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ku(n),_d(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eb(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Xr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Vn(e.nextSibling),e===null)break}return null}function tb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Vn(e.nextSibling),e===null))return null;return e}function Zu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function nb(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Qu=null;function ih(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function jx(e,t,n){switch(t=ba(n),e){case"html":if(e=t.documentElement,!e)throw Error(G(452));return e;case"head":if(e=t.head,!e)throw Error(G(453));return e;case"body":if(e=t.body,!e)throw Error(G(454));return e;default:throw Error(G(451))}}function Mr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_d(e)}var _n=new Map,oh=new Set;function Sa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xi=Ye.d;Ye.d={f:ib,r:ob,D:lb,C:rb,L:sb,m:ab,X:ub,S:cb,M:db};function ib(){var e=xi.f(),t=Ga();return e||t}function ob(e){var t=Nl(e);t!==null&&t.tag===5&&t.type==="form"?My(t):xi.r(e)}var jl=typeof document>"u"?null:document;function Ix(e,t,n){var i=jl;if(i&&typeof t=="string"&&t){var o=wn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),oh.has(o)||(oh.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Vt(t,"link",e),jt(t),i.head.appendChild(t)))}}function lb(e){xi.D(e),Ix("dns-prefetch",e,null)}function rb(e,t){xi.C(e,t),Ix("preconnect",e,t)}function sb(e,t,n){xi.L(e,t,n);var i=jl;if(i&&e&&t){var o='link[rel="preload"][as="'+wn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+wn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+wn(n.imageSizes)+'"]')):o+='[href="'+wn(e)+'"]';var l=o;switch(t){case"style":l=Ml(e);break;case"script":l=Il(e)}_n.has(l)||(e=ot({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),_n.set(l,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(ls(l))||t==="script"&&i.querySelector(rs(l))||(t=i.createElement("link"),Vt(t,"link",e),jt(t),i.head.appendChild(t)))}}function ab(e,t){xi.m(e,t);var n=jl;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+wn(i)+'"][href="'+wn(e)+'"]',l=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Il(e)}if(!_n.has(l)&&(e=ot({rel:"modulepreload",href:e},t),_n.set(l,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(rs(l)))return}i=n.createElement("link"),Vt(i,"link",e),jt(i),n.head.appendChild(i)}}}function cb(e,t,n){xi.S(e,t,n);var i=jl;if(i&&e){var o=ol(i).hoistableStyles,l=Ml(e);t=t||"default";var c=o.get(l);if(!c){var u={loading:0,preload:null};if(c=i.querySelector(ls(l)))u.loading=5;else{e=ot({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_n.get(l))&&mf(e,n);var f=c=i.createElement("link");jt(f),Vt(f,"link",e),f._p=new Promise(function(d,m){f.onload=d,f.onerror=m}),f.addEventListener("load",function(){u.loading|=1}),f.addEventListener("error",function(){u.loading|=2}),u.loading|=4,Os(c,t,i)}c={type:"stylesheet",instance:c,count:1,state:u},o.set(l,c)}}}function ub(e,t){xi.X(e,t);var n=jl;if(n&&e){var i=ol(n).hoistableScripts,o=Il(e),l=i.get(o);l||(l=n.querySelector(rs(o)),l||(e=ot({src:e,async:!0},t),(t=_n.get(o))&&hf(e,t),l=n.createElement("script"),jt(l),Vt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function db(e,t){xi.M(e,t);var n=jl;if(n&&e){var i=ol(n).hoistableScripts,o=Il(e),l=i.get(o);l||(l=n.querySelector(rs(o)),l||(e=ot({src:e,async:!0,type:"module"},t),(t=_n.get(o))&&hf(e,t),l=n.createElement("script"),jt(l),Vt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function lh(e,t,n,i){var o=(o=Hi.current)?Sa(o):null;if(!o)throw Error(G(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ml(n.href),n=ol(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ml(n.href);var l=ol(o).hoistableStyles,c=l.get(e);if(c||(o=o.ownerDocument||o,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,c),(l=o.querySelector(ls(e)))&&!l._p&&(c.instance=l,c.state.loading=5),_n.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_n.set(e,n),l||fb(o,e,n,c.state))),t&&i===null)throw Error(G(528,""));return c}if(t&&i!==null)throw Error(G(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Il(n),n=ol(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(G(444,e))}}function Ml(e){return'href="'+wn(e)+'"'}function ls(e){return'link[rel="stylesheet"]['+e+"]"}function Ux(e){return ot({},e,{"data-precedence":e.precedence,precedence:null})}function fb(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Vt(t,"link",n),jt(t),e.head.appendChild(t))}function Il(e){return'[src="'+wn(e)+'"]'}function rs(e){return"script[async]"+e}function rh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+wn(n.href)+'"]');if(i)return t.instance=i,jt(i),i;var o=ot({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),jt(i),Vt(i,"style",o),Os(i,n.precedence,e),t.instance=i;case"stylesheet":o=Ml(n.href);var l=e.querySelector(ls(o));if(l)return t.state.loading|=4,t.instance=l,jt(l),l;i=Ux(n),(o=_n.get(o))&&mf(i,o),l=(e.ownerDocument||e).createElement("link"),jt(l);var c=l;return c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Vt(l,"link",i),t.state.loading|=4,Os(l,n.precedence,e),t.instance=l;case"script":return l=Il(n.src),(o=e.querySelector(rs(l)))?(t.instance=o,jt(o),o):(i=n,(o=_n.get(l))&&(i=ot({},n),hf(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),jt(o),Vt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(G(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Os(i,n.precedence,e));return t.instance}function Os(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,l=o,c=0;c<i.length;c++){var u=i[c];if(u.dataset.precedence===t)l=u;else if(l!==o)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function mf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ys=null;function sh(e,t,n){if(Ys===null){var i=new Map,o=Ys=new Map;o.set(n,i)}else o=Ys,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var l=n[o];if(!(l[Xr]||l[Ft]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var c=l.getAttribute(t)||"";c=e+c;var u=i.get(c);u?u.push(l):i.set(c,[l])}}return i}function ah(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function mb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lx(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Pr=null;function hb(){}function gb(e,t,n){if(Pr===null)throw Error(G(475));var i=Pr;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=Ml(n.href),l=e.querySelector(ls(o));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=wa.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=l,jt(l);return}l=e.ownerDocument||e,n=Ux(n),(o=_n.get(o))&&mf(n,o),l=l.createElement("link"),jt(l);var c=l;c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Vt(l,"link",n),t.instance=l}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=wa.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function pb(){if(Pr===null)throw Error(G(475));var e=Pr;return e.stylesheets&&e.count===0&&ed(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&ed(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function wa(){if(this.count--,this.count===0){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ea=null;function ed(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ea=new Map,t.forEach(yb,e),Ea=null,wa.call(e))}function yb(e,t){if(!(t.state.loading&4)){var n=Ea.get(e);if(n)var i=n.get(null);else{n=new Map,Ea.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<o.length;l++){var c=o[l];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),i=c)}i&&n.set(null,i)}o=t.instance,c=o.getAttribute("data-precedence"),l=n.get(c)||i,l===i&&n.set(null,o),n.set(c,o),this.count++,i=wa.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),l?l.parentNode.insertBefore(o,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Vr={$$typeof:si,Provider:null,Consumer:null,_currentValue:fo,_currentValue2:fo,_threadCount:0};function xb(e,t,n,i,o,l,c,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.hiddenUpdates=wc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=l,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Px(e,t,n,i,o,l,c,u,f,d,m,h){return e=new xb(e,t,n,c,u,f,d,h),t=1,l===!0&&(t|=24),l=an(3,null,null,t),e.current=l,l.stateNode=e,t=Bd(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:i,isDehydrated:n,cache:t},zd(l),e}function Vx(e){return e?(e=Zo,e):Zo}function $x(e,t,n,i,o,l){o=Vx(o),i.context===null?i.context=o:i.pendingContext=o,i=Bi(t),i.payload={element:n},l=l===void 0?null:l,l!==null&&(i.callback=l),n=Fi(e,i,t),n!==null&&(fn(n,e,t),xr(n,e,t))}function ch(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gf(e,t){ch(e,t),(e=e.alternate)&&ch(e,t)}function Hx(e){if(e.tag===13){var t=Rl(e,67108864);t!==null&&fn(t,e,67108864),gf(e,67108864)}}var Ma=!0;function vb(e,t,n,i){var o=we.T;we.T=null;var l=Ye.p;try{Ye.p=2,pf(e,t,n,i)}finally{Ye.p=l,we.T=o}}function Cb(e,t,n,i){var o=we.T;we.T=null;var l=Ye.p;try{Ye.p=8,pf(e,t,n,i)}finally{Ye.p=l,we.T=o}}function pf(e,t,n,i){if(Ma){var o=td(i);if(o===null)tu(e,t,i,Aa,n),uh(e,i);else if(bb(o,e,t,n,i))i.stopPropagation();else if(uh(e,i),t&4&&-1<Tb.indexOf(e)){for(;o!==null;){var l=Nl(o);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=ao(l.pendingLanes);if(c!==0){var u=l;for(u.pendingLanes|=2,u.entangledLanes|=2;c;){var f=1<<31-un(c);u.entanglements[1]|=f,c&=~f}Qn(l),!(We&6)&&(ya=Wn()+500,os(0))}}break;case 13:u=Rl(l,2),u!==null&&fn(u,l,2),Ga(),gf(l,2)}if(l=td(i),l===null&&tu(e,t,i,Aa,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else tu(e,t,i,null,n)}}function td(e){return e=Rd(e),yf(e)}var Aa=null;function yf(e){if(Aa=null,e=Oo(e),e!==null){var t=qr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=dp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Aa=e,null}function Bx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rC()){case gp:return 2;case pp:return 8;case ta:case sC:return 32;case yp:return 268435456;default:return 32}default:return 32}}var nd=!1,qi=null,Oi=null,Yi=null,$r=new Map,Hr=new Map,Ii=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uh(e,t){switch(e){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":$r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(t.pointerId)}}function ir(e,t,n,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Nl(t),t!==null&&Hx(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function bb(e,t,n,i,o){switch(t){case"focusin":return qi=ir(qi,e,t,n,i,o),!0;case"dragenter":return Oi=ir(Oi,e,t,n,i,o),!0;case"mouseover":return Yi=ir(Yi,e,t,n,i,o),!0;case"pointerover":var l=o.pointerId;return $r.set(l,ir($r.get(l)||null,e,t,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Hr.set(l,ir(Hr.get(l)||null,e,t,n,i,o)),!0}return!1}function Fx(e){var t=Oo(e.target);if(t!==null){var n=qr(t);if(n!==null){if(t=n.tag,t===13){if(t=dp(n),t!==null){e.blockedOn=t,gC(e.priority,function(){if(n.tag===13){var i=dn();i=Ad(i);var o=Rl(n,i);o!==null&&fn(o,n,i),gf(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Js(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=td(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);vu=i,n.target.dispatchEvent(i),vu=null}else return t=Nl(n),t!==null&&Hx(t),e.blockedOn=n,!1;t.shift()}return!0}function dh(e,t,n){Js(e)&&n.delete(t)}function Sb(){nd=!1,qi!==null&&Js(qi)&&(qi=null),Oi!==null&&Js(Oi)&&(Oi=null),Yi!==null&&Js(Yi)&&(Yi=null),$r.forEach(dh),Hr.forEach(dh)}function _s(e,t){e.blockedOn===t&&(e.blockedOn=null,nd||(nd=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,Sb)))}var Ns=null;function fh(e){Ns!==e&&(Ns=e,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,function(){Ns===e&&(Ns=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(yf(i||n)===null)continue;break}var l=Nl(n);l!==null&&(e.splice(t,3),t-=3,Uu(l,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Br(e){function t(f){return _s(f,e)}qi!==null&&_s(qi,e),Oi!==null&&_s(Oi,e),Yi!==null&&_s(Yi,e),$r.forEach(t),Hr.forEach(t);for(var n=0;n<Ii.length;n++){var i=Ii[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)Fx(n),n.blockedOn===null&&Ii.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],l=n[i+1],c=o[Qt]||null;if(typeof l=="function")c||fh(n);else if(c){var u=null;if(l&&l.hasAttribute("formAction")){if(o=l,c=l[Qt]||null)u=c.formAction;else if(yf(o)!==null)continue}else u=c.action;typeof u=="function"?n[i+1]=u:(n.splice(i,3),i-=3),fh(n)}}}function xf(e){this._internalRoot=e}Ja.prototype.render=xf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));var n=t.current,i=dn();$x(n,i,e,t,null,null)};Ja.prototype.unmount=xf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$x(e.current,2,null,e,null,null),Ga(),t[_l]=null}};function Ja(e){this._internalRoot=e}Ja.prototype.unstable_scheduleHydration=function(e){if(e){var t=bp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ii.length&&t!==0&&t<Ii[n].priority;n++);Ii.splice(n,0,e),n===0&&Fx(e)}};var mh=cp.version;if(mh!=="19.1.1")throw Error(G(527,mh,"19.1.1"));Ye.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Q0(t),e=e!==null?fp(e):null,e=e===null?null:e.stateNode,e};var wb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:we,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rs.isDisabled&&Rs.supportsFiber)try{Or=Rs.inject(wb),cn=Rs}catch{}}Da.createRoot=function(e,t){if(!up(e))throw Error(G(299));var n=!1,i="",o=Py,l=Vy,c=$y,u=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(u=t.unstable_transitionCallbacks)),t=Px(e,1,!1,null,null,n,i,o,l,c,u,null),e[_l]=t.current,ff(e),new xf(t)};Da.hydrateRoot=function(e,t,n){if(!up(e))throw Error(G(299));var i=!1,o="",l=Py,c=Vy,u=$y,f=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(u=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(f=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=Px(e,1,!0,t,n??null,i,o,l,c,u,f,d),t.context=Vx(null),n=t.current,i=dn(),i=Ad(i),o=Bi(i),o.callback=null,Fi(n,o,i),n=i,t.current.lanes=n,Jr(t,n),Qn(t),e[_l]=t.current,ff(e),new Ja(t)};Da.version="19.1.1";function zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zx)}catch(e){console.error(e)}}zx(),ip.exports=Da;var Eb=ip.exports;const Mb=Yg(Eb),Ds=(e,t,n,i)=>{const o=[];for(let l=1;l<=i;l++){const c=l/i,u=1-c,f=u*u*e.x+2*u*c*t.x+c*c*n.x,d=u*u*e.y+2*u*c*t.y+c*c*n.y;o.push({x:f,y:d})}return o},Gx=(e,t)=>{const n=e.length;if(n<2)return e;const i=[],o=8;if(t){if(n<3)return e;const l={x:(e[n-1].x+e[0].x)/2,y:(e[n-1].y+e[0].y)/2};i.push(l);for(let c=0;c<n;c++){const u=e[c],f=e[(c+1)%n],d=u,m={x:(u.x+f.x)/2,y:(u.y+f.y)/2},h=i[i.length-1];i.push(...Ds(h,d,m,o))}}else{if(n<3)return e;i.push(e[0]);const l={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};i.push(...Ds(e[0],e[0],l,o));for(let u=1;u<n-1;u++){const f=e[u-1],d=e[u],m=e[u+1],h={x:(f.x+d.x)/2,y:(f.y+d.y)/2},g=d,p={x:(d.x+m.x)/2,y:(d.y+m.y)/2};i.push(...Ds(h,g,p,o))}const c={x:(e[n-2].x+e[n-1].x)/2,y:(e[n-2].y+e[n-1].y)/2};i.push(...Ds(c,e[n-1],e[n-1],o))}return i},Ab=e=>{const t=e.points.filter(n=>n);return t.length<2?t:e.smooth?Gx(t,e.isClosed):t},fl=(e,t,n)=>{const i=e.filter(c=>c);if(i.length===0)return"";if(i.length<2){let c=`M ${i[0].x} ${i[0].y}`;return n&&(c+=" Z"),c}const o=t?Gx(i,n):i;let l=bf(o);return n&&(l+=" Z"),l},vf=e=>{const{x:t,y:n,width:i,height:o,start:l,extent:c,style:u}=e;if(i<=0||o<=0||c===0)return"";const f=i/2,d=o/2,m=t+f,h=n+d;if(Math.abs(c)>=360){const A=m+f,_=h,N=m-f,q=`A ${f} ${d} 0 0 0 ${N} ${h}`,U=`A ${f} ${d} 0 0 0 ${A} ${_}`;return`M ${A} ${_} ${q} ${U}`}const g=l*Math.PI/180,p=(l+c)*Math.PI/180,b=m+f*Math.cos(g),S=h-d*Math.sin(g),E=m+f*Math.cos(p),x=h-d*Math.sin(p),y=Math.abs(c)>180?1:0,C=c>0?0:1,v=`A ${f} ${d} 0 ${y} ${C} ${E} ${x}`;return u==="arc"?`M ${b} ${S} ${v}`:u==="chord"?`M ${b} ${S} ${v} Z`:`M ${m} ${h} L ${b} ${S} ${v} Z`},Fr=e=>{const{x:t,y:n,width:i,height:o,topVertexOffset:l=0,isFlippedVertically:c}=e,f=t+i/2+l*i;return c?[{x:f,y:n+o},{x:t+i,y:n},{x:t,y:n}]:[{x:f,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Cf=e=>{const{x:t,y:n,width:i,height:o,isFlippedHorizontally:l,isFlippedVertically:c}=e;let u=[{x:t,y:n+o},{x:t,y:n},{x:t+i,y:n+o}];if(l){const f=t+i/2;u=u.map(d=>({x:f-(d.x-f),y:d.y}))}if(c){const f=n+o/2;u=u.map(d=>({x:d.x,y:f-(d.y-f)}))}return u},Tf=e=>{const{x:t,y:n,width:i,height:o}=e;return[{x:t+i/2,y:n},{x:t+i,y:n+o/2},{x:t+i/2,y:n+o},{x:t,y:n+o/2}]},Xa=e=>{const{x:t,y:n,width:i,height:o,topLeftOffsetRatio:l,topRightOffsetRatio:c,isFlippedVertically:u}=e,f=i*l,d=i*c;return u?[{x:t,y:n},{x:t+i,y:n},{x:t+i-d,y:n+o},{x:t+f,y:n+o}]:[{x:t+f,y:n},{x:t+i-d,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Wa=e=>{const{x:t,y:n,width:i,height:o,angle:l,isFlippedVertically:c}=e;if(o===0)return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}];const f=Math.max(1,Math.min(179,l))*Math.PI/180,d=o/Math.tan(f),m=i-Math.abs(d);return m<0?[{x:t,y:n},{x:t,y:n},{x:t,y:n},{x:t,y:n}]:c?d>=0?[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t+d,y:n+o}]:[{x:t-d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:d>=0?[{x:t+d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t-d,y:n+o}]},Al=e=>{const t=[],{cx:n,cy:i,radius:o,sides:l,innerRadius:c,isFlippedHorizontally:u,isFlippedVertically:f}=e,d=Math.PI*2/l,m=-Math.PI/2,h=c!==void 0,g=h?l*2:l;for(let p=0;p<g;p++){const b=h&&p%2!==0?c:o;if(b===void 0)continue;const S=p*d/(h?2:1)+m;let E=n+Math.cos(S)*b,x=i+Math.sin(S)*b;u&&(E=n-(E-n)),f&&(x=i-(x-i)),t.push({x:E,y:x})}return t},bf=e=>{const t=e.filter(o=>o);if(t.length===0)return"";const[n,...i]=t;return`M ${n.x} ${n.y} ${i.map(o=>`L ${o.x} ${o.y}`).join(" ")}`},Sf=e=>{if(!e.isClosed)return!1;let t=[...e.points].filter(o=>o);if(t.length>1&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&t.pop(),t.length!==4)return!1;const n=new Set(t.map(o=>o.x)),i=new Set(t.map(o=>o.y));return!(n.size!==2||i.size!==2)},kb=e=>{const{radius:t,sides:n}=e;return n<2?0:2*t*Math.sin(Math.PI/n)},_b=e=>{const{sideLength:t,sides:n}=e;return n<2?0:t/(2*Math.sin(Math.PI/n))},qx=e=>{const n=document.createElement("canvas").getContext("2d");return n&&(n.font=e),n},Ka=e=>{const{text:t,font:n,fontSize:i,weight:o,slant:l,width:c}=e,u=`${l==="italic"?"italic":"normal"} ${o} ${i}px ${n}`,f=qx(u);if(!f)return t.split(`
`);const d=t.split(`
`),m=[];return d.forEach(h=>{if(c<=0){m.push(h);return}const g=h.split(" ");let p="";for(let b=0;b<g.length;b++){const S=g[b],E=p+(p?" ":"")+S;f.measureText(E).width>c&&b>0?(m.push(p),p=S):p=E}m.push(p)}),m},So=e=>{const{font:t,fontSize:n,weight:i,slant:o}=e,l=Ka(e);if(l.length===0)return{x:e.x,y:e.y,width:0,height:0};const c=`${o==="italic"?"italic":"normal"} ${i} ${n}px ${t}`,u=qx(c);if(!u){const x=Math.max(...l.map(y=>y.length))*n*.6;return{x:e.x,y:e.y,width:x,height:l.length*n*1.2}}const f=u.measureText("M"),d=f.fontBoundingBoxAscent??n*.8,m=f.fontBoundingBoxDescent??n*.2,h=d+m,g=n*.2,p=h+(l.length-1)*(h+g),b=Math.max(...l.map(x=>u.measureText(x).width));let{x:S,y:E}=e;return["n","s","center"].includes(e.anchor)?S-=b/2:["ne","e","se"].includes(e.anchor)&&(S-=b),["w","e","center"].includes(e.anchor)?E-=p/2:["sw","s","se"].includes(e.anchor)&&(E-=p),{x:S,y:E,width:b,height:p}},zr=e=>{let t;switch(e.type){case"rectangle":case"arc":return{x:e.x,y:e.y,width:e.width,height:e.height};case"ellipse":return{x:e.cx-e.rx,y:e.cy-e.ry,width:e.rx*2,height:e.ry*2};case"text":return So(e);case"image":case"bitmap":return{x:e.x,y:e.y,width:e.width,height:e.height};case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"polygon":case"star":t=Hn({...e,rotation:0})??[];break;case"bezier":case"polyline":t=e.points;break;case"line":case"pencil":t=e.points;break;default:return null}if(!t||t.length===0)return null;const n=t.filter(d=>!!d);if(n.length===0)return null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},Tt=e=>{if("cx"in e&&"cy"in e)return{x:e.cx,y:e.cy};const t="rotation"in e&&e.rotation!==0?{...e,rotation:0}:e,n=zr(t);return n?{x:n.x+n.width/2,y:n.y+n.height/2}:"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x+e.width/2,y:e.y+e.height/2}:null},Je=(e,t,n)=>{const i=n*(Math.PI/180),o=Math.cos(i),l=Math.sin(i),c=e.x-t.x,u=e.y-t.y;return{x:c*o-u*l+t.x,y:c*l+u*o+t.y}};function Hn(e,t){let n;switch(e.type){case"line":case"pencil":n=e.points.filter(y=>y);break;case"polyline":case"bezier":n=Ab(e);break;case"rectangle":case"image":case"bitmap":n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];break;case"text":{const y=So(e);if(!y)return null;n=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}]}break;case"triangle":n=Fr(e);break;case"right-triangle":n=Cf(e);break;case"rhombus":n=Tf(e);break;case"trapezoid":n=Xa(e);break;case"parallelogram":n=Wa(e);break;case"polygon":case"star":n=Al(e);break;case"ellipse":const i=e,o=Math.max(24,Math.round(Math.max(i.rx,i.ry)/4));n=Al({id:e.id,cx:i.cx,cy:i.cy,radius:i.rx,sides:o,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth}).map(y=>({x:y.x,y:i.cy+(y.y-i.cy)*(i.ry/i.rx)}));break;case"arc":const{x:l,y:c,width:u,height:f,start:d,extent:m,style:h}=e,g=u/2,p=f/2,b=l+g,S=c+p,E=32,x=m/E;n=[],h==="pieslice"&&n.push({x:b,y:S});for(let y=0;y<=E;y++){const v=(d+y*x)*Math.PI/180;n.push({x:b+g*Math.cos(v),y:S-p*Math.sin(v)})}h==="pieslice"&&n.push({x:b,y:S});break;default:return null}if("rotation"in e&&e.rotation!==0){const i=t??(e.type==="text"?{x:e.x,y:e.y}:Tt(e));return i?n.map(o=>Je(o,i,e.rotation)):n}return n}const id=(e,t)=>{const n=Hn(e,t);if(!n||n.length===0)return"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x,y:e.y,width:e.width,height:e.height}:"cx"in e&&"cy"in e?{x:e.cx,y:e.cy,width:0,height:0}:null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},wf=e=>{if(e.type==="bezier"||e.type==="polyline"||e.type==="pencil"||e.type==="line")return e.points.filter(o=>o);const t={...e,rotation:0},n=Hn(t);if(!n||n.length===0)return null;let i=e.type==="arc"&&(e.style==="pieslice"||e.style==="chord")||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","image","bitmap","text"].includes(e.type);if(e.type==="arc"&&e.style==="arc"&&(i=!1),i&&n.length>1){const o=n[0],l=n[n.length-1];if(Math.abs(o.x-l.x)<.01&&Math.abs(o.y-l.y)<.01)return n.slice(0,-1)}return n};function Nb(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},l=o.x*o.x+o.y*o.y;if(l===0)return{point:t,t:0};let u=(i.x*o.x+i.y*o.y)/l;return u=Math.max(0,Math.min(1,u)),{point:{x:t.x+o.x*u,y:t.y+o.y*u},t:u}}const at={select:"Вибрати","edit-points":"Редагувати вузли",rectangle:"Прямокутник",square:"Квадрат",circle:"Коло",ellipse:"Еліпс",line:"Лінія",pencil:"Олівець",triangle:"Трикутник","right-triangle":"Прямокутний трикутник",polygon:"Багатокутник",star:"Зірка",polyline:"Ламана",rhombus:"Ромб",trapezoid:"Трапеція",parallelogram:"Паралелограм",bezier:"Крива Без'є",arc:"Дуга",pieslice:"Сектор",chord:"Сегмент",text:"Текст",image:"Зображення",bitmap:"Bitmap"},Xs=[{name:"Суцільна лінія",pattern:[],description:"Суцільна лінія без штрихів."},{name:"Простий пунктир",pattern:[5,3],description:"Штрих 5px, пропуск 3px."},{name:"Довгі штрихи",pattern:[10,5],description:"Штрих 10px, пропуск 5px."},{name:"Дрібні точки",pattern:[2,2],description:"Штрих 2px, пропуск 2px (виглядає як точки)."},{name:"Розріджені точки",pattern:[2,4],description:"Штрих 2px, пропуск 4px."},{name:"Штрих-пунктир",pattern:[10,3,2,3],description:"Штрих 10px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Штрих і 2 точки",pattern:[15,3,2,3,2,3],description:"Штрих 15px, пропуск 3px, штрих 2px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Подвійна точка",pattern:[2,3,2,6],description:"Штрих 2px, пропуск 3px, штрих 2px, пропуск 6px."},{name:"Довгий+короткий штрих",pattern:[20,5,5,5],description:"Штрих 20px, пропуск 5px, штрих 5px, пропуск 5px."}],Ox=e=>{if(e.type==="text")return"text";if(e.type==="image")return"image";if(e.type==="bitmap")return"bitmap";if(e.type==="ellipse"&&e.isAspectRatioLocked)return"oval";if(e.type==="arc")return e.rotation===0?"arc":e.style==="arc"?"line":"polygon";if(!("rotation"in e)||e.rotation===0){if(e.type==="rectangle")return"rectangle";if(e.type==="ellipse")return"oval";if(e.type==="polyline"&&e.isClosed&&Sf(e))return"rectangle"}return e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed?"line":"polygon"},Bt=e=>{if(e.type==="arc")return at[e.style];const t=Ox(e);return t==="polygon"&&e.type!=="polygon"&&e.type!=="star"?"Багатокутник":t==="rectangle"&&e.type==="polyline"?at.rectangle:e.type==="rectangle"&&e.isAspectRatioLocked?at.square:e.type==="ellipse"&&e.isAspectRatioLocked?at.circle:e.type==="polyline"?e.isClosed?"Багатокутник":at.polyline:e.type==="bezier"?e.isClosed?"Багатокутник":at.bezier:at[e.type]},od=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M23 4v6h-6'/%3E%3Cpath d='M20.49 15a9 9 0 1 1-2.12-9.36L23 10'/%3E%3C/svg%3E") 10 10, auto`,ld=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M3 9 L21 9 L17 5'/%3E%3Cpath d='M21 15 L3 15 L7 19'/%3E%3C/svg%3E") 10 10, auto`,Ef=e=>e.startsWith("Tk")?e==="TkFixedFont"?"monospace":"sans-serif":e.includes(" ")?`"${e}", sans-serif`:`${e}, sans-serif`,Yx=new Set(Object.values(at));Yx.add("Багатокутник");const Gr=e=>Yx.has(e),Rb=8,Db=24,jb=20,Ib=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";default:return"default"}},Ub=({shape:e,setAction:t,svgRef:n,activeTool:i,getSnappedMousePosition:o,viewTransform:l,getPointerPosition:c,activePointIndex:u,setActivePointIndex:f,updateShape:d,action:m})=>{if(!e)return null;const h=Rb/l.scale,g=Db/l.scale,p=1/l.scale,b=jb/l.scale,S=e.type==="text"?{x:e.x,y:e.y}:Tt(e);if(!S)return null;const E="rotation"in e?e.rotation??0:0,x=M.useMemo(()=>e?(m==null?void 0:m.type)==="point-editing"&&"rotation"in m.initialShape&&m.initialShape.rotation!==0?id(e,m.center):id(e):null,[e,m]),y=x&&s.jsxs("g",{style:{pointerEvents:"none"},children:[s.jsx("rect",{x:x.x,y:x.y,width:x.width,height:x.height,fill:"none",stroke:"var(--text-tertiary)",strokeWidth:p,strokeDasharray:`${3/l.scale} ${3/l.scale}`}),s.jsx("circle",{cx:x.x,cy:x.y,r:h/2.5,fill:"var(--text-tertiary)"}),s.jsx("circle",{cx:x.x+x.width,cy:x.y+x.height,r:h/2.5,fill:"var(--text-tertiary)"})]}),C=M.useMemo(()=>{if(e.type!=="text")return null;const Q=e,O=h/1.5,oe=O*.6;return s.jsxs("g",{style:{pointerEvents:"none"},"aria-label":"Точка прив'язки тексту",children:[s.jsx("circle",{cx:Q.x,cy:Q.y,r:O,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p}),s.jsx("line",{x1:Q.x-oe,y1:Q.y,x2:Q.x+oe,y2:Q.y,stroke:"var(--special-handle-stroke)",strokeWidth:p}),s.jsx("line",{x1:Q.x,y1:Q.y-oe,x2:Q.x,y2:Q.y+oe,stroke:"var(--special-handle-stroke)",strokeWidth:p})]})},[e,h,p]);if(i==="edit-points"){const Q=wf(e);if(!Q)return null;let O;(m==null?void 0:m.type)==="point-editing"&&E!==0?O=Q.map(H=>Je(H,m.center,E)):O=Q.map(H=>Je(H,S,E));const oe=(H,ve)=>{H.stopPropagation(),f(ve);const ce=Tt(e);if(!ce)return;let Fe=e;if(e.type!=="polyline"&&e.type!=="line"&&e.type!=="pencil"&&e.type!=="bezier"){const F=e.type!=="arc"||e.style!=="arc",te=Hn({...e,rotation:0});if(!te)return;const he={id:e.id,name:void 0,type:"polyline",points:te,isClosed:F,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&F?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0,stipple:"stipple"in e?e.stipple:void 0,dash:"dash"in e?e.dash:void 0},T=e.name,z=!T||Gr(T);he.name=z?Bt(he):T,d(he),Fe=he}t({type:"point-editing",initialShape:Fe,pointIndex:ve,center:ce})},Te=(H,ve,ce)=>{H.preventDefault(),H.stopPropagation();const Fe=o(c(H)),F=Je(Fe,S,-E),te=Q[ve],he=Q[ce],{point:T}=Nb(F,te,he),z=[...Q];z.splice(ce,0,T);let X;if(e.type==="bezier")X={...e,points:z};else if(e.type==="polyline"||e.type==="line"||e.type==="pencil")X={...e,points:z};else{const ye=e.type!=="arc"||e.style!=="arc",Ne={id:e.id,name:void 0,type:"polyline",points:z,isClosed:ye,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&ye?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0},ze=e.name,Ke=!ze||Gr(ze);Ne.name=Ke?Bt(Ne):ze,X=Ne}d(X),f(ce);const ge=Tt(X);ge&&t({type:"point-editing",initialShape:X,pointIndex:ce,center:ge})},Me=e.type==="polyline"&&e.isClosed||e.type==="bezier"&&e.isClosed||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(e.type);return s.jsxs("g",{children:[y,O.map((H,ve)=>{if(!Me&&ve===O.length-1)return null;const ce=(ve+1)%O.length,Fe=O[ce];return s.jsx("line",{x1:H.x,y1:H.y,x2:Fe.x,y2:Fe.y,stroke:"transparent",strokeWidth:g,style:{cursor:m?"inherit":"copy"},onMouseDown:F=>Te(F,ve,ce)},`segment-${ve}`)}),O.map((H,ve)=>{const ce=ve===u;return s.jsxs("g",{onMouseDown:Fe=>oe(Fe,ve),onTouchStart:Fe=>oe(Fe,ve),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[s.jsx("circle",{cx:H.x,cy:H.y,r:ce?h*.75:h/2,fill:ce?"var(--selection-stroke)":"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:H.x,cy:H.y,r:g/2,fill:"transparent"})]},`point-${ve}`)})]})}const v=zr(e);if(!v||v.width<=0&&v.height<=0)return null;if(e.type==="line"){const[Q,O]=e.points,oe=Je(Q,S,E),Te=Je(O,S,E),Me=zr(e),H=e.rotationHandlePosition,ve={x:S.x,y:H==="bottom"?Me.y+Me.height+b:Me.y-b},ce=Je(ve,S,E),Fe=(te,he)=>{te.stopPropagation();const T=Tt(e);t({type:"resizing",handle:he,initialShape:e,anchorPointGlobal:he==="line-start"?Te:oe,initialShapeProps:{rotationCenter:S,geometricCenter:T,bbox:v}})},F=te=>{if(te.stopPropagation(),!n.current)return;const he=Tt(e);if(!he)return;const T="touches"in te?te.touches[0]:te;if(!T)return;const z=o(c(T)),X=Math.atan2(z.y-he.y,z.x-he.x),ye=e.rotation*Math.PI/180-X;t({type:"rotating",initialShape:e,center:he,startAngle:ye})};return s.jsxs(kt.Fragment,{children:[y,s.jsxs("g",{children:[s.jsx("line",{x1:oe.x,y1:oe.y,x2:Te.x,y2:Te.y,stroke:"var(--selection-stroke)",strokeWidth:6/l.scale,strokeOpacity:"0.3",strokeLinecap:"round",style:{pointerEvents:"none"}}),s.jsxs("g",{onMouseDown:te=>Fe(te,"line-start"),onTouchStart:te=>Fe(te,"line-start"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[s.jsx("circle",{cx:oe.x,cy:oe.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:oe.x,cy:oe.y,r:g/2,fill:"transparent"})]}),s.jsxs("g",{onMouseDown:te=>Fe(te,"line-end"),onTouchStart:te=>Fe(te,"line-end"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[s.jsx("circle",{cx:Te.x,cy:Te.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:Te.x,cy:Te.y,r:g/2,fill:"transparent"})]}),s.jsxs("g",{onMouseDown:F,onTouchStart:F,"data-handle":"true",style:{cursor:m?"inherit":od},children:[s.jsx("line",{x1:S.x,y1:S.y,x2:ce.x,y2:ce.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:ce.x,cy:ce.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-E} ${ce.x} ${ce.y})`}),s.jsx("circle",{cx:ce.x,cy:ce.y,r:g/2,fill:"transparent"})]})]})]})}const A=[{name:"top-left",x:v.x,y:v.y},{name:"top-center",x:v.x+v.width/2,y:v.y},{name:"top-right",x:v.x+v.width,y:v.y},{name:"middle-left",x:v.x,y:v.y+v.height/2},{name:"middle-right",x:v.x+v.width,y:v.y+v.height/2},{name:"bottom-left",x:v.x,y:v.y+v.height},{name:"bottom-center",x:v.x+v.width/2,y:v.y+v.height},{name:"bottom-right",x:v.x+v.width,y:v.y+v.height}],_=(Q,O)=>{Q.stopPropagation();const oe=Tt(e),Me={"top-left":"bottom-right","top-center":"bottom-center","top-right":"bottom-left","middle-left":"middle-right","middle-right":"middle-left","bottom-left":"top-right","bottom-center":"top-center","bottom-right":"top-left"}[O],H=A.find(ce=>ce.name===Me);if(!H)return;const ve=Je({x:H.x,y:H.y},S,E);t({type:"resizing",handle:O,initialShape:e,anchorPointGlobal:ve,initialShapeProps:{rotationCenter:S,geometricCenter:oe,bbox:v}})},N=e.type==="text"?v.x+v.width/2:S.x,V=e.rotationHandlePosition,q={x:N,y:V==="bottom"?v.y+v.height+b:v.y-b},U=Je(q,S,E),D=Q=>{if(Q.stopPropagation(),!n.current)return;const O=Tt(e);if(!O)return;const oe="touches"in Q?Q.touches[0]:Q;if(!oe)return;const Te=o(c(oe)),Me=Math.atan2(Te.y-O.y,Te.x-O.x),ve=("rotation"in e?e.rotation:0)*Math.PI/180-Me;t({type:"rotating",initialShape:e,center:O,startAngle:ve})},Z=(Q,O,oe)=>{Q.stopPropagation();const Te="touches"in Q?Q.touches[0]:Q;if(!Te)return;const Me=o(c(Te));switch(O){case"arc-angle":if(e.type!=="arc")return;const H=Tt(e),ve=Math.atan2(-(Me.y-H.y),Me.x-H.x)*180/Math.PI;t({type:"arc-angle-editing",handle:oe,initialShape:e,center:H,initialMouseAngle:ve});break;case"trapezoid-offset":if(e.type!=="trapezoid")return;t({type:"trapezoid-offset-editing",handle:oe,initialShape:e});break;case"parallelogram-angle":if(e.type!=="parallelogram")return;t({type:"parallelogram-angle-editing",initialShape:e});break;case"triangle-vertex":if(e.type!=="triangle")return;t({type:"triangle-vertex-editing",initialShape:e});break;case"star-inner-radius":if(e.type!=="star")return;t({type:"star-inner-radius-editing",initialShape:e,center:Tt(e)});break}},be=(Q,O)=>s.jsxs("g",{onMouseDown:O,onTouchStart:O,"data-handle":"true",style:{cursor:m?"inherit":ld},children:[s.jsx("circle",{cx:Q.x,cy:Q.y,r:h/1.5,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:Q.x,cy:Q.y,r:g/2,fill:"transparent"})]}),Ce=Q=>{const{x:O,y:oe,width:Te,height:Me,start:H,extent:ve}=Q,ce=Te/2,Fe=Me/2,F=O+ce,te=oe+Fe,he=H*Math.PI/180,T=(H+ve)*Math.PI/180,z=(H+ve/2)*Math.PI/180,X={x:F+ce*Math.cos(he),y:te-Fe*Math.sin(he)},ge={x:F+ce*Math.cos(T),y:te-Fe*Math.sin(T)},ye={x:F+ce*Math.cos(z),y:te-Fe*Math.sin(z)},Ne=Je(X,S,E),ze=Je(ge,S,E),Ke=Je(ye,S,E);return s.jsxs(s.Fragment,{children:[be(Ne,De=>Z(De,"arc-angle","start")),be(ze,De=>Z(De,"arc-angle","end")),be(Ke,De=>Z(De,"arc-angle","move"))]})},Se=Q=>{const O=Xa(Q),oe=O[Q.isFlippedVertically?3:0],Te=O[Q.isFlippedVertically?2:1],Me=Je(oe,S,E),H=Je(Te,S,E);return s.jsxs(s.Fragment,{children:[be(Me,ve=>Z(ve,"trapezoid-offset","left")),be(H,ve=>Z(ve,"trapezoid-offset","right"))]})},ee=Q=>{const oe=Wa(Q)[Q.isFlippedVertically?3:0],Te=Je(oe,S,E);return be(Te,Me=>Z(Me,"parallelogram-angle","angle"))},de=Q=>{const oe=Fr(Q)[0],Te=Je(oe,S,E);return be(Te,Me=>Z(Me,"triangle-vertex","top"))},xe=Q=>{const O=Al(Q);if(O.length<2||Q.innerRadius===void 0)return null;let oe=O[1];if(Q.innerRadius===0){const Me=Math.PI*2/Q.sides,H=-Math.PI/2,ve=Me/2+H,ce=10/l.scale;oe={x:Q.cx+Math.cos(ve)*ce,y:Q.cy+Math.sin(ve)*ce}}const Te=Je(oe,S,E);return be(Te,Me=>Z(Me,"star-inner-radius","inner-radius"))};return s.jsxs(kt.Fragment,{children:[s.jsx("g",{transform:`rotate(${E} ${S.x} ${S.y})`,children:s.jsx("rect",{x:v.x,y:v.y,width:v.width,height:v.height,fill:"none",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}})}),y,s.jsxs("g",{children:[A.map(({name:Q,x:O,y:oe})=>{const Te=Je({x:O,y:oe},S,E),Me=Ib(Q);return s.jsxs("g",{onMouseDown:H=>_(H,Q),onTouchStart:H=>_(H,Q),"data-handle":"true",style:{cursor:m?"inherit":`${Me}`},children:[s.jsx("rect",{x:Te.x-h/2,y:Te.y-h/2,width:h,height:h,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-E} ${Te.x} ${Te.y})`}),s.jsx("rect",{x:Te.x-g/2,y:Te.y-g/2,width:g,height:g,fill:"transparent"})]},Q)}),"rotation"in e&&e.rotation!==void 0&&s.jsxs("g",{onMouseDown:D,onTouchStart:D,"data-handle":"true",style:{cursor:m?"inherit":od},children:[s.jsx("line",{x1:S.x,y1:S.y,x2:U.x,y2:U.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),s.jsx("circle",{cx:U.x,cy:U.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-E} ${U.x} ${U.y})`}),s.jsx("circle",{cx:U.x,cy:U.y,r:g/2,fill:"transparent"})]}),C,e.type==="arc"&&Ce(e),e.type==="trapezoid"&&Se(e),e.type==="parallelogram"&&ee(e),e.type==="triangle"&&de(e),e.type==="star"&&xe(e)]})]})},Jx=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),s.jsx("path",{d:"M13 13l6 6"})]}),Xx=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M20 4H4v16",strokeDasharray:"4 4"}),s.jsx("path",{d:"M4 20L12 12L20 4v16H4"}),s.jsx("circle",{cx:"20",cy:"4",r:"2",fill:"currentColor",strokeWidth:"0"}),s.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",strokeWidth:"0"}),s.jsx("circle",{cx:"4",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),s.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),s.jsx("circle",{cx:"4",cy:"4",r:"2",fill:"var(--bg-primary)"})]}),Wx=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),Kx=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"})}),Zx=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Qx=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"})}),rd=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"16 18 22 12 16 6"}),s.jsx("polyline",{points:"8 6 2 12 8 18"})]}),Nn=({size:e=24})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Lb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M4 4v16"}),s.jsx("path",{d:"M4 4h16"}),s.jsx("path",{d:"M4 20l-4-5h8z",fill:"currentColor",strokeWidth:"0"}),s.jsx("path",{d:"M20 4l-5-4v8z",fill:"currentColor",strokeWidth:"0"})]}),Pb=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M4 14h-2v6h6v-2H4v-4zm16 0v4h-4v2h6v-6h-2zM4 10V4h6V2H2v8h2zm16-6v6h2V2h-8v2h6z"})}),ev=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"4"})}),tv=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),s.jsx("circle",{cx:"3",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"8",cy:"5",r:"1.5"}),s.jsx("circle",{cx:"15",cy:"16",r:"1.5"}),s.jsx("circle",{cx:"20",cy:"12",r:"1.5"})]}),nv=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M 2 20.7 C 4 10, 8 9.4, 15 12.6 S 22 3.5, 22 3.5",fill:"none"}),s.jsx("circle",{cx:"2",cy:"20.7",r:"2.7",strokeWidth:"0",fill:"currentColor"}),s.jsx("circle",{cx:"22",cy:"3.5",r:"2.7",strokeWidth:"0",fill:"currentColor"}),s.jsx("circle",{cx:"8",cy:"9.4",r:"2.7",strokeWidth:"0",fill:"currentColor"}),s.jsx("circle",{cx:"15",cy:"12.6",r:"2.7",strokeWidth:"0",fill:"currentColor"})]}),iv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 2l10 7.5-4 12.5H6L2 9.5z"})}),ov=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),lv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 2L2 22h20L12 2z"})}),rv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M3 22L21 22L3 4z"})}),sv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 2l8 10-8 10-8-10z"})}),av=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M2 20h20L18 4H6z"})}),cv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M2 20l6-16h14l-6 16H2z"})}),uv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M 12,22 A 10,10 0 1 1 22,12 L 12,12 Z"})}),dv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M 22 12 A 10 10 0 1 0 12 22 Z"})}),fv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M 2 8 C 13 8, 22 12.5, 22 18"})}),mv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),hv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M 3 4 H 21 V 7 H 14 V 19 H 17 V 21 H 7 V 19 H 10 V 7 H 3 Z"})}),gv=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),s.jsx("polyline",{points:"21 15 16 10 5 21"})]}),pv=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M14 6l5 5-5 5M10 18l-5-5 5-5"})}),Vb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M14 17a5 5 0 1 0 0-10H5.5"}),s.jsx("path",{d:"M9.5 11L5.5 7l4-4"})]}),$b=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M10 17a5 5 0 1 1 0-10h8.5"}),s.jsx("path",{d:"M14.5 11L18.5 7l-4-4"})]}),yv=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2",ry:"2"}),s.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Za=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"3 6 5 6 21 6"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Hb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M22 2 V22 H2",fill:"none",strokeDasharray:"3 3"}),s.jsx("circle",{cx:"2",cy:"2",r:"2",stroke:"none"}),s.jsxs("g",{fill:"none",children:[s.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"2"}),s.jsx("line",{x1:"2",y1:"2",x2:"2",y2:"22"}),s.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),s.jsxs("g",{stroke:"none",children:[s.jsx("polygon",{points:"22,2 19,0.5 19,3.5"}),s.jsx("polygon",{points:"2,22 0.5,19 3.5,19"}),s.jsx("polygon",{points:"22,22 22,19 19,22"})]})]}),Bb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"2",y:"2",width:"20",height:"20",fill:"none",strokeDasharray:"3 3"}),s.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"none"}),s.jsxs("g",{fill:"none",children:[s.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),s.jsx("line",{x1:"21",y1:"3",x2:"3",y2:"21"})]}),s.jsxs("g",{stroke:"none",children:[s.jsx("polygon",{points:"3,3 5.5,3 3,5.5"}),s.jsx("polygon",{points:"21,21 18.5,21 21,18.5"}),s.jsx("polygon",{points:"21,3 18.5,3 21,5.5"}),s.jsx("polygon",{points:"3,21 5.5,21 3,18.5"})]})]}),xv=({size:e=16})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),Fb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),s.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),zb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"9 11 12 14 22 4"}),s.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),Gb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),s.jsx("path",{d:"M20 12 L3 12",strokeDasharray:"4 2"})]}),qb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),s.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),Ob=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),s.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Yb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),s.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),Jb=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"9"}),s.jsx("path",{d:"M12 2v2.5"}),s.jsx("path",{d:"M12 22v-2.5"}),s.jsx("path",{d:"M22 12h-2.5"}),s.jsx("path",{d:"M2 12h2.5"})]}),Xb=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),s.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Wb=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Kb=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Zb=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),s.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),Qb=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),s.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),eS=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"23 4 23 10 17 10"}),s.jsx("polyline",{points:"1 20 1 14 7 14"}),s.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"}),s.jsx("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"})]}),tS=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),nS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),s.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),s.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),s.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),s.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),s.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),s.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),iS=({size:e=20})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),oS=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 10h4v4"}),s.jsx("path",{d:"M21 14l-4-4"}),s.jsx("path",{d:"M3 6h12"}),s.jsx("path",{d:"M3 12h12"}),s.jsx("path",{d:"M3 18h12"})]}),lS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"1"}),s.jsx("circle",{cx:"19",cy:"12",r:"1"}),s.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),rS=({size:e=20,className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),s.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),sS=({size:e=20,className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[s.jsx("path",{d:"M20 12v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5"}),s.jsx("path",{d:"M18 8V2l-4 4"}),s.jsx("path",{d:"M14 2h4a2 2 0 0 1 2 2v2"})]}),aS=({size:e=20,className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[s.jsx("path",{d:"M3 3v5h5"}),s.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),s.jsx("path",{d:"M12 7v5l4 2"})]}),cS=({size:e=16})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),s.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),s.jsx("polyline",{points:"7 3 7 8 15 8"})]}),uS=({size:e=16})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M5 3l14 9-14 9V3z"})}),dS=({size:e=20,className:t})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[s.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),s.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),fS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),s.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]}),mS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),s.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),s.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]}),hS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),s.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]}),gS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}),s.jsx("path",{d:"M14 12a4 4 0 0 1 0 8H6"}),s.jsx("line",{x1:"4",y1:"12",x2:"18",y2:"12"})]}),pS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"17",y1:"18",x2:"3",y2:"18"})]}),yS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]}),xS=({size:e=20})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]}),so=3,hh=.05,gh=30,vS=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";case"line-start":case"line-end":return"grabbing";default:return"default"}},ph=e=>e%360,li=e=>e.map(t=>`${t.x},${t.y}`).join(" "),CS=e=>{const{width:t,height:n,backgroundColor:i,shapes:o,addShape:l,updateShape:c,activeTool:u,drawMode:f,fillColor:d,strokeColor:m,strokeWidth:h,textColor:g,textFont:p,textFontSize:b,numberOfSides:S,selectedShapeId:E,onSelectShape:x,isDrawingPolyline:y,polylinePoints:C,setPolylinePoints:v,onCompletePolyline:A,onCancelPolyline:_,isDrawingBezier:N,bezierPoints:V,setBezierPoints:q,onCompleteBezier:U,onCancelBezier:D,showGrid:Z,gridSize:be,snapStep:Ce,viewTransform:Se,setViewTransform:ee,activePointIndex:de,setActivePointIndex:xe,showCursorCoords:Q,showRotationAngle:O,pendingImage:oe,setPendingImage:Te,setCursorPos:Me}=e,[H,ve]=M.useState(null),[ce,Fe]=M.useState(null),[F,te]=M.useState(null),[he,T]=M.useState(null),z=M.useRef(null),X=M.useRef(null),ge=M.useRef(!1),ye=M.useRef(null),Ne=M.useRef(null),ze=M.useCallback(w=>{if(!z.current)return{x:0,y:0};const k=z.current.getBoundingClientRect();return{x:w.clientX-k.left,y:w.clientY-k.top}},[]),Ke=M.useCallback(w=>{const k=(w.x-Se.x)/Se.scale,Y=(w.y-Se.y)/Se.scale;return Ce>0?{x:Math.round(k/Ce)*Ce,y:Math.round(Y/Ce)*Ce}:{x:k,y:Y}},[Se,Ce]),De=M.useCallback(w=>{if(w.button===1){ve({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}ge.current=!1;const k=Ke(ze(w));if(ye.current=k,w.button===2){const K=w.target.dataset.id;if(E&&K===E){const W=o.find(P=>P.id===E);if(W){let P;switch(W.type){case"line":P={...W,points:[{...W.points[0]},{...W.points[1]}]};break;case"pencil":case"polyline":case"bezier":P={...W,points:W.points.map(fe=>({...fe}))};break;default:P={...W}}ve({type:"duplicating",initialShape:P,startPos:k})}}return}if(w.button!==0)return;const Y=w.target;if(Y.closest('[data-handle="true"]'))return;if(N){q(K=>[...K,k]);return}if(y){v(K=>[...K,k]);return}const pe=Y.dataset.id,re=o.find(K=>(K==null?void 0:K.id)===pe);if(u==="edit-points"){re?re&&re.state==="normal"&&E!==re.id&&x(re.id):x(null);return}if(u==="select"){re&&re.state!=="disabled"?(ve({type:"dragging",initialShape:re,startPos:k}),E!==re.id&&x(re.id)):ve({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}x(null);const R=new Date().toISOString();let $=null;switch(u){case"rectangle":$={id:R,name:at[u],type:"rectangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1,joinstyle:"miter"};break;case"square":$={id:R,name:at[u],type:"rectangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0,joinstyle:"miter"};break;case"circle":$={id:R,name:at[u],type:"ellipse",cx:k.x,cy:k.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0};break;case"ellipse":$={id:R,name:at[u],type:"ellipse",cx:k.x,cy:k.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1};break;case"line":$={id:R,name:at[u],type:"line",points:[{...k},{...k}],stroke:m,strokeWidth:h,rotation:0,capstyle:"round",state:"normal"};break;case"pencil":$={id:R,name:at[u],type:"pencil",points:[k],stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"round",capstyle:"round",isAspectRatioLocked:!1};break;case"triangle":$={id:R,name:at[u],type:"triangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",topVertexOffset:0,isAspectRatioLocked:!1};break;case"right-triangle":$={id:R,name:at[u],type:"right-triangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"rhombus":$={id:R,name:at[u],type:"rhombus",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"trapezoid":$={id:R,name:at[u],type:"trapezoid",x:k.x,y:k.y,width:0,height:0,topLeftOffsetRatio:.25,topRightOffsetRatio:.25,isSymmetrical:!0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"parallelogram":$={id:R,name:at[u],type:"parallelogram",x:k.x,y:k.y,width:0,height:0,angle:75,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"pieslice":case"chord":case"arc":{let K;u==="pieslice"?K="pieslice":u==="chord"?K="chord":K="arc";const W=K==="arc"?"none":d,P=K==="pieslice"||K==="chord"?270:90;$={id:R,name:at[u],type:"arc",x:k.x,y:k.y,width:0,height:0,fill:W,stroke:m,strokeWidth:h,rotation:0,state:"normal",start:0,extent:P,style:K,capstyle:"round",isAspectRatioLocked:!1};break}case"polygon":case"star":$={id:R,name:at[u],type:u,cx:k.x,cy:k.y,radius:0,sides:S,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",innerRadius:u==="star"?0:void 0,isAspectRatioLocked:!0};break;case"text":{$={id:R,name:at[u],type:"text",x:k.x,y:k.y,text:"Текст",font:p,fontSize:b,weight:"normal",slant:"roman",underline:!1,overstrike:!1,fill:g,stroke:"none",strokeWidth:0,rotation:0,anchor:"nw",justify:"left",width:0,state:"normal",isAspectRatioLocked:!1};break}case"image":{if(oe){const K=new Image;K.onload=()=>{const W={id:R,name:at[u],type:"image",x:k.x,y:k.y,width:K.width,height:K.height,src:oe,stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!0};l(W),Te(null)},K.src=oe}break}case"bitmap":{$={id:R,name:at[u],type:"bitmap",x:k.x,y:k.y,width:50,height:50,bitmapType:"error",foreground:"#000000",background:"#ffffff",stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!1};break}}$&&!["text","image","bitmap"].includes($.type)?ve({type:"drawing",shape:$,startPos:k}):$&&l($)},[u,o,x,d,m,h,g,p,b,S,y,v,N,q,Ke,ze,E,oe,Te,l]),Rn=M.useCallback(w=>{const k=ze(w);T(k);const Y=Ke(k);if(te(Y),Me(Y),!ge.current&&ye.current&&Math.hypot(Y.x-ye.current.x,Y.y-ye.current.y)>so&&(ge.current=!0),!H)return;if(H.type==="drawing"){const{shape:R,startPos:$}=H;let K=R;switch(R.type){case"rectangle":{let W=Math.abs(Y.x-$.x),P=Math.abs(Y.y-$.y);if(R.isAspectRatioLocked&&(W=P=Math.max(W,P)),f==="corner"){const fe=Y.x<$.x?$.x-W:$.x,I=Y.y<$.y?$.y-P:$.y;K={...R,x:fe,y:I,width:W,height:P}}else R.isAspectRatioLocked?W=P=Math.max(Math.abs(Y.x-$.x),Math.abs(Y.y-$.y))*2:(W*=2,P*=2),K={...R,x:$.x-W/2,y:$.y-P/2,width:W,height:P};break}case"arc":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":{let W=Math.abs(Y.x-$.x),P=Math.abs(Y.y-$.y);if("isAspectRatioLocked"in R&&R.isAspectRatioLocked&&(W=P=Math.max(W,P)),f==="corner"){const fe=Y.x<$.x?$.x-W:$.x,I=Y.y<$.y?$.y-P:$.y;K={...R,x:fe,y:I,width:W,height:P}}else"isAspectRatioLocked"in R&&R.isAspectRatioLocked?W=P=Math.max(Math.abs(Y.x-$.x),Math.abs(Y.y-$.y))*2:(W*=2,P*=2),K={...R,x:$.x-W/2,y:$.y-P/2,width:W,height:P};break}case"ellipse":{const W=Y.x-$.x,P=Y.y-$.y;if(R.isAspectRatioLocked){const fe=Math.hypot(W,P),I=f==="center"?fe:fe/2,se=f==="center"?$.x:$.x+W/2,ie=f==="center"?$.y:$.y+P/2;K={...R,cx:se,cy:ie,rx:I,ry:I}}else{const fe=f==="center"?Math.abs(W):Math.abs(W)/2,I=f==="center"?Math.abs(P):Math.abs(P)/2,se=f==="center"?$.x:$.x+W/2,ie=$.y+P/2;K={...R,cx:se,cy:ie,rx:fe,ry:I}}break}case"line":{K={...R,points:[$,Y]};break}case"pencil":{K={...R,points:[...R.points,Y]};break}case"polygon":case"star":{let W,P,fe;if(f==="corner"){const se=Math.abs(Y.x-$.x),ie=Math.abs(Y.y-$.y);W=$.x+(Y.x-$.x)/2,P=$.y+(Y.y-$.y)/2,fe=Math.min(se,ie)/2}else W=$.x,P=$.y,fe=Math.hypot(Y.x-$.x,Y.y-$.y);const I=R.type==="star"?fe/2:void 0;K={...R,cx:W,cy:P,radius:fe,innerRadius:I};break}}ve({...H,shape:K});return}if(H.type==="panning"){const R=w.clientX-H.initialPos.x,$=w.clientY-H.initialPos.y;ee(K=>({...K,x:K.x+R,y:K.y+$})),ve({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}const pe=ce??("initialShape"in H?H.initialShape:null);if(!pe)return;let re=pe;switch(H.type){case"point-editing":{const{initialShape:R,pointIndex:$,center:K}=H,W=R,P="rotation"in R?R.rotation:0;let fe=Y;P!==0&&(fe=Je(Y,K,-P));const I=[...W.points];I[$]=fe,re={...W,points:I};break}case"arc-angle-editing":{const{initialShape:R,handle:$,center:K,initialMouseAngle:W}=H;let fe=Math.atan2(-(Y.y-K.y),Y.x-K.x)*180/Math.PI-W;if(fe>180&&(fe-=360),fe<-180&&(fe+=360),$==="move"||R.isExtentLocked)re={...R,start:R.start+fe};else if($==="start"){const I=R.start+fe,se=R.extent-fe;re={...R,start:I,extent:ph(se)}}else{const I=R.extent+fe;re={...R,extent:ph(I)}}break}case"triangle-vertex-editing":{const{initialShape:R}=H,$=Tt(R);if(!$||R.width===0)break;const W=(Je(Y,$,-R.rotation).x-(R.x+R.width/2))/R.width;re={...R,topVertexOffset:W};break}case"star-inner-radius-editing":{const{initialShape:R,center:$}=H;if(R.type!=="star")break;const K=Math.hypot(Y.x-$.x,Y.y-$.y),W=Math.max(0,Math.min(K,R.radius));re={...R,innerRadius:W};break}case"trapezoid-offset-editing":{const{initialShape:R,handle:$}=H,K=Tt(R);if(!K||R.width===0)break;const W=Je(Y,K,-R.rotation);let P=R.topLeftOffsetRatio,fe=R.topRightOffsetRatio;if($==="left"?(P=(W.x-R.x)/R.width,R.isSymmetrical&&(fe=P)):(fe=(R.x+R.width-W.x)/R.width,R.isSymmetrical&&(P=fe)),P=Math.max(0,P),fe=Math.max(0,fe),P+fe>=1)break;re={...R,topLeftOffsetRatio:P,topRightOffsetRatio:fe};break}case"parallelogram-angle-editing":{const{initialShape:R}=H,$=Tt(R);if(!$||R.height===0)break;const W=Je(Y,$,-R.rotation).x-R.x;if(R.width-Math.abs(W)<=0)break;let fe=Math.atan2(R.height,W)*180/Math.PI;fe=Math.max(1,Math.min(179,fe)),re={...R,angle:fe};break}case"duplicating":case"dragging":{const R=Y.x-H.startPos.x,$=Y.y-H.startPos.y,{initialShape:K}=H;switch(K.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":re={...K,x:K.x+R,y:K.y+$};break;case"ellipse":case"polygon":case"star":re={...K,cx:K.cx+R,cy:K.cy+$};break;case"line":case"bezier":case"pencil":case"polyline":re={...K,points:K.points.map(W=>({x:W.x+R,y:W.y+$}))};break}break}case"resizing":{const{initialShape:R,handle:$,anchorPointGlobal:K,initialShapeProps:W}=H,{bbox:P,rotationCenter:fe,geometricCenter:I}=W;if($==="line-start"||$==="line-end"){re={...R,points:$==="line-start"?[Y,K]:[K,Y],rotation:0};break}const se=Je(Y,fe,-R.rotation),ie=Je(K,fe,-R.rotation);let Le;const Rt=$.includes("left")||$.includes("right"),Fn=$.includes("top")||$.includes("bottom"),$t="isAspectRatioLocked"in R&&R.isAspectRatioLocked;if(Rt&&Fn){let Ae=Math.abs(se.x-ie.x),$e=Math.abs(se.y-ie.y);if($t&&(P.width>0||P.height>0)){const wt=P.width/P.height;Ae/P.width>$e/P.height?$e=Ae/wt:Ae=$e*wt}const He=$.includes("left")?ie.x-Ae:ie.x,yt=$.includes("top")?ie.y-$e:ie.y;Le={x:He,y:yt,width:Ae,height:$e}}else if($t){const Ae=P.height===0||P.width===0?1:P.width/P.height;if(Rt){const $e=Math.abs(se.x-ie.x),He=$e/Ae;Le={x:Math.min(se.x,ie.x),y:P.y+P.height/2-He/2,width:$e,height:He}}else{const $e=Math.abs(se.y-ie.y),He=$e*Ae;Le={x:P.x+P.width/2-He/2,y:Math.min(se.y,ie.y),width:He,height:$e}}}else Rt?Le={x:Math.min(se.x,ie.x),y:P.y,width:Math.abs(se.x-ie.x),height:P.height}:Le={x:P.x,y:Math.min(se.y,ie.y),width:P.width,height:Math.abs(se.y-ie.y)};["line","pencil","polyline","bezier"].includes(R.type)&&(Le.width=Math.max(1,Le.width),Le.height=Math.max(1,Le.height));const{width:mt,height:pt}=Le,Ht={x:Le.x+mt/2,y:Le.y+pt/2},Dn={x:Ht.x-(P.x+P.width/2),y:Ht.y-(P.y+P.height/2)},Pe=Je(Dn,{x:0,y:0},R.rotation),rt={x:I.x+Pe.x,y:I.y+Pe.y};switch(R.type){case"text":{const Ae=So(R);if(Ae.width<=0)break;const $e=mt/Ae.width,He=Math.max(.1,R.fontSize*$e),yt={x:rt.x-mt/2,y:rt.y-pt/2,width:mt,height:pt},wt=R.anchor;let Xt=yt.x,Et=yt.y;["n","s","center"].includes(wt)&&(Xt+=yt.width/2),["ne","e","se"].includes(wt)&&(Xt+=yt.width),["w","e","center"].includes(wt)&&(Et+=yt.height/2),["sw","s","se"].includes(wt)&&(Et+=yt.height),re={...R,fontSize:parseFloat(He.toFixed(1)),x:Xt,y:Et};break}case"triangle":{const Ae=R,$e=Fr(Ae),He=zr({...Ae,rotation:0}),yt=He.width>0?mt/He.width:1,wt=He.height>0?pt/He.height:1,Xt=$e.map(ei=>({x:ie.x+(ei.x-ie.x)*yt,y:ie.y+(ei.y-ie.y)*wt})),Et=Xt.map(ei=>ei.x),zl=Xt.map(ei=>ei.y),zn={x:Math.min(...Et),y:Math.min(...zl),width:Math.max(...Et)-Math.min(...Et),height:Math.max(...zl)-Math.min(...zl)},Gl=Xt[0],to=[Xt[1],Xt[2]],no=Math.abs(to[0].x-to[1].x),Gn=Math.abs(Gl.y-to[0].y),io=Math.min(to[0].x,to[1].x),oc=Gl.y,lc=no>0?(Gl.x-(io+no/2))/no:0,Ro=io-zn.x,gn=oc-zn.y,rc=rt.x-zn.width/2,sc=rt.y-zn.height/2,hs=rc+Ro,ac=sc+gn;re={...Ae,x:hs,y:ac,width:no,height:Gn,topVertexOffset:lc};break}case"rectangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const Ae=rt.x-mt/2,$e=rt.y-pt/2;re={...R,x:Ae,y:$e,width:mt,height:pt};break}case"ellipse":{const Ae=mt/2,$e=pt/2;re={...R,cx:rt.x,cy:rt.y,rx:Ae,ry:$e};break}case"polygon":case"star":{const Ae=P.width>0?mt/P.width:1,$e=P.height>0?pt/P.height:1,He=Math.max(Ae,$e),yt=R.radius*He;let wt=R.innerRadius;R.type==="star"&&R.innerRadius!==void 0&&(wt=R.innerRadius*He),re={...R,cx:rt.x,cy:rt.y,radius:yt,innerRadius:wt};break}case"line":case"bezier":case"pencil":case"polyline":{const Ae=P.width!==0?mt/P.width:1,$e=P.height!==0?pt/P.height:1,He=R.points.map(Et=>({x:Le.x+(Et.x-P.x)*Ae,y:Le.y+(Et.y-P.y)*$e})),yt={x:rt.x-Le.width/2,y:rt.y-Le.height/2},wt={x:yt.x-Le.x,y:yt.y-Le.y},Xt=He.map(Et=>({x:Et.x+wt.x,y:Et.y+wt.y}));re={...R,points:Xt};break}}break}case"rotating":{const{center:R,startAngle:$,initialShape:K}=H;if(!("rotation"in K))break;let fe=(Math.atan2(Y.y-R.y,Y.x-R.x)+$)*180/Math.PI;fe=Math.round(fe),re={...K,rotation:fe};break}}Fe(re)},[H,f,ce,Ke,ee,ze,Me]),tn=M.useCallback(w=>{if((H==null?void 0:H.type)==="panning"&&!ge.current&&x(null),(H==null?void 0:H.type)==="drawing"&&ge.current){const{shape:k}=H;"width"in k&&"height"in k&&(k.width<=so||k.height<=so)||"rx"in k&&(k.rx*2<=so||k.ry*2<=so)||"radius"in k&&k.radius<=so||k.type==="line"&&Math.hypot(k.points[1].x-k.points[0].x,k.points[1].y-k.points[0].y)<=so||k.type==="pencil"&&k.points.length<=2||l(k)}else if((H==null?void 0:H.type)==="duplicating"&&ce){if(ge.current){const k={...ce,id:new Date().toISOString()},Y=H.initialShape.name,pe=!Y||Gr(Y);k.name=pe?Bt(k):Y,l(k)}}else if((H==null?void 0:H.type)==="point-editing"&&ce){const{initialShape:k,center:Y}=H;let pe=ce;const re=k.name,R=re&&!Gr(re);if("rotation"in k&&k.rotation!==0)if(k.type==="bezier"||k.type==="polyline"&&k.smooth){const W=ce.points.map(fe=>Je(fe,Y,k.rotation)),P={...ce,points:W,rotation:0,name:void 0};P.name=R?re:Bt(P),pe=P}else{const K=Hn(ce,Y);if(K){const W={...ce,points:K,rotation:0,name:void 0};W.name=R?re:Bt(W),pe=W}}else{const $=ce,K=R?re:Bt($);$.name!==K&&(pe={...$,name:K})}c(pe)}else ce&&c(ce);ve(null),Fe(null),ge.current=!1,ye.current=null},[H,l,c,x,ce]),as=w=>{y&&A(!1),N&&U(!1)},nc=w=>{te(null),T(null),Me(null),ye.current&&tn(w)},$l=w=>{w.preventDefault();const{deltaY:k}=w,Y=1.1,pe=ze(w);ee(re=>{let R=k<0?re.scale*Y:re.scale/Y;if(R=Math.max(hh,Math.min(gh,R)),R===re.scale)return re;const $=pe.x-(pe.x-re.x)*(R/re.scale),K=pe.y-(pe.y-re.y)*(R/re.scale);return{scale:R,x:$,y:K}})},ic=M.useCallback(w=>{if(w.preventDefault(),w.touches.length>=2){const[pe,re]=[w.touches[0],w.touches[1]],R=Math.hypot(pe.clientX-re.clientX,pe.clientY-re.clientY);if(R<1){Ne.current=null;return}const $={x:(pe.clientX+re.clientX)/2,y:(pe.clientY+re.clientY)/2};Ne.current={initialDist:R,initialMidpoint:$,initialTransform:Se},ve(null);return}const k=w.touches[0],Y={clientX:k.clientX,clientY:k.clientY,button:0,target:w.target};De(Y)},[De,Se]),Hl=M.useCallback(w=>{if(w.preventDefault(),w.touches.length===1){const k=w.touches[0],Y={clientX:k.clientX,clientY:k.clientY,button:0};Rn(Y)}else if(w.touches.length===2&&Ne.current){const{initialDist:k,initialMidpoint:Y,initialTransform:pe}=Ne.current;if(k===0)return;const[re,R]=[w.touches[0],w.touches[1]],$=Math.hypot(re.clientX-R.clientX,re.clientY-R.clientY),K={x:(re.clientX+R.clientX)/2,y:(re.clientY+R.clientY)/2};let W=pe.scale*($/k);W=Math.max(hh,Math.min(gh,W));const P=K.x-Y.x,fe=K.y-Y.y,I=K.x-(K.x-(pe.x+P))*(W/pe.scale),se=K.y-(K.y-(pe.y+fe))*(W/pe.scale);ee({scale:W,x:I,y:se})}},[Rn,ee,ze]),cs=M.useCallback(w=>{w.preventDefault(),w.touches.length<2&&(Ne.current=null);const k=w.changedTouches[0];if(k){const Y={clientX:k.clientX,clientY:k.clientY,button:0,target:w.target};tn(Y)}else tn({button:0})},[tn]),Qi=M.useMemo(()=>{let w=[...o];if((H==null?void 0:H.type)==="drawing"&&ge.current)w.push(H.shape);else if((H==null?void 0:H.type)==="duplicating"&&ce)w.push(ce);else if(ce){const k=w.findIndex(Y=>(Y==null?void 0:Y.id)===ce.id);k!==-1&&(w[k]=ce)}if(y&&C.length>0&&F){const k=C.filter(Boolean);k.length>0&&(w.push({id:"temp-polyline-main",type:"polyline",points:k,isClosed:!1,stroke:m,strokeWidth:h,fill:"none",state:"normal",joinstyle:"round",rotation:0,capstyle:"round"}),w.push({id:"temp-polyline-rubberband",type:"line",points:[k[k.length-1],F],stroke:m,strokeWidth:1,rotation:0,state:"normal",dash:[4,4]}))}if(N&&V.length>0&&F){const k=V.filter(Boolean);if(k.length>0){const Y=[...k,F];w.push({id:"temp-bezier-preview-dashed",type:"bezier",points:Y,smooth:!0,splinesteps:12,stroke:m,strokeWidth:1,dash:[4,4],capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"}),k.length>1&&w.push({id:"temp-bezier-main-solid",type:"bezier",points:k,smooth:!0,splinesteps:12,stroke:m,strokeWidth:h,capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"})}}return w},[o,H,ge,ce,y,C,F,m,h,N,V]),Bl=M.useMemo(()=>{const w=o.find(k=>(k==null?void 0:k.id)===E);return(w==null?void 0:w.id)===(ce==null?void 0:ce.id)?ce:w??null},[o,E,ce]),ds=(()=>{if(!H)return u==="select"?"grab":u==="edit-points"?"default":u==="image"&&oe?"copy":["text","image","bitmap"].includes(u)&&u!=="image"?"crosshair":u==="image"&&!oe?"default":"crosshair";switch(H.type){case"panning":case"dragging":case"point-editing":return"grabbing";case"duplicating":return"copy";case"arc-angle-editing":return ld;case"rotating":return od;case"resizing":return vS(H.handle);case"trapezoid-offset-editing":case"parallelogram-angle-editing":case"triangle-vertex-editing":case"star-inner-radius-editing":return ld;case"drawing":return"crosshair";default:return u==="select"?"grab":u==="edit-points"?"default":"crosshair"}})(),fs=w=>{if("rotation"in w&&w.rotation&&w.rotation!==0){const k=w.type==="text"?{x:w.x,y:w.y}:Tt(w);if(k)return`rotate(${w.rotation} ${k.x} ${k.y})`}},ms=M.useMemo(()=>{const w=new Map;return Qi.forEach(k=>{if((k.type==="line"||k.type==="bezier"||k.type==="pencil"||k.type==="polyline"&&!k.isClosed||k.type==="arc"&&k.style==="arc")&&k.arrow&&k.arrow!=="none"&&k.stroke!=="none"&&k.strokeWidth>0&&k.arrowshape){const[Y,pe,re]=k.arrowshape,R=k.strokeWidth,$=Y*R,K=pe*R,W=re*R,P=JSON.stringify({color:k.stroke,shape:[$,K,W]});w.has(P)||w.set(P,{color:k.stroke,shapeParams:[$,K,W]})}}),Array.from(w.values())},[Qi]),nn=w=>{const k=w.joinstyle??"miter";return{strokeLinejoin:k,strokeMiterlimit:k==="miter"?10:void 0}},dt=M.useMemo(()=>{const w=y?C:V;if(!((y||N)&&w.length>0))return null;const Y=w.length>=2,pe=w.length>=3,re="flex items-center gap-2 px-3 py-1.5 rounded-md transition-colors duration-200 text-sm font-semibold",R="bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)]",$="bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)]",K="bg-[var(--bg-disabled)] text-[var(--text-disabled)] cursor-not-allowed";return s.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-[var(--bg-primary)]/80 backdrop-blur-sm p-1 rounded-lg shadow-lg flex items-center gap-2 z-10",onMouseDown:W=>W.stopPropagation(),onTouchStart:W=>W.stopPropagation(),children:[s.jsxs("button",{onClick:()=>y?A(!1):U(!1),title:"Завершити",disabled:!Y,className:`${re} ${Y?R:K}`,children:[s.jsx(zb,{}),s.jsx("span",{children:"Завершити"})]}),s.jsxs("button",{onClick:()=>y?A(!0):U(!0),title:"Замкнути контур",disabled:!pe,className:`${re} ${pe?R:K}`,children:[s.jsx(Gb,{}),s.jsx("span",{children:"Замкнути"})]}),s.jsxs("button",{onClick:()=>y?_():D(),title:"Скасувати",className:`${re} ${$}`,children:[s.jsx(qb,{}),s.jsx("span",{children:"Скасувати"})]})]})},[y,N,C,V,A,U,_,D]),Fl=M.useMemo(()=>{const w=i.replace("#","");if(w.length<6)return"rgba(0, 0, 0, 0.1)";const k=parseInt(w.substring(0,2),16),Y=parseInt(w.substring(2,4),16),pe=parseInt(w.substring(4,6),16),re=(k*299+Y*587+pe*114)/1e3,R=.15,$=Math.log10(Math.max(1,Se.scale)),K=Math.min(R+$*.25,.75);return re<128?`rgba(255, 255, 255, ${K})`:`rgba(0, 0, 0, ${K})`},[i,Se.scale]),lt=w=>Math.round(w*100)/100,eo=(H==null?void 0:H.type)==="rotating",Nt=M.useMemo(()=>{if(eo&&H.initialShape&&"rotation"in H.initialShape){let w=null;if(ce&&"rotation"in ce?w=ce.rotation:H.initialShape&&"rotation"in H.initialShape&&(w=H.initialShape.rotation),w!==null){const k=H.initialShape.rotation;let Y=w-k;return Y>180&&(Y-=360),Y<-180&&(Y+=360),{absolute:w,delta:Y}}}return null},[H,ce,eo]);return s.jsxs("div",{ref:z,className:"w-full h-full relative",style:{cursor:ds},onMouseDown:De,onMouseMove:Rn,onMouseUp:tn,onMouseLeave:nc,onDoubleClick:as,onWheel:$l,onTouchStart:ic,onTouchMove:Hl,onTouchEnd:cs,onTouchCancel:cs,onContextMenu:w=>w.preventDefault(),children:[dt,(Q||O&&eo)&&he&&F&&s.jsxs("div",{className:"absolute p-1 px-2 text-xs rounded-md shadow-lg pointer-events-none z-20 bg-[var(--cursor-bg)] text-[var(--cursor-text)] font-mono",style:{left:he.x+15,top:he.y-15,transform:"translateY(-100%)"},children:[O&&Nt&&s.jsx("div",{children:`Кут: ${Nt.absolute.toFixed(0)}° (Δ: ${Nt.delta.toFixed(0)}°)`}),Q&&s.jsx("div",{children:`X: ${lt(F.x)}, Y: ${lt(F.y)}`})]}),s.jsxs("svg",{ref:X,className:"rounded-md touch-none w-full h-full",children:[s.jsxs("defs",{children:[s.jsx("filter",{id:"dropshadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:s.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"5",floodColor:"#000000",floodOpacity:"0.3"})}),Z&&s.jsx("pattern",{id:"grid",width:be,height:be,patternUnits:"userSpaceOnUse",children:s.jsx("path",{d:`M ${be} 0 L 0 0 0 ${be}`,fill:"none",stroke:Fl,strokeWidth:1/Se.scale})}),s.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"3",height:"3",fill:"black"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray12",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),s.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"black"}),s.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray25",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),s.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"black"}),s.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray50",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"white"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),s.jsx("mask",{id:"mask-gray75",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),s.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:s.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),s.jsx("mask",{id:"mask-bitmap-error",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),s.jsx("mask",{id:"mask-bitmap-hourglass",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-info",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-questhead",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-question",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-warning",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),ms.map(({color:w,shapeParams:k})=>{const[Y,pe,re]=k;if(Y<=0||pe<=0)return null;const R=`${w.replace(/[^a-zA-Z0-9]/g,"")}-${Y}-${pe}-${re}`;return s.jsxs(kt.Fragment,{children:[s.jsx("marker",{id:`arrow-end-${R}`,viewBox:`0 0 ${Y} ${pe}`,refX:Y,refY:pe/2,markerUnits:"userSpaceOnUse",markerWidth:Y,markerHeight:pe,orient:"auto",children:s.jsx("path",{d:`M 0,0 L ${Y},${pe/2} L 0,${pe} L ${re},${pe/2} z`,fill:w})}),s.jsx("marker",{id:`arrow-start-${R}`,viewBox:`0 0 ${Y} ${pe}`,refX:Y,refY:pe/2,markerUnits:"userSpaceOnUse",markerWidth:Y,markerHeight:pe,orient:"auto-start-reverse",children:s.jsx("path",{d:`M 0,0 L ${Y},${pe/2} L 0,${pe} L ${re},${pe/2} z`,fill:w})})]},R)})]}),s.jsxs("g",{transform:`translate(${Se.x} ${Se.y}) scale(${Se.scale})`,children:[s.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:i,filter:"url(#dropshadow)"}),Z&&s.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:"url(#grid)",style:{pointerEvents:"none"}}),Qi.filter(Boolean).map(w=>{if(w.state==="hidden")return null;const k=w.state==="disabled",Y=u!=="select",pe=(H==null?void 0:H.type)==="duplicating"&&w===ce,re=k?"default":Y?"inherit":"move",R=Math.max(w.strokeWidth,20/Se.scale);let $=fs(w);if((H==null?void 0:H.type)==="point-editing"&&w.id===H.initialShape.id){const{center:I}=H,se="rotation"in w&&w.rotation?w.rotation:0;se!==0&&I&&($=`rotate(${se} ${I.x} ${I.y})`)}const W={stroke:w.stroke,strokeWidth:w.strokeWidth,transform:$,style:{pointerEvents:"none",opacity:k?.5:pe?.6:1}},P={"data-id":w.id,key:`${w.id}-hitbox`,transform:$,stroke:"transparent",strokeWidth:R,style:{cursor:re}},fe=I=>{const se=I.stroke!=="none"&&I.strokeWidth>0;let ie;if("dash"in I&&I.dash&&I.dash.length>0&&I.strokeWidth>0){const mt="capstyle"in I&&I.capstyle?I.capstyle:"butt";ie=I.dash.map((pt,Ht)=>Ht%2===0&&pt<=2?mt==="round"?.01:I.strokeWidth:pt*I.strokeWidth).join(" ")}const Rt="dashoffset"in I?I.dashoffset:void 0,Fn=(I.capstyle==="projecting"?"square":I.capstyle)??"round";let $t,hn;if(se&&I.arrow&&I.arrow!=="none"&&I.arrowshape){const[mt,pt,Ht]=I.arrowshape,Dn=I.strokeWidth>0?I.strokeWidth:1,Pe=mt*Dn,rt=pt*Dn,Ae=Ht*Dn,$e=`${I.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${Pe}-${rt}-${Ae}`;(I.arrow==="first"||I.arrow==="both")&&($t=`url(#arrow-start-${$e})`),(I.arrow==="last"||I.arrow==="both")&&(hn=`url(#arrow-end-${$e})`)}return{strokeDasharray:ie,strokeDashoffset:Rt,markerStart:$t,markerEnd:hn,strokeLinecap:Fn}};switch(w.type){case"rectangle":{const I={...W,fill:w.fill,...nn(w)};return w.stipple&&w.fill!=="none"&&(I.mask=`url(#mask-${w.stipple})`),w.dash&&(I.strokeDasharray=w.dash.map(se=>se*w.strokeWidth).join(" ")),w.dashoffset&&(I.strokeDashoffset=w.dashoffset),s.jsxs("g",{children:[s.jsx("rect",{...P,x:w.x,y:w.y,width:w.width,height:w.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("rect",{x:w.x,y:w.y,width:w.width,height:w.height,...I})]},w.id)}case"ellipse":{const I=w,se={...W,fill:I.fill};return I.stipple&&I.fill!=="none"&&(se.mask=`url(#mask-${I.stipple})`),I.dash&&(se.strokeDasharray=I.dash.map(ie=>ie*I.strokeWidth).join(" ")),I.dashoffset&&(se.strokeDashoffset=I.dashoffset),s.jsxs("g",{children:[s.jsx("ellipse",{...P,cx:I.cx,cy:I.cy,rx:I.rx,ry:I.ry,fill:"transparent",style:{...P.style,pointerEvents:k?"none":I.fill==="none"?"stroke":"all"}}),s.jsx("ellipse",{cx:I.cx,cy:I.cy,rx:I.rx,ry:I.ry,...se})]},I.id)}case"arc":{const I=w,se=vf(I),ie={...W,fill:I.style==="arc"?"none":I.fill,...fe(I)};return I.stipple&&I.fill!=="none"&&I.style!=="arc"&&(ie.mask=`url(#mask-${I.stipple})`),s.jsxs("g",{children:[s.jsx("path",{...P,d:se,fill:"transparent",style:{...P.style,pointerEvents:k?"none":I.fill==="none"||I.style==="arc"?"stroke":"all"}}),s.jsx("path",{d:se,...ie})]},w.id)}case"line":return s.jsxs("g",{children:[s.jsx("line",{...P,x1:w.points[0].x,y1:w.points[0].y,x2:w.points[1].x,y2:w.points[1].y,style:{...P.style,pointerEvents:k?"none":"stroke"}}),s.jsx("line",{x1:w.points[0].x,y1:w.points[0].y,x2:w.points[1].x,y2:w.points[1].y,...W,...fe(w)})]},w.id);case"bezier":{const I=fl(w.points,w.smooth,w.isClosed),se=w.isClosed?w.fill:"none";return s.jsxs("g",{children:[s.jsx("path",{...P,d:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":se==="none"?"stroke":"all"}}),s.jsx("path",{d:I,...W,fill:se,...fe(w),...nn(w)})]},w.id)}case"pencil":{const I=bf(w.points);return s.jsxs("g",{children:[s.jsx("path",{...P,d:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"stroke"}}),s.jsx("path",{d:I,...W,fill:"none",strokeLinecap:"round",...nn(w),...fe(w)})]},w.id)}case"polyline":{const I={...W,...nn(w)};w.stipple&&w.isClosed&&w.fill!=="none"&&(I.mask=`url(#mask-${w.stipple})`),w.dash&&(I.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),w.dashoffset&&(I.strokeDashoffset=w.dashoffset);const se=w.isClosed?w.fill:"none";if(w.isClosed||Object.assign(I,fe(w)),w.smooth){const ie=fl(w.points,!0,w.isClosed);return s.jsxs("g",{children:[s.jsx("path",{...P,d:ie,fill:"transparent",style:{...P.style,pointerEvents:k?"none":se==="none"?"stroke":"all"}}),s.jsx("path",{...I,d:ie,fill:se})]},w.id)}if(w.isClosed){const ie=li(w.points);return s.jsxs("g",{children:[s.jsx("polygon",{...P,points:ie,fill:"transparent",style:{...P.style,pointerEvents:k?"none":se==="none"?"stroke":"all"}}),s.jsx("polygon",{...I,points:ie,fill:se})]},w.id)}return s.jsxs("g",{children:[s.jsx("polyline",{...P,points:li(w.points),fill:"transparent",style:{...P.style,pointerEvents:k?"none":"stroke"}}),s.jsx("polyline",{...I,points:li(w.points),fill:"none"})]},w.id)}case"triangle":{const I=li(Fr(w)),se={...W,fill:w.fill,...nn(w)};return w.dash&&(se.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),s.jsxs("g",{children:[s.jsx("polygon",{...P,points:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:I})]},w.id)}case"right-triangle":{const I=li(Cf(w)),se={...W,fill:w.fill,...nn(w)};return w.dash&&(se.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),s.jsxs("g",{children:[s.jsx("polygon",{...P,points:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:I})]},w.id)}case"rhombus":{const I=li(Tf(w)),se={...W,fill:w.fill,...nn(w)};return w.dash&&(se.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),s.jsxs("g",{children:[s.jsx("polygon",{...P,points:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:I})]},w.id)}case"trapezoid":{const I=li(Xa(w)),se={...W,fill:w.fill,...nn(w)};return w.dash&&(se.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),s.jsxs("g",{children:[s.jsx("polygon",{...P,points:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:I})]},w.id)}case"parallelogram":{const I=li(Wa(w)),se={...W,fill:w.fill,...nn(w)};return w.dash&&(se.strokeDasharray=w.dash.map(ie=>ie*w.strokeWidth).join(" ")),s.jsxs("g",{children:[s.jsx("polygon",{...P,points:I,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:I})]},w.id)}case"polygon":case"star":{const I=w,se={...W,fill:I.fill,...nn(I)};if(I.stipple&&I.fill!=="none"&&(se.mask=`url(#mask-${I.stipple})`),I.dash&&(se.strokeDasharray=I.dash.map(Le=>Le*I.strokeWidth).join(" ")),I.dashoffset&&(se.strokeDashoffset=I.dashoffset),I.smooth){const Le=fl(Al(w),!0,!0);return s.jsxs("g",{children:[s.jsx("path",{...P,d:Le,fill:"transparent",style:{...P.style,pointerEvents:k?"none":I.fill==="none"?"stroke":"all"}}),s.jsx("path",{...se,d:Le})]},w.id)}const ie=li(Al(w));return s.jsxs("g",{children:[s.jsx("polygon",{...P,points:ie,fill:"transparent",style:{...P.style,pointerEvents:k?"none":I.fill==="none"?"stroke":"all"}}),s.jsx("polygon",{...se,points:ie})]},w.id)}case"text":{const{text:I,font:se,fontSize:ie,weight:Le,slant:Rt,underline:Fn,overstrike:$t,fill:hn,anchor:mt,justify:pt,width:Ht}=w,Dn=Ka(w),Pe=So(w);if(!Pe)return null;const rt=pt==="center"?"middle":pt==="right"?"end":"start";let Ae;rt==="start"?Ae=Pe.x:rt==="middle"?Ae=Pe.x+Pe.width/2:Ae=Pe.x+Pe.width,Ht>0&&(rt==="middle"?Ae=Pe.x+Ht/2:rt==="end"?Ae=Pe.x+Ht:Ae=Pe.x);const $e={fontFamily:Ef(se),fontSize:ie,fontWeight:Le,fontStyle:Rt==="italic"?"italic":"normal",textDecoration:`${Fn?"underline":""} ${$t?"line-through":""}`};return s.jsxs("g",{"data-id":w.id,children:[s.jsx("rect",{...P,x:Pe.x,y:Pe.y,width:Pe.width,height:Pe.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),s.jsx("text",{...W,x:Ae,y:Pe.y,fill:hn,textAnchor:rt,dominantBaseline:"hanging",style:{...W.style,...$e,whiteSpace:"pre"},children:Dn.map((He,yt)=>s.jsx("tspan",{x:Ae,dy:yt===0?0:`${ie*1.2}px`,children:He},yt))})]},w.id)}case"image":return s.jsxs("g",{children:[s.jsx("rect",{...P,x:w.x,y:w.y,width:w.width,height:w.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),s.jsx("image",{href:w.src,x:w.x,y:w.y,width:w.width,height:w.height,...W})]},w.id);case"bitmap":{const{x:I,y:se,width:ie,height:Le,bitmapType:Rt,foreground:Fn,background:$t}=w;let hn;return Rt.startsWith("gray")?hn=`url(#mask-${Rt})`:hn=`url(#mask-bitmap-${Rt})`,s.jsxs("g",{children:[s.jsx("rect",{...P,x:I,y:se,width:ie,height:Le,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),s.jsxs("g",{...W,children:[s.jsx("rect",{x:I,y:se,width:ie,height:Le,fill:$t}),s.jsx("rect",{x:I,y:se,width:ie,height:Le,fill:Fn,mask:hn})]})]},w.id)}default:return null}}),Bl&&Bl.state==="normal"&&s.jsx(Ub,{shape:Bl,setAction:ve,svgRef:X,activeTool:u,getSnappedMousePosition:Ke,viewTransform:Se,getPointerPosition:ze,activePointIndex:de,setActivePointIndex:xe,updateShape:c,action:H})]})]})]})},TS=(e,t)=>{M.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},bS=({codeLines:e,isLoading:t,error:n,onUpdate:i,onPreview:o,onSaveCode:l,onOpenOrRunCodeOnline:c,hasUnsyncedChanges:u,selectedShapeId:f,highlightCodeOnSelection:d,setHighlightCodeOnSelection:m,showLineNumbers:h,setShowLineNumbers:g,showComments:p,setShowComments:b,generatorType:S,onSwitchToLocalGenerator:E})=>{const[x,y]=M.useState(!1),[C,v]=M.useState(!1),[A,_]=M.useState(!1),N=M.useRef(null),V=M.useRef(null);TS(N,()=>_(!1));const q=M.useMemo(()=>e.map(Ce=>Ce.content).join(`
`),[e]),U=M.useMemo(()=>p?e.length>0:e.some(Ce=>!Ce.content.trim().startsWith("#")),[e,p]);M.useEffect(()=>{e.length>0&&y(!1)},[e]),M.useEffect(()=>{var Ce;d&&((Ce=V.current)==null||Ce.scrollIntoView({behavior:"smooth",block:"center"}))},[f,e,d]);const D=()=>{q&&(navigator.clipboard.writeText(q),y(!0),setTimeout(()=>y(!1),2e3))},Z=()=>t?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-[var(--accent-primary)] rounded-full animate-spin"}),s.jsx("p",{className:"mt-4",children:"Генеруємо Python код..."})]}):n?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 p-4 text-center",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Помилка генерації"}),s.jsx("p",{className:"text-sm",children:n}),S==="gemini"&&s.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 rounded-md font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Перемкнутись на локальний генератор"})]}):U?s.jsx("div",{className:"p-4 overflow-auto text-sm h-full font-mono allow-selection",children:e.map((Ce,Se)=>{const ee=Ce.content.trim().startsWith("#");if(!p&&ee)return null;const de=d&&f!==null&&Ce.shapeId===f;return s.jsxs("div",{ref:de?V:null,className:"flex items-start",children:[h&&s.jsx("span",{className:`text-right text-[var(--text-tertiary)] select-none pr-4 w-12 flex-shrink-0 ${de?"line-number-highlighted":""}`,"aria-hidden":"true",children:Se+1}),s.jsx("span",{className:`code-line flex-grow ${C?"whitespace-pre-wrap break-words":"whitespace-pre"} ${de?"code-line-highlighted rounded":""}`,children:Ce.content||" "})]},Se)})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)] p-4",children:[s.jsx("h3",{className:"font-bold text-lg",children:"Код з'явиться тут"}),s.jsx("p",{className:"text-sm text-center mt-2",children:!p&&e.length>0?"Коментарі приховані. Увімкніть їх, щоб побачити код.":"Намалюйте фігури та згенеруйте код."})]}),be=S==="gemini";return s.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[s.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Код Tkinter"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>v(Ce=>!Ce),title:C?"Вимкнути перенесення рядків":"Увімкнути перенесення рядків",className:`p-1.5 rounded-md transition-colors duration-200 ${C?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:s.jsx(oS,{size:16})}),u&&e.length>0&&!t&&s.jsxs("button",{onClick:i,title:"Оновити код",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-yellow-600 hover:bg-yellow-500 text-white ${be?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[s.jsx(eS,{}),!be&&s.jsx("span",{children:"Оновити"})]}),e.length>0&&!n&&!t&&s.jsxs("button",{onClick:o,title:"Попередній перегляд",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] ${be?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[s.jsx(tS,{}),!be&&s.jsx("span",{children:"Перегляд"})]}),e.length>0&&!n&&s.jsxs("button",{onClick:D,disabled:x,className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] disabled:bg-green-600 disabled:text-white ${be?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[x?s.jsx(xv,{}):s.jsx(Qb,{}),!be&&(x?s.jsx("span",{children:"Скопійовано!"}):s.jsx("span",{children:"Копіювати"}))]}),s.jsxs("div",{ref:N,className:"relative",onMouseLeave:()=>_(!1),children:[s.jsx("button",{onClick:()=>_(Ce=>!Ce),title:"Додаткові опції",className:"p-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]",children:s.jsx(lS,{size:16})}),A&&s.jsxs("div",{className:"absolute top-full right-0 mt-0 w-64 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-20 border border-[var(--border-secondary)]",children:[s.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer",title:"Показувати або приховувати коментарі у коді.",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:Ce=>b(Ce.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),s.jsx("span",{children:"Показувати коментарі"})]}),s.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Показувати або приховувати номери рядків у вікні коду.",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:Ce=>g(Ce.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),s.jsx("span",{children:"Показувати номери рядків"})]}),s.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Автоматично підсвічувати рядок коду, що відповідає вибраній фігурі на полотні. Працює лише з локальним генератором.",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:Ce=>m(Ce.target.checked),disabled:be,className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),s.jsx("span",{children:"Підсвічувати код при виділенні"})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsxs("button",{onClick:()=>{l(),_(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Зберегти згенерований Python код у .py файл.",children:[s.jsx(cS,{size:16}),s.jsx("span",{children:"Зберегти у файл..."})]}),s.jsxs("button",{onClick:()=>{c(!1),_(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити код у онлайн-редакторі ЄPython без запуску.",children:[s.jsx(rd,{size:16}),s.jsx("span",{children:"Відкрити в онлайн IDE..."})]}),s.jsxs("button",{onClick:()=>{c(!0),_(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити та одразу запустити код у онлайн-редакторі ЄPython.",children:[s.jsx(uS,{size:16}),s.jsx("span",{children:"Запустити в онлайн IDE..."})]})]})]})]})]}),s.jsx("div",{className:"flex-grow min-h-[200px] lg:min-h-0",children:Z()})]})},ne=({children:e})=>s.jsx("div",{className:"flex items-center gap-2",children:e}),ae=({htmlFor:e,children:t,title:n})=>s.jsx("label",{htmlFor:e,className:"text-sm font-medium text-[var(--text-secondary)] w-24 flex-shrink-0",title:n,children:t}),Ee=M.forwardRef(({id:e,value:t,onChange:n,disabled:i,step:o=1,min:l,max:c,onFocus:u,title:f,className:d},m)=>s.jsx("input",{ref:m,id:e,type:"number",value:t,onChange:h=>{const g=Number(h.target.value);isNaN(g)||n(g)},disabled:i,step:o,min:l,max:c,onFocus:u,title:f,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${d??""}`}));Ee.displayName="NumberInput";const vv=(e,t)=>{M.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},qt=({id:e,value:t,onChange:n,onPreview:i,onCancel:o,disabled:l,title:c})=>{const[u,f]=M.useState(t),[d,m]=M.useState(!1),h=M.useRef(t),g=M.useRef(null);M.useEffect(()=>{d||(f(t),h.current=t)},[t,d]);const p=M.useCallback(()=>{d&&(o(),f(h.current),m(!1))},[d,o]);vv(g,p);const b=E=>{const x=E.target.value;d||(h.current=t,m(!0)),f(x),i(x)},S=E=>{E.stopPropagation(),n(u),h.current=u,m(!1)};return s.jsxs("div",{ref:g,className:"flex items-center gap-1",children:[s.jsx("input",{id:e,type:"color",value:u,onInput:b,disabled:l,title:c,className:"w-6 h-6 p-0 border-none rounded cursor-pointer bg-[var(--bg-secondary)] disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsx("div",{className:"flex items-center",style:{width:48,height:24},children:d&&!l&&s.jsxs("div",{className:"flex items-center bg-[var(--bg-tertiary)] rounded-md",children:[s.jsx("button",{onClick:S,title:"Застосувати колір",className:"p-1 rounded-l-md text-green-400 hover:bg-green-600 hover:text-white",children:s.jsx(xv,{size:16})}),s.jsx("button",{onClick:p,title:"Скасувати зміну",className:"p-1 rounded-r-md text-red-400 hover:bg-red-600 hover:text-white",children:s.jsx(Nn,{size:16})})]})})]})},xn=({id:e,checked:t,onChange:n,label:i,disabled:o,title:l})=>s.jsxs("div",{className:"flex items-center gap-2",title:l,children:[s.jsx("input",{id:e,type:"checkbox",checked:t,onChange:c=>n(c.target.checked),disabled:o,className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsx("label",{htmlFor:e,className:`text-sm font-medium ${o?"text-[var(--text-disabled)]":"text-[var(--text-secondary)]"}`,children:i})]}),vn=({id:e,value:t,onChange:n,children:i,disabled:o,title:l,className:c})=>s.jsx("select",{id:e,value:t,onChange:u=>n(u.target.value),disabled:o,title:l,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1.5 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${c??""}`,children:i}),yh=({id:e,value:t,onChange:n,disabled:i,rows:o=3,title:l,placeholder:c})=>s.jsx("textarea",{id:e,value:t,onChange:u=>n(u.target.value),disabled:i,rows:o,title:l,placeholder:c,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),SS=({id:e,value:t,onChange:n,disabled:i,isCustom:o})=>{const[l,c]=M.useState(!1),u=M.useRef(null);vv(u,()=>c(!1));const f=o?{name:"Користувацький"}:Xs.find(m=>JSON.stringify(m.pattern)===JSON.stringify(t??[]))??Xs[0],d=m=>{n(m.length>0?m:void 0),c(!1)};return s.jsxs("div",{ref:u,className:"relative w-full",onMouseLeave:()=>c(!1),children:[s.jsxs("button",{id:e,type:"button",onClick:()=>c(m=>!m),disabled:i,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between",title:"Вибрати готовий стиль штрихування або налаштувати власний",children:[s.jsx("span",{className:"truncate",children:f.name}),s.jsx("span",{className:"transform transition-transform text-[var(--text-tertiary)]",children:l?"▲":"▼"})]}),l&&s.jsx("div",{className:"absolute z-10 top-full left-0 mt-0 w-full bg-[var(--bg-tertiary)] rounded-md shadow-lg max-h-60 overflow-y-auto border border-[var(--border-secondary)]",children:Xs.map(m=>s.jsxs("button",{onClick:()=>d(m.pattern),title:m.description,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-[var(--text-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[s.jsx("div",{className:"w-20 flex-shrink-0 flex items-center justify-center h-4 mr-2",children:s.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 4",preserveAspectRatio:"none",children:s.jsx("line",{x1:"0",y1:"2",x2:"100",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeDasharray:m.pattern.join(" "),strokeLinecap:"round"})})}),s.jsx("span",{className:"flex-grow truncate",children:m.name})]},m.name))})]})},sd=({shape:e,updateShape:t,roundFn:n})=>{const i=e.stroke==="none"||e.strokeWidth===0,o=e.strokeWidth>0?e.strokeWidth:1,l=kt.useMemo(()=>!e.dash||e.dash.length===0?!1:!Xs.some(m=>JSON.stringify(m.pattern)===JSON.stringify(e.dash)),[e.dash]),c=m=>{t({...e,dash:m,dashoffset:m?e.dashoffset??0:void 0})},u=(m,h)=>{if(!e.dash)return;const g=[...e.dash],p=h>=0?h/o:0;g[m]=p,t({...e,dash:g})},f=()=>{const m=e.dash??[];t({...e,dash:[...m,5,3]})},d=()=>{if(!e.dash||e.dash.length<2)return;const m=e.dash.slice(0,-2);t({...e,dash:m.length>0?m:void 0})};return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-dash-select`,title:"Стиль штрихування лінії.",children:"Штрихування:"}),s.jsx(SS,{id:`${e.id}-dash-select`,value:e.dash,onChange:c,disabled:i,isCustom:l})]}),e.dash&&e.dash.length>0&&s.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[s.jsx("div",{className:"space-y-2",children:e.dash.map((m,h)=>s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-dash-${h}`,title:h%2===0?`Довжина ${h/2+1}-го штриха в пікселях.`:`Довжина ${Math.ceil(h/2)}-го пропуску в пікселях.`,children:h%2===0?`Штрих ${h/2+1} (px):`:`Пропуск ${Math.ceil(h/2)} (px):`}),s.jsx(Ee,{id:`${e.id}-dash-${h}`,value:n(m*o),onChange:g=>u(h,g),min:0,disabled:i,title:h%2===0?"Довжина штриха в пікселях":"Довжина пропуску в пікселях"})]},h))}),s.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[s.jsx("button",{onClick:d,disabled:e.dash.length<2,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--destructive-bg)] rounded-md disabled:opacity-50",title:"Видалити останній сегмент (штрих і пропуск)",children:"-"}),s.jsx("button",{onClick:f,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--accent-primary)] rounded-md",title:"Додати сегмент (штрих і пропуск)",children:"+"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-dashoffset`,title:"Зміщення патерна штрихування вздовж лінії.",children:"Зсув штриха:"}),s.jsx(Ee,{id:`${e.id}-dashoffset`,value:n(e.dashoffset??0),onChange:m=>t({...e,dashoffset:m}),disabled:i,title:"Зміщує початок патерна штрихування вздовж лінії"})]})]})]})},pn=({shape:e,updateShape:t})=>{const n="fill"in e&&e.fill!=="none";return s.jsxs(s.Fragment,{children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-stipple`,title:"Патерн для заповнення фігури (працює лише на X11).",children:"Патерн заливки:"}),s.jsxs(vn,{id:`${e.id}-stipple`,value:e.stipple??"none",onChange:i=>t({...e,stipple:i==="none"?void 0:i}),disabled:!n,title:"Вибрати патерн для заповнення фігури.",children:[s.jsx("option",{value:"none",children:"Немає"}),s.jsx("option",{value:"gray12",children:"Gray 12%"}),s.jsx("option",{value:"gray25",children:"Gray 25%"}),s.jsx("option",{value:"gray50",children:"Gray 50%"}),s.jsx("option",{value:"gray75",children:"Gray 75%"})]})]}),s.jsx("div",{className:"text-xs text-[var(--text-tertiary)] ml-32 -mt-2 mb-2",children:"Примітка: stipple може працювати лише на X11."})]})},Un=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i})=>{const o=e.fill==="none",l=e.type==="arc"&&e.style==="arc"||(e.type==="polyline"||e.type==="bezier")&&!e.isClosed;return s.jsx(s.Fragment,{children:s.jsxs(ne,{children:[s.jsx(xn,{id:`${e.id}-fill-toggle`,checked:!o,onChange:c=>t({...e,fill:c?"#4f46e5":"none"}),label:"Заливка:",disabled:l,title:"Увімкнути або вимкнути заливку фігури."}),s.jsx(qt,{id:`${e.id}-fill`,value:o?"#000000":e.fill,onChange:c=>t({...e,fill:c}),onPreview:c=>n(e.id,{fill:c}),onCancel:i,disabled:o||l,title:"Колір заливки фігури."})]})})},Ln=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,roundFn:o})=>{const l=e.stroke==="none",c=e.type!=="text";return s.jsxs(s.Fragment,{children:[s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Контур"}),s.jsxs(ne,{children:[s.jsx(xn,{id:`${e.id}-stroke-toggle`,checked:!l,onChange:u=>t({...e,stroke:u?"#000000":"none"}),label:"Контур:",title:"Увімкнути або вимкнути контур фігури."}),s.jsx(qt,{id:`${e.id}-stroke`,value:l?"#ffffff":e.stroke,onChange:u=>t({...e,stroke:u}),onPreview:u=>n(e.id,{stroke:u}),onCancel:i,disabled:l,title:"Колір контуру фігури."})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-stroke-width`,title:"Товщина лінії контуру в пікселях.",children:"Товщина:"}),s.jsx(Ee,{id:`${e.id}-stroke-width`,value:o(e.strokeWidth),onChange:u=>t({...e,strokeWidth:u}),min:0,disabled:l,title:"Товщина лінії контуру в пікселях."})]}),c&&s.jsx(sd,{shape:e,updateShape:t,roundFn:o})]})},wS=({points:e,onPointsChange:t,shapeId:n,selectedShape:i,isEditing:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,isShapeClosed:d,roundFn:m})=>{const[h,g]=M.useState(e.length<10),p=M.useRef([]),b=M.useRef([]);M.useEffect(()=>{p.current=p.current.slice(0,e.length),b.current=b.current.slice(0,e.length)},[e.length]),M.useEffect(()=>{var C,v;l!==null&&((C=p.current[l])==null||C.scrollIntoView({behavior:"smooth",block:"nearest"}),(v=b.current[l])==null||v.focus({preventScroll:!0}))},[l]);const S=M.useMemo(()=>Tt(i),[i]),E=M.useMemo(()=>"rotation"in i?i.rotation:0,[i]),x=M.useMemo(()=>!S||E===0?e:e.map(C=>Je(C,S,E)),[e,S,E]),y=(C,v,A)=>{if(!S)return;if(E===0){const U=[...e];U[C]={...U[C],[v]:A},t(U);return}const N={...x[C],[v]:A},V=Je(N,S,-E),q=[...e];q[C]=V,t(q)};return s.jsxs("div",{className:"border-t border-[var(--border-secondary)] pt-2 mt-2",children:[s.jsxs("button",{onClick:()=>g(C=>!C),className:"w-full text-left font-semibold text-[var(--text-secondary)] py-1 flex justify-between items-center",title:"Показати/приховати список вузлових точок фігури",children:[s.jsxs("span",{children:["Вузли (",e.length,")"]}),s.jsx("span",{className:`transform transition-transform ${h?"rotate-180":"rotate-0"}`,children:"▼"})]}),h&&s.jsx("div",{className:"space-y-1 mt-2 max-h-60 overflow-y-auto pr-2",children:e.map((C,v)=>s.jsxs(kt.Fragment,{children:[s.jsxs("div",{ref:A=>{p.current[v]=A},className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 p-1 rounded-md transition-colors",children:[s.jsxs("span",{className:"text-xs text-[var(--text-tertiary)] font-mono text-right",children:[v,":"]}),s.jsx(Ee,{ref:A=>{b.current[v]=A},id:`${n}-point-${v}-x`,value:m(x[v].x),onChange:A=>y(v,"x",A),disabled:!o,onFocus:()=>c(v),title:`X-координата вузла ${v}`,className:l===v?"bg-[#4f46e5]/30":""}),s.jsx(Ee,{id:`${n}-point-${v}-y`,value:m(x[v].y),onChange:A=>y(v,"y",A),disabled:!o,onFocus:()=>c(v),title:`Y-координата вузла ${v}`,className:l===v?"bg-[#4f46e5]/30":""}),s.jsx("button",{onClick:()=>u(v),title:"Видалити вузол",className:"p-1 text-[var(--destructive-text)] hover:text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:!o||e.length<=2,children:s.jsx(Za,{size:16})})]},`${n}-point-${v}`),(d||v<e.length-1)&&o&&s.jsxs("div",{className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 h-4",children:[s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("button",{onClick:()=>f(v+1),title:"Додати вузол між цим та наступним",className:"w-5 h-5 flex justify-center items-center bg-[var(--bg-primary)] text-[var(--text-tertiary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] rounded-full transition-colors group",children:s.jsxs("svg",{className:"w-3 h-3 text-[var(--text-tertiary)] group-hover:text-[var(--accent-text)]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),s.jsx("div",{className:"col-span-3 h-px bg-[var(--border-secondary)]"})]})]},`${n}-point-fragment-${v}`))})]})},ES=({shape:e,updateShape:t,roundFn:n})=>{let i=0,o=0,l=0,c=0;e.type==="rectangle"||e.type==="arc"?(i=e.x,o=e.y,l=e.x+e.width,c=e.y+e.height):e.type==="ellipse"&&(i=e.cx-e.rx,o=e.cy-e.ry,l=e.cx+e.rx,c=e.cy+e.ry);const u=(f,d)=>{if(e.type==="rectangle"||e.type==="arc"){let{x:m,y:h,width:g,height:p}=e;switch(f){case"x1":g=m+g-d,m=d;break;case"y1":p=h+p-d,h=d;break;case"x2":g=d-m;break;case"y2":p=d-h;break}g>=0&&p>=0&&t({...e,x:m,y:h,width:g,height:p})}else if(e.type==="ellipse"){let m=e.cx-e.rx,h=e.cy-e.ry,g=e.cx+e.rx,p=e.cy+e.ry;switch(f){case"x1":m=d;break;case"y1":h=d;break;case"x2":g=d;break;case"y2":p=d;break}const b=(m+g)/2,S=(h+p)/2,E=(g-m)/2,x=(p-h)/2;E>=0&&x>=0&&t({...e,cx:b,cy:S,rx:E,ry:x})}};return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-tk-x1`,title:"X-координата верхнього лівого кута рамки Tkinter.",children:"x1:"}),s.jsx(Ee,{id:`${e.id}-tk-x1`,value:n(i),onChange:f=>u("x1",f)})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-tk-y1`,title:"Y-координата верхнього лівого кута рамки Tkinter.",children:"y1:"}),s.jsx(Ee,{id:`${e.id}-tk-y1`,value:n(o),onChange:f=>u("y1",f)})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-tk-x2`,title:"X-координата нижнього правого кута рамки Tkinter.",children:"x2:"}),s.jsx(Ee,{id:`${e.id}-tk-x2`,value:n(l),onChange:f=>u("x2",f)})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-tk-y2`,title:"Y-координата нижнього правого кута рамки Tkinter.",children:"y2:"}),s.jsx(Ee,{id:`${e.id}-tk-y2`,value:n(c),onChange:f=>u("y2",f)})]})]})},xh=e=>e?["line","pencil","polyline","bezier"].includes(e.type):!1,MS=({selectedShape:e,updateShape:t,deleteShape:n,duplicateShape:i,activeTool:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,convertToPath:d,showNotification:m,setShapePreview:h,cancelShapePreview:g})=>{const[p,b]=M.useState(null),[S,E]=M.useState(!1),[x,y]=M.useState(null),[C,v]=M.useState(""),[A,_]=M.useState(""),N=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],V={"Популярні Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],"Популярні Serif":["Times New Roman","Georgia","Garamond"],"Популярні Monospace":["Courier New","Consolas","Lucida Console","Monaco"],Декоративні:["Impact","Comic Sans MS","Brush Script MT"]},q=[...Object.values(V).flat(),...N].sort((F,te)=>F.localeCompare(te)),U=F=>Math.round(F*100)/100,D=kt.useMemo(()=>e?id(e):null,[e]),Z=kt.useMemo(()=>e?zr({...e,rotation:0}):null,[e]);M.useEffect(()=>{Z&&(v(U(Z.width).toString()),_(U(Z.height).toString()))},[Z]);const be=(F,te)=>{if(!e||!D)return;const he=F==="x"?D.x:D.y,T=te-he,z=F==="x"?T:0,X=F==="y"?T:0;let ge={...e};switch(ge.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":ge.x+=z,ge.y+=X;break;case"ellipse":case"polygon":case"star":ge.cx+=z,ge.cy+=X;break;case"line":case"bezier":case"pencil":case"polyline":ge.points=ge.points.map(ye=>({x:ye.x+z,y:ye.y+X}));break}t(ge)},Ce=(F,te)=>{if(!e||!Z)return;const he=F==="width"?Z.width:Z.height,T=Tt(e);if(!T)return;let z={...e};const X="isAspectRatioLocked"in e&&e.isAspectRatioLocked;if(he===0&&te>0)switch(z.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const ge=z.width,ye=z.height,Ne=F==="width"||X?te:ge,ze=F==="height"||X?te:ye;z.x=T.x-Ne/2,z.y=T.y-ze/2,z.width=Ne,z.height=ze;break}case"ellipse":{const ge=z.rx,ye=z.ry;z.rx=F==="width"||X?te/2:ge,z.ry=F==="height"||X?te/2:ye;break}case"text":{const ge=So(z);if(!ge||ge.height===0||ge.width===0)break;const ye=te/(F==="width"?ge.width:ge.height);z.fontSize*=ye;break}}else{if(he<=0)return;let ge=1,ye=1;switch(F==="width"?(ge=te/he,X&&(ye=ge)):(ye=te/he,X&&(ge=ye)),z.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const Ne=z.width*ge,ze=z.height*ye;z.x=T.x-Ne/2,z.y=T.y-ze/2,z.width=Ne,z.height=ze;break}case"ellipse":{z.rx*=ge,z.ry*=ye;break}case"polygon":case"star":{const Ne=X||F!=="height"?ge:ye;z.radius*=Ne,z.innerRadius!==void 0&&(z.innerRadius*=Ne);break}case"text":{const Ne=X||F!=="height"?ge:ye;z.fontSize*=Ne;break}case"line":case"pencil":case"polyline":case"bezier":{z.points=z.points.map(Ne=>({x:T.x+(Ne.x-T.x)*ge,y:T.y+(Ne.y-T.y)*ye}));break}}}t(z)},Se=(F,te)=>{if(!e||(F==="width"?v(te):_(te),te===""))return;const he=parseFloat(te);isNaN(he)||he<0||xh(e)&&he<1||Ce(F,he)},ee=F=>{if(!e||!Z)return;const te=F==="width"?C:A,he=parseFloat(te);let T=null;if(isNaN(he)||he<0||te===""?T=F==="width"?Z.width:Z.height:xh(e)&&he<1&&(m("Розмір контурів не може бути менше 1, щоб уникнути втрати форми.","info"),T=Math.max(1,F==="width"?Z.width:Z.height)),T!==null){const z=U(T);F==="width"?v(z.toString()):_(z.toString());const X=F==="width"?Z.width:Z.height;Math.abs(X-z)>.001&&Ce(F,z)}},de=F=>{if(e)if(e.type==="polyline"||e.type==="bezier"||e.type==="pencil"||e.type==="line")t({...e,points:F});else{if(!Hn(e))return;const he={id:e.id,name:e.name,type:"polyline",points:F,isClosed:!0,rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"?e.fill:"none",joinstyle:"joinstyle"in e&&typeof e.joinstyle=="string"?e.joinstyle:"miter",smooth:"smooth"in e&&typeof e.smooth=="boolean"?e.smooth:void 0,dash:"dash"in e?e.dash:void 0,dashoffset:"dashoffset"in e?e.dashoffset:void 0,isAspectRatioLocked:"isAspectRatioLocked"in e?e.isAspectRatioLocked:!1};t(he)}},xe=async()=>{if(!("queryLocalFonts"in window)){m("Ваш браузер або середовище не підтримує завантаження локальних шрифтів.","error",5e3),b([]);return}try{E(!0);const F=await window.queryLocalFonts();if(F.length===0){m("Локальні шрифти не знайдено або дозвіл не було надано.","info",4e3),b([]);return}const te=new Set;for(const z of F)te.add(z.family);const he=new Set(q),T=Array.from(te).filter(z=>!he.has(z));b(T.sort((z,X)=>z.localeCompare(X))),T.length>0?m(`Завантажено ${T.length} нових системних шрифтів.`,"info"):m("Нових унікальних системних шрифтів не знайдено.","info")}catch(F){console.error("Помилка під час завантаження системних шрифтів:",F),b([]);let te="Не вдалося завантажити шрифти. Дивіться консоль для деталей.",he=5e3;(F instanceof Error?F.toString():String(F)).includes("disallowed by Permissions Policy")||F instanceof DOMException&&F.name==="SecurityError"?(te="Доступ до шрифтів заблоковано політикою безпеки середовища.",he=6e3):F instanceof DOMException&&F.name==="NotAllowedError"&&(te="Ви відхилили дозвіл на доступ до шрифтів."),m(te,"error",he)}finally{E(!1)}},Q=async F=>{if(!(!e||e.type!=="text")){if(F==="load-system-fonts"){await xe();return}t({...e,font:F})}},O=kt.useMemo(()=>e?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(e.type):!1,[e]),oe=()=>{if(!e||!D)return null;const F=s.jsx(s.Fragment,{children:s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-state`,title:"Стан видимості та інтерактивності об'єкта.",children:"Стан:"}),s.jsxs(vn,{id:`${e.id}-state`,value:e.state,onChange:T=>t({...e,state:T}),children:[s.jsx("option",{value:"normal",children:"Звичайний"}),s.jsx("option",{value:"hidden",children:"Прихований"}),s.jsx("option",{value:"disabled",children:"Вимкнений"})]})]})}),te=T=>s.jsx(s.Fragment,{children:s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-joinstyle`,title:"Стиль з'єднання сегментів лінії.",children:"Стиль з'єднання:"}),s.jsxs(vn,{id:`${T.id}-joinstyle`,value:T.joinstyle??"miter",onChange:z=>t({...T,joinstyle:z}),title:"Визначає, як виглядають кути при з'єднанні ліній.",children:[s.jsx("option",{value:"miter",children:"Гострий"}),s.jsx("option",{value:"round",children:"Круглий"}),s.jsx("option",{value:"bevel",children:"Скошений"})]})]})}),he=T=>{const z=(T.type==="polyline"||T.type==="bezier")&&T.isClosed,X=T.strokeWidth>0?T.strokeWidth:1,[ge,ye,Ne]=T.arrowshape??[4,4,1.5],ze=(Ke,De)=>{if(X===0)return;const Rn=[...T.arrowshape??[4,4,1.5]],tn=De/X;Rn[Ke]=parseFloat(tn.toFixed(2)),t({...T,arrowshape:Rn})};return s.jsxs(s.Fragment,{children:[s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-capstyle`,title:"Стиль кінців незамкнених ліній.",children:"Стиль кінця:"}),s.jsxs(vn,{id:`${T.id}-capstyle`,value:T.capstyle??"round",onChange:Ke=>t({...T,capstyle:Ke}),title:"Визначає, як виглядають кінці ліній.",children:[s.jsx("option",{value:"butt",children:"Плаский"}),s.jsx("option",{value:"round",children:"Круглий"}),s.jsx("option",{value:"projecting",children:"Квадратний"})]})]}),!z&&s.jsxs(s.Fragment,{children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-arrow`,title:"Додати стрілки на кінці лінії.",children:"Стрілки:"}),s.jsxs(vn,{id:`${T.id}-arrow`,value:T.arrow??"none",onChange:Ke=>{const De={...T,arrow:Ke};Ke!=="none"&&!T.arrowshape&&(De.arrowshape=[4,4,1.5]),t(De)},title:"Додати стрілки на початок, кінець або на обидва кінці лінії.",children:[s.jsx("option",{value:"none",children:"Немає"}),s.jsx("option",{value:"first",children:"На початку"}),s.jsx("option",{value:"last",children:"В кінці"}),s.jsx("option",{value:"both",children:"На обох кінцях"})]})]}),T.arrow&&T.arrow!=="none"&&s.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-arrow-d1`,title:"Абсолютна довжина стрілки в пікселях.",children:"Довжина:"}),s.jsx(Ee,{id:`${T.id}-arrow-d1`,value:U(ge*X),onChange:Ke=>ze(0,Ke),min:0,title:"Абсолютна довжина стрілки в пікселях"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-arrow-d2`,title:"Абсолютна ширина стрілки в пікселях.",children:"Ширина:"}),s.jsx(Ee,{id:`${T.id}-arrow-d2`,value:U(ye*X),onChange:Ke=>ze(1,Ke),min:0,title:"Абсолютна ширина стрілки в пікселях"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-arrow-d3`,title:"Абсолютна ширина основи стрілки в пікселях.",children:"Ширина основи:"}),s.jsx(Ee,{id:`${T.id}-arrow-d3`,value:U(Ne*X),onChange:Ke=>ze(2,Ke),min:0,title:"Абсолютна ширина основи стрілки в пікселях"})]})]})]})]})};switch(e.type){case"rectangle":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"ellipse":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U})]})}case"polygon":case"star":{const T=e,z=kb(T);return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-sides`,title:"Кількість сторін або променів у фігури.",children:"Сторони:"}),s.jsx(Ee,{id:`${T.id}-sides`,value:T.sides,onChange:X=>t({...T,sides:X}),min:3})]}),T.type==="star"&&s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-inner-radius`,title:"Радіус внутрішніх вершин зірки.",children:"Внутр. радіус:"}),s.jsx(Ee,{id:`${T.id}-inner-radius`,value:U(T.innerRadius??0),onChange:X=>t({...T,innerRadius:X}),min:0})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-side-length`,title:"Довжина однієї сторони багатокутника.",children:"Довжина сторони:"}),s.jsx(Ee,{id:`${T.id}-side-length`,value:U(z),onChange:X=>t({...T,radius:_b({sideLength:X,sides:T.sides})})})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"triangle":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-top-offset`,title:"Горизонтальне зміщення верхньої вершини відносно центру основи.",children:"Зсув вершини:"}),s.jsx(Ee,{id:`${T.id}-top-offset`,value:U(T.topVertexOffset??0),onChange:z=>t({...T,topVertexOffset:z}),step:.01})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"right-triangle":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"rhombus":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"trapezoid":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx(ne,{children:s.jsx(xn,{id:`${T.id}-symm`,checked:!!T.isSymmetrical,onChange:z=>t({...T,isSymmetrical:z}),label:"Симетрична:",title:"Зробити зміщення верхніх кутів однаковим."})}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-topleft`,title:"Зміщення верхнього лівого кута всередину у відсотках від ширини.",children:"Зсув зліва (%):"}),s.jsx(Ee,{id:`${T.id}-topleft`,value:U(T.topLeftOffsetRatio*100),onChange:z=>t({...T,topLeftOffsetRatio:z/100})})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-topright`,title:"Зміщення верхнього правого кута всередину у відсотках від ширини.",children:"Зсув справа (%):"}),s.jsx(Ee,{id:`${T.id}-topright`,value:U(T.topRightOffsetRatio*100),onChange:z=>t({...T,topRightOffsetRatio:z/100})})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"parallelogram":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-angle`,title:"Кут нахилу бічних сторін (90 градусів = прямокутник).",children:"Кут (º):"}),s.jsx(Ee,{id:`${T.id}-angle`,value:U(T.angle),onChange:z=>t({...T,angle:z}),min:1,max:179})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T)]})}case"line":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),s.jsx(qt,{id:`${T.id}-stroke`,value:T.stroke,onChange:z=>t({...T,stroke:z}),onPreview:z=>h(T.id,{stroke:z}),onCancel:g})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),s.jsx(Ee,{id:`${T.id}-stroke-width`,value:U(T.strokeWidth),onChange:z=>t({...T,strokeWidth:z}),min:0})]}),s.jsx(sd,{shape:T,updateShape:t,roundFn:U}),he(T)]})}case"pencil":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),s.jsx(qt,{id:`${T.id}-stroke`,value:T.stroke,onChange:z=>t({...T,stroke:z}),onPreview:z=>h(T.id,{stroke:z}),onCancel:g})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),s.jsx(Ee,{id:`${T.id}-stroke-width`,value:U(T.strokeWidth),onChange:z=>t({...T,strokeWidth:z}),min:0})]}),s.jsx(sd,{shape:T,updateShape:t,roundFn:U}),te(T),he(T)]})}case"polyline":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx(ne,{children:s.jsx(xn,{id:`${T.id}-isClosed`,checked:T.isClosed,onChange:z=>t({...T,isClosed:z,name:Bt({...T,isClosed:z})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),s.jsx(ne,{children:s.jsx(xn,{id:`${T.id}-smooth`,checked:!!T.smooth,onChange:z=>t({...T,smooth:z}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки згладжування:"}),s.jsx(Ee,{id:`${T.id}-splinesteps`,value:T.splinesteps??12,onChange:z=>t({...T,splinesteps:z}),min:1,max:100,disabled:!T.smooth})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T),he(T)]})}case"bezier":{const T=e;return s.jsxs(s.Fragment,{children:[F,s.jsx(ne,{children:s.jsx(xn,{id:`${T.id}-isClosed`,checked:T.isClosed,onChange:z=>t({...T,isClosed:z,name:Bt({...T,isClosed:z})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),s.jsx(ne,{children:s.jsx(xn,{id:`${T.id}-smooth`,checked:!!T.smooth,onChange:z=>t({...T,smooth:z}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки сплайна:"}),s.jsx(Ee,{id:`${T.id}-splinesteps`,value:T.splinesteps,onChange:z=>t({...T,splinesteps:z}),min:1,max:100,disabled:!T.smooth})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),te(T),he(T)]})}case"arc":{const T=e,z=T.start+T.extent,X=ye=>{if(T.isExtentLocked)t({...T,start:ye});else{const Ne=z-ye;t({...T,start:ye,extent:Ne})}},ge=ye=>{if(T.isExtentLocked){const Ne=ye-T.extent;t({...T,start:Ne})}else{const Ne=ye-T.start;t({...T,extent:Ne})}};return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-style`,title:"Стиль дуги: Сектор (pieslice), Хорда (chord), або Дуга (arc).",children:"Стиль:"}),s.jsxs(vn,{id:`${T.id}-style`,value:T.style,onChange:ye=>{const Ne=Bt({...T,style:ye});t({...T,style:ye,name:Ne})},children:[s.jsx("option",{value:"pieslice",children:"Сектор"}),s.jsx("option",{value:"chord",children:"Хорда"}),s.jsx("option",{value:"arc",children:"Дуга"})]})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-start`,title:"Початковий кут дуги в градусах (0 - на 3 години).",children:"Початок (º):"}),s.jsx(Ee,{id:`${T.id}-start`,value:U(T.start),onChange:X})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-end`,title:"Кінцевий кут дуги в градусах.",children:"Кінець (º):"}),s.jsx(Ee,{id:`${T.id}-end`,value:U(z),onChange:ge})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-extent`,title:"Довжина дуги в градусах.",children:"Довжина (º):"}),s.jsx(Ee,{id:`${T.id}-extent`,value:U(T.extent),onChange:ye=>t({...T,extent:ye}),disabled:T.isExtentLocked})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-extent-lock`,children:""}),s.jsx(xn,{id:`${T.id}-extent-lock`,checked:!!T.isExtentLocked,onChange:ye=>t({...T,isExtentLocked:ye}),label:"Блокувати довжину",title:"Зберігати довжину дуги при зміні її кінців."})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsx(Un,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g}),s.jsx(pn,{shape:T,updateShape:t}),s.jsx(Ln,{shape:T,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),T.style==="arc"&&he(T)]})}case"text":{const T=e,z={nw:"Верхній лівий кут",n:"Верхній центр",ne:"Верхній правий кут",w:"Центр ліворуч",center:"Центр",e:"Центр праворуч",sw:"Нижній лівий кут",s:"Нижній центр",se:"Нижній правий кут"};return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-text`,title:"Текст для відображення.",children:"Текст:"}),s.jsx(yh,{id:`${T.id}-text`,value:T.text,onChange:X=>t({...T,text:X})})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-font`,title:"Шрифт для тексту.",children:"Шрифт:"}),s.jsxs(vn,{id:`${T.id}-font`,value:T.font,onChange:Q,children:[Object.entries(V).map(([X,ge])=>s.jsx("optgroup",{label:X,children:ge.map(ye=>s.jsx("option",{value:ye,children:ye},ye))},X)),p&&p.length>0&&s.jsx("optgroup",{label:"Системні шрифти",children:p.map(X=>s.jsx("option",{value:X,children:X},X))}),s.jsx("optgroup",{label:"Логічні шрифти Tk",children:N.map(X=>s.jsx("option",{value:X,children:X},X))}),s.jsx("optgroup",{label:"Дії",children:s.jsx("option",{value:"load-system-fonts",disabled:S,children:S?"Завантаження...":"Завантажити системні шрифти"})})]})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-fontSize`,title:"Розмір шрифту.",children:"Розмір:"}),s.jsx(Ee,{id:`${T.id}-fontSize`,value:U(T.fontSize),onChange:X=>t({...T,fontSize:X}),min:1})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-fill`,title:"Колір тексту.",children:"Колір:"}),s.jsx(qt,{id:`${T.id}-fill`,value:T.fill,onChange:X=>t({...T,fill:X}),onPreview:X=>h(T.id,{fill:X}),onCancel:g})]}),s.jsx(pn,{shape:T,updateShape:t}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-style`,title:"Стилі тексту.",children:"Стиль:"}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[s.jsx(xn,{id:`${T.id}-bold`,checked:T.weight==="bold",onChange:X=>t({...T,weight:X?"bold":"normal"}),label:"Жирний"}),s.jsx(xn,{id:`${T.id}-italic`,checked:T.slant==="italic",onChange:X=>t({...T,slant:X?"italic":"roman"}),label:"Курсив"}),s.jsx(xn,{id:`${T.id}-underline`,checked:T.underline,onChange:X=>t({...T,underline:X}),label:"Підкреслений"}),s.jsx(xn,{id:`${T.id}-overstrike`,checked:T.overstrike,onChange:X=>t({...T,overstrike:X}),label:"Закреслений"})]})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-anchor`,title:"Точка на тексті, яка буде розташована за вказаними координатами.",children:"Прив'язка:"}),s.jsx(vn,{id:`${T.id}-anchor`,value:T.anchor,onChange:X=>{t({...T,anchor:X})},children:Object.entries(z).map(([X,ge])=>s.jsx("option",{value:X,children:ge},X))})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-anchor-x`,title:"X-координата точки прив'язки.",children:"X прив'язки:"}),s.jsx(Ee,{id:`${T.id}-anchor-x`,value:U(T.x),onChange:X=>t({...T,x:X})})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-anchor-y`,title:"Y-координата точки прив'язки.",children:"Y прив'язки:"}),s.jsx(Ee,{id:`${T.id}-anchor-y`,value:U(T.y),onChange:X=>t({...T,y:X})})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-justify`,title:"Вирівнювання тексту всередині його рамки.",children:"Вирівнювання:"}),s.jsxs(vn,{id:`${T.id}-justify`,value:T.justify,onChange:X=>t({...T,justify:X}),children:[s.jsx("option",{value:"left",children:"Ліворуч"}),s.jsx("option",{value:"center",children:"Центр"}),s.jsx("option",{value:"right",children:"Праворуч"})]})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-width`,title:"Ширина текстового блока. 0 - без переносу.",children:"Ширина блока:"}),s.jsx(Ee,{id:`${T.id}-width`,value:U(T.width),onChange:X=>t({...T,width:X}),min:0})]})]})}case"image":return s.jsx(s.Fragment,{children:F});case"bitmap":{const T=e,z=["error","gray75","gray50","gray25","gray12","hourglass","info","questhead","question","warning"];return s.jsxs(s.Fragment,{children:[F,s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-type`,title:"Стандартний тип бітової карти в Tkinter.",children:"Тип:"}),s.jsx(vn,{id:`${T.id}-type`,value:T.bitmapType,onChange:X=>t({...T,bitmapType:X}),children:z.map(X=>s.jsx("option",{value:X,children:X},X))})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-fg`,title:"Колір переднього плану бітової карти.",children:"Основний колір:"}),s.jsx(qt,{id:`${T.id}-fg`,value:T.foreground,onChange:X=>t({...T,foreground:X}),onPreview:X=>h(T.id,{foreground:X}),onCancel:g})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${T.id}-bg`,title:"Колір фону бітової карти.",children:"Тловий колір:"}),s.jsx(qt,{id:`${T.id}-bg`,value:T.background,onChange:X=>t({...T,background:X}),onPreview:X=>h(T.id,{background:X}),onCancel:g})]})]})}default:return s.jsx(s.Fragment,{children:F})}};if(!e)return s.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)] p-4",children:[s.jsx("div",{className:"flex justify-between items-center pb-2 border-b border-[var(--border-primary)]",children:s.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"})}),s.jsx("div",{className:"flex-grow flex items-center justify-center text-center text-[var(--text-tertiary)]",children:s.jsx("p",{className:"text-sm",children:"Виберіть об'єкт, щоб побачити його властивості."})})]});const Te=o==="edit-points",Me=wf(e),H=Te&&Me&&Me.length>0,ve="isAspectRatioLocked"in e,ce=e.rotation===0&&(e.type==="rectangle"||e.type==="ellipse"||e.type==="arc"),Fe=e?e.type==="polyline"||e.type==="bezier"?e.isClosed:e.type==="line"||e.type==="pencil"?!1:e.type==="arc"?e.style!=="arc":!0:!1;return s.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[s.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"}),s.jsxs("div",{className:"flex items-center gap-1",children:[O&&s.jsx("button",{onClick:()=>d(e.id),title:"Перетворити на контур",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:s.jsx(Jb,{size:18})}),s.jsx("button",{onClick:()=>i(e.id),title:"Дублювати",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:s.jsx(yv,{size:18})}),s.jsx("button",{onClick:()=>n(e.id),title:"Видалити",className:"p-1.5 rounded hover:bg-[var(--destructive-bg)] text-[var(--destructive-text)] hover:text-[var(--accent-text)]",children:s.jsx(Za,{size:18})})]})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-3 space-y-2",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-name`,title:"Назва об'єкта.",children:"Назва:"}),s.jsx("input",{id:`${e.id}-name`,type:"text",value:x??e.name??Bt(e),onFocus:F=>y(F.target.value),onBlur:()=>{x!==null&&t({...e,name:x.trim()===""?Bt(e):x.trim()}),y(null)},onChange:F=>y(F.target.value),onKeyDown:F=>{F.key==="Enter"&&F.target.blur(),F.key==="Escape"&&(y(null),F.target.blur())},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-comment`,title:"Додати коментар до коду.",children:"Коментар:"}),s.jsx(yh,{id:`${e.id}-comment`,value:e.comment??"",onChange:F=>t({...e,comment:F}),rows:2,placeholder:"Цей коментар буде додано до коду",title:"Кожен рядок буде окремим коментарем у згенерованому коді."})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Геометрія"}),s.jsxs("div",{className:"space-y-2",children:[D&&Z&&s.jsxs(s.Fragment,{children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-pos-x`,title:"X-координата верхнього лівого кута рамки виділення.",children:"X:"}),s.jsx(Ee,{id:`${e.id}-pos-x`,value:U(D.x),onChange:F=>be("x",F)})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-pos-y`,title:"Y-координата верхнього лівого кута рамки виділення.",children:"Y:"}),s.jsx(Ee,{id:`${e.id}-pos-y`,value:U(D.y),onChange:F=>be("y",F)})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-width`,title:"Геометрична ширина об'єкта (без обертання).",children:"Ширина:"}),s.jsx("input",{id:`${e.id}-width`,type:"number",step:"1",value:C,onChange:F=>Se("width",F.target.value),onBlur:()=>ee("width"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-height`,title:"Геометрична висота об'єкта (без обертання).",children:"Висота:"}),s.jsx("input",{id:`${e.id}-height`,type:"number",step:"1",value:A,onChange:F=>Se("height",F.target.value),onBlur:()=>ee("height"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-visual-width`,title:"Візуальна ширина об'єкта з урахуванням обертання.",children:"Ширина (віз.):"}),s.jsx(Ee,{id:`${e.id}-visual-width`,value:U(D.width),onChange:()=>{},disabled:!0})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-visual-height`,title:"Візуальна висота об'єкта з урахуванням обертання.",children:"Висота (віз.):"}),s.jsx(Ee,{id:`${e.id}-visual-height`,value:U(D.height),onChange:()=>{},disabled:!0})]})]}),"rotation"in e&&s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-rotation`,title:"Кут обертання об'єкта в градусах.",children:"Обертання:"}),s.jsx(Ee,{id:`${e.id}-rotation`,value:U(e.rotation),onChange:F=>t({...e,rotation:F})})]}),ve&&s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:`${e.id}-aspect-lock`,children:"Пропорції:"}),s.jsx("button",{id:`${e.id}-aspect-lock`,onClick:()=>t({...e,isAspectRatioLocked:!e.isAspectRatioLocked}),className:`p-1.5 rounded-md ${e.isAspectRatioLocked?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,title:e.isAspectRatioLocked?"Розблокувати пропорції":"Заблокувати пропорції",children:e.isAspectRatioLocked?s.jsx(Ob,{size:16}):s.jsx(Yb,{size:16})})]})]}),ce&&s.jsxs(s.Fragment,{children:[s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Рамка Tkinter (Bbox)"}),s.jsx(ES,{shape:e,updateShape:t,roundFn:U})]}),oe(),H&&s.jsx(wS,{points:Me,onPointsChange:de,shapeId:e.id,selectedShape:e,isEditing:Te,activePointIndex:l,setActivePointIndex:c,deletePoint:F=>u(e.id,F),addPoint:F=>f(e.id,F),isShapeClosed:Fe,roundFn:U})]})]})},js={select:s.jsx(Jx,{}),"edit-points":s.jsx(Xx,{}),rectangle:s.jsx(Kx,{}),square:s.jsx(Wx,{}),circle:s.jsx(Zx,{}),ellipse:s.jsx(Qx,{}),line:s.jsx(ev,{}),bezier:s.jsx(nv,{}),pencil:s.jsx(ov,{}),triangle:s.jsx(lv,{}),"right-triangle":s.jsx(rv,{}),polygon:s.jsx(iv,{}),star:s.jsx(mv,{}),polyline:s.jsx(tv,{}),rhombus:s.jsx(sv,{}),trapezoid:s.jsx(av,{}),parallelogram:s.jsx(cv,{}),arc:s.jsx(fv,{}),pieslice:s.jsx(uv,{}),chord:s.jsx(dv,{}),text:s.jsx(hv,{}),image:s.jsx(gv,{}),bitmap:s.jsx(pv,{})},AS=e=>e.type==="arc"?js[e.style]:e.type==="rectangle"&&e.isAspectRatioLocked?js.square:(e.type==="polyline"||e.type==="bezier")&&e.isClosed?js.polygon:js[e.type],kS=({shapes:e,selectedShapeId:t,onSelectShape:n,onDeleteShape:i,onMoveShape:o,onUpdateShape:l,onReorderShape:c,showTkinterNames:u})=>{const[f,d]=M.useState(null),[m,h]=M.useState(""),[g,p]=M.useState(null),[b,S]=M.useState(null),[E,x]=M.useState(null),y=D=>{d(D.id),h(D.name||Bt(D))},C=()=>{if(f){const D=e.find(Z=>Z.id===f);D&&m.trim()!==""&&l({...D,name:m.trim()})}d(null)},v=D=>{D.key==="Enter"?C():D.key==="Escape"&&d(null)},A=(D,Z)=>{D.stopPropagation();const be=Z.state==="hidden"?"normal":"hidden";l({...Z,state:be})},_=(D,Z)=>{p(Z),D.dataTransfer.effectAllowed="move",D.dataTransfer.setData("text/plain",Z)},N=(D,Z)=>{if(D.preventDefault(),Z===g)return;S(Z);const be=D.currentTarget.getBoundingClientRect(),Ce=be.top+be.height/2;x(D.clientY<Ce?"top":"bottom")},V=()=>{S(null),x(null)},q=(D,Z)=>{D.preventDefault(),g&&g!==Z&&E&&c(g,Z,E),p(null),S(null),x(null)},U=()=>{p(null),S(null),x(null)};return s.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[s.jsx("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:s.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Об'єкти"})}),s.jsx("div",{className:"flex-grow overflow-y-auto",children:e.length>0?s.jsx("ul",{className:"p-1 space-y-1",children:[...e].reverse().map((D,Z)=>{if(!D)return null;const be=D.id===t,Ce=f===D.id,Se=e.length-1-Z,ee=Se<e.length-1,de=Se>0,xe=Bt(D),Q=b===D.id&&E==="top",O=b===D.id&&E==="bottom";return s.jsxs("li",{onClick:()=>n(D.id),onDoubleClick:()=>y(D),draggable:!Ce,onDragStart:Ce?void 0:oe=>_(oe,D.id),onDragOver:Ce?void 0:oe=>N(oe,D.id),onDragLeave:Ce?void 0:V,onDrop:Ce?void 0:oe=>q(oe,D.id),onDragEnd:Ce?void 0:U,className:`group flex items-center justify-between p-2 rounded-md transition-all duration-150 cursor-pointer 
                                    ${be?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"hover:bg-[var(--bg-hover)] text-[var(--text-secondary)]"}
                                    ${g===D.id?"opacity-30":""}
                                    ${Q?"border-t-2 border-[var(--selection-stroke)]":"border-t-2 border-transparent -mb-0.5"}
                                    ${O?"border-b-2 border-[var(--selection-stroke)]":"border-b-2 border-transparent -mt-0.5"}
                                `,children:[s.jsxs("div",{className:"flex items-center gap-3 truncate",children:[s.jsx("button",{onClick:oe=>A(oe,D),title:D.state==="hidden"?"Показати":"Приховати",className:"flex-shrink-0 p-1 rounded hover:bg-[var(--bg-hover)]",children:D.state==="hidden"?s.jsx(Zb,{}):s.jsx(Kb,{})}),s.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",style:{opacity:D.state==="hidden"?.5:1},children:AS(D)}),s.jsx("div",{className:"truncate text-sm",style:{opacity:D.state==="hidden"?.5:1},children:Ce?s.jsx("input",{type:"text",value:m,onChange:oe=>h(oe.target.value),onBlur:C,onKeyDown:v,onClick:oe=>oe.stopPropagation(),autoFocus:!0,className:"bg-[var(--bg-app)]/80 text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):s.jsxs("span",{className:"truncate",title:D.name||xe,children:[D.name||xe,u&&s.jsxs("span",{className:"ml-1 text-xs text-[var(--text-tertiary)]",children:["[",Ox(D),"]"]})]})})]}),s.jsxs("div",{className:`flex items-center gap-0.5 transition-opacity ${be&&!Ce?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[s.jsx("button",{onClick:oe=>{oe.stopPropagation(),o(D.id,"up")},disabled:!ee,title:"Перемістити вище",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:s.jsx(Xb,{})}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),o(D.id,"down")},disabled:!de,title:"Перемістити нижче",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:s.jsx(Wb,{})}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),i(D.id)},title:"Видалити",className:"p-1 rounded text-[var(--destructive-text)] hover:bg-[var(--destructive-bg)] hover:text-[var(--accent-text)]",children:s.jsx(Za,{size:16})})]})]},D.id)})}):s.jsx("div",{className:"text-center text-[var(--text-tertiary)] py-8 px-4",children:s.jsx("p",{className:"text-sm",children:"Немає об'єктів."})})})]})};function _S(e){const[t,n]=M.useState([e]),[i,o]=M.useState(0),l=M.useCallback(h=>{const g=typeof h=="function"?h(t[i]):h,p=t.slice(0,i+1);p.push(g),n(p),o(p.length-1)},[i,t]),c=M.useCallback(()=>{i>0&&o(h=>h-1)},[i]),u=M.useCallback(()=>{i<t.length-1&&o(h=>h+1)},[i,t.length]),f=M.useCallback(h=>{n([h]),o(0)},[]),d=i>0,m=i<t.length-1;return{state:t[i],setState:l,undo:c,redo:u,canUndo:d,canRedo:m,reset:f}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NS,RS;function DS(){return{geminiUrl:NS,vertexUrl:RS}}function jS(e,t,n,i){var o,l;if(!(e!=null&&e.baseUrl)){const c=DS();return t?(o=c.vertexUrl)!==null&&o!==void 0?o:n:(l=c.geminiUrl)!==null&&l!==void 0?l:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _o{}function ue(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const l=t[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(e,t,n){for(let l=0;l<t.length-1;l++){const c=t[l];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];a(m,t.slice(l+1),n[d])}else for(const d of f)a(d,t.slice(l+1),n)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];a(f[0],t.slice(l+1),n);return}(!e[c]||typeof e[c]!="object")&&(e[c]={}),e=e[c]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function r(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const l=e[o];return Array.isArray(l)?l.map(c=>r(c,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function US(e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["operationName"],n);const i=r(e,["resourceName"]);i!=null&&a(t,["_url","resourceName"],i);const o=r(e,["config"]);return o!=null&&a(t,["config"],o),t}function LS(e){const t={},n=r(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function PS(e){const t={},n=r(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=r(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Mf(i));const o=r(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function VS(e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],PS(n)),t}function $S(e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>VS(c))),a(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=r(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function HS(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const c=r(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],$S(c)),t}function BS(e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Mf(i));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function FS(e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],BS(n)),t}function zS(e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>FS(c))),a(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=r(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function GS(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const c=r(e,["response"]);return c!=null&&a(t,["response"],zS(c)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vh;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vh||(vh={}));var Ch;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Ch||(Ch={}));var $i;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})($i||($i={}));var Th;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Th||(Th={}));var bh;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(bh||(bh={}));var Sh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Sh||(Sh={}));var wh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(wh||(wh={}));var Eh;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Eh||(Eh={}));var Mh;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Mh||(Mh={}));var Ah;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ah||(Ah={}));var kh;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(kh||(kh={}));var _h;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(_h||(_h={}));var Nh;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Nh||(Nh={}));var Rh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(Rh||(Rh={}));var Dh;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Dh||(Dh={}));var ka;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(ka||(ka={}));var jh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jh||(jh={}));var ad;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ad||(ad={}));var Ih;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ih||(Ih={}));var Uh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Uh||(Uh={}));var Lh;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Lh||(Lh={}));var Ph;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Ph||(Ph={}));var Vh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Vh||(Vh={}));var $h;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($h||($h={}));var Hh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Hh||(Hh={}));var Bh;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Bh||(Bh={}));var Fh;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Fh||(Fh={}));var zh;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(zh||(zh={}));var Gh;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Gh||(Gh={}));var qh;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qh||(qh={}));var Oh;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Oh||(Oh={}));var Yh;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Yh||(Yh={}));var Jh;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Jh||(Jh={}));var Xh;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Xh||(Xh={}));var Wh;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Wh||(Wh={}));var Kh;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Kh||(Kh={}));var Zh;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Zh||(Zh={}));var Qh;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Qh||(Qh={}));var eg;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(eg||(eg={}));var tg;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(tg||(tg={}));var ng;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ng||(ng={}));var ig;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ig||(ig={}));var og;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(og||(og={}));var lg;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lg||(lg={}));var rg;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(rg||(rg={}));var sg;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sg||(sg={}));var ag;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ag||(ag={}));var nl;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(nl||(nl={}));class cd{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class or{get text(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const h=[];for(const g of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[p,b]of Object.entries(g))p!=="text"&&p!=="thought"&&(b!==null||b!==void 0)&&h.push(p);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,d+=g.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const h of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,p]of Object.entries(h))g!=="inlineData"&&(p!==null||p!==void 0)&&m.push(g);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class cg{}class ug{}class qS{}class OS{}class YS{}class JS{}class dg{}class fg{}class mg{}class XS{}class _a{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new _a;let o;const l=t;return n?o=GS(l):o=HS(l),Object.assign(i,o),i}}class hg{}class gg{}class pg{}class WS{}class KS{}class ZS{}class yg{}class QS{get text(){var t,n,i;let o="",l=!1;const c=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&c.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,o+=u.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var t,n,i;let o="";const l=[];for(const c of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(c))u!=="inlineData"&&f!==null&&l.push(u);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class e1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Be(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Cv(e,t){const n=Be(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Tv(e){return Array.isArray(e)?e.map(t=>Na(t)):[Na(e)]}function Na(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function bv(e){const t=Na(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Sv(e){const t=Na(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xg(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function wv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>xg(t)):[xg(e)]}function ud(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function vg(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Cg(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Gt(e){if(e==null)throw new Error("ContentUnion is required");return ud(e)?e:{role:"user",parts:wv(e)}}function Af(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Gt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Gt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Gt(n)):[Gt(t)]}function An(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(vg(e)||Cg(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(e)]}const t=[],n=[],i=ud(e[0]);for(const o of e){const l=ud(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(o);else{if(vg(o)||Cg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:wv(n)}),t}function t1(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values($i).includes(n[0].toUpperCase())?n[0].toUpperCase():$i.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values($i).includes(i.toUpperCase())?i.toUpperCase():$i.TYPE_UNSPECIFIED})}}function ml(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=e.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(t.nullable=!0,e=l[1]):l[1].type==="null"&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&t1(e.type,t);for(const[c,u]of Object.entries(e))if(u!=null)if(c=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values($i).includes(u.toUpperCase())?u.toUpperCase():$i.TYPE_UNSPECIFIED}else if(n.includes(c))t[c]=ml(u);else if(i.includes(c)){const f=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}f.push(ml(d))}t[c]=f}else if(o.includes(c)){const f={};for(const[d,m]of Object.entries(u))f[d]=ml(m);t[c]=f}else{if(c==="additionalProperties")continue;t[c]=u}return t}function kf(e){return ml(e)}function _f(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Nf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ul(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ml(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ml(t.response));return e}function Ll(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function n1(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function vi(e,t){if(typeof t!="string")throw new Error("name must be a string");return n1(e,t,"cachedContents")}function Ev(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function No(e){return Mf(e)}function i1(e){return e!=null&&typeof e=="object"&&"name"in e}function o1(e){return e!=null&&typeof e=="object"&&"video"in e}function l1(e){return e!=null&&typeof e=="object"&&"uri"in e}function Mv(e){var t;let n;if(i1(e)&&(n=e.name),!(l1(e)&&(n=e.uri,n===void 0))&&!(o1(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Av(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function kv(e){for(const t of["models","tunedModels","publisherModels"])if(r1(e,t))return e[t];return[]}function r1(e,t){return e!==null&&typeof e=="object"&&t in e}function s1(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function a1(e,t={}){const n=[],i=new Set;for(const o of e){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const c=s1(o,t);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function _v(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function c1(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Nv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Pl(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Rv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function d1(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function f1(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function m1(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function h1(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],u1(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],d1(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],f1(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],m1(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Dv(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>h1(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function g1(e){const t={},n=r(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=r(e,["default"]);i!=null&&a(t,["default"],i);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const l=r(e,["enum"]);l!=null&&a(t,["enum"],l);const c=r(e,["example"]);c!=null&&a(t,["example"],c);const u=r(e,["format"]);u!=null&&a(t,["format"],u);const f=r(e,["items"]);f!=null&&a(t,["items"],f);const d=r(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=r(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=r(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=r(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=r(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=r(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=r(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const E=r(e,["minimum"]);E!=null&&a(t,["minimum"],E);const x=r(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=r(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=r(e,["properties"]);C!=null&&a(t,["properties"],C);const v=r(e,["propertyOrdering"]);v!=null&&a(t,["propertyOrdering"],v);const A=r(e,["required"]);A!=null&&a(t,["required"],A);const _=r(e,["title"]);_!=null&&a(t,["title"],_);const N=r(e,["type"]);return N!=null&&a(t,["type"],N),t}function p1(e){const t={};if(r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(e,["category"]);n!=null&&a(t,["category"],n);const i=r(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function y1(e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=r(e,["description"]);i!=null&&a(t,["description"],i);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=r(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=r(e,["response"]);u!=null&&a(t,["response"],u);const f=r(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function x1(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function v1(e){const t={},n=r(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],x1(n)),r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function C1(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function T1(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],C1(n)),t}function b1(){return{}}function S1(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function w1(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>y1(d))),a(t,["functionDeclarations"],f)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],v1(i));const o=r(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],T1(o)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],b1());const c=r(e,["computerUse"]);c!=null&&a(t,["computerUse"],S1(c));const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function E1(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function M1(e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function A1(e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],M1(n));const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function k1(e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],E1(n));const i=r(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],A1(i)),t}function _1(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function jv(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],_1(n)),t}function N1(e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],jv(i)),t}function R1(e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>N1(o))),a(t,["speakerVoiceConfigs"],i)}return t}function D1(e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],jv(n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],R1(i));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function j1(e){const t={},n=r(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=r(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function I1(e,t,n){const i={},o=r(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Dv(Gt(o)));const l=r(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=r(t,["topP"]);c!=null&&a(i,["topP"],c);const u=r(t,["topK"]);u!=null&&a(i,["topK"],u);const f=r(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=r(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=r(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=r(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=r(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=r(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=r(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=r(t,["seed"]);S!=null&&a(i,["seed"],S);const E=r(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const x=r(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],g1(kf(x)));const y=r(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=r(t,["safetySettings"]);if(n!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(Z=>p1(Z))),a(n,["safetySettings"],D)}const v=r(t,["tools"]);if(n!==void 0&&v!=null){let D=Ll(v);Array.isArray(D)&&(D=D.map(Z=>w1(Ul(Z)))),a(n,["tools"],D)}const A=r(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],k1(A)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=r(t,["cachedContent"]);n!==void 0&&_!=null&&a(n,["cachedContent"],vi(e,_));const N=r(t,["responseModalities"]);N!=null&&a(i,["responseModalities"],N);const V=r(t,["mediaResolution"]);V!=null&&a(i,["mediaResolution"],V);const q=r(t,["speechConfig"]);if(q!=null&&a(i,["speechConfig"],D1(_f(q))),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=r(t,["thinkingConfig"]);return U!=null&&a(i,["thinkingConfig"],j1(U)),i}function U1(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["request","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>Dv(u))),a(n,["request","contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["request","generationConfig"],I1(e,l,n)),n}function L1(e,t){const n={};if(r(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=r(t,["fileName"]);i!=null&&a(n,["fileName"],i);const o=r(t,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>U1(e,c))),a(n,["requests","requests"],l)}return n}function P1(e,t){const n={},i=r(e,["displayName"]);if(t!==void 0&&i!=null&&a(t,["batch","displayName"],i),r(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function iu(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["src"]);o!=null&&a(n,["batch","inputConfig"],L1(e,_v(e,o)));const l=r(t,["config"]);return l!=null&&a(n,["config"],P1(l,n)),n}function V1(e,t){const n={},i=r(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=r(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=r(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function $1(e,t){const n={},i=r(t,["contents"]);i!=null&&a(n,["requests[]","request","content"],Af(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],V1(o,n)),n}function H1(e,t){const n={},i=r(t,["fileName"]);i!=null&&a(n,["file_name"],i);const o=r(t,["inlinedRequests"]);return o!=null&&a(n,["requests"],$1(e,o)),n}function B1(e,t){const n={},i=r(e,["displayName"]);return t!==void 0&&i!=null&&a(t,["batch","displayName"],i),n}function ou(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["src"]);o!=null&&a(n,["batch","inputConfig"],H1(e,o));const l=r(t,["config"]);return l!=null&&a(n,["config"],B1(l,n)),n}function F1(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function z1(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function G1(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);if(t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),r(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function q1(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],G1(n,t)),t}function O1(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Y1(e){const t={},n=r(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const i=r(e,["gcsUri"]);i!=null&&a(t,["gcsSource","uris"],i);const o=r(e,["bigqueryUri"]);if(o!=null&&a(t,["bigquerySource","inputUri"],o),r(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function J1(e){const t={},n=r(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const i=r(e,["gcsUri"]);i!=null&&a(t,["gcsDestination","outputUriPrefix"],i);const o=r(e,["bigqueryUri"]);if(o!=null&&a(t,["bigqueryDestination","outputUri"],o),r(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function X1(e,t){const n={},i=r(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=r(e,["dest"]);return t!==void 0&&o!=null&&a(t,["outputConfig"],J1(c1(o))),n}function W1(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["model"],Be(e,i));const o=r(t,["src"]);o!=null&&a(n,["inputConfig"],Y1(_v(e,o)));const l=r(t,["config"]);return l!=null&&a(n,["config"],X1(l,n)),n}function K1(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Z1(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Q1(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=r(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function e2(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Q1(n,t)),t}function t2(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],Pl(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function n2(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function i2(e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function o2(e){const t={},n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function l2(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function r2(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n2(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],i2(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],o2(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],l2(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function s2(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>r2(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function a2(e){const t={},n=r(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function c2(e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function u2(e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>c2(o))),a(t,["urlMetadata"],i)}return t}function d2(e){const t={},n=r(e,["content"]);n!=null&&a(t,["content"],s2(n));const i=r(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],a2(i));const o=r(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=r(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=r(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],u2(c));const u=r(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=r(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=r(e,["index"]);d!=null&&a(t,["index"],d);const m=r(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=r(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function f2(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>d2(d))),a(t,["candidates"],f)}const o=r(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=r(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=r(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=r(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function Rf(e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const i=r(e,["code"]);i!=null&&a(t,["code"],i);const o=r(e,["message"]);return o!=null&&a(t,["message"],o),t}function m2(e){const t={},n=r(e,["response"]);n!=null&&a(t,["response"],f2(n));const i=r(e,["error"]);return i!=null&&a(t,["error"],Rf(i)),t}function h2(e){const t={},n=r(e,["values"]);return n!=null&&a(t,["values"],n),t}function g2(e){const t={},n=r(e,["embedding"]);n!=null&&a(t,["embedding"],h2(n));const i=r(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function p2(e){const t={},n=r(e,["response"]);n!=null&&a(t,["response"],g2(n));const i=r(e,["error"]);return i!=null&&a(t,["error"],Rf(i)),t}function y2(e){const t={},n=r(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const i=r(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>m2(c))),a(t,["inlinedResponses"],l)}const o=r(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>p2(c))),a(t,["inlinedEmbedContentResponses"],l)}return t}function zo(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["metadata","displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["metadata","state"]);o!=null&&a(t,["state"],Rv(o));const l=r(e,["metadata","createTime"]);l!=null&&a(t,["createTime"],l);const c=r(e,["metadata","endTime"]);c!=null&&a(t,["endTime"],c);const u=r(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const f=r(e,["metadata","model"]);f!=null&&a(t,["model"],f);const d=r(e,["metadata","output"]);return d!=null&&a(t,["dest"],y2(Nv(d))),t}function x2(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>zo(c))),a(t,["batchJobs"],l)}return t}function v2(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);return l!=null&&a(t,["error"],Rf(l)),t}function Iv(e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const i=r(e,["code"]);i!=null&&a(t,["code"],i);const o=r(e,["message"]);return o!=null&&a(t,["message"],o),t}function C2(e){const t={},n=r(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const i=r(e,["gcsSource","uris"]);i!=null&&a(t,["gcsUri"],i);const o=r(e,["bigquerySource","inputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function T2(e){const t={},n=r(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const i=r(e,["gcsDestination","outputUriPrefix"]);i!=null&&a(t,["gcsUri"],i);const o=r(e,["bigqueryDestination","outputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function dd(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["state"]);o!=null&&a(t,["state"],Rv(o));const l=r(e,["error"]);l!=null&&a(t,["error"],Iv(l));const c=r(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=r(e,["startTime"]);u!=null&&a(t,["startTime"],u);const f=r(e,["endTime"]);f!=null&&a(t,["endTime"],f);const d=r(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const m=r(e,["model"]);m!=null&&a(t,["model"],m);const h=r(e,["inputConfig"]);h!=null&&a(t,["src"],C2(h));const g=r(e,["outputConfig"]);return g!=null&&a(t,["dest"],T2(Nv(g))),t}function b2(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>dd(c))),a(t,["batchJobs"],l)}return t}function S2(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);return l!=null&&a(t,["error"],Iv(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wo;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(wo||(wo={}));class ss{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,l;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w2 extends _o{constructor(t){super(),this.apiClient=t,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const l=n.src;if(!(Array.isArray(n.src)||l.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),f=u.path,d=u.body,m=iu(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()).then(g=>zo(g))},this.createEmbeddings=async n=>{var i,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),f=u.path,d=u.body,m=ou(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()).then(g=>zo(g))},this.list=async(n={})=>new ss(wo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=iu(this.apiClient,t),i=n._url,o=ue("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const m of f){const h=Object.assign({},m);if(h.systemInstruction){const g=h.systemInstruction;delete h.systemInstruction;const p=h.request;p.systemInstruction=g,h.request=p}d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}createInlinedEmbedContentRequest(t){const n=ou(this.apiClient,t),i=n._url,o=ue("{model}:asyncBatchEmbedContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];delete u.config;for(const m of f){const h=Object.assign({},m),g=h.request;for(const p in h)p!=="request"&&(g[p]=h[p],delete h[p]);d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(t),c=this.getBigqueryUri(t);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=W1(this.apiClient,t);return u=ue("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>dd(m))}else{const d=iu(this.apiClient,t);return u=ue("{model}:batchGenerateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>zo(m))}}async createEmbeddingsInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ou(this.apiClient,t);return l=ue("{model}:asyncBatchEmbedContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>zo(f))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=K1(this.apiClient,t);return u=ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>dd(m))}else{const d=F1(this.apiClient,t);return u=ue("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>zo(m))}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=Z1(this.apiClient,t);c=ue("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=z1(this.apiClient,t);c=ue("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=e2(t);return u=ue("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=b2(m),g=new yg;return Object.assign(g,h),g})}else{const d=q1(t);return u=ue("batches",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=x2(m),g=new yg;return Object.assign(g,h),g})}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=t2(this.apiClient,t);return u=ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>S2(m))}else{const d=O1(this.apiClient,t);return u=ue("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>v2(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E2(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function M2(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function A2(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function k2(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function _2(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],E2(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],M2(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],A2(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],k2(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Tg(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>_2(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function N2(e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=r(e,["description"]);i!=null&&a(t,["description"],i);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=r(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=r(e,["response"]);u!=null&&a(t,["response"],u);const f=r(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function R2(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function D2(e){const t={},n=r(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],R2(n)),r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function j2(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function I2(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],j2(n)),t}function U2(){return{}}function L2(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function P2(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>N2(d))),a(t,["functionDeclarations"],f)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],D2(i));const o=r(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],I2(o)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],U2());const c=r(e,["computerUse"]);c!=null&&a(t,["computerUse"],L2(c));const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function V2(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function $2(e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function H2(e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],$2(n));const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function B2(e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],V2(n));const i=r(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],H2(i)),t}function F2(e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=r(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=r(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=r(e,["contents"]);if(t!==void 0&&c!=null){let m=An(c);Array.isArray(m)&&(m=m.map(h=>Tg(h))),a(t,["contents"],m)}const u=r(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],Tg(Gt(u)));const f=r(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>P2(h))),a(t,["tools"],m)}const d=r(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],B2(d)),r(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function z2(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["model"],Cv(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],F2(o,n)),n}function G2(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function q2(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function O2(e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=r(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function Y2(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],O2(o,n)),n}function J2(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function X2(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],J2(n,t)),t}function W2(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function K2(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["data"]);i!=null&&a(t,["data"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Z2(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Q2(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function ew(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],W2(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],K2(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Z2(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],Q2(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function bg(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ew(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function tw(e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=r(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=r(e,["response"]);c!=null&&a(t,["response"],c);const u=r(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function nw(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function iw(e){const t={},n=r(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],nw(n));const i=r(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function ow(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function lw(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],ow(n)),t}function rw(e){const t={},n=r(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function sw(e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function aw(e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],sw(n));const i=r(e,["authType"]);i!=null&&a(t,["authType"],i);const o=r(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=r(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=r(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function cw(e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],aw(n)),t}function uw(){return{}}function dw(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function fw(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>tw(g))),a(t,["functionDeclarations"],h)}const i=r(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],iw(o));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],lw(l));const c=r(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],rw(c));const u=r(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],cw(u)),r(e,["urlContext"])!=null&&a(t,["urlContext"],uw());const d=r(e,["computerUse"]);d!=null&&a(t,["computerUse"],dw(d));const m=r(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function mw(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function hw(e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function gw(e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],hw(n));const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function pw(e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],mw(n));const i=r(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],gw(i)),t}function yw(e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=r(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=r(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=r(e,["contents"]);if(t!==void 0&&c!=null){let h=An(c);Array.isArray(h)&&(h=h.map(g=>bg(g))),a(t,["contents"],h)}const u=r(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],bg(Gt(u)));const f=r(e,["tools"]);if(t!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>fw(g))),a(t,["tools"],h)}const d=r(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],pw(d));const m=r(e,["kmsKeyName"]);return t!==void 0&&m!=null&&a(t,["encryption_spec","kmsKeyName"],m),n}function xw(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["model"],Cv(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],yw(o,n)),n}function vw(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Cw(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Tw(e,t){const n={},i=r(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=r(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function bw(e,t){const n={},i=r(t,["name"]);i!=null&&a(n,["_url","name"],vi(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],Tw(o,n)),n}function Sw(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function ww(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Sw(n,t)),t}function Ws(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["model"]);o!=null&&a(t,["model"],o);const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=r(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=r(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=r(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function Ew(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Mw(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ws(c))),a(t,["cachedContents"],l)}return t}function Ks(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["model"]);o!=null&&a(t,["model"],o);const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=r(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=r(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=r(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function Aw(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function kw(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ks(c))),a(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _w extends _o{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ss(wo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=xw(this.apiClient,t);return u=ue("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Ks(m))}else{const d=z2(this.apiClient,t);return u=ue("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Ws(m))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=vw(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Ks(m))}else{const d=G2(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Ws(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Aw(m),g=new gg;return Object.assign(g,h),g})}else{const d=q2(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Ew(m),g=new gg;return Object.assign(g,h),g})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=bw(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Ks(m))}else{const d=Y2(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Ws(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=ww(t);return u=ue("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=kw(m),g=new pg;return Object.assign(g,h),g})}else{const d=X2(t);return u=ue("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Mw(m),g=new pg;return Object.assign(g,h),g})}}}function Sg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(e){return this instanceof it?(this.v=e,this):new it(e)}function hl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(p){return function(b){return Promise.resolve(b).then(p,h)}}function u(p,b){i[p]&&(o[p]=function(S){return new Promise(function(E,x){l.push([p,S,E,x])>1||f(p,S)})},b&&(o[p]=b(o[p])))}function f(p,b){try{d(i[p](b))}catch(S){g(l[0][3],S)}}function d(p){p.value instanceof it?Promise.resolve(p.value.v).then(m,h):g(l[0][2],p)}function m(p){f("next",p)}function h(p){f("throw",p)}function g(p,b){p(b),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Ar(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Sg=="function"?Sg(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(c){return new Promise(function(u,f){c=e[l](c),o(u,f,c.done,c.value)})}}function o(l,c,u,f){Promise.resolve(f).then(function(d){l({value:d,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nw(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Uv(n)}function Uv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Rw(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function wg(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let l=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),l&&!Uv(e[i])&&(l=!1),i++;l?t.push(...o):t.pop()}return t}class Dw{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new jw(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class jw{constructor(t,n,i,o={},l=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Rw(l)}async sendMessage(t){var n;await this.sendPromise;const i=Gt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,u;const f=await o,d=(c=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,m=f.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let g=[];m!=null&&(g=(u=m.slice(h))!==null&&u!==void 0?u:[]);const p=d?[d]:[];this.recordHistory(i,p,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Gt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(t=!1){const n=t?wg(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,o;return hl(this,arguments,function*(){var c,u,f,d;const m=[];try{for(var h=!0,g=Ar(t),p;p=yield it(g.next()),c=p.done,!c;h=!0){d=p.value,h=!1;const b=d;if(Nw(b)){const S=(o=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;S!==void 0&&m.push(S)}yield yield it(b)}}catch(b){u={error:b}}finally{try{!h&&!c&&(f=g.return)&&(yield it(f.call(g)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...wg(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qa extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Qa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function Uw(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],Iw(n,t)),t}function Lw(e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const i=r(e,["message"]);i!=null&&a(t,["message"],i);const o=r(e,["code"]);return o!=null&&a(t,["code"],o),t}function Pw(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=r(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=r(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=r(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=r(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=r(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=r(e,["uri"]);m!=null&&a(t,["uri"],m);const h=r(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=r(e,["state"]);g!=null&&a(t,["state"],g);const p=r(e,["source"]);p!=null&&a(t,["source"],p);const b=r(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const S=r(e,["error"]);return S!=null&&a(t,["error"],Lw(S)),t}function Vw(e){const t={},n=r(e,["file"]);n!=null&&a(t,["file"],Pw(n));const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function $w(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","file"],Mv(n));const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function Hw(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","file"],Mv(n));const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function Bw(e){const t={},n=r(e,["details"]);n!=null&&a(t,["details"],n);const i=r(e,["message"]);i!=null&&a(t,["message"],i);const o=r(e,["code"]);return o!=null&&a(t,["code"],o),t}function fd(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=r(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=r(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=r(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=r(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=r(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=r(e,["uri"]);m!=null&&a(t,["uri"],m);const h=r(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=r(e,["state"]);g!=null&&a(t,["state"],g);const p=r(e,["source"]);p!=null&&a(t,["source"],p);const b=r(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const S=r(e,["error"]);return S!=null&&a(t,["error"],Bw(S)),t}function Fw(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>fd(c))),a(t,["files"],l)}return t}function zw(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Gw(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qw extends _o{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ss(wo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>fd(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Uw(t);return l=ue("files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=Fw(f),m=new WS;return Object.assign(m,d),m})}}async createInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vw(t);return l=ue("upload/v1beta/files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=zw(f),m=new KS;return Object.assign(m,d),m})}}async get(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$w(t);return l=ue("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>fd(f))}}async delete(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Hw(t);return l=ue("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=Gw(f),m=new ZS;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ow(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Lv(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Ow(n)),t}function Yw(e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],Lv(i)),t}function Jw(e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Yw(o))),a(t,["speakerVoiceConfigs"],i)}return t}function Xw(e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Lv(n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],Jw(i));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Ww(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Kw(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Zw(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Qw(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function eE(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ww(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],Kw(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Zw(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],Qw(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function tE(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>eE(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function nE(e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=r(e,["description"]);i!=null&&a(t,["description"],i);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=r(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=r(e,["response"]);u!=null&&a(t,["response"],u);const f=r(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function iE(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function oE(e){const t={},n=r(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],iE(n)),r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function lE(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function rE(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],lE(n)),t}function sE(){return{}}function aE(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function cE(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>nE(d))),a(t,["functionDeclarations"],f)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],oE(i));const o=r(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],rE(o)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],sE());const c=r(e,["computerUse"]);c!=null&&a(t,["computerUse"],aE(c));const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function uE(e){const t={},n=r(e,["handle"]);if(n!=null&&a(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Eg(){return{}}function dE(e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=r(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=r(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function fE(e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],dE(n));const i=r(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=r(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function mE(e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function hE(e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],mE(i)),t}function gE(e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function pE(e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=r(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=r(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=r(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=r(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=r(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],Xw(Nf(h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=r(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],tE(Gt(p)));const b=r(e,["tools"]);if(t!==void 0&&b!=null){let A=Ll(b);Array.isArray(A)&&(A=A.map(_=>cE(Ul(_)))),a(t,["setup","tools"],A)}const S=r(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],uE(S));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],Eg());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Eg());const y=r(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],fE(y));const C=r(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],hE(C));const v=r(e,["proactivity"]);return t!==void 0&&v!=null&&a(t,["setup","proactivity"],gE(v)),n}function yE(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],pE(o,n)),n}function xE(){return{}}function vE(){return{}}function CE(e){const t={},n=r(e,["media"]);n!=null&&a(t,["mediaChunks"],Tv(n));const i=r(e,["audio"]);i!=null&&a(t,["audio"],Sv(i));const o=r(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=r(e,["video"]);l!=null&&a(t,["video"],bv(l));const c=r(e,["text"]);return c!=null&&a(t,["text"],c),r(e,["activityStart"])!=null&&a(t,["activityStart"],xE()),r(e,["activityEnd"])!=null&&a(t,["activityEnd"],vE()),t}function Pv(e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const i=r(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function TE(e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pv(o))),a(t,["weightedPrompts"],i)}return t}function Vv(e){const t={},n=r(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=r(e,["topK"]);i!=null&&a(t,["topK"],i);const o=r(e,["seed"]);o!=null&&a(t,["seed"],o);const l=r(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=r(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=r(e,["density"]);u!=null&&a(t,["density"],u);const f=r(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=r(e,["scale"]);d!=null&&a(t,["scale"],d);const m=r(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=r(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=r(e,["onlyBassAndDrums"]);g!=null&&a(t,["onlyBassAndDrums"],g);const p=r(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function bE(e){const t={},n=r(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],Vv(n)),t}function $v(e){const t={},n=r(e,["model"]);return n!=null&&a(t,["model"],n),t}function Hv(e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pv(o))),a(t,["weightedPrompts"],i)}return t}function md(e){const t={},n=r(e,["setup"]);n!=null&&a(t,["setup"],$v(n));const i=r(e,["clientContent"]);i!=null&&a(t,["clientContent"],Hv(i));const o=r(e,["musicGenerationConfig"]);o!=null&&a(t,["musicGenerationConfig"],Vv(o));const l=r(e,["playbackControl"]);return l!=null&&a(t,["playbackControl"],l),t}function SE(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function wE(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],SE(n)),t}function EE(e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],wE(n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function ME(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function AE(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["data"]);i!=null&&a(t,["data"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kE(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function _E(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function NE(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],ME(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],AE(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],kE(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],_E(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function RE(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>NE(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function DE(e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=r(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=r(e,["response"]);c!=null&&a(t,["response"],c);const u=r(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function jE(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function IE(e){const t={},n=r(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],jE(n));const i=r(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function UE(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function LE(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],UE(n)),t}function PE(e){const t={},n=r(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function VE(e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function $E(e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],VE(n));const i=r(e,["authType"]);i!=null&&a(t,["authType"],i);const o=r(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=r(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=r(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function HE(e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],$E(n)),t}function BE(){return{}}function FE(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function zE(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>DE(g))),a(t,["functionDeclarations"],h)}const i=r(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],IE(o));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],LE(l));const c=r(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],PE(c));const u=r(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],HE(u)),r(e,["urlContext"])!=null&&a(t,["urlContext"],BE());const d=r(e,["computerUse"]);d!=null&&a(t,["computerUse"],FE(d));const m=r(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function GE(e){const t={},n=r(e,["handle"]);n!=null&&a(t,["handle"],n);const i=r(e,["transparent"]);return i!=null&&a(t,["transparent"],i),t}function Mg(){return{}}function qE(e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=r(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=r(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function OE(e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],qE(n));const i=r(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=r(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function YE(e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function JE(e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],YE(i)),t}function XE(e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function WE(e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=r(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=r(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=r(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=r(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=r(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],EE(Nf(h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=r(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],RE(Gt(p)));const b=r(e,["tools"]);if(t!==void 0&&b!=null){let A=Ll(b);Array.isArray(A)&&(A=A.map(_=>zE(Ul(_)))),a(t,["setup","tools"],A)}const S=r(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],GE(S));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],Mg());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Mg());const y=r(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],OE(y));const C=r(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],JE(C));const v=r(e,["proactivity"]);return t!==void 0&&v!=null&&a(t,["setup","proactivity"],XE(v)),n}function KE(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],WE(o,n)),n}function ZE(){return{}}function QE(){return{}}function eM(e){const t={},n=r(e,["media"]);n!=null&&a(t,["mediaChunks"],Tv(n));const i=r(e,["audio"]);i!=null&&a(t,["audio"],Sv(i));const o=r(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=r(e,["video"]);l!=null&&a(t,["video"],bv(l));const c=r(e,["text"]);return c!=null&&a(t,["text"],c),r(e,["activityStart"])!=null&&a(t,["activityStart"],ZE()),r(e,["activityEnd"])!=null&&a(t,["activityEnd"],QE()),t}function tM(){return{}}function nM(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function iM(e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function oM(e){const t={},n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Bv(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function lM(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],nM(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],iM(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],oM(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],Bv(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function rM(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>lM(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function Ag(e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const i=r(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function sM(e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function aM(e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sM(o))),a(t,["urlMetadata"],i)}return t}function cM(e){const t={},n=r(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],rM(n));const i=r(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=r(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=r(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=r(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=r(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],Ag(u));const f=r(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],Ag(f));const d=r(e,["urlContextMetadata"]);d!=null&&a(t,["urlContextMetadata"],aM(d));const m=r(e,["turnCompleteReason"]);m!=null&&a(t,["turnCompleteReason"],m);const h=r(e,["waitingForInput"]);return h!=null&&a(t,["waitingForInput"],h),t}function uM(e){const t={},n=r(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Bv(o))),a(t,["functionCalls"],i)}return t}function dM(e){const t={},n=r(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function Is(e){const t={},n=r(e,["modality"]);n!=null&&a(t,["modality"],n);const i=r(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function fM(e){const t={},n=r(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=r(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=r(e,["responseTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=r(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=r(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=r(e,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(p=>Is(p))),a(t,["promptTokensDetails"],g)}const d=r(e,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(p=>Is(p))),a(t,["cacheTokensDetails"],g)}const m=r(e,["responseTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(p=>Is(p))),a(t,["responseTokensDetails"],g)}const h=r(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(p=>Is(p))),a(t,["toolUsePromptTokensDetails"],g)}return t}function mM(e){const t={},n=r(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function hM(e){const t={},n=r(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=r(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=r(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function gM(e){const t={};r(e,["setupComplete"])!=null&&a(t,["setupComplete"],tM());const i=r(e,["serverContent"]);i!=null&&a(t,["serverContent"],cM(i));const o=r(e,["toolCall"]);o!=null&&a(t,["toolCall"],uM(o));const l=r(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],dM(l));const c=r(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],fM(c));const u=r(e,["goAway"]);u!=null&&a(t,["goAway"],mM(u));const f=r(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],hM(f)),t}function pM(){return{}}function yM(e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const i=r(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function xM(e){const t={},n=r(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yM(o))),a(t,["weightedPrompts"],i)}return t}function vM(e){const t={},n=r(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=r(e,["topK"]);i!=null&&a(t,["topK"],i);const o=r(e,["seed"]);o!=null&&a(t,["seed"],o);const l=r(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=r(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=r(e,["density"]);u!=null&&a(t,["density"],u);const f=r(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=r(e,["scale"]);d!=null&&a(t,["scale"],d);const m=r(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=r(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=r(e,["onlyBassAndDrums"]);g!=null&&a(t,["onlyBassAndDrums"],g);const p=r(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function CM(e){const t={},n=r(e,["clientContent"]);n!=null&&a(t,["clientContent"],xM(n));const i=r(e,["musicGenerationConfig"]);return i!=null&&a(t,["musicGenerationConfig"],vM(i)),t}function TM(e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);i!=null&&a(t,["mimeType"],i);const o=r(e,["sourceMetadata"]);return o!=null&&a(t,["sourceMetadata"],CM(o)),t}function bM(e){const t={},n=r(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>TM(o))),a(t,["audioChunks"],i)}return t}function SM(e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const i=r(e,["filteredReason"]);return i!=null&&a(t,["filteredReason"],i),t}function wM(e){const t={};r(e,["setupComplete"])!=null&&a(t,["setupComplete"],pM());const i=r(e,["serverContent"]);i!=null&&a(t,["serverContent"],bM(i));const o=r(e,["filteredPrompt"]);return o!=null&&a(t,["filteredPrompt"],SM(o)),t}function EM(e){const t={},n=r(e,["sessionId"]);return n!=null&&a(t,["sessionId"],n),t}function MM(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function AM(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["data"]);i!=null&&a(t,["data"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kM(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Fv(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function _M(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],MM(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],AM(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],kM(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],Fv(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function NM(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>_M(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function kg(e){const t={},n=r(e,["text"]);n!=null&&a(t,["text"],n);const i=r(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function RM(e){const t={},n=r(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],NM(n));const i=r(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=r(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=r(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=r(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=r(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],kg(u));const f=r(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],kg(f));const d=r(e,["turnCompleteReason"]);d!=null&&a(t,["turnCompleteReason"],d);const m=r(e,["waitingForInput"]);return m!=null&&a(t,["waitingForInput"],m),t}function DM(e){const t={},n=r(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fv(o))),a(t,["functionCalls"],i)}return t}function jM(e){const t={},n=r(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function Us(e){const t={},n=r(e,["modality"]);n!=null&&a(t,["modality"],n);const i=r(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function IM(e){const t={},n=r(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=r(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=r(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=r(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=r(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=r(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=r(e,["promptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(b=>Us(b))),a(t,["promptTokensDetails"],p)}const d=r(e,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(b=>Us(b))),a(t,["cacheTokensDetails"],p)}const m=r(e,["candidatesTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(b=>Us(b))),a(t,["responseTokensDetails"],p)}const h=r(e,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(b=>Us(b))),a(t,["toolUsePromptTokensDetails"],p)}const g=r(e,["trafficType"]);return g!=null&&a(t,["trafficType"],g),t}function UM(e){const t={},n=r(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function LM(e){const t={},n=r(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=r(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=r(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function PM(e){const t={},n=r(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],EM(n));const i=r(e,["serverContent"]);i!=null&&a(t,["serverContent"],RM(i));const o=r(e,["toolCall"]);o!=null&&a(t,["toolCall"],DM(o));const l=r(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],jM(l));const c=r(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],IM(c));const u=r(e,["goAway"]);u!=null&&a(t,["goAway"],UM(u));const f=r(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],LM(f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VM(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function $M(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function HM(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function BM(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function FM(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],VM(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],$M(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],HM(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],BM(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function ec(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FM(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function zM(e){const t={},n=r(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=r(e,["default"]);i!=null&&a(t,["default"],i);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const l=r(e,["enum"]);l!=null&&a(t,["enum"],l);const c=r(e,["example"]);c!=null&&a(t,["example"],c);const u=r(e,["format"]);u!=null&&a(t,["format"],u);const f=r(e,["items"]);f!=null&&a(t,["items"],f);const d=r(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=r(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=r(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=r(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=r(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=r(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=r(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const E=r(e,["minimum"]);E!=null&&a(t,["minimum"],E);const x=r(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=r(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=r(e,["properties"]);C!=null&&a(t,["properties"],C);const v=r(e,["propertyOrdering"]);v!=null&&a(t,["propertyOrdering"],v);const A=r(e,["required"]);A!=null&&a(t,["required"],A);const _=r(e,["title"]);_!=null&&a(t,["title"],_);const N=r(e,["type"]);return N!=null&&a(t,["type"],N),t}function GM(e){const t={};if(r(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=r(e,["category"]);n!=null&&a(t,["category"],n);const i=r(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function qM(e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=r(e,["description"]);i!=null&&a(t,["description"],i);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=r(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=r(e,["response"]);u!=null&&a(t,["response"],u);const f=r(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function OM(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function YM(e){const t={},n=r(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],OM(n)),r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function JM(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function XM(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],JM(n)),t}function WM(){return{}}function KM(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function ZM(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>qM(d))),a(t,["functionDeclarations"],f)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],YM(i));const o=r(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],XM(o)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],WM());const c=r(e,["computerUse"]);c!=null&&a(t,["computerUse"],KM(c));const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function QM(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function eA(e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function tA(e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],eA(n));const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function nA(e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],QM(n));const i=r(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],tA(i)),t}function iA(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function zv(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],iA(n)),t}function oA(e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],zv(i)),t}function lA(e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>oA(o))),a(t,["speakerVoiceConfigs"],i)}return t}function rA(e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],zv(n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],lA(i));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function sA(e){const t={},n=r(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=r(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function aA(e,t,n){const i={},o=r(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],ec(Gt(o)));const l=r(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=r(t,["topP"]);c!=null&&a(i,["topP"],c);const u=r(t,["topK"]);u!=null&&a(i,["topK"],u);const f=r(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=r(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=r(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=r(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=r(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=r(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=r(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=r(t,["seed"]);S!=null&&a(i,["seed"],S);const E=r(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const x=r(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],zM(kf(x)));const y=r(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),r(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=r(t,["safetySettings"]);if(n!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(Z=>GM(Z))),a(n,["safetySettings"],D)}const v=r(t,["tools"]);if(n!==void 0&&v!=null){let D=Ll(v);Array.isArray(D)&&(D=D.map(Z=>ZM(Ul(Z)))),a(n,["tools"],D)}const A=r(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],nA(A)),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=r(t,["cachedContent"]);n!==void 0&&_!=null&&a(n,["cachedContent"],vi(e,_));const N=r(t,["responseModalities"]);N!=null&&a(i,["responseModalities"],N);const V=r(t,["mediaResolution"]);V!=null&&a(i,["mediaResolution"],V);const q=r(t,["speechConfig"]);if(q!=null&&a(i,["speechConfig"],rA(_f(q))),r(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=r(t,["thinkingConfig"]);return U!=null&&a(i,["thinkingConfig"],sA(U)),i}function _g(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>ec(u))),a(n,["contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["generationConfig"],aA(e,l,n)),n}function cA(e,t){const n={},i=r(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=r(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=r(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),r(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);o!=null&&a(n,["requests[]","content"],Af(e,o));const l=r(t,["config"]);l!=null&&a(n,["config"],cA(l,n));const c=r(t,["model"]);return c!==void 0&&a(n,["requests[]","model"],Be(e,c)),n}function dA(e,t){const n={};if(r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=r(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);const l=r(e,["guidanceScale"]);if(t!==void 0&&l!=null&&a(t,["parameters","guidanceScale"],l),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=r(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const u=r(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const f=r(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&a(t,["parameters","includeSafetyAttributes"],f);const d=r(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);const m=r(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const h=r(e,["outputMimeType"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","mimeType"],h);const g=r(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&a(t,["parameters","outputOptions","compressionQuality"],g),r(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const p=r(e,["imageSize"]);if(t!==void 0&&p!=null&&a(t,["parameters","sampleImageSize"],p),r(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function fA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=r(t,["config"]);return l!=null&&a(n,["config"],dA(l,n)),n}function mA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function hA(e,t,n){const i={},o=r(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=r(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=r(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=r(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Av(e,u)),i}function gA(e,t){const n={},i=r(t,["config"]);return i!=null&&a(n,["config"],hA(e,i,n)),n}function pA(e,t){const n={},i=r(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=r(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function yA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],pA(o,n)),n}function xA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function vA(e){const t={};if(r(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function CA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>ec(u))),a(n,["contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["config"],vA(l)),n}function Gv(e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],No(n));const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function TA(e,t){const n={},i=r(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=r(e,["image"]);if(t!==void 0&&o!=null&&a(t,["instances[0]","image"],Gv(o)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function bA(e,t){const n={},i=r(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i),r(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=r(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),r(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(e,["aspectRatio"]);t!==void 0&&l!=null&&a(t,["parameters","aspectRatio"],l);const c=r(e,["resolution"]);t!==void 0&&c!=null&&a(t,["parameters","resolution"],c);const u=r(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),r(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=r(e,["negativePrompt"]);t!==void 0&&f!=null&&a(t,["parameters","negativePrompt"],f);const d=r(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","enhancePrompt"],d),r(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(e,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(r(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function SA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=r(t,["image"]);if(l!=null&&a(n,["instances[0]","image"],Gv(l)),r(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=r(t,["source"]);c!=null&&a(n,["config"],TA(c,n));const u=r(t,["config"]);return u!=null&&a(n,["config"],bA(u,n)),n}function wA(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function EA(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["data"]);i!=null&&a(t,["data"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function MA(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function AA(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function kA(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],wA(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],EA(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],MA(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],AA(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Vl(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>kA(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function _A(e){const t={},n=r(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=r(e,["default"]);i!=null&&a(t,["default"],i);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const l=r(e,["enum"]);l!=null&&a(t,["enum"],l);const c=r(e,["example"]);c!=null&&a(t,["example"],c);const u=r(e,["format"]);u!=null&&a(t,["format"],u);const f=r(e,["items"]);f!=null&&a(t,["items"],f);const d=r(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=r(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=r(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=r(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=r(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=r(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=r(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const E=r(e,["minimum"]);E!=null&&a(t,["minimum"],E);const x=r(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=r(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=r(e,["properties"]);C!=null&&a(t,["properties"],C);const v=r(e,["propertyOrdering"]);v!=null&&a(t,["propertyOrdering"],v);const A=r(e,["required"]);A!=null&&a(t,["required"],A);const _=r(e,["title"]);_!=null&&a(t,["title"],_);const N=r(e,["type"]);return N!=null&&a(t,["type"],N),t}function NA(e){const t={},n=r(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function RA(e){const t={},n=r(e,["method"]);n!=null&&a(t,["method"],n);const i=r(e,["category"]);i!=null&&a(t,["category"],i);const o=r(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function DA(e){const t={};if(r(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(e,["description"]);n!=null&&a(t,["description"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=r(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=r(e,["response"]);c!=null&&a(t,["response"],c);const u=r(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function jA(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function IA(e){const t={},n=r(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],jA(n));const i=r(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function UA(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function LA(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],UA(n)),t}function PA(e){const t={},n=r(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function VA(e){const t={},n=r(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function $A(e){const t={},n=r(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],VA(n));const i=r(e,["authType"]);i!=null&&a(t,["authType"],i);const o=r(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=r(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=r(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=r(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function HA(e){const t={},n=r(e,["authConfig"]);return n!=null&&a(t,["authConfig"],$A(n)),t}function BA(){return{}}function FA(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function qv(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>DA(g))),a(t,["functionDeclarations"],h)}const i=r(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=r(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],IA(o));const l=r(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],LA(l));const c=r(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],PA(c));const u=r(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],HA(u)),r(e,["urlContext"])!=null&&a(t,["urlContext"],BA());const d=r(e,["computerUse"]);d!=null&&a(t,["computerUse"],FA(d));const m=r(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function zA(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function GA(e){const t={},n=r(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=r(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function qA(e){const t={},n=r(e,["latLng"]);n!=null&&a(t,["latLng"],GA(n));const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function OA(e){const t={},n=r(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],zA(n));const i=r(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],qA(i)),t}function YA(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function JA(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],YA(n)),t}function XA(e){const t={},n=r(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],JA(n)),r(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=r(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function WA(e){const t={},n=r(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=r(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function KA(e,t,n){const i={},o=r(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Vl(Gt(o)));const l=r(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=r(t,["topP"]);c!=null&&a(i,["topP"],c);const u=r(t,["topK"]);u!=null&&a(i,["topK"],u);const f=r(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=r(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=r(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=r(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=r(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=r(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=r(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=r(t,["seed"]);S!=null&&a(i,["seed"],S);const E=r(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const x=r(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],_A(kf(x)));const y=r(t,["responseJsonSchema"]);y!=null&&a(i,["responseJsonSchema"],y);const C=r(t,["routingConfig"]);C!=null&&a(i,["routingConfig"],C);const v=r(t,["modelSelectionConfig"]);v!=null&&a(i,["modelConfig"],NA(v));const A=r(t,["safetySettings"]);if(n!==void 0&&A!=null){let Se=A;Array.isArray(Se)&&(Se=Se.map(ee=>RA(ee))),a(n,["safetySettings"],Se)}const _=r(t,["tools"]);if(n!==void 0&&_!=null){let Se=Ll(_);Array.isArray(Se)&&(Se=Se.map(ee=>qv(Ul(ee)))),a(n,["tools"],Se)}const N=r(t,["toolConfig"]);n!==void 0&&N!=null&&a(n,["toolConfig"],OA(N));const V=r(t,["labels"]);n!==void 0&&V!=null&&a(n,["labels"],V);const q=r(t,["cachedContent"]);n!==void 0&&q!=null&&a(n,["cachedContent"],vi(e,q));const U=r(t,["responseModalities"]);U!=null&&a(i,["responseModalities"],U);const D=r(t,["mediaResolution"]);D!=null&&a(i,["mediaResolution"],D);const Z=r(t,["speechConfig"]);Z!=null&&a(i,["speechConfig"],XA(_f(Z)));const be=r(t,["audioTimestamp"]);be!=null&&a(i,["audioTimestamp"],be);const Ce=r(t,["thinkingConfig"]);return Ce!=null&&a(i,["thinkingConfig"],WA(Ce)),i}function Ng(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>Vl(u))),a(n,["contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["generationConfig"],KA(e,l,n)),n}function ZA(e,t){const n={},i=r(e,["taskType"]);t!==void 0&&i!=null&&a(t,["instances[]","task_type"],i);const o=r(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);const l=r(e,["outputDimensionality"]);t!==void 0&&l!=null&&a(t,["parameters","outputDimensionality"],l);const c=r(e,["mimeType"]);t!==void 0&&c!=null&&a(t,["instances[]","mimeType"],c);const u=r(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function QA(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);o!=null&&a(n,["instances[]","content"],Af(e,o));const l=r(t,["config"]);return l!=null&&a(n,["config"],ZA(l,n)),n}function ek(e,t){const n={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=r(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=r(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=r(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=r(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=r(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const p=r(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=r(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const S=r(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","compressionQuality"],S);const E=r(e,["addWatermark"]);t!==void 0&&E!=null&&a(t,["parameters","addWatermark"],E);const x=r(e,["imageSize"]);t!==void 0&&x!=null&&a(t,["parameters","sampleImageSize"],x);const y=r(e,["enhancePrompt"]);return t!==void 0&&y!=null&&a(t,["parameters","enhancePrompt"],y),n}function tk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=r(t,["config"]);return l!=null&&a(n,["config"],ek(l,n)),n}function Bn(e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=r(e,["imageBytes"]);i!=null&&a(t,["bytesBase64Encoded"],No(i));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function nk(e){const t={},n=r(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const i=r(e,["segmentationClasses"]);i!=null&&a(t,["maskClasses"],i);const o=r(e,["maskDilation"]);return o!=null&&a(t,["dilation"],o),t}function ik(e){const t={},n=r(e,["controlType"]);n!=null&&a(t,["controlType"],n);const i=r(e,["enableControlImageComputation"]);return i!=null&&a(t,["computeControl"],i),t}function ok(e){const t={},n=r(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function lk(e){const t={},n=r(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const i=r(e,["subjectDescription"]);return i!=null&&a(t,["subjectDescription"],i),t}function rk(e){const t={},n=r(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],Bn(n));const i=r(e,["referenceId"]);i!=null&&a(t,["referenceId"],i);const o=r(e,["referenceType"]);o!=null&&a(t,["referenceType"],o);const l=r(e,["maskImageConfig"]);l!=null&&a(t,["maskImageConfig"],nk(l));const c=r(e,["controlImageConfig"]);c!=null&&a(t,["controlImageConfig"],ik(c));const u=r(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],ok(u));const f=r(e,["subjectImageConfig"]);return f!=null&&a(t,["subjectImageConfig"],lk(f)),t}function sk(e,t){const n={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=r(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=r(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=r(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=r(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=r(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=r(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=r(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const p=r(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=r(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const S=r(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","compressionQuality"],S);const E=r(e,["addWatermark"]);t!==void 0&&E!=null&&a(t,["parameters","addWatermark"],E);const x=r(e,["editMode"]);t!==void 0&&x!=null&&a(t,["parameters","editMode"],x);const y=r(e,["baseSteps"]);return t!==void 0&&y!=null&&a(t,["parameters","editConfig","baseSteps"],y),n}function ak(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=r(t,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>rk(f))),a(n,["instances[0]","referenceImages"],u)}const c=r(t,["config"]);return c!=null&&a(n,["config"],sk(c,n)),n}function ck(e,t){const n={},i=r(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=r(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const l=r(e,["outputMimeType"]);t!==void 0&&l!=null&&a(t,["parameters","outputOptions","mimeType"],l);const c=r(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&a(t,["parameters","outputOptions","compressionQuality"],c);const u=r(e,["enhanceInputImage"]);t!==void 0&&u!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],u);const f=r(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=r(e,["numberOfImages"]);t!==void 0&&d!=null&&a(t,["parameters","sampleCount"],d);const m=r(e,["mode"]);return t!==void 0&&m!=null&&a(t,["parameters","mode"],m),n}function uk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["image"]);o!=null&&a(n,["instances[0]","image"],Bn(o));const l=r(t,["upscaleFactor"]);l!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=r(t,["config"]);return c!=null&&a(n,["config"],ck(c,n)),n}function dk(e){const t={},n=r(e,["productImage"]);return n!=null&&a(t,["image"],Bn(n)),t}function fk(e,t){const n={},i=r(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=r(e,["personImage"]);t!==void 0&&o!=null&&a(t,["instances[0]","personImage","image"],Bn(o));const l=r(e,["productImages"]);if(t!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>dk(u))),a(t,["instances[0]","productImages"],c)}return n}function mk(e,t){const n={},i=r(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=r(e,["baseSteps"]);t!==void 0&&o!=null&&a(t,["parameters","editConfig","baseSteps"],o);const l=r(e,["outputGcsUri"]);t!==void 0&&l!=null&&a(t,["parameters","storageUri"],l);const c=r(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const u=r(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const f=r(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const d=r(e,["addWatermark"]);t!==void 0&&d!=null&&a(t,["parameters","addWatermark"],d);const m=r(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const h=r(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h);const g=r(e,["enhancePrompt"]);return t!==void 0&&g!=null&&a(t,["parameters","enhancePrompt"],g),n}function hk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["source"]);o!=null&&a(n,["config"],fk(o,n));const l=r(t,["config"]);return l!=null&&a(n,["config"],mk(l,n)),n}function gk(e){const t={},n=r(e,["image"]);return n!=null&&a(t,["image"],Bn(n)),t}function pk(e,t){const n={},i=r(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=r(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],Bn(o));const l=r(e,["scribbleImage"]);return t!==void 0&&l!=null&&a(t,["instances[0]","scribble"],gk(l)),n}function yk(e,t){const n={},i=r(e,["mode"]);t!==void 0&&i!=null&&a(t,["parameters","mode"],i);const o=r(e,["maxPredictions"]);t!==void 0&&o!=null&&a(t,["parameters","maxPredictions"],o);const l=r(e,["confidenceThreshold"]);t!==void 0&&l!=null&&a(t,["parameters","confidenceThreshold"],l);const c=r(e,["maskDilation"]);t!==void 0&&c!=null&&a(t,["parameters","maskDilation"],c);const u=r(e,["binaryColorThreshold"]);return t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u),n}function xk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["source"]);o!=null&&a(n,["config"],pk(o,n));const l=r(t,["config"]);return l!=null&&a(n,["config"],yk(l,n)),n}function vk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Ck(e,t,n){const i={},o=r(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=r(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=r(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=r(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Av(e,u)),i}function Tk(e,t){const n={},i=r(t,["config"]);return i!=null&&a(n,["config"],Ck(e,i,n)),n}function bk(e,t){const n={},i=r(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=r(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=r(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function Sk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],bk(o,n)),n}function wk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],o),n}function Ek(e,t){const n={},i=r(e,["systemInstruction"]);t!==void 0&&i!=null&&a(t,["systemInstruction"],Vl(Gt(i)));const o=r(e,["tools"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>qv(u))),a(t,["tools"],c)}const l=r(e,["generationConfig"]);return t!==void 0&&l!=null&&a(t,["generationConfig"],l),n}function Mk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>Vl(u))),a(n,["contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["config"],Ek(l,n)),n}function Ak(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["contents"]);if(o!=null){let c=An(o);Array.isArray(c)&&(c=c.map(u=>Vl(u))),a(n,["contents"],c)}const l=r(t,["config"]);return l!=null&&a(n,["config"],l),n}function Ov(e){const t={},n=r(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const i=r(e,["videoBytes"]);i!=null&&a(t,["bytesBase64Encoded"],No(i));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kk(e,t){const n={},i=r(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=r(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],Bn(o));const l=r(e,["video"]);return t!==void 0&&l!=null&&a(t,["instances[0]","video"],Ov(l)),n}function _k(e){const t={},n=r(e,["image"]);n!=null&&a(t,["image"],Bn(n));const i=r(e,["referenceType"]);return i!=null&&a(t,["referenceType"],i),t}function Nk(e){const t={},n=r(e,["image"]);n!=null&&a(t,["_self"],Bn(n));const i=r(e,["maskMode"]);return i!=null&&a(t,["maskMode"],i),t}function Rk(e,t){const n={},i=r(e,["numberOfVideos"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=r(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const l=r(e,["fps"]);t!==void 0&&l!=null&&a(t,["parameters","fps"],l);const c=r(e,["durationSeconds"]);t!==void 0&&c!=null&&a(t,["parameters","durationSeconds"],c);const u=r(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const f=r(e,["aspectRatio"]);t!==void 0&&f!=null&&a(t,["parameters","aspectRatio"],f);const d=r(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);const m=r(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=r(e,["pubsubTopic"]);t!==void 0&&h!=null&&a(t,["parameters","pubsubTopic"],h);const g=r(e,["negativePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","negativePrompt"],g);const p=r(e,["enhancePrompt"]);t!==void 0&&p!=null&&a(t,["parameters","enhancePrompt"],p);const b=r(e,["generateAudio"]);t!==void 0&&b!=null&&a(t,["parameters","generateAudio"],b);const S=r(e,["lastFrame"]);t!==void 0&&S!=null&&a(t,["instances[0]","lastFrame"],Bn(S));const E=r(e,["referenceImages"]);if(t!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(v=>_k(v))),a(t,["instances[0]","referenceImages"],C)}const x=r(e,["mask"]);t!==void 0&&x!=null&&a(t,["instances[0]","mask"],Nk(x));const y=r(e,["compressionQuality"]);return t!==void 0&&y!=null&&a(t,["parameters","compressionQuality"],y),n}function Dk(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=r(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=r(t,["image"]);l!=null&&a(n,["instances[0]","image"],Bn(l));const c=r(t,["video"]);c!=null&&a(n,["instances[0]","video"],Ov(c));const u=r(t,["source"]);u!=null&&a(n,["config"],kk(u,n));const f=r(t,["config"]);return f!=null&&a(n,["config"],Rk(f,n)),n}function jk(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Ik(e){const t={},n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Uk(e){const t={},n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Lk(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function Pk(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],jk(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],Ik(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],Uk(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],Lk(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function Vk(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Pk(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function $k(e){const t={},n=r(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function Hk(e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function Bk(e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Hk(o))),a(t,["urlMetadata"],i)}return t}function Fk(e){const t={},n=r(e,["content"]);n!=null&&a(t,["content"],Vk(n));const i=r(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],$k(i));const o=r(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=r(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=r(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],Bk(c));const u=r(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=r(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=r(e,["index"]);d!=null&&a(t,["index"],d);const m=r(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=r(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Rg(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>Fk(d))),a(t,["candidates"],f)}const o=r(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=r(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=r(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=r(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function zk(e){const t={},n=r(e,["values"]);return n!=null&&a(t,["values"],n),t}function Gk(){return{}}function qk(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>zk(c))),a(t,["embeddings"],l)}return r(e,["metadata"])!=null&&a(t,["metadata"],Gk()),t}function Ok(e){const t={},n=r(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],No(n));const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Yv(e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=r(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=r(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function Yk(e){const t={},n=r(e,["_self"]);n!=null&&a(t,["image"],Ok(n));const i=r(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=r(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],Yv(o)),t}function Jk(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Yk(c))),a(t,["generatedImages"],l)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Yv(o)),t}function Xk(e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=r(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=r(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function hd(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const l=r(e,["version"]);l!=null&&a(t,["version"],l);const c=r(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],Xk(c));const u=r(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const f=r(e,["outputTokenLimit"]);f!=null&&a(t,["outputTokenLimit"],f);const d=r(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function Wk(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["_self"]);if(o!=null){let l=kv(o);Array.isArray(l)&&(l=l.map(c=>hd(c))),a(t,["models"],l)}return t}function Kk(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Zk(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["totalTokens"]);i!=null&&a(t,["totalTokens"],i);const o=r(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function Qk(e){const t={},n=r(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=r(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],No(i));const o=r(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function e_(e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],Qk(n)),t}function t_(e){const t={},n=r(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>e_(c))),a(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=r(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function n_(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const c=r(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],t_(c)),t}function i_(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function o_(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["data"]);i!=null&&a(t,["data"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function l_(e){const t={},n=r(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=r(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function r_(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function s_(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],i_(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],o_(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],l_(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],r_(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function a_(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>s_(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function c_(e){const t={},n=r(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function u_(e){const t={},n=r(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=r(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function d_(e){const t={},n=r(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>u_(o))),a(t,["urlMetadata"],i)}return t}function f_(e){const t={},n=r(e,["content"]);n!=null&&a(t,["content"],a_(n));const i=r(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],c_(i));const o=r(e,["finishMessage"]);o!=null&&a(t,["finishMessage"],o);const l=r(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=r(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],d_(c));const u=r(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=r(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=r(e,["index"]);d!=null&&a(t,["index"],d);const m=r(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=r(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Dg(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>f_(m))),a(t,["candidates"],d)}const o=r(e,["createTime"]);o!=null&&a(t,["createTime"],o);const l=r(e,["modelVersion"]);l!=null&&a(t,["modelVersion"],l);const c=r(e,["promptFeedback"]);c!=null&&a(t,["promptFeedback"],c);const u=r(e,["responseId"]);u!=null&&a(t,["responseId"],u);const f=r(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function m_(e){const t={},n=r(e,["truncated"]);n!=null&&a(t,["truncated"],n);const i=r(e,["token_count"]);return i!=null&&a(t,["tokenCount"],i),t}function h_(e){const t={},n=r(e,["values"]);n!=null&&a(t,["values"],n);const i=r(e,["statistics"]);return i!=null&&a(t,["statistics"],m_(i)),t}function g_(e){const t={},n=r(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function p_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>h_(c))),a(t,["embeddings"],l)}const o=r(e,["metadata"]);return o!=null&&a(t,["metadata"],g_(o)),t}function Jv(e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&a(t,["imageBytes"],No(i));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Xv(e){const t={},n=r(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=r(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=r(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function tc(e){const t={},n=r(e,["_self"]);n!=null&&a(t,["image"],Jv(n));const i=r(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=r(e,["_self"]);o!=null&&a(t,["safetyAttributes"],Xv(o));const l=r(e,["prompt"]);return l!=null&&a(t,["enhancedPrompt"],l),t}function y_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>tc(c))),a(t,["generatedImages"],l)}const o=r(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Xv(o)),t}function x_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>tc(l))),a(t,["generatedImages"],o)}return t}function v_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>tc(l))),a(t,["generatedImages"],o)}return t}function C_(e){const t={},n=r(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tc(o))),a(t,["generatedImages"],i)}return t}function T_(e){const t={},n=r(e,["label"]);n!=null&&a(t,["label"],n);const i=r(e,["score"]);return i!=null&&a(t,["score"],i),t}function b_(e){const t={},n=r(e,["_self"]);n!=null&&a(t,["mask"],Jv(n));const i=r(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>T_(l))),a(t,["labels"],o)}return t}function S_(e){const t={},n=r(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b_(o))),a(t,["generatedMasks"],i)}return t}function w_(e){const t={},n=r(e,["endpoint"]);n!=null&&a(t,["name"],n);const i=r(e,["deployedModelId"]);return i!=null&&a(t,["deployedModelId"],i),t}function E_(e){const t={},n=r(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const i=r(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=r(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function M_(e){const t={},n=r(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=r(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=r(e,["step"]);return o!=null&&a(t,["step"],o),t}function gd(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=r(e,["description"]);o!=null&&a(t,["description"],o);const l=r(e,["versionId"]);l!=null&&a(t,["version"],l);const c=r(e,["deployedModels"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>w_(g))),a(t,["endpoints"],h)}const u=r(e,["labels"]);u!=null&&a(t,["labels"],u);const f=r(e,["_self"]);f!=null&&a(t,["tunedModelInfo"],E_(f));const d=r(e,["defaultCheckpointId"]);d!=null&&a(t,["defaultCheckpointId"],d);const m=r(e,["checkpoints"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>M_(g))),a(t,["checkpoints"],h)}return t}function A_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["_self"]);if(o!=null){let l=kv(o);Array.isArray(l)&&(l=l.map(c=>gd(c))),a(t,["models"],l)}return t}function k_(e){const t={},n=r(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function __(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["totalTokens"]);return i!=null&&a(t,["totalTokens"],i),t}function N_(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["tokensInfo"]);return i!=null&&a(t,["tokensInfo"],i),t}function R_(e){const t={},n=r(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=r(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],No(i));const o=r(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function D_(e){const t={},n=r(e,["_self"]);return n!=null&&a(t,["video"],R_(n)),t}function j_(e){const t={},n=r(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>D_(c))),a(t,["generatedVideos"],l)}const i=r(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=r(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function I_(e){const t={},n=r(e,["name"]);n!=null&&a(t,["name"],n);const i=r(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=r(e,["done"]);o!=null&&a(t,["done"],o);const l=r(e,["error"]);l!=null&&a(t,["error"],l);const c=r(e,["response"]);return c!=null&&a(t,["response"],j_(c)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U_="Content-Type",L_="X-Server-Timeout",P_="User-Agent",pd="x-goog-api-client",V_="1.20.0",$_=`google-genai-sdk/${V_}`,H_="v1beta1",B_="v1beta",jg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class F_{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:H_,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:B_,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[c,u]of Object.entries(t.queryParams))o.searchParams.append(c,String(u));let l={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=t.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.unaryApiCall(o,l,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,l]of Object.entries(n))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=t.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.streamApiCall(o,l,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=l}return n&&n.extraBody!==null&&z_(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ig(o),new cd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ig(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return hl(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield it(o.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(f,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const g=JSON.parse(JSON.stringify(h.error)),p=g.status,b=g.code,S=`got status: ${p}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new Qa({message:S,status:b})}}catch(h){if(h.name==="ApiError")throw h}c+=d;let m=c.match(jg);for(;m;){const h=m[1];try{const g=new Response(h,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield it(new cd(g)),c=c.slice(m[0].length),m=c.match(jg)}catch(g){throw new Error(`exception parsing stream chunk ${h}. ${g}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=$_+" "+this.clientOptions.userAgentExtra;return t[P_]=n,t[pd]=n,t[U_]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))n.append(i,o);t.timeout&&t.timeout>0&&n.append(L_,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(t);o.sizeBytes=String(c.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return l.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const l={file:t},c=await this.request({path:ue("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ig(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Qa({message:o,status:n}):new Error(o)}}function z_(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const l=JSON.parse(e.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,c){const u=Object.assign({},l);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const d=c[f],m=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?u[f]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G_="mcp_used/unknown";let q_=!1;function Wv(e){for(const t of e)if(O_(t)||typeof t=="object"&&"inputSchema"in t)return!0;return q_}function Kv(e){var t;const n=(t=e[pd])!==null&&t!==void 0?t:"";e[pd]=(n+` ${G_}`).trimStart()}function O_(e){return e!==null&&typeof e=="object"&&e instanceof Df}function Y_(e,t=100){return hl(this,arguments,function*(){let i,o=0;for(;o<t;){const l=yield it(e.listTools({cursor:i}));for(const c of l.tools)yield yield it(c),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Df{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Df(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const m of this.mcpClients)try{for(var u=!0,f=(n=void 0,Ar(Y_(m))),d;d=await f.next(),t=d.done,!t;u=!0){o=d.value,u=!1;const h=o;c.push(h);const g=h.name;if(l[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);l[g]=m}}catch(h){n={error:h}}finally{try{!u&&!t&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),a1(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,l);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function J_(e,t,n){const i=new e1;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const l=wM(o);Object.assign(i,l),t(i)}class X_{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Z_(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const m=new Promise(C=>{d=C}),h=t.callbacks,g=function(){d({})},p=this.apiClient,b={onopen:g,onmessage:C=>{J_(p,h.onmessage,C)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(C){}},S=this.webSocketFactory.create(f,K_(c),b);S.connect(),await m;const E=Be(this.apiClient,t.model),x=$v({model:E}),y=md({setup:x});return S.send(JSON.stringify(y)),new W_(S,this.apiClient)}}class W_{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=TE(t),i=Hv(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=bE(t),i=md(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const n=md({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(nl.PLAY)}pause(){this.sendPlaybackControl(nl.PAUSE)}stop(){this.sendPlaybackControl(nl.STOP)}resetContext(){this.sendPlaybackControl(nl.RESET_CONTEXT)}close(){this.conn.close()}}function K_(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Z_(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eN(e,t,n){const i=new QS;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(e.isVertexAI()){const c=PM(l);Object.assign(i,c)}else{const c=gM(l);Object.assign(i,c)}t(i)}class tN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new X_(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,l,c,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&Wv(t.config.tools)&&Kv(h);const g=lN(h);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const q=this.apiClient.getApiKey();let U="BidiGenerateContent",D="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",D="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${D}=${q}`}let p=()=>{};const b=new Promise(q=>{p=q}),S=t.callbacks,E=function(){var q;(q=S==null?void 0:S.onopen)===null||q===void 0||q.call(S),p({})},x=this.apiClient,y={onopen:E,onmessage:q=>{eN(x,S.onmessage,q)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(q){},onclose:(i=S==null?void 0:S.onclose)!==null&&i!==void 0?i:function(q){}},C=this.webSocketFactory.create(m,oN(g),y);C.connect(),await b;let v=Be(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){const q=this.apiClient.getProject(),U=this.apiClient.getLocation();v=`projects/${q}/locations/${U}/`+v}let A={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ka.AUDIO]}:t.config.responseModalities=[ka.AUDIO]),!((l=t.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(u=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[],N=[];for(const q of _)if(this.isCallableTool(q)){const U=q;N.push(await U.tool())}else N.push(q);N.length>0&&(t.config.tools=N);const V={model:v,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?A=KE(this.apiClient,V):A=yE(this.apiClient,V),delete A.config,C.send(JSON.stringify(A)),new iN(C,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const nN={turnComplete:!0};class iN{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=An(n.turns),t.isVertexAI()?i=i.map(o=>Vl(o)):i=i.map(o=>ec(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(Q_)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},nN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:eM(t)}:n={realtimeInput:CE(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function oN(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function lN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ug=10;function Lg(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const c of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(gl(c)){o=!0;break}if(!o)return!0;const l=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function gl(e){return"callTool"in e&&typeof e.callTool=="function"}function rN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>gl(o)))!==null&&i!==void 0?i:!1}function sN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>!gl(o)))!==null&&i!==void 0?i:!1}function Pg(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aN extends _o{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,l,c,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rN(n)||Lg(n.config))return await this.generateContentInternal(f);if(sN(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,m;const h=An(f.contents),g=(l=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Ug;let p=0;for(;p<g&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const b=d.candidates[0].content,S=[];for(const E of(u=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[])if(gl(E)){const y=await E.callTool(d.functionCalls);S.push(...y)}p++,m={role:"user",parts:S},f.contents=An(f.contents),f.contents.push(b),f.contents.push(m),Pg(f.config)&&(h.push(b),h.push(m))}return Pg(f.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Lg(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let l;const c=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:c.push(f);let u;return l?u={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ss(wo.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const l=(n=t.config)===null||n===void 0?void 0:n.tools;if(!l)return t;const c=await Promise.all(l.map(async f=>gl(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(u.config.tools=c,t.config&&t.config.tools&&Wv(t.config.tools)){const f=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Kv(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,i,o;const l=new Map;for(const c of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(gl(c)){const u=c,f=await u.tool();for(const d of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(t){var n,i,o;const l=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Ug;let c=!1,u=0;const f=await this.initAfcToolsMap(t);return function(d,m,h){var g,p;return hl(this,arguments,function*(){for(var b,S,E,x;u<l;){c&&(u++,c=!1);const A=yield it(d.processParamsMaybeAddMcpUsage(h)),_=yield it(d.generateContentStreamInternal(A)),N=[],V=[];try{for(var y=!0,C=(S=void 0,Ar(_)),v;v=yield it(C.next()),b=v.done,!b;y=!0){x=v.value,y=!1;const q=x;if(yield yield it(q),q.candidates&&(!((g=q.candidates[0])===null||g===void 0)&&g.content)){V.push(q.candidates[0].content);for(const U of(p=q.candidates[0].content.parts)!==null&&p!==void 0?p:[])if(u<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(U.functionCall.name)){const D=yield it(m.get(U.functionCall.name).callTool([U.functionCall]));N.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(q){S={error:q}}finally{try{!y&&!b&&(E=C.return)&&(yield it(E.call(C)))}finally{if(S)throw S.error}}if(N.length>0){c=!0;const q=new or;q.candidates=[{content:{role:"user",parts:N}}],yield yield it(q);const U=[];U.push(...V),U.push({role:"user",parts:N});const D=An(h.contents).concat(U);h.contents=D}else break}})}(this,f,t)}async generateContentInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Ng(this.apiClient,t);return u=ue("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Dg(m),g=new or;return Object.assign(g,h),g})}else{const d=_g(this.apiClient,t);return u=ue("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Rg(m),g=new or;return Object.assign(g,h),g})}}async generateContentStreamInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Ng(this.apiClient,t);return u=ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(h){return hl(this,arguments,function*(){var g,p,b,S;try{for(var E=!0,x=Ar(h),y;y=yield it(x.next()),g=y.done,!g;E=!0){S=y.value,E=!1;const C=S,v=Dg(yield it(C.json()));v.sdkHttpResponse={headers:C.headers};const A=new or;Object.assign(A,v),yield yield it(A)}}catch(C){p={error:C}}finally{try{!E&&!g&&(b=x.return)&&(yield it(b.call(x)))}finally{if(p)throw p.error}}})})}else{const d=_g(this.apiClient,t);return u=ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(h){return hl(this,arguments,function*(){var g,p,b,S;try{for(var E=!0,x=Ar(h),y;y=yield it(x.next()),g=y.done,!g;E=!0){S=y.value,E=!1;const C=S,v=Rg(yield it(C.json()));v.sdkHttpResponse={headers:C.headers};const A=new or;Object.assign(A,v),yield yield it(A)}}catch(C){p={error:C}}finally{try{!E&&!g&&(b=x.return)&&(yield it(b.call(x)))}finally{if(p)throw p.error}}})})}}async embedContent(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=QA(this.apiClient,t);return u=ue("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=p_(m),g=new cg;return Object.assign(g,h),g})}else{const d=uA(this.apiClient,t);return u=ue("{model}:batchEmbedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=qk(m),g=new cg;return Object.assign(g,h),g})}}async generateImagesInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=tk(this.apiClient,t);return u=ue("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=y_(m),g=new ug;return Object.assign(g,h),g})}else{const d=fA(this.apiClient,t);return u=ue("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Jk(m),g=new ug;return Object.assign(g,h),g})}}async editImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=ak(this.apiClient,t);return l=ue("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=x_(f),m=new qS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=uk(this.apiClient,t);return l=ue("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=v_(f),m=new OS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=hk(this.apiClient,t);return l=ue("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=C_(f),m=new YS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=xk(this.apiClient,t);return l=ue("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=S_(f),m=new JS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=vk(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>gd(m))}else{const d=mA(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>hd(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Tk(this.apiClient,t);return u=ue("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=A_(m),g=new dg;return Object.assign(g,h),g})}else{const d=gA(this.apiClient,t);return u=ue("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Wk(m),g=new dg;return Object.assign(g,h),g})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Sk(this.apiClient,t);return u=ue("{model}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>gd(m))}else{const d=yA(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>hd(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=wk(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=k_(m),g=new fg;return Object.assign(g,h),g})}else{const d=xA(this.apiClient,t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Kk(m),g=new fg;return Object.assign(g,h),g})}}async countTokens(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Mk(this.apiClient,t);return u=ue("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=__(m),g=new mg;return Object.assign(g,h),g})}else{const d=CA(this.apiClient,t);return u=ue("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Zk(m),g=new mg;return Object.assign(g,h),g})}}async computeTokens(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Ak(this.apiClient,t);return l=ue("{model}:computeTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=N_(f),m=new XS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Dk(this.apiClient,t);return u=ue("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>{const h=I_(m),g=new _a;return Object.assign(g,h),g})}else{const d=SA(this.apiClient,t);return u=ue("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>{const h=n_(m),g=new _a;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN extends _o{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=LS(t);return u=ue("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c}else{const d=IS(t);return u=ue("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c}}async fetchPredictVideosOperationInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=US(t);return l=ue("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(e){const t={},n=r(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Zv(e){const t={},n=r(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],uN(n)),t}function dN(e){const t={},n=r(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=r(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],Zv(i)),t}function fN(e){const t={},n=r(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>dN(o))),a(t,["speakerVoiceConfigs"],i)}return t}function mN(e){const t={},n=r(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Zv(n));const i=r(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],fN(i));const o=r(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function hN(e){const t={},n=r(e,["fps"]);n!=null&&a(t,["fps"],n);const i=r(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=r(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function gN(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["data"]);n!=null&&a(t,["data"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function pN(e){const t={};if(r(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=r(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function yN(e){const t={},n=r(e,["id"]);n!=null&&a(t,["id"],n);const i=r(e,["args"]);i!=null&&a(t,["args"],i);const o=r(e,["name"]);return o!=null&&a(t,["name"],o),t}function xN(e){const t={},n=r(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],hN(n));const i=r(e,["thought"]);i!=null&&a(t,["thought"],i);const o=r(e,["inlineData"]);o!=null&&a(t,["inlineData"],gN(o));const l=r(e,["fileData"]);l!=null&&a(t,["fileData"],pN(l));const c=r(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=r(e,["functionCall"]);u!=null&&a(t,["functionCall"],yN(u));const f=r(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=r(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=r(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=r(e,["text"]);return h!=null&&a(t,["text"],h),t}function vN(e){const t={},n=r(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>xN(l))),a(t,["parts"],o)}const i=r(e,["role"]);return i!=null&&a(t,["role"],i),t}function CN(e){const t={},n=r(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=r(e,["description"]);i!=null&&a(t,["description"],i);const o=r(e,["name"]);o!=null&&a(t,["name"],o);const l=r(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=r(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=r(e,["response"]);u!=null&&a(t,["response"],u);const f=r(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function TN(e){const t={},n=r(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=r(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function bN(e){const t={},n=r(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],TN(n)),r(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function SN(e){const t={},n=r(e,["mode"]);n!=null&&a(t,["mode"],n);const i=r(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function wN(e){const t={},n=r(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],SN(n)),t}function EN(){return{}}function MN(e){const t={},n=r(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function AN(e){const t={},n=r(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>CN(d))),a(t,["functionDeclarations"],f)}if(r(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],bN(i));const o=r(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],wN(o)),r(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(e,["urlContext"])!=null&&a(t,["urlContext"],EN());const c=r(e,["computerUse"]);c!=null&&a(t,["computerUse"],MN(c));const u=r(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function kN(e){const t={},n=r(e,["handle"]);if(n!=null&&a(t,["handle"],n),r(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Vg(){return{}}function _N(e){const t={},n=r(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=r(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=r(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=r(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=r(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function NN(e){const t={},n=r(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],_N(n));const i=r(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=r(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function RN(e){const t={},n=r(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function DN(e){const t={},n=r(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=r(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],RN(i)),t}function jN(e){const t={},n=r(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function IN(e,t){const n={},i=r(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=r(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=r(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=r(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=r(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=r(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=r(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=r(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=r(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],mN(Nf(h)));const g=r(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=r(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],vN(Gt(p)));const b=r(e,["tools"]);if(t!==void 0&&b!=null){let A=Ll(b);Array.isArray(A)&&(A=A.map(_=>AN(Ul(_)))),a(t,["setup","tools"],A)}const S=r(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],kN(S));const E=r(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],Vg());const x=r(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Vg());const y=r(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],NN(y));const C=r(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],DN(C));const v=r(e,["proactivity"]);return t!==void 0&&v!=null&&a(t,["setup","proactivity"],jN(v)),n}function UN(e,t){const n={},i=r(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=r(t,["config"]);return o!=null&&a(n,["config"],IN(o,n)),n}function LN(e,t,n){const i={},o=r(t,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const l=r(t,["newSessionExpireTime"]);n!==void 0&&l!=null&&a(n,["newSessionExpireTime"],l);const c=r(t,["uses"]);n!==void 0&&c!=null&&a(n,["uses"],c);const u=r(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],UN(e,u));const f=r(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&a(n,["fieldMask"],f),i}function PN(e,t){const n={},i=r(t,["config"]);return i!=null&&a(n,["config"],LN(e,i,n)),n}function VN(e){const t={},n=r(e,["name"]);return n!=null&&a(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${n}.${l}`);t.push(...o)}else t.push(n)}return t.join(",")}function HN(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(e.bidiGenerateContentSetup=l,n=l):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const l=$N(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)l?e.fieldMask=l:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(d=>c.includes(d)?`generationConfig.${d}`:d));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class BN extends _o{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=PN(this.apiClient,t);l=ue("auth_tokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=HN(u,t.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>VN(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FN(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function zN(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=r(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function GN(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],zN(n,t)),t}function qN(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function ON(e){const t={},n=r(e,["textInput"]);n!=null&&a(t,["textInput"],n);const i=r(e,["output"]);return i!=null&&a(t,["output"],i),t}function YN(e){const t={};if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=r(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ON(o))),a(t,["examples","examples"],i)}return t}function JN(e,t){const n={};if(r(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=r(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&a(t,["displayName"],i),r(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=r(e,["epochCount"]);t!==void 0&&o!=null&&a(t,["tuningTask","hyperparameters","epochCount"],o);const l=r(e,["learningRateMultiplier"]);if(l!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=r(e,["batchSize"]);t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","batchSize"],c);const u=r(e,["learningRate"]);if(t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","learningRate"],u),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function XN(e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=r(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=r(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],YN(o));const l=r(e,["config"]);return l!=null&&a(t,["config"],JN(l,t)),t}function WN(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function KN(e,t){const n={},i=r(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=r(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=r(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function ZN(e){const t={},n=r(e,["config"]);return n!=null&&a(t,["config"],KN(n,t)),t}function QN(e){const t={},n=r(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=r(e,["config"]);return i!=null&&a(t,["config"],i),t}function eR(e,t){const n={},i=r(e,["gcsUri"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],i);const o=r(e,["vertexDatasetResource"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),r(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function tR(e,t){const n={},i=r(e,["gcsUri"]);i!=null&&a(n,["validationDatasetUri"],i);const o=r(e,["vertexDatasetResource"]);return t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),n}function nR(e,t){const n={},i=r(e,["validationDataset"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec"],tR(i,n));const o=r(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&a(t,["tunedModelDisplayName"],o);const l=r(e,["description"]);t!==void 0&&l!=null&&a(t,["description"],l);const c=r(e,["epochCount"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],c);const u=r(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=r(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=r(e,["preTunedModelCheckpointId"]);d!=null&&a(n,["preTunedModel","checkpointId"],d);const m=r(e,["adapterSize"]);if(t!==void 0&&m!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m),r(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=r(e,["labels"]);return t!==void 0&&h!=null&&a(t,["labels"],h),n}function iR(e){const t={},n=r(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=r(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=r(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],eR(o,t));const l=r(e,["config"]);return l!=null&&a(t,["config"],nR(l,t)),t}function oR(e){const t={},n=r(e,["name"]);n!=null&&a(t,["model"],n);const i=r(e,["name"]);return i!=null&&a(t,["endpoint"],i),t}function Qv(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["state"]);o!=null&&a(t,["state"],Ev(o));const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=r(e,["tuningTask","startTime"]);c!=null&&a(t,["startTime"],c);const u=r(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const f=r(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=r(e,["description"]);d!=null&&a(t,["description"],d);const m=r(e,["baseModel"]);m!=null&&a(t,["baseModel"],m);const h=r(e,["_self"]);h!=null&&a(t,["tunedModel"],oR(h));const g=r(e,["customBaseModel"]);g!=null&&a(t,["customBaseModel"],g);const p=r(e,["experiment"]);p!=null&&a(t,["experiment"],p);const b=r(e,["labels"]);b!=null&&a(t,["labels"],b);const S=r(e,["outputUri"]);S!=null&&a(t,["outputUri"],S);const E=r(e,["pipelineJob"]);E!=null&&a(t,["pipelineJob"],E);const x=r(e,["serviceAccount"]);x!=null&&a(t,["serviceAccount"],x);const y=r(e,["tunedModelDisplayName"]);return y!=null&&a(t,["tunedModelDisplayName"],y),t}function lR(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Qv(c))),a(t,["tuningJobs"],l)}return t}function rR(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["metadata"]);o!=null&&a(t,["metadata"],o);const l=r(e,["done"]);l!=null&&a(t,["done"],l);const c=r(e,["error"]);return c!=null&&a(t,["error"],c),t}function sR(e){const t={},n=r(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=r(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=r(e,["step"]);o!=null&&a(t,["step"],o);const l=r(e,["endpoint"]);return l!=null&&a(t,["endpoint"],l),t}function aR(e){const t={},n=r(e,["model"]);n!=null&&a(t,["model"],n);const i=r(e,["endpoint"]);i!=null&&a(t,["endpoint"],i);const o=r(e,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>sR(c))),a(t,["checkpoints"],l)}return t}function yd(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["name"]);i!=null&&a(t,["name"],i);const o=r(e,["state"]);o!=null&&a(t,["state"],Ev(o));const l=r(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=r(e,["startTime"]);c!=null&&a(t,["startTime"],c);const u=r(e,["endTime"]);u!=null&&a(t,["endTime"],u);const f=r(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=r(e,["error"]);d!=null&&a(t,["error"],d);const m=r(e,["description"]);m!=null&&a(t,["description"],m);const h=r(e,["baseModel"]);h!=null&&a(t,["baseModel"],h);const g=r(e,["tunedModel"]);g!=null&&a(t,["tunedModel"],aR(g));const p=r(e,["preTunedModel"]);p!=null&&a(t,["preTunedModel"],p);const b=r(e,["supervisedTuningSpec"]);b!=null&&a(t,["supervisedTuningSpec"],b);const S=r(e,["tuningDataStats"]);S!=null&&a(t,["tuningDataStats"],S);const E=r(e,["encryptionSpec"]);E!=null&&a(t,["encryptionSpec"],E);const x=r(e,["partnerModelTuningSpec"]);x!=null&&a(t,["partnerModelTuningSpec"],x);const y=r(e,["customBaseModel"]);y!=null&&a(t,["customBaseModel"],y);const C=r(e,["experiment"]);C!=null&&a(t,["experiment"],C);const v=r(e,["labels"]);v!=null&&a(t,["labels"],v);const A=r(e,["outputUri"]);A!=null&&a(t,["outputUri"],A);const _=r(e,["pipelineJob"]);_!=null&&a(t,["pipelineJob"],_);const N=r(e,["serviceAccount"]);N!=null&&a(t,["serviceAccount"],N);const V=r(e,["tunedModelDisplayName"]);return V!=null&&a(t,["tunedModelDisplayName"],V),t}function cR(e){const t={},n=r(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=r(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=r(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>yd(c))),a(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uR extends _o{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ss(wo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel},o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:ad.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=WN(t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>yd(m))}else{const d=FN(t);return u=ue("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>Qv(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=ZN(t);return u=ue("tuningJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=cR(m),g=new hg;return Object.assign(g,h),g})}else{const d=GN(t);return u=ue("tunedModels",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=lR(m),g=new hg;return Object.assign(g,h),g})}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=QN(t);c=ue("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=qN(t);c=ue("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=iR(t);return l=ue("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>yd(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=XN(t);return l=ue("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>rR(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dR{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fR=1024*1024*8,mR=3,hR=1e3,gR=2,lu="x-goog-upload-status";async function pR(e,t,n){var i,o,l;let c=0,u=0,f=new cd(new Response),d="upload";for(c=e.size;u<c;){const h=Math.min(fR,c-u),g=e.slice(u,u+h);u+h>=c&&(d+=", finalize");let p=0,b=hR;for(;p<mR&&(f=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[lu]));)p++,await xR(b),b=b*gR;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[lu])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[lu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function yR(e){return{size:e.size,type:e.type}}function xR(e){return new Promise(t=>setTimeout(t,e))}class vR{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pR(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yR(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CR{create(t,n,i){return new TR(t,n,i)}}class TR{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $g="x-goog-api-key";class bR{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get($g)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append($g,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SR="gl-node/";class wR{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=jS(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new bR(this.apiKey);this.apiClient=new F_({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:SR+"web",uploader:new vR,downloader:new dR}),this.models=new aN(this.apiClient),this.live=new tN(this.apiClient,o,new CR),this.batches=new w2(this.apiClient),this.chats=new Dw(this.models,this.apiClient),this.caches=new _w(this.apiClient),this.files=new qw(this.apiClient),this.operations=new cN(this.apiClient),this.authTokens=new BN(this.apiClient),this.tunings=new uR(this.apiClient)}}var ER={};const Hg=ER.API_KEY;let xd=null;Hg&&(xd=new wR({apiKey:Hg}));const _e=e=>Math.round(e*100)/100;function MR(e,t){const n={tags:[`ID:${e.id}`]};if(e.comment&&(n.comment=e.comment),e.type==="text"){e.state!=="normal"&&(n.state=e.state),n.text=e.text,n.fill=e.fill;const f=[e.font,Math.round(e.fontSize)];return e.weight==="bold"&&f.push("bold"),e.slant==="italic"&&f.push("italic"),e.underline&&f.push("underline"),e.overstrike&&f.push("overstrike"),n.font=f.join(" "),n.anchor=e.anchor,e.width>0&&(n.width=_e(e.width)),e.justify&&(n.justify=e.justify),e.stipple&&e.fill!=="none"&&(n.stipple=e.stipple),e.rotation!==0&&(n.angle=_e(e.rotation)),{command:"create_text",coords:[_e(e.x),_e(e.y)],options:n}}const i=e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed||e.type==="arc"&&e.style==="arc";if(e.state!=="normal"&&(n.state=e.state),"fill"in e&&e.fill!=="none"&&!i&&(n.fill=e.fill),e.stroke!=="none"&&e.strokeWidth>0&&(n.width=_e(e.strokeWidth),i?n.fill=e.stroke:n.outline=e.stroke),"joinstyle"in e&&e.joinstyle&&(n.joinstyle=e.joinstyle),"stipple"in e&&e.stipple&&"fill"in e&&e.fill!=="none"&&(n.stipple=e.stipple),"dash"in e&&e.dash){const f=e.strokeWidth>0?e.strokeWidth:1;n.dash=e.dash.map(d=>_e(d*f)),"dashoffset"in e&&e.dashoffset!==void 0&&(n.dashoffset=_e(e.dashoffset))}if(e.type==="polyline"&&e.isClosed&&!e.rotation&&Sf(e)){const f=e.points.map(h=>h.x),d=e.points.map(h=>h.y);return{command:"create_rectangle",coords:[Math.min(...f),Math.min(...d),Math.max(...f),Math.max(...d)].map(_e),options:n}}if(e.rotation!==0&&(e.type==="image"||e.type==="bitmap")){const f=n.comment?n.comment+`
`:"";n.comment=`${f}Tkinter не підтримує обертання для цього об'єкта. Він буде відображений без обертання.`}const o=f=>{if("dash"in f&&f.dash){const d=f.strokeWidth>0?f.strokeWidth:1;n.dash=f.dash.map(m=>_e(m*d)),"dashoffset"in f&&f.dashoffset&&(n.dashoffset=_e(f.dashoffset))}if(f.arrow&&f.arrow!=="none"&&f.arrowshape&&(n.arrow=f.arrow,f.arrowshape)){const[d,m,h]=f.arrowshape,g=f.strokeWidth>0?f.strokeWidth:1;n.arrowshape=[_e(d*g),_e(m*g),_e(h*g)]}"activeStroke"in f&&f.activeStroke&&(n.activefill=f.activeStroke),f.capstyle&&(n.capstyle=f.capstyle)};if((e.type==="bezier"||e.type==="polyline")&&e.smooth){n.smooth=!0,"splinesteps"in e&&e.splinesteps&&(n.splinesteps=e.splinesteps),o(e);let f=e.points;if(e.rotation!==0){const h=Tt(e);h&&(f=e.points.map(g=>Je(g,h,e.rotation)))}const d=f.flatMap(h=>[_e(h.x),_e(h.y)]);return{command:e.isClosed?"create_polygon":"create_line",points:d,options:n}}if(!("rotation"in e)||e.rotation===0||e.type==="ellipse"&&e.isAspectRatioLocked)switch(e.type){case"rectangle":return{command:"create_rectangle",coords:[_e(e.x),_e(e.y),_e(e.x+e.width),_e(e.y+e.height)],options:n};case"ellipse":return{command:"create_oval",coords:[_e(e.cx-e.rx),_e(e.cy-e.ry),_e(e.cx+e.rx),_e(e.cy+e.ry)],options:n};case"arc":return n.start=_e(e.start),n.extent=_e(e.extent),e.style!=="pieslice"&&(n.style=e.style),e.style==="arc"&&n.fill&&n.fill!==e.stroke&&delete n.fill,o(e),{command:"create_arc",coords:[_e(e.x),_e(e.y),_e(e.x+e.width),_e(e.y+e.height)],options:n};case"image":return n.image=t.get(e.id),{command:"create_image",coords:[_e(e.x+e.width/2),_e(e.y+e.height/2)],options:n};case"bitmap":return n.bitmap=e.bitmapType,n.foreground=e.foreground,n.background=e.background,{command:"create_bitmap",coords:[_e(e.x+e.width/2),_e(e.y+e.height/2)],options:n}}if(e.type==="arc"&&e.rotation!==0&&e.width===e.height)return n.start=_e(e.start+e.rotation),n.extent=_e(e.extent),e.style!=="pieslice"&&(n.style=e.style),e.style==="arc"&&(n.outline&&n.fill&&n.fill!==n.outline||n.fill&&!n.outline)&&delete n.fill,o(e),{command:"create_arc",coords:[_e(e.x),_e(e.y),_e(e.x+e.width),_e(e.y+e.height)],options:n};const c=Hn(e);if(!c||c.length<2)return null;"smooth"in e&&e.smooth&&(n.smooth=!0,"splinesteps"in e&&e.splinesteps&&(n.splinesteps=e.splinesteps)),(e.type==="line"||e.type==="bezier"||e.type==="polyline"||e.type==="arc"||e.type==="pencil")&&o(e);const u=c.flatMap(f=>[_e(f.x),_e(f.y)]);return i?{command:"create_line",points:u,options:n}:{command:"create_polygon",points:u,options:n}}function AR(e,t,n,i,o,l,c,u){const f=JSON.stringify(e,null,2),d=u?`6.  **AUTO-COMMENTS:** If a command has NO \`comment\` field, you MUST generate a brief, descriptive English comment about the shape (e.g., "# A large red circle for the background"). This comment MUST be placed on a new line immediately BEFORE the corresponding \`${c}.create_...\` call.`:"6.  **AUTO-COMMENTS:** Auto-generation is disabled. DO NOT generate any comments unless a `comment` field is provided.";return`You are a Python Tkinter code generation engine. Your task is to convert a JSON array of drawing commands into a simple, flat Python script.

**CRITICAL RULES:**
1.  **SCRIPT MUST BE FLAT:** Do NOT use functions, classes, loops, or any complex structures.
2.  **ONE COMMAND, ONE LINE:** For EACH object in the input JSON, you MUST generate EXACTLY ONE \`${c}.create_...\` line.
3.  **SPECIAL VALUES:**
    - 'arrow' values ('first', 'last', 'both') MUST be passed as lowercase strings (e.g. arrow="first").
    - 'style' values for arcs ('chord', 'arc') MUST be passed as lowercase strings (e.g. style="chord"). The 'pieslice' style is omitted from the JSON as it's the default.
4.  **DIRECT OPTIONS:** Include all provided options (\`fill\`, \`outline\`, \`width\`, \`smooth\`, \`state\`, \`text\`, \`font\`, \`angle\`, etc.) directly in the corresponding \`${c}.create_...\` call.
5.  **COORDINATES RULE:** Coordinates from the \`coords\` and \`points\` fields MUST be written directly into the function call as arguments. DO NOT use intermediate variables (e.g., \`points_1 = [...]\`).
${d}
7.  **USER COMMENTS:** If a \`comment\` field exists, you MUST add it as a Python comment. For multi-line comments, each line MUST start with '# '. The entire comment block MUST be placed on new lines immediately BEFORE the corresponding \`${c}.create_...\` call. This rule has HIGHER PRIORITY than the auto-comment rule.
8.  **TAGS (ID):** If a \`tags\` field exists (containing the shape ID), you MUST append its content as a comment at the very END of the \`${c}.create_...\` line (e.g., \`# ID:some-id\`).
9.  **IMAGES:** If \`imageData\` is present, use the provided \`imageSetupCode\` and the corresponding \`imageId\` to create the image variable.
10. **NO EXTRA CODE:** Do not add any logic, calculations, or variables not explicitly required by these rules.

**TEMPLATE:**
The final script must follow this exact structure.

\`\`\`python
from tkinter import *
# [Insert image setup code here if provided]

root = Tk()
root.title("${l}")
root.geometry("${t}x${n}")

${c} = Canvas(root, width=${t}, height=${n}, bg="${i}")
${c}.pack()

# [Insert generated ${c}.create_... lines here]

root.mainloop()
\`\`\`

**TASK DATA:**

**Image Setup Code (if any):**
\`\`\`python
${o||"# No images to set up."}
\`\`\`

**JSON Drawing Commands:**
\`\`\`json
${f}
\`\`\`

Generate the complete, runnable Python Tkinter script based on the template and data provided, strictly following all rules.
`}async function kR(e,t,n,i,o,l,c){var b,S,E,x;if(!xd)throw new Error("Ключ Gemini API не налаштовано. Будь ласка, використовуйте локальний генератор.");const u=l.trim()||"c",f=e.filter(y=>y.type==="image"),d=new Map;let m="";const h=new Map;f.length>0&&(m+=`from PIL import Image, ImageTk
`,m+=`import base64
`,m+=`import io

`,f.forEach((y,C)=>{const v=`img_photo_${C}`,A=y.src.split(",")[1],_=`"""###PLACEHOLDER_FOR_IMAGE_${C}###"""`;m+=`img_data_${C} = base64.b64decode(${_})
`,m+=`img_pil_${C} = Image.open(io.BytesIO(img_data_${C}))
`,m+=`${v} = ImageTk.PhotoImage(img_pil_${C})
`,h.set(y.id,v),d.set(_,`b'${A}'`)}));const g=e.map(y=>MR(y,h)).filter(y=>y!==null),p=AR(g,t,n,i,m,o,u,c);try{const y=await xd.models.generateContent({model:"gemini-2.5-flash",contents:p}),C=y.text;if(!C){const _=(S=(b=y.candidates)==null?void 0:b[0])==null?void 0:S.finishReason,N=(x=(E=y.candidates)==null?void 0:E[0])==null?void 0:x.safetyRatings;let V=`Відповідь від API була порожньою або заблокована. Причина: ${_||"Невідомо"}.`;if(_==="SAFETY"){const q=N==null?void 0:N.find(U=>U.blocked);q?V=`Генерацію заблоковано через налаштування безпеки (категорія: ${q.category}). Спробуйте змінити текст або інші елементи.`:V="Генерацію заблоковано через налаштування безпеки. Спробуйте змінити вхідні дані."}throw console.error("Gemini API returned no text.",{finishReason:_,safetyRatings:N}),new Error(V)}let v;const A=C.match(/```python\n([\s\S]*?)\n```/);A&&A[1]?v=A[1].trim():v=C.trim();for(const[_,N]of d.entries())v=v.replace(_,N);return v}catch(y){throw console.error("Error calling Gemini API:",y),y instanceof Error?y.message.includes("Відповідь від API")||y.message.includes("Генерацію заблоковано")?y:new Error(`Помилка API: ${y.message}`):new Error("Невідома помилка під час виклику API Gemini.")}}const nt=e=>Math.round(e*100)/100,yn=e=>{const t=Object.entries(e).filter(([,n])=>n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)).map(([n,i])=>{if(typeof i=="string"){if(["first","last","both","pieslice","chord","arc","miter","round","bevel","butt","projecting","normal","hidden","disabled"].includes(i))return`${n}="${i}"`;const o=i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return`${n}="${o}"`}return Array.isArray(i)?`${n}=(${i.join(", ")})`:`${n}=${i}`});return t.length>0?`, ${t.join(", ")}`:""},_R=e=>e.name||Bt(e);function NR(e,t,n){if(e.state==="hidden")return null;const i={},o=e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed||e.type==="arc"&&e.style==="arc";if(e.state!=="normal"&&(i.state=e.state),"fill"in e&&e.fill!=="none"&&!o&&(i.fill=e.fill),e.stroke!=="none"&&e.strokeWidth>0&&(i.width=nt(e.strokeWidth),o?i.fill=e.stroke:i.outline=e.stroke),"joinstyle"in e&&e.joinstyle&&(i.joinstyle=e.joinstyle),"stipple"in e&&e.stipple&&"fill"in e&&e.fill!=="none"&&(i.stipple=e.stipple),"dash"in e&&e.dash){const d=e.strokeWidth>0?e.strokeWidth:1;i.dash=e.dash.map(m=>nt(m*d)),"dashoffset"in e&&e.dashoffset!==void 0&&(i.dashoffset=nt(e.dashoffset))}const l=d=>{if(d.arrow&&d.arrow!=="none"&&d.arrowshape){i.arrow=d.arrow;const m=d.strokeWidth>0?d.strokeWidth:1;i.arrowshape=d.arrowshape.map(h=>nt(h*m))}d.capstyle&&(i.capstyle=d.capstyle)};if((e.type==="bezier"||e.type==="polyline")&&e.smooth){i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps),l(e);let d=e.points;if(e.rotation!==0){const h=Tt(e);h&&(d=e.points.map(g=>Je(g,h,e.rotation)))}const m=d.flatMap(h=>[nt(h.x),nt(h.y)]).join(", ");return e.isClosed?`${n}.create_polygon(${m}${yn(i)})`:`${n}.create_line(${m}${yn(i)})`}if((e.type==="line"||e.type==="bezier"||e.type==="polyline"||e.type==="arc"||e.type==="pencil")&&l(e),e.type==="text"){const d=[e.font,Math.round(e.fontSize)];e.weight==="bold"&&d.push("bold"),e.slant==="italic"&&d.push("italic"),e.underline&&d.push("underline"),e.overstrike&&d.push("overstrike"),i.font=d.join(" "),i.text=e.text,e.fill!=="none"&&(i.fill=e.fill),i.anchor=e.anchor,e.width>0&&(i.width=nt(e.width)),e.justify&&(i.justify=e.justify),e.rotation!==0&&(i.angle=nt(e.rotation)),e.stipple&&e.fill!=="none"&&(i.stipple=e.stipple);const m=[nt(e.x),nt(e.y)].join(", ");return`${n}.create_text(${m}${yn(i)})`}if(e.type==="image"){i.image=t.get(e.id);const d=[nt(e.x+e.width/2),nt(e.y+e.height/2)].join(", ");let m=`${n}.create_image(${d}${yn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(e.type==="bitmap"){i.bitmap=e.bitmapType,i.foreground=e.foreground,i.background=e.background;const d=[nt(e.x+e.width/2),nt(e.y+e.height/2)].join(", ");let m=`${n}.create_bitmap(${d}${yn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(!("rotation"in e)||e.rotation===0||e.type==="ellipse"&&e.isAspectRatioLocked)switch(e.type){case"rectangle":const d=e,m=[d.x,d.y,d.x+d.width,d.y+d.height].map(nt).join(", ");return`${n}.create_rectangle(${m}${yn(i)})`;case"ellipse":const h=e,g=[h.cx-h.rx,h.cy-h.ry,h.cx+h.rx,h.cy+h.ry].map(nt).join(", ");return`${n}.create_oval(${g}${yn(i)})`;case"arc":const p=e;i.start=nt(p.start),i.extent=nt(p.extent),p.style!=="pieslice"&&(i.style=p.style),p.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const b=[p.x,p.y,p.x+p.width,p.y+p.height].map(nt).join(", ");return`${n}.create_arc(${b}${yn(i)})`}if(e.type==="arc"&&e.rotation!==0){const d=e;if(d.width===d.height){i.start=nt(d.start+d.rotation),i.extent=nt(d.extent),d.style!=="pieslice"&&(i.style=d.style),d.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const m=[d.x,d.y,d.x+d.width,d.y+d.height].map(nt).join(", ");return`${n}.create_arc(${m}${yn(i)})`}}if(e.type==="polyline"&&e.isClosed&&!e.rotation&&Sf(e)){const d=e.points.map(g=>g.x),m=e.points.map(g=>g.y),h=[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)].map(nt).join(", ");return`${n}.create_rectangle(${h}${yn(i)})`}const u=Hn(e);if(!u||u.length<2)return null;"smooth"in e&&e.smooth&&(i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps));const f=u.flatMap(d=>[nt(d.x),nt(d.y)]).join(", ");return o?`${n}.create_line(${f}${yn(i)})`:`${n}.create_polygon(${f}${yn(i)})`}async function Bg(e,t,n,i,o,l,c){const u=l.trim()||"c",f=e.filter(g=>g.type==="image"),d=new Map;let m="";f.length>0&&(m+=`from PIL import Image, ImageTk
`,m+=`import base64
`,m+=`import io

`,f.forEach((g,p)=>{const b=`img_photo_${p}`,S=g.src.split(",")[1];m+=`img_data_${p} = base64.b64decode(b'${S}')
`,m+=`img_pil_${p} = Image.open(io.BytesIO(img_data_${p}))
`,m+=`${b} = ImageTk.PhotoImage(img_pil_${p})
`,d.set(g.id,b)}),m+=`
`);const h=[];return h.push({content:"from tkinter import *",shapeId:null}),m.trim()&&(h.push({content:`
# --- Image setup ---`,shapeId:null}),m.split(`
`).forEach(g=>h.push({content:g,shapeId:null}))),h.push({content:"",shapeId:null}),h.push({content:"root = Tk()",shapeId:null}),h.push({content:`root.title("${o}")`,shapeId:null}),h.push({content:`root.geometry("${t}x${n}")`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:`${u} = Canvas(root, width=${t}, height=${n}, bg="${i}")`,shapeId:null}),h.push({content:`${u}.pack()`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:"# --- Фігури (Об'єкти) ---",shapeId:null}),e.length===0?h.push({content:"# Об'єкти для малювання відсутні",shapeId:null}):e.forEach(g=>{const p=NR(g,d,u);if(p){let b=g.comment;c&&!b&&(b=_R(g)),b&&b.split(`
`).forEach(S=>{h.push({content:S.trim()===""?"#":`# ${S}`,shapeId:g.id})}),h.push({content:p,shapeId:g.id})}}),h.push({content:"",shapeId:null}),h.push({content:"root.mainloop()",shapeId:null}),Promise.resolve({codeLines:h})}const RR=e=>{const[t,n]=M.useState("canvas"),i=o=>{let l=o.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(l)&&(l="_"+l),e.setCanvasVarName(l)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e.onClose,children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:o=>o.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Налаштування"}),s.jsx("button",{onClick:e.onClose,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:s.jsx(Nn,{})})]}),s.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n("canvas"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="canvas"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Полотно"}),s.jsx("button",{onClick:()=>n("grid"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="grid"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Сітка"}),s.jsx("button",{onClick:()=>n("appearance"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="appearance"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Вигляд"}),s.jsx("button",{onClick:()=>n("generator"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="generator"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Генератор"})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[t==="canvas"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Розмір полотна"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasWidth",children:"Ширина:"}),s.jsx(Ee,{id:"canvasWidth",value:e.canvasWidth,onChange:e.setCanvasWidth,min:100,step:10})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasHeight",children:"Висота:"}),s.jsx(Ee,{id:"canvasHeight",value:e.canvasHeight,onChange:e.setCanvasHeight,min:100,step:10})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasVarName",children:"Назва полотна:"}),s.jsx("input",{id:"canvasVarName",type:"text",value:e.canvasVarName,onChange:o=>i(o.target.value),onBlur:o=>{o.target.value.trim()===""&&e.setCanvasVarName("c")},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsx("div",{className:"pl-28 -mt-3",children:s.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Тло"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasBgColor",children:"Колір тла:"}),s.jsx(qt,{id:"canvasBgColor",value:e.canvasBgColor,onChange:e.setCanvasBgColor,onPreview:e.setPreviewCanvasBgColor,onCancel:()=>e.setPreviewCanvasBgColor(null)})]})]}),t==="grid"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Налаштування сітки"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"gridSize",children:"Крок сітки:"}),s.jsx(Ee,{id:"gridSize",value:e.gridSize,onChange:e.setGridSize,min:1,step:1})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"gridSnapStep",children:"Крок прив'язки:"}),s.jsx(Ee,{id:"gridSnapStep",value:e.gridSnapStep,onChange:e.setGridSnapStep,min:1,step:1})]})]}),t==="appearance"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Інтерфейс"}),s.jsxs("div",{className:"flex items-start pt-2",children:[s.jsx("input",{id:"showTkinterNames",type:"checkbox",checked:e.showTkinterNames,onChange:o=>e.setShowTkinterNames(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("label",{htmlFor:"showTkinterNames",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати назви команд Tkinter",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:'Наприклад: "Прямокутник [rectangle]".'})]})]}),s.jsxs("div",{className:"flex items-start pt-2",children:[s.jsx("input",{id:"showLineNumbers",type:"checkbox",checked:e.showLineNumbers,onChange:o=>e.setShowLineNumbers(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("label",{htmlFor:"showLineNumbers",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати номери рядків",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає нумерацію рядків у вікні коду."})]})]}),s.jsxs("div",{className:"flex items-start pt-2",children:[s.jsx("input",{id:"showAxes",type:"checkbox",checked:e.showAxes,onChange:o=>e.setShowAxes(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("label",{htmlFor:"showAxes",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати лінійки",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає лінійки зліва та зверху від полотна."})]})]}),s.jsxs("div",{className:"flex items-start pt-2",children:[s.jsx("input",{id:"showCursorCoords",type:"checkbox",checked:e.showCursorCoords,onChange:o=>e.setShowCursorCoords(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("label",{htmlFor:"showCursorCoords",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати координати біля курсора",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає координати X/Y поруч з курсором."})]})]}),s.jsxs("div",{className:"flex items-start pt-2",children:[s.jsx("input",{id:"showRotationAngle",type:"checkbox",checked:e.showRotationAngle,onChange:o=>e.setShowRotationAngle(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("label",{htmlFor:"showRotationAngle",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати кут при обертанні",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає кут у підказці біля курсора."})]})]}),s.jsxs("label",{htmlFor:"highlightCodeOnSelection",className:"flex items-start pt-2 has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed",children:[s.jsx("input",{id:"highlightCodeOnSelection",type:"checkbox",checked:e.highlightCodeOnSelection,onChange:o=>e.setHighlightCodeOnSelection(o.target.checked),disabled:e.generatorType==="gemini",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Підсвічувати код при виділенні",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Автоматично виділяти рядок коду, що відповідає вибраній фігурі."})]})]})]}),t==="generator"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Метод генерації коду"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[s.jsx("input",{type:"radio",name:"generatorType",value:"local",checked:e.generatorType==="local",onChange:()=>e.setGeneratorType("local"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Локальний генератор"}),s.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Генерує код Tkinter безпосередньо у вашому браузері.",s.jsx("br",{}),s.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Миттєво, працює офлайн, безкоштовно. Рекомендовано для більшості випадків."]})]})]}),s.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[s.jsx("input",{type:"radio",name:"generatorType",value:"gemini",checked:e.generatorType==="gemini",onChange:()=>e.setGeneratorType("gemini"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Gemini API"}),s.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Надсилає опис малюнка до Google AI для генерації коду.",s.jsx("br",{}),s.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Потенціал для складніших завдань у майбутньому (напр. оптимізація коду).",s.jsx("br",{}),s.jsx("strong",{className:"text-[var(--destructive-text)]",children:"Недоліки:"})," Повільніше, вимагає інтернет та API ключ."]})]})]})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsxs("label",{htmlFor:"autoGenerateComments",className:"flex items-start pt-2",children:[s.jsx("input",{id:"autoGenerateComments",type:"checkbox",checked:e.autoGenerateComments,onChange:o=>e.setAutoGenerateComments(o.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Автоматично генерувати коментарі",s.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Генерує описовий коментар для кожної фігури, якщо ви не додали власний."})]})]})]})]}),s.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:s.jsx("button",{onClick:e.onClose,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})},Ai=e=>e.map(t=>`${t.x},${t.y}`).join(" "),DR=({projectName:e,shapes:t,width:n,height:i,backgroundColor:o,onClose:l})=>{const c=d=>{if("rotation"in d&&d.rotation&&d.rotation!==0){const m=d.type==="text"?{x:d.x,y:d.y}:Tt(d);if(m)return`rotate(${d.rotation} ${m.x} ${m.y})`}},u=M.useMemo(()=>{const d=new Map;return t.forEach(m=>{if(m&&(m.type==="line"||m.type==="bezier"||m.type==="polyline"&&!m.isClosed)&&m.arrow&&m.arrow!=="none"&&m.stroke!=="none"&&m.strokeWidth>0&&m.arrowshape){const[h,g,p]=m.arrowshape,b=m.strokeWidth,S=h*b,E=g*b,x=p*b,y=JSON.stringify({color:m.stroke,shape:[S,E,x]});d.has(y)||d.set(y,{color:m.stroke,shapeParams:[S,E,x]})}}),Array.from(d.values())},[t]),f=d=>{const m=d.joinstyle??"miter";return{strokeLinejoin:m,strokeMiterlimit:m==="miter"?10:void 0}};return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:l,children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl flex flex-col max-w-full max-h-full",onClick:d=>d.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-2 px-4 border-b border-[var(--border-primary)] bg-[var(--bg-app)] rounded-t-lg flex-shrink-0",children:[s.jsxs("h2",{className:"text-sm font-bold text-[var(--text-primary)] truncate",title:`Попередній перегляд: ${e}`,children:["Попередній перегляд: ",e]}),s.jsx("button",{onClick:l,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:s.jsx(Nn,{})})]}),s.jsx("div",{className:"p-4 bg-[var(--bg-secondary)]/50 overflow-auto",children:s.jsxs("svg",{width:n,height:i,style:{backgroundColor:o,boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},className:"rounded-md flex-shrink-0",children:[s.jsxs("defs",{children:[s.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"3",height:"3",fill:"black"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray12",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),s.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"black"}),s.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray25",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),s.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"black"}),s.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),s.jsx("mask",{id:"mask-gray50",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[s.jsx("rect",{width:"2",height:"2",fill:"white"}),s.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),s.jsx("mask",{id:"mask-gray75",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),s.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:s.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),s.jsx("mask",{id:"mask-bitmap-error",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),s.jsx("mask",{id:"mask-bitmap-hourglass",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-info",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-questhead",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-question",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),s.jsx("mask",{id:"mask-bitmap-warning",children:s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),u.map(({color:d,shapeParams:m})=>{const[h,g,p]=m;if(h<=0||g<=0)return null;const b=`${d.replace(/[^a-zA-Z0-9]/g,"")}-${h}-${g}-${p}`;return s.jsxs(kt.Fragment,{children:[s.jsx("marker",{id:`arrow-end-${b}`,viewBox:`0 0 ${h} ${g}`,refX:h,refY:g/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:g,orient:"auto",children:s.jsx("path",{d:`M 0,0 L ${h},${g/2} L 0,${g} L ${p},${g/2} z`,fill:d})}),s.jsx("marker",{id:`arrow-start-${b}`,viewBox:`0 0 ${h} ${g}`,refX:h,refY:g/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:g,orient:"auto-start-reverse",children:s.jsx("path",{d:`M 0,0 L ${h},${g/2} L 0,${g} L ${p},${g/2} z`,fill:d})})]},b)})]}),s.jsx("rect",{x:"0",y:"0",width:n,height:i,fill:o}),t.map(d=>{if(!d||d.state==="hidden")return null;const m={stroke:d.stroke,strokeWidth:d.strokeWidth,style:{opacity:d.state==="disabled"?.5:1},transform:c(d)},h=g=>{const p=g.stroke!=="none"&&g.strokeWidth>0;let b;if("dash"in g&&g.dash&&g.dash.length>0&&g.strokeWidth>0){const v="capstyle"in g&&g.capstyle?g.capstyle:"butt";b=g.dash.map((A,_)=>_%2===0&&A<=2?v==="round"?.01:g.strokeWidth:A*g.strokeWidth).join(" ")}const E="dashoffset"in g?g.dashoffset:void 0,x=(g.capstyle==="projecting"?"square":g.capstyle)??"butt";let y,C;if(p&&g.arrow&&g.arrow!=="none"&&g.arrowshape){const[v,A,_]=g.arrowshape,N=g.strokeWidth,V=v*N,q=A*N,U=_*N,D=`${g.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${V}-${q}-${U}`;(g.arrow==="first"||g.arrow==="both")&&(y=`url(#arrow-start-${D})`),(g.arrow==="last"||g.arrow==="both")&&(C=`url(#arrow-end-${D})`)}return{strokeDasharray:b,strokeDashoffset:E,markerStart:y,markerEnd:C,strokeLinecap:x}};switch(d.type){case"rectangle":{const p={...m,x:d.x,y:d.y,width:d.width,height:d.height,fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("rect",{...p},d.id)}case"ellipse":{const p=d,b={...m,cx:p.cx,cy:p.cy,rx:p.rx,ry:p.ry,fill:p.fill};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(S=>S*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),s.jsx("ellipse",{...b},p.id)}case"arc":{const p=d,b={...m,d:vf(p),fill:p.style==="arc"?"none":p.fill,...h(p)};return p.stipple&&p.fill!=="none"&&p.style!=="arc"&&(b.mask=`url(#mask-${p.stipple})`),s.jsx("path",{...b},d.id)}case"line":return s.jsx("line",{...m,x1:d.points[0].x,y1:d.points[0].y,x2:d.points[1].x,y2:d.points[1].y,...h(d)},d.id);case"bezier":const g=d.isClosed?d.fill:"none";return s.jsx("path",{...m,d:fl(d.points,d.smooth,d.isClosed),fill:g,...h(d),...f(d)},d.id);case"pencil":return s.jsx("path",{...m,d:bf(d.points),fill:"none",strokeLinecap:"round",...f(d),...h(d)},d.id);case"polyline":{const p={...m,...f(d)};return d.stipple&&d.isClosed&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),d.isClosed?p.fill=d.fill:(p.fill="none",Object.assign(p,h(d))),d.smooth?s.jsx("path",{...p,d:fl(d.points,!0,d.isClosed)},d.id):d.isClosed?s.jsx("polygon",{...p,points:Ai(d.points)},d.id):s.jsx("polyline",{...p,points:Ai(d.points),fill:"none"},d.id)}case"triangle":{const p={...m,points:Ai(Fr(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("polygon",{...p},d.id)}case"right-triangle":{const p={...m,points:Ai(Cf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("polygon",{...p},d.id)}case"rhombus":{const p={...m,points:Ai(Tf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("polygon",{...p},d.id)}case"trapezoid":{const p={...m,points:Ai(Xa(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("polygon",{...p},d.id)}case"parallelogram":{const p={...m,points:Ai(Wa(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),s.jsx("polygon",{...p},d.id)}case"polygon":case"star":{const p=d,b={...m,fill:p.fill,...f(p)};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(S=>S*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),p.smooth?s.jsx("path",{...b,d:fl(Hn(d),!0,!0)},d.id):s.jsx("polygon",{...b,points:Ai(Al(d))},d.id)}case"text":{const p=d,{font:b,fontSize:S,weight:E,slant:x,underline:y,overstrike:C,fill:v,justify:A}=p,_=Ka(p),N=So(p);if(!N)return null;const V=A==="center"?"middle":A==="right"?"end":"start";let q;V==="start"?q=N.x:V==="middle"?q=N.x+N.width/2:q=N.x+N.width,p.width>0&&(V==="middle"?q=N.x+p.width/2:V==="end"?q=N.x+p.width:q=N.x);const U={fontFamily:Ef(b),fontSize:S,fontWeight:E,fontStyle:x==="italic"?"italic":"normal",textDecoration:`${y?"underline":""} ${C?"line-through":""}`.trim(),whiteSpace:"pre"};return s.jsx("text",{...m,x:q,y:N.y,fill:v,textAnchor:V,dominantBaseline:"hanging",style:{...m.style,...U},children:_.map((D,Z)=>s.jsx("tspan",{x:q,dy:Z===0?0:`${S*1.2}px`,children:D},Z))},p.id)}case"image":{const p=d;return s.jsx("image",{href:p.src,x:p.x,y:p.y,width:p.width,height:p.height,...m},p.id)}case"bitmap":{const p=d,{x:b,y:S,width:E,height:x,bitmapType:y,foreground:C,background:v}=p,A=y.startsWith("gray")?`url(#mask-${y})`:`url(#mask-bitmap-${y})`;return s.jsxs("g",{...m,children:[s.jsx("rect",{x:b,y:S,width:E,height:x,fill:v}),s.jsx("rect",{x:b,y:S,width:E,height:x,fill:C,mask:A})]},p.id)}default:return null}})]})})]})})},jR=({onClose:e,onExport:t})=>{const[n,i]=M.useState("png"),[o,l]=M.useState(1),[c,u]=M.useState(90),f=()=>{t({format:n,scale:o,quality:c})},d=({value:m,label:h})=>s.jsx("button",{onClick:()=>i(m),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition ${n===m?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:h});return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:m=>m.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Експортувати зображення"}),s.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:s.jsx(Nn,{})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"format-group",title:"Оберіть формат файлу для експорту.",children:"Формат:"}),s.jsxs("div",{id:"format-group",className:"flex items-center gap-2 mt-2 p-1 bg-[var(--bg-app)] rounded-lg",children:[s.jsx(d,{value:"svg",label:"SVG"}),s.jsx(d,{value:"png",label:"PNG"}),s.jsx(d,{value:"jpeg",label:"JPEG"})]})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"export-scale",title:"Множник розміру зображення. 2x зробить зображення вдвічі більшим.",children:"Масштаб:"}),s.jsx(Ee,{id:"export-scale",value:o,onChange:l,min:.1,max:10,step:.1})]}),n==="jpeg"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"export-quality",title:"Якість стиснення JPEG від 0 (низька) до 100 (висока).",children:"Якість:"}),s.jsx(Ee,{id:"export-quality",value:c,onChange:u,min:0,max:100,step:1})]}),s.jsx("div",{className:"flex items-center gap-2 ml-32",children:s.jsx("input",{type:"range",min:"0",max:"100",value:c,onChange:m=>u(Number(m.target.value)),className:"w-full h-2 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer"})})]})]}),s.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:s.jsx("button",{onClick:f,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Експорт"})})]})})},IR=({onClose:e,onCreate:t,initialSettings:n})=>{const[i,o]=M.useState(n.projectName),[l,c]=M.useState(n.width),[u,f]=M.useState(n.height),[d,m]=M.useState(n.bgColor),[h,g]=M.useState(n.canvasVarName),p=()=>{t({projectName:i,width:l,height:u,bgColor:d,canvasVarName:h.trim()||"c"})},b=S=>{let E=S.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(E)&&(E="_"+E),g(E)};return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:S=>S.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Новий проєкт"}),s.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:s.jsx(Nn,{})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"projectName",children:"Назва проєкту:"}),s.jsx("input",{id:"projectName",type:"text",value:i,onChange:S=>o(S.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),s.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Налаштування полотна"}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasWidth",children:"Ширина:"}),s.jsx(Ee,{id:"canvasWidth",value:l,onChange:c,min:100,step:10})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasHeight",children:"Висота:"}),s.jsx(Ee,{id:"canvasHeight",value:u,onChange:f,min:100,step:10})]}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasVarName",children:"Назва полотна:"}),s.jsx("input",{id:"canvasVarName",type:"text",value:h,onChange:S=>b(S.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),s.jsx("div",{className:"pl-28 -mt-3",children:s.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"canvasBgColor",children:"Колір тла:"}),s.jsx(qt,{id:"canvasBgColor",value:d,onChange:m,onPreview:()=>{},onCancel:()=>{}})]})]}),s.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[s.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),s.jsx("button",{onClick:p,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Створити"})]})]})})},UR=({isOpen:e,onClose:t,onConfirm:n,title:i,message:o,confirmText:l="Продовжити",cancelText:c="Скасувати"})=>e?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:i}),s.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:s.jsx(Nn,{})})]}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-[var(--text-secondary)]",children:o})}),s.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:c}),s.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:l})]})]})}):null,LR=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=M.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як..."}),s.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:s.jsx(Nn,{})})]}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"newProjectName",children:"Назва проєкту:"}),s.jsx("input",{id:"newProjectName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),s.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),s.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},PR=({isOpen:e,onClose:t})=>e?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:n=>n.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:'Про редактор "ВереTkа"'}),s.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:s.jsx(Nn,{})})]}),s.jsxs("div",{className:"p-6 space-y-4 text-sm text-[var(--text-secondary)]",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це простий векторний редактор, призначений для швидкого створення графічних примітивів та генерації відповідного Python коду для бібліотеки Tkinter."]}),s.jsx("p",{children:"Він використовує локальний генератор коду для миттєвого та надійного результату, а також може використовувати Google Gemini API для експериментальних можливостей."}),s.jsx("hr",{className:"border-[var(--border-secondary)]"}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Автор ідеї та розробник:"})," Віталій Кушнір"]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Доопрацювання та підтримка:"})," AI-асистент на базі Google Gemini."]}),s.jsxs("p",{className:"mt-2",children:["Створено за допомогою ",s.jsx("a",{href:"https://aistudio.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"AI Studio Google"}),"."]})]}),s.jsx("p",{className:"text-xs text-center text-[var(--text-tertiary)] pt-4",children:"Версія 1.0.3"})]}),s.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})}):null,VR=(e,t)=>{const[n,i]=M.useState(e);return M.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},$R=({isOpen:e,onClose:t})=>{if(!e)return null;const n=M.useRef(null),[i,o]=M.useState(""),l=VR(i,300),[c,u]=M.useState(0),[f,d]=M.useState(-1),m=[{id:"intro",title:"1. Вступ"},{id:"interface",title:"2. Огляд інтерфейсу"},{id:"projects",title:"3. Робота з проєктами"},{id:"shapes",title:"4. Робота з об'єктами"},{id:"code-export",title:"5. Код та експорт"},{id:"hotkeys",title:"6. Гарячі клавіші"}],h=(v,A)=>{var N;v.preventDefault();const _=(N=n.current)==null?void 0:N.querySelector(`#${A}`);_&&_.scrollIntoView({behavior:"smooth",block:"start"})};M.useEffect(()=>{if(!n.current)return;if(!l.trim()){u(0),d(-1);return}const v=n.current.querySelectorAll("mark");u(v.length),d(v.length>0?0:-1)},[l]),M.useEffect(()=>{if(!n.current||f===-1)return;const v=Array.from(n.current.querySelectorAll("mark"));v.length!==0&&v.forEach((A,_)=>{_===f?(A.classList.add("bg-orange-500","text-white"),A.classList.remove("bg-yellow-400/80","text-black"),A.scrollIntoView({behavior:"smooth",block:"center"})):(A.classList.remove("bg-orange-500","text-white"),A.classList.add("bg-yellow-400/80","text-black"))})},[f,l]);const g=()=>{c!==0&&d(v=>(v+1)%c)},p=()=>{c!==0&&d(v=>(v-1+c)%c)},b=(v,A)=>{if(typeof v=="string")return A.trim()?v.split(new RegExp(`(${A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((N,V)=>N.toLowerCase()===A.toLowerCase()?s.jsx("mark",{className:"bg-yellow-400/80 text-black px-0.5 rounded-sm",children:N},V):N):v;if(kt.isValidElement(v)){const _=v;if(_.props.children)return kt.cloneElement(_,{..._.props,children:kt.Children.map(_.props.children,N=>b(N,A))})}return Array.isArray(v)?v.map((_,N)=>s.jsx(kt.Fragment,{children:b(_,A)},N)):v},S=({id:v,children:A})=>s.jsx("h2",{id:v,className:"text-xl font-bold text-[var(--text-primary)] mt-6 mb-3 pb-2 border-b border-[var(--border-secondary)] scroll-mt-4",children:b(A,l)}),E=({children:v})=>s.jsx("h3",{className:"text-md font-semibold text-[var(--text-primary)] mt-4 mb-2",children:b(v,l)}),x=({children:v})=>s.jsx("p",{className:"mb-2 leading-relaxed",children:b(v,l)}),y=({children:v})=>s.jsx("code",{className:"bg-[var(--bg-tertiary)] text-sm text-[var(--text-primary)] px-1.5 py-0.5 rounded-md font-mono",children:v}),C=({children:v})=>s.jsx("li",{className:"mb-2 pl-2",children:b(v,l)});return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Довідка та інструкції"}),s.jsxs("div",{className:"flex-grow mx-4 max-w-sm relative",children:[s.jsx("input",{type:"search",placeholder:"Пошук у довідці...",value:i,onChange:v=>o(v.target.value),className:"w-full px-3 py-1.5 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-md border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"}),l.trim()&&s.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center text-xs text-[var(--text-tertiary)] bg-[var(--bg-secondary)] pl-2",children:c>0?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"font-mono",children:[f+1,"/",c]}),s.jsx("button",{onClick:p,className:"p-1 hover:text-[var(--text-primary)]",title:"Попередній","aria-label":"Попередній результат",children:"▲"}),s.jsx("button",{onClick:g,className:"p-1 hover:text-[var(--text-primary)]",title:"Наступний","aria-label":"Наступний результат",children:"▼"})]}):s.jsx("span",{className:"px-1",children:"Не знайдено"})})]}),s.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:s.jsx(Nn,{})})]}),s.jsxs("div",{className:"flex flex-grow min-h-0",children:[s.jsx("nav",{className:"w-64 flex-shrink-0 border-r border-[var(--border-secondary)] p-4 overflow-y-auto",children:s.jsx("ul",{className:"space-y-1",children:m.map(v=>s.jsx("li",{children:s.jsx("a",{href:`#${v.id}`,onClick:A=>h(A,v.id),className:"block text-sm p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:v.title})},v.id))})}),s.jsxs("div",{ref:n,className:"flex-grow p-6 text-sm text-[var(--text-secondary)] overflow-y-auto scroll-smooth",children:[s.jsxs("section",{children:[s.jsx(S,{id:"intro",children:"1. Вступ"}),s.jsxs(x,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це професійний веб-інструмент, розроблений для візуального створення графічних елементів та автоматичної генерації коду для бібліотеки Tkinter у Python. Редактор слугує мостом між дизайном та розробкою, дозволяючи швидко прототипувати, створювати складні сцени та отримувати чистий, готовий до використання код."]}),s.jsx(x,{children:"Ця інструкція допоможе вам освоїти всі можливості редактора, від базових операцій до просунутих технік."})]}),s.jsxs("section",{children:[s.jsx(S,{id:"interface",children:"2. Огляд інтерфейсу"}),s.jsx(x,{children:"Інтерфейс редактора логічно поділений на функціональні зони для максимальної зручності:"}),s.jsxs("ul",{className:"list-decimal list-inside space-y-3 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Головне меню:"})," Розташоване у верхній частині, надає доступ до глобальних операцій: керування файлами (",s.jsx(y,{children:"Файл"}),"), історія змін та робота з буфером обміну (",s.jsx(y,{children:"Редагувати"}),"), операції над об'єктами (",s.jsx(y,{children:"Об'єкт"}),"), налаштування видимості (",s.jsx(y,{children:"Вигляд"}),") та довідкова інформація (",s.jsx(y,{children:"Довідка"}),")."]}),s.jsxs(C,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Панелі інструментів:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Верхня панель:"})," Динамічна панель, що відображає налаштування для активного інструмента (наприклад, колір заливки для прямокутника) або властивості виділеного об'єкта. Це дозволяє швидко змінювати параметри, не звертаючись до правої панелі."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ліва панель:"})," Основний набір інструментів для створення фігур. Згруповані за типом: примітиви, лінії та криві, багатокутники та інше."]})]})]}),s.jsxs(C,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Робоча область:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Полотно (Canvas):"})," Центральна зона для малювання. Його розмір та колір тла налаштовуються."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Лінійки (Rulers):"})," Горизонтальна та вертикальна лінійки допомагають точно позиціонувати об'єкти."]})]})]}),s.jsxs(C,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Бічні панелі:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Ліва панель (Код):"})," Відображає згенерований Python код. При використанні локального генератора код оновлюється в реальному часі. Меню у заголовку панелі дозволяє налаштовувати вигляд коду, зберігати його та запускати онлайн."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Права панель (Об'єкти та Властивості):"}),s.jsxs("ul",{children:[s.jsxs("li",{children:["- ",s.jsx("strong",{children:"Список об'єктів:"})," Ієрархічний перелік усіх фігур на полотні. Об'єкти у верхній частині списку знаходяться на передньому плані (вищі шари)."]}),s.jsxs("li",{children:["- ",s.jsx("strong",{children:"Редактор властивостей:"})," Потужна панель, де ви можете точно налаштувати кожен аспект виділеного об'єкта: від його назви, координат та розмірів до стилів заливки, контуру та унікальних параметрів (наприклад, кутів дуги або кількості сторін багатокутника). Для контурів тут доступний редактор координат вузлів."]})]})]})]})]}),s.jsxs(C,{children:[s.jsx("strong",{className:"text-[var(--text-primary)]",children:"Рядок стану:"})," Внизу робочої області. Показує рівень масштабування та точні координати курсора на полотні."]})]})]}),s.jsxs("section",{children:[s.jsx(S,{id:"projects",children:"3. Робота з проєктами"}),s.jsxs(x,{children:["ВереTkа працює з проєктами, що зберігаються у файлах формату ",s.jsx(y,{children:".vec.json"}),". Цей файл містить повну інформацію про ваші об'єкти, налаштування полотна та інтерфейсу."]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Створення нового проєкту:"})," Через меню ",s.jsx(y,{children:"Файл → Новий проєкт..."}),". Ви можете задати назву, розміри полотна, колір тла та назву змінної для полотна у коді (напр., ",s.jsx(y,{children:"canvas"}),")."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Збереження:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[s.jsxs("li",{children:[s.jsx(y,{children:"Файл → Зберегти"})," (",s.jsx(y,{children:"Ctrl+S"}),'): Зберігає зміни у поточний відкритий файл. Якщо проєкт новий, відкриється діалог "Зберегти як".']}),s.jsxs("li",{children:[s.jsx(y,{children:"Файл → Зберегти як..."}),": Дозволяє зберегти проєкт у новий файл з новою назвою."]})]})]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Завантаження:"})," Використовуйте ",s.jsx(y,{children:"Файл → Завантажити проєкт..."}),' або виберіть проєкт зі списку "Останні проєкти" на головному екрані.']})]})]}),s.jsxs("section",{children:[s.jsx(S,{id:"shapes",children:"4. Робота з об\\'єктами"}),s.jsx(E,{children:"Створення та стилізація"}),s.jsx(x,{children:'Виберіть інструмент на лівій панелі. На верхній панелі встановіть базові параметри: колір заливки та контуру, товщину лінії. Малювання відбувається шляхом затискання лівої кнопки миші на полотні та розтягування. Для багатьох інструментів доступні два режими малювання (перемикаються на верхній панелі): "Від кута" та "Від центру".'}),s.jsx(E,{children:"Виділення та трансформація"}),s.jsxs(x,{children:['Активуйте інструмент "Вибрати" (',s.jsx(y,{children:"V"}),")."]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Виділення:"})," Клацніть на об'єкті. Для виділення кількох об'єктів у майбутньому буде додана рамка виділення."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Переміщення:"})," Перетягуйте виділений об'єкт. Для точного переміщення використовуйте ",s.jsx(y,{children:"клавіші-стрілки"})," (утримуючи ",s.jsx(y,{children:"Shift"})," для переміщення на 10 пікселів за раз)."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Масштабування:"})," Потягніть за квадратні маніпулятори на рамці виділення. Щоб зберегти пропорції, заблокуйте їх у редакторі властивостей (",s.jsx(y,{children:"Пропорції: 🔒"}),")."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Обертання:"})," Потягніть за круглий маніпулятор, що з'являється над рамкою виділення. Точний кут можна встановити в редакторі властивостей."]})]}),s.jsx(E,{children:"Просунуте редагування"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Дублювання перетягуванням:"})," Швидко створюйте копії, перетягуючи об'єкт із затиснутою ",s.jsx("strong",{children:"правою кнопкою миші"}),"."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Редагування тексту на полотні:"})," Двічі клацніть на текстовому об'єкті, щоб почати редагування безпосередньо на полотні. Щоб завершити, клацніть поза полем або натисніть ",s.jsx(y,{children:"Enter"}),"."]}),s.jsxs(C,{children:[s.jsxs("strong",{children:["Редагування вузлів (",s.jsx(y,{children:"A"}),"):"]})," Це потужний режим для зміни форми об'єкта. Виділіть об'єкт і перейдіть у цей режим.",s.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[s.jsx("li",{children:"Переміщуйте існуючі вузли, щоб змінити контур."}),s.jsx("li",{children:"Клацніть на сегменті лінії, щоб додати новий вузол."}),s.jsxs("li",{children:["Виділіть вузол (клацніть по ньому) і натисніть ",s.jsx(y,{children:"Delete"}),", щоб видалити."]}),s.jsx("li",{children:'Координати вузлів можна точно налаштувати в редакторі властивостей у вкладці "Вузли".'})]})]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Перетворення на контур:"})," Будь-який примітив (прямокутник, еліпс, зірка) можна перетворити на полілінію для детального редагування вузлів. Для цього виділіть об'єкт і виберіть ",s.jsx(y,{children:"Об'єкт → Перетворити на контур"}),". Ця дія незворотня."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Спеціальні маніпулятори:"})," Деякі фігури, такі як Зірка, Трапеція, Трикутник, мають додаткові маніпулятори (жовті) для керування їх унікальними властивостями (напр., внутрішній радіус зірки або зсув вершини трикутника)."]})]}),s.jsx(E,{children:"Керування у Списку об'єктів"}),s.jsx(x,{children:`Права панель "Об'єкти" — це ваш центр керування шарами.`}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Порядок (Шари):"})," Перетягуйте об'єкти у списку для зміни їх порядку накладання. Верхні елементи списку знаходяться на передньому плані."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Видимість:"})," Клацніть на іконку ока, щоб тимчасово приховати об'єкт."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Перейменування:"})," Двічі клацніть на назві, щоб дати об'єкту змістовне ім'я, яке буде використано в коментарях до коду."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Блокування:"})," (Функціонал у розробці) Дозволить заблокувати об'єкт від випадкових змін."]})]}),s.jsx(E,{children:"Панель властивостей: Точний контроль"}),s.jsx(x,{children:`Коли об'єкт виділено, панель "Властивості" надає повний контроль над усіма його параметрами:`}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Загальні:"})," Редагуйте назву об'єкта (вона використовується в коментарях до коду), його стан (звичайний, прихований, вимкнений) та додавайте багаторядкові коментарі, які будуть включені у згенерований код."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Геометрія:"})," Встановлюйте точні координати (",s.jsx(y,{children:"X"}),", ",s.jsx(y,{children:"Y"}),"), ширину, висоту та кут обертання. Важливо розрізняти ",s.jsx("strong",{className:"text-[var(--text-primary)]",children:"геометричні"})," розміри (без урахування обертання) та ",s.jsx("strong",{className:"text-[var(--text-primary)]",children:"візуальні"})," (габаритна рамка з урахуванням обертання). Зміна геометричних розмірів відбувається відносно центру фігури."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Заливка та Контур:"})," Повне керування кольором, товщиною, стилем штрихування (пунктир), стилем з'єднання кутів та патернами заповнення (stipple)."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Вузли:"})," Для поліліній, кривих та об'єктів, перетворених на контур, ця вкладка дозволяє вводити точні числові координати для кожного вузла. Координати відображаються з урахуванням обертання фігури, що відповідає їх реальній позиції на полотні."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Унікальні властивості:"})," Для специфічних фігур з'являються додаткові параметри, такі як кути дуги, кількість сторін багатокутника, зсув вершини трикутника, кут нахилу паралелограма тощо."]})]})]}),s.jsxs("section",{children:[s.jsx(S,{id:"code-export",children:"5. Код та експорт"}),s.jsx(E,{children:"Генерація коду"}),s.jsxs(x,{children:["Основна функція редактора. Налаштування генератора знаходяться в меню ",s.jsx(y,{children:"Налаштування → Генератор"}),"."]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"Локальний генератор (рекомендовано):"})," Генерує код миттєво, надійно та працює без інтернету. Код у лівій панелі оновлюється при кожній зміні, що ідеально для ітеративної розробки. Підтримує підсвітку коду при виділенні фігури."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Gemini API:"}),` Використовує штучний інтелект Google для генерації. Потребує інтернет-з'єднання та ключ API. Може бути корисним для експериментів. Генерація запускається вручну кнопкою "Згенерувати код".`]}),s.jsxs(C,{children:[s.jsx("strong",{children:"Коментарі до коду:"})," Ви можете додавати власні коментарі до кожної фігури у панелі властивостей. Також можна увімкнути опцію ",s.jsx("strong",{className:"text-[var(--text-primary)]",children:'"Автоматично генерувати коментарі"'})," у налаштуваннях генератора. Вона додасть описовий коментар до кожної фігури, для якої ви не вказали власний."]})]}),s.jsxs(x,{children:["Згенерований код можна скопіювати, зберегти у файл (",s.jsx(y,{children:".py"}),') або одразу запустити в онлайн-середовищі "ЄPython" за допомогою кнопок у меню вікна коду. У цьому ж меню ви можете налаштувати видимість коментарів та номерів рядків.']}),s.jsx(E,{children:"Експорт"}),s.jsxs(x,{children:["Експортуйте вашу роботу як зображення через ",s.jsx(y,{children:"Файл → Експортувати як..."}),"."]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[s.jsxs(C,{children:[s.jsx("strong",{children:"SVG:"})," Векторний формат. Ідеально для масштабування без втрати якості та подальшого редагування в інших векторних редакторах."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"PNG:"})," Растровий формат з підтримкою прозорості. Підходить для веб-графіки."]}),s.jsxs(C,{children:[s.jsx("strong",{children:"JPEG:"})," Растровий формат з втратою якості. Гарний вибір для фотографій та складних градієнтів, дозволяє контролювати розмір файлу."]})]}),s.jsx(x,{children:"Для PNG та JPEG можна налаштувати масштаб експорту, щоб отримати зображення вищої роздільної здатності."})]}),s.jsxs("section",{children:[s.jsx(S,{id:"hotkeys",children:"6. Гарячі клавіші"}),s.jsxs(x,{children:["Гарячі клавіші працюють незалежно від поточної розкладки клавіатури (наприклад, ",s.jsx(y,{children:"V"})," для вибору спрацює, навіть якщо у вас ввімкнена українська розкладка, де ця клавіша відповідає літері ",s.jsx(y,{children:"М"}),")."]}),s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 border-b-2 border-[var(--border-secondary)] w-1/3",children:"Комбінація"}),s.jsx("th",{className:"p-2 border-b-2 border-[var(--border-secondary)]",children:"Дія"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Ctrl"})," + ",s.jsx(y,{children:"S"})]}),s.jsx("td",{className:"p-2",children:"Зберегти проєкт"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Ctrl"})," + ",s.jsx(y,{children:"Z"})]}),s.jsx("td",{className:"p-2",children:"Скасувати останню дію"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Ctrl"})," + ",s.jsx(y,{children:"Y"})," (або ",s.jsx(y,{children:"Ctrl"})," + ",s.jsx(y,{children:"Shift"})," + ",s.jsx(y,{children:"Z"}),")"]}),s.jsx("td",{className:"p-2",children:"Повернути скасовану дію"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Ctrl"})," + ",s.jsx(y,{children:"D"})]}),s.jsx("td",{className:"p-2",children:"Дублювати виділений об'єкт"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Delete"})," / ",s.jsx(y,{children:"Backspace"})]}),s.jsx("td",{className:"p-2",children:"Видалити виділений об'єкт або вузол"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsx("td",{className:"p-2",children:s.jsx(y,{children:"V"})}),s.jsx("td",{className:"p-2",children:'Активувати інструмент "Вибрати"'})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsx("td",{className:"p-2",children:s.jsx(y,{children:"A"})}),s.jsx("td",{className:"p-2",children:'Активувати інструмент "Редагувати вузли"'})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsx("td",{className:"p-2",children:s.jsx(y,{children:"Стрілки"})}),s.jsx("td",{className:"p-2",children:"Перемістити виділений об'єкт на 1 піксель"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsxs("td",{className:"p-2",children:[s.jsx(y,{children:"Shift"})," + ",s.jsx(y,{children:"Стрілки"})]}),s.jsx("td",{className:"p-2",children:"Перемістити виділений об'єкт на 10 пікселів"})]}),s.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[s.jsx("td",{className:"p-2",children:s.jsx(y,{children:"Escape"})}),s.jsx("td",{className:"p-2",children:"Скасувати малювання полілінії/кривої, вийти з редагування назви або тексту на полотні"})]})]})]})]})]})]}),s.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end flex-shrink-0",children:s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})};function ru(e,t,n){const i=e instanceof Blob?e:new Blob([e],{type:n}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}async function HR(){if(typeof window.showOpenFilePicker!="function")return null;try{const[e]=await window.showOpenFilePicker({types:[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}]}),n=await(await e.getFile()).text();return{handle:e,content:n}}catch(e){const t=e;if(t.name==="AbortError"||t.name==="SecurityError")return console.log(`File picker failed gracefully: ${t.name}. Falling back.`),null;throw e}}async function e0(e,t){const n=await e.createWritable();await n.write(t),await n.close()}async function lr(e,t,n,i){if(typeof window.showSaveFilePicker=="function")try{const o=await window.showSaveFilePicker({suggestedName:t,types:n});return await e0(o,e),o}catch(o){const l=o;return l.name==="AbortError"||l.name==="SecurityError"?(console.log(`File picker failed gracefully (${l.name}), falling back to download.`),ru(e,t,i),null):(console.error("Unexpected error with File System Access API, falling back to download:",o),ru(e,t,i),null)}else return ru(e,t,i),null}function BR(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function FR(e){if(e.state==="hidden")return"";const t=u=>{if("rotation"in u&&u.rotation&&u.rotation!==0){const f=u.type==="text"?{x:u.x,y:u.y}:Tt(u);if(f)return`transform="rotate(${u.rotation} ${f.x} ${f.y})"`}return""},n=u=>{let f=`stroke="${u.stroke}" stroke-width="${u.strokeWidth}" ${t(u)}`;return u.state==="disabled"&&(f+=' opacity="0.5"'),f},i=u=>u.fill==="none"?'fill="none"':"stipple"in u&&u.stipple?`fill="url(#pattern-${u.stipple}-fill)"`:`fill="${u.fill}"`,o=u=>{const f=u.joinstyle??"miter";return`stroke-linejoin="${f}" ${f==="miter"?'stroke-miterlimit="10"':""}`},l=u=>{let f=`stroke-linecap="${(u.capstyle==="projecting"?"square":u.capstyle)??"butt"}"`;if("dash"in u&&u.dash&&u.dash.length>0&&u.strokeWidth>0&&(f+=` stroke-dasharray="${u.dash.map(d=>d*u.strokeWidth).join(" ")}"`,"dashoffset"in u&&u.dashoffset&&(f+=` stroke-dashoffset="${u.dashoffset}"`)),u.arrow&&u.arrow!=="none"&&u.arrowshape){const[d,m,h]=u.arrowshape,g=u.strokeWidth>0?u.strokeWidth:1,p=`${u.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${d*g}-${m*g}-${h*g}`;(u.arrow==="first"||u.arrow==="both")&&(f+=` marker-start="url(#arrow-start-${p})"`),(u.arrow==="last"||u.arrow==="both")&&(f+=` marker-end="url(#arrow-end-${p})"`)}return f},c=Hn(e);if(!c)return"";switch(e.type){case"rectangle":return`<rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${n(e)} ${i(e)} ${o(e)} />`;case"ellipse":return`<ellipse cx="${e.cx}" cy="${e.cy}" rx="${e.rx}" ry="${e.ry}" ${n(e)} ${i(e)} />`;case"image":return`<image href="${e.src}" x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${t(e)} />`;case"bitmap":return`<g ${t(e)}><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="${e.background}" /><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="url(#pattern-bitmap-${e.bitmapType}-fill)" /></g>`;case"text":{if(!So(e))return"";const f=()=>["n","ne","nw"].includes(e.anchor)?"hanging":["w","center","e"].includes(e.anchor)?"middle":"alphabetic",d=e.justify==="center"?"middle":e.justify==="right"?"end":"start",m=`font-family='${Ef(e.font)}' font-size='${e.fontSize}px' font-weight='${e.weight}' font-style='${e.slant==="italic"?"italic":"normal"}'`,h=`text-decoration='${e.underline?"underline":""} ${e.overstrike?"line-through":""}'`,p=Ka(e).map((b,S)=>{let E=0;return e.justify==="center"&&e.width>0&&(E=e.width/2),e.justify==="right"&&e.width>0&&(E=e.width),`<tspan x="${e.x+E}" dy="${S===0?"0":`${e.fontSize*1.2}px`}">${BR(b)}</tspan>`}).join("");return`<text x="${e.x}" y="${e.y}" ${t(e)} dominant-baseline="${f()}" text-anchor="${d}" fill="${e.fill}" ${m} ${h} style="white-space: pre">${p}</text>`}case"arc":{const u=e.style==="arc"?"none":e.fill;return`<path d="${vf(e)}" ${n(e)} fill="${u}" ${l(e)} />`}default:{const u=c.map((h,g)=>`${g===0?"M":"L"}${h.x},${h.y}`).join(" "),f=e.type!=="line"&&e.type!=="pencil"&&!(e.type==="polyline"&&!e.isClosed)&&!(e.type==="bezier"&&!e.isClosed),d=`${u} ${f?"Z":""}`,m=f&&"fill"in e?i(e):'fill="none"';return`<path d="${d}" ${n(e)} ${m} ${l(e)} ${o(e)} />`}}}function zR(e,t,n,i){const o=new Set,l=new Set,c=new Map;e.forEach(g=>{if(g&&("stipple"in g&&g.stipple&&o.add(g.stipple),g.type==="bitmap"&&l.add(g.bitmapType),(g.type==="line"||g.type==="bezier"||g.type==="polyline"||g.type==="arc")&&g.arrow&&g.arrow!=="none"&&g.stroke!=="none"&&g.strokeWidth>0&&g.arrowshape)){const[p,b,S]=g.arrowshape,E=g.strokeWidth>0?g.strokeWidth:1,x=`${g.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${p*E}-${b*E}-${S*E}`;c.has(x)||c.set(x,{color:g.stroke,shapeParams:[p*E,b*E,S*E]})}});const u=Array.from(o).map(g=>g==="gray12"?`<pattern id="pattern-gray12-fill" width="3" height="3" patternUnits="userSpaceOnUse"><rect width="3" height="3" fill="${i}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#333":"#000"}"/></pattern>`:g==="gray25"?`<pattern id="pattern-gray25-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#444":"#000"}"/></pattern>`:g==="gray50"?`<pattern id="pattern-gray50-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/></pattern>`:g==="gray75"?`<pattern id="pattern-gray75-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i==="#fff"?"#000":"#fff"}"/><rect x="1" y="1" width="1" height="1" fill="${i}"/></pattern>`:"").join(`
`),f=Array.from(l).map(g=>`<pattern id="pattern-bitmap-${g}-fill" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M0,0 L8,8 M8,0 L0,8" stroke="currentColor" stroke-width="1" shape-rendering="crispEdges"/></pattern>`).join(`
`),d=Array.from(c.values()).map(({color:g,shapeParams:p})=>{const[b,S,E]=p;if(b<=0||S<=0)return"";const x=`${g.replace(/[^a-zA-Z0-9]/g,"")}-${b}-${S}-${E}`;return`
            <marker id="arrow-end-${x}" viewBox="0 0 ${b} ${S}" refX="${b}" refY="${S/2}" markerUnits="userSpaceOnUse" markerWidth="${b}" markerHeight="${S}" orient="auto">
                <path d="M 0,0 L ${b},${S/2} L 0,${S} L ${E},${S/2} z" fill="${g}" />
            </marker>
            <marker id="arrow-start-${x}" viewBox="0 0 ${b} ${S}" refX="0" refY="${S/2}" markerUnits="userSpaceOnUse" markerWidth="${b}" markerHeight="${S}" orient="auto-start-reverse">
                <path d="M ${b},0 L 0,${S/2} L ${b},${S} L ${b-E},${S/2} z" fill="${g}" />
            </marker>`}).join(`
`),m=`<defs>${u}${f}${d}</defs>`,h=e.map(FR).join(`
`);return`<svg width="${t}" height="${n}" viewBox="0 0 ${t} ${n}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        ${m}
        <rect x="0" y="0" width="${t}" height="${n}" fill="${i}" />
        ${h}
    </svg>`}async function GR(e,t,n,i,o,l){return new Promise((c,u)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)return u(new Error("Не вдалося отримати контекст canvas."));const m=n*o,h=i*o;f.width=m,f.height=h;const g=new Image;g.onload=()=>{d.drawImage(g,0,0,m,h);const S=e==="png"?"image/png":"image/jpeg",E=f.toDataURL(S,l/100);c(E)},g.onerror=S=>{console.error("Помилка завантаження SVG в зображення:",S),u(new Error("Не вдалося завантажити SVG для конвертації."))};const p=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p);g.src=b})}const On=24,Fg=(e,t)=>{if(t<=0)return 100;const n=e/t,i=Math.floor(Math.log10(n)),o=Math.pow(10,i),l=n/o;let c;return l<1.5?c=1:l<3.5?c=2:l<7.5?c=5:c=10,c*o},zg=({orientation:e,transform:t,length:n,canvasSize:i})=>{const o=e==="horizontal",l=o?n:On,c=o?On:n,u=M.useMemo(()=>{if(n<=0)return[];const f=Fg(60,t.scale),d=Fg(15,t.scale),m=o?-t.x/t.scale:-t.y/t.scale,h=m+n/t.scale,g=[],p=Math.floor(m/d)*d,b=2e3;let S=0;for(let E=p;E<=h&&S<b;E+=d){S++;const x=o?i.width:i.height;if(E<0||E>x)continue;const y=E*t.scale+(o?t.x:t.y);if(y<0||y>n)continue;const C=d/100,v=Math.abs(E%f)<C;let A,_=null;if(v)A=On,_=(Math.round(E*100)/100).toString();else{if(d*t.scale<5)continue;A=On*.3}g.push({value:_,position:y,tickHeight:A})}return g},[n,t,o,i.width,i.height]);return l<=0||c<=0?null:s.jsx("svg",{width:l,height:c,className:"bg-[var(--ruler-bg)]",children:s.jsx("g",{children:u.map(({value:f,position:d,tickHeight:m},h)=>s.jsxs(kt.Fragment,{children:[s.jsx("line",{x1:o?d:On-m,y1:o?On-m:d,x2:o?d:On,y2:o?On:d,stroke:"var(--ruler-tick)",strokeWidth:1}),f!==null&&s.jsx("text",{x:o?d+4:On/2,y:o?On/2:d+4,fill:"var(--ruler-text)",fontSize:10,textAnchor:o?"start":"middle",dominantBaseline:"middle",children:f})]},`${e}-${d}-${h}`))})})},Gg=.05,qg=30,qR=({zoomLevel:e,cursorPos:t,onZoomChange:n,onResetZoom:i})=>{const o=g=>Math.round(g*100)/100,l=`${Math.round(e*100)}%`,c=Math.log(Gg),f=Math.log(qg)-c,d=g=>{if(f===0)return 0;const p=Math.max(Gg,Math.min(qg,g));return(Math.log(p)-c)/f*100},m=g=>Math.exp(c+f*g/100),h=g=>{const p=m(Number(g.target.value));n(p)};return s.jsxs("div",{className:"bg-[var(--bg-primary)]/80 h-6 flex-shrink-0 px-3 flex items-center justify-between text-xs text-[var(--text-tertiary)] select-none",children:[s.jsx("div",{className:"font-mono w-48",children:t?`X: ${o(t.x)} Y: ${o(t.y)}`:""}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:d(e),onChange:h,className:"w-24 h-1 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--accent-primary)]",title:`Масштаб: ${l}`}),s.jsx("button",{onClick:i,className:"w-12 text-center hover:text-[var(--text-primary)]",title:"Скинути масштаб до 100%",children:l})]})]})},OR=({onCreateNew:e,onLoadProject:t,recentProjects:n,onOpenRecent:i})=>{const o=l=>{const u=Math.round((new Date().getTime()-l.getTime())/1e3),f=Math.floor(u/86400);return f===0?"Сьогодні":f===1?"Вчора":f<7?`${f} дні тому`:l.toLocaleDateString()};return s.jsx("div",{className:"w-full h-full bg-[var(--bg-app)] rounded-lg flex flex-col p-8 sm:p-12 lg:p-16 overflow-y-auto",children:s.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[s.jsxs("header",{className:"text-center mb-12 animate-fade-in-down",children:[s.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"ВереTkа"}),s.jsxs("div",{className:"mt-4 max-w-2xl mx-auto",children:[s.jsx("p",{className:"text-xl md:text-2xl text-[var(--text-secondary)] font-medium italic",children:"Перетворюйте ваші малюнки на готовий код для Tkinter."}),s.jsx("hr",{className:"my-4 border-[var(--border-secondary)] w-1/2 mx-auto"}),s.jsxs("p",{className:"text-md text-[var(--text-tertiary)] mt-2",children:["Простий векторний редактор ",s.jsx("br",{}),"із функцією швидкої генерації коду Python (Tkinter) на основі ваших малюнків."]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16 animate-fade-in-up",children:[s.jsxs("button",{onClick:e,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[s.jsx(rS,{size:32,className:"text-indigo-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Створити новий проєкт"}),s.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Почати з чистого полотна та нових ідей."})]})]}),s.jsxs("button",{onClick:t,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[s.jsx(sS,{size:32,className:"text-purple-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Завантажити проєкт"}),s.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Відкрити існуючий файл .vec.json."})]})]})]}),s.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(aS,{size:20,className:"text-[var(--text-tertiary)]"}),s.jsx("h2",{className:"text-xl font-semibold text-[var(--text-secondary)]",children:"Останні проєкти"})]}),n.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((l,c)=>s.jsxs("button",{onClick:()=>i(l),className:"w-full h-32 flex flex-col justify-between p-4 rounded-md bg-[var(--bg-primary)] hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-200 ease-in-out text-left group",children:[s.jsx("p",{className:"font-semibold text-[var(--text-primary)] break-words line-clamp-2",title:l.name.replace(/\.vec\.json$/,""),children:l.name.replace(/\.vec\.json$/,"")}),s.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-2",children:["Відкрито: ",o(new Date(l.lastOpened))]})]},l.name+c))}):s.jsxs("div",{className:"text-center text-[var(--text-tertiary)] py-10 border-2 border-dashed border-[var(--border-primary)] rounded-lg",children:[s.jsx("p",{children:"Список останніх проєктів порожній."}),s.jsx("p",{className:"text-xs mt-1",children:"Почніть роботу, створивши або завантаживши проєкт."})]})]})]})})},YR="VeretkaDB",JR=1,il="recentProjects",XR=10;let su=null;const Og=()=>(su||(su=new Promise((e,t)=>{const n=indexedDB.open(YR,JR);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const i=n.result;i.objectStoreNames.contains(il)||i.createObjectStore(il,{keyPath:"name"})}})),su),WR=()=>{const[e,t]=M.useState([]),n=M.useCallback(async()=>{try{const f=(await Og()).transaction(il,"readonly").objectStore(il).getAll();f.onsuccess=()=>{const d=f.result;d.sort((m,h)=>h.lastOpened.getTime()-m.lastOpened.getTime()),t(d)},f.onerror=()=>{console.error("Could not load recent projects from DB:",f.error)}}catch(l){console.error("Failed to open IndexedDB:",l)}},[]);M.useEffect(()=>{typeof indexedDB<"u"&&n()},[n]);const i=M.useCallback(async l=>{if(!(!l||typeof indexedDB>"u"))try{const u=(await Og()).transaction(il,"readwrite"),f=u.objectStore(il),d={name:l.name,handle:l,lastOpened:new Date};f.put(d);const m=f.getAll();m.onsuccess=()=>{if(m.result.length>XR){const h=m.result;h.sort((p,b)=>p.lastOpened.getTime()-b.lastOpened.getTime());const g=h[0].name;f.delete(g)}},u.oncomplete=()=>{n()}}catch(c){console.error("Failed to add recent project:",c)}},[n]),o=M.useCallback(async l=>{try{if(await l.handle.queryPermission({mode:"read"})!=="granted"&&await l.handle.requestPermission({mode:"read"})!=="granted")throw new Error("Permission to read file was denied.");const u=await(await l.handle.getFile()).text();return await i(l.handle),u}catch(c){throw console.error(`Failed to open recent project ${l.name}:`,c),c}},[i]);return{projects:e,addRecentProject:i,openRecentProject:o}},KR=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=M.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:s.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[s.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти код як..."}),s.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:s.jsx(Nn,{})})]}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs(ne,{children:[s.jsx(ae,{htmlFor:"codeFileName",children:"Назва файлу:"}),s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("input",{id:"codeFileName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-l px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0}),s.jsx("span",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-3 py-1 rounded-r border border-l-0 border-[var(--border-secondary)]",children:".py"})]})]})}),s.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),s.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},rr=24,ZR=30,QR=(e,t)=>{M.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},sr=()=>{const[e,t]=M.useState(!1),n=M.useRef(null),i=M.useCallback(()=>t(!1),[]);return QR(n,i),{isOpen:e,toggle:()=>t(c=>!c),close:i,wrapperProps:{ref:n,onMouseLeave:i}}},eD=kt.memo(e=>{const{isOpen:t,toggle:n,close:i,wrapperProps:o}=sr(),{isOpen:l,toggle:c,close:u,wrapperProps:f}=sr(),{isOpen:d,toggle:m,close:h,wrapperProps:g}=sr(),{isOpen:p,toggle:b,close:S,wrapperProps:E}=sr(),{isOpen:x,toggle:y,close:C,wrapperProps:v}=sr(),A=(V,q)=>{V(),q()},_=({onClick:V,children:q,disabled:U,shortcut:D,selected:Z})=>s.jsxs("button",{onClick:V,disabled:U,className:`flex justify-between items-center w-full px-3 py-1.5 text-left text-sm ${Z?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed`,children:[s.jsx("span",{children:q}),D&&s.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:D})]}),N=({checked:V,onChange:q,children:U})=>s.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[s.jsx("input",{type:"checkbox",checked:V,onChange:D=>q(D.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),s.jsx("span",{children:U})]});return s.jsxs("nav",{className:"bg-[var(--bg-primary)] text-sm font-medium flex items-center px-2 select-none h-8 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center",children:[e.isProjectActive&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:e.onGoHome,title:"На головну",className:"px-2 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:s.jsx(dS,{size:18})}),s.jsx("div",{className:"w-px h-5 bg-[var(--border-secondary)] mx-1"})]}),s.jsxs("div",{...o,className:"relative",children:[s.jsx("button",{onClick:n,className:`px-3 py-1 rounded-md ${t?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Файл"}),t&&s.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[s.jsx(_,{onClick:()=>A(e.onNewProject,i),children:"Новий проєкт..."}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(_,{onClick:()=>A(e.onSaveProject,i),disabled:!e.canSave,shortcut:"Ctrl+S",children:"Зберегти"}),s.jsx(_,{onClick:()=>A(e.onSaveProjectAs,i),disabled:!e.isProjectActive,children:"Зберегти як..."}),s.jsx(_,{onClick:()=>A(e.onLoadProject,i),children:"Завантажити проєкт..."}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(_,{onClick:()=>A(e.onExport,i),disabled:!e.isProjectActive,children:"Експортувати як..."}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),e.showGenerateButton&&s.jsx(_,{onClick:()=>A(e.onGenerate,i),disabled:!e.isProjectActive,children:"Згенерувати код..."})]})]}),s.jsxs("div",{...f,className:"relative",children:[s.jsx("button",{onClick:c,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${l?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Редагувати"}),l&&e.isProjectActive&&s.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[s.jsx(_,{onClick:()=>A(e.onUndo,u),disabled:!e.canUndo,shortcut:"Ctrl+Z",children:"Скасувати"}),s.jsx(_,{onClick:()=>A(e.onRedo,u),disabled:!e.canRedo,shortcut:"Ctrl+Y",children:"Повернути"}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(_,{onClick:()=>A(e.onDuplicate,u),disabled:!e.isShapeSelected,shortcut:"Ctrl+D",children:"Дублювати"}),s.jsx(_,{onClick:()=>A(e.onDelete,u),disabled:!e.isShapeSelected,shortcut:"Del",children:"Видалити"})]})]}),s.jsxs("div",{...g,className:"relative",children:[s.jsx("button",{onClick:m,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${d?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Об'єкт"}),d&&e.isProjectActive&&s.jsx("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:s.jsx(_,{onClick:()=>A(e.onConvertToPath,h),disabled:!e.canConvertToPath,children:"Перетворити на контур"})})]}),s.jsxs("div",{...E,className:"relative",children:[s.jsx("button",{onClick:b,className:`px-3 py-1 rounded-md ${p?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Вигляд"}),p&&s.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[s.jsx(_,{onClick:()=>A(e.onFitCanvasToView,S),disabled:!e.isProjectActive,children:"Показати все полотно"}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(N,{checked:e.showGrid,onChange:e.setShowGrid,children:"Сітка"}),s.jsx(N,{checked:e.snapToGrid,onChange:e.setSnapToGrid,children:"Прив'язка до сітки"}),s.jsx(N,{checked:e.showAxes,onChange:e.setShowAxes,children:"Лінійки"}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx("div",{className:"px-3 py-1.5 text-xs text-[var(--text-tertiary)]",children:"Тема"}),s.jsx(_,{onClick:()=>{e.setTheme("dark"),S()},selected:e.theme==="dark",children:"Темна"}),s.jsx(_,{onClick:()=>{e.setTheme("light"),S()},selected:e.theme==="light",children:"Світла"})]})]}),s.jsxs("div",{...v,className:"relative",children:[s.jsx("button",{onClick:y,className:`px-3 py-1 rounded-md ${x?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Довідка"}),x&&s.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[s.jsx(_,{onClick:()=>A(e.onOpenAbout,C),children:"Про редактор"}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(_,{onClick:()=>A(e.onOpenHelp,C),children:"Довідка"}),s.jsx(_,{onClick:()=>{window.open("https://github.com/v-d-b/veretka/issues/new","_blank"),C()},children:"Залишити відгук"}),s.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),s.jsx(_,{onClick:()=>{window.open("https://github.com/v-d-b/veretka","_blank"),C()},children:"Вихідний код на GitHub"})]})]})]}),s.jsx("div",{className:"flex-grow flex justify-center items-center text-sm text-[var(--text-tertiary)] truncate px-4",children:s.jsx("span",{className:"truncate",title:e.projectName,children:e.isProjectActive?e.projectName:""})}),s.jsx("div",{className:"flex items-center",children:s.jsx("div",{className:"relative",children:s.jsx("button",{onClick:e.onOpenSettings,className:"px-3 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:"Налаштування"})})})]})}),tD=kt.memo(({activeTool:e,setActiveTool:t})=>{const i=[{name:"rectangle",label:"Прямокутник",icon:s.jsx(Kx,{size:18}),group:1},{name:"square",label:"Квадрат",icon:s.jsx(Wx,{size:18}),group:1},{name:"ellipse",label:"Еліпс",icon:s.jsx(Qx,{size:18}),group:1},{name:"circle",label:"Коло",icon:s.jsx(Zx,{size:18}),group:1},{name:"line",label:"Лінія",icon:s.jsx(ev,{size:18}),group:2},{name:"polyline",label:"Ламана",icon:s.jsx(tv,{size:18}),group:2},{name:"bezier",label:"Крива Без'є",icon:s.jsx(nv,{size:18}),group:2},{name:"arc",label:"Дуга",icon:s.jsx(fv,{size:18}),group:2},{name:"pieslice",label:"Сектор",icon:s.jsx(uv,{size:18}),group:2},{name:"chord",label:"Сегмент",icon:s.jsx(dv,{size:18}),group:2},{name:"polygon",label:"Багатокутник",icon:s.jsx(iv,{size:18}),group:3},{name:"star",label:"Зірка",icon:s.jsx(mv,{size:18}),group:3},{name:"triangle",label:"Трикутник",icon:s.jsx(lv,{size:18}),group:3},{name:"right-triangle",label:"Прямокутний трикутник",icon:s.jsx(rv,{size:18}),group:3},{name:"rhombus",label:"Ромб",icon:s.jsx(sv,{size:18}),group:3},{name:"trapezoid",label:"Трапеція",icon:s.jsx(av,{size:18}),group:3},{name:"parallelogram",label:"Паралелограм",icon:s.jsx(cv,{size:18}),group:3},{name:"text",label:"Текст",icon:s.jsx(hv,{size:18}),group:3},{name:"pencil",label:"Олівець",icon:s.jsx(ov,{size:18}),group:4},{name:"image",label:"Зображення",icon:s.jsx(gv,{size:18}),group:4,disabled:!0},{name:"bitmap",label:"Bitmap",icon:s.jsx(pv,{size:18}),group:4,disabled:!0}];return s.jsx("aside",{className:"bg-[var(--bg-primary)] rounded-lg p-1 flex flex-col items-center",children:s.jsx("div",{className:"grid grid-cols-10 gap-0.5 w-full",role:"group","aria-label":"Інструменти",children:i.map((o,l)=>{const c=l>0?i[l-1].group:-1,u=o.group!==c&&l>0;return s.jsxs(kt.Fragment,{children:[u&&s.jsx("div",{className:"col-span-10 h-px bg-[var(--border-secondary)] my-0.5"}),s.jsx("button",{onClick:()=>t(o.name),"aria-label":o.label,title:o.label,disabled:o.disabled,className:`p-1 rounded-md transition-colors duration-200 aspect-square flex items-center justify-center ${e===o.name?"bg-[var(--accent-primary)] text-[var(--accent-text)] shadow-md":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--accent-text)]"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent`,children:o.icon})]},o.name)})})})}),nD=kt.memo(e=>{const{isGenerating:t,hasShapes:n,onUndo:i,onRedo:o,canUndo:l,canRedo:c,onDuplicate:u,isShapeSelected:f,onOpenMobileLeft:d,onOpenMobileRight:m,theme:h,setTheme:g,selectedShape:p,updateShape:b,setShapePreview:S,cancelShapePreview:E,activeTool:x,setActiveTool:y,onGenerate:C,showGenerateButton:v,onClear:A}=e,_={"Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],Serif:["Times New Roman","Georgia","Garamond"],Monospace:["Courier New","Consolas","Lucida Console","Monaco"]},N=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],V=({label:D,htmlFor:Z,children:be})=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("label",{htmlFor:Z,className:"text-sm font-medium text-[var(--text-secondary)] whitespace-nowrap",children:[D,":"]}),be]}),q=()=>{const{drawMode:D,setDrawMode:Z,isFillEnabled:be,setIsFillEnabled:Ce,fillColor:Se,setFillColor:ee,setPreviewFillColor:de,isStrokeEnabled:xe,setIsStrokeEnabled:Q,strokeColor:O,setStrokeColor:oe,setPreviewStrokeColor:Te,strokeWidth:Me,setStrokeWidth:H,numberOfSides:ve,setNumberOfSides:ce,textColor:Fe,setTextColor:F,setPreviewTextColor:te,textFont:he,setTextFont:T,textFontSize:z,setTextFontSize:X}=e,ge=["rectangle","square","circle","ellipse","triangle","right-triangle","polygon","star","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(x),ye=!["select","edit-points","line","pencil","polyline","bezier","image","bitmap","text"].includes(x),Ne=!["select","edit-points","image","bitmap","text"].includes(x),ze=["polygon","star"].includes(x),Ke=x==="text";return s.jsxs(s.Fragment,{children:[ge&&s.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-app)] p-1 rounded-lg",children:[s.jsx("button",{title:"Малювати від кута",onClick:()=>Z("corner"),className:`p-1.5 rounded ${D==="corner"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(Hb,{})}),s.jsx("button",{title:"Малювати від центру",onClick:()=>Z("center"),className:`p-1.5 rounded ${D==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(Bb,{})})]}),ye&&s.jsxs(V,{label:"Заливка",htmlFor:"fillColor",children:[s.jsx("input",{id:"fillEnable",type:"checkbox",checked:be,onChange:De=>Ce(De.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsx(qt,{id:"fillColor",value:Se,onChange:De=>{ee(De),de(null)},onPreview:de,onCancel:()=>de(null),disabled:!be})]}),Ne&&s.jsxs(s.Fragment,{children:[s.jsxs(V,{label:"Контур",htmlFor:"strokeColor",children:[s.jsx("input",{id:"strokeEnable",type:"checkbox",checked:xe,onChange:De=>Q(De.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsx(qt,{id:"strokeColor",value:O,onChange:De=>{oe(De),Te(null)},onPreview:Te,onCancel:()=>Te(null),disabled:!xe})]}),s.jsx(V,{label:"Товщина",htmlFor:"strokeWidth",children:s.jsx("input",{id:"strokeWidth",type:"number",min:"1",max:"100",value:Me,onChange:De=>H(Number(De.target.value)),disabled:!xe,className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),ze&&s.jsx(V,{label:"Сторони",htmlFor:"sides",children:s.jsx("input",{id:"sides",type:"number",min:"3",max:"50",value:ve,onChange:De=>ce(Number(De.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),Ke&&s.jsxs(s.Fragment,{children:[s.jsx(V,{label:"Колір",htmlFor:"textColor",children:s.jsx(qt,{id:"textColor",value:Fe,onChange:De=>{F(De),te(null)},onPreview:te,onCancel:()=>te(null)})}),s.jsx(V,{label:"Шрифт",htmlFor:"textFont",children:s.jsxs(vn,{id:"textFont",value:he,onChange:T,className:"w-32 py-0.5",children:[Object.entries(_).map(([De,Rn])=>s.jsx("optgroup",{label:De,children:Rn.map(tn=>s.jsx("option",{value:tn,children:tn},tn))},De)),s.jsx("optgroup",{label:"Шрифти Tkinter",children:N.map(De=>s.jsx("option",{value:De,children:De},De))})]})}),s.jsx(V,{label:"Розмір",htmlFor:"textFontSize",children:s.jsx("input",{id:"textFontSize",type:"number",min:"1",value:z,onChange:De=>X(Number(De.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]})]})},U=()=>{if(!p)return null;const D=p,Z=O=>{b({...p,...O})},be=O=>{Z(O?{fill:e.fillColor}:{fill:"none"})},Ce=O=>{Z(O?{stroke:e.strokeColor}:{stroke:"none"})},Se="fill"in p&&p.type!=="text",ee="stroke"in p&&"strokeWidth"in p&&!["image","bitmap","text"].includes(p.type),de=p.type==="polygon"||p.type==="star",xe=p.type==="text",Q=O=>Math.round(O*100)/100;return s.jsxs(s.Fragment,{children:[Se&&s.jsxs(V,{label:"Заливка",htmlFor:`${p.id}-ctx-fill`,children:[s.jsx("input",{type:"checkbox",checked:p.fill!=="none",onChange:O=>be(O.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsx(qt,{id:`${p.id}-ctx-fill`,value:p.fill==="none"?"#000000":p.fill,onChange:O=>Z({fill:O}),onPreview:O=>S(p.id,{fill:O}),onCancel:E,disabled:p.fill==="none"})]}),ee&&s.jsxs(s.Fragment,{children:[s.jsxs(V,{label:"Контур",htmlFor:`${p.id}-ctx-stroke`,children:[s.jsx("input",{type:"checkbox",checked:p.stroke!=="none",onChange:O=>Ce(O.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),s.jsx(qt,{id:`${p.id}-ctx-stroke`,value:p.stroke==="none"?"#ffffff":p.stroke,onChange:O=>Z({stroke:O}),onPreview:O=>S(p.id,{stroke:O}),onCancel:E,disabled:p.stroke==="none"})]}),s.jsx(V,{label:"Товщина",htmlFor:`${p.id}-ctx-strokeWidth`,children:s.jsx("input",{id:`${p.id}-ctx-strokeWidth`,type:"number",min:"0",value:p.strokeWidth,onChange:O=>Z({strokeWidth:Number(O.target.value)}),disabled:p.stroke==="none",className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),de&&s.jsx(V,{label:"Сторони",htmlFor:`${p.id}-ctx-sides`,children:s.jsx("input",{id:`${p.id}-ctx-sides`,type:"number",min:"3",max:"50",value:p.sides,onChange:O=>Z({sides:Number(O.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),xe&&s.jsxs(s.Fragment,{children:[s.jsx(V,{label:"Колір",htmlFor:`${D.id}-ctx-fill`,children:s.jsx(qt,{id:`${D.id}-ctx-fill`,value:D.fill,onChange:O=>Z({fill:O}),onPreview:O=>S(D.id,{fill:O}),onCancel:E})}),s.jsx(V,{label:"Шрифт",htmlFor:`${D.id}-ctx-font`,children:s.jsxs(vn,{id:`${D.id}-ctx-font`,value:D.font,onChange:O=>Z({font:O}),className:"w-32 py-0.5",children:[Object.entries(_).map(([O,oe])=>s.jsx("optgroup",{label:O,children:oe.map(Te=>s.jsx("option",{value:Te,children:Te},Te))},O)),s.jsx("optgroup",{label:"Шрифти Tkinter",children:N.map(O=>s.jsx("option",{value:O,children:O},O))})]})}),s.jsx(V,{label:"Розмір",htmlFor:`${D.id}-ctx-fontSize`,children:s.jsx("input",{id:`${D.id}-ctx-fontSize`,type:"number",min:"1",value:Q(D.fontSize),onChange:O=>Z({fontSize:Number(O.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),s.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[s.jsx("button",{title:"Жирний",onClick:()=>Z({weight:D.weight==="bold"?"normal":"bold"}),className:`p-1.5 rounded ${D.weight==="bold"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(fS,{size:16})}),s.jsx("button",{title:"Курсив",onClick:()=>Z({slant:D.slant==="italic"?"roman":"italic"}),className:`p-1.5 rounded ${D.slant==="italic"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(mS,{size:16})}),s.jsx("button",{title:"Підкреслений",onClick:()=>Z({underline:!D.underline}),className:`p-1.5 rounded ${D.underline?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(hS,{size:16})}),s.jsx("button",{title:"Закреслений",onClick:()=>Z({overstrike:!D.overstrike}),className:`p-1.5 rounded ${D.overstrike?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(gS,{size:16})})]}),s.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[s.jsx("button",{title:"Ліворуч",onClick:()=>Z({justify:"left"}),className:`p-1.5 rounded ${D.justify==="left"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(pS,{size:16})}),s.jsx("button",{title:"Центр",onClick:()=>Z({justify:"center"}),className:`p-1.5 rounded ${D.justify==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(yS,{size:16})}),s.jsx("button",{title:"Праворуч",onClick:()=>Z({justify:"right"}),className:`p-1.5 rounded ${D.justify==="right"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:s.jsx(xS,{size:16})})]})]})]})};return s.jsxs("div",{className:"bg-[var(--bg-primary)] p-2 flex-shrink-0 flex flex-wrap items-center justify-between gap-x-3 gap-y-2 select-none",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{title:"Скасувати (Ctrl+Z)",onClick:i,disabled:!l,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:s.jsx(Vb,{})}),s.jsx("button",{title:"Повернути (Ctrl+Y)",onClick:o,disabled:!c,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:s.jsx($b,{})}),s.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),s.jsx("button",{title:"Вибрати (V)",onClick:()=>y("select"),className:`p-2 rounded-md ${x==="select"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:s.jsx(Jx,{})}),s.jsx("button",{title:"Редагувати вузли (A)",onClick:()=>y("edit-points"),className:`p-2 rounded-md ${x==="edit-points"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:s.jsx(Xx,{})}),s.jsx("button",{title:"Дублювати (Ctrl+D)",onClick:u,disabled:!f,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:s.jsx(yv,{})}),s.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),s.jsx("div",{className:"md:hidden flex items-center gap-2",children:s.jsx("button",{onClick:d,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:s.jsx(Fb,{})})})]}),s.jsx("div",{className:"flex items-center gap-x-2 gap-y-2 flex-wrap",children:p?s.jsx(U,{}):s.jsx(q,{})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>g(h==="dark"?"light":"dark"),title:"Змінити тему",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:h==="dark"?s.jsx(nS,{}):s.jsx(iS,{})}),s.jsx("div",{className:"md:hidden flex items-center gap-2",children:s.jsx("button",{onClick:m,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:s.jsx(rd,{})})}),s.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1 md:hidden"}),s.jsxs("button",{onClick:A,disabled:!n,className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[s.jsx(Za,{size:16}),s.jsx("span",{children:"Очистити"})]}),v&&s.jsxs("button",{onClick:C,disabled:t||!n,className:"flex items-center gap-2 px-4 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[s.jsx(rd,{}),s.jsx("span",{children:t?"Генерація...":"Згенерувати код"})]})]})]})});function iD(){const{state:e,setState:t,undo:n,redo:i,canUndo:o,canRedo:l,reset:c}=_S([]),[u,f]=M.useState("Новий малюнок. ВереTkа"),[d,m]=M.useState("select"),[h,g]=M.useState(null),[p,b]=M.useState(!1),[S,E]=M.useState([]),[x,y]=M.useState(!1),[C,v]=M.useState([]),[A,_]=M.useState(null),[N,V]=M.useState("corner"),[q,U]=M.useState(!1),[D,Z]=M.useState(!0),[be,Ce]=M.useState("#4f46e5"),[Se,ee]=M.useState("#000000"),[de,xe]=M.useState(1),[Q,O]=M.useState(5),[oe,Te]=M.useState("#000000"),[Me,H]=M.useState(null),[ve,ce]=M.useState("Arial"),[Fe,F]=M.useState(24),[te,he]=M.useState([]),[T,z]=M.useState(!1),[X,ge]=M.useState(null),[ye,Ne]=M.useState(null),[ze,Ke]=M.useState(null),[De,Rn]=M.useState(!1),[tn,as]=M.useState(!1),[nc,$l]=M.useState(!1),[ic,Hl]=M.useState(!1),[cs,Qi]=M.useState(!1),[Bl,us]=M.useState(!1),[ds,fs]=M.useState(!1),[ms,nn]=M.useState(!1),[dt,Fl]=M.useState(800),[lt,eo]=M.useState(600),[Nt,w]=M.useState("#ffffff"),[k,Y]=M.useState("c"),[pe,re]=M.useState(!0),[R,$]=M.useState(10),[K,W]=M.useState(!0),[P,fe]=M.useState(1),[I,se]=M.useState(!0),[ie,Le]=M.useState(!0),[Rt,Fn]=M.useState(!0),[$t,hn]=M.useState(!0),[mt,pt]=M.useState(!0),[Ht,Dn]=M.useState(!0),[Pe,rt]=M.useState("local"),[Ae,$e]=M.useState(!0),[He,yt]=M.useState(!0),[wt,Xt]=M.useState({}),[Et,zl]=M.useState(null),[zn,Gl]=M.useState(null),[to,no]=M.useState(null),[Gn,io]=M.useState({scale:1,x:50,y:50}),[oc,lc]=M.useState(null),Ro=M.useRef(null),[gn,rc]=M.useState({width:0,height:0}),[sc,hs]=M.useState(!1),[ac,ei]=M.useState(!1),[n0,cc]=M.useState(null),jf=M.useRef(null),If=M.useRef(null),[Ci,uc]=M.useState("dark"),[Do,jo]=M.useState(null),[gs,dc]=M.useState(null),[on,fc]=M.useState(!1),{projects:i0,addRecentProject:oo,openRecentProject:Uf}=WR();M.useEffect(()=>{document.body.className=`${Ci}-theme bg-[var(--bg-app)] text-[var(--text-primary)] font-sans`},[Ci]),M.useEffect(()=>{Pe==="gemini"&&$e(!1)},[Pe]);const jn=M.useCallback((L,j)=>JSON.stringify({projectName:L,shapes:j,canvasSettings:{width:dt,height:lt,bgColor:Nt,varName:k},uiSettings:{theme:Ci,showGrid:pe,gridSize:R,snapToGrid:K,gridSnapStep:P,showAxes:ie,showCursorCoords:Rt,showRotationAngle:$t,showLineNumbers:mt,showTkinterNames:I,generatorType:Pe,highlightCodeOnSelection:Ae,autoGenerateComments:He,showComments:Ht}}),[dt,lt,Nt,k,Ci,pe,R,K,P,ie,Rt,$t,mt,I,Pe,Ae,He,Ht]),Ti=M.useRef(""),[lo,o0]=M.useState(!1);M.useEffect(()=>{if(!on)return;const L=jn(u,e);Ti.current===""&&(Ti.current=L),o0(L!==Ti.current)},[u,e,jn,on]),M.useEffect(()=>{const L=j=>{lo&&(j.preventDefault(),j.returnValue="")};return window.addEventListener("beforeunload",L),()=>{window.removeEventListener("beforeunload",L)}},[lo]);const l0=M.useMemo(()=>Object.keys(wt).length===0?e:e.map(L=>{const j=wt[L.id];return j?{...L,...j}:L}),[e,wt]),Io=M.useCallback(()=>{Xt({})},[]);M.useEffect(()=>{Io()},[h,Io]);const bi=M.useCallback(()=>{if(gn.width===0||gn.height===0)return;const L=10,j=ie?rr:0,J=gn.width-j,B=gn.height-j;if(J<=0||B<=0)return;const le=J-L*2,me=B-L*2,ke=le/dt,qe=me/lt,xt=Math.min(ke,qe,ZR),ti=dt*xt,In=lt*xt,Lo=(J-ti)/2,Tc=(B-In)/2;io({scale:xt,x:Lo,y:Tc})},[dt,lt,gn,ie]),Lf=M.useRef(!1);M.useEffect(()=>{!Lf.current&&gn.width>0&&gn.height>0&&(bi(),Lf.current=!0)},[gn,bi]),M.useEffect(()=>{const L=Ro.current;if(!L||!on)return;const j=new ResizeObserver(J=>{for(let B of J)rc({width:B.contentRect.width,height:B.contentRect.height})});return j.observe(L),()=>j.disconnect()},[on]);const Ge=(L,j="info",J=3e3)=>{Ne({message:L,type:j}),setTimeout(()=>Ne(null),J)},ql=M.useCallback(L=>{t(j=>[...j,L]),L.type!=="polyline"&&L.type!=="bezier"&&(g(L.id),m("select"))},[t]),Si=M.useCallback(L=>{Io(),t(j=>j.map(J=>J.id===L.id?L:J)),L.id===h&&L.state!=="normal"&&(g(null),_(null))},[t,h,Io]),Pf=M.useCallback((L,j)=>{Xt({[L]:j})},[]),Uo=M.useCallback(L=>{t(j=>j.filter(J=>J.id!==L)),h===L&&(g(null),_(null))},[h,t]),mc=M.useCallback((L,j)=>{t(J=>J.map(B=>{if(B.id===L&&"points"in B&&B.points.length>2){const le=[...B.points];switch(le.splice(j,1),B.type){case"pencil":case"polyline":case"bezier":return{...B,points:le};default:return B}}return B})),_(null)},[t]),r0=M.useCallback((L,j)=>{const J=B=>{if(["polyline","bezier","line","pencil"].includes(B.type))return B;const le=wf(B);if(!le)return null;const me=B.type==="arc"?B.style!=="arc":!0,ke={id:B.id,name:void 0,type:"polyline",points:le,isClosed:me,rotation:"rotation"in B?B.rotation:0,state:B.state,stroke:B.stroke,strokeWidth:B.strokeWidth,fill:"fill"in B&&typeof B.fill=="string"&&me?B.fill:"none",joinstyle:"joinstyle"in B&&B.joinstyle?B.joinstyle:void 0};return ke.name=Bt(ke),ke};t(B=>{const le=B.findIndex(Tc=>Tc.id===L);if(le===-1)return B;let me=B[le],ke=J(me);if(!ke)return B;const qe=[...ke.points],xt=qe[j-1],ti=ke.isClosed?qe[j%qe.length]:qe[j];if(!xt||!ti)return B;const In={x:(xt.x+ti.x)/2,y:(xt.y+ti.y)/2};qe.splice(j,0,In),ke.points=qe;const Lo=[...B];return Lo[le]=ke,Lo}),_(j)},[t]),Ol=M.useCallback(L=>{const j=e.find(le=>le.id===L);if(!j)return;let J;switch(j.type){case"line":J={...j,points:[{...j.points[0]},{...j.points[1]}]};break;case"pencil":case"polyline":case"bezier":J={...j,points:j.points.map(le=>({...le}))};break;default:J={...j}}J.id=new Date().toISOString();const B=10;switch(J.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":J.x+=B,J.y+=B;break;case"ellipse":case"polygon":case"star":J.cx+=B,J.cy+=B;break;case"line":J.points[0].x+=B,J.points[0].y+=B,J.points[1].x+=B,J.points[1].y+=B;break;case"pencil":case"polyline":case"bezier":J.points=J.points.map(le=>({x:le.x+B,y:le.y+B}));break}t(le=>[...le,J]),g(J.id),Ge("Фігуру дубльовано.")},[e,t]),s0=M.useCallback((L,j)=>{t(J=>{const B=J.findIndex(ke=>ke.id===L);if(B===-1)return J;const le=[...J],me=j==="up"?B+1:B-1;return me<0||me>=le.length?J:([le[B],le[me]]=[le[me],le[B]],le)})},[t]),a0=M.useCallback((L,j,J)=>{t(B=>{const le=B.findIndex(In=>In.id===L),me=B.findIndex(In=>In.id===j);if(le===-1||me===-1||le===me)return B;const ke=[...B],[qe]=ke.splice(le,1),xt=ke.findIndex(In=>In.id===j),ti=J==="top"?xt+1:xt;return ke.splice(ti,0,qe),ke})},[t]),hc=M.useCallback(L=>{const j=e.find(qe=>qe.id===L);if(!j||["polyline","bezier","pencil","line","text","image","bitmap"].includes(j.type))return;const J=Hn(j);if(!J)return;const B=j.type!=="arc"||j.style!=="arc",le={id:j.id,name:void 0,type:"polyline",points:J,isClosed:B,rotation:0,state:j.state,stroke:j.stroke,strokeWidth:j.strokeWidth,fill:"fill"in j&&typeof j.fill=="string"&&B?j.fill:"none",joinstyle:"joinstyle"in j&&j.joinstyle?j.joinstyle:void 0,dash:"dash"in j?j.dash:void 0,dashoffset:"dashoffset"in j?j.dashoffset:void 0,smooth:"smooth"in j?j.smooth:void 0,stipple:"stipple"in j?j.stipple:void 0,capstyle:void 0,arrow:void 0,arrowshape:void 0,activeStroke:void 0,isAspectRatioLocked:"isAspectRatioLocked"in j?j.isAspectRatioLocked:!1},me=j.name,ke=!me||Gr(me);le.name=ke?Bt(le):me,Si(le),m("edit-points"),Ge("Фігуру перетворено на контур.")},[e,Si]),Vf=M.useCallback(L=>{g(L),b(!1),E([]),y(!1),v([]),_(null),(L===null&&d==="edit-points"||L&&d!=="edit-points")&&m("select")},[d]),gc=M.useCallback(L=>{const j=S.filter(le=>le);if(j.length<2){b(!1),E([]);return}let J=[...j];if(J.length>1){const le=J[J.length-1],me=J[J.length-2];le&&me&&le.x===me.x&&le.y===me.y&&J.pop()}if(J.length<2){b(!1),E([]);return}const B={id:new Date().toISOString(),name:L?"Багатокутник":"Ламана",type:"polyline",points:J,isClosed:L,fill:L&&q?Et??be:"none",stroke:D?zn??Se:"none",strokeWidth:D?de:0,state:"normal",rotation:0,capstyle:"round",isAspectRatioLocked:!1};ql(B),b(!1),E([]),m("select"),g(B.id)},[S,ql,q,be,D,Se,de,Et,zn]),c0=M.useCallback(()=>{b(!1),E([]),m("select")},[]),u0=M.useCallback(L=>{const j=C.filter(le=>le);if(j.length<2){y(!1),v([]);return}let J=[...j];if(J.length>1){const le=J[J.length-1],me=J[J.length-2];le&&me&&le.x===me.x&&le.y===me.y&&J.pop()}if(J.length<2){y(!1),v([]);return}const B={id:new Date().toISOString(),name:L?"Багатокутник":"Крива Без'є",type:"bezier",points:J,smooth:!0,splinesteps:12,stroke:D?zn??Se:"none",strokeWidth:D?de:0,rotation:0,capstyle:"round",state:"normal",isClosed:L,fill:L&&q?Et??be:"none",isAspectRatioLocked:!1};ql(B),y(!1),v([]),m("select"),g(B.id)},[C,ql,D,Se,de,q,be,Et,zn]),pc=M.useCallback(()=>{y(!1),v([]),m("select")},[]),d0=L=>{var J;const j=(J=L.target.files)==null?void 0:J[0];if(j){const B=new FileReader;B.onload=le=>{var ke;const me=(ke=le.target)==null?void 0:ke.result;cc(me),m("image"),Ge("Клацніть на полотні, щоб розмістити зображення.")},B.readAsDataURL(j)}L.target&&(L.target.value="")},Yl=M.useCallback(L=>{var J;p&&gc(!1),x&&pc(),_(null),L==="select"||L==="edit-points"||g(null),L==="polyline"?(b(!0),E([])):b(!1),L==="bezier"?(y(!0),v([])):y(!1),L==="image"?(J=jf.current)==null||J.click():(cc(null),m(L))},[p,x,gc,pc]),Jl=M.useMemo(()=>{const L=e.find(j=>(j==null?void 0:j.id)===h)??null;return L?{...L}:null},[e,h]),yc=M.useCallback(async()=>{if(e.length===0){Ge("Спочатку намалюйте щось на полотні!","info");return}z(!0),ge(null),he([]);try{if(Pe==="local"){const{codeLines:L}=await Bg(e,dt,lt,Nt,u,k,He);he(L)}else{const J=(await kR(e,dt,lt,Nt,u,k,He)).split(`
`).map(B=>{const le=B.match(/(.*?) # ID:([a-zA-Z0-9.-]+)/);return le&&le[1]&&le[2]?{content:le[1].trim(),shapeId:le[2]}:{content:B,shapeId:null}});he(J)}Ke(JSON.parse(JSON.stringify(e))),Ge("Код успішно згенеровано!","info")}catch(L){const j=L instanceof Error?L.message:"Сталася невідома помилка.";ge(`Не вдалося згенерувати код: ${j}`),Ge("Помилка генерації коду.","error",5e3)}finally{z(!1)}},[e,dt,lt,Nt,u,Pe,k,He]);M.useEffect(()=>{Pe==="local"&&on&&(async()=>{const{codeLines:j}=await Bg(e,dt,lt,Nt,u,k,He);he(j),Ke(JSON.parse(JSON.stringify(e)))})()},[e,dt,lt,Nt,Pe,u,on,k,He]);const f0=M.useMemo(()=>ze?JSON.stringify(e)!==JSON.stringify(ze):!1,[e,ze]),xc=()=>{c([]),he([]),ge(null),g(null),_(null),b(!1),E([]),y(!1),v([]),Ke(null),jo(null)},wi=M.useCallback((L,j,J)=>{if(!lo){L();return}dc({title:j,message:J,onConfirm:()=>{L(),dc(null)}})},[lo]),m0=M.useCallback(()=>{wi(()=>{xc(),Ge("Полотно очищено.")},"Очистити полотно?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[wi]),h0=M.useCallback(L=>{xc(),f(L.projectName),Fl(L.width),eo(L.height),w(L.bgColor),Y(L.canvasVarName),Hl(!1),Ti.current=jn(L.projectName,[]),fc(!0),setTimeout(bi,0)},[jn,bi]),$f=M.useCallback(()=>{wi(()=>Hl(!0),"Створити новий проєкт?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[wi]),g0=M.useCallback(()=>{wi(()=>fc(!1),"Повернутися на головну?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[wi]),ps=M.useCallback(L=>({projectName:L,shapes:e,canvasSettings:{width:dt,height:lt,bgColor:Nt,varName:k},viewTransform:Gn,uiSettings:{theme:Ci,showGrid:pe,gridSize:R,snapToGrid:K,gridSnapStep:P,showAxes:ie,showCursorCoords:Rt,showRotationAngle:$t,showLineNumbers:mt,showTkinterNames:I,generatorType:Pe,highlightCodeOnSelection:Ae,autoGenerateComments:He,showComments:Ht}}),[e,dt,lt,Nt,k,Gn,Ci,pe,R,K,P,ie,Rt,$t,mt,I,Pe,Ae,He,Ht]),vc=M.useCallback(async()=>{if(!lo&&Do){Ge("Незбережених змін немає.","info");return}const L=ps(u);if(Do)try{await e0(Do,JSON.stringify(L,null,2)),Ti.current=jn(u,e),oo(Do),Ge("Проєкт збережено.","info")}catch(j){console.error("Не вдалося зберегти у файл",j),Ge('Не вдалося зберегти у файл. Спробуйте "Зберегти як...".',"error")}else try{const j=JSON.stringify(L,null,2),J=await lr(j,`${u}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(J){const B=J.name.replace(/\.vec.json$/,"");jo(J),f(B),Ti.current=jn(B,e),oo(J),Ge("Проєкт збережено.","info")}}catch(j){console.error("Не вдалося зберегти проєкт",j),Ge("Не вдалося зберегти проєкт.","error")}},[lo,Do,ps,u,jn,e,oo]),p0=M.useCallback(async L=>{Qi(!1);try{const j=ps(L),J=JSON.stringify(j,null,2),B=await lr(J,`${L}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(B){const le=B.name.replace(/\.vec.json$/,"");jo(B),f(le),Ti.current=jn(le,e),oo(B),Ge("Проєкт збережено.","info")}}catch(j){console.error("Не вдалося зберегти проєкт",j),Ge("Не вдалося зберегти проєкт.","error")}},[ps,e,oo,jn]),Xl=M.useCallback((L,j,J)=>{try{const B=JSON.parse(L);if(B.shapes&&B.canvasSettings&&B.viewTransform){const le=B.projectName||(j?j.replace(/\.vec.json$/,""):"Завантажений проєкт");xc(),c(B.shapes),f(le),Fl(B.canvasSettings.width),eo(B.canvasSettings.height),w(B.canvasSettings.bgColor),Y(B.canvasSettings.varName||"c"),io(B.viewTransform);const me=B.uiSettings||{};uc(me.theme||"dark"),re(me.showGrid??!0),$(me.gridSize||10),W(me.snapToGrid??!0),fe(me.gridSnapStep||1),Le(me.showAxes??!0),Fn(me.showCursorCoords??!0),hn(me.showRotationAngle??!0),pt(me.showLineNumbers??!0),Dn(me.showComments??!0),se(me.showTkinterNames??!0),rt(me.generatorType||"local"),$e(me.highlightCodeOnSelection??!0),yt(me.autoGenerateComments??!0),Ti.current=jn(le,B.shapes),(d==="polyline"||d==="bezier")&&m("select"),fc(!0),J&&oo(J),Ge("Проєкт успішно завантажено.","info"),setTimeout(bi,0)}else Ge("Неправильний формат файлу проєкту.","error")}catch(B){console.error("Помилка парсингу файлу проєкту",B),Ge("Не вдалося завантажити проєкт. Файл пошкоджено.","error")}},[c,jn,oo,bi,d]),Hf=M.useCallback(async()=>{var j;let L=null;if(typeof window.showOpenFilePicker=="function")try{L=await HR()}catch(J){console.error("Не вдалося завантажити проєкт через API",J),Ge("Не вдалося завантажити проєкт.","error");return}L?(Xl(L.content,L.handle.name,L.handle),jo(L.handle)):(j=If.current)==null||j.click()},[Xl]),Bf=M.useCallback(()=>{wi(Hf,"Завантажити проєкт?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[wi,Hf]),y0=L=>{var B;const j=(B=L.target.files)==null?void 0:B[0];if(!j)return;const J=new FileReader;J.onload=le=>{var me;try{const ke=(me=le.target)==null?void 0:me.result;jo(null),Xl(ke,j.name)}catch(ke){console.error("Не вдалося завантажити проєкт",ke),Ge("Не вдалося завантажити проєкт. Файл може бути пошкоджений.","error")}},J.onerror=()=>{Ge("Не вдалося прочитати файл.","error")},J.readAsText(j),L.target&&(L.target.value="")},x0=M.useCallback(async L=>{$l(!1),Ge("Експорт зображення...","info",1500);try{const j=zR(e,dt,lt,Nt),J=`${u}.${L.format}`;if(L.format==="svg")await lr(j,J,[{description:"SVG Зображення",accept:{"image/svg+xml":[".svg"]}}],"image/svg+xml");else{const B=await GR(L.format,j,dt,lt,L.scale,L.quality),me=await(await fetch(B)).blob(),ke=L.format==="png"?"image/png":"image/jpeg",qe=L.format==="png"?"PNG Зображення":"JPEG Зображення";await lr(me,J,[{description:qe,accept:{[ke]:[`.${L.format}`]}}],ke)}Ge("Зображення успішно експортовано!","info")}catch(j){console.error("Помилка експорту:",j),Ge("Не вдалося експортувати зображення.","error")}},[e,dt,lt,Nt,u]),v0=M.useCallback(async L=>{try{const j=await Uf(L);j&&(Xl(j,L.name,L.handle),jo(L.handle))}catch(j){console.error("Не вдалося відкрити останній проєкт:",j),Ge(`Не вдалося відкрити проєкт: ${j instanceof Error?j.message:"Невідома помилка"}.`,"error",5e3)}},[Uf,Xl]),C0=M.useCallback(async L=>{us(!1);const j=te.map(J=>J.content).join(`
`);if(!j){Ge("Немає коду для збереження.","error");return}try{await lr(j,`${L}.py`,[{description:"Python файл",accept:{"text/python":[".py"]}}],"text/python"),Ge("Код успішно збережено.","info")}catch(J){console.error("Не вдалося зберегти код:",J),Ge("Не вдалося зберегти код.","error")}},[te]),T0=M.useCallback(L=>{const j=te.map(J=>J.content).join(`
`);if(!j){Ge("Немає коду для запуску.","error");return}try{const B=new TextEncoder().encode(j);let le="";B.forEach(xt=>{le+=String.fromCharCode(xt)});const me=btoa(le),qe=`https://yepython.pp.ua/?${L?"runcode":"code"}=${me}`;window.open(qe,"_blank","noopener,noreferrer")}catch(J){console.error("Error creating online IDE link:",J),Ge("Не вдалося створити посилання для онлайн IDE.","error")}},[te]),Ff=M.useCallback(()=>{h&&Ol(h)},[h,Ol]),b0=M.useCallback(()=>{h&&Uo(h)},[h,Uo]),S0=M.useMemo(()=>Jl?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(Jl.type):!1,[Jl]);M.useEffect(()=>{const L=j=>{if(!j.target.matches('input, textarea, [contenteditable="true"]')){if(j.ctrlKey||j.metaKey)switch(j.code){case"KeyD":h&&(j.preventDefault(),Ol(h));return;case"KeyZ":j.preventDefault(),j.shiftKey?l&&i():o&&n();return;case"KeyY":j.preventDefault(),l&&i();return;case"KeyS":j.preventDefault(),vc();return}if(h&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(j.code)){j.preventDefault();const B=e.find(xt=>xt.id===h);if(!B)return;const le=j.shiftKey?10:1;let me=0,ke=0;switch(j.code){case"ArrowUp":ke=-le;break;case"ArrowDown":ke=le;break;case"ArrowLeft":me=-le;break;case"ArrowRight":me=le;break}if(me===0&&ke===0)return;let qe;switch(B.type){case"line":qe={...B,points:[{...B.points[0]},{...B.points[1]}]};break;case"pencil":case"polyline":case"bezier":qe={...B,points:B.points.map(xt=>({...xt}))};break;default:qe={...B}}switch(qe.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":qe.x+=me,qe.y+=ke;break;case"ellipse":case"polygon":case"star":qe.cx+=me,qe.cy+=ke;break;case"line":case"pencil":case"polyline":case"bezier":qe.points=qe.points.map(xt=>({x:xt.x+me,y:xt.y+ke}));break}Si(qe);return}switch(j.code){case"KeyV":j.preventDefault(),Yl("select");return;case"KeyA":j.preventDefault(),Yl("edit-points");return;case"Delete":case"Backspace":j.preventDefault(),d==="edit-points"&&h&&A!==null?mc(h,A):h&&Uo(h);return}}};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[h,d,A,mc,Uo,Ol,n,i,o,l,vc,Yl,e,Si]);const Cc=M.useCallback(L=>{if(!Ro.current)return;const{width:j,height:J}=Ro.current.getBoundingClientRect(),{scale:B,x:le,y:me}=Gn,ke=j/2,qe=J/2,xt=(ke-le)/B,ti=(qe-me)/B,In=ke-xt*L,Lo=qe-ti*L;io({scale:L,x:In,y:Lo})},[Gn]),w0=M.useCallback(()=>{Cc(1)},[Cc]),E0=M.useCallback(()=>{h&&hc(h)},[h,hc]),M0=M.useCallback(()=>{as(!0)},[]),A0=M.useCallback(()=>{hs(L=>!L)},[]),k0=M.useCallback(()=>{ei(L=>!L)},[]),_0=M.useCallback(()=>{rt("local"),ge(null),Ge("Перемкнено на локальний генератор. Код буде оновлено автоматично.","info")},[]);return s.jsxs("div",{className:"h-screen bg-[var(--bg-app)] text-[var(--text-primary)] font-sans flex flex-col selection:bg-[var(--accent-primary)] selection:text-[var(--accent-text)] overflow-hidden",children:[s.jsx("input",{type:"file",ref:jf,style:{display:"none"},accept:"image/png, image/jpeg, image/gif, image/webp",onChange:d0}),s.jsx("input",{type:"file",ref:If,style:{display:"none"},accept:".json,.vec.json",onChange:y0}),ye&&s.jsx("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 ${ye.type==="error"?"bg-[var(--destructive-bg)]":"bg-[var(--accent-primary)]"} text-[var(--accent-text)] py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-down`,children:ye.message}),s.jsx(eD,{onGenerate:yc,showGenerateButton:Pe==="gemini",onNewProject:$f,onSaveProject:vc,canSave:on&&(lo||!Do),onSaveProjectAs:()=>Qi(!0),onLoadProject:Bf,onExport:()=>$l(!0),onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:Ff,isShapeSelected:!!h,onDelete:b0,onConvertToPath:E0,canConvertToPath:S0,onFitCanvasToView:bi,showGrid:pe,setShowGrid:re,snapToGrid:K,setSnapToGrid:W,showAxes:ie,setShowAxes:Le,onOpenSettings:M0,theme:Ci,setTheme:uc,projectName:u,isProjectActive:on,onGoHome:g0,onOpenAbout:()=>fs(!0),onOpenHelp:()=>nn(!0)}),on&&s.jsx(nD,{activeTool:d,setActiveTool:Yl,drawMode:N,setDrawMode:V,isFillEnabled:q,setIsFillEnabled:U,isStrokeEnabled:D,setIsStrokeEnabled:Z,fillColor:be,setFillColor:Ce,setPreviewFillColor:zl,strokeColor:Se,setStrokeColor:ee,setPreviewStrokeColor:Gl,strokeWidth:de,setStrokeWidth:xe,numberOfSides:Q,setNumberOfSides:O,onGenerate:yc,showGenerateButton:Pe==="gemini",onClear:m0,isGenerating:T,hasShapes:e.length>0,onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:Ff,isShapeSelected:!!h,onOpenMobileLeft:A0,onOpenMobileRight:k0,theme:Ci,setTheme:uc,selectedShape:Jl,updateShape:Si,setShapePreview:Pf,cancelShapePreview:Io,textColor:oe,setTextColor:Te,setPreviewTextColor:H,textFont:ve,setTextFont:ce,textFontSize:Fe,setTextFontSize:F}),s.jsxs("main",{className:"flex-grow grid grid-cols-1 md:grid-cols-[380px_1fr] lg:grid-cols-[380px_1fr_260px] min-h-0",children:[on&&s.jsxs("aside",{className:`${sc?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} md:static md:bg-transparent md:z-auto md:p-0 md:flex flex-col gap-4 min-h-0 bg-[var(--bg-primary)]/50 md:p-2`,children:[s.jsx("div",{className:"md:hidden flex justify-end mb-4",children:s.jsx("button",{onClick:()=>hs(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:s.jsx(Nn,{})})}),s.jsx(tD,{activeTool:d,setActiveTool:Yl}),s.jsx("div",{className:"flex-1 min-h-0 mt-2",children:s.jsx(bS,{codeLines:te,isLoading:T,error:X,onUpdate:yc,onPreview:()=>Rn(!0),hasUnsyncedChanges:f0,opacity:1,setOpacity:()=>{},selectedShapeId:h,highlightCodeOnSelection:Ae,setHighlightCodeOnSelection:$e,showLineNumbers:mt,setShowLineNumbers:pt,showComments:Ht,setShowComments:Dn,generatorType:Pe,onSwitchToLocalGenerator:_0,onSaveCode:()=>us(!0),onOpenOrRunCodeOnline:T0})})]}),s.jsx("div",{className:`flex flex-col min-w-0 min-h-0 p-2 md:p-4 ${!on&&"md:col-start-1 lg:col-start-1 md:col-span-3 lg:col-span-3"}`,children:on?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:Ro,className:"bg-[var(--bg-secondary)] rounded-lg shadow-inner flex-grow overflow-hidden relative grid",style:{gridTemplateRows:ie?`${rr}px 1fr`:"1fr",gridTemplateColumns:ie?`${rr}px 1fr`:"1fr"},children:[ie&&s.jsx("div",{className:"bg-[var(--ruler-bg)] z-10 flex items-center justify-center p-1",children:s.jsx(Lb,{size:16})}),ie&&s.jsx(zg,{orientation:"horizontal",transform:Gn,length:gn.width-rr,canvasSize:{width:dt,height:lt}}),ie&&s.jsx(zg,{orientation:"vertical",transform:Gn,length:gn.height-rr,canvasSize:{width:dt,height:lt}}),s.jsx("div",{className:"relative overflow-hidden",style:{gridRow:ie?2:"1 / -1",gridColumn:ie?2:"1 / -1"},children:s.jsx(CS,{width:dt,height:lt,backgroundColor:to??Nt,shapes:l0,addShape:ql,updateShape:Si,activeTool:d,drawMode:N,fillColor:q?Et??be:"none",strokeColor:D?zn??Se:"none",strokeWidth:D?de:0,textColor:Me??oe,textFont:ve,textFontSize:Fe,numberOfSides:Q,selectedShapeId:h,onSelectShape:Vf,isDrawingPolyline:p,polylinePoints:S,setPolylinePoints:E,onCompletePolyline:gc,onCancelPolyline:c0,isDrawingBezier:x,bezierPoints:C,setBezierPoints:v,onCompleteBezier:u0,onCancelBezier:pc,showGrid:pe,gridSize:R,snapStep:K?P:1,viewTransform:Gn,setViewTransform:io,activePointIndex:A,setActivePointIndex:_,showCursorCoords:Rt,showRotationAngle:$t,pendingImage:n0,setPendingImage:cc,setCursorPos:lc})}),s.jsx("button",{onClick:bi,title:"Показати все полотно",className:"absolute bottom-4 right-4 z-10 p-2 bg-[var(--bg-primary)] text-[var(--text-secondary)] rounded-full shadow-lg hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:s.jsx(Pb,{})})]}),s.jsx(qR,{zoomLevel:Gn.scale,cursorPos:oc,onZoomChange:Cc,onResetZoom:w0})]}):s.jsx(OR,{onCreateNew:$f,onLoadProject:Bf,recentProjects:i0,onOpenRecent:v0})}),on&&s.jsxs("aside",{className:`${ac?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} lg:static lg:bg-transparent lg:z-auto lg:p-0 lg:flex flex-col gap-4 overflow-y-auto md:p-2`,children:[s.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:s.jsx("button",{onClick:()=>ei(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:s.jsx(Nn,{})})}),s.jsx("div",{className:"flex-1 min-h-0",children:s.jsx(kS,{shapes:e,selectedShapeId:h,onSelectShape:Vf,onDeleteShape:Uo,onMoveShape:s0,onUpdateShape:Si,onReorderShape:a0,showTkinterNames:I})}),s.jsx("div",{className:"flex-[2_2_0%] min-h-0",children:s.jsx(MS,{selectedShape:Jl,updateShape:Si,deleteShape:Uo,duplicateShape:Ol,activeTool:d,activePointIndex:A,setActivePointIndex:_,deletePoint:mc,addPoint:r0,convertToPath:hc,showNotification:Ge,setShapePreview:Pf,cancelShapePreview:Io})})]})]}),tn&&s.jsx(RR,{onClose:()=>as(!1),canvasWidth:dt,setCanvasWidth:Fl,canvasHeight:lt,setCanvasHeight:eo,canvasBgColor:Nt,setCanvasBgColor:L=>{w(L),no(null)},setPreviewCanvasBgColor:no,canvasVarName:k,setCanvasVarName:Y,gridSize:R,setGridSize:$,gridSnapStep:P,setGridSnapStep:fe,showTkinterNames:I,setShowTkinterNames:se,showAxes:ie,setShowAxes:Le,showCursorCoords:Rt,setShowCursorCoords:Fn,showRotationAngle:$t,setShowRotationAngle:hn,showLineNumbers:mt,setShowLineNumbers:pt,generatorType:Pe,setGeneratorType:rt,highlightCodeOnSelection:Ae,setHighlightCodeOnSelection:$e,autoGenerateComments:He,setAutoGenerateComments:yt}),De&&ze&&s.jsx(DR,{projectName:u,shapes:ze,width:dt,height:lt,backgroundColor:Nt,onClose:()=>Rn(!1)}),nc&&s.jsx(jR,{onClose:()=>$l(!1),onExport:x0}),ic&&s.jsx(IR,{onClose:()=>Hl(!1),onCreate:h0,initialSettings:{projectName:"Новий малюнок. ВереTkа",width:dt,height:lt,bgColor:"#ffffff",canvasVarName:"c"}}),gs&&s.jsx(UR,{isOpen:!0,title:gs.title,message:gs.message,onConfirm:gs.onConfirm,onClose:()=>dc(null)}),cs&&s.jsx(LR,{isOpen:!0,onClose:()=>Qi(!1),onSave:p0,currentProjectName:u}),Bl&&s.jsx(KR,{isOpen:!0,onClose:()=>us(!1),onSave:C0,currentProjectName:u.replace(/\. ВереTkа$/,"")}),ds&&s.jsx(PR,{isOpen:ds,onClose:()=>fs(!1)}),ms&&s.jsx($R,{isOpen:ms,onClose:()=>nn(!1)})]})}const t0=document.getElementById("root");if(!t0)throw new Error("Could not find root element to mount to");const oD=Mb.createRoot(t0);oD.render(s.jsx(kt.StrictMode,{children:s.jsx(iD,{})}));
