(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function dg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fg={exports:{}},Ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=Symbol.for("react.transitional.element"),hC=Symbol.for("react.fragment");function mg(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:mC,type:e,key:i,ref:t!==void 0?t:null,props:n}}Ba.Fragment=hC;Ba.jsx=mg;Ba.jsxs=mg;fg.exports=Ba;var r=fg.exports,hg={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=Symbol.for("react.transitional.element"),pC=Symbol.for("react.portal"),gC=Symbol.for("react.fragment"),yC=Symbol.for("react.strict_mode"),xC=Symbol.for("react.profiler"),vC=Symbol.for("react.consumer"),CC=Symbol.for("react.context"),TC=Symbol.for("react.forward_ref"),bC=Symbol.for("react.suspense"),SC=Symbol.for("react.memo"),pg=Symbol.for("react.lazy"),sm=Symbol.iterator;function wC(e){return e===null||typeof e!="object"?null:(e=sm&&e[sm]||e["@@iterator"],typeof e=="function"?e:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yg=Object.assign,xg={};function Ll(e,t,n){this.props=e,this.context=t,this.refs=xg,this.updater=n||gg}Ll.prototype.isReactComponent={};Ll.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ll.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vg(){}vg.prototype=Ll.prototype;function Dd(e,t,n){this.props=e,this.context=t,this.refs=xg,this.updater=n||gg}var jd=Dd.prototype=new vg;jd.constructor=Dd;yg(jd,Ll.prototype);jd.isPureReactComponent=!0;var am=Array.isArray,dt={H:null,A:null,T:null,S:null,V:null},Cg=Object.prototype.hasOwnProperty;function Id(e,t,n,i,o,l){return n=l.ref,{$$typeof:Rd,type:e,key:t,ref:n!==void 0?n:null,props:l}}function EC(e,t){return Id(e.type,t,void 0,void 0,void 0,e.props)}function Ld(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rd}function MC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cm=/\/+/g;function Lc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MC(""+e.key):t.toString(36)}function um(){}function kC(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(um,um):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Yo(e,t,n,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Rd:case pC:c=!0;break;case pg:return c=e._init,Yo(c(e._payload),t,n,i,o)}}if(c)return o=o(e),c=i===""?"."+Lc(e,0):i,am(o)?(n="",c!=null&&(n=c.replace(cm,"$&/")+"/"),Yo(o,t,n,"",function(d){return d})):o!=null&&(Ld(o)&&(o=EC(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(cm,"$&/")+"/")+c)),t.push(o)),1;c=0;var u=i===""?".":i+":";if(am(e))for(var f=0;f<e.length;f++)i=e[f],l=u+Lc(i,f),c+=Yo(i,t,n,l,o);else if(f=wC(e),typeof f=="function")for(e=f.call(e),f=0;!(i=e.next()).done;)i=i.value,l=u+Lc(i,f++),c+=Yo(i,t,n,l,o);else if(l==="object"){if(typeof e.then=="function")return Yo(kC(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function Es(e,t,n){if(e==null)return e;var i=[],o=0;return Yo(e,i,"","",function(l){return t.call(n,l,o++)}),i}function AC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function _C(){}Re.Children={map:Es,forEach:function(e,t,n){Es(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Es(e,function(){t++}),t},toArray:function(e){return Es(e,function(t){return t})||[]},only:function(e){if(!Ld(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Ll;Re.Fragment=gC;Re.Profiler=xC;Re.PureComponent=Dd;Re.StrictMode=yC;Re.Suspense=bC;Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dt;Re.__COMPILER_RUNTIME={__proto__:null,c:function(e){return dt.H.useMemoCache(e)}};Re.cache=function(e){return function(){return e.apply(null,arguments)}};Re.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=yg({},e.props),o=e.key,l=void 0;if(t!=null)for(c in t.ref!==void 0&&(l=void 0),t.key!==void 0&&(o=""+t.key),t)!Cg.call(t,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&t.ref===void 0||(i[c]=t[c]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return Id(e.type,o,void 0,void 0,l,i)};Re.createContext=function(e){return e={$$typeof:CC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:vC,_context:e},e};Re.createElement=function(e,t,n){var i,o={},l=null;if(t!=null)for(i in t.key!==void 0&&(l=""+t.key),t)Cg.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return Id(e,l,void 0,void 0,null,o)};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:TC,render:e}};Re.isValidElement=Ld;Re.lazy=function(e){return{$$typeof:pg,_payload:{_status:-1,_result:e},_init:AC}};Re.memo=function(e,t){return{$$typeof:SC,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=dt.T,n={};dt.T=n;try{var i=e(),o=dt.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(_C,dm)}catch(l){dm(l)}finally{dt.T=t}};Re.unstable_useCacheRefresh=function(){return dt.H.useCacheRefresh()};Re.use=function(e){return dt.H.use(e)};Re.useActionState=function(e,t,n){return dt.H.useActionState(e,t,n)};Re.useCallback=function(e,t){return dt.H.useCallback(e,t)};Re.useContext=function(e){return dt.H.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e,t){return dt.H.useDeferredValue(e,t)};Re.useEffect=function(e,t,n){var i=dt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};Re.useId=function(){return dt.H.useId()};Re.useImperativeHandle=function(e,t,n){return dt.H.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return dt.H.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return dt.H.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return dt.H.useMemo(e,t)};Re.useOptimistic=function(e,t){return dt.H.useOptimistic(e,t)};Re.useReducer=function(e,t,n){return dt.H.useReducer(e,t,n)};Re.useRef=function(e){return dt.H.useRef(e)};Re.useState=function(e){return dt.H.useState(e)};Re.useSyncExternalStore=function(e,t,n){return dt.H.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return dt.H.useTransition()};Re.version="19.1.1";hg.exports=Re;var w=hg.exports;const wt=dg(w);var Tg={exports:{}},za={},bg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,ge){var ve=ee.length;ee.push(ge);e:for(;0<ve;){var J=ve-1>>>1,ce=ee[J];if(0<o(ce,ge))ee[J]=ge,ee[ve]=ce,ve=J;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ge=ee[0],ve=ee.pop();if(ve!==ge){ee[0]=ve;e:for(var J=0,ce=ee.length,le=ce>>>1;J<le;){var ne=2*(J+1)-1,Ee=ee[ne],fe=ne+1,Me=ee[fe];if(0>o(Ee,ve))fe<ce&&0>o(Me,Ee)?(ee[J]=Me,ee[fe]=ve,J=fe):(ee[J]=Ee,ee[ne]=ve,J=ne);else if(fe<ce&&0>o(Me,ve))ee[J]=Me,ee[fe]=ve,J=fe;else break e}}return ge}function o(ee,ge){var ve=ee.sortIndex-ge.sortIndex;return ve!==0?ve:ee.id-ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],m=1,h=null,p=3,g=!1,v=!1,T=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function S(ee){for(var ge=n(d);ge!==null;){if(ge.callback===null)i(d);else if(ge.startTime<=ee)i(d),ge.sortIndex=ge.expirationTime,t(f,ge);else break;ge=n(d)}}function k(ee){if(T=!1,S(ee),!v)if(n(f)!==null)v=!0,N||(N=!0,se());else{var ge=n(d);ge!==null&&ae(k,ge.startTime-ee)}}var N=!1,R=-1,B=5,X=-1;function I(){return M?!0:!(e.unstable_now()-X<B)}function F(){if(M=!1,N){var ee=e.unstable_now();X=ee;var ge=!0;try{e:{v=!1,T&&(T=!1,y(R),R=-1),g=!0;var ve=p;try{t:{for(S(ee),h=n(f);h!==null&&!(h.expirationTime>ee&&I());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var ce=J(h.expirationTime<=ee);if(ee=e.unstable_now(),typeof ce=="function"){h.callback=ce,S(ee),ge=!0;break t}h===n(f)&&i(f),S(ee)}else i(f);h=n(f)}if(h!==null)ge=!0;else{var le=n(d);le!==null&&ae(k,le.startTime-ee),ge=!1}}break e}finally{h=null,p=ve,g=!1}ge=void 0}}finally{ge?se():N=!1}}}var se;if(typeof C=="function")se=function(){C(F)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,pe=ue.port2;ue.port1.onmessage=F,se=function(){pe.postMessage(null)}}else se=function(){x(F,0)};function ae(ee,ge){R=x(function(){ee(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ee){switch(p){case 1:case 2:case 3:var ge=3;break;default:ge=p}var ve=p;p=ge;try{return ee()}finally{p=ve}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(ee,ge){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ve=p;p=ee;try{return ge()}finally{p=ve}},e.unstable_scheduleCallback=function(ee,ge,ve){var J=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?J+ve:J):ve=J,ee){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ve+ce,ee={id:m++,callback:ge,priorityLevel:ee,startTime:ve,expirationTime:ce,sortIndex:-1},ve>J?(ee.sortIndex=ve,t(d,ee),n(f)===null&&ee===n(d)&&(T?(y(R),R=-1):T=!0,ae(k,ve-J))):(ee.sortIndex=ce,t(f,ee),v||g||(v=!0,N||(N=!0,se()))),ee},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(ee){var ge=p;return function(){var ve=p;p=ge;try{return ee.apply(this,arguments)}finally{p=ve}}}})(Sg);bg.exports=Sg;var NC=bg.exports,wg={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC=w;function Eg(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ri(){}var Yt={d:{f:Ri,r:function(){throw Error(Eg(522))},D:Ri,C:Ri,L:Ri,m:Ri,X:Ri,S:Ri,M:Ri},p:0,findDOMNode:null},DC=Symbol.for("react.portal");function jC(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:DC,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var vr=RC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ga(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Yt;Jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Eg(299));return jC(e,t,null,n)};Jt.flushSync=function(e){var t=vr.T,n=Yt.p;try{if(vr.T=null,Yt.p=2,e)return e()}finally{vr.T=t,Yt.p=n,Yt.d.f()}};Jt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Yt.d.C(e,t))};Jt.prefetchDNS=function(e){typeof e=="string"&&Yt.d.D(e)};Jt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ga(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Yt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:l}):n==="script"&&Yt.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Jt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ga(t.as,t.crossOrigin);Yt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Yt.d.M(e)};Jt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ga(n,t.crossOrigin);Yt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Jt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ga(t.as,t.crossOrigin);Yt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Yt.d.m(e)};Jt.requestFormReset=function(e){Yt.d.r(e)};Jt.unstable_batchedUpdates=function(e,t){return e(t)};Jt.useFormState=function(e,t,n){return vr.H.useFormState(e,t,n)};Jt.useFormStatus=function(){return vr.H.useHostTransitionStatus()};Jt.version="19.1.1";function Mg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mg)}catch(e){console.error(e)}}Mg(),wg.exports=Jt;var IC=wg.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=NC,kg=w,LC=IC;function O(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ag(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fm(e){if(Kr(e)!==e)throw Error(O(188))}function UC(e){var t=e.alternate;if(!t){if(t=Kr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return fm(o),e;if(l===i)return fm(o),t;l=l.sibling}throw Error(O(188))}if(n.return!==i.return)n=o,i=l;else{for(var c=!1,u=o.child;u;){if(u===n){c=!0,n=o,i=l;break}if(u===i){c=!0,i=o,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,i=o;break}if(u===i){c=!0,i=l,n=o;break}u=u.sibling}if(!c)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function Ng(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Ng(e),t!==null)return t;e=e.sibling}return null}var rt=Object.assign,PC=Symbol.for("react.element"),Ms=Symbol.for("react.transitional.element"),pr=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),Rg=Symbol.for("react.strict_mode"),Tu=Symbol.for("react.profiler"),VC=Symbol.for("react.provider"),Dg=Symbol.for("react.consumer"),di=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),bu=Symbol.for("react.suspense"),Su=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),wu=Symbol.for("react.activity"),$C=Symbol.for("react.memo_cache_sentinel"),mm=Symbol.iterator;function or(e){return e===null||typeof e!="object"?null:(e=mm&&e[mm]||e["@@iterator"],typeof e=="function"?e:null)}var FC=Symbol.for("react.client.reference");function Eu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===FC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zo:return"Fragment";case Tu:return"Profiler";case Rg:return"StrictMode";case bu:return"Suspense";case Su:return"SuspenseList";case wu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case pr:return"Portal";case di:return(e.displayName||"Context")+".Provider";case Dg:return(e._context.displayName||"Context")+".Consumer";case Ud:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pd:return t=e.displayName||null,t!==null?t:Eu(e.type)||"Memo";case Li:t=e._payload,e=e._init;try{return Eu(e(t))}catch{}}return null}var gr=Array.isArray,we=kg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=LC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xo={pending:!1,data:null,method:null,action:null},Mu=[],Qo=-1;function Zn(e){return{current:e}}function Rt(e){0>Qo||(e.current=Mu[Qo],Mu[Qo]=null,Qo--)}function ft(e,t){Qo++,Mu[Qo]=e.current,e.current=t}var Wn=Zn(null),Lr=Zn(null),Oi=Zn(null),aa=Zn(null);function ca(e,t){switch(ft(Oi,t),ft(Lr,e),ft(Wn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=xh(t),e=Wx(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Rt(Wn),ft(Wn,e)}function Sl(){Rt(Wn),Rt(Lr),Rt(Oi)}function ku(e){e.memoizedState!==null&&ft(aa,e);var t=Wn.current,n=Wx(t,e.type);t!==n&&(ft(Lr,e),ft(Wn,n))}function ua(e){Lr.current===e&&(Rt(Wn),Rt(Lr)),aa.current===e&&(Rt(aa),qr._currentValue=xo)}var Au=Object.prototype.hasOwnProperty,Vd=Et.unstable_scheduleCallback,Uc=Et.unstable_cancelCallback,HC=Et.unstable_shouldYield,BC=Et.unstable_requestPaint,Xn=Et.unstable_now,zC=Et.unstable_getCurrentPriorityLevel,jg=Et.unstable_ImmediatePriority,Ig=Et.unstable_UserBlockingPriority,da=Et.unstable_NormalPriority,GC=Et.unstable_LowPriority,Lg=Et.unstable_IdlePriority,qC=Et.log,OC=Et.unstable_setDisableYieldValue,Zr=null,mn=null;function Hi(e){if(typeof qC=="function"&&OC(e),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Zr,e)}catch{}}var hn=Math.clz32?Math.clz32:WC,YC=Math.log,JC=Math.LN2;function WC(e){return e>>>=0,e===0?32:31-(YC(e)/JC|0)|0}var ks=256,As=4194304;function po(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qa(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,l=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var u=i&134217727;return u!==0?(i=u&~l,i!==0?o=po(i):(c&=u,c!==0?o=po(c):n||(n=u&~e,n!==0&&(o=po(n))))):(u=i&~l,u!==0?o=po(u):c!==0?o=po(c):n||(n=i&~e,n!==0&&(o=po(n)))),o===0?0:t!==0&&t!==o&&!(t&l)&&(l=o&-o,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:o}function Qr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function XC(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ug(){var e=ks;return ks<<=1,!(ks&4194048)&&(ks=256),e}function Pg(){var e=As;return As<<=1,!(As&62914560)&&(As=4194304),e}function Pc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function es(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function KC(e,t,n,i,o,l){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var u=e.entanglements,f=e.expirationTimes,d=e.hiddenUpdates;for(n=c&~n;0<n;){var m=31-hn(n),h=1<<m;u[m]=0,f[m]=-1;var p=d[m];if(p!==null)for(d[m]=null,m=0;m<p.length;m++){var g=p[m];g!==null&&(g.lane&=-536870913)}n&=~h}i!==0&&Vg(e,i,0),l!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=l&~(c&~t))}function Vg(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-hn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function $g(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-hn(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function $d(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Fg(){var e=Ge.p;return e!==0?e:(e=window.event,e===void 0?32:lv(e.type))}function ZC(e,t){var n=Ge.p;try{return Ge.p=e,t()}finally{Ge.p=n}}var oo=Math.random().toString(36).slice(2),Ft="__reactFiber$"+oo,nn="__reactProps$"+oo,Ul="__reactContainer$"+oo,_u="__reactEvents$"+oo,QC="__reactListeners$"+oo,eT="__reactHandles$"+oo,hm="__reactResources$"+oo,ts="__reactMarker$"+oo;function Hd(e){delete e[Ft],delete e[nn],delete e[_u],delete e[QC],delete e[eT]}function el(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ul]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Th(e);e!==null;){if(n=e[Ft])return n;e=Th(e)}return t}e=n,n=e.parentNode}return null}function Pl(e){if(e=e[Ft]||e[Ul]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function yr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(O(33))}function dl(e){var t=e[hm];return t||(t=e[hm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function _t(e){e[ts]=!0}var Hg=new Set,Bg={};function No(e,t){wl(e,t),wl(e+"Capture",t)}function wl(e,t){for(Bg[e]=t,e=0;e<t.length;e++)Hg.add(t[e])}var tT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pm={},gm={};function nT(e){return Au.call(gm,e)?!0:Au.call(pm,e)?!1:tT.test(e)?gm[e]=!0:(pm[e]=!0,!1)}function Os(e,t,n){if(nT(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function _s(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ri(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Vc,ym;function Jo(e){if(Vc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vc=t&&t[1]||"",ym=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vc+e+ym}var $c=!1;function Fc(e,t){if(!e||$c)return"";$c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var p=g}Reflect.construct(e,[],h)}else{try{h.call()}catch(g){p=g}e.call(h.prototype)}}else{try{throw Error()}catch(g){p=g}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&p&&typeof g.stack=="string")return[g.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),c=l[0],u=l[1];if(c&&u){var f=c.split(`
`),d=u.split(`
`);for(o=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(i===f.length||o===d.length)for(i=f.length-1,o=d.length-1;1<=i&&0<=o&&f[i]!==d[o];)o--;for(;1<=i&&0<=o;i--,o--)if(f[i]!==d[o]){if(i!==1||o!==1)do if(i--,o--,0>o||f[i]!==d[o]){var m=`
`+f[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=o);break}}}finally{$c=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Jo(n):""}function iT(e){switch(e.tag){case 26:case 27:case 5:return Jo(e.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 15:return Fc(e.type,!1);case 11:return Fc(e.type.render,!1);case 1:return Fc(e.type,!0);case 31:return Jo("Activity");default:return""}}function xm(e){try{var t="";do t+=iT(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oT(e){var t=zg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){i=""+c,l.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fa(e){e._valueTracker||(e._valueTracker=oT(e))}function Gg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=zg(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ma(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lT=/[\n"\\]/g;function Mn(e){return e.replace(lT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Nu(e,t,n,i,o,l,c,u){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Sn(t)):e.value!==""+Sn(t)&&(e.value=""+Sn(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Ru(e,c,Sn(t)):n!=null?Ru(e,c,Sn(n)):i!=null&&e.removeAttribute("value"),o==null&&l!=null&&(e.defaultChecked=!!l),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.name=""+Sn(u):e.removeAttribute("name")}function qg(e,t,n,i,o,l,c,u){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;n=n!=null?""+Sn(n):"",t=t!=null?""+Sn(t):n,u||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=u?e.checked:!!i,e.defaultChecked=!!i,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function Ru(e,t,n){t==="number"&&ma(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function fl(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Sn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Og(e,t,n){if(t!=null&&(t=""+Sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Sn(n):""}function Yg(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(O(92));if(gr(i)){if(1<i.length)throw Error(O(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Sn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function El(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vm(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||rT.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Jg(e,t,n){if(t!=null&&typeof t!="object")throw Error(O(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&vm(e,o,i)}else for(var l in t)t.hasOwnProperty(l)&&vm(e,l,t[l])}function Bd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(e){return aT.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Du=null;function zd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,ml=null;function Cm(e){var t=Pl(e);if(t&&(e=t.stateNode)){var n=e[nn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Nu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Mn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[nn]||null;if(!o)throw Error(O(90));Nu(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Gg(i)}break e;case"textarea":Og(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&fl(e,!!n.multiple,t,!1)}}}var Hc=!1;function Wg(e,t,n){if(Hc)return e(t,n);Hc=!0;try{var i=e(t);return i}finally{if(Hc=!1,(tl!==null||ml!==null)&&(tc(),tl&&(t=tl,e=ml,ml=tl=null,Cm(t),e)))for(t=0;t<e.length;t++)Cm(e[t])}}function Ur(e,t){var n=e.stateNode;if(n===null)return null;var i=n[nn]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(xi)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){ju=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{ju=!1}var Bi=null,Gd=null,Js=null;function Xg(){if(Js)return Js;var e,t=Gd,n=t.length,i,o="value"in Bi?Bi.value:Bi.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===o[l-i];i++);return Js=o.slice(e,1<i?1-i:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ns(){return!0}function Tm(){return!1}function on(e){function t(n,i,o,l,c){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ns:Tm,this.isPropagationStopped=Tm,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),t}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=on(Ro),ns=rt({},Ro,{view:0,detail:0}),cT=on(ns),Bc,zc,rr,Ya=rt({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&e.type==="mousemove"?(Bc=e.screenX-rr.screenX,zc=e.screenY-rr.screenY):zc=Bc=0,rr=e),Bc)},movementY:function(e){return"movementY"in e?e.movementY:zc}}),bm=on(Ya),uT=rt({},Ya,{dataTransfer:0}),dT=on(uT),fT=rt({},ns,{relatedTarget:0}),Gc=on(fT),mT=rt({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),hT=on(mT),pT=rt({},Ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gT=on(pT),yT=rt({},Ro,{data:0}),Sm=on(yT),xT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CT[e])?!!t[e]:!1}function qd(){return TT}var bT=rt({},ns,{key:function(e){if(e.key){var t=xT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ST=on(bT),wT=rt({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wm=on(wT),ET=rt({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),MT=on(ET),kT=rt({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=on(kT),_T=rt({},Ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NT=on(_T),RT=rt({},Ro,{newState:0,oldState:0}),DT=on(RT),jT=[9,13,27,32],Od=xi&&"CompositionEvent"in window,Cr=null;xi&&"documentMode"in document&&(Cr=document.documentMode);var IT=xi&&"TextEvent"in window&&!Cr,Kg=xi&&(!Od||Cr&&8<Cr&&11>=Cr),Em=" ",Mm=!1;function Zg(e,t){switch(e){case"keyup":return jT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nl=!1;function LT(e,t){switch(e){case"compositionend":return Qg(t);case"keypress":return t.which!==32?null:(Mm=!0,Em);case"textInput":return e=t.data,e===Em&&Mm?null:e;default:return null}}function UT(e,t){if(nl)return e==="compositionend"||!Od&&Zg(e,t)?(e=Xg(),Js=Gd=Bi=null,nl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kg&&t.locale!=="ko"?null:t.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function km(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PT[e.type]:t==="textarea"}function ey(e,t,n,i){tl?ml?ml.push(i):ml=[i]:tl=i,t=Ra(t,"onChange"),0<t.length&&(n=new Oa("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Tr=null,Pr=null;function VT(e){Ox(e,0)}function Ja(e){var t=yr(e);if(Gg(t))return e}function Am(e,t){if(e==="change")return t}var ty=!1;if(xi){var qc;if(xi){var Oc="oninput"in document;if(!Oc){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),Oc=typeof _m.oninput=="function"}qc=Oc}else qc=!1;ty=qc&&(!document.documentMode||9<document.documentMode)}function Nm(){Tr&&(Tr.detachEvent("onpropertychange",ny),Pr=Tr=null)}function ny(e){if(e.propertyName==="value"&&Ja(Pr)){var t=[];ey(t,Pr,e,zd(e)),Wg(VT,t)}}function $T(e,t,n){e==="focusin"?(Nm(),Tr=t,Pr=n,Tr.attachEvent("onpropertychange",ny)):e==="focusout"&&Nm()}function FT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(Pr)}function HT(e,t){if(e==="click")return Ja(t)}function BT(e,t){if(e==="input"||e==="change")return Ja(t)}function zT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:zT;function Vr(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Au.call(t,o)||!yn(e[o],t[o]))return!1}return!0}function Rm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dm(e,t){var n=Rm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rm(n)}}function iy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ma(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ma(e.document)}return t}function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var GT=xi&&"documentMode"in document&&11>=document.documentMode,il=null,Iu=null,br=null,Lu=!1;function jm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lu||il==null||il!==ma(i)||(i=il,"selectionStart"in i&&Yd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),br&&Vr(br,i)||(br=i,i=Ra(Iu,"onSelect"),0<i.length&&(t=new Oa("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=il)))}function fo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ol={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionrun:fo("Transition","TransitionRun"),transitionstart:fo("Transition","TransitionStart"),transitioncancel:fo("Transition","TransitionCancel"),transitionend:fo("Transition","TransitionEnd")},Yc={},ly={};xi&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Do(e){if(Yc[e])return Yc[e];if(!ol[e])return e;var t=ol[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ly)return Yc[e]=t[n];return e}var ry=Do("animationend"),sy=Do("animationiteration"),ay=Do("animationstart"),qT=Do("transitionrun"),OT=Do("transitionstart"),YT=Do("transitioncancel"),cy=Do("transitionend"),uy=new Map,Uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uu.push("scrollEnd");function $n(e,t){uy.set(e,t),No(t,[e])}var Im=new WeakMap;function kn(e,t){if(typeof e=="object"&&e!==null){var n=Im.get(e);return n!==void 0?n:(t={value:e,source:t,stack:xm(t)},Im.set(e,t),t)}return{value:e,source:t,stack:xm(t)}}var bn=[],ll=0,Jd=0;function Wa(){for(var e=ll,t=Jd=ll=0;t<e;){var n=bn[t];bn[t++]=null;var i=bn[t];bn[t++]=null;var o=bn[t];bn[t++]=null;var l=bn[t];if(bn[t++]=null,i!==null&&o!==null){var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}l!==0&&dy(n,o,l)}}function Xa(e,t,n,i){bn[ll++]=e,bn[ll++]=t,bn[ll++]=n,bn[ll++]=i,Jd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Wd(e,t,n,i){return Xa(e,t,n,i),ha(e)}function Vl(e,t){return Xa(e,null,null,t),ha(e)}function dy(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,l=e.return;l!==null;)l.childLanes|=n,i=l.alternate,i!==null&&(i.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(o=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,o&&t!==null&&(o=31-hn(n),e=l.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),l):null}function ha(e){if(50<Dr)throw Dr=0,id=null,Error(O(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rl={};function JT(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,n,i){return new JT(e,t,n,i)}function Xd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gi(e,t){var n=e.alternate;return n===null?(n=fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function fy(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xs(e,t,n,i,o,l){var c=0;if(i=e,typeof e=="function")Xd(e)&&(c=1);else if(typeof e=="string")c=Xb(e,n,Wn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case wu:return e=fn(31,n,t,o),e.elementType=wu,e.lanes=l,e;case Zo:return vo(n.children,o,l,t);case Rg:c=8,o|=24;break;case Tu:return e=fn(12,n,t,o|2),e.elementType=Tu,e.lanes=l,e;case bu:return e=fn(13,n,t,o),e.elementType=bu,e.lanes=l,e;case Su:return e=fn(19,n,t,o),e.elementType=Su,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VC:case di:c=10;break e;case Dg:c=9;break e;case Ud:c=11;break e;case Pd:c=14;break e;case Li:c=16,i=null;break e}c=29,n=Error(O(130,e===null?"null":typeof e,"")),i=null}return t=fn(c,n,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function vo(e,t,n,i){return e=fn(7,e,i,t),e.lanes=n,e}function Jc(e,t,n){return e=fn(6,e,null,t),e.lanes=n,e}function Wc(e,t,n){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sl=[],al=0,pa=null,ga=0,wn=[],En=0,Co=null,fi=1,mi="";function go(e,t){sl[al++]=ga,sl[al++]=pa,pa=e,ga=t}function my(e,t,n){wn[En++]=fi,wn[En++]=mi,wn[En++]=Co,Co=e;var i=fi;e=mi;var o=32-hn(i)-1;i&=~(1<<o),n+=1;var l=32-hn(t)+o;if(30<l){var c=o-o%5;l=(i&(1<<c)-1).toString(32),i>>=c,o-=c,fi=1<<32-hn(t)+o|n<<o|i,mi=l+e}else fi=1<<l|n<<o|i,mi=e}function Kd(e){e.return!==null&&(go(e,1),my(e,1,0))}function Zd(e){for(;e===pa;)pa=sl[--al],sl[al]=null,ga=sl[--al],sl[al]=null;for(;e===Co;)Co=wn[--En],wn[En]=null,mi=wn[--En],wn[En]=null,fi=wn[--En],wn[En]=null}var qt=null,pt=null,ze=!1,To=null,Yn=!1,Pu=Error(O(519));function Eo(e){var t=Error(O(418,""));throw $r(kn(t,e)),Pu}function Lm(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ft]=e,t[nn]=i,n){case"dialog":Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":case"embed":Ue("load",t);break;case"video":case"audio":for(n=0;n<Br.length;n++)Ue(Br[n],t);break;case"source":Ue("error",t);break;case"img":case"image":case"link":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"input":Ue("invalid",t),qg(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),fa(t);break;case"select":Ue("invalid",t);break;case"textarea":Ue("invalid",t),Yg(t,i.value,i.defaultValue,i.children),fa(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Jx(t.textContent,n)?(i.popover!=null&&(Ue("beforetoggle",t),Ue("toggle",t)),i.onScroll!=null&&Ue("scroll",t),i.onScrollEnd!=null&&Ue("scrollend",t),i.onClick!=null&&(t.onclick=oc),t=!0):t=!1,t||Eo(e)}function Um(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:qt=qt.return}}function sr(e){if(e!==qt)return!1;if(!ze)return Um(e),ze=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||cd(e.type,e.memoizedProps)),n=!n),n&&pt&&Eo(e),Um(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){pt=Vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}pt=null}}else t===27?(t=pt,lo(e.type)?(e=fd,fd=null,pt=e):pt=t):pt=qt?Vn(e.stateNode.nextSibling):null;return!0}function is(){pt=qt=null,ze=!1}function Pm(){var e=To;return e!==null&&(tn===null?tn=e:tn.push.apply(tn,e),To=null),e}function $r(e){To===null?To=[e]:To.push(e)}var Vu=Zn(null),jo=null,hi=null;function Pi(e,t,n){ft(Vu,t._currentValue),t._currentValue=n}function yi(e){e._currentValue=Vu.current,Rt(Vu)}function $u(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Fu(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){var c=o.child;l=l.firstContext;e:for(;l!==null;){var u=l;l=o;for(var f=0;f<t.length;f++)if(u.context===t[f]){l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),$u(l.return,n,e),i||(c=null);break e}l=u.next}}else if(o.tag===18){if(c=o.return,c===null)throw Error(O(341));c.lanes|=n,l=c.alternate,l!==null&&(l.lanes|=n),$u(c,n,e),c=null}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}}function os(e,t,n,i){e=null;for(var o=t,l=!1;o!==null;){if(!l){if(o.flags&524288)l=!0;else if(o.flags&262144)break}if(o.tag===10){var c=o.alternate;if(c===null)throw Error(O(387));if(c=c.memoizedProps,c!==null){var u=o.type;yn(o.pendingProps.value,c.value)||(e!==null?e.push(u):e=[u])}}else if(o===aa.current){if(c=o.alternate,c===null)throw Error(O(387));c.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(qr):e=[qr])}o=o.return}e!==null&&Fu(t,e,n,i),t.flags|=262144}function ya(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mo(e){jo=e,hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return hy(jo,e)}function Rs(e,t){return jo===null&&Mo(e),hy(e,t)}function hy(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},hi===null){if(e===null)throw Error(O(308));hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hi=hi.next=t;return n}var WT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},XT=Et.unstable_scheduleCallback,KT=Et.unstable_NormalPriority,bt={$$typeof:di,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new WT,data:new Map,refCount:0}}function ls(e){e.refCount--,e.refCount===0&&XT(KT,function(){e.controller.abort()})}var Sr=null,Hu=0,Ml=0,hl=null;function ZT(e,t){if(Sr===null){var n=Sr=[];Hu=0,Ml=Sf(),hl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Hu++,t.then(Vm,Vm),t}function Vm(){if(--Hu===0&&Sr!==null){hl!==null&&(hl.status="fulfilled");var e=Sr;Sr=null,Ml=0,hl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function QT(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var $m=we.S;we.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ZT(e,t),$m!==null&&$m(e,t)};var bo=Zn(null);function ef(){var e=bo.current;return e!==null?e:nt.pooledCache}function Ks(e,t){t===null?ft(bo,bo.current):ft(bo,t.pool)}function py(){var e=ef();return e===null?null:{parent:bt._currentValue,pool:e}}var rs=Error(O(460)),gy=Error(O(474)),Ka=Error(O(542)),Bu={then:function(){}};function Fm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ds(){}function yy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ds,Ds),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bm(e),e;default:if(typeof t.status=="string")t.then(Ds,Ds);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(O(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bm(e),e}throw wr=t,rs}}var wr=null;function Hm(){if(wr===null)throw Error(O(459));var e=wr;return wr=null,e}function Bm(e){if(e===rs||e===Ka)throw Error(O(483))}var Ui=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Yi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ye&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=ha(e),dy(e,null,n),t}return Xa(e,i,t,n),ha(e)}function Er(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$g(e,n)}}function Xc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?o=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Gu=!1;function Mr(){if(Gu){var e=hl;if(e!==null)throw e}}function kr(e,t,n,i){Gu=!1;var o=e.updateQueue;Ui=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,d=f.next;f.next=null,c===null?l=d:c.next=d,c=f;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==c&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=f))}if(l!==null){var h=o.baseState;c=0,m=d=f=null,u=l;do{var p=u.lane&-536870913,g=p!==u.lane;if(g?(Fe&p)===p:(i&p)===p){p!==0&&p===Ml&&(Gu=!0),m!==null&&(m=m.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var v=e,T=u;p=t;var M=n;switch(T.tag){case 1:if(v=T.payload,typeof v=="function"){h=v.call(M,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,p=typeof v=="function"?v.call(M,h,p):v,p==null)break e;h=rt({},h,p);break e;case 2:Ui=!0}}p=u.callback,p!==null&&(e.flags|=64,g&&(e.flags|=8192),g=o.callbacks,g===null?o.callbacks=[p]:g.push(p))}else g={lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=g,f=h):m=m.next=g,c|=p;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;g=u,u=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);m===null&&(f=h),o.baseState=f,o.firstBaseUpdate=d,o.lastBaseUpdate=m,l===null&&(o.shared.lanes=0),no|=c,e.lanes=c,e.memoizedState=h}}function xy(e,t){if(typeof e!="function")throw Error(O(191,e));e.call(t)}function vy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xy(n[e],t)}var kl=Zn(null),xa=Zn(0);function zm(e,t){e=Ti,ft(xa,e),ft(kl,t),Ti=e|t.baseLanes}function qu(){ft(xa,Ti),ft(kl,kl.current)}function nf(){Ti=xa.current,Rt(kl),Rt(xa)}var eo=0,De=null,Xe=null,vt=null,va=!1,pl=!1,ko=!1,Ca=0,Fr=0,gl=null,eb=0;function yt(){throw Error(O(321))}function of(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yn(e[n],t[n]))return!1;return!0}function lf(e,t,n,i,o,l){return eo=l,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,we.H=e===null||e.memoizedState===null?Xy:Ky,ko=!1,l=n(i,o),ko=!1,pl&&(l=Ty(t,n,i,o)),Cy(e),l}function Cy(e){we.H=Ta;var t=Xe!==null&&Xe.next!==null;if(eo=0,vt=Xe=De=null,va=!1,Fr=0,gl=null,t)throw Error(O(300));e===null||Nt||(e=e.dependencies,e!==null&&ya(e)&&(Nt=!0))}function Ty(e,t,n,i){De=e;var o=0;do{if(pl&&(gl=null),Fr=0,pl=!1,25<=o)throw Error(O(301));if(o+=1,vt=Xe=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}we.H=sb,l=t(n,i)}while(pl);return l}function tb(){var e=we.H,t=e.useState()[0];return t=typeof t.then=="function"?ss(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(De.flags|=1024),t}function rf(){var e=Ca!==0;return Ca=0,e}function sf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function af(e){if(va){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}va=!1}eo=0,vt=Xe=De=null,pl=!1,Fr=Ca=0,gl=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?De.memoizedState=vt=e:vt=vt.next=e,vt}function Ct(){if(Xe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=vt===null?De.memoizedState:vt.next;if(t!==null)vt=t,Xe=e;else{if(e===null)throw De.alternate===null?Error(O(467)):Error(O(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},vt===null?De.memoizedState=vt=e:vt=vt.next=e}return vt}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ss(e){var t=Fr;return Fr+=1,gl===null&&(gl=[]),e=yy(gl,e,t),t=De,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,we.H=t===null||t.memoizedState===null?Xy:Ky),e}function Za(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ss(e);if(e.$$typeof===di)return Ht(e)}throw Error(O(438,String(e)))}function uf(e){var t=null,n=De.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=De.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=cf(),De.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=$C;return t.index++,n}function vi(e,t){return typeof t=="function"?t(e):t}function Zs(e){var t=Ct();return df(t,Xe,e)}function df(e,t,n){var i=e.queue;if(i===null)throw Error(O(311));i.lastRenderedReducer=n;var o=e.baseQueue,l=i.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}t.baseQueue=o=l,i.pending=null}if(l=e.baseState,o===null)e.memoizedState=l;else{t=o.next;var u=c=null,f=null,d=t,m=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(Fe&h)===h:(eo&h)===h){var p=d.revertLane;if(p===0)f!==null&&(f=f.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ml&&(m=!0);else if((eo&p)===p){d=d.next,p===Ml&&(m=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=h,c=l):f=f.next=h,De.lanes|=p,no|=p;h=d.action,ko&&n(l,h),l=d.hasEagerState?d.eagerState:n(l,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=p,c=l):f=f.next=p,De.lanes|=h,no|=h;d=d.next}while(d!==null&&d!==t);if(f===null?c=l:f.next=u,!yn(l,e.memoizedState)&&(Nt=!0,m&&(n=hl,n!==null)))throw n;e.memoizedState=l,e.baseState=c,e.baseQueue=f,i.lastRenderedState=l}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Kc(e){var t=Ct(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do l=e(l,c.action),c=c.next;while(c!==o);yn(l,t.memoizedState)||(Nt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function by(e,t,n){var i=De,o=Ct(),l=ze;if(l){if(n===void 0)throw Error(O(407));n=n()}else n=t();var c=!yn((Xe||o).memoizedState,n);c&&(o.memoizedState=n,Nt=!0),o=o.queue;var u=Ey.bind(null,i,o,e);if(as(2048,8,u,[e]),o.getSnapshot!==t||c||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,Al(9,Qa(),wy.bind(null,i,o,n,t),null),nt===null)throw Error(O(349));l||eo&124||Sy(i,t,n)}return n}function Sy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t=cf(),De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wy(e,t,n,i){t.value=n,t.getSnapshot=i,My(t)&&ky(e)}function Ey(e,t,n){return n(function(){My(t)&&ky(e)})}function My(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yn(e,n)}catch{return!0}}function ky(e){var t=Vl(e,2);t!==null&&gn(t,e,2)}function Ou(e){var t=Qt();if(typeof e=="function"){var n=e;if(e=n(),ko){Hi(!0);try{n()}finally{Hi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t}function Ay(e,t,n,i){return e.baseState=n,df(e,Xe,typeof i=="function"?i:vi)}function nb(e,t,n,i,o){if(ec(e))throw Error(O(485));if(e=t.action,e!==null){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){l.listeners.push(c)}};we.T!==null?n(!0):l.isTransition=!1,i(l),n=t.pending,n===null?(l.next=t.pending=l,_y(t,l)):(l.next=n.next,t.pending=n.next=l)}}function _y(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var l=we.T,c={};we.T=c;try{var u=n(o,i),f=we.S;f!==null&&f(c,u),Gm(e,t,u)}catch(d){Yu(e,t,d)}finally{we.T=l}}else try{l=n(o,i),Gm(e,t,l)}catch(d){Yu(e,t,d)}}function Gm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){qm(e,t,i)},function(i){return Yu(e,t,i)}):qm(e,t,n)}function qm(e,t,n){t.status="fulfilled",t.value=n,Ny(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,_y(e,n)))}function Yu(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Ny(t),t=t.next;while(t!==i)}e.action=null}function Ny(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ry(e,t){return t}function Om(e,t){if(ze){var n=nt.formState;if(n!==null){e:{var i=De;if(ze){if(pt){t:{for(var o=pt,l=Yn;o.nodeType!==8;){if(!l){o=null;break t}if(o=Vn(o.nextSibling),o===null){o=null;break t}}l=o.data,o=l==="F!"||l==="F"?o:null}if(o){pt=Vn(o.nextSibling),i=o.data==="F!";break e}}Eo(i)}i=!1}i&&(t=n[0])}}return n=Qt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:t},n.queue=i,n=Yy.bind(null,De,i),i.dispatch=n,i=Ou(!1),l=pf.bind(null,De,!1,i.queue),i=Qt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=nb.bind(null,De,o,l,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ym(e){var t=Ct();return Dy(t,Xe,e)}function Dy(e,t,n){if(t=df(e,t,Ry)[0],e=Zs(vi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ss(t)}catch(c){throw c===rs?Ka:c}else i=t;t=Ct();var o=t.queue,l=o.dispatch;return n!==t.memoizedState&&(De.flags|=2048,Al(9,Qa(),ib.bind(null,o,n),null)),[i,l,e]}function ib(e,t){e.action=t}function Jm(e){var t=Ct(),n=Xe;if(n!==null)return Dy(t,n,e);Ct(),t=t.memoizedState,n=Ct();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Al(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=De.updateQueue,t===null&&(t=cf(),De.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Qa(){return{destroy:void 0,resource:void 0}}function jy(){return Ct().memoizedState}function Qs(e,t,n,i){var o=Qt();i=i===void 0?null:i,De.flags|=e,o.memoizedState=Al(1|t,Qa(),n,i)}function as(e,t,n,i){var o=Ct();i=i===void 0?null:i;var l=o.memoizedState.inst;Xe!==null&&i!==null&&of(i,Xe.memoizedState.deps)?o.memoizedState=Al(t,l,n,i):(De.flags|=e,o.memoizedState=Al(1|t,l,n,i))}function Wm(e,t){Qs(8390656,8,e,t)}function Iy(e,t){as(2048,8,e,t)}function Ly(e,t){return as(4,2,e,t)}function Uy(e,t){return as(4,4,e,t)}function Py(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vy(e,t,n){n=n!=null?n.concat([e]):null,as(4,4,Py.bind(null,t,e),n)}function ff(){}function $y(e,t){var n=Ct();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&of(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Fy(e,t){var n=Ct();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&of(t,i[1]))return i[0];if(i=e(),ko){Hi(!0);try{e()}finally{Hi(!1)}}return n.memoizedState=[i,t],i}function mf(e,t,n){return n===void 0||eo&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Nx(),De.lanes|=e,no|=e,n)}function Hy(e,t,n,i){return yn(n,t)?n:kl.current!==null?(e=mf(e,n,i),yn(e,t)||(Nt=!0),e):eo&42?(e=Nx(),De.lanes|=e,no|=e,t):(Nt=!0,e.memoizedState=n)}function By(e,t,n,i,o){var l=Ge.p;Ge.p=l!==0&&8>l?l:8;var c=we.T,u={};we.T=u,pf(e,!1,t,n);try{var f=o(),d=we.S;if(d!==null&&d(u,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=QT(f,i);Ar(e,t,m,pn(e))}else Ar(e,t,i,pn(e))}catch(h){Ar(e,t,{then:function(){},status:"rejected",reason:h},pn())}finally{Ge.p=l,we.T=c}}function ob(){}function Ju(e,t,n,i){if(e.tag!==5)throw Error(O(476));var o=zy(e).queue;By(e,o,t,xo,n===null?ob:function(){return Gy(e),n(i)})}function zy(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:xo,baseState:xo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:xo},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Gy(e){var t=zy(e).next.queue;Ar(e,t,{},pn())}function hf(){return Ht(qr)}function qy(){return Ct().memoizedState}function Oy(){return Ct().memoizedState}function lb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=pn();e=Yi(n);var i=Ji(t,e,n);i!==null&&(gn(i,t,n),Er(i,t,n)),t={cache:Qd()},e.payload=t;return}t=t.return}}function rb(e,t,n){var i=pn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ec(e)?Jy(t,n):(n=Wd(e,t,n,i),n!==null&&(gn(n,e,i),Wy(n,t,i)))}function Yy(e,t,n){var i=pn();Ar(e,t,n,i)}function Ar(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ec(e))Jy(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var c=t.lastRenderedState,u=l(c,n);if(o.hasEagerState=!0,o.eagerState=u,yn(u,c))return Xa(e,t,o,0),nt===null&&Wa(),!1}catch{}finally{}if(n=Wd(e,t,o,i),n!==null)return gn(n,e,i),Wy(n,t,i),!0}return!1}function pf(e,t,n,i){if(i={lane:2,revertLane:Sf(),action:i,hasEagerState:!1,eagerState:null,next:null},ec(e)){if(t)throw Error(O(479))}else t=Wd(e,n,i,2),t!==null&&gn(t,e,2)}function ec(e){var t=e.alternate;return e===De||t!==null&&t===De}function Jy(e,t){pl=va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wy(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$g(e,n)}}var Ta={readContext:Ht,use:Za,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},Xy={readContext:Ht,use:Za,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Wm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Qs(4194308,4,Py.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){Qs(4,2,e,t)},useMemo:function(e,t){var n=Qt();t=t===void 0?null:t;var i=e();if(ko){Hi(!0);try{e()}finally{Hi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Qt();if(n!==void 0){var o=n(t);if(ko){Hi(!0);try{n(t)}finally{Hi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=rb.bind(null,De,e),[i.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ou(e);var t=e.queue,n=Yy.bind(null,De,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ff,useDeferredValue:function(e,t){var n=Qt();return mf(n,e,t)},useTransition:function(){var e=Ou(!1);return e=By.bind(null,De,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=De,o=Qt();if(ze){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),nt===null)throw Error(O(349));Fe&124||Sy(i,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Wm(Ey.bind(null,i,l,e),[e]),i.flags|=2048,Al(9,Qa(),wy.bind(null,i,l,n,t),null),n},useId:function(){var e=Qt(),t=nt.identifierPrefix;if(ze){var n=mi,i=fi;n=(i&~(1<<32-hn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=Ca++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=eb++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:hf,useFormState:Om,useActionState:Om,useOptimistic:function(e){var t=Qt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=pf.bind(null,De,!0,n),n.dispatch=t,[e,t]},useMemoCache:uf,useCacheRefresh:function(){return Qt().memoizedState=lb.bind(null,De)}},Ky={readContext:Ht,use:Za,useCallback:$y,useContext:Ht,useEffect:Iy,useImperativeHandle:Vy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:Fy,useReducer:Zs,useRef:jy,useState:function(){return Zs(vi)},useDebugValue:ff,useDeferredValue:function(e,t){var n=Ct();return Hy(n,Xe.memoizedState,e,t)},useTransition:function(){var e=Zs(vi)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:ss(e),t]},useSyncExternalStore:by,useId:qy,useHostTransitionStatus:hf,useFormState:Ym,useActionState:Ym,useOptimistic:function(e,t){var n=Ct();return Ay(n,Xe,e,t)},useMemoCache:uf,useCacheRefresh:Oy},sb={readContext:Ht,use:Za,useCallback:$y,useContext:Ht,useEffect:Iy,useImperativeHandle:Vy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:Fy,useReducer:Kc,useRef:jy,useState:function(){return Kc(vi)},useDebugValue:ff,useDeferredValue:function(e,t){var n=Ct();return Xe===null?mf(n,e,t):Hy(n,Xe.memoizedState,e,t)},useTransition:function(){var e=Kc(vi)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:ss(e),t]},useSyncExternalStore:by,useId:qy,useHostTransitionStatus:hf,useFormState:Jm,useActionState:Jm,useOptimistic:function(e,t){var n=Ct();return Xe!==null?Ay(n,Xe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:uf,useCacheRefresh:Oy},yl=null,Hr=0;function js(e){var t=Hr;return Hr+=1,yl===null&&(yl=[]),yy(yl,e,t)}function ar(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Is(e,t){throw t.$$typeof===PC?Error(O(525)):(e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xm(e){var t=e._init;return t(e._payload)}function Zy(e){function t(x,y){if(e){var C=x.deletions;C===null?(x.deletions=[y],x.flags|=16):C.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function i(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function o(x,y){return x=gi(x,y),x.index=0,x.sibling=null,x}function l(x,y,C){return x.index=C,e?(C=x.alternate,C!==null?(C=C.index,C<y?(x.flags|=67108866,y):C):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function c(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function u(x,y,C,S){return y===null||y.tag!==6?(y=Jc(C,x.mode,S),y.return=x,y):(y=o(y,C),y.return=x,y)}function f(x,y,C,S){var k=C.type;return k===Zo?m(x,y,C.props.children,S,C.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Li&&Xm(k)===y.type)?(y=o(y,C.props),ar(y,C),y.return=x,y):(y=Xs(C.type,C.key,C.props,null,x.mode,S),ar(y,C),y.return=x,y)}function d(x,y,C,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Wc(C,x.mode,S),y.return=x,y):(y=o(y,C.children||[]),y.return=x,y)}function m(x,y,C,S,k){return y===null||y.tag!==7?(y=vo(C,x.mode,S,k),y.return=x,y):(y=o(y,C),y.return=x,y)}function h(x,y,C){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Jc(""+y,x.mode,C),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ms:return C=Xs(y.type,y.key,y.props,null,x.mode,C),ar(C,y),C.return=x,C;case pr:return y=Wc(y,x.mode,C),y.return=x,y;case Li:var S=y._init;return y=S(y._payload),h(x,y,C)}if(gr(y)||or(y))return y=vo(y,x.mode,C,null),y.return=x,y;if(typeof y.then=="function")return h(x,js(y),C);if(y.$$typeof===di)return h(x,Rs(x,y),C);Is(x,y)}return null}function p(x,y,C,S){var k=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return k!==null?null:u(x,y,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ms:return C.key===k?f(x,y,C,S):null;case pr:return C.key===k?d(x,y,C,S):null;case Li:return k=C._init,C=k(C._payload),p(x,y,C,S)}if(gr(C)||or(C))return k!==null?null:m(x,y,C,S,null);if(typeof C.then=="function")return p(x,y,js(C),S);if(C.$$typeof===di)return p(x,y,Rs(x,C),S);Is(x,C)}return null}function g(x,y,C,S,k){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return x=x.get(C)||null,u(y,x,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ms:return x=x.get(S.key===null?C:S.key)||null,f(y,x,S,k);case pr:return x=x.get(S.key===null?C:S.key)||null,d(y,x,S,k);case Li:var N=S._init;return S=N(S._payload),g(x,y,C,S,k)}if(gr(S)||or(S))return x=x.get(C)||null,m(y,x,S,k,null);if(typeof S.then=="function")return g(x,y,C,js(S),k);if(S.$$typeof===di)return g(x,y,C,Rs(y,S),k);Is(y,S)}return null}function v(x,y,C,S){for(var k=null,N=null,R=y,B=y=0,X=null;R!==null&&B<C.length;B++){R.index>B?(X=R,R=null):X=R.sibling;var I=p(x,R,C[B],S);if(I===null){R===null&&(R=X);break}e&&R&&I.alternate===null&&t(x,R),y=l(I,y,B),N===null?k=I:N.sibling=I,N=I,R=X}if(B===C.length)return n(x,R),ze&&go(x,B),k;if(R===null){for(;B<C.length;B++)R=h(x,C[B],S),R!==null&&(y=l(R,y,B),N===null?k=R:N.sibling=R,N=R);return ze&&go(x,B),k}for(R=i(R);B<C.length;B++)X=g(R,x,B,C[B],S),X!==null&&(e&&X.alternate!==null&&R.delete(X.key===null?B:X.key),y=l(X,y,B),N===null?k=X:N.sibling=X,N=X);return e&&R.forEach(function(F){return t(x,F)}),ze&&go(x,B),k}function T(x,y,C,S){if(C==null)throw Error(O(151));for(var k=null,N=null,R=y,B=y=0,X=null,I=C.next();R!==null&&!I.done;B++,I=C.next()){R.index>B?(X=R,R=null):X=R.sibling;var F=p(x,R,I.value,S);if(F===null){R===null&&(R=X);break}e&&R&&F.alternate===null&&t(x,R),y=l(F,y,B),N===null?k=F:N.sibling=F,N=F,R=X}if(I.done)return n(x,R),ze&&go(x,B),k;if(R===null){for(;!I.done;B++,I=C.next())I=h(x,I.value,S),I!==null&&(y=l(I,y,B),N===null?k=I:N.sibling=I,N=I);return ze&&go(x,B),k}for(R=i(R);!I.done;B++,I=C.next())I=g(R,x,B,I.value,S),I!==null&&(e&&I.alternate!==null&&R.delete(I.key===null?B:I.key),y=l(I,y,B),N===null?k=I:N.sibling=I,N=I);return e&&R.forEach(function(se){return t(x,se)}),ze&&go(x,B),k}function M(x,y,C,S){if(typeof C=="object"&&C!==null&&C.type===Zo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ms:e:{for(var k=C.key;y!==null;){if(y.key===k){if(k=C.type,k===Zo){if(y.tag===7){n(x,y.sibling),S=o(y,C.props.children),S.return=x,x=S;break e}}else if(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Li&&Xm(k)===y.type){n(x,y.sibling),S=o(y,C.props),ar(S,C),S.return=x,x=S;break e}n(x,y);break}else t(x,y);y=y.sibling}C.type===Zo?(S=vo(C.props.children,x.mode,S,C.key),S.return=x,x=S):(S=Xs(C.type,C.key,C.props,null,x.mode,S),ar(S,C),S.return=x,x=S)}return c(x);case pr:e:{for(k=C.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(x,y.sibling),S=o(y,C.children||[]),S.return=x,x=S;break e}else{n(x,y);break}else t(x,y);y=y.sibling}S=Wc(C,x.mode,S),S.return=x,x=S}return c(x);case Li:return k=C._init,C=k(C._payload),M(x,y,C,S)}if(gr(C))return v(x,y,C,S);if(or(C)){if(k=or(C),typeof k!="function")throw Error(O(150));return C=k.call(C),T(x,y,C,S)}if(typeof C.then=="function")return M(x,y,js(C),S);if(C.$$typeof===di)return M(x,y,Rs(x,C),S);Is(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,y!==null&&y.tag===6?(n(x,y.sibling),S=o(y,C),S.return=x,x=S):(n(x,y),S=Jc(C,x.mode,S),S.return=x,x=S),c(x)):n(x,y)}return function(x,y,C,S){try{Hr=0;var k=M(x,y,C,S);return yl=null,k}catch(R){if(R===rs||R===Ka)throw R;var N=fn(29,R,null,x.mode);return N.lanes=S,N.return=x,N}finally{}}}var _l=Zy(!0),Qy=Zy(!1),Nn=Zn(null),Kn=null;function Vi(e){var t=e.alternate;ft(St,St.current&1),ft(Nn,e),Kn===null&&(t===null||kl.current!==null||t.memoizedState!==null)&&(Kn=e)}function ex(e){if(e.tag===22){if(ft(St,St.current),ft(Nn,e),Kn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Kn=e)}}else $i()}function $i(){ft(St,St.current),ft(Nn,Nn.current)}function pi(e){Rt(Nn),Kn===e&&(Kn=null),Rt(St)}var St=Zn(0);function ba(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||dd(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Zc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wu={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=pn(),o=Yi(i);o.payload=t,n!=null&&(o.callback=n),t=Ji(e,o,i),t!==null&&(gn(t,e,i),Er(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=pn(),o=Yi(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ji(e,o,i),t!==null&&(gn(t,e,i),Er(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pn(),i=Yi(n);i.tag=2,t!=null&&(i.callback=t),t=Ji(e,i,n),t!==null&&(gn(t,e,n),Er(t,e,n))}};function Km(e,t,n,i,o,l,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,c):t.prototype&&t.prototype.isPureReactComponent?!Vr(n,i)||!Vr(o,l):!0}function Zm(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Wu.enqueueReplaceState(t,t.state,null)}function Ao(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=rt({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var Sa=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function tx(e){Sa(e)}function nx(e){console.error(e)}function ix(e){Sa(e)}function wa(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Qm(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Xu(e,t,n){return n=Yi(n),n.tag=3,n.payload={element:null},n.callback=function(){wa(e,t)},n}function ox(e){return e=Yi(e),e.tag=3,e}function lx(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=i.value;e.payload=function(){return o(l)},e.callback=function(){Qm(t,n,i)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Qm(t,n,i),typeof o!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:""})})}function ab(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&os(t,n,o,!0),n=Nn.current,n!==null){switch(n.tag){case 13:return Kn===null?od():n.alternate===null&&gt===0&&(gt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Bu?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),cu(e,i,o)),!1;case 22:return n.flags|=65536,i===Bu?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),cu(e,i,o)),!1}throw Error(O(435,n.tag))}return cu(e,i,o),od(),!1}if(ze)return t=Nn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Pu&&(e=Error(O(422),{cause:i}),$r(kn(e,n)))):(i!==Pu&&(t=Error(O(423),{cause:i}),$r(kn(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=kn(i,n),o=Xu(e.stateNode,i,o),Xc(e,o),gt!==4&&(gt=2)),!1;var l=Error(O(520),{cause:i});if(l=kn(l,n),Rr===null?Rr=[l]:Rr.push(l),gt!==4&&(gt=2),t===null)return!0;i=kn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Xu(n.stateNode,i,e),Xc(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Wi===null||!Wi.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,o=ox(o),lx(o,e,n,i),Xc(n,o),!1}n=n.return}while(n!==null);return!1}var rx=Error(O(461)),Nt=!1;function jt(e,t,n,i){t.child=e===null?Qy(t,null,n,i):_l(t,e.child,n,i)}function eh(e,t,n,i,o){n=n.render;var l=t.ref;if("ref"in i){var c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}else c=i;return Mo(t),i=lf(e,t,n,c,l,o),u=rf(),e!==null&&!Nt?(sf(e,t,o),Ci(e,t,o)):(ze&&u&&Kd(t),t.flags|=1,jt(e,t,i,o),t.child)}function th(e,t,n,i,o){if(e===null){var l=n.type;return typeof l=="function"&&!Xd(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,sx(e,t,l,i,o)):(e=Xs(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!gf(e,o)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:Vr,n(c,i)&&e.ref===t.ref)return Ci(e,t,o)}return t.flags|=1,e=gi(l,i),e.ref=t.ref,e.return=t,t.child=e}function sx(e,t,n,i,o){if(e!==null){var l=e.memoizedProps;if(Vr(l,i)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=i=l,gf(e,o))e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Ci(e,t,o)}return Ku(e,t,n,i,o)}function ax(e,t,n){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=l!==null?l.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;t.childLanes=l&~i}else t.childLanes=0,t.child=null;return nh(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ks(t,l!==null?l.cachePool:null),l!==null?zm(t,l):qu(),ex(t);else return t.lanes=t.childLanes=536870912,nh(e,t,l!==null?l.baseLanes|n:n,n)}else l!==null?(Ks(t,l.cachePool),zm(t,l),$i(),t.memoizedState=null):(e!==null&&Ks(t,null),qu(),$i());return jt(e,t,o,n),t.child}function nh(e,t,n,i){var o=ef();return o=o===null?null:{parent:bt._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Ks(t,null),qu(),ex(t),e!==null&&os(e,t,i,!0),null}function ea(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(O(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ku(e,t,n,i,o){return Mo(t),n=lf(e,t,n,i,void 0,o),i=rf(),e!==null&&!Nt?(sf(e,t,o),Ci(e,t,o)):(ze&&i&&Kd(t),t.flags|=1,jt(e,t,n,o),t.child)}function ih(e,t,n,i,o,l){return Mo(t),t.updateQueue=null,n=Ty(t,i,n,o),Cy(e),i=rf(),e!==null&&!Nt?(sf(e,t,l),Ci(e,t,l)):(ze&&i&&Kd(t),t.flags|=1,jt(e,t,n,l),t.child)}function oh(e,t,n,i,o){if(Mo(t),t.stateNode===null){var l=rl,c=n.contextType;typeof c=="object"&&c!==null&&(l=Ht(c)),l=new n(i,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Wu,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=i,l.state=t.memoizedState,l.refs={},tf(t),c=n.contextType,l.context=typeof c=="object"&&c!==null?Ht(c):rl,l.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(Zc(t,n,c,i),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(c=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),c!==l.state&&Wu.enqueueReplaceState(l,l.state,null),kr(t,i,l,o),Mr(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){l=t.stateNode;var u=t.memoizedProps,f=Ao(n,u);l.props=f;var d=l.context,m=n.contextType;c=rl,typeof m=="object"&&m!==null&&(c=Ht(m));var h=n.getDerivedStateFromProps;m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function",u=t.pendingProps!==u,m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u||d!==c)&&Zm(t,l,i,c),Ui=!1;var p=t.memoizedState;l.state=p,kr(t,i,l,o),Mr(),d=t.memoizedState,u||p!==d||Ui?(typeof h=="function"&&(Zc(t,n,h,i),d=t.memoizedState),(f=Ui||Km(t,n,f,i,p,d,c))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),l.props=i,l.state=d,l.context=c,i=f):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,zu(e,t),c=t.memoizedProps,m=Ao(n,c),l.props=m,h=t.pendingProps,p=l.context,d=n.contextType,f=rl,typeof d=="object"&&d!==null&&(f=Ht(d)),u=n.getDerivedStateFromProps,(d=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||p!==f)&&Zm(t,l,i,f),Ui=!1,p=t.memoizedState,l.state=p,kr(t,i,l,o),Mr();var g=t.memoizedState;c!==h||p!==g||Ui||e!==null&&e.dependencies!==null&&ya(e.dependencies)?(typeof u=="function"&&(Zc(t,n,u,i),g=t.memoizedState),(m=Ui||Km(t,n,m,i,p,g,f)||e!==null&&e.dependencies!==null&&ya(e.dependencies))?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,g,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,g,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),l.props=i,l.state=g,l.context=f,i=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return l=i,ea(e,t),i=(t.flags&128)!==0,l||i?(l=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&i?(t.child=_l(t,e.child,null,o),t.child=_l(t,null,n,o)):jt(e,t,n,o),t.memoizedState=l.state,e=t.child):e=Ci(e,t,o),e}function lh(e,t,n,i){return is(),t.flags|=256,jt(e,t,n,i),t.child}var Qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eu(e){return{baseLanes:e,cachePool:py()}}function tu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=An),e}function cx(e,t,n){var i=t.pendingProps,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(St.current&2)!==0),c&&(o=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(o?Vi(t):$i(),ze){var u=pt,f;if(f=u){e:{for(f=u,u=Yn;f.nodeType!==8;){if(!u){u=null;break e}if(f=Vn(f.nextSibling),f===null){u=null;break e}}u=f}u!==null?(t.memoizedState={dehydrated:u,treeContext:Co!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},f=fn(18,null,null,0),f.stateNode=u,f.return=t,t.child=f,qt=t,pt=null,f=!0):f=!1}f||Eo(t)}if(u=t.memoizedState,u!==null&&(u=u.dehydrated,u!==null))return dd(u)?t.lanes=32:t.lanes=536870912,null;pi(t)}return u=i.children,i=i.fallback,o?($i(),o=t.mode,u=Ea({mode:"hidden",children:u},o),i=vo(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,o=t.child,o.memoizedState=eu(n),o.childLanes=tu(e,c,n),t.memoizedState=Qc,i):(Vi(t),Zu(t,u))}if(f=e.memoizedState,f!==null&&(u=f.dehydrated,u!==null)){if(l)t.flags&256?(Vi(t),t.flags&=-257,t=nu(e,t,n)):t.memoizedState!==null?($i(),t.child=e.child,t.flags|=128,t=null):($i(),o=i.fallback,u=t.mode,i=Ea({mode:"visible",children:i.children},u),o=vo(o,u,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,_l(t,e.child,null,n),i=t.child,i.memoizedState=eu(n),i.childLanes=tu(e,c,n),t.memoizedState=Qc,t=o);else if(Vi(t),dd(u)){if(c=u.nextSibling&&u.nextSibling.dataset,c)var d=c.dgst;c=d,i=Error(O(419)),i.stack="",i.digest=c,$r({value:i,source:null,stack:null}),t=nu(e,t,n)}else if(Nt||os(e,t,n,!1),c=(n&e.childLanes)!==0,Nt||c){if(c=nt,c!==null&&(i=n&-n,i=i&42?1:$d(i),i=i&(c.suspendedLanes|n)?0:i,i!==0&&i!==f.retryLane))throw f.retryLane=i,Vl(e,i),gn(c,e,i),rx;u.data==="$?"||od(),t=nu(e,t,n)}else u.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,pt=Vn(u.nextSibling),qt=t,ze=!0,To=null,Yn=!1,e!==null&&(wn[En++]=fi,wn[En++]=mi,wn[En++]=Co,fi=e.id,mi=e.overflow,Co=t),t=Zu(t,i.children),t.flags|=4096);return t}return o?($i(),o=i.fallback,u=t.mode,f=e.child,d=f.sibling,i=gi(f,{mode:"hidden",children:i.children}),i.subtreeFlags=f.subtreeFlags&65011712,d!==null?o=gi(d,o):(o=vo(o,u,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,u=e.child.memoizedState,u===null?u=eu(n):(f=u.cachePool,f!==null?(d=bt._currentValue,f=f.parent!==d?{parent:d,pool:d}:f):f=py(),u={baseLanes:u.baseLanes|n,cachePool:f}),o.memoizedState=u,o.childLanes=tu(e,c,n),t.memoizedState=Qc,i):(Vi(t),n=e.child,e=n.sibling,n=gi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function Zu(e,t){return t=Ea({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ea(e,t){return e=fn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function nu(e,t,n){return _l(t,e.child,null,n),e=Zu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rh(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),$u(e.return,t,n)}function iu(e,t,n,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function ux(e,t,n){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(jt(e,t,i.children,n),i=St.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rh(e,n,t);else if(e.tag===19)rh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(ft(St,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ba(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),iu(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ba(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}iu(t,!0,n,null,l);break;case"together":iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),no|=t.lanes,!(n&t.childLanes))if(e!==null){if(os(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=gi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ya(e)))}function cb(e,t,n){switch(t.tag){case 3:ca(t,t.stateNode.containerInfo),Pi(t,bt,e.memoizedState.cache),is();break;case 27:case 5:ku(t);break;case 4:ca(t,t.stateNode.containerInfo);break;case 10:Pi(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Vi(t),t.flags|=128,null):n&t.child.childLanes?cx(e,t,n):(Vi(t),e=Ci(e,t,n),e!==null?e.sibling:null);Vi(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(os(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return ux(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ft(St,St.current),i)break;return null;case 22:case 23:return t.lanes=0,ax(e,t,n);case 24:Pi(t,bt,e.memoizedState.cache)}return Ci(e,t,n)}function dx(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!gf(e,n)&&!(t.flags&128))return Nt=!1,cb(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,ze&&t.flags&1048576&&my(t,ga,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")Xd(i)?(e=Ao(i,e),t.tag=1,t=oh(null,t,i,e,n)):(t.tag=0,t=Ku(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===Ud){t.tag=11,t=eh(null,t,i,e,n);break e}else if(o===Pd){t.tag=14,t=th(null,t,i,e,n);break e}}throw t=Eu(i)||i,Error(O(306,t,""))}}return t;case 0:return Ku(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=Ao(i,t.pendingProps),oh(e,t,i,o,n);case 3:e:{if(ca(t,t.stateNode.containerInfo),e===null)throw Error(O(387));i=t.pendingProps;var l=t.memoizedState;o=l.element,zu(e,t),kr(t,i,null,n);var c=t.memoizedState;if(i=c.cache,Pi(t,bt,i),i!==l.cache&&Fu(t,[bt],n,!0),Mr(),i=c.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=lh(e,t,i,n);break e}else if(i!==o){o=kn(Error(O(424)),t),$r(o),t=lh(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(pt=Vn(e.firstChild),qt=t,ze=!0,To=null,Yn=!0,n=Qy(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(is(),i===o){t=Ci(e,t,n);break e}jt(e,t,i,n)}t=t.child}return t;case 26:return ea(e,t),e===null?(n=Sh(t.type,null,t.pendingProps,null))?t.memoizedState=n:ze||(n=t.type,e=t.pendingProps,i=Da(Oi.current).createElement(n),i[Ft]=t,i[nn]=e,Lt(i,n,e),_t(i),t.stateNode=i):t.memoizedState=Sh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ku(t),e===null&&ze&&(i=t.stateNode=Kx(t.type,t.pendingProps,Oi.current),qt=t,Yn=!0,o=pt,lo(t.type)?(fd=o,pt=Vn(i.firstChild)):pt=o),jt(e,t,t.pendingProps.children,n),ea(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((o=i=pt)&&(i=Pb(i,t.type,t.pendingProps,Yn),i!==null?(t.stateNode=i,qt=t,pt=Vn(i.firstChild),Yn=!1,o=!0):o=!1),o||Eo(t)),ku(t),o=t.type,l=t.pendingProps,c=e!==null?e.memoizedProps:null,i=l.children,cd(o,l)?i=null:c!==null&&cd(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=lf(e,t,tb,null,null,n),qr._currentValue=o),ea(e,t),jt(e,t,i,n),t.child;case 6:return e===null&&ze&&((e=n=pt)&&(n=Vb(n,t.pendingProps,Yn),n!==null?(t.stateNode=n,qt=t,pt=null,e=!0):e=!1),e||Eo(t)),null;case 13:return cx(e,t,n);case 4:return ca(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=_l(t,null,i,n):jt(e,t,i,n),t.child;case 11:return eh(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Pi(t,t.type,i.value),jt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,Mo(t),o=Ht(o),i=i(o),t.flags|=1,jt(e,t,i,n),t.child;case 14:return th(e,t,t.type,t.pendingProps,n);case 15:return sx(e,t,t.type,t.pendingProps,n);case 19:return ux(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Ea(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=gi(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ax(e,t,n);case 24:return Mo(t),i=Ht(bt),e===null?(o=ef(),o===null&&(o=nt,l=Qd(),o.pooledCache=l,l.refCount++,l!==null&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:i,cache:o},tf(t),Pi(t,bt,o)):(e.lanes&n&&(zu(e,t),kr(t,null,null,n),Mr()),o=e.memoizedState,l=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Pi(t,bt,i)):(i=l.cache,Pi(t,bt,i),i!==o.cache&&Fu(t,[bt],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(O(156,t.tag))}function si(e){e.flags|=4}function sh(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!ev(t)){if(t=Nn.current,t!==null&&((Fe&4194048)===Fe?Kn!==null:(Fe&62914560)!==Fe&&!(Fe&536870912)||t!==Kn))throw wr=Bu,gy;e.flags|=8192}}function Ls(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pg():536870912,e.lanes|=t,Nl|=t)}function cr(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ub(e,t,n){var i=t.pendingProps;switch(Zd(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return mt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),yi(bt),Sl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(sr(t)?si(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pm())),mt(t),null;case 26:return n=t.memoizedState,e===null?(si(t),n!==null?(mt(t),sh(t,n)):(mt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(si(t),mt(t),sh(t,n)):(mt(t),t.flags&=-16777217):(e.memoizedProps!==i&&si(t),mt(t),t.flags&=-16777217),null;case 27:ua(t),n=Oi.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(!i){if(t.stateNode===null)throw Error(O(166));return mt(t),null}e=Wn.current,sr(t)?Lm(t):(e=Kx(o,i,n),t.stateNode=e,si(t))}return mt(t),null;case 5:if(ua(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(!i){if(t.stateNode===null)throw Error(O(166));return mt(t),null}if(e=Wn.current,sr(t))Lm(t);else{switch(o=Da(Oi.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Ft]=t,e[nn]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Lt(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&si(t)}}return mt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(O(166));if(e=Oi.current,sr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=qt,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Jx(e.nodeValue,n)),e||Eo(t)}else e=Da(e).createTextNode(i),e[Ft]=t,t.stateNode=e}return mt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=sr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[Ft]=t}else is(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),o=!1}else o=Pm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(pi(t),t):(pi(t),null)}if(pi(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var l=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ls(t,t.updateQueue),mt(t),null;case 4:return Sl(),e===null&&wf(t.stateNode.containerInfo),mt(t),null;case 10:return yi(t.type),mt(t),null;case 19:if(Rt(St),o=t.memoizedState,o===null)return mt(t),null;if(i=(t.flags&128)!==0,l=o.rendering,l===null)if(i)cr(o,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ba(e),l!==null){for(t.flags|=128,cr(o,!1),e=l.updateQueue,t.updateQueue=e,Ls(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)fy(n,e),n=n.sibling;return ft(St,St.current&1|2),t.child}e=e.sibling}o.tail!==null&&Xn()>ka&&(t.flags|=128,i=!0,cr(o,!1),t.lanes=4194304)}else{if(!i)if(e=ba(l),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Ls(t,e),cr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ze)return mt(t),null}else 2*Xn()-o.renderingStartTime>ka&&n!==536870912&&(t.flags|=128,i=!0,cr(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xn(),t.sibling=null,e=St.current,ft(St,i?e&1|2:e&1),t):(mt(t),null);case 22:case 23:return pi(t),nf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),n=t.updateQueue,n!==null&&Ls(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Rt(bo),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),yi(bt),mt(t),null;case 25:return null;case 30:return null}throw Error(O(156,t.tag))}function db(e,t){switch(Zd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yi(bt),Sl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ua(t),null;case 13:if(pi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(St),null;case 4:return Sl(),null;case 10:return yi(t.type),null;case 22:case 23:return pi(t),nf(),e!==null&&Rt(bo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return yi(bt),null;case 25:return null;default:return null}}function fx(e,t){switch(Zd(t),t.tag){case 3:yi(bt),Sl();break;case 26:case 27:case 5:ua(t);break;case 4:Sl();break;case 13:pi(t);break;case 19:Rt(St);break;case 10:yi(t.type);break;case 22:case 23:pi(t),nf(),e!==null&&Rt(bo);break;case 24:yi(bt)}}function cs(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var l=n.create,c=n.inst;i=l(),c.destroy=i}n=n.next}while(n!==o)}}catch(u){Qe(t,t.return,u)}}function to(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var l=o.next;i=l;do{if((i.tag&e)===e){var c=i.inst,u=c.destroy;if(u!==void 0){c.destroy=void 0,o=t;var f=n,d=u;try{d()}catch(m){Qe(o,f,m)}}}i=i.next}while(i!==l)}}catch(m){Qe(t,t.return,m)}}function mx(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{vy(t,n)}catch(i){Qe(e,e.return,i)}}}function hx(e,t,n){n.props=Ao(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Qe(e,t,i)}}function _r(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){Qe(e,t,o)}}function Jn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Qe(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Qe(e,t,o)}else n.current=null}function px(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Qe(e,e.return,o)}}function ou(e,t,n){try{var i=e.stateNode;Db(i,e.type,n,t),i[nn]=t}catch(o){Qe(e,e.return,o)}}function gx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&lo(e.type)||e.tag===4}function lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&lo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oc));else if(i!==4&&(i===27&&lo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function Ma(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&lo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ma(e,t,n),e=e.sibling;e!==null;)Ma(e,t,n),e=e.sibling}function yx(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Lt(t,i,n),t[Ft]=e,t[nn]=n}catch(l){Qe(e,e.return,l)}}var ui=!1,xt=!1,ru=!1,ah=typeof WeakSet=="function"?WeakSet:Set,At=null;function fb(e,t){if(e=e.containerInfo,sd=Ua,e=oy(e),Yd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var c=0,u=-1,f=-1,d=0,m=0,h=e,p=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(u=c+o),h!==l||i!==0&&h.nodeType!==3||(f=c+i),h.nodeType===3&&(c+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===e)break t;if(p===n&&++d===o&&(u=c),p===l&&++m===i&&(f=c),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(ad={focusedElem:e,selectionRange:n},Ua=!1,At=t;At!==null;)if(t=At,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,At=e;else for(;At!==null;){switch(t=At,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,i=n.stateNode;try{var v=Ao(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(v,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(T){Qe(n,n.return,T)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ud(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ud(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(O(163))}if(e=t.sibling,e!==null){e.return=t.return,At=e;break}At=t.return}}function xx(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Di(e,n),i&4&&cs(5,n);break;case 1:if(Di(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){Qe(n,n.return,c)}else{var o=Ao(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){Qe(n,n.return,c)}}i&64&&mx(n),i&512&&_r(n,n.return);break;case 3:if(Di(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{vy(e,t)}catch(c){Qe(n,n.return,c)}}break;case 27:t===null&&i&4&&yx(n);case 26:case 5:Di(e,n),t===null&&i&4&&px(n),i&512&&_r(n,n.return);break;case 12:Di(e,n);break;case 13:Di(e,n),i&4&&Tx(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Tb.bind(null,n),$b(e,n))));break;case 22:if(i=n.memoizedState!==null||ui,!i){t=t!==null&&t.memoizedState!==null||xt,o=ui;var l=xt;ui=i,(xt=t)&&!l?Ii(e,n,(n.subtreeFlags&8772)!==0):Di(e,n),ui=o,xt=l}break;case 30:break;default:Di(e,n)}}function vx(e){var t=e.alternate;t!==null&&(e.alternate=null,vx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Hd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ct=null,en=!1;function ai(e,t,n){for(n=n.child;n!==null;)Cx(e,t,n),n=n.sibling}function Cx(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 26:xt||Jn(n,t),ai(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:xt||Jn(n,t);var i=ct,o=en;lo(n.type)&&(ct=n.stateNode,en=!1),ai(e,t,n),jr(n.stateNode),ct=i,en=o;break;case 5:xt||Jn(n,t);case 6:if(i=ct,o=en,ct=null,ai(e,t,n),ct=i,en=o,ct!==null)if(en)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(n.stateNode)}catch(l){Qe(n,t,l)}else try{ct.removeChild(n.stateNode)}catch(l){Qe(n,t,l)}break;case 18:ct!==null&&(en?(e=ct,Ch(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Jr(e)):Ch(ct,n.stateNode));break;case 4:i=ct,o=en,ct=n.stateNode.containerInfo,en=!0,ai(e,t,n),ct=i,en=o;break;case 0:case 11:case 14:case 15:xt||to(2,n,t),xt||to(4,n,t),ai(e,t,n);break;case 1:xt||(Jn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&hx(n,t,i)),ai(e,t,n);break;case 21:ai(e,t,n);break;case 22:xt=(i=xt)||n.memoizedState!==null,ai(e,t,n),xt=i;break;default:ai(e,t,n)}}function Tx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Jr(e)}catch(n){Qe(t,t.return,n)}}function mb(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ah),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ah),t;default:throw Error(O(435,e.tag))}}function su(e,t){var n=mb(e);t.forEach(function(i){var o=bb.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function an(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],l=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 27:if(lo(u.type)){ct=u.stateNode,en=!1;break e}break;case 5:ct=u.stateNode,en=!1;break e;case 3:case 4:ct=u.stateNode.containerInfo,en=!0;break e}u=u.return}if(ct===null)throw Error(O(160));Cx(l,c,o),ct=null,en=!1,l=o.alternate,l!==null&&(l.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)bx(t,e),t=t.sibling}var Pn=null;function bx(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:an(t,e),cn(e),i&4&&(to(3,e,e.return),cs(3,e),to(5,e,e.return));break;case 1:an(t,e),cn(e),i&512&&(xt||n===null||Jn(n,n.return)),i&64&&ui&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Pn;if(an(t,e),cn(e),i&512&&(xt||n===null||Jn(n,n.return)),i&4){var l=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":l=o.getElementsByTagName("title")[0],(!l||l[ts]||l[Ft]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=o.createElement(i),o.head.insertBefore(l,o.querySelector("head > title"))),Lt(l,i,n),l[Ft]=e,_t(l),i=l;break e;case"link":var c=Eh("link","href",o).get(i+(n.href||""));if(c){for(var u=0;u<c.length;u++)if(l=c[u],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(u,1);break t}}l=o.createElement(i),Lt(l,i,n),o.head.appendChild(l);break;case"meta":if(c=Eh("meta","content",o).get(i+(n.content||""))){for(u=0;u<c.length;u++)if(l=c[u],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(u,1);break t}}l=o.createElement(i),Lt(l,i,n),o.head.appendChild(l);break;default:throw Error(O(468,i))}l[Ft]=e,_t(l),i=l}e.stateNode=i}else Mh(o,e.type,e.stateNode);else e.stateNode=wh(o,i,e.memoizedProps);else l!==i?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,i===null?Mh(o,e.type,e.stateNode):wh(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&ou(e,e.memoizedProps,n.memoizedProps)}break;case 27:an(t,e),cn(e),i&512&&(xt||n===null||Jn(n,n.return)),n!==null&&i&4&&ou(e,e.memoizedProps,n.memoizedProps);break;case 5:if(an(t,e),cn(e),i&512&&(xt||n===null||Jn(n,n.return)),e.flags&32){o=e.stateNode;try{El(o,"")}catch(g){Qe(e,e.return,g)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,ou(e,o,n!==null?n.memoizedProps:o)),i&1024&&(ru=!0);break;case 6:if(an(t,e),cn(e),i&4){if(e.stateNode===null)throw Error(O(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(g){Qe(e,e.return,g)}}break;case 3:if(ia=null,o=Pn,Pn=ja(t.containerInfo),an(t,e),Pn=o,cn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Jr(t.containerInfo)}catch(g){Qe(e,e.return,g)}ru&&(ru=!1,Sx(e));break;case 4:i=Pn,Pn=ja(e.stateNode.containerInfo),an(t,e),cn(e),Pn=i;break;case 12:an(t,e),cn(e);break;case 13:an(t,e),cn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tf=Xn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,su(e,i)));break;case 22:o=e.memoizedState!==null;var f=n!==null&&n.memoizedState!==null,d=ui,m=xt;if(ui=d||o,xt=m||f,an(t,e),xt=m,ui=d,cn(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||f||ui||xt||yo(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){f=n=t;try{if(l=f.stateNode,o)c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{u=f.stateNode;var h=f.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;u.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(g){Qe(f,f.return,g)}}}else if(t.tag===6){if(n===null){f=t;try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(g){Qe(f,f.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,su(e,n))));break;case 19:an(t,e),cn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,su(e,i)));break;case 30:break;case 21:break;default:an(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(gx(i)){n=i;break}i=i.return}if(n==null)throw Error(O(160));switch(n.tag){case 27:var o=n.stateNode,l=lu(e);Ma(e,l,o);break;case 5:var c=n.stateNode;n.flags&32&&(El(c,""),n.flags&=-33);var u=lu(e);Ma(e,u,c);break;case 3:case 4:var f=n.stateNode.containerInfo,d=lu(e);Qu(e,d,f);break;default:throw Error(O(161))}}catch(m){Qe(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Sx(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Di(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xx(e,t.alternate,t),t=t.sibling}function yo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:to(4,t,t.return),yo(t);break;case 1:Jn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&hx(t,t.return,n),yo(t);break;case 27:jr(t.stateNode);case 26:case 5:Jn(t,t.return),yo(t);break;case 22:t.memoizedState===null&&yo(t);break;case 30:yo(t);break;default:yo(t)}e=e.sibling}}function Ii(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,l=t,c=l.flags;switch(l.tag){case 0:case 11:case 15:Ii(o,l,n),cs(4,l);break;case 1:if(Ii(o,l,n),i=l,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(d){Qe(i,i.return,d)}if(i=l,o=i.updateQueue,o!==null){var u=i.stateNode;try{var f=o.shared.hiddenCallbacks;if(f!==null)for(o.shared.hiddenCallbacks=null,o=0;o<f.length;o++)xy(f[o],u)}catch(d){Qe(i,i.return,d)}}n&&c&64&&mx(l),_r(l,l.return);break;case 27:yx(l);case 26:case 5:Ii(o,l,n),n&&i===null&&c&4&&px(l),_r(l,l.return);break;case 12:Ii(o,l,n);break;case 13:Ii(o,l,n),n&&c&4&&Tx(o,l);break;case 22:l.memoizedState===null&&Ii(o,l,n),_r(l,l.return);break;case 30:break;default:Ii(o,l,n)}t=t.sibling}}function yf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ls(n))}function xf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ls(e))}function Gn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wx(e,t,n,i),t=t.sibling}function wx(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Gn(e,t,n,i),o&2048&&cs(9,t);break;case 1:Gn(e,t,n,i);break;case 3:Gn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ls(e)));break;case 12:if(o&2048){Gn(e,t,n,i),e=t.stateNode;try{var l=t.memoizedProps,c=l.id,u=l.onPostCommit;typeof u=="function"&&u(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){Qe(t,t.return,f)}}else Gn(e,t,n,i);break;case 13:Gn(e,t,n,i);break;case 23:break;case 22:l=t.stateNode,c=t.alternate,t.memoizedState!==null?l._visibility&2?Gn(e,t,n,i):Nr(e,t):l._visibility&2?Gn(e,t,n,i):(l._visibility|=2,Wo(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&yf(c,t);break;case 24:Gn(e,t,n,i),o&2048&&xf(t.alternate,t);break;default:Gn(e,t,n,i)}}function Wo(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,c=t,u=n,f=i,d=c.flags;switch(c.tag){case 0:case 11:case 15:Wo(l,c,u,f,o),cs(8,c);break;case 23:break;case 22:var m=c.stateNode;c.memoizedState!==null?m._visibility&2?Wo(l,c,u,f,o):Nr(l,c):(m._visibility|=2,Wo(l,c,u,f,o)),o&&d&2048&&yf(c.alternate,c);break;case 24:Wo(l,c,u,f,o),o&&d&2048&&xf(c.alternate,c);break;default:Wo(l,c,u,f,o)}t=t.sibling}}function Nr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:Nr(n,i),o&2048&&yf(i.alternate,i);break;case 24:Nr(n,i),o&2048&&xf(i.alternate,i);break;default:Nr(n,i)}t=t.sibling}}var xr=8192;function qo(e){if(e.subtreeFlags&xr)for(e=e.child;e!==null;)Ex(e),e=e.sibling}function Ex(e){switch(e.tag){case 26:qo(e),e.flags&xr&&e.memoizedState!==null&&Zb(Pn,e.memoizedState,e.memoizedProps);break;case 5:qo(e);break;case 3:case 4:var t=Pn;Pn=ja(e.stateNode.containerInfo),qo(e),Pn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=xr,xr=16777216,qo(e),xr=t):qo(e));break;default:qo(e)}}function Mx(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ur(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];At=i,Ax(i,e)}Mx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kx(e),e=e.sibling}function kx(e){switch(e.tag){case 0:case 11:case 15:ur(e),e.flags&2048&&to(9,e,e.return);break;case 3:ur(e);break;case 12:ur(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ta(e)):ur(e);break;default:ur(e)}}function ta(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];At=i,Ax(i,e)}Mx(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:to(8,t,t.return),ta(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ta(t));break;default:ta(t)}e=e.sibling}}function Ax(e,t){for(;At!==null;){var n=At;switch(n.tag){case 0:case 11:case 15:to(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ls(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,At=i;else e:for(n=e;At!==null;){i=At;var o=i.sibling,l=i.return;if(vx(i),i===n){At=null;break e}if(o!==null){o.return=l,At=o;break e}At=l}}}var hb={getCacheForType:function(e){var t=Ht(bt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},pb=typeof WeakMap=="function"?WeakMap:Map,Ye=0,nt=null,Pe=null,Fe=0,Oe=0,dn=null,zi=!1,$l=!1,vf=!1,Ti=0,gt=0,no=0,So=0,Cf=0,An=0,Nl=0,Rr=null,tn=null,ed=!1,Tf=0,ka=1/0,Aa=null,Wi=null,It=0,Xi=null,Rl=null,xl=0,td=0,nd=null,_x=null,Dr=0,id=null;function pn(){if(Ye&2&&Fe!==0)return Fe&-Fe;if(we.T!==null){var e=Ml;return e!==0?e:Sf()}return Fg()}function Nx(){An===0&&(An=!(Fe&536870912)||ze?Ug():536870912);var e=Nn.current;return e!==null&&(e.flags|=32),An}function gn(e,t,n){(e===nt&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Dl(e,0),Gi(e,Fe,An,!1)),es(e,n),(!(Ye&2)||e!==nt)&&(e===nt&&(!(Ye&2)&&(So|=n),gt===4&&Gi(e,Fe,An,!1)),Qn(e))}function Rx(e,t,n){if(Ye&6)throw Error(O(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Qr(e,t),o=i?xb(e,t):au(e,t,!0),l=i;do{if(o===0){$l&&!i&&Gi(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!gb(n)){o=au(e,t,!1),l=!1;continue}if(o===2){if(l=t,e.errorRecoveryDisabledLanes&l)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var u=e;o=Rr;var f=u.current.memoizedState.isDehydrated;if(f&&(Dl(u,c).flags|=256),c=au(u,c,!1),c!==2){if(vf&&!f){u.errorRecoveryDisabledLanes|=l,So|=l,o=4;break e}l=tn,tn=o,l!==null&&(tn===null?tn=l:tn.push.apply(tn,l))}o=c}if(l=!1,o!==2)continue}}if(o===1){Dl(e,0),Gi(e,t,0,!0);break}e:{switch(i=e,l=o,l){case 0:case 1:throw Error(O(345));case 4:if((t&4194048)!==t)break;case 6:Gi(i,t,An,!zi);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(O(329))}if((t&62914560)===t&&(o=Tf+300-Xn(),10<o)){if(Gi(i,t,An,!zi),qa(i,0,!0)!==0)break e;i.timeoutHandle=Xx(ch.bind(null,i,n,tn,Aa,ed,t,An,So,Nl,zi,l,2,-0,0),o);break e}ch(i,n,tn,Aa,ed,t,An,So,Nl,zi,l,0,-0,0)}}break}while(!0);Qn(e)}function ch(e,t,n,i,o,l,c,u,f,d,m,h,p,g){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(Gr={stylesheets:null,count:0,unsuspend:Kb},Ex(t),h=Qb(),h!==null)){e.cancelPendingCommit=h(dh.bind(null,e,t,l,n,i,o,c,u,f,m,1,p,g)),Gi(e,l,c,!d);return}dh(e,t,l,n,i,o,c,u,f)}function gb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!yn(l(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gi(e,t,n,i){t&=~Cf,t&=~So,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var l=31-hn(o),c=1<<l;i[l]=-1,o&=~c}n!==0&&Vg(e,n,t)}function tc(){return Ye&6?!0:(us(0),!1)}function bf(){if(Pe!==null){if(Oe===0)var e=Pe.return;else e=Pe,hi=jo=null,af(e),yl=null,Hr=0,e=Pe;for(;e!==null;)fx(e.alternate,e),e=e.return;Pe=null}}function Dl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ib(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),bf(),nt=e,Pe=n=gi(e.current,null),Fe=t,Oe=0,dn=null,zi=!1,$l=Qr(e,t),vf=!1,Nl=An=Cf=So=no=gt=0,tn=Rr=null,ed=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-hn(i),l=1<<o;t|=e[o],i&=~l}return Ti=t,Wa(),n}function Dx(e,t){De=null,we.H=Ta,t===rs||t===Ka?(t=Hm(),Oe=3):t===gy?(t=Hm(),Oe=4):Oe=t===rx?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,dn=t,Pe===null&&(gt=1,wa(e,kn(t,e.current)))}function jx(){var e=we.H;return we.H=Ta,e===null?Ta:e}function Ix(){var e=we.A;return we.A=hb,e}function od(){gt=4,zi||(Fe&4194048)!==Fe&&Nn.current!==null||($l=!0),!(no&134217727)&&!(So&134217727)||nt===null||Gi(nt,Fe,An,!1)}function au(e,t,n){var i=Ye;Ye|=2;var o=jx(),l=Ix();(nt!==e||Fe!==t)&&(Aa=null,Dl(e,t)),t=!1;var c=gt;e:do try{if(Oe!==0&&Pe!==null){var u=Pe,f=dn;switch(Oe){case 8:bf(),c=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(t=!0);var d=Oe;if(Oe=0,dn=null,cl(e,u,f,d),n&&$l){c=0;break e}break;default:d=Oe,Oe=0,dn=null,cl(e,u,f,d)}}yb(),c=gt;break}catch(m){Dx(e,m)}while(!0);return t&&e.shellSuspendCounter++,hi=jo=null,Ye=i,we.H=o,we.A=l,Pe===null&&(nt=null,Fe=0,Wa()),c}function yb(){for(;Pe!==null;)Lx(Pe)}function xb(e,t){var n=Ye;Ye|=2;var i=jx(),o=Ix();nt!==e||Fe!==t?(Aa=null,ka=Xn()+500,Dl(e,t)):$l=Qr(e,t);e:do try{if(Oe!==0&&Pe!==null){t=Pe;var l=dn;t:switch(Oe){case 1:Oe=0,dn=null,cl(e,t,l,1);break;case 2:case 9:if(Fm(l)){Oe=0,dn=null,uh(t);break}t=function(){Oe!==2&&Oe!==9||nt!==e||(Oe=7),Qn(e)},l.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Fm(l)?(Oe=0,dn=null,uh(t)):(Oe=0,dn=null,cl(e,t,l,7));break;case 5:var c=null;switch(Pe.tag){case 26:c=Pe.memoizedState;case 5:case 27:var u=Pe;if(!c||ev(c)){Oe=0,dn=null;var f=u.sibling;if(f!==null)Pe=f;else{var d=u.return;d!==null?(Pe=d,nc(d)):Pe=null}break t}}Oe=0,dn=null,cl(e,t,l,5);break;case 6:Oe=0,dn=null,cl(e,t,l,6);break;case 8:bf(),gt=6;break e;default:throw Error(O(462))}}vb();break}catch(m){Dx(e,m)}while(!0);return hi=jo=null,we.H=i,we.A=o,Ye=n,Pe!==null?0:(nt=null,Fe=0,Wa(),gt)}function vb(){for(;Pe!==null&&!HC();)Lx(Pe)}function Lx(e){var t=dx(e.alternate,e,Ti);e.memoizedProps=e.pendingProps,t===null?nc(e):Pe=t}function uh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ih(n,t,t.pendingProps,t.type,void 0,Fe);break;case 11:t=ih(n,t,t.pendingProps,t.type.render,t.ref,Fe);break;case 5:af(t);default:fx(n,t),t=Pe=fy(t,Ti),t=dx(n,t,Ti)}e.memoizedProps=e.pendingProps,t===null?nc(e):Pe=t}function cl(e,t,n,i){hi=jo=null,af(t),yl=null,Hr=0;var o=t.return;try{if(ab(e,o,t,n,Fe)){gt=1,wa(e,kn(n,e.current)),Pe=null;return}}catch(l){if(o!==null)throw Pe=o,l;gt=1,wa(e,kn(n,e.current)),Pe=null;return}t.flags&32768?(ze||i===1?e=!0:$l||Fe&536870912?e=!1:(zi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Nn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Ux(t,e)):nc(t)}function nc(e){var t=e;do{if(t.flags&32768){Ux(t,zi);return}e=t.return;var n=ub(t.alternate,t,Ti);if(n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);gt===0&&(gt=5)}function Ux(e,t){do{var n=db(e.alternate,e);if(n!==null){n.flags&=32767,Pe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Pe=e;return}Pe=e=n}while(e!==null);gt=6,Pe=null}function dh(e,t,n,i,o,l,c,u,f){e.cancelPendingCommit=null;do ic();while(It!==0);if(Ye&6)throw Error(O(327));if(t!==null){if(t===e.current)throw Error(O(177));if(l=t.lanes|t.childLanes,l|=Jd,KC(e,n,l,c,u,f),e===nt&&(Pe=nt=null,Fe=0),Rl=t,Xi=e,xl=n,td=l,nd=o,_x=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Sb(da,function(){return Hx(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=we.T,we.T=null,o=Ge.p,Ge.p=2,c=Ye,Ye|=4;try{fb(e,t,n)}finally{Ye=c,Ge.p=o,we.T=i}}It=1,Px(),Vx(),$x()}}function Px(){if(It===1){It=0;var e=Xi,t=Rl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=we.T,we.T=null;var i=Ge.p;Ge.p=2;var o=Ye;Ye|=4;try{bx(t,e);var l=ad,c=oy(e.containerInfo),u=l.focusedElem,f=l.selectionRange;if(c!==u&&u&&u.ownerDocument&&iy(u.ownerDocument.documentElement,u)){if(f!==null&&Yd(u)){var d=f.start,m=f.end;if(m===void 0&&(m=d),"selectionStart"in u)u.selectionStart=d,u.selectionEnd=Math.min(m,u.value.length);else{var h=u.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var g=p.getSelection(),v=u.textContent.length,T=Math.min(f.start,v),M=f.end===void 0?T:Math.min(f.end,v);!g.extend&&T>M&&(c=M,M=T,T=c);var x=Dm(u,T),y=Dm(u,M);if(x&&y&&(g.rangeCount!==1||g.anchorNode!==x.node||g.anchorOffset!==x.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var C=h.createRange();C.setStart(x.node,x.offset),g.removeAllRanges(),T>M?(g.addRange(C),g.extend(y.node,y.offset)):(C.setEnd(y.node,y.offset),g.addRange(C))}}}}for(h=[],g=u;g=g.parentNode;)g.nodeType===1&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<h.length;u++){var S=h[u];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Ua=!!sd,ad=sd=null}finally{Ye=o,Ge.p=i,we.T=n}}e.current=t,It=2}}function Vx(){if(It===2){It=0;var e=Xi,t=Rl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=we.T,we.T=null;var i=Ge.p;Ge.p=2;var o=Ye;Ye|=4;try{xx(e,t.alternate,t)}finally{Ye=o,Ge.p=i,we.T=n}}It=3}}function $x(){if(It===4||It===3){It=0,BC();var e=Xi,t=Rl,n=xl,i=_x;t.subtreeFlags&10256||t.flags&10256?It=5:(It=0,Rl=Xi=null,Fx(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Wi=null),Fd(n),t=t.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=we.T,o=Ge.p,Ge.p=2,we.T=null;try{for(var l=e.onRecoverableError,c=0;c<i.length;c++){var u=i[c];l(u.value,{componentStack:u.stack})}}finally{we.T=t,Ge.p=o}}xl&3&&ic(),Qn(e),o=e.pendingLanes,n&4194090&&o&42?e===id?Dr++:(Dr=0,id=e):Dr=0,us(0)}}function Fx(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ls(t)))}function ic(e){return Px(),Vx(),$x(),Hx()}function Hx(){if(It!==5)return!1;var e=Xi,t=td;td=0;var n=Fd(xl),i=we.T,o=Ge.p;try{Ge.p=32>n?32:n,we.T=null,n=nd,nd=null;var l=Xi,c=xl;if(It=0,Rl=Xi=null,xl=0,Ye&6)throw Error(O(331));var u=Ye;if(Ye|=4,kx(l.current),wx(l,l.current,c,n),Ye=u,us(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Zr,l)}catch{}return!0}finally{Ge.p=o,we.T=i,Fx(e,t)}}function fh(e,t,n){t=kn(n,t),t=Xu(e.stateNode,t,2),e=Ji(e,t,2),e!==null&&(es(e,2),Qn(e))}function Qe(e,t,n){if(e.tag===3)fh(e,e,n);else for(;t!==null;){if(t.tag===3){fh(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wi===null||!Wi.has(i))){e=kn(n,e),n=ox(2),i=Ji(t,n,2),i!==null&&(lx(n,i,t,e),es(i,2),Qn(i));break}}t=t.return}}function cu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new pb;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(vf=!0,o.add(n),e=Cb.bind(null,e,t,n),t.then(e,e))}function Cb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,nt===e&&(Fe&n)===n&&(gt===4||gt===3&&(Fe&62914560)===Fe&&300>Xn()-Tf?!(Ye&2)&&Dl(e,0):Cf|=n,Nl===Fe&&(Nl=0)),Qn(e)}function Bx(e,t){t===0&&(t=Pg()),e=Vl(e,t),e!==null&&(es(e,t),Qn(e))}function Tb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bx(e,n)}function bb(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(O(314))}i!==null&&i.delete(t),Bx(e,n)}function Sb(e,t){return Vd(e,t)}var _a=null,Xo=null,ld=!1,Na=!1,uu=!1,wo=0;function Qn(e){e!==Xo&&e.next===null&&(Xo===null?_a=Xo=e:Xo=Xo.next=e),Na=!0,ld||(ld=!0,Eb())}function us(e,t){if(!uu&&Na){uu=!0;do for(var n=!1,i=_a;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var l=0;else{var c=i.suspendedLanes,u=i.pingedLanes;l=(1<<31-hn(42|e)+1)-1,l&=o&~(c&~u),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,mh(i,l))}else l=Fe,l=qa(i,i===nt?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(l&3)||Qr(i,l)||(n=!0,mh(i,l));i=i.next}while(n);uu=!1}}function wb(){zx()}function zx(){Na=ld=!1;var e=0;wo!==0&&(jb()&&(e=wo),wo=0);for(var t=Xn(),n=null,i=_a;i!==null;){var o=i.next,l=Gx(i,t);l===0?(i.next=null,n===null?_a=o:n.next=o,o===null&&(Xo=n)):(n=i,(e!==0||l&3)&&(Na=!0)),i=o}us(e)}function Gx(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var c=31-hn(l),u=1<<c,f=o[c];f===-1?(!(u&n)||u&i)&&(o[c]=XC(u,t)):f<=t&&(e.expiredLanes|=u),l&=~u}if(t=nt,n=Fe,n=qa(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Uc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Qr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Uc(i),Fd(n)){case 2:case 8:n=Ig;break;case 32:n=da;break;case 268435456:n=Lg;break;default:n=da}return i=qx.bind(null,e),n=Vd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Uc(i),e.callbackPriority=2,e.callbackNode=null,2}function qx(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ic()&&e.callbackNode!==n)return null;var i=Fe;return i=qa(e,e===nt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Rx(e,i,t),Gx(e,Xn()),e.callbackNode!=null&&e.callbackNode===n?qx.bind(null,e):null)}function mh(e,t){if(ic())return null;Rx(e,t,!0)}function Eb(){Lb(function(){Ye&6?Vd(jg,wb):zx()})}function Sf(){return wo===0&&(wo=Ug()),wo}function hh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ys(""+e)}function ph(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Mb(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var l=hh((o[nn]||null).action),c=i.submitter;c&&(t=(t=c[nn]||null)?hh(t.formAction):c.getAttribute("formAction"),t!==null&&(l=t,c=null));var u=new Oa("action","action",null,i,o);e.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(wo!==0){var f=c?ph(o,c):new FormData(o);Ju(n,{pending:!0,data:f,method:o.method,action:l},null,f)}}else typeof l=="function"&&(u.preventDefault(),f=c?ph(o,c):new FormData(o),Ju(n,{pending:!0,data:f,method:o.method,action:l},l,f))},currentTarget:o}]})}}for(var du=0;du<Uu.length;du++){var fu=Uu[du],kb=fu.toLowerCase(),Ab=fu[0].toUpperCase()+fu.slice(1);$n(kb,"on"+Ab)}$n(ry,"onAnimationEnd");$n(sy,"onAnimationIteration");$n(ay,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(qT,"onTransitionRun");$n(OT,"onTransitionStart");$n(YT,"onTransitionCancel");$n(cy,"onTransitionEnd");wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_b=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Br));function Ox(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var c=i.length-1;0<=c;c--){var u=i[c],f=u.instance,d=u.currentTarget;if(u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){Sa(m)}o.currentTarget=null,l=f}else for(c=0;c<i.length;c++){if(u=i[c],f=u.instance,d=u.currentTarget,u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){Sa(m)}o.currentTarget=null,l=f}}}}function Ue(e,t){var n=t[_u];n===void 0&&(n=t[_u]=new Set);var i=e+"__bubble";n.has(i)||(Yx(t,e,2,!1),n.add(i))}function mu(e,t,n){var i=0;t&&(i|=4),Yx(n,e,i,t)}var Us="_reactListening"+Math.random().toString(36).slice(2);function wf(e){if(!e[Us]){e[Us]=!0,Hg.forEach(function(n){n!=="selectionchange"&&(_b.has(n)||mu(n,!1,e),mu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Us]||(t[Us]=!0,mu("selectionchange",!1,t))}}function Yx(e,t,n,i){switch(lv(t)){case 2:var o=n2;break;case 8:o=i2;break;default:o=Af}n=o.bind(null,t,n,e),o=void 0,!ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function hu(e,t,n,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var u=i.stateNode.containerInfo;if(u===o)break;if(c===4)for(c=i.return;c!==null;){var f=c.tag;if((f===3||f===4)&&c.stateNode.containerInfo===o)return;c=c.return}for(;u!==null;){if(c=el(u),c===null)return;if(f=c.tag,f===5||f===6||f===26||f===27){i=l=c;continue e}u=u.parentNode}}i=i.return}Wg(function(){var d=l,m=zd(n),h=[];e:{var p=uy.get(e);if(p!==void 0){var g=Oa,v=e;switch(e){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":g=ST;break;case"focusin":v="focus",g=Gc;break;case"focusout":v="blur",g=Gc;break;case"beforeblur":case"afterblur":g=Gc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=MT;break;case ry:case sy:case ay:g=hT;break;case cy:g=AT;break;case"scroll":case"scrollend":g=cT;break;case"wheel":g=NT;break;case"copy":case"cut":case"paste":g=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wm;break;case"toggle":case"beforetoggle":g=DT}var T=(t&4)!==0,M=!T&&(e==="scroll"||e==="scrollend"),x=T?p!==null?p+"Capture":null:p;T=[];for(var y=d,C;y!==null;){var S=y;if(C=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||C===null||x===null||(S=Ur(y,x),S!=null&&T.push(zr(y,S,C))),M)break;y=y.return}0<T.length&&(p=new g(p,v,null,n,m),h.push({event:p,listeners:T}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==Du&&(v=n.relatedTarget||n.fromElement)&&(el(v)||v[Ul]))break e;if((g||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=d,v=v?el(v):null,v!==null&&(M=Kr(v),T=v.tag,v!==M||T!==5&&T!==27&&T!==6)&&(v=null)):(g=null,v=d),g!==v)){if(T=bm,S="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(T=wm,S="onPointerLeave",x="onPointerEnter",y="pointer"),M=g==null?p:yr(g),C=v==null?p:yr(v),p=new T(S,y+"leave",g,n,m),p.target=M,p.relatedTarget=C,S=null,el(m)===d&&(T=new T(x,y+"enter",v,n,m),T.target=C,T.relatedTarget=M,S=T),M=S,g&&v)t:{for(T=g,x=v,y=0,C=T;C;C=Oo(C))y++;for(C=0,S=x;S;S=Oo(S))C++;for(;0<y-C;)T=Oo(T),y--;for(;0<C-y;)x=Oo(x),C--;for(;y--;){if(T===x||x!==null&&T===x.alternate)break t;T=Oo(T),x=Oo(x)}T=null}else T=null;g!==null&&gh(h,p,g,T,!1),v!==null&&M!==null&&gh(h,M,v,T,!0)}}e:{if(p=d?yr(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var k=Am;else if(km(p))if(ty)k=BT;else{k=FT;var N=$T}else g=p.nodeName,!g||g.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&Bd(d.elementType)&&(k=Am):k=HT;if(k&&(k=k(e,d))){ey(h,k,n,m);break e}N&&N(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&Ru(p,"number",p.value)}switch(N=d?yr(d):window,e){case"focusin":(km(N)||N.contentEditable==="true")&&(il=N,Iu=d,br=null);break;case"focusout":br=Iu=il=null;break;case"mousedown":Lu=!0;break;case"contextmenu":case"mouseup":case"dragend":Lu=!1,jm(h,n,m);break;case"selectionchange":if(GT)break;case"keydown":case"keyup":jm(h,n,m)}var R;if(Od)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else nl?Zg(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Kg&&n.locale!=="ko"&&(nl||B!=="onCompositionStart"?B==="onCompositionEnd"&&nl&&(R=Xg()):(Bi=m,Gd="value"in Bi?Bi.value:Bi.textContent,nl=!0)),N=Ra(d,B),0<N.length&&(B=new Sm(B,e,null,n,m),h.push({event:B,listeners:N}),R?B.data=R:(R=Qg(n),R!==null&&(B.data=R)))),(R=IT?LT(e,n):UT(e,n))&&(B=Ra(d,"onBeforeInput"),0<B.length&&(N=new Sm("onBeforeInput","beforeinput",null,n,m),h.push({event:N,listeners:B}),N.data=R)),Mb(h,e,d,n,m)}Ox(h,t)})}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ra(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||l===null||(o=Ur(e,n),o!=null&&i.unshift(zr(e,o,l)),o=Ur(e,t),o!=null&&i.push(zr(e,o,l))),e.tag===3)return i;e=e.return}return[]}function Oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gh(e,t,n,i,o){for(var l=t._reactName,c=[];n!==null&&n!==i;){var u=n,f=u.alternate,d=u.stateNode;if(u=u.tag,f!==null&&f===i)break;u!==5&&u!==26&&u!==27||d===null||(f=d,o?(d=Ur(n,l),d!=null&&c.unshift(zr(n,d,f))):o||(d=Ur(n,l),d!=null&&c.push(zr(n,d,f)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var Nb=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(Nb,`
`).replace(Rb,"")}function Jx(e,t){return t=yh(t),yh(e)===t}function oc(){}function We(e,t,n,i,o,l){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||El(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&El(e,""+i);break;case"className":_s(e,"class",i);break;case"tabIndex":_s(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(e,n,i);break;case"style":Jg(e,i,l);break;case"data":if(t!=="object"){_s(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ys(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&We(e,t,"name",o.name,o,null),We(e,t,"formEncType",o.formEncType,o,null),We(e,t,"formMethod",o.formMethod,o,null),We(e,t,"formTarget",o.formTarget,o,null)):(We(e,t,"encType",o.encType,o,null),We(e,t,"method",o.method,o,null),We(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ys(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=oc);break;case"onScroll":i!=null&&Ue("scroll",e);break;case"onScrollEnd":i!=null&&Ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Ys(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ue("beforetoggle",e),Ue("toggle",e),Os(e,"popover",i);break;case"xlinkActuate":ri(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ri(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ri(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ri(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ri(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ri(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ri(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ri(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ri(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Os(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=sT.get(n)||n,Os(e,n,i))}}function rd(e,t,n,i,o,l){switch(n){case"style":Jg(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));e.innerHTML=n}}break;case"children":typeof i=="string"?El(e,i):(typeof i=="number"||typeof i=="bigint")&&El(e,""+i);break;case"onScroll":i!=null&&Ue("scroll",e);break;case"onScrollEnd":i!=null&&Ue("scrollend",e);break;case"onClick":i!=null&&(e.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bg.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),l=e[nn]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,o),typeof i=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Os(e,n,i)}}}function Lt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",e),Ue("load",e);var i=!1,o=!1,l;for(l in n)if(n.hasOwnProperty(l)){var c=n[l];if(c!=null)switch(l){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:We(e,t,l,c,n,null)}}o&&We(e,t,"srcSet",n.srcSet,n,null),i&&We(e,t,"src",n.src,n,null);return;case"input":Ue("invalid",e);var u=l=c=o=null,f=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":o=m;break;case"type":c=m;break;case"checked":f=m;break;case"defaultChecked":d=m;break;case"value":l=m;break;case"defaultValue":u=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(O(137,t));break;default:We(e,t,i,m,n,null)}}qg(e,l,u,f,d,c,o,!1),fa(e);return;case"select":Ue("invalid",e),i=c=l=null;for(o in n)if(n.hasOwnProperty(o)&&(u=n[o],u!=null))switch(o){case"value":l=u;break;case"defaultValue":c=u;break;case"multiple":i=u;default:We(e,t,o,u,n,null)}t=l,n=c,e.multiple=!!i,t!=null?fl(e,!!i,t,!1):n!=null&&fl(e,!!i,n,!0);return;case"textarea":Ue("invalid",e),l=o=i=null;for(c in n)if(n.hasOwnProperty(c)&&(u=n[c],u!=null))switch(c){case"value":i=u;break;case"defaultValue":o=u;break;case"children":l=u;break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(O(91));break;default:We(e,t,c,u,n,null)}Yg(e,i,o,l),fa(e);return;case"option":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:We(e,t,f,i,n,null)}return;case"dialog":Ue("beforetoggle",e),Ue("toggle",e),Ue("cancel",e),Ue("close",e);break;case"iframe":case"object":Ue("load",e);break;case"video":case"audio":for(i=0;i<Br.length;i++)Ue(Br[i],e);break;case"image":Ue("error",e),Ue("load",e);break;case"details":Ue("toggle",e);break;case"embed":case"source":case"link":Ue("error",e),Ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:We(e,t,d,i,n,null)}return;default:if(Bd(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&rd(e,t,m,i,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!=null&&We(e,t,u,i,n,null))}function Db(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,c=null,u=null,f=null,d=null,m=null;for(g in n){var h=n[g];if(n.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":f=h;default:i.hasOwnProperty(g)||We(e,t,g,null,i,h)}}for(var p in i){var g=i[p];if(h=n[p],i.hasOwnProperty(p)&&(g!=null||h!=null))switch(p){case"type":l=g;break;case"name":o=g;break;case"checked":d=g;break;case"defaultChecked":m=g;break;case"value":c=g;break;case"defaultValue":u=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(O(137,t));break;default:g!==h&&We(e,t,p,g,i,h)}}Nu(e,c,u,f,d,m,l,o);return;case"select":g=c=u=p=null;for(l in n)if(f=n[l],n.hasOwnProperty(l)&&f!=null)switch(l){case"value":break;case"multiple":g=f;default:i.hasOwnProperty(l)||We(e,t,l,null,i,f)}for(o in i)if(l=i[o],f=n[o],i.hasOwnProperty(o)&&(l!=null||f!=null))switch(o){case"value":p=l;break;case"defaultValue":u=l;break;case"multiple":c=l;default:l!==f&&We(e,t,o,l,i,f)}t=u,n=c,i=g,p!=null?fl(e,!!n,p,!1):!!i!=!!n&&(t!=null?fl(e,!!n,t,!0):fl(e,!!n,n?[]:"",!1));return;case"textarea":g=p=null;for(u in n)if(o=n[u],n.hasOwnProperty(u)&&o!=null&&!i.hasOwnProperty(u))switch(u){case"value":break;case"children":break;default:We(e,t,u,null,i,o)}for(c in i)if(o=i[c],l=n[c],i.hasOwnProperty(c)&&(o!=null||l!=null))switch(c){case"value":p=o;break;case"defaultValue":g=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:o!==l&&We(e,t,c,o,i,l)}Og(e,p,g);return;case"option":for(var v in n)if(p=n[v],n.hasOwnProperty(v)&&p!=null&&!i.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:We(e,t,v,null,i,p)}for(f in i)if(p=i[f],g=n[f],i.hasOwnProperty(f)&&p!==g&&(p!=null||g!=null))switch(f){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:We(e,t,f,p,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)p=n[T],n.hasOwnProperty(T)&&p!=null&&!i.hasOwnProperty(T)&&We(e,t,T,null,i,p);for(d in i)if(p=i[d],g=n[d],i.hasOwnProperty(d)&&p!==g&&(p!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(O(137,t));break;default:We(e,t,d,p,i,g)}return;default:if(Bd(t)){for(var M in n)p=n[M],n.hasOwnProperty(M)&&p!==void 0&&!i.hasOwnProperty(M)&&rd(e,t,M,void 0,i,p);for(m in i)p=i[m],g=n[m],!i.hasOwnProperty(m)||p===g||p===void 0&&g===void 0||rd(e,t,m,p,i,g);return}}for(var x in n)p=n[x],n.hasOwnProperty(x)&&p!=null&&!i.hasOwnProperty(x)&&We(e,t,x,null,i,p);for(h in i)p=i[h],g=n[h],!i.hasOwnProperty(h)||p===g||p==null&&g==null||We(e,t,h,p,i,g)}var sd=null,ad=null;function Da(e){return e.nodeType===9?e:e.ownerDocument}function xh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wx(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pu=null;function jb(){var e=window.event;return e&&e.type==="popstate"?e===pu?!1:(pu=e,!0):(pu=null,!1)}var Xx=typeof setTimeout=="function"?setTimeout:void 0,Ib=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,Lb=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(e){return vh.resolve(null).then(e).catch(Ub)}:Xx;function Ub(e){setTimeout(function(){throw e})}function lo(e){return e==="head"}function Ch(e,t){var n=t,i=0,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(0<i&&8>i){n=i;var c=e.ownerDocument;if(n&1&&jr(c.documentElement),n&2&&jr(c.body),n&4)for(n=c.head,jr(n),c=n.firstChild;c;){var u=c.nextSibling,f=c.nodeName;c[ts]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=u}}if(o===0){e.removeChild(l),Jr(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:i=n.charCodeAt(0)-48;else i=0;n=l}while(n);Jr(t)}function ud(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ud(n),Hd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Pb(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ts])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Vn(e.nextSibling),e===null)break}return null}function Vb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Vn(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function $b(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var fd=null;function Th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Kx(e,t,n){switch(t=Da(n),e){case"html":if(e=t.documentElement,!e)throw Error(O(452));return e;case"head":if(e=t.head,!e)throw Error(O(453));return e;case"body":if(e=t.body,!e)throw Error(O(454));return e;default:throw Error(O(451))}}function jr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Hd(e)}var Rn=new Map,bh=new Set;function ja(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var bi=Ge.d;Ge.d={f:Fb,r:Hb,D:Bb,C:zb,L:Gb,m:qb,X:Yb,S:Ob,M:Jb};function Fb(){var e=bi.f(),t=tc();return e||t}function Hb(e){var t=Pl(e);t!==null&&t.tag===5&&t.type==="form"?Gy(t):bi.r(e)}var Fl=typeof document>"u"?null:document;function Zx(e,t,n){var i=Fl;if(i&&typeof t=="string"&&t){var o=Mn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),bh.has(o)||(bh.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Lt(t,"link",e),_t(t),i.head.appendChild(t)))}}function Bb(e){bi.D(e),Zx("dns-prefetch",e,null)}function zb(e,t){bi.C(e,t),Zx("preconnect",e,t)}function Gb(e,t,n){bi.L(e,t,n);var i=Fl;if(i&&e&&t){var o='link[rel="preload"][as="'+Mn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Mn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Mn(n.imageSizes)+'"]')):o+='[href="'+Mn(e)+'"]';var l=o;switch(t){case"style":l=jl(e);break;case"script":l=Hl(e)}Rn.has(l)||(e=rt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Rn.set(l,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(ds(l))||t==="script"&&i.querySelector(fs(l))||(t=i.createElement("link"),Lt(t,"link",e),_t(t),i.head.appendChild(t)))}}function qb(e,t){bi.m(e,t);var n=Fl;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Mn(i)+'"][href="'+Mn(e)+'"]',l=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Hl(e)}if(!Rn.has(l)&&(e=rt({rel:"modulepreload",href:e},t),Rn.set(l,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fs(l)))return}i=n.createElement("link"),Lt(i,"link",e),_t(i),n.head.appendChild(i)}}}function Ob(e,t,n){bi.S(e,t,n);var i=Fl;if(i&&e){var o=dl(i).hoistableStyles,l=jl(e);t=t||"default";var c=o.get(l);if(!c){var u={loading:0,preload:null};if(c=i.querySelector(ds(l)))u.loading=5;else{e=rt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Rn.get(l))&&Ef(e,n);var f=c=i.createElement("link");_t(f),Lt(f,"link",e),f._p=new Promise(function(d,m){f.onload=d,f.onerror=m}),f.addEventListener("load",function(){u.loading|=1}),f.addEventListener("error",function(){u.loading|=2}),u.loading|=4,na(c,t,i)}c={type:"stylesheet",instance:c,count:1,state:u},o.set(l,c)}}}function Yb(e,t){bi.X(e,t);var n=Fl;if(n&&e){var i=dl(n).hoistableScripts,o=Hl(e),l=i.get(o);l||(l=n.querySelector(fs(o)),l||(e=rt({src:e,async:!0},t),(t=Rn.get(o))&&Mf(e,t),l=n.createElement("script"),_t(l),Lt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function Jb(e,t){bi.M(e,t);var n=Fl;if(n&&e){var i=dl(n).hoistableScripts,o=Hl(e),l=i.get(o);l||(l=n.querySelector(fs(o)),l||(e=rt({src:e,async:!0,type:"module"},t),(t=Rn.get(o))&&Mf(e,t),l=n.createElement("script"),_t(l),Lt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function Sh(e,t,n,i){var o=(o=Oi.current)?ja(o):null;if(!o)throw Error(O(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=jl(n.href),n=dl(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=jl(n.href);var l=dl(o).hoistableStyles,c=l.get(e);if(c||(o=o.ownerDocument||o,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,c),(l=o.querySelector(ds(e)))&&!l._p&&(c.instance=l,c.state.loading=5),Rn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Rn.set(e,n),l||Wb(o,e,n,c.state))),t&&i===null)throw Error(O(528,""));return c}if(t&&i!==null)throw Error(O(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Hl(n),n=dl(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,e))}}function jl(e){return'href="'+Mn(e)+'"'}function ds(e){return'link[rel="stylesheet"]['+e+"]"}function Qx(e){return rt({},e,{"data-precedence":e.precedence,precedence:null})}function Wb(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Lt(t,"link",n),_t(t),e.head.appendChild(t))}function Hl(e){return'[src="'+Mn(e)+'"]'}function fs(e){return"script[async]"+e}function wh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Mn(n.href)+'"]');if(i)return t.instance=i,_t(i),i;var o=rt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),_t(i),Lt(i,"style",o),na(i,n.precedence,e),t.instance=i;case"stylesheet":o=jl(n.href);var l=e.querySelector(ds(o));if(l)return t.state.loading|=4,t.instance=l,_t(l),l;i=Qx(n),(o=Rn.get(o))&&Ef(i,o),l=(e.ownerDocument||e).createElement("link"),_t(l);var c=l;return c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(l,"link",i),t.state.loading|=4,na(l,n.precedence,e),t.instance=l;case"script":return l=Hl(n.src),(o=e.querySelector(fs(l)))?(t.instance=o,_t(o),o):(i=n,(o=Rn.get(l))&&(i=rt({},n),Mf(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),_t(o),Lt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(O(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,na(i,n.precedence,e));return t.instance}function na(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,l=o,c=0;c<i.length;c++){var u=i[c];if(u.dataset.precedence===t)l=u;else if(l!==o)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Ef(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ia=null;function Eh(e,t,n){if(ia===null){var i=new Map,o=ia=new Map;o.set(n,i)}else o=ia,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var l=n[o];if(!(l[ts]||l[Ft]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var c=l.getAttribute(t)||"";c=e+c;var u=i.get(c);u?u.push(l):i.set(c,[l])}}return i}function Mh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Xb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ev(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Gr=null;function Kb(){}function Zb(e,t,n){if(Gr===null)throw Error(O(475));var i=Gr;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=jl(n.href),l=e.querySelector(ds(o));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Ia.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=l,_t(l);return}l=e.ownerDocument||e,n=Qx(n),(o=Rn.get(o))&&Ef(n,o),l=l.createElement("link"),_t(l);var c=l;c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(l,"link",n),t.instance=l}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ia.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Qb(){if(Gr===null)throw Error(O(475));var e=Gr;return e.stylesheets&&e.count===0&&md(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&md(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ia(){if(this.count--,this.count===0){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var La=null;function md(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,La=new Map,t.forEach(e2,e),La=null,Ia.call(e))}function e2(e,t){if(!(t.state.loading&4)){var n=La.get(e);if(n)var i=n.get(null);else{n=new Map,La.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<o.length;l++){var c=o[l];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),i=c)}i&&n.set(null,i)}o=t.instance,c=o.getAttribute("data-precedence"),l=n.get(c)||i,l===i&&n.set(null,o),n.set(c,o),this.count++,i=Ia.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),l?l.parentNode.insertBefore(o,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var qr={$$typeof:di,Provider:null,Consumer:null,_currentValue:xo,_currentValue2:xo,_threadCount:0};function t2(e,t,n,i,o,l,c,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pc(0),this.hiddenUpdates=Pc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=l,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function tv(e,t,n,i,o,l,c,u,f,d,m,h){return e=new t2(e,t,n,c,u,f,d,h),t=1,l===!0&&(t|=24),l=fn(3,null,null,t),e.current=l,l.stateNode=e,t=Qd(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:i,isDehydrated:n,cache:t},tf(l),e}function nv(e){return e?(e=rl,e):rl}function iv(e,t,n,i,o,l){o=nv(o),i.context===null?i.context=o:i.pendingContext=o,i=Yi(t),i.payload={element:n},l=l===void 0?null:l,l!==null&&(i.callback=l),n=Ji(e,i,t),n!==null&&(gn(n,e,t),Er(n,e,t))}function kh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kf(e,t){kh(e,t),(e=e.alternate)&&kh(e,t)}function ov(e){if(e.tag===13){var t=Vl(e,67108864);t!==null&&gn(t,e,67108864),kf(e,67108864)}}var Ua=!0;function n2(e,t,n,i){var o=we.T;we.T=null;var l=Ge.p;try{Ge.p=2,Af(e,t,n,i)}finally{Ge.p=l,we.T=o}}function i2(e,t,n,i){var o=we.T;we.T=null;var l=Ge.p;try{Ge.p=8,Af(e,t,n,i)}finally{Ge.p=l,we.T=o}}function Af(e,t,n,i){if(Ua){var o=hd(i);if(o===null)hu(e,t,i,Pa,n),Ah(e,i);else if(l2(o,e,t,n,i))i.stopPropagation();else if(Ah(e,i),t&4&&-1<o2.indexOf(e)){for(;o!==null;){var l=Pl(o);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=po(l.pendingLanes);if(c!==0){var u=l;for(u.pendingLanes|=2,u.entangledLanes|=2;c;){var f=1<<31-hn(c);u.entanglements[1]|=f,c&=~f}Qn(l),!(Ye&6)&&(ka=Xn()+500,us(0))}}break;case 13:u=Vl(l,2),u!==null&&gn(u,l,2),tc(),kf(l,2)}if(l=hd(i),l===null&&hu(e,t,i,Pa,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else hu(e,t,i,null,n)}}function hd(e){return e=zd(e),_f(e)}var Pa=null;function _f(e){if(Pa=null,e=el(e),e!==null){var t=Kr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=_g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Pa=e,null}function lv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zC()){case jg:return 2;case Ig:return 8;case da:case GC:return 32;case Lg:return 268435456;default:return 32}default:return 32}}var pd=!1,Ki=null,Zi=null,Qi=null,Or=new Map,Yr=new Map,Fi=[],o2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ah(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Or.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function dr(e,t,n,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Pl(t),t!==null&&ov(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function l2(e,t,n,i,o){switch(t){case"focusin":return Ki=dr(Ki,e,t,n,i,o),!0;case"dragenter":return Zi=dr(Zi,e,t,n,i,o),!0;case"mouseover":return Qi=dr(Qi,e,t,n,i,o),!0;case"pointerover":var l=o.pointerId;return Or.set(l,dr(Or.get(l)||null,e,t,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Yr.set(l,dr(Yr.get(l)||null,e,t,n,i,o)),!0}return!1}function rv(e){var t=el(e.target);if(t!==null){var n=Kr(t);if(n!==null){if(t=n.tag,t===13){if(t=_g(n),t!==null){e.blockedOn=t,ZC(e.priority,function(){if(n.tag===13){var i=pn();i=$d(i);var o=Vl(n,i);o!==null&&gn(o,n,i),kf(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Du=i,n.target.dispatchEvent(i),Du=null}else return t=Pl(n),t!==null&&ov(t),e.blockedOn=n,!1;t.shift()}return!0}function _h(e,t,n){oa(e)&&n.delete(t)}function r2(){pd=!1,Ki!==null&&oa(Ki)&&(Ki=null),Zi!==null&&oa(Zi)&&(Zi=null),Qi!==null&&oa(Qi)&&(Qi=null),Or.forEach(_h),Yr.forEach(_h)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,pd||(pd=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,r2)))}var Vs=null;function Nh(e){Vs!==e&&(Vs=e,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){Vs===e&&(Vs=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(_f(i||n)===null)continue;break}var l=Pl(n);l!==null&&(e.splice(t,3),t-=3,Ju(l,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Jr(e){function t(f){return Ps(f,e)}Ki!==null&&Ps(Ki,e),Zi!==null&&Ps(Zi,e),Qi!==null&&Ps(Qi,e),Or.forEach(t),Yr.forEach(t);for(var n=0;n<Fi.length;n++){var i=Fi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Fi.length&&(n=Fi[0],n.blockedOn===null);)rv(n),n.blockedOn===null&&Fi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],l=n[i+1],c=o[nn]||null;if(typeof l=="function")c||Nh(n);else if(c){var u=null;if(l&&l.hasAttribute("formAction")){if(o=l,c=l[nn]||null)u=c.formAction;else if(_f(o)!==null)continue}else u=c.action;typeof u=="function"?n[i+1]=u:(n.splice(i,3),i-=3),Nh(n)}}}function Nf(e){this._internalRoot=e}lc.prototype.render=Nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));var n=t.current,i=pn();iv(n,i,e,t,null,null)};lc.prototype.unmount=Nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;iv(e.current,2,null,e,null,null),tc(),t[Ul]=null}};function lc(e){this._internalRoot=e}lc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fi.length&&t!==0&&t<Fi[n].priority;n++);Fi.splice(n,0,e),n===0&&rv(e)}};var Rh=kg.version;if(Rh!=="19.1.1")throw Error(O(527,Rh,"19.1.1"));Ge.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=UC(t),e=e!==null?Ng(e):null,e=e===null?null:e.stateNode,e};var s2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:we,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$s.isDisabled&&$s.supportsFiber)try{Zr=$s.inject(s2),mn=$s}catch{}}za.createRoot=function(e,t){if(!Ag(e))throw Error(O(299));var n=!1,i="",o=tx,l=nx,c=ix,u=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(u=t.unstable_transitionCallbacks)),t=tv(e,1,!1,null,null,n,i,o,l,c,u,null),e[Ul]=t.current,wf(e),new Nf(t)};za.hydrateRoot=function(e,t,n){if(!Ag(e))throw Error(O(299));var i=!1,o="",l=tx,c=nx,u=ix,f=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(u=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(f=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=tv(e,1,!0,t,n??null,i,o,l,c,u,f,d),t.context=nv(null),n=t.current,i=pn(),i=$d(i),o=Yi(i),o.callback=null,Ji(n,o,i),n=i,t.current.lanes=n,es(t,n),Qn(t),e[Ul]=t.current,wf(e),new lc(t)};za.version="19.1.1";function sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sv)}catch(e){console.error(e)}}sv(),Tg.exports=za;var a2=Tg.exports;const c2=dg(a2),Fs=(e,t,n,i)=>{const o=[];for(let l=1;l<=i;l++){const c=l/i,u=1-c,f=u*u*e.x+2*u*c*t.x+c*c*n.x,d=u*u*e.y+2*u*c*t.y+c*c*n.y;o.push({x:f,y:d})}return o},av=(e,t)=>{const n=e.length;if(n<2)return e;const i=[],o=8;if(t){if(n<3)return e;const l={x:(e[n-1].x+e[0].x)/2,y:(e[n-1].y+e[0].y)/2};i.push(l);for(let c=0;c<n;c++){const u=e[c],f=e[(c+1)%n],d=u,m={x:(u.x+f.x)/2,y:(u.y+f.y)/2},h=i[i.length-1];i.push(...Fs(h,d,m,o))}}else{if(n<3)return e;i.push(e[0]);const l={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};i.push(...Fs(e[0],e[0],l,o));for(let u=1;u<n-1;u++){const f=e[u-1],d=e[u],m=e[u+1],h={x:(f.x+d.x)/2,y:(f.y+d.y)/2},p=d,g={x:(d.x+m.x)/2,y:(d.y+m.y)/2};i.push(...Fs(h,p,g,o))}const c={x:(e[n-2].x+e[n-1].x)/2,y:(e[n-2].y+e[n-1].y)/2};i.push(...Fs(c,e[n-1],e[n-1],o))}return i},u2=e=>{const t=e.points.filter(n=>n);return t.length<2?t:e.smooth?av(t,e.isClosed):t},vl=(e,t,n)=>{const i=e.filter(c=>c);if(i.length===0)return"";if(i.length<2){let c=`M ${i[0].x} ${i[0].y}`;return n&&(c+=" Z"),c}const o=t?av(i,n):i;let l=If(o);return n&&(l+=" Z"),l},Rf=e=>{const{x:t,y:n,width:i,height:o,start:l,extent:c,style:u}=e;if(i<=0||o<=0||c===0)return"";const f=i/2,d=o/2,m=t+f,h=n+d;if(Math.abs(c)>=360){const k=m+f,N=h,R=m-f,X=`A ${f} ${d} 0 0 0 ${R} ${h}`,I=`A ${f} ${d} 0 0 0 ${k} ${N}`;return`M ${k} ${N} ${X} ${I}`}const p=l*Math.PI/180,g=(l+c)*Math.PI/180,v=m+f*Math.cos(p),T=h-d*Math.sin(p),M=m+f*Math.cos(g),x=h-d*Math.sin(g),y=Math.abs(c)>180?1:0,C=c>0?0:1,S=`A ${f} ${d} 0 ${y} ${C} ${M} ${x}`;return u==="arc"?`M ${v} ${T} ${S}`:u==="chord"?`M ${v} ${T} ${S} Z`:`M ${m} ${h} L ${v} ${T} ${S} Z`},Wr=e=>{const{x:t,y:n,width:i,height:o,topVertexOffset:l=0,isFlippedVertically:c}=e,f=t+i/2+l*i;return c?[{x:f,y:n+o},{x:t+i,y:n},{x:t,y:n}]:[{x:f,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Df=e=>{const{x:t,y:n,width:i,height:o,isFlippedHorizontally:l,isFlippedVertically:c}=e;let u=[{x:t,y:n+o},{x:t,y:n},{x:t+i,y:n+o}];if(l){const f=t+i/2;u=u.map(d=>({x:f-(d.x-f),y:d.y}))}if(c){const f=n+o/2;u=u.map(d=>({x:d.x,y:f-(d.y-f)}))}return u},jf=e=>{const{x:t,y:n,width:i,height:o}=e;return[{x:t+i/2,y:n},{x:t+i,y:n+o/2},{x:t+i/2,y:n+o},{x:t,y:n+o/2}]},rc=e=>{const{x:t,y:n,width:i,height:o,topLeftOffsetRatio:l,topRightOffsetRatio:c,isFlippedVertically:u}=e,f=i*l,d=i*c;return u?[{x:t,y:n},{x:t+i,y:n},{x:t+i-d,y:n+o},{x:t+f,y:n+o}]:[{x:t+f,y:n},{x:t+i-d,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},sc=e=>{const{x:t,y:n,width:i,height:o,angle:l,isFlippedVertically:c}=e;if(o===0)return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}];const f=Math.max(1,Math.min(179,l))*Math.PI/180,d=o/Math.tan(f),m=i-Math.abs(d);return m<0?[{x:t,y:n},{x:t,y:n},{x:t,y:n},{x:t,y:n}]:c?d>=0?[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t+d,y:n+o}]:[{x:t-d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:d>=0?[{x:t+d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t-d,y:n+o}]},Il=e=>{const t=[],{cx:n,cy:i,radius:o,sides:l,innerRadius:c,isFlippedHorizontally:u,isFlippedVertically:f}=e,d=Math.PI*2/l,m=-Math.PI/2,h=c!==void 0,p=h?l*2:l;for(let g=0;g<p;g++){const v=h&&g%2!==0?c:o;if(v===void 0)continue;const T=g*d/(h?2:1)+m;let M=n+Math.cos(T)*v,x=i+Math.sin(T)*v;u&&(M=n-(M-n)),f&&(x=i-(x-i)),t.push({x:M,y:x})}return t},If=e=>{const t=e.filter(o=>o);if(t.length===0)return"";const[n,...i]=t;return`M ${n.x} ${n.y} ${i.map(o=>`L ${o.x} ${o.y}`).join(" ")}`},cv=e=>{if(!e.isClosed)return!1;let t=[...e.points].filter(o=>o);if(t.length>1&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&t.pop(),t.length!==4)return!1;const n=new Set(t.map(o=>o.x)),i=new Set(t.map(o=>o.y));return!(n.size!==2||i.size!==2)},d2=e=>{const{radius:t,sides:n}=e;return n<2?0:2*t*Math.sin(Math.PI/n)},f2=e=>{const{sideLength:t,sides:n}=e;return n<2?0:t/(2*Math.sin(Math.PI/n))},uv=e=>{const n=document.createElement("canvas").getContext("2d");return n&&(n.font=e),n},ac=e=>{const{text:t,font:n,fontSize:i,weight:o,slant:l,width:c}=e,u=`${l==="italic"?"italic":"normal"} ${o} ${i}px ${n}`,f=uv(u);if(!f)return t.split(`
`);const d=t.split(`
`),m=[];return d.forEach(h=>{if(c<=0){m.push(h);return}const p=h.split(" ");let g="";for(let v=0;v<p.length;v++){const T=p[v],M=g+(g?" ":"")+T;f.measureText(M).width>c&&v>0?(m.push(g),g=T):g=M}m.push(g)}),m},io=e=>{const{font:t,fontSize:n,weight:i,slant:o}=e,l=ac(e);if(l.length===0)return{x:e.x,y:e.y,width:0,height:0};const c=`${o==="italic"?"italic":"normal"} ${i} ${n}px ${t}`,u=uv(c);if(!u){const x=Math.max(...l.map(y=>y.length))*n*.6;return{x:e.x,y:e.y,width:x,height:l.length*n*1.2}}const f=u.measureText("M"),d=f.fontBoundingBoxAscent??n*.8,m=f.fontBoundingBoxDescent??n*.2,h=d+m,p=n*.2,g=h+(l.length-1)*(h+p),v=Math.max(...l.map(x=>u.measureText(x).width));let{x:T,y:M}=e;return["n","s","center"].includes(e.anchor)?T-=v/2:["ne","e","se"].includes(e.anchor)&&(T-=v),["w","e","center"].includes(e.anchor)?M-=g/2:["sw","s","se"].includes(e.anchor)&&(M-=g),{x:T,y:M,width:v,height:g}},Xr=e=>{let t;switch(e.type){case"rectangle":case"arc":return{x:e.x,y:e.y,width:e.width,height:e.height};case"ellipse":return{x:e.cx-e.rx,y:e.cy-e.ry,width:e.rx*2,height:e.ry*2};case"text":return io(e);case"image":case"bitmap":return{x:e.x,y:e.y,width:e.width,height:e.height};case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"polygon":case"star":t=ei({...e,rotation:0})??[];break;case"bezier":case"polyline":t=e.points;break;case"line":case"pencil":t=e.points;break;default:return null}if(!t||t.length===0)return null;const n=t.filter(d=>!!d);if(n.length===0)return null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},Tt=e=>{if("cx"in e&&"cy"in e)return{x:e.cx,y:e.cy};const t="rotation"in e&&e.rotation!==0?{...e,rotation:0}:e,n=Xr(t);return n?{x:n.x+n.width/2,y:n.y+n.height/2}:"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x+e.width/2,y:e.y+e.height/2}:null},qe=(e,t,n)=>{const i=n*(Math.PI/180),o=Math.cos(i),l=Math.sin(i),c=e.x-t.x,u=e.y-t.y;return{x:c*o-u*l+t.x,y:c*l+u*o+t.y}};function ei(e,t){let n;switch(e.type){case"line":case"pencil":n=e.points.filter(y=>y);break;case"polyline":case"bezier":n=u2(e);break;case"rectangle":case"image":case"bitmap":n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];break;case"text":{const y=io(e);if(!y)return null;n=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}]}break;case"triangle":n=Wr(e);break;case"right-triangle":n=Df(e);break;case"rhombus":n=jf(e);break;case"trapezoid":n=rc(e);break;case"parallelogram":n=sc(e);break;case"polygon":case"star":n=Il(e);break;case"ellipse":const i=e,o=Math.max(24,Math.round(Math.max(i.rx,i.ry)/4));n=Il({id:e.id,cx:i.cx,cy:i.cy,radius:i.rx,sides:o,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth}).map(y=>({x:y.x,y:i.cy+(y.y-i.cy)*(i.ry/i.rx)}));break;case"arc":const{x:l,y:c,width:u,height:f,start:d,extent:m,style:h}=e,p=u/2,g=f/2,v=l+p,T=c+g,M=32,x=m/M;n=[],h==="pieslice"&&n.push({x:v,y:T});for(let y=0;y<=M;y++){const S=(d+y*x)*Math.PI/180;n.push({x:v+p*Math.cos(S),y:T-g*Math.sin(S)})}h==="pieslice"&&n.push({x:v,y:T});break;default:return null}if("rotation"in e&&e.rotation!==0){const i=t??(e.type==="text"?{x:e.x,y:e.y}:Tt(e));return i?n.map(o=>qe(o,i,e.rotation)):n}return n}const gd=(e,t)=>{const n=ei(e,t);if(!n||n.length===0)return"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x,y:e.y,width:e.width,height:e.height}:"cx"in e&&"cy"in e?{x:e.cx,y:e.cy,width:0,height:0}:null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},Lf=e=>{if(e.type==="bezier"||e.type==="polyline"||e.type==="pencil"||e.type==="line")return e.points.filter(o=>o);const t={...e,rotation:0},n=ei(t);if(!n||n.length===0)return null;let i=e.type==="arc"&&(e.style==="pieslice"||e.style==="chord")||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","image","bitmap","text"].includes(e.type);if(e.type==="arc"&&e.style==="arc"&&(i=!1),i&&n.length>1){const o=n[0],l=n[n.length-1];if(Math.abs(o.x-l.x)<.01&&Math.abs(o.y-l.y)<.01)return n.slice(0,-1)}return n};function m2(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},l=o.x*o.x+o.y*o.y;if(l===0)return{point:t,t:0};let u=(i.x*o.x+i.y*o.y)/l;return u=Math.max(0,Math.min(1,u)),{point:{x:t.x+o.x*u,y:t.y+o.y*u},t:u}}const ut={select:"Вибрати","edit-points":"Редагувати вузли",rectangle:"Прямокутник",square:"Квадрат",circle:"Коло",ellipse:"Еліпс",line:"Лінія",pencil:"Олівець",triangle:"Трикутник","right-triangle":"Прямокутний трикутник",polygon:"Багатокутник",star:"Зірка",polyline:"Ламана",rhombus:"Ромб",trapezoid:"Трапеція",parallelogram:"Паралелограм",bezier:"Крива Без'є",arc:"Дуга",pieslice:"Сектор",chord:"Сегмент",text:"Текст",image:"Зображення",bitmap:"Bitmap"},la=[{name:"Суцільна лінія",pattern:[],description:"Суцільна лінія без штрихів."},{name:"Простий пунктир",pattern:[5,3],description:"Штрих 5px, пропуск 3px."},{name:"Довгі штрихи",pattern:[10,5],description:"Штрих 10px, пропуск 5px."},{name:"Дрібні точки",pattern:[2,2],description:"Штрих 2px, пропуск 2px (виглядає як точки)."},{name:"Розріджені точки",pattern:[2,4],description:"Штрих 2px, пропуск 4px."},{name:"Штрих-пунктир",pattern:[10,3,2,3],description:"Штрих 10px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Штрих і 2 точки",pattern:[15,3,2,3,2,3],description:"Штрих 15px, пропуск 3px, штрих 2px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Подвійна точка",pattern:[2,3,2,6],description:"Штрих 2px, пропуск 3px, штрих 2px, пропуск 6px."},{name:"Довгий+короткий штрих",pattern:[20,5,5,5],description:"Штрих 20px, пропуск 5px, штрих 5px, пропуск 5px."}],dv=e=>{if(e.type==="text")return"text";if(e.type==="image")return"image";if(e.type==="bitmap")return"bitmap";if(e.type==="ellipse"&&e.isAspectRatioLocked)return"oval";if(e.type==="arc")return e.rotation===0?"arc":e.style==="arc"?"line":"polygon";if(!("rotation"in e)||e.rotation===0){if(e.type==="rectangle")return"rectangle";if(e.type==="ellipse")return"oval";if(e.type==="polyline"&&e.isClosed&&cv(e))return"rectangle"}return e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed?"line":"polygon"},Ot=e=>{if(e.type==="arc")return ut[e.style];const t=dv(e);return t==="polygon"&&e.type!=="polygon"&&e.type!=="star"?"Багатокутник":t==="rectangle"&&e.type==="polyline"?ut.rectangle:e.type==="rectangle"&&e.isAspectRatioLocked?ut.square:e.type==="ellipse"&&e.isAspectRatioLocked?ut.circle:e.type==="polyline"?e.isClosed?"Багатокутник":ut.polyline:e.type==="bezier"?e.isClosed?"Багатокутник":ut.bezier:ut[e.type]},yd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M23 4v6h-6'/%3E%3Cpath d='M20.49 15a9 9 0 1 1-2.12-9.36L23 10'/%3E%3C/svg%3E") 10 10, auto`,xd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M3 9 L21 9 L17 5'/%3E%3Cpath d='M21 15 L3 15 L7 19'/%3E%3C/svg%3E") 10 10, auto`,h2=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M4.2 3.2l14 8-6 2-2 6-6-14z' fill='white' stroke-width='0'/%3E%3Cpath d='M14 18h6m-3-3v6' stroke='white' stroke-width='2.5' stroke-linecap='round' fill='none'/%3E%3C/svg%3E") 4 3, auto`,cc=e=>e.startsWith("Tk")?e==="TkFixedFont"?"monospace":"sans-serif":e.includes(" ")?`"${e}", sans-serif`:`${e}, sans-serif`,fv=new Set(Object.values(ut));fv.add("Багатокутник");const Va=e=>fv.has(e),p2=8,g2=24,y2=20,x2=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";default:return"default"}},v2=({shape:e,setAction:t,svgRef:n,activeTool:i,getSnappedMousePosition:o,viewTransform:l,getPointerPosition:c,activePointIndex:u,setActivePointIndex:f,updateShape:d,action:m})=>{if(!e)return null;const h=p2/l.scale,p=g2/l.scale,g=1/l.scale,v=y2/l.scale,T=e.type==="text"?{x:e.x,y:e.y}:Tt(e);if(!T)return null;const M="rotation"in e?e.rotation??0:0,x=w.useMemo(()=>e?(m==null?void 0:m.type)==="point-editing"&&"rotation"in m.initialShape&&m.initialShape.rotation!==0?gd(e,m.center):gd(e):null,[e,m]),y=x&&r.jsxs("g",{style:{pointerEvents:"none"},children:[r.jsx("rect",{x:x.x,y:x.y,width:x.width,height:x.height,fill:"none",stroke:"var(--text-tertiary)",strokeWidth:g,strokeDasharray:`${3/l.scale} ${3/l.scale}`}),r.jsx("circle",{cx:x.x,cy:x.y,r:h/2.5,fill:"var(--text-tertiary)"}),r.jsx("circle",{cx:x.x+x.width,cy:x.y+x.height,r:h/2.5,fill:"var(--text-tertiary)"})]}),C=w.useMemo(()=>{if(e.type!=="text")return null;const J=e,ce=h/1.5,le=ce*.6;return r.jsxs("g",{style:{pointerEvents:"none"},"aria-label":"Точка прив'язки тексту",children:[r.jsx("circle",{cx:J.x,cy:J.y,r:ce,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:g}),r.jsx("line",{x1:J.x-le,y1:J.y,x2:J.x+le,y2:J.y,stroke:"var(--special-handle-stroke)",strokeWidth:g}),r.jsx("line",{x1:J.x,y1:J.y-le,x2:J.x,y2:J.y+le,stroke:"var(--special-handle-stroke)",strokeWidth:g})]})},[e,h,g]);if(i==="edit-points"){const J=Lf(e);if(!J)return null;let ce;(m==null?void 0:m.type)==="point-editing"&&M!==0?ce=J.map(fe=>qe(fe,m.center,M)):ce=J.map(fe=>qe(fe,T,M));const le=(fe,Me)=>{fe.stopPropagation(),f(Me);const Ne=Tt(e);if(!Ne)return;let K=e;if(e.type!=="polyline"&&e.type!=="line"&&e.type!=="pencil"&&e.type!=="bezier"){const z=e.type!=="arc"||e.style!=="arc",W=ei({...e,rotation:0});if(!W)return;const Se={id:e.id,name:void 0,type:"polyline",points:W,isClosed:z,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&z?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0,stipple:"stipple"in e?e.stipple:void 0,dash:"dash"in e?e.dash:void 0},b=e.name,G=!b||Va(b);Se.name=G?Ot(Se):b,d(Se),K=Se}t({type:"point-editing",initialShape:K,pointIndex:Me,center:Ne})},ne=(fe,Me,Ne)=>{fe.preventDefault(),fe.stopPropagation();const K=o(c(fe)),z=qe(K,T,-M),W=J[Me],Se=J[Ne],{point:b}=m2(z,W,Se),G=[...J];G.splice(Ne,0,b);let Y;if(e.type==="bezier")Y={...e,points:G};else if(e.type==="polyline"||e.type==="line"||e.type==="pencil")Y={...e,points:G};else{const ye=e.type!=="arc"||e.style!=="arc",Te={id:e.id,name:void 0,type:"polyline",points:G,isClosed:ye,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&ye?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0},Ie=e.name,Je=!Ie||Va(Ie);Te.name=Je?Ot(Te):Ie,Y=Te}d(Y),f(Ne);const xe=Tt(Y);xe&&t({type:"point-editing",initialShape:Y,pointIndex:Ne,center:xe})},Ee=e.type==="polyline"&&e.isClosed||e.type==="bezier"&&e.isClosed||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(e.type);return r.jsxs("g",{children:[y,ce.map((fe,Me)=>{if(!Ee&&Me===ce.length-1)return null;const Ne=(Me+1)%ce.length,K=ce[Ne];return r.jsx("line",{x1:fe.x,y1:fe.y,x2:K.x,y2:K.y,stroke:"transparent",strokeWidth:p,style:{cursor:m?"inherit":"copy"},onMouseDown:z=>ne(z,Me,Ne)},`segment-${Me}`)}),ce.map((fe,Me)=>{const Ne=Me===u;return r.jsxs("g",{onMouseDown:K=>le(K,Me),onTouchStart:K=>le(K,Me),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:fe.x,cy:fe.y,r:Ne?h*.75:h/2,fill:Ne?"var(--selection-stroke)":"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:fe.x,cy:fe.y,r:p/2,fill:"transparent"})]},`point-${Me}`)})]})}const S=Xr(e);if(!S||S.width<=0&&S.height<=0)return null;if(e.type==="line"){const[J,ce]=e.points,le=qe(J,T,M),ne=qe(ce,T,M),Ee=Xr(e),fe=e.rotationHandlePosition,Me={x:T.x,y:fe==="bottom"?Ee.y+Ee.height+v:Ee.y-v},Ne=qe(Me,T,M),K=(W,Se)=>{W.stopPropagation();const b=Tt(e);t({type:"resizing",handle:Se,initialShape:e,anchorPointGlobal:Se==="line-start"?ne:le,initialShapeProps:{rotationCenter:T,geometricCenter:b,bbox:S}})},z=W=>{if(W.stopPropagation(),!n.current)return;const Se=Tt(e);if(!Se)return;const b="touches"in W?W.touches[0]:W;if(!b)return;const G=o(c(b)),Y=Math.atan2(G.y-Se.y,G.x-Se.x),ye=e.rotation*Math.PI/180-Y;t({type:"rotating",initialShape:e,center:Se,startAngle:ye})};return r.jsxs(wt.Fragment,{children:[y,r.jsxs("g",{children:[r.jsx("line",{x1:le.x,y1:le.y,x2:ne.x,y2:ne.y,stroke:"var(--selection-stroke)",strokeWidth:6/l.scale,strokeOpacity:"0.3",strokeLinecap:"round",style:{pointerEvents:"none"}}),r.jsxs("g",{onMouseDown:W=>K(W,"line-start"),onTouchStart:W=>K(W,"line-start"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:le.x,cy:le.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:le.x,cy:le.y,r:p/2,fill:"transparent"})]}),r.jsxs("g",{onMouseDown:W=>K(W,"line-end"),onTouchStart:W=>K(W,"line-end"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:ne.x,cy:ne.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:ne.x,cy:ne.y,r:p/2,fill:"transparent"})]}),r.jsxs("g",{onMouseDown:z,onTouchStart:z,"data-handle":"true",style:{cursor:m?"inherit":yd},children:[r.jsx("line",{x1:T.x,y1:T.y,x2:Ne.x,y2:Ne.y,stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:Ne.x,cy:Ne.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"},transform:`rotate(${-M} ${Ne.x} ${Ne.y})`}),r.jsx("circle",{cx:Ne.x,cy:Ne.y,r:p/2,fill:"transparent"})]})]})]})}const k=[{name:"top-left",x:S.x,y:S.y},{name:"top-center",x:S.x+S.width/2,y:S.y},{name:"top-right",x:S.x+S.width,y:S.y},{name:"middle-left",x:S.x,y:S.y+S.height/2},{name:"middle-right",x:S.x+S.width,y:S.y+S.height/2},{name:"bottom-left",x:S.x,y:S.y+S.height},{name:"bottom-center",x:S.x+S.width/2,y:S.y+S.height},{name:"bottom-right",x:S.x+S.width,y:S.y+S.height}],N=(J,ce)=>{J.stopPropagation();const le=Tt(e),Ee={"top-left":"bottom-right","top-center":"bottom-center","top-right":"bottom-left","middle-left":"middle-right","middle-right":"middle-left","bottom-left":"top-right","bottom-center":"top-center","bottom-right":"top-left"}[ce],fe=k.find(Ne=>Ne.name===Ee);if(!fe)return;const Me=qe({x:fe.x,y:fe.y},T,M);t({type:"resizing",handle:ce,initialShape:e,anchorPointGlobal:Me,initialShapeProps:{rotationCenter:T,geometricCenter:le,bbox:S}})},R=e.type==="text"?S.x+S.width/2:T.x,B=e.rotationHandlePosition,X={x:R,y:B==="bottom"?S.y+S.height+v:S.y-v},I=qe(X,T,M),F=J=>{if(J.stopPropagation(),!n.current)return;const ce=Tt(e);if(!ce)return;const le="touches"in J?J.touches[0]:J;if(!le)return;const ne=o(c(le)),Ee=Math.atan2(ne.y-ce.y,ne.x-ce.x),Me=("rotation"in e?e.rotation:0)*Math.PI/180-Ee;t({type:"rotating",initialShape:e,center:ce,startAngle:Me})},se=(J,ce,le)=>{J.stopPropagation();const ne="touches"in J?J.touches[0]:J;if(!ne)return;const Ee=o(c(ne));switch(ce){case"arc-angle":if(e.type!=="arc")return;const fe=Tt(e),Me=Math.atan2(-(Ee.y-fe.y),Ee.x-fe.x)*180/Math.PI;t({type:"arc-angle-editing",handle:le,initialShape:e,center:fe,initialMouseAngle:Me});break;case"trapezoid-offset":if(e.type!=="trapezoid")return;t({type:"trapezoid-offset-editing",handle:le,initialShape:e});break;case"parallelogram-angle":if(e.type!=="parallelogram")return;t({type:"parallelogram-angle-editing",initialShape:e});break;case"triangle-vertex":if(e.type!=="triangle")return;t({type:"triangle-vertex-editing",initialShape:e});break;case"star-inner-radius":if(e.type!=="star")return;t({type:"star-inner-radius-editing",initialShape:e,center:Tt(e)});break}},ue=(J,ce)=>r.jsxs("g",{onMouseDown:ce,onTouchStart:ce,"data-handle":"true",style:{cursor:m?"inherit":xd},children:[r.jsx("circle",{cx:J.x,cy:J.y,r:h/1.5,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:J.x,cy:J.y,r:p/2,fill:"transparent"})]}),pe=J=>{const{x:ce,y:le,width:ne,height:Ee,start:fe,extent:Me}=J,Ne=ne/2,K=Ee/2,z=ce+Ne,W=le+K,Se=fe*Math.PI/180,b=(fe+Me)*Math.PI/180,G=(fe+Me/2)*Math.PI/180,Y={x:z+Ne*Math.cos(Se),y:W-K*Math.sin(Se)},xe={x:z+Ne*Math.cos(b),y:W-K*Math.sin(b)},ye={x:z+Ne*Math.cos(G),y:W-K*Math.sin(G)},Te=qe(Y,T,M),Ie=qe(xe,T,M),Je=qe(ye,T,M);return r.jsxs(r.Fragment,{children:[ue(Te,st=>se(st,"arc-angle","start")),ue(Ie,st=>se(st,"arc-angle","end")),ue(Je,st=>se(st,"arc-angle","move"))]})},ae=J=>{const ce=rc(J),le=ce[J.isFlippedVertically?3:0],ne=ce[J.isFlippedVertically?2:1],Ee=qe(le,T,M),fe=qe(ne,T,M);return r.jsxs(r.Fragment,{children:[ue(Ee,Me=>se(Me,"trapezoid-offset","left")),ue(fe,Me=>se(Me,"trapezoid-offset","right"))]})},ee=J=>{const le=sc(J)[J.isFlippedVertically?3:0],ne=qe(le,T,M);return ue(ne,Ee=>se(Ee,"parallelogram-angle","angle"))},ge=J=>{const le=Wr(J)[0],ne=qe(le,T,M);return ue(ne,Ee=>se(Ee,"triangle-vertex","top"))},ve=J=>{const ce=Il(J);if(ce.length<2||J.innerRadius===void 0)return null;let le=ce[1];if(J.innerRadius===0){const Ee=Math.PI*2/J.sides,fe=-Math.PI/2,Me=Ee/2+fe,Ne=10/l.scale;le={x:J.cx+Math.cos(Me)*Ne,y:J.cy+Math.sin(Me)*Ne}}const ne=qe(le,T,M);return ue(ne,Ee=>se(Ee,"star-inner-radius","inner-radius"))};return r.jsxs(wt.Fragment,{children:[r.jsx("g",{transform:`rotate(${M} ${T.x} ${T.y})`,children:r.jsx("rect",{x:S.x,y:S.y,width:S.width,height:S.height,fill:"none",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}})}),y,r.jsxs("g",{children:[k.map(({name:J,x:ce,y:le})=>{const ne=qe({x:ce,y:le},T,M),Ee=x2(J);return r.jsxs("g",{onMouseDown:fe=>N(fe,J),onTouchStart:fe=>N(fe,J),"data-handle":"true",style:{cursor:m?"inherit":`${Ee}`},children:[r.jsx("rect",{x:ne.x-h/2,y:ne.y-h/2,width:h,height:h,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"},transform:`rotate(${-M} ${ne.x} ${ne.y})`}),r.jsx("rect",{x:ne.x-p/2,y:ne.y-p/2,width:p,height:p,fill:"transparent"})]},J)}),"rotation"in e&&e.rotation!==void 0&&r.jsxs("g",{onMouseDown:F,onTouchStart:F,"data-handle":"true",style:{cursor:m?"inherit":yd},children:[r.jsx("line",{x1:T.x,y1:T.y,x2:I.x,y2:I.y,stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:I.x,cy:I.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:g,style:{pointerEvents:"none"},transform:`rotate(${-M} ${I.x} ${I.y})`}),r.jsx("circle",{cx:I.x,cy:I.y,r:p/2,fill:"transparent"})]}),C,e.type==="arc"&&pe(e),e.type==="trapezoid"&&ae(e),e.type==="parallelogram"&&ee(e),e.type==="triangle"&&ge(e),e.type==="star"&&ve(e)]})]})},mv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),r.jsx("path",{d:"M13 13l6 6"})]}),hv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 4H4v16",strokeDasharray:"4 4"}),r.jsx("path",{d:"M4 20L12 12L20 4v16H4"}),r.jsx("circle",{cx:"20",cy:"4",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"4",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"4",cy:"4",r:"2",fill:"var(--bg-primary)"})]}),pv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),gv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"})}),yv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("circle",{cx:"12",cy:"12",r:"10"})}),xv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"})}),vd=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"16 18 22 12 16 6"}),r.jsx("polyline",{points:"8 6 2 12 8 18"})]}),Ut=({size:e=24})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),C2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M4 4v16"}),r.jsx("path",{d:"M4 4h16"}),r.jsx("path",{d:"M4 20l-4-5h8z",fill:"currentColor",strokeWidth:"0"}),r.jsx("path",{d:"M20 4l-5-4v8z",fill:"currentColor",strokeWidth:"0"})]}),T2=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M4 14h-2v6h6v-2H4v-4zm16 0v4h-4v2h6v-6h-2zM4 10V4h6V2H2v8h2zm16-6v6h2V2h-8v2h6z"})}),vv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"4"})}),Cv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),r.jsx("circle",{cx:"3",cy:"12",r:"1.5"}),r.jsx("circle",{cx:"8",cy:"5",r:"1.5"}),r.jsx("circle",{cx:"15",cy:"16",r:"1.5"}),r.jsx("circle",{cx:"20",cy:"12",r:"1.5"})]}),Tv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M 2 20.7 C 4 10, 8 9.4, 15 12.6 S 22 3.5, 22 3.5",fill:"none"}),r.jsx("circle",{cx:"2",cy:"20.7",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"22",cy:"3.5",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"8",cy:"9.4",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"15",cy:"12.6",r:"2.7",strokeWidth:"0",fill:"currentColor"})]}),bv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2l10 7.5-4 12.5H6L2 9.5z"})}),Sv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),wv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2L2 22h20L12 2z"})}),Ev=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M3 22L21 22L3 4z"})}),Mv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2l8 10-8 10-8-10z"})}),kv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M2 20h20L18 4H6z"})}),Av=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M2 20l6-16h14l-6 16H2z"})}),_v=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 12,22 A 10,10 0 1 1 22,12 L 12,12 Z"})}),Nv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 22 12 A 10 10 0 1 0 12 22 Z"})}),Rv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 2 8 C 13 8, 22 12.5, 22 18"})}),Dv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),jv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M 3 4 H 21 V 7 H 14 V 19 H 17 V 21 H 7 V 19 H 10 V 7 H 3 Z"})}),Iv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),r.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Lv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M14 6l5 5-5 5M10 18l-5-5 5-5"})}),b2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M14 17a5 5 0 1 0 0-10H5.5"}),r.jsx("path",{d:"M9.5 11L5.5 7l4-4"})]}),S2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M10 17a5 5 0 1 1 0-10h8.5"}),r.jsx("path",{d:"M14.5 11L18.5 7l-4-4"})]}),Uv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2",ry:"2"}),r.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),uc=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),w2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),E2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M22 2 V22 H2",fill:"none",strokeDasharray:"3 3"}),r.jsx("circle",{cx:"2",cy:"2",r:"2",stroke:"none"}),r.jsxs("g",{fill:"none",children:[r.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"2"}),r.jsx("line",{x1:"2",y1:"2",x2:"2",y2:"22"}),r.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),r.jsxs("g",{stroke:"none",children:[r.jsx("polygon",{points:"22,2 19,0.5 19,3.5"}),r.jsx("polygon",{points:"2,22 0.5,19 3.5,19"}),r.jsx("polygon",{points:"22,22 22,19 19,22"})]})]}),M2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"2",y:"2",width:"20",height:"20",fill:"none",strokeDasharray:"3 3"}),r.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"none"}),r.jsxs("g",{fill:"none",children:[r.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.jsx("line",{x1:"21",y1:"3",x2:"3",y2:"21"})]}),r.jsxs("g",{stroke:"none",children:[r.jsx("polygon",{points:"3,3 5.5,3 3,5.5"}),r.jsx("polygon",{points:"21,21 18.5,21 21,18.5"}),r.jsx("polygon",{points:"21,3 18.5,3 21,5.5"}),r.jsx("polygon",{points:"3,21 5.5,21 3,18.5"})]})]}),Pv=({size:e=16})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})}),k2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),A2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"9 11 12 14 22 4"}),r.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),_2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),r.jsx("path",{d:"M20 12 L3 12",strokeDasharray:"4 2"})]}),N2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),r.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),R2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),D2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),j2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 2v2.5"}),r.jsx("path",{d:"M12 22v-2.5"}),r.jsx("path",{d:"M22 12h-2.5"}),r.jsx("path",{d:"M2 12h2.5"})]}),I2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),r.jsx("polyline",{points:"5 12 12 5 19 12"})]}),L2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Vv=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),$v=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),r.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),U2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),P2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"23 4 23 10 17 10"}),r.jsx("polyline",{points:"1 20 1 14 7 14"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"}),r.jsx("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"})]}),V2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),$2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),F2=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),H2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M17 10h4v4"}),r.jsx("path",{d:"M21 14l-4-4"}),r.jsx("path",{d:"M3 6h12"}),r.jsx("path",{d:"M3 12h12"}),r.jsx("path",{d:"M3 18h12"})]}),B2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"1"}),r.jsx("circle",{cx:"19",cy:"12",r:"1"}),r.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),z2=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.jsx("polyline",{points:"14 2 14 8 20 8"}),r.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),r.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),G2=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M20 12v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5"}),r.jsx("path",{d:"M18 8V2l-4 4"}),r.jsx("path",{d:"M14 2h4a2 2 0 0 1 2 2v2"})]}),q2=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M3 3v5h5"}),r.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),r.jsx("path",{d:"M12 7v5l4 2"})]}),O2=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),r.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),r.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Y2=({size:e=16})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M5 3l14 9-14 9V3z"})}),J2=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),W2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),r.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]}),X2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),r.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),r.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]}),K2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),r.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]}),Z2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}),r.jsx("path",{d:"M14 12a4 4 0 0 1 0 8H6"}),r.jsx("line",{x1:"4",y1:"12",x2:"18",y2:"12"})]}),Q2=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"17",y1:"18",x2:"3",y2:"18"})]}),e1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]}),t1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]}),n1=({size:e=96,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),r.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),r.jsx("path",{d:"M9 8h.01"}),r.jsx("path",{d:"M15 8h.01"}),r.jsx("path",{d:"M9.5 13a4.6 4.6 0 0 0 5 0"})]}),i1=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})}),o1=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}),l1=({size:e=20,className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:r.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),r1=({size:e=18,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),r.jsx("polyline",{points:"15 3 21 3 21 9"}),r.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),mo=3,Dh=.05,jh=30,s1=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";case"line-start":case"line-end":return"grabbing";default:return"default"}},Ih=e=>e%360,ci=e=>e.map(t=>`${t.x},${t.y}`).join(" "),a1=e=>{const{width:t,height:n,backgroundColor:i,shapes:o,addShape:l,updateShape:c,activeTool:u,drawMode:f,fillColor:d,strokeColor:m,strokeWidth:h,textColor:p,textFont:g,textFontSize:v,numberOfSides:T,selectedShapeId:M,onSelectShape:x,isDrawingPolyline:y,polylinePoints:C,setPolylinePoints:S,onCompletePolyline:k,onCancelPolyline:N,isDrawingBezier:R,bezierPoints:B,setBezierPoints:X,onCompleteBezier:I,onCancelBezier:F,showGrid:se,gridSize:ue,snapStep:pe,viewTransform:ae,setViewTransform:ee,activePointIndex:ge,setActivePointIndex:ve,showCursorCoords:J,showRotationAngle:ce,pendingImage:le,setPendingImage:ne,setCursorPos:Ee,showNotification:fe,onStartInlineEdit:Me,inlineEditingShapeId:Ne}=e,[K,z]=w.useState(null),[W,Se]=w.useState(null),[b,G]=w.useState(null),[Y,xe]=w.useState(null),ye=w.useRef(null),Te=w.useRef(null),Ie=w.useRef(!1),Je=w.useRef(null),st=w.useRef(null),Pt=w.useCallback(E=>{if(!ye.current)return{x:0,y:0};const _=ye.current.getBoundingClientRect();return{x:E.clientX-_.left,y:E.clientY-_.top}},[]),He=w.useCallback(E=>{const _=(E.x-ae.x)/ae.scale,H=(E.y-ae.y)/ae.scale;return pe>0?{x:Math.round(_/pe)*pe,y:Math.round(H/pe)*pe}:{x:_,y:H}},[ae,pe]),wi=w.useCallback(E=>{if(E.button===1){z({type:"panning",initialPos:{x:E.clientX,y:E.clientY}});return}Ie.current=!1;const _=He(Pt(E));if(Je.current=_,E.button===2){const Z=E.target.dataset.id,q=Z?o.find(V=>V.id===Z):null;if(q){M!==Z&&x(Z);let V;switch(q.type){case"line":V={...q,points:[{...q.points[0]},{...q.points[1]}]};break;case"pencil":case"polyline":case"bezier":V={...q,points:q.points.map(me=>({...me}))};break;default:V={...q}}z({type:"duplicating",initialShape:V,startPos:_})}return}if(E.button!==0)return;const H=E.target;if(H.closest('[data-handle="true"]'))return;if(R){X(Z=>[...Z,_]);return}if(y){S(Z=>[...Z,_]);return}const be=H.dataset.id,Q=o.find(Z=>(Z==null?void 0:Z.id)===be);if(u==="edit-points"){Q?Q&&Q.state==="normal"&&M!==Q.id&&x(Q.id):x(null);return}if(u==="select"){Q&&Q.state!=="disabled"?(z({type:"dragging",initialShape:Q,startPos:_}),M!==Q.id&&x(Q.id)):z({type:"panning",initialPos:{x:E.clientX,y:E.clientY}});return}x(null);const D=new Date().toISOString();let P=null;switch(u){case"rectangle":P={id:D,name:ut[u],type:"rectangle",x:_.x,y:_.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1,joinstyle:"miter"};break;case"square":P={id:D,name:ut[u],type:"rectangle",x:_.x,y:_.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0,joinstyle:"miter"};break;case"circle":P={id:D,name:ut[u],type:"ellipse",cx:_.x,cy:_.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0};break;case"ellipse":P={id:D,name:ut[u],type:"ellipse",cx:_.x,cy:_.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1};break;case"line":P={id:D,name:ut[u],type:"line",points:[{..._},{..._}],stroke:m,strokeWidth:h,rotation:0,capstyle:"round",state:"normal"};break;case"pencil":P={id:D,name:ut[u],type:"pencil",points:[_],stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"round",capstyle:"round",isAspectRatioLocked:!1};break;case"triangle":P={id:D,name:ut[u],type:"triangle",x:_.x,y:_.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",topVertexOffset:0,isAspectRatioLocked:!1};break;case"right-triangle":P={id:D,name:ut[u],type:"right-triangle",x:_.x,y:_.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"rhombus":P={id:D,name:ut[u],type:"rhombus",x:_.x,y:_.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"trapezoid":P={id:D,name:ut[u],type:"trapezoid",x:_.x,y:_.y,width:0,height:0,topLeftOffsetRatio:.25,topRightOffsetRatio:.25,isSymmetrical:!0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"parallelogram":P={id:D,name:ut[u],type:"parallelogram",x:_.x,y:_.y,width:0,height:0,angle:75,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"pieslice":case"chord":case"arc":{let Z;u==="pieslice"?Z="pieslice":u==="chord"?Z="chord":Z="arc";const q=Z==="arc"?"none":d,V=Z==="pieslice"||Z==="chord"?270:90;P={id:D,name:ut[u],type:"arc",x:_.x,y:_.y,width:0,height:0,fill:q,stroke:m,strokeWidth:h,rotation:0,state:"normal",start:0,extent:V,style:Z,capstyle:"round",isAspectRatioLocked:!1};break}case"polygon":case"star":P={id:D,name:ut[u],type:u,cx:_.x,cy:_.y,radius:0,sides:T,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",innerRadius:u==="star"?0:void 0,isAspectRatioLocked:!0};break;case"text":{P={id:D,name:ut[u],type:"text",x:_.x,y:_.y,text:"Текст",font:g,fontSize:v,weight:"normal",slant:"roman",underline:!1,overstrike:!1,fill:p,stroke:"none",strokeWidth:0,rotation:0,anchor:"nw",justify:"left",width:0,state:"normal",isAspectRatioLocked:!1};break}case"image":{if(le){const Z=new Image;Z.onload=()=>{const q={id:D,name:ut[u],type:"image",x:_.x,y:_.y,width:Z.width,height:Z.height,src:le,stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!0};l(q),ne(null)},Z.src=le}break}case"bitmap":{P={id:D,name:ut[u],type:"bitmap",x:_.x,y:_.y,width:50,height:50,bitmapType:"error",foreground:"#000000",background:"#ffffff",stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!1};break}}P&&!["text","image","bitmap"].includes(P.type)?z({type:"drawing",shape:P,startPos:_}):P&&l(P)},[u,o,x,d,m,h,p,g,v,T,y,S,R,X,He,Pt,M,le,ne,l]),ti=w.useCallback(E=>{const _=Pt(E);xe(_);const H=He(_);if(G(H),Ee(H),!Ie.current&&Je.current&&Math.hypot(H.x-Je.current.x,H.y-Je.current.y)>mo&&(Ie.current=!0),!K)return;if(K.type==="drawing"){const{shape:D,startPos:P}=K;let Z=D;switch(D.type){case"rectangle":{let q=Math.abs(H.x-P.x),V=Math.abs(H.y-P.y);if(D.isAspectRatioLocked&&(q=V=Math.max(q,V)),f==="corner"){const me=H.x<P.x?P.x-q:P.x,L=H.y<P.y?P.y-V:P.y;Z={...D,x:me,y:L,width:q,height:V}}else D.isAspectRatioLocked?q=V=Math.max(Math.abs(H.x-P.x),Math.abs(H.y-P.y))*2:(q*=2,V*=2),Z={...D,x:P.x-q/2,y:P.y-V/2,width:q,height:V};break}case"arc":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":{let q=Math.abs(H.x-P.x),V=Math.abs(H.y-P.y);if("isAspectRatioLocked"in D&&D.isAspectRatioLocked&&(q=V=Math.max(q,V)),f==="corner"){const me=H.x<P.x?P.x-q:P.x,L=H.y<P.y?P.y-V:P.y;Z={...D,x:me,y:L,width:q,height:V}}else"isAspectRatioLocked"in D&&D.isAspectRatioLocked?q=V=Math.max(Math.abs(H.x-P.x),Math.abs(H.y-P.y))*2:(q*=2,V*=2),Z={...D,x:P.x-q/2,y:P.y-V/2,width:q,height:V};break}case"ellipse":{const q=H.x-P.x,V=H.y-P.y;if(D.isAspectRatioLocked){const me=Math.hypot(q,V),L=f==="center"?me:me/2,oe=f==="center"?P.x:P.x+q/2,he=f==="center"?P.y:P.y+V/2;Z={...D,cx:oe,cy:he,rx:L,ry:L}}else{const me=f==="center"?Math.abs(q):Math.abs(q)/2,L=f==="center"?Math.abs(V):Math.abs(V)/2,oe=f==="center"?P.x:P.x+q/2,he=P.y+V/2;Z={...D,cx:oe,cy:he,rx:me,ry:L}}break}case"line":{Z={...D,points:[P,H]};break}case"pencil":{Z={...D,points:[...D.points,H]};break}case"polygon":case"star":{let q,V,me;if(f==="corner"){const oe=Math.abs(H.x-P.x),he=Math.abs(H.y-P.y);q=P.x+(H.x-P.x)/2,V=P.y+(H.y-P.y)/2,me=Math.min(oe,he)/2}else q=P.x,V=P.y,me=Math.hypot(H.x-P.x,H.y-P.y);const L=D.type==="star"?me/2:void 0;Z={...D,cx:q,cy:V,radius:me,innerRadius:L};break}}z({...K,shape:Z});return}if(K.type==="panning"){const D=E.clientX-K.initialPos.x,P=E.clientY-K.initialPos.y;ee(Z=>({...Z,x:Z.x+D,y:Z.y+P})),z({type:"panning",initialPos:{x:E.clientX,y:E.clientY}});return}const be=W??("initialShape"in K?K.initialShape:null);if(!be)return;let Q=be;switch(K.type){case"point-editing":{const{initialShape:D,pointIndex:P,center:Z}=K,q=D,V="rotation"in D?D.rotation:0;let me=H;V!==0&&(me=qe(H,Z,-V));const L=[...q.points];L[P]=me,Q={...q,points:L};break}case"arc-angle-editing":{const{initialShape:D,handle:P,center:Z,initialMouseAngle:q}=K;let me=Math.atan2(-(H.y-Z.y),H.x-Z.x)*180/Math.PI-q;if(me>180&&(me-=360),me<-180&&(me+=360),P==="move"||D.isExtentLocked)Q={...D,start:D.start+me};else if(P==="start"){const L=D.start+me,oe=D.extent-me;Q={...D,start:L,extent:Ih(oe)}}else{const L=D.extent+me;Q={...D,extent:Ih(L)}}break}case"triangle-vertex-editing":{const{initialShape:D}=K,P=Tt(D);if(!P||D.width===0)break;const q=(qe(H,P,-D.rotation).x-(D.x+D.width/2))/D.width;Q={...D,topVertexOffset:q};break}case"star-inner-radius-editing":{const{initialShape:D,center:P}=K;if(D.type!=="star")break;const Z=Math.hypot(H.x-P.x,H.y-P.y),q=Math.max(0,Math.min(Z,D.radius));Q={...D,innerRadius:q};break}case"trapezoid-offset-editing":{const{initialShape:D,handle:P}=K,Z=Tt(D);if(!Z||D.width===0)break;const q=qe(H,Z,-D.rotation);let V=D.topLeftOffsetRatio,me=D.topRightOffsetRatio;if(P==="left"?(V=(q.x-D.x)/D.width,D.isSymmetrical&&(me=V)):(me=(D.x+D.width-q.x)/D.width,D.isSymmetrical&&(V=me)),V=Math.max(0,V),me=Math.max(0,me),V+me>=1)break;Q={...D,topLeftOffsetRatio:V,topRightOffsetRatio:me};break}case"parallelogram-angle-editing":{const{initialShape:D}=K,P=Tt(D);if(!P||D.height===0)break;const q=qe(H,P,-D.rotation).x-D.x;if(D.width-Math.abs(q)<=0)break;let me=Math.atan2(D.height,q)*180/Math.PI;me=Math.max(1,Math.min(179,me)),Q={...D,angle:me};break}case"duplicating":case"dragging":{const D=H.x-K.startPos.x,P=H.y-K.startPos.y,{initialShape:Z}=K;switch(Z.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":Q={...Z,x:Z.x+D,y:Z.y+P};break;case"ellipse":case"polygon":case"star":Q={...Z,cx:Z.cx+D,cy:Z.cy+P};break;case"line":case"bezier":case"pencil":case"polyline":Q={...Z,points:Z.points.map(q=>({x:q.x+D,y:q.y+P}))};break}break}case"resizing":{const{initialShape:D,handle:P,anchorPointGlobal:Z,initialShapeProps:q}=K,{bbox:V,rotationCenter:me,geometricCenter:L}=q;if(P==="line-start"||P==="line-end"){Q={...D,points:P==="line-start"?[H,Z]:[Z,H],rotation:0};break}const oe=qe(H,me,-D.rotation),he=qe(Z,me,-D.rotation);let Le;const Wt=P.includes("left")||P.includes("right"),Xt=P.includes("top")||P.includes("bottom"),xn="isAspectRatioLocked"in D&&D.isAspectRatioLocked;if(Wt&&Xt){let je=Math.abs(oe.x-he.x),$e=Math.abs(oe.y-he.y);if(xn&&(V.width>0||V.height>0)){const kt=V.width/V.height;je/V.width>$e/V.height?$e=je/kt:je=$e*kt}const it=P.includes("left")?he.x-je:he.x,at=P.includes("top")?he.y-$e:he.y;Le={x:it,y:at,width:je,height:$e}}else if(xn){const je=V.height===0||V.width===0?1:V.width/V.height;if(Wt){const $e=Math.abs(oe.x-he.x),it=$e/je;Le={x:Math.min(oe.x,he.x),y:V.y+V.height/2-it/2,width:$e,height:it}}else{const $e=Math.abs(oe.y-he.y),it=$e*je;Le={x:V.x+V.width/2-it/2,y:Math.min(oe.y,he.y),width:it,height:$e}}}else Wt?Le={x:Math.min(oe.x,he.x),y:V.y,width:Math.abs(oe.x-he.x),height:V.height}:Le={x:V.x,y:Math.min(oe.y,he.y),width:V.width,height:Math.abs(oe.y-he.y)};["line","pencil","polyline","bezier"].includes(D.type)&&(Le.width=Math.max(1,Le.width),Le.height=Math.max(1,Le.height));const{width:Mt,height:Ve}=Le,Kt={x:Le.x+Mt/2,y:Le.y+Ve/2},zt={x:Kt.x-(V.x+V.width/2),y:Kt.y-(V.y+V.height/2)},ht=qe(zt,{x:0,y:0},D.rotation),Ke={x:L.x+ht.x,y:L.y+ht.y};switch(D.type){case"text":{const je=io(D);if(je.width<=0)break;const $e=Mt/je.width,it=Math.max(.1,D.fontSize*$e),at={x:Ke.x-Mt/2,y:Ke.y-Ve/2,width:Mt,height:Ve},kt=D.anchor;let Ze=at.x,Dt=at.y;["n","s","center"].includes(kt)&&(Ze+=at.width/2),["ne","e","se"].includes(kt)&&(Ze+=at.width),["w","e","center"].includes(kt)&&(Dt+=at.height/2),["sw","s","se"].includes(kt)&&(Dt+=at.height),Q={...D,fontSize:parseFloat(it.toFixed(1)),x:Ze,y:Dt};break}case"triangle":{const je=D,$e=Wr(je),it=Xr({...je,rotation:0}),at=it.width>0?Mt/it.width:1,kt=it.height>0?Ve/it.height:1,Ze=$e.map(jn=>({x:he.x+(jn.x-he.x)*at,y:he.y+(jn.y-he.y)*kt})),Dt=Ze.map(jn=>jn.x),Hn=Ze.map(jn=>jn.y),ii={x:Math.min(...Dt),y:Math.min(...Hn),width:Math.max(...Dt)-Math.min(...Dt),height:Math.max(...Hn)-Math.min(...Hn)},Zt=Ze[0],Ei=[Ze[1],Ze[2]],oi=Math.abs(Ei[0].x-Ei[1].x),xc=Math.abs(Zt.y-Ei[0].y),$o=Math.min(Ei[0].x,Ei[1].x),ys=Zt.y,so=oi>0?(Zt.x-($o+oi/2))/oi:0,vc=$o-ii.x,ao=ys-ii.y,Cc=Ke.x-ii.width/2,Tc=Ke.y-ii.height/2,xs=Cc+vc,Dn=Tc+ao;Q={...je,x:xs,y:Dn,width:oi,height:xc,topVertexOffset:so};break}case"rectangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const je=Ke.x-Mt/2,$e=Ke.y-Ve/2;Q={...D,x:je,y:$e,width:Mt,height:Ve};break}case"ellipse":{const je=Mt/2,$e=Ve/2;Q={...D,cx:Ke.x,cy:Ke.y,rx:je,ry:$e};break}case"polygon":case"star":{const je=V.width>0?Mt/V.width:1,$e=V.height>0?Ve/V.height:1,it=Math.max(je,$e),at=D.radius*it;let kt=D.innerRadius;D.type==="star"&&D.innerRadius!==void 0&&(kt=D.innerRadius*it),Q={...D,cx:Ke.x,cy:Ke.y,radius:at,innerRadius:kt};break}case"line":case"bezier":case"pencil":case"polyline":{const je=V.width!==0?Mt/V.width:1,$e=V.height!==0?Ve/V.height:1,it=D.points.map(Dt=>({x:Le.x+(Dt.x-V.x)*je,y:Le.y+(Dt.y-V.y)*$e})),at={x:Ke.x-Le.width/2,y:Ke.y-Le.height/2},kt={x:at.x-Le.x,y:at.y-Le.y},Ze=it.map(Dt=>({x:Dt.x+kt.x,y:Dt.y+kt.y}));Q={...D,points:Ze};break}}break}case"rotating":{const{center:D,startAngle:P,initialShape:Z}=K;if(!("rotation"in Z))break;let me=(Math.atan2(H.y-D.y,H.x-D.x)+P)*180/Math.PI;me=Math.round(me),Q={...Z,rotation:me};break}}Se(Q)},[K,f,W,He,ee,Pt,Ee]),ni=w.useCallback(E=>{if((K==null?void 0:K.type)==="panning"&&!Ie.current&&x(null),(K==null?void 0:K.type)==="drawing"&&Ie.current){const{shape:_}=K;"width"in _&&"height"in _&&(_.width<=mo||_.height<=mo)||"rx"in _&&(_.rx*2<=mo||_.ry*2<=mo)||"radius"in _&&_.radius<=mo||_.type==="line"&&Math.hypot(_.points[1].x-_.points[0].x,_.points[1].y-_.points[0].y)<=mo||_.type==="pencil"&&_.points.length<=2||l(_)}else if((K==null?void 0:K.type)==="duplicating"&&W){if(Ie.current){const _={...W,id:new Date().toISOString()};l(_),fe("Фігуру дубльовано.")}}else if((K==null?void 0:K.type)==="point-editing"&&W){const{initialShape:_,center:H}=K;let be=W;const Q=_.name,D=Q&&!Va(Q);if("rotation"in _&&_.rotation!==0)if(_.type==="bezier"||_.type==="polyline"&&_.smooth){const q=W.points.map(me=>qe(me,H,_.rotation)),V={...W,points:q,rotation:0,name:void 0};V.name=D?Q:Ot(V),be=V}else{const Z=ei(W,H);if(Z){const q={...W,points:Z,rotation:0,name:void 0};q.name=D?Q:Ot(q),be=q}}else{const P=W,Z=D?Q:Ot(P);P.name!==Z&&(be={...P,name:Z})}c(be)}else W&&c(W);z(null),Se(null),Ie.current=!1,Je.current=null},[K,l,c,x,W,fe]),hc=E=>{if(y){k(!1);return}if(R){I(!1);return}const _=E.target.dataset.id,H=o.find(be=>be.id===_);H&&H.type==="text"&&Me(H.id)},hs=E=>{G(null),xe(null),Ee(null),Je.current&&ni(E)},pc=E=>{E.preventDefault();const{deltaY:_}=E,H=1.1,be=Pt(E);ee(Q=>{let D=_<0?Q.scale*H:Q.scale/H;if(D=Math.max(Dh,Math.min(jh,D)),D===Q.scale)return Q;const P=be.x-(be.x-Q.x)*(D/Q.scale),Z=be.y-(be.y-Q.y)*(D/Q.scale);return{scale:D,x:P,y:Z}})},Ol=w.useCallback(E=>{if(E.preventDefault(),E.touches.length>=2){const[be,Q]=[E.touches[0],E.touches[1]],D=Math.hypot(be.clientX-Q.clientX,be.clientY-Q.clientY);if(D<1){st.current=null;return}const P={x:(be.clientX+Q.clientX)/2,y:(be.clientY+Q.clientY)/2};st.current={initialDist:D,initialMidpoint:P,initialTransform:ae},z(null);return}const _=E.touches[0],H={clientX:_.clientX,clientY:_.clientY,button:0,target:E.target};wi(H)},[wi,ae]),gc=w.useCallback(E=>{if(E.preventDefault(),E.touches.length===1){const _=E.touches[0],H={clientX:_.clientX,clientY:_.clientY,button:0};ti(H)}else if(E.touches.length===2&&st.current){const{initialDist:_,initialMidpoint:H,initialTransform:be}=st.current;if(_===0)return;const[Q,D]=[E.touches[0],E.touches[1]],P=Math.hypot(Q.clientX-D.clientX,Q.clientY-D.clientY),Z={x:(Q.clientX+D.clientX)/2,y:(Q.clientY+D.clientY)/2};let q=be.scale*(P/_);q=Math.max(Dh,Math.min(jh,q));const V=Z.x-H.x,me=Z.y-H.y,L=Z.x-(Z.x-(be.x+V))*(q/be.scale),oe=Z.y-(Z.y-(be.y+me))*(q/be.scale);ee({scale:q,x:L,y:oe})}},[ti,ee,Pt]),Uo=w.useCallback(E=>{E.preventDefault(),E.touches.length<2&&(st.current=null);const _=E.changedTouches[0];if(_){const H={clientX:_.clientX,clientY:_.clientY,button:0,target:E.target};ni(H)}else ni({button:0})},[ni]),Yl=w.useMemo(()=>{let E=[...o];if((K==null?void 0:K.type)==="drawing"&&Ie.current)E.push(K.shape);else if((K==null?void 0:K.type)==="duplicating"&&W)E.push(W);else if(W){const _=E.findIndex(H=>(H==null?void 0:H.id)===W.id);_!==-1&&(E[_]=W)}if(y&&C.length>0&&b){const _=C.filter(Boolean);_.length>0&&(E.push({id:"temp-polyline-main",type:"polyline",points:_,isClosed:!1,stroke:m,strokeWidth:h,fill:"none",state:"normal",joinstyle:"round",rotation:0,capstyle:"round"}),E.push({id:"temp-polyline-rubberband",type:"line",points:[_[_.length-1],b],stroke:m,strokeWidth:1,rotation:0,state:"normal",dash:[4,4]}))}if(R&&B.length>0&&b){const _=B.filter(Boolean);if(_.length>0){const H=[..._,b];E.push({id:"temp-bezier-preview-dashed",type:"bezier",points:H,smooth:!0,splinesteps:12,stroke:m,strokeWidth:1,dash:[4,4],capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"}),_.length>1&&E.push({id:"temp-bezier-main-solid",type:"bezier",points:_,smooth:!0,splinesteps:12,stroke:m,strokeWidth:h,capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"})}}return E},[o,K,Ie,W,y,C,b,m,h,R,B]),ro=w.useMemo(()=>{const E=o.find(_=>(_==null?void 0:_.id)===M);return(E==null?void 0:E.id)===(W==null?void 0:W.id)?W:E??null},[o,M,W]),Jl=(()=>{if(!K)return u==="select"?"grab":u==="edit-points"?"default":u==="image"&&le?"copy":["text","image","bitmap"].includes(u)&&u!=="image"?"crosshair":u==="image"&&!le?"default":"crosshair";switch(K.type){case"panning":case"dragging":case"point-editing":return"grabbing";case"duplicating":return h2;case"arc-angle-editing":return xd;case"rotating":return yd;case"resizing":return s1(K.handle);case"trapezoid-offset-editing":case"parallelogram-angle-editing":case"triangle-vertex-editing":case"star-inner-radius-editing":return xd;case"drawing":return"crosshair";default:return u==="select"?"grab":u==="edit-points"?"default":"crosshair"}})(),yc=E=>{if("rotation"in E&&E.rotation&&E.rotation!==0){const _=E.type==="text"?{x:E.x,y:E.y}:Tt(E);if(_)return`rotate(${E.rotation} ${_.x} ${_.y})`}},Wl=w.useMemo(()=>{const E=new Map;return Yl.forEach(_=>{if((_.type==="line"||_.type==="bezier"||_.type==="pencil"||_.type==="polyline"&&!_.isClosed||_.type==="arc"&&_.style==="arc")&&_.arrow&&_.arrow!=="none"&&_.stroke!=="none"&&_.strokeWidth>0&&_.arrowshape){const[H,be,Q]=_.arrowshape,D=_.strokeWidth,P=H*D,Z=be*D,q=Q*D,V=JSON.stringify({color:_.stroke,shape:[P,Z,q]});E.has(V)||E.set(V,{color:_.stroke,shapeParams:[P,Z,q]})}}),Array.from(E.values())},[Yl]),ln=E=>{const _=E.joinstyle??"miter";return{strokeLinejoin:_,strokeMiterlimit:_==="miter"?10:void 0}},ps=w.useMemo(()=>{const E=y?C:B;if(!((y||R)&&E.length>0))return null;const H=E.length>=2,be=E.length>=3,Q="flex items-center gap-2 px-3 py-1.5 rounded-md transition-colors duration-200 text-sm font-semibold",D="bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)]",P="bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)]",Z="bg-[var(--bg-disabled)] text-[var(--text-disabled)] cursor-not-allowed";return r.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-[var(--bg-primary)]/80 backdrop-blur-sm p-1 rounded-lg shadow-lg flex items-center gap-2 z-10",onMouseDown:q=>q.stopPropagation(),onTouchStart:q=>q.stopPropagation(),children:[r.jsxs("button",{onClick:()=>y?k(!1):I(!1),title:"Завершити",disabled:!H,className:`${Q} ${H?D:Z}`,children:[r.jsx(A2,{}),r.jsx("span",{children:"Завершити"})]}),r.jsxs("button",{onClick:()=>y?k(!0):I(!0),title:"Замкнути контур",disabled:!be,className:`${Q} ${be?D:Z}`,children:[r.jsx(_2,{}),r.jsx("span",{children:"Замкнути"})]}),r.jsxs("button",{onClick:()=>y?N():F(),title:"Скасувати",className:`${Q} ${P}`,children:[r.jsx(N2,{}),r.jsx("span",{children:"Скасувати"})]})]})},[y,R,C,B,k,I,N,F]),gs=w.useMemo(()=>{const E=i.replace("#","");if(E.length<6)return"rgba(0, 0, 0, 0.1)";const _=parseInt(E.substring(0,2),16),H=parseInt(E.substring(2,4),16),be=parseInt(E.substring(4,6),16),Q=(_*299+H*587+be*114)/1e3,D=.15,P=Math.log10(Math.max(1,ae.scale)),Z=Math.min(D+P*.25,.75);return Q<128?`rgba(255, 255, 255, ${Z})`:`rgba(0, 0, 0, ${Z})`},[i,ae.scale]),Xl=E=>Math.round(E*100)/100,Kl=(K==null?void 0:K.type)==="rotating",Zl=(K==null?void 0:K.type)==="duplicating",Po=w.useMemo(()=>{if(Kl&&K.initialShape&&"rotation"in K.initialShape){let E=null;if(W&&"rotation"in W?E=W.rotation:K.initialShape&&"rotation"in K.initialShape&&(E=K.initialShape.rotation),E!==null){const _=K.initialShape.rotation;let H=E-_;return H>180&&(H-=360),H<-180&&(H+=360),{absolute:E,delta:H}}}return null},[K,W,Kl]),Vo=(J||ce&&Kl||Zl)&&Y&&b;return r.jsxs("div",{ref:ye,className:"w-full h-full relative",style:{cursor:Jl},onMouseDown:wi,onMouseMove:ti,onMouseUp:ni,onMouseLeave:hs,onDoubleClick:hc,onWheel:pc,onTouchStart:Ol,onTouchMove:gc,onTouchEnd:Uo,onTouchCancel:Uo,onContextMenu:E=>E.preventDefault(),children:[ps,Vo&&r.jsxs("div",{className:"absolute p-1 px-2 text-xs rounded-md shadow-lg pointer-events-none z-20 bg-[var(--cursor-bg)] text-[var(--cursor-text)] font-mono",style:{left:Y.x+15,top:Y.y-15,transform:"translateY(-100%)"},children:[Zl&&r.jsx("div",{className:"font-sans font-semibold",children:"Дублювання"}),ce&&Po&&r.jsx("div",{children:`Кут: ${Po.absolute.toFixed(0)}° (Δ: ${Po.delta.toFixed(0)}°)`}),J&&r.jsx("div",{children:`X: ${Xl(b.x)}, Y: ${Xl(b.y)}`})]}),r.jsxs("svg",{ref:Te,className:"rounded-md touch-none w-full h-full",children:[r.jsxs("defs",{children:[r.jsx("filter",{id:"dropshadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:r.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"5",floodColor:"#000000",floodOpacity:"0.3"})}),se&&r.jsx("pattern",{id:"grid",width:ue,height:ue,patternUnits:"userSpaceOnUse",children:r.jsx("path",{d:`M ${ue} 0 L 0 0 0 ${ue}`,fill:"none",stroke:gs,strokeWidth:1/ae.scale})}),r.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"3",height:"3",fill:"black"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray12",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),r.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray25",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),r.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray50",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),r.jsx("mask",{id:"mask-gray75",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),r.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),r.jsx("mask",{id:"mask-bitmap-error",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),r.jsx("mask",{id:"mask-bitmap-hourglass",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-info",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-questhead",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-question",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-warning",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),Wl.map(({color:E,shapeParams:_})=>{const[H,be,Q]=_;if(H<=0||be<=0)return null;const D=`${E.replace(/[^a-zA-Z0-9]/g,"")}-${H}-${be}-${Q}`;return r.jsxs(wt.Fragment,{children:[r.jsx("marker",{id:`arrow-end-${D}`,viewBox:`0 0 ${H} ${be}`,refX:H,refY:be/2,markerUnits:"userSpaceOnUse",markerWidth:H,markerHeight:be,orient:"auto",children:r.jsx("path",{d:`M 0,0 L ${H},${be/2} L 0,${be} L ${Q},${be/2} z`,fill:E})}),r.jsx("marker",{id:`arrow-start-${D}`,viewBox:`0 0 ${H} ${be}`,refX:H,refY:be/2,markerUnits:"userSpaceOnUse",markerWidth:H,markerHeight:be,orient:"auto-start-reverse",children:r.jsx("path",{d:`M 0,0 L ${H},${be/2} L 0,${be} L ${Q},${be/2} z`,fill:E})})]},D)})]}),r.jsxs("g",{transform:`translate(${ae.x} ${ae.y}) scale(${ae.scale})`,children:[r.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:i,filter:"url(#dropshadow)"}),se&&r.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:"url(#grid)",style:{pointerEvents:"none"}}),Yl.filter(Boolean).map(E=>{if(E.state==="hidden")return null;const _=E.state==="disabled",H=u!=="select",be=(K==null?void 0:K.type)==="duplicating"&&E===W,Q=_?"default":H?"inherit":"move",D=Math.max(E.strokeWidth,20/ae.scale);let P=yc(E);if((K==null?void 0:K.type)==="point-editing"&&E.id===K.initialShape.id){const{center:L}=K,oe="rotation"in E&&E.rotation?E.rotation:0;oe!==0&&L&&(P=`rotate(${oe} ${L.x} ${L.y})`)}const q={stroke:E.stroke,strokeWidth:E.strokeWidth,transform:P,style:{pointerEvents:"none",opacity:_?.5:be?.6:1}},V={"data-id":E.id,key:`${E.id}-hitbox`,transform:P,stroke:"transparent",strokeWidth:D,style:{cursor:Q}},me=L=>{const oe=L.stroke!=="none"&&L.strokeWidth>0;let he;if("dash"in L&&L.dash&&L.dash.length>0&&L.strokeWidth>0){const Mt="capstyle"in L&&L.capstyle?L.capstyle:"butt";he=L.dash.map((Ve,Kt)=>Kt%2===0&&Ve<=2?Mt==="round"?.01:L.strokeWidth:Ve*L.strokeWidth).join(" ")}const Wt="dashoffset"in L?L.dashoffset:void 0,Xt=(L.capstyle==="projecting"?"square":L.capstyle)??"round";let xn,Vt;if(oe&&L.arrow&&L.arrow!=="none"&&L.arrowshape){const[Mt,Ve,Kt]=L.arrowshape,zt=L.strokeWidth>0?L.strokeWidth:1,ht=Mt*zt,Ke=Ve*zt,je=Kt*zt,$e=`${L.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${ht}-${Ke}-${je}`;(L.arrow==="first"||L.arrow==="both")&&(xn=`url(#arrow-start-${$e})`),(L.arrow==="last"||L.arrow==="both")&&(Vt=`url(#arrow-end-${$e})`)}return{strokeDasharray:he,strokeDashoffset:Wt,markerStart:xn,markerEnd:Vt,strokeLinecap:Xt}};switch(E.type){case"rectangle":{const L={...q,fill:E.fill,...ln(E)};return E.stipple&&E.fill!=="none"&&(L.mask=`url(#mask-${E.stipple})`),E.dash&&(L.strokeDasharray=E.dash.map(oe=>oe*E.strokeWidth).join(" ")),E.dashoffset&&(L.strokeDashoffset=E.dashoffset),r.jsxs("g",{children:[r.jsx("rect",{...V,x:E.x,y:E.y,width:E.width,height:E.height,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("rect",{x:E.x,y:E.y,width:E.width,height:E.height,...L})]},E.id)}case"ellipse":{const L=E,oe={...q,fill:L.fill};return L.stipple&&L.fill!=="none"&&(oe.mask=`url(#mask-${L.stipple})`),L.dash&&(oe.strokeDasharray=L.dash.map(he=>he*L.strokeWidth).join(" ")),L.dashoffset&&(oe.strokeDashoffset=L.dashoffset),r.jsxs("g",{children:[r.jsx("ellipse",{...V,cx:L.cx,cy:L.cy,rx:L.rx,ry:L.ry,fill:"transparent",style:{...V.style,pointerEvents:_?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("ellipse",{cx:L.cx,cy:L.cy,rx:L.rx,ry:L.ry,...oe})]},L.id)}case"arc":{const L=E,oe=Rf(L),he={...q,fill:L.style==="arc"?"none":L.fill,...me(L)};return L.stipple&&L.fill!=="none"&&L.style!=="arc"&&(he.mask=`url(#mask-${L.stipple})`),r.jsxs("g",{children:[r.jsx("path",{...V,d:oe,fill:"transparent",style:{...V.style,pointerEvents:_?"none":L.fill==="none"||L.style==="arc"?"stroke":"all"}}),r.jsx("path",{d:oe,...he})]},E.id)}case"line":return r.jsxs("g",{children:[r.jsx("line",{...V,x1:E.points[0].x,y1:E.points[0].y,x2:E.points[1].x,y2:E.points[1].y,style:{...V.style,pointerEvents:_?"none":"stroke"}}),r.jsx("line",{x1:E.points[0].x,y1:E.points[0].y,x2:E.points[1].x,y2:E.points[1].y,...q,...me(E)})]},E.id);case"bezier":{const L=vl(E.points,E.smooth,E.isClosed),oe=E.isClosed?E.fill:"none";return r.jsxs("g",{children:[r.jsx("path",{...V,d:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":oe==="none"?"stroke":"all"}}),r.jsx("path",{d:L,...q,fill:oe,...me(E),...ln(E)})]},E.id)}case"pencil":{const L=If(E.points);return r.jsxs("g",{children:[r.jsx("path",{...V,d:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":"stroke"}}),r.jsx("path",{d:L,...q,fill:"none",strokeLinecap:"round",...ln(E),...me(E)})]},E.id)}case"polyline":{const L={...q,...ln(E)};E.stipple&&E.isClosed&&E.fill!=="none"&&(L.mask=`url(#mask-${E.stipple})`),E.dash&&(L.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),E.dashoffset&&(L.strokeDashoffset=E.dashoffset);const oe=E.isClosed?E.fill:"none";if(E.isClosed||Object.assign(L,me(E)),E.smooth){const he=vl(E.points,!0,E.isClosed);return r.jsxs("g",{children:[r.jsx("path",{...V,d:he,fill:"transparent",style:{...V.style,pointerEvents:_?"none":oe==="none"?"stroke":"all"}}),r.jsx("path",{...L,d:he,fill:oe})]},E.id)}if(E.isClosed){const he=ci(E.points);return r.jsxs("g",{children:[r.jsx("polygon",{...V,points:he,fill:"transparent",style:{...V.style,pointerEvents:_?"none":oe==="none"?"stroke":"all"}}),r.jsx("polygon",{...L,points:he,fill:oe})]},E.id)}return r.jsxs("g",{children:[r.jsx("polyline",{...V,points:ci(E.points),fill:"transparent",style:{...V.style,pointerEvents:_?"none":"stroke"}}),r.jsx("polyline",{...L,points:ci(E.points),fill:"none"})]},E.id)}case"triangle":{const L=ci(Wr(E)),oe={...q,fill:E.fill,...ln(E)};return E.dash&&(oe.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...V,points:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:L})]},E.id)}case"right-triangle":{const L=ci(Df(E)),oe={...q,fill:E.fill,...ln(E)};return E.dash&&(oe.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...V,points:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:L})]},E.id)}case"rhombus":{const L=ci(jf(E)),oe={...q,fill:E.fill,...ln(E)};return E.dash&&(oe.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...V,points:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:L})]},E.id)}case"trapezoid":{const L=ci(rc(E)),oe={...q,fill:E.fill,...ln(E)};return E.dash&&(oe.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...V,points:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:L})]},E.id)}case"parallelogram":{const L=ci(sc(E)),oe={...q,fill:E.fill,...ln(E)};return E.dash&&(oe.strokeDasharray=E.dash.map(he=>he*E.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...V,points:L,fill:"transparent",style:{...V.style,pointerEvents:_?"none":E.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:L})]},E.id)}case"polygon":case"star":{const L=E,oe={...q,fill:L.fill,...ln(L)};if(L.stipple&&L.fill!=="none"&&(oe.mask=`url(#mask-${L.stipple})`),L.dash&&(oe.strokeDasharray=L.dash.map(Le=>Le*L.strokeWidth).join(" ")),L.dashoffset&&(oe.strokeDashoffset=L.dashoffset),L.smooth){const Le=vl(Il(E),!0,!0);return r.jsxs("g",{children:[r.jsx("path",{...V,d:Le,fill:"transparent",style:{...V.style,pointerEvents:_?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("path",{...oe,d:Le})]},E.id)}const he=ci(Il(E));return r.jsxs("g",{children:[r.jsx("polygon",{...V,points:he,fill:"transparent",style:{...V.style,pointerEvents:_?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...oe,points:he})]},E.id)}case"text":{const{text:L,font:oe,fontSize:he,weight:Le,slant:Wt,underline:Xt,overstrike:xn,fill:Vt,anchor:Mt,justify:Ve,width:Kt}=E,zt=ac(E),ht=io(E);if(!ht)return null;const Ke=Ve==="center"?"middle":Ve==="right"?"end":"start";let je;Ke==="start"?je=ht.x:Ke==="middle"?je=ht.x+ht.width/2:je=ht.x+ht.width,Kt>0&&(Ke==="middle"?je=ht.x+Kt/2:Ke==="end"?je=ht.x+Kt:je=ht.x);const $e={fontFamily:cc(oe),fontSize:he,fontWeight:Le,fontStyle:Wt==="italic"?"italic":"normal",textDecoration:`${Xt?"underline":""} ${xn?"line-through":""}`,visibility:E.id===Ne?"hidden":"visible"};return r.jsxs("g",{"data-id":E.id,children:[r.jsx("rect",{...V,x:ht.x,y:ht.y,width:ht.width,height:ht.height,fill:"transparent",style:{...V.style,pointerEvents:_?"none":"all"}}),r.jsx("text",{...q,x:je,y:ht.y,fill:Vt,textAnchor:Ke,dominantBaseline:"hanging",style:{...q.style,...$e,whiteSpace:"pre"},children:zt.map((it,at)=>r.jsx("tspan",{x:je,dy:at===0?0:`${he*1.2}px`,children:it},at))})]},E.id)}case"image":return r.jsxs("g",{children:[r.jsx("rect",{...V,x:E.x,y:E.y,width:E.width,height:E.height,fill:"transparent",style:{...V.style,pointerEvents:_?"none":"all"}}),r.jsx("image",{href:E.src,x:E.x,y:E.y,width:E.width,height:E.height,...q})]},E.id);case"bitmap":{const{x:L,y:oe,width:he,height:Le,bitmapType:Wt,foreground:Xt,background:xn}=E;let Vt;return Wt.startsWith("gray")?Vt=`url(#mask-${Wt})`:Vt=`url(#mask-bitmap-${Wt})`,r.jsxs("g",{children:[r.jsx("rect",{...V,x:L,y:oe,width:he,height:Le,fill:"transparent",style:{...V.style,pointerEvents:_?"none":"all"}}),r.jsxs("g",{...q,children:[r.jsx("rect",{x:L,y:oe,width:he,height:Le,fill:xn}),r.jsx("rect",{x:L,y:oe,width:he,height:Le,fill:Xt,mask:Vt})]})]},E.id)}default:return null}}),ro&&ro.state==="normal"&&r.jsx(v2,{shape:ro,setAction:z,svgRef:Te,activeTool:u,getSnappedMousePosition:He,viewTransform:ae,getPointerPosition:Pt,activePointIndex:ge,setActivePointIndex:ve,updateShape:c,action:K})]})]})]})},c1=(e,t)=>{w.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},u1=({codeLines:e,isLoading:t,error:n,onUpdate:i,onPreview:o,onSaveCode:l,onOpenOrRunCodeOnline:c,hasUnsyncedChanges:u,selectedShapeId:f,highlightCodeOnSelection:d,setHighlightCodeOnSelection:m,showLineNumbers:h,setShowLineNumbers:p,showComments:g,setShowComments:v,generatorType:T,onSwitchToLocalGenerator:M,onOpenSettingsToGenerator:x})=>{const[y,C]=w.useState(!1),[S,k]=w.useState(!1),[N,R]=w.useState(!1),B=w.useRef(null),X=w.useRef(null);c1(B,()=>R(!1));const I=w.useMemo(()=>e.map(ae=>ae.content).join(`
`),[e]),F=w.useMemo(()=>g?e.length>0:e.some(ae=>!ae.content.trim().startsWith("#")),[e,g]);w.useEffect(()=>{e.length>0&&C(!1)},[e]),w.useEffect(()=>{var ae;d&&((ae=X.current)==null||ae.scrollIntoView({behavior:"smooth",block:"center"}))},[f,e,d]);const se=()=>{I&&(navigator.clipboard.writeText(I),C(!0),setTimeout(()=>C(!1),2e3))},ue=()=>t?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-[var(--accent-primary)] rounded-full animate-spin"}),r.jsx("p",{className:"mt-4",children:"Генеруємо Python код..."})]}):n?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 p-4 text-center",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"Помилка генерації"}),r.jsx("p",{className:"text-sm",children:n}),r.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-3",children:[r.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[r.jsx(w2,{size:16}),r.jsx("span",{children:"Перейти в налаштування"})]}),T==="gemini"&&r.jsx("button",{onClick:M,className:"px-4 py-2 rounded-md font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Перемкнутись на локальний генератор"})]})]}):F?r.jsx("div",{className:"p-4 overflow-auto text-sm h-full font-mono allow-selection",children:e.map((ae,ee)=>{const ge=ae.content.trim().startsWith("#");if(!g&&ge)return null;const ve=d&&f!==null&&ae.shapeId===f,J=ve?ge?"code-line-comment-highlighted":"code-line-highlighted":"";return r.jsxs("div",{ref:ve?X:null,className:"flex items-start",children:[h&&r.jsx("span",{className:`text-right text-[var(--text-tertiary)] select-none pr-4 w-12 flex-shrink-0 ${ve&&!ge?"line-number-highlighted":""}`,"aria-hidden":"true",children:ee+1}),r.jsx("span",{className:`code-line flex-grow ${S?"whitespace-pre-wrap break-words":"whitespace-pre"} ${J?`${J} rounded`:""}`,children:ae.content||" "})]},ee)})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)] p-4",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Код з'явиться тут"}),r.jsx("p",{className:"text-sm text-center mt-2",children:!g&&e.length>0?"Коментарі приховані. Увімкніть їх, щоб побачити код.":"Намалюйте фігури та згенеруйте код."})]}),pe=T==="gemini";return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Код Tkinter"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>k(ae=>!ae),title:S?"Вимкнути перенесення рядків":"Увімкнути перенесення рядків",className:`p-1.5 rounded-md transition-colors duration-200 ${S?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:r.jsx(H2,{size:16})}),u&&e.length>0&&!t&&r.jsxs("button",{onClick:i,title:"Оновити код",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-yellow-600 hover:bg-yellow-500 text-white ${pe?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[r.jsx(P2,{}),!pe&&r.jsx("span",{children:"Оновити"})]}),e.length>0&&!n&&!t&&r.jsxs("button",{onClick:o,title:"Попередній перегляд",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] ${pe?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[r.jsx(V2,{}),!pe&&r.jsx("span",{children:"Перегляд"})]}),e.length>0&&!n&&r.jsxs("button",{onClick:se,disabled:y,className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] disabled:bg-green-600 disabled:text-white ${pe?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[y?r.jsx(Pv,{}):r.jsx(U2,{}),!pe&&(y?r.jsx("span",{children:"Скопійовано!"}):r.jsx("span",{children:"Копіювати"}))]}),r.jsxs("div",{ref:B,className:"relative",onMouseLeave:()=>R(!1),children:[r.jsx("button",{onClick:()=>R(ae=>!ae),title:"Додаткові опції",className:"p-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]",children:r.jsx(B2,{size:16})}),N&&r.jsxs("div",{className:"absolute top-full right-0 mt-0 w-64 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-20 border border-[var(--border-secondary)]",children:[r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer",title:"Показувати або приховувати коментарі у коді.",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:ae=>v(ae.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Показувати коментарі"})]}),r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Показувати або приховувати номери рядків у вікні коду.",children:[r.jsx("input",{type:"checkbox",checked:h,onChange:ae=>p(ae.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Показувати номери рядків"})]}),r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Автоматично підсвічувати рядок коду, що відповідає вибраній фігурі на полотні. Працює лише з локальним генератором.",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:ae=>m(ae.target.checked),disabled:pe,className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Підсвічувати код при виділенні"})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsxs("button",{onClick:()=>{l(),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Зберегти згенерований Python код у .py файл.",children:[r.jsx(O2,{size:16}),r.jsx("span",{children:"Зберегти у файл..."})]}),r.jsxs("button",{onClick:()=>{c(!1),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити код у онлайн-редакторі ЄPython без запуску.",children:[r.jsx(vd,{size:16}),r.jsx("span",{children:"Відкрити в онлайн IDE..."})]}),r.jsxs("button",{onClick:()=>{c(!0),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити та одразу запустити код у онлайн-редакторі ЄPython.",children:[r.jsx(Y2,{size:16}),r.jsx("span",{children:"Запустити в онлайн IDE..."})]})]})]})]})]}),r.jsx("div",{className:"flex-grow min-h-[200px] lg:min-h-0",children:ue()})]})},ie=({children:e})=>r.jsx("div",{className:"flex items-center gap-2",children:e}),re=({htmlFor:e,children:t,title:n})=>r.jsx("label",{htmlFor:e,className:"text-sm font-medium text-[var(--text-secondary)] w-24 flex-shrink-0",title:n,children:t}),Ae=w.forwardRef(({id:e,value:t,onChange:n,disabled:i,step:o=1,min:l,max:c,onFocus:u,title:f,className:d},m)=>r.jsx("input",{ref:m,id:e,type:"number",value:t,onChange:h=>{const p=Number(h.target.value);isNaN(p)||n(p)},disabled:i,step:o,min:l,max:c,onFocus:u,title:f,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${d??""}`}));Ae.displayName="NumberInput";const Fv=(e,t)=>{w.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},Gt=({id:e,value:t,onChange:n,onPreview:i,onCancel:o,disabled:l,title:c})=>{const[u,f]=w.useState(t),[d,m]=w.useState(!1),h=w.useRef(t),p=w.useRef(null);w.useEffect(()=>{d||(f(t),h.current=t)},[t,d]);const g=w.useCallback(()=>{d&&(o(),f(h.current),m(!1))},[d,o]);Fv(p,g);const v=M=>{const x=M.target.value;d||(h.current=t,m(!0)),f(x),i(x)},T=M=>{M.stopPropagation(),n(u),h.current=u,m(!1)};return r.jsxs("div",{ref:p,className:"flex items-center gap-1",children:[r.jsx("input",{id:e,type:"color",value:u,onInput:v,disabled:l,title:c,className:"w-6 h-6 p-0 border-none rounded cursor-pointer bg-[var(--bg-secondary)] disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("div",{className:"flex items-center",style:{width:48,height:24},children:d&&!l&&r.jsxs("div",{className:"flex items-center bg-[var(--bg-tertiary)] rounded-md",children:[r.jsx("button",{onClick:T,title:"Застосувати колір",className:"p-1 rounded-l-md text-green-400 hover:bg-green-600 hover:text-white",children:r.jsx(Pv,{size:16})}),r.jsx("button",{onClick:g,title:"Скасувати зміну",className:"p-1 rounded-r-md text-red-400 hover:bg-red-600 hover:text-white",children:r.jsx(Ut,{size:16})})]})})]})},Tn=({id:e,checked:t,onChange:n,label:i,disabled:o,title:l})=>r.jsxs("div",{className:"flex items-center gap-2",title:l,children:[r.jsx("input",{id:e,type:"checkbox",checked:t,onChange:c=>n(c.target.checked),disabled:o,className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("label",{htmlFor:e,className:`text-sm font-medium ${o?"text-[var(--text-disabled)]":"text-[var(--text-secondary)]"}`,children:i})]}),un=({id:e,value:t,onChange:n,children:i,disabled:o,title:l,className:c})=>r.jsx("select",{id:e,value:t,onChange:u=>n(u.target.value),disabled:o,title:l,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1.5 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${c??""}`,children:i}),Lh=({id:e,value:t,onChange:n,disabled:i,rows:o=3,title:l,placeholder:c})=>r.jsx("textarea",{id:e,value:t,onChange:u=>n(u.target.value),disabled:i,rows:o,title:l,placeholder:c,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),d1=({id:e,value:t,onChange:n,disabled:i,isCustom:o})=>{const[l,c]=w.useState(!1),u=w.useRef(null);Fv(u,()=>c(!1));const f=o?{name:"Користувацький"}:la.find(m=>JSON.stringify(m.pattern)===JSON.stringify(t??[]))??la[0],d=m=>{n(m.length>0?m:void 0),c(!1)};return r.jsxs("div",{ref:u,className:"relative w-full",onMouseLeave:()=>c(!1),children:[r.jsxs("button",{id:e,type:"button",onClick:()=>c(m=>!m),disabled:i,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between",title:"Вибрати готовий стиль штрихування або налаштувати власний",children:[r.jsx("span",{className:"truncate",children:f.name}),r.jsx("span",{className:"transform transition-transform text-[var(--text-tertiary)]",children:l?"▲":"▼"})]}),l&&r.jsx("div",{className:"absolute z-10 top-full left-0 mt-0 w-full bg-[var(--bg-tertiary)] rounded-md shadow-lg max-h-60 overflow-y-auto border border-[var(--border-secondary)]",children:la.map(m=>r.jsxs("button",{onClick:()=>d(m.pattern),title:m.description,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-[var(--text-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[r.jsx("div",{className:"w-20 flex-shrink-0 flex items-center justify-center h-4 mr-2",children:r.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 4",preserveAspectRatio:"none",children:r.jsx("line",{x1:"0",y1:"2",x2:"100",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeDasharray:m.pattern.join(" "),strokeLinecap:"round"})})}),r.jsx("span",{className:"flex-grow truncate",children:m.name})]},m.name))})]})},Cd=({shape:e,updateShape:t,roundFn:n})=>{const i=e.stroke==="none"||e.strokeWidth===0,o=e.strokeWidth>0?e.strokeWidth:1,l=wt.useMemo(()=>!e.dash||e.dash.length===0?!1:!la.some(m=>JSON.stringify(m.pattern)===JSON.stringify(e.dash)),[e.dash]),c=m=>{t({...e,dash:m,dashoffset:m?e.dashoffset??0:void 0})},u=(m,h)=>{if(!e.dash)return;const p=[...e.dash],g=h>=0?h/o:0;p[m]=g,t({...e,dash:p})},f=()=>{const m=e.dash??[];t({...e,dash:[...m,5,3]})},d=()=>{if(!e.dash||e.dash.length<2)return;const m=e.dash.slice(0,-2);t({...e,dash:m.length>0?m:void 0})};return r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-dash-select`,title:"Стиль штрихування лінії.",children:"Штрихування:"}),r.jsx(d1,{id:`${e.id}-dash-select`,value:e.dash,onChange:c,disabled:i,isCustom:l})]}),e.dash&&e.dash.length>0&&r.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[r.jsx("div",{className:"space-y-2",children:e.dash.map((m,h)=>r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-dash-${h}`,title:h%2===0?`Довжина ${h/2+1}-го штриха в пікселях.`:`Довжина ${Math.ceil(h/2)}-го пропуску в пікселях.`,children:h%2===0?`Штрих ${h/2+1} (px):`:`Пропуск ${Math.ceil(h/2)} (px):`}),r.jsx(Ae,{id:`${e.id}-dash-${h}`,value:n(m*o),onChange:p=>u(h,p),min:0,disabled:i,title:h%2===0?"Довжина штриха в пікселях":"Довжина пропуску в пікселях"})]},h))}),r.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[r.jsx("button",{onClick:d,disabled:e.dash.length<2,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--destructive-bg)] rounded-md disabled:opacity-50",title:"Видалити останній сегмент (штрих і пропуск)",children:"-"}),r.jsx("button",{onClick:f,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--accent-primary)] rounded-md",title:"Додати сегмент (штрих і пропуск)",children:"+"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-dashoffset`,title:"Зміщення патерна штрихування вздовж лінії.",children:"Зсув штриха:"}),r.jsx(Ae,{id:`${e.id}-dashoffset`,value:n(e.dashoffset??0),onChange:m=>t({...e,dashoffset:m}),disabled:i,title:"Зміщує початок патерна штрихування вздовж лінії"})]})]})]})},vn=({shape:e,updateShape:t})=>{const n="fill"in e&&e.fill!=="none";return r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-stipple`,title:"Патерн для заповнення фігури (працює лише на X11).",children:"Патерн заливки:"}),r.jsxs(un,{id:`${e.id}-stipple`,value:e.stipple??"none",onChange:i=>t({...e,stipple:i==="none"?void 0:i}),disabled:!n,title:"Вибрати патерн для заповнення фігури.",children:[r.jsx("option",{value:"none",children:"Немає"}),r.jsx("option",{value:"gray12",children:"Gray 12%"}),r.jsx("option",{value:"gray25",children:"Gray 25%"}),r.jsx("option",{value:"gray50",children:"Gray 50%"}),r.jsx("option",{value:"gray75",children:"Gray 75%"})]})]}),r.jsx("div",{className:"text-xs text-[var(--text-tertiary)] ml-32 -mt-2 mb-2",children:"Примітка: stipple може працювати лише на X11."})]})},Ln=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i})=>{const o=e.fill==="none",l=e.type==="arc"&&e.style==="arc"||(e.type==="polyline"||e.type==="bezier")&&!e.isClosed;return r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(Tn,{id:`${e.id}-fill-toggle`,checked:!o,onChange:c=>t({...e,fill:c?"#4f46e5":"none"}),label:"Заливка:",disabled:l,title:"Увімкнути або вимкнути заливку фігури."}),r.jsx(Gt,{id:`${e.id}-fill`,value:o?"#000000":e.fill,onChange:c=>t({...e,fill:c}),onPreview:c=>n(e.id,{fill:c}),onCancel:i,disabled:o||l,title:"Колір заливки фігури."})]})})},Un=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,roundFn:o})=>{const l=e.stroke==="none",c=e.type!=="text";return r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Контур"}),r.jsxs(ie,{children:[r.jsx(Tn,{id:`${e.id}-stroke-toggle`,checked:!l,onChange:u=>t({...e,stroke:u?"#000000":"none"}),label:"Контур:",title:"Увімкнути або вимкнути контур фігури."}),r.jsx(Gt,{id:`${e.id}-stroke`,value:l?"#ffffff":e.stroke,onChange:u=>t({...e,stroke:u}),onPreview:u=>n(e.id,{stroke:u}),onCancel:i,disabled:l,title:"Колір контуру фігури."})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-stroke-width`,title:"Товщина лінії контуру в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${e.id}-stroke-width`,value:o(e.strokeWidth),onChange:u=>t({...e,strokeWidth:u}),min:0,disabled:l,title:"Товщина лінії контуру в пікселях."})]}),c&&r.jsx(Cd,{shape:e,updateShape:t,roundFn:o})]})},f1=({points:e,onPointsChange:t,shapeId:n,selectedShape:i,isEditing:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,isShapeClosed:d,roundFn:m})=>{const[h,p]=w.useState(e.length<10),g=w.useRef([]),v=w.useRef([]);w.useEffect(()=>{g.current=g.current.slice(0,e.length),v.current=v.current.slice(0,e.length)},[e.length]),w.useEffect(()=>{var C,S;l!==null&&((C=g.current[l])==null||C.scrollIntoView({behavior:"smooth",block:"nearest"}),(S=v.current[l])==null||S.focus({preventScroll:!0}))},[l]);const T=w.useMemo(()=>Tt(i),[i]),M=w.useMemo(()=>"rotation"in i?i.rotation:0,[i]),x=w.useMemo(()=>!T||M===0?e:e.map(C=>qe(C,T,M)),[e,T,M]),y=(C,S,k)=>{if(!T)return;if(M===0){const I=[...e];I[C]={...I[C],[S]:k},t(I);return}const R={...x[C],[S]:k},B=qe(R,T,-M),X=[...e];X[C]=B,t(X)};return r.jsxs("div",{className:"border-t border-[var(--border-secondary)] pt-2 mt-2",children:[r.jsxs("button",{onClick:()=>p(C=>!C),className:"w-full text-left font-semibold text-[var(--text-secondary)] py-1 flex justify-between items-center",title:"Показати/приховати список вузлових точок фігури",children:[r.jsxs("span",{children:["Вузли (",e.length,")"]}),r.jsx("span",{className:`transform transition-transform ${h?"rotate-180":"rotate-0"}`,children:"▼"})]}),h&&r.jsx("div",{className:"space-y-1 mt-2 max-h-60 overflow-y-auto pr-2",children:e.map((C,S)=>r.jsxs(wt.Fragment,{children:[r.jsxs("div",{ref:k=>{g.current[S]=k},className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 p-1 rounded-md transition-colors",children:[r.jsxs("span",{className:"text-xs text-[var(--text-tertiary)] font-mono text-right",children:[S,":"]}),r.jsx(Ae,{ref:k=>{v.current[S]=k},id:`${n}-point-${S}-x`,value:m(x[S].x),onChange:k=>y(S,"x",k),disabled:!o,onFocus:()=>c(S),title:`X-координата вузла ${S}`,className:l===S?"bg-[#4f46e5]/30":""}),r.jsx(Ae,{id:`${n}-point-${S}-y`,value:m(x[S].y),onChange:k=>y(S,"y",k),disabled:!o,onFocus:()=>c(S),title:`Y-координата вузла ${S}`,className:l===S?"bg-[#4f46e5]/30":""}),r.jsx("button",{onClick:()=>u(S),title:"Видалити вузол",className:"p-1 text-[var(--destructive-text)] hover:text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:!o||e.length<=2,children:r.jsx(uc,{size:16})})]},`${n}-point-${S}`),(d||S<e.length-1)&&o&&r.jsxs("div",{className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 h-4",children:[r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("button",{onClick:()=>f(S+1),title:"Додати вузол між цим та наступним",className:"w-5 h-5 flex justify-center items-center bg-[var(--bg-primary)] text-[var(--text-tertiary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] rounded-full transition-colors group",children:r.jsxs("svg",{className:"w-3 h-3 text-[var(--text-tertiary)] group-hover:text-[var(--accent-text)]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),r.jsx("div",{className:"col-span-3 h-px bg-[var(--border-secondary)]"})]})]},`${n}-point-fragment-${S}`))})]})},m1=({shape:e,updateShape:t,roundFn:n})=>{let i=0,o=0,l=0,c=0;e.type==="rectangle"||e.type==="arc"?(i=e.x,o=e.y,l=e.x+e.width,c=e.y+e.height):e.type==="ellipse"&&(i=e.cx-e.rx,o=e.cy-e.ry,l=e.cx+e.rx,c=e.cy+e.ry);const u=(f,d)=>{if(e.type==="rectangle"||e.type==="arc"){let{x:m,y:h,width:p,height:g}=e;switch(f){case"x1":p=m+p-d,m=d;break;case"y1":g=h+g-d,h=d;break;case"x2":p=d-m;break;case"y2":g=d-h;break}p>=0&&g>=0&&t({...e,x:m,y:h,width:p,height:g})}else if(e.type==="ellipse"){let m=e.cx-e.rx,h=e.cy-e.ry,p=e.cx+e.rx,g=e.cy+e.ry;switch(f){case"x1":m=d;break;case"y1":h=d;break;case"x2":p=d;break;case"y2":g=d;break}const v=(m+p)/2,T=(h+g)/2,M=(p-m)/2,x=(g-h)/2;M>=0&&x>=0&&t({...e,cx:v,cy:T,rx:M,ry:x})}};return r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-tk-x1`,title:"X-координата верхнього лівого кута рамки Tkinter.",children:"x1:"}),r.jsx(Ae,{id:`${e.id}-tk-x1`,value:n(i),onChange:f=>u("x1",f)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-tk-y1`,title:"Y-координата верхнього лівого кута рамки Tkinter.",children:"y1:"}),r.jsx(Ae,{id:`${e.id}-tk-y1`,value:n(o),onChange:f=>u("y1",f)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-tk-x2`,title:"X-координата нижнього правого кута рамки Tkinter.",children:"x2:"}),r.jsx(Ae,{id:`${e.id}-tk-x2`,value:n(l),onChange:f=>u("x2",f)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-tk-y2`,title:"Y-координата нижнього правого кута рамки Tkinter.",children:"y2:"}),r.jsx(Ae,{id:`${e.id}-tk-y2`,value:n(c),onChange:f=>u("y2",f)})]})]})},Uh=e=>e?["line","pencil","polyline","bezier"].includes(e.type):!1,h1=({selectedShape:e,updateShape:t,deleteShape:n,duplicateShape:i,activeTool:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,convertToPath:d,showNotification:m,setShapePreview:h,cancelShapePreview:p})=>{const[g,v]=w.useState(null),[T,M]=w.useState(!1),[x,y]=w.useState(null),[C,S]=w.useState(""),[k,N]=w.useState(""),R=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],B={"Популярні Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],"Популярні Serif":["Times New Roman","Georgia","Garamond"],"Популярні Monospace":["Courier New","Consolas","Lucida Console","Monaco"],Декоративні:["Impact","Comic Sans MS","Brush Script MT"]},X=[...Object.values(B).flat(),...R].sort((z,W)=>z.localeCompare(W)),I=z=>Math.round(z*100)/100,F=wt.useMemo(()=>e?gd(e):null,[e]),se=wt.useMemo(()=>e?Xr({...e,rotation:0}):null,[e]);w.useEffect(()=>{se&&(S(I(se.width).toString()),N(I(se.height).toString()))},[se]);const ue=(z,W)=>{if(!e||!F)return;const Se=z==="x"?F.x:F.y,b=W-Se,G=z==="x"?b:0,Y=z==="y"?b:0;let xe={...e};switch(xe.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":xe.x+=G,xe.y+=Y;break;case"ellipse":case"polygon":case"star":xe.cx+=G,xe.cy+=Y;break;case"line":case"bezier":case"pencil":case"polyline":xe.points=xe.points.map(ye=>({x:ye.x+G,y:ye.y+Y}));break}t(xe)},pe=(z,W)=>{if(!e||!se)return;const Se=z==="width"?se.width:se.height,b=Tt(e);if(!b)return;let G={...e};const Y="isAspectRatioLocked"in e&&e.isAspectRatioLocked;if(Se===0&&W>0)switch(G.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const xe=G.width,ye=G.height,Te=z==="width"||Y?W:xe,Ie=z==="height"||Y?W:ye;G.x=b.x-Te/2,G.y=b.y-Ie/2,G.width=Te,G.height=Ie;break}case"ellipse":{const xe=G.rx,ye=G.ry;G.rx=z==="width"||Y?W/2:xe,G.ry=z==="height"||Y?W/2:ye;break}case"text":{const xe=io(G);if(!xe||xe.height===0||xe.width===0)break;const ye=W/(z==="width"?xe.width:xe.height);G.fontSize*=ye;break}}else{if(Se<=0)return;let xe=1,ye=1;switch(z==="width"?(xe=W/Se,Y&&(ye=xe)):(ye=W/Se,Y&&(xe=ye)),G.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const Te=G.width*xe,Ie=G.height*ye;G.x=b.x-Te/2,G.y=b.y-Ie/2,G.width=Te,G.height=Ie;break}case"ellipse":{G.rx*=xe,G.ry*=ye;break}case"polygon":case"star":{const Te=Y||z!=="height"?xe:ye;G.radius*=Te,G.innerRadius!==void 0&&(G.innerRadius*=Te);break}case"text":{const Te=Y||z!=="height"?xe:ye;G.fontSize*=Te;break}case"line":case"pencil":case"polyline":case"bezier":{G.points=G.points.map(Te=>({x:b.x+(Te.x-b.x)*xe,y:b.y+(Te.y-b.y)*ye}));break}}}t(G)},ae=(z,W)=>{if(!e||(z==="width"?S(W):N(W),W===""))return;const Se=parseFloat(W);isNaN(Se)||Se<0||Uh(e)&&Se<1||pe(z,Se)},ee=z=>{if(!e||!se)return;const W=z==="width"?C:k,Se=parseFloat(W);let b=null;if(isNaN(Se)||Se<0||W===""?b=z==="width"?se.width:se.height:Uh(e)&&Se<1&&(m("Розмір контурів не може бути менше 1, щоб уникнути втрати форми.","info"),b=Math.max(1,z==="width"?se.width:se.height)),b!==null){const G=I(b);z==="width"?S(G.toString()):N(G.toString());const Y=z==="width"?se.width:se.height;Math.abs(Y-G)>.001&&pe(z,G)}},ge=z=>{if(e)if(e.type==="polyline"||e.type==="bezier"||e.type==="pencil"||e.type==="line")t({...e,points:z});else{if(!ei(e))return;const Se={id:e.id,name:e.name,type:"polyline",points:z,isClosed:!0,rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"?e.fill:"none",joinstyle:"joinstyle"in e&&typeof e.joinstyle=="string"?e.joinstyle:"miter",smooth:"smooth"in e&&typeof e.smooth=="boolean"?e.smooth:void 0,dash:"dash"in e?e.dash:void 0,dashoffset:"dashoffset"in e?e.dashoffset:void 0,isAspectRatioLocked:"isAspectRatioLocked"in e?e.isAspectRatioLocked:!1};t(Se)}},ve=async()=>{if(!("queryLocalFonts"in window)){m("Ваш браузер або середовище не підтримує завантаження локальних шрифтів.","error",5e3),v([]);return}try{M(!0);const z=await window.queryLocalFonts();if(z.length===0){m("Локальні шрифти не знайдено або дозвіл не було надано.","info",4e3),v([]);return}const W=new Set;for(const G of z)W.add(G.family);const Se=new Set(X),b=Array.from(W).filter(G=>!Se.has(G));v(b.sort((G,Y)=>G.localeCompare(Y))),b.length>0?m(`Завантажено ${b.length} нових системних шрифтів.`,"info"):m("Нових унікальних системних шрифтів не знайдено.","info")}catch(z){console.error("Помилка під час завантаження системних шрифтів:",z),v([]);let W="Не вдалося завантажити шрифти. Дивіться консоль для деталей.",Se=5e3;(z instanceof Error?z.toString():String(z)).includes("disallowed by Permissions Policy")||z instanceof DOMException&&z.name==="SecurityError"?(W="Доступ до шрифтів заблоковано політикою безпеки середовища.",Se=6e3):z instanceof DOMException&&z.name==="NotAllowedError"&&(W="Ви відхилили дозвіл на доступ до шрифтів."),m(W,"error",Se)}finally{M(!1)}},J=async z=>{if(!(!e||e.type!=="text")){if(z==="load-system-fonts"){await ve();return}t({...e,font:z})}},ce=wt.useMemo(()=>e?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(e.type):!1,[e]),le=()=>{if(!e||!F)return null;const z=r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-state`,title:"Стан видимості та інтерактивності об'єкта.",children:"Стан:"}),r.jsxs(un,{id:`${e.id}-state`,value:e.state,onChange:b=>t({...e,state:b}),children:[r.jsx("option",{value:"normal",children:"Звичайний"}),r.jsx("option",{value:"hidden",children:"Прихований"}),r.jsx("option",{value:"disabled",children:"Вимкнений"})]})]})}),W=b=>r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-joinstyle`,title:"Стиль з'єднання сегментів лінії.",children:"Стиль з'єднання:"}),r.jsxs(un,{id:`${b.id}-joinstyle`,value:b.joinstyle??"miter",onChange:G=>t({...b,joinstyle:G}),title:"Визначає, як виглядають кути при з'єднанні ліній.",children:[r.jsx("option",{value:"miter",children:"Гострий"}),r.jsx("option",{value:"round",children:"Круглий"}),r.jsx("option",{value:"bevel",children:"Скошений"})]})]})}),Se=b=>{const G=(b.type==="polyline"||b.type==="bezier")&&b.isClosed,Y=b.strokeWidth>0?b.strokeWidth:1,[xe,ye,Te]=b.arrowshape??[4,4,1.5],Ie=(Je,st)=>{if(Y===0)return;const Pt=[...b.arrowshape??[4,4,1.5]],He=st/Y;Pt[Je]=parseFloat(He.toFixed(2)),t({...b,arrowshape:Pt})};return r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-capstyle`,title:"Стиль кінців незамкнених ліній.",children:"Стиль кінця:"}),r.jsxs(un,{id:`${b.id}-capstyle`,value:b.capstyle??"round",onChange:Je=>t({...b,capstyle:Je}),title:"Визначає, як виглядають кінці ліній.",children:[r.jsx("option",{value:"butt",children:"Плаский"}),r.jsx("option",{value:"round",children:"Круглий"}),r.jsx("option",{value:"projecting",children:"Квадратний"})]})]}),!G&&r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-arrow`,title:"Додати стрілки на кінці лінії.",children:"Стрілки:"}),r.jsxs(un,{id:`${b.id}-arrow`,value:b.arrow??"none",onChange:Je=>{const st={...b,arrow:Je};Je!=="none"&&!b.arrowshape&&(st.arrowshape=[4,4,1.5]),t(st)},title:"Додати стрілки на початок, кінець або на обидва кінці лінії.",children:[r.jsx("option",{value:"none",children:"Немає"}),r.jsx("option",{value:"first",children:"На початку"}),r.jsx("option",{value:"last",children:"В кінці"}),r.jsx("option",{value:"both",children:"На обох кінцях"})]})]}),b.arrow&&b.arrow!=="none"&&r.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-arrow-d1`,title:"Абсолютна довжина стрілки в пікселях.",children:"Довжина:"}),r.jsx(Ae,{id:`${b.id}-arrow-d1`,value:I(xe*Y),onChange:Je=>Ie(0,Je),min:0,title:"Абсолютна довжина стрілки в пікселях"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-arrow-d2`,title:"Абсолютна ширина стрілки в пікселях.",children:"Ширина:"}),r.jsx(Ae,{id:`${b.id}-arrow-d2`,value:I(ye*Y),onChange:Je=>Ie(1,Je),min:0,title:"Абсолютна ширина стрілки в пікселях"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-arrow-d3`,title:"Абсолютна ширина основи стрілки в пікселях.",children:"Ширина основи:"}),r.jsx(Ae,{id:`${b.id}-arrow-d3`,value:I(Te*Y),onChange:Je=>Ie(2,Je),min:0,title:"Абсолютна ширина основи стрілки в пікселях"})]})]})]})]})};switch(e.type){case"rectangle":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"ellipse":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I})]})}case"polygon":case"star":{const b=e,G=d2(b);return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-sides`,title:"Кількість сторін або променів у фігури.",children:"Сторони:"}),r.jsx(Ae,{id:`${b.id}-sides`,value:b.sides,onChange:Y=>t({...b,sides:Y}),min:3})]}),b.type==="star"&&r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-inner-radius`,title:"Радіус внутрішніх вершин зірки.",children:"Внутр. радіус:"}),r.jsx(Ae,{id:`${b.id}-inner-radius`,value:I(b.innerRadius??0),onChange:Y=>t({...b,innerRadius:Y}),min:0})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-side-length`,title:"Довжина однієї сторони багатокутника.",children:"Довжина сторони:"}),r.jsx(Ae,{id:`${b.id}-side-length`,value:I(G),onChange:Y=>t({...b,radius:f2({sideLength:Y,sides:b.sides})})})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"triangle":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-top-offset`,title:"Горизонтальне зміщення верхньої вершини відносно центру основи.",children:"Зсув вершини:"}),r.jsx(Ae,{id:`${b.id}-top-offset`,value:I(b.topVertexOffset??0),onChange:G=>t({...b,topVertexOffset:G}),step:.01})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"right-triangle":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"rhombus":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"trapezoid":{const b=e,G=(xe,ye)=>{let Te=Math.max(0,ye/100);const Ie={};b.isSymmetrical?(Te>.5&&(Te=.5),Ie.topLeftOffsetRatio=Te,Ie.topRightOffsetRatio=Te):xe==="left"?(Te>1-b.topRightOffsetRatio&&(Te=1-b.topRightOffsetRatio),Ie.topLeftOffsetRatio=Te):(Te>1-b.topLeftOffsetRatio&&(Te=1-b.topLeftOffsetRatio),Ie.topRightOffsetRatio=Te),t({...b,...Ie})},Y=xe=>{const ye={...b,isSymmetrical:xe};if(xe){let Te=(ye.topLeftOffsetRatio+ye.topRightOffsetRatio)/2;Te>.5&&(Te=.5),ye.topLeftOffsetRatio=Te,ye.topRightOffsetRatio=Te}t(ye)};return r.jsxs(r.Fragment,{children:[z,r.jsx(ie,{children:r.jsx(Tn,{id:`${b.id}-symm`,checked:!!b.isSymmetrical,onChange:Y,label:"Симетрична:",title:"Зробити зміщення верхніх кутів однаковим."})}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-topleft`,title:"Зміщення верхнього лівого кута всередину у відсотках від ширини.",children:"Зсув зліва (%):"}),r.jsx(Ae,{id:`${b.id}-topleft`,value:I(b.topLeftOffsetRatio*100),onChange:xe=>G("left",xe)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-topright`,title:"Зміщення верхнього правого кута всередину у відсотках від ширини.",children:"Зсув справа (%):"}),r.jsx(Ae,{id:`${b.id}-topright`,value:I(b.topRightOffsetRatio*100),onChange:xe=>G("right",xe),disabled:!!b.isSymmetrical})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"parallelogram":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-angle`,title:"Кут нахилу бічних сторін (90 градусів = прямокутник).",children:"Кут (º):"}),r.jsx(Ae,{id:`${b.id}-angle`,value:I(b.angle),onChange:G=>t({...b,angle:G}),min:1,max:179})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b)]})}case"line":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),r.jsx(Gt,{id:`${b.id}-stroke`,value:b.stroke,onChange:G=>t({...b,stroke:G}),onPreview:G=>h(b.id,{stroke:G}),onCancel:p})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${b.id}-stroke-width`,value:I(b.strokeWidth),onChange:G=>t({...b,strokeWidth:G}),min:0})]}),r.jsx(Cd,{shape:b,updateShape:t,roundFn:I}),Se(b)]})}case"pencil":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),r.jsx(Gt,{id:`${b.id}-stroke`,value:b.stroke,onChange:G=>t({...b,stroke:G}),onPreview:G=>h(b.id,{stroke:G}),onCancel:p})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${b.id}-stroke-width`,value:I(b.strokeWidth),onChange:G=>t({...b,strokeWidth:G}),min:0})]}),r.jsx(Cd,{shape:b,updateShape:t,roundFn:I}),W(b),Se(b)]})}case"polyline":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx(ie,{children:r.jsx(Tn,{id:`${b.id}-isClosed`,checked:b.isClosed,onChange:G=>t({...b,isClosed:G,name:Ot({...b,isClosed:G})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),r.jsx(ie,{children:r.jsx(Tn,{id:`${b.id}-smooth`,checked:!!b.smooth,onChange:G=>t({...b,smooth:G}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки згладжування:"}),r.jsx(Ae,{id:`${b.id}-splinesteps`,value:b.splinesteps??12,onChange:G=>t({...b,splinesteps:G}),min:1,max:100,disabled:!b.smooth})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b),Se(b)]})}case"bezier":{const b=e;return r.jsxs(r.Fragment,{children:[z,r.jsx(ie,{children:r.jsx(Tn,{id:`${b.id}-isClosed`,checked:b.isClosed,onChange:G=>t({...b,isClosed:G,name:Ot({...b,isClosed:G})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),r.jsx(ie,{children:r.jsx(Tn,{id:`${b.id}-smooth`,checked:!!b.smooth,onChange:G=>t({...b,smooth:G}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки сплайна:"}),r.jsx(Ae,{id:`${b.id}-splinesteps`,value:b.splinesteps,onChange:G=>t({...b,splinesteps:G}),min:1,max:100,disabled:!b.smooth})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),W(b),Se(b)]})}case"arc":{const b=e,G=b.start+b.extent,Y=ye=>{if(b.isExtentLocked)t({...b,start:ye});else{const Te=G-ye;t({...b,start:ye,extent:Te})}},xe=ye=>{if(b.isExtentLocked){const Te=ye-b.extent;t({...b,start:Te})}else{const Te=ye-b.start;t({...b,extent:Te})}};return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-style`,title:"Стиль дуги: Сектор (pieslice), Хорда (chord), або Дуга (arc).",children:"Стиль:"}),r.jsxs(un,{id:`${b.id}-style`,value:b.style,onChange:ye=>{const Te=Ot({...b,style:ye});t({...b,style:ye,name:Te})},children:[r.jsx("option",{value:"pieslice",children:"Сектор"}),r.jsx("option",{value:"chord",children:"Хорда"}),r.jsx("option",{value:"arc",children:"Дуга"})]})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-start`,title:"Початковий кут дуги в градусах (0 - на 3 години).",children:"Початок (º):"}),r.jsx(Ae,{id:`${b.id}-start`,value:I(b.start),onChange:Y})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-end`,title:"Кінцевий кут дуги в градусах.",children:"Кінець (º):"}),r.jsx(Ae,{id:`${b.id}-end`,value:I(G),onChange:xe})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-extent`,title:"Довжина дуги в градусах.",children:"Довжина (º):"}),r.jsx(Ae,{id:`${b.id}-extent`,value:I(b.extent),onChange:ye=>t({...b,extent:ye}),disabled:b.isExtentLocked})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-extent-lock`,children:""}),r.jsx(Tn,{id:`${b.id}-extent-lock`,checked:!!b.isExtentLocked,onChange:ye=>t({...b,isExtentLocked:ye}),label:"Блокувати довжину",title:"Зберігати довжину дуги при зміні її кінців."})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(Ln,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p}),r.jsx(vn,{shape:b,updateShape:t}),r.jsx(Un,{shape:b,updateShape:t,setShapePreview:h,cancelShapePreview:p,roundFn:I}),b.style==="arc"&&Se(b)]})}case"text":{const b=e,G={nw:"Верхній лівий кут",n:"Верхній центр",ne:"Верхній правий кут",w:"Центр ліворуч",center:"Центр",e:"Центр праворуч",sw:"Нижній лівий кут",s:"Нижній центр",se:"Нижній правий кут"};return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-text`,title:"Текст для відображення.",children:"Текст:"}),r.jsx(Lh,{id:`${b.id}-text`,value:b.text,onChange:Y=>t({...b,text:Y})})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-font`,title:"Шрифт для тексту.",children:"Шрифт:"}),r.jsxs(un,{id:`${b.id}-font`,value:b.font,onChange:J,children:[Object.entries(B).map(([Y,xe])=>r.jsx("optgroup",{label:Y,children:xe.map(ye=>r.jsx("option",{value:ye,children:ye},ye))},Y)),g&&g.length>0&&r.jsx("optgroup",{label:"Системні шрифти",children:g.map(Y=>r.jsx("option",{value:Y,children:Y},Y))}),r.jsx("optgroup",{label:"Логічні шрифти Tk",children:R.map(Y=>r.jsx("option",{value:Y,children:Y},Y))}),r.jsx("optgroup",{label:"Дії",children:r.jsx("option",{value:"load-system-fonts",disabled:T,children:T?"Завантаження...":"Завантажити системні шрифти"})})]})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-fontSize`,title:"Розмір шрифту.",children:"Розмір:"}),r.jsx(Ae,{id:`${b.id}-fontSize`,value:I(b.fontSize),onChange:Y=>t({...b,fontSize:Y}),min:1})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-fill`,title:"Колір тексту.",children:"Колір:"}),r.jsx(Gt,{id:`${b.id}-fill`,value:b.fill,onChange:Y=>t({...b,fill:Y}),onPreview:Y=>h(b.id,{fill:Y}),onCancel:p})]}),r.jsx(vn,{shape:b,updateShape:t}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-style`,title:"Стилі тексту.",children:"Стиль:"}),r.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[r.jsx(Tn,{id:`${b.id}-bold`,checked:b.weight==="bold",onChange:Y=>t({...b,weight:Y?"bold":"normal"}),label:"Виразний"}),r.jsx(Tn,{id:`${b.id}-italic`,checked:b.slant==="italic",onChange:Y=>t({...b,slant:Y?"italic":"roman"}),label:"Курсив"}),r.jsx(Tn,{id:`${b.id}-underline`,checked:b.underline,onChange:Y=>t({...b,underline:Y}),label:"Підкреслений"}),r.jsx(Tn,{id:`${b.id}-overstrike`,checked:b.overstrike,onChange:Y=>t({...b,overstrike:Y}),label:"Закреслений"})]})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-anchor`,title:"Точка на тексті, яка буде розташована за вказаними координатами.",children:"Прив'язка:"}),r.jsx(un,{id:`${b.id}-anchor`,value:b.anchor,onChange:Y=>{t({...b,anchor:Y})},children:Object.entries(G).map(([Y,xe])=>r.jsx("option",{value:Y,children:xe},Y))})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-anchor-x`,title:"X-координата точки прив'язки.",children:"X прив'язки:"}),r.jsx(Ae,{id:`${b.id}-anchor-x`,value:I(b.x),onChange:Y=>t({...b,x:Y})})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-anchor-y`,title:"Y-координата точки прив'язки.",children:"Y прив'язки:"}),r.jsx(Ae,{id:`${b.id}-anchor-y`,value:I(b.y),onChange:Y=>t({...b,y:Y})})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-justify`,title:"Вирівнювання тексту всередині його рамки.",children:"Вирівнювання:"}),r.jsxs(un,{id:`${b.id}-justify`,value:b.justify,onChange:Y=>t({...b,justify:Y}),children:[r.jsx("option",{value:"left",children:"Ліворуч"}),r.jsx("option",{value:"center",children:"Центр"}),r.jsx("option",{value:"right",children:"Праворуч"})]})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-width`,title:"Ширина текстового блока. 0 - без переносу.",children:"Ширина блока:"}),r.jsx(Ae,{id:`${b.id}-width`,value:I(b.width),onChange:Y=>t({...b,width:Y}),min:0})]})]})}case"image":return r.jsx(r.Fragment,{children:z});case"bitmap":{const b=e,G=["error","gray75","gray50","gray25","gray12","hourglass","info","questhead","question","warning"];return r.jsxs(r.Fragment,{children:[z,r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-type`,title:"Стандартний тип бітової карти в Tkinter.",children:"Тип:"}),r.jsx(un,{id:`${b.id}-type`,value:b.bitmapType,onChange:Y=>t({...b,bitmapType:Y}),children:G.map(Y=>r.jsx("option",{value:Y,children:Y},Y))})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-fg`,title:"Колір переднього плану бітової карти.",children:"Основний колір:"}),r.jsx(Gt,{id:`${b.id}-fg`,value:b.foreground,onChange:Y=>t({...b,foreground:Y}),onPreview:Y=>h(b.id,{foreground:Y}),onCancel:p})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${b.id}-bg`,title:"Колір фону бітової карти.",children:"Тловий колір:"}),r.jsx(Gt,{id:`${b.id}-bg`,value:b.background,onChange:Y=>t({...b,background:Y}),onPreview:Y=>h(b.id,{background:Y}),onCancel:p})]})]})}default:return r.jsx(r.Fragment,{children:z})}};if(!e)return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)] p-4",children:[r.jsx("div",{className:"flex justify-between items-center pb-2 border-b border-[var(--border-primary)]",children:r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"})}),r.jsx("div",{className:"flex-grow flex items-center justify-center text-center text-[var(--text-tertiary)]",children:r.jsx("p",{className:"text-sm",children:"Виберіть об'єкт, щоб побачити його властивості."})})]});const ne=o==="edit-points",Ee=Lf(e),fe=ne&&Ee&&Ee.length>0,Me="isAspectRatioLocked"in e,Ne=e.rotation===0&&(e.type==="rectangle"||e.type==="ellipse"||e.type==="arc"),K=e?e.type==="polyline"||e.type==="bezier"?e.isClosed:e.type==="line"||e.type==="pencil"?!1:e.type==="arc"?e.style!=="arc":!0:!1;return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"}),r.jsxs("div",{className:"flex items-center gap-1",children:[ce&&r.jsx("button",{onClick:()=>d(e.id),title:"Перетворити на контур",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:r.jsx(j2,{size:18})}),r.jsx("button",{onClick:()=>i(e.id),title:"Дублювати",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:r.jsx(Uv,{size:18})}),r.jsx("button",{onClick:()=>n(e.id),title:"Видалити",className:"p-1.5 rounded hover:bg-[var(--destructive-bg)] text-[var(--destructive-text)] hover:text-[var(--accent-text)]",children:r.jsx(uc,{size:18})})]})]}),r.jsxs("div",{className:"flex-grow overflow-y-auto p-3 space-y-2",children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-name`,title:"Назва об'єкта.",children:"Назва:"}),r.jsx("input",{id:`${e.id}-name`,type:"text",value:x??e.name??Ot(e),onFocus:z=>y(z.target.value),onBlur:()=>{x!==null&&t({...e,name:x.trim()===""?Ot(e):x.trim()}),y(null)},onChange:z=>y(z.target.value),onKeyDown:z=>{z.key==="Enter"&&z.target.blur(),z.key==="Escape"&&(y(null),z.target.blur())},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-comment`,title:"Додати коментар до коду.",children:"Коментар:"}),r.jsx(Lh,{id:`${e.id}-comment`,value:e.comment??"",onChange:z=>t({...e,comment:z}),rows:2,placeholder:"Цей коментар буде додано до коду",title:"Кожен рядок буде окремим коментарем у згенерованому коді."})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Геометрія"}),r.jsxs("div",{className:"space-y-2",children:[F&&se&&r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-pos-x`,title:"X-координата верхнього лівого кута рамки виділення.",children:"X:"}),r.jsx(Ae,{id:`${e.id}-pos-x`,value:I(F.x),onChange:z=>ue("x",z)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-pos-y`,title:"Y-координата верхнього лівого кута рамки виділення.",children:"Y:"}),r.jsx(Ae,{id:`${e.id}-pos-y`,value:I(F.y),onChange:z=>ue("y",z)})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-width`,title:"Геометрична ширина об'єкта (без обертання).",children:"Ширина:"}),r.jsx("input",{id:`${e.id}-width`,type:"number",step:"1",value:C,onChange:z=>ae("width",z.target.value),onBlur:()=>ee("width"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-height`,title:"Геометрична висота об'єкта (без обертання).",children:"Висота:"}),r.jsx("input",{id:`${e.id}-height`,type:"number",step:"1",value:k,onChange:z=>ae("height",z.target.value),onBlur:()=>ee("height"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-visual-width`,title:"Візуальна ширина об'єкта з урахуванням обертання.",children:"Ширина (віз.):"}),r.jsx(Ae,{id:`${e.id}-visual-width`,value:I(F.width),onChange:()=>{},disabled:!0})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-visual-height`,title:"Візуальна висота об'єкта з урахуванням обертання.",children:"Висота (віз.):"}),r.jsx(Ae,{id:`${e.id}-visual-height`,value:I(F.height),onChange:()=>{},disabled:!0})]})]}),"rotation"in e&&r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-rotation`,title:"Кут обертання об'єкта в градусах.",children:"Обертання:"}),r.jsx(Ae,{id:`${e.id}-rotation`,value:I(e.rotation),onChange:z=>t({...e,rotation:z})})]}),Me&&r.jsxs(ie,{children:[r.jsx(re,{htmlFor:`${e.id}-aspect-lock`,children:"Пропорції:"}),r.jsx("button",{id:`${e.id}-aspect-lock`,onClick:()=>t({...e,isAspectRatioLocked:!e.isAspectRatioLocked}),className:`p-1.5 rounded-md ${e.isAspectRatioLocked?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,title:e.isAspectRatioLocked?"Розблокувати пропорції":"Заблокувати пропорції",children:e.isAspectRatioLocked?r.jsx(R2,{size:16}):r.jsx(D2,{size:16})})]})]}),Ne&&r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Рамка Tkinter (Bbox)"}),r.jsx(m1,{shape:e,updateShape:t,roundFn:I})]}),le(),fe&&r.jsx(f1,{points:Ee,onPointsChange:ge,shapeId:e.id,selectedShape:e,isEditing:ne,activePointIndex:l,setActivePointIndex:c,deletePoint:z=>u(e.id,z),addPoint:z=>f(e.id,z),isShapeClosed:K,roundFn:I})]})]})},Hs={select:r.jsx(mv,{}),"edit-points":r.jsx(hv,{}),rectangle:r.jsx(gv,{}),square:r.jsx(pv,{}),circle:r.jsx(yv,{}),ellipse:r.jsx(xv,{}),line:r.jsx(vv,{}),bezier:r.jsx(Tv,{}),pencil:r.jsx(Sv,{}),triangle:r.jsx(wv,{}),"right-triangle":r.jsx(Ev,{}),polygon:r.jsx(bv,{}),star:r.jsx(Dv,{}),polyline:r.jsx(Cv,{}),rhombus:r.jsx(Mv,{}),trapezoid:r.jsx(kv,{}),parallelogram:r.jsx(Av,{}),arc:r.jsx(Rv,{}),pieslice:r.jsx(_v,{}),chord:r.jsx(Nv,{}),text:r.jsx(jv,{}),image:r.jsx(Iv,{}),bitmap:r.jsx(Lv,{})},p1=e=>e.type==="arc"?Hs[e.style]:e.type==="rectangle"&&e.isAspectRatioLocked?Hs.square:(e.type==="polyline"||e.type==="bezier")&&e.isClosed?Hs.polygon:Hs[e.type],g1=({shapes:e,selectedShapeId:t,onSelectShape:n,onDeleteShape:i,onMoveShape:o,onUpdateShape:l,onReorderShape:c,showTkinterNames:u})=>{const[f,d]=w.useState(null),[m,h]=w.useState(""),[p,g]=w.useState(null),[v,T]=w.useState(null),[M,x]=w.useState(null),y=F=>{d(F.id),h(F.name||Ot(F))},C=()=>{if(f){const F=e.find(se=>se.id===f);F&&m.trim()!==""&&l({...F,name:m.trim()})}d(null)},S=F=>{F.key==="Enter"?C():F.key==="Escape"&&d(null)},k=(F,se)=>{F.stopPropagation();const ue=se.state==="hidden"?"normal":"hidden";l({...se,state:ue})},N=(F,se)=>{g(se),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",se)},R=(F,se)=>{if(F.preventDefault(),se===p)return;T(se);const ue=F.currentTarget.getBoundingClientRect(),pe=ue.top+ue.height/2;x(F.clientY<pe?"top":"bottom")},B=()=>{T(null),x(null)},X=(F,se)=>{F.preventDefault(),p&&p!==se&&M&&c(p,se,M),g(null),T(null),x(null)},I=()=>{g(null),T(null),x(null)};return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsx("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Об'єкти"})}),r.jsx("div",{className:"flex-grow overflow-y-auto",children:e.length>0?r.jsx("ul",{className:"p-1 space-y-1",children:[...e].reverse().map((F,se)=>{if(!F)return null;const ue=F.id===t,pe=f===F.id,ae=e.length-1-se,ee=ae<e.length-1,ge=ae>0,ve=Ot(F),J=v===F.id&&M==="top",ce=v===F.id&&M==="bottom";return r.jsxs("li",{onClick:()=>n(F.id),onDoubleClick:()=>y(F),draggable:!pe,onDragStart:pe?void 0:le=>N(le,F.id),onDragOver:pe?void 0:le=>R(le,F.id),onDragLeave:pe?void 0:B,onDrop:pe?void 0:le=>X(le,F.id),onDragEnd:pe?void 0:I,className:`group flex items-center justify-between p-2 rounded-md transition-all duration-150 cursor-pointer 
                                    ${ue?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"hover:bg-[var(--bg-hover)] text-[var(--text-secondary)]"}
                                    ${p===F.id?"opacity-30":""}
                                    ${J?"border-t-2 border-[var(--selection-stroke)]":"border-t-2 border-transparent -mb-0.5"}
                                    ${ce?"border-b-2 border-[var(--selection-stroke)]":"border-b-2 border-transparent -mt-0.5"}
                                `,children:[r.jsxs("div",{className:"flex items-center gap-3 truncate",children:[r.jsx("button",{onClick:le=>k(le,F),title:F.state==="hidden"?"Показати":"Приховати",className:"flex-shrink-0 p-1 rounded hover:bg-[var(--bg-hover)]",children:F.state==="hidden"?r.jsx($v,{}):r.jsx(Vv,{})}),r.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",style:{opacity:F.state==="hidden"?.5:1},children:p1(F)}),r.jsx("div",{className:"truncate text-sm",style:{opacity:F.state==="hidden"?.5:1},children:pe?r.jsx("input",{type:"text",value:m,onChange:le=>h(le.target.value),onBlur:C,onKeyDown:S,onClick:le=>le.stopPropagation(),autoFocus:!0,className:"bg-[var(--bg-app)]/80 text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):r.jsxs("span",{className:"truncate",title:F.name||ve,children:[F.name||ve,u&&r.jsxs("span",{className:"ml-1 text-xs text-[var(--text-tertiary)]",children:["[",dv(F),"]"]})]})})]}),r.jsxs("div",{className:`flex items-center gap-0.5 transition-opacity ${ue&&!pe?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[r.jsx("button",{onClick:le=>{le.stopPropagation(),o(F.id,"up")},disabled:!ee,title:"Перемістити вище",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(I2,{})}),r.jsx("button",{onClick:le=>{le.stopPropagation(),o(F.id,"down")},disabled:!ge,title:"Перемістити нижче",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(L2,{})}),r.jsx("button",{onClick:le=>{le.stopPropagation(),i(F.id)},title:"Видалити",className:"p-1 rounded text-[var(--destructive-text)] hover:bg-[var(--destructive-bg)] hover:text-[var(--accent-text)]",children:r.jsx(uc,{size:16})})]})]},F.id)})}):r.jsx("div",{className:"text-center text-[var(--text-tertiary)] py-8 px-4",children:r.jsx("p",{className:"text-sm",children:"Немає об'єктів."})})})]})};function y1(e){const[t,n]=w.useState([e]),[i,o]=w.useState(0),l=w.useCallback(h=>{const p=typeof h=="function"?h(t[i]):h,g=t.slice(0,i+1);g.push(p),n(g),o(g.length-1)},[i,t]),c=w.useCallback(()=>{i>0&&o(h=>h-1)},[i]),u=w.useCallback(()=>{i<t.length-1&&o(h=>h+1)},[i,t.length]),f=w.useCallback(h=>{n([h]),o(0)},[]),d=i>0,m=i<t.length-1;return{state:t[i],setState:l,undo:c,redo:u,canUndo:d,canRedo:m,reset:f}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let x1,v1;function C1(){return{geminiUrl:x1,vertexUrl:v1}}function T1(e,t,n,i){var o,l;if(!(e!=null&&e.baseUrl)){const c=C1();return t?(o=c.vertexUrl)!==null&&o!==void 0?o:n:(l=c.geminiUrl)!==null&&l!==void 0?l:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Io{}function de(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const l=t[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(e,t,n){for(let l=0;l<t.length-1;l++){const c=t[l];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];a(m,t.slice(l+1),n[d])}else for(const d of f)a(d,t.slice(l+1),n)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];a(f[0],t.slice(l+1),n);return}(!e[c]||typeof e[c]!="object")&&(e[c]={}),e=e[c]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function s(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const l=e[o];return Array.isArray(l)?l.map(c=>s(c,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["operationName"],n);const i=s(e,["resourceName"]);return i!=null&&a(t,["_url","resourceName"],i),t}function S1(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],E1(c)),t}function w1(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response"]);return c!=null&&a(t,["response"],M1(c)),t}function E1(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>k1(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function M1(e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>A1(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function k1(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],R1(n)),t}function A1(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],D1(n)),t}function _1(e){const t={},n=s(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function N1(e){const t={},n=s(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function R1(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Uf(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function D1(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Uf(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ph;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ph||(Ph={}));var Vh;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Vh||(Vh={}));var qi;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(qi||(qi={}));var $h;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})($h||($h={}));var Fh;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Fh||(Fh={}));var Hh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Hh||(Hh={}));var Bh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Bh||(Bh={}));var zh;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(zh||(zh={}));var Gh;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Gh||(Gh={}));var qh;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(qh||(qh={}));var Oh;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Oh||(Oh={}));var Yh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Yh||(Yh={}));var Jh;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Jh||(Jh={}));var Wh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(Wh||(Wh={}));var Xh;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xh||(Xh={}));var $a;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})($a||($a={}));var Kh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Kh||(Kh={}));var Td;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Td||(Td={}));var Zh;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Zh||(Zh={}));var Qh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qh||(Qh={}));var ep;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(ep||(ep={}));var tp;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(tp||(tp={}));var np;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(np||(np={}));var ip;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ip||(ip={}));var op;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(op||(op={}));var lp;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(lp||(lp={}));var rp;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(rp||(rp={}));var sp;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(sp||(sp={}));var ap;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ap||(ap={}));var cp;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cp||(cp={}));var up;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(up||(up={}));var dp;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dp||(dp={}));var fp;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(fp||(fp={}));var mp;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(mp||(mp={}));var hp;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(hp||(hp={}));var pp;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(pp||(pp={}));var gp;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(gp||(gp={}));var yp;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(yp||(yp={}));var xp;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xp||(xp={}));var vp;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(vp||(vp={}));var Cp;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Cp||(Cp={}));var Tp;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tp||(Tp={}));var bp;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(bp||(bp={}));var Sp;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sp||(Sp={}));var wp;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(wp||(wp={}));var Ep;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ep||(Ep={}));var Mp;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Mp||(Mp={}));var ul;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(ul||(ul={}));class bd{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class fr{get text(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const h=[];for(const p of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,v]of Object.entries(p))g!=="text"&&g!=="thought"&&(v!==null||v!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;m=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const h of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&m.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class kp{}class Ap{}class j1{}class I1{}class L1{}class U1{}class _p{}class Np{}class Rp{}class P1{}class Fa{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new Fa;let o;const l=t;return n?o=w1(l):o=S1(l),Object.assign(i,o),i}}class Dp{}class jp{}class Ip{}class V1{}class $1{}class F1{}class Lp{}class H1{get text(){var t,n,i;let o="",l=!1;const c=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&c.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,o+=u.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var t,n,i;let o="";const l=[];for(const c of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(c))u!=="inlineData"&&f!==null&&l.push(u);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class B1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Be(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Hv(e,t){const n=Be(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Bv(e){return Array.isArray(e)?e.map(t=>Ha(t)):[Ha(e)]}function Ha(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function zv(e){const t=Ha(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Gv(e){const t=Ha(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Up(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function qv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Up(t)):[Up(e)]}function Sd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Pp(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Vp(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Bt(e){if(e==null)throw new Error("ContentUnion is required");return Sd(e)?e:{role:"user",parts:qv(e)}}function Pf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Bt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Bt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Bt(n)):[Bt(t)]}function _n(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Pp(e)||Vp(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bt(e)]}const t=[],n=[],i=Sd(e[0]);for(const o of e){const l=Sd(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(o);else{if(Pp(o)||Vp(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:qv(n)}),t}function z1(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(qi).includes(n[0].toUpperCase())?n[0].toUpperCase():qi.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(qi).includes(i.toUpperCase())?i.toUpperCase():qi.TYPE_UNSPECIFIED})}}function Cl(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=e.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(t.nullable=!0,e=l[1]):l[1].type==="null"&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&z1(e.type,t);for(const[c,u]of Object.entries(e))if(u!=null)if(c=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(qi).includes(u.toUpperCase())?u.toUpperCase():qi.TYPE_UNSPECIFIED}else if(n.includes(c))t[c]=Cl(u);else if(i.includes(c)){const f=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}f.push(Cl(d))}t[c]=f}else if(o.includes(c)){const f={};for(const[d,m]of Object.entries(u))f[d]=Cl(m);t[c]=f}else{if(c==="additionalProperties")continue;t[c]=u}return t}function Vf(e){return Cl(e)}function $f(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Ff(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Bl(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Cl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Cl(t.response));return e}function zl(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function G1(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Si(e,t){if(typeof t!="string")throw new Error("name must be a string");return G1(e,t,"cachedContents")}function Ov(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Lo(e){return Uf(e)}function q1(e){return e!=null&&typeof e=="object"&&"name"in e}function O1(e){return e!=null&&typeof e=="object"&&"video"in e}function Y1(e){return e!=null&&typeof e=="object"&&"uri"in e}function Yv(e){var t;let n;if(q1(e)&&(n=e.name),!(Y1(e)&&(n=e.uri,n===void 0))&&!(O1(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Jv(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Wv(e){for(const t of["models","tunedModels","publisherModels"])if(J1(e,t))return e[t];return[]}function J1(e,t){return e!==null&&typeof e=="object"&&t in e}function W1(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function X1(e,t={}){const n=[],i=new Set;for(const o of e){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const c=W1(o,t);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Xv(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function K1(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Kv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Gl(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Zv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z1(e){const t={},n=s(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const i=s(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>VS(c))),a(t,["inlinedResponses"],l)}const o=s(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>US(c))),a(t,["inlinedEmbedContentResponses"],l)}return t}function Q1(e){const t={},n=s(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsDestination","outputUriPrefix"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigqueryDestination","outputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function eS(e){const t={},n=s(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsDestination","outputUriPrefix"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigqueryDestination","outputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ko(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata","displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["metadata","state"]);o!=null&&a(t,["state"],Zv(o));const l=s(e,["metadata","createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["metadata","endTime"]);c!=null&&a(t,["endTime"],c);const u=s(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const f=s(e,["metadata","model"]);f!=null&&a(t,["model"],f);const d=s(e,["metadata","output"]);return d!=null&&a(t,["dest"],Z1(Kv(d))),t}function wd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],Zv(o));const l=s(e,["error"]);l!=null&&a(t,["error"],e0(l));const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["startTime"]);u!=null&&a(t,["startTime"],u);const f=s(e,["endTime"]);f!=null&&a(t,["endTime"],f);const d=s(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const m=s(e,["model"]);m!=null&&a(t,["model"],m);const h=s(e,["inputConfig"]);h!=null&&a(t,["src"],tS(h));const p=s(e,["outputConfig"]);return p!=null&&a(t,["dest"],Q1(Kv(p))),t}function tS(e){const t={},n=s(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsSource","uris"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigquerySource","inputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function nS(e,t){const n={};if(s(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(t,["fileName"]);i!=null&&a(n,["fileName"],i);const o=s(t,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>PS(e,c))),a(n,["requests","requests"],l)}return n}function iS(e){const t={},n=s(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsSource","uris"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigquerySource","inputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function oS(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function lS(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function rS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function sS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function aS(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],dS(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],cS(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],sw(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function cS(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function uS(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function dS(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>JS(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Qv(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>WS(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function fS(e,t){const n={},i=s(e,["displayName"]);if(t!==void 0&&i!=null&&a(t,["batch","displayName"],i),s(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function mS(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["dest"]);return t!==void 0&&o!=null&&a(t,["outputConfig"],eS(K1(o))),n}function gu(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],nS(e,Xv(e,o)));const l=s(t,["config"]);return l!=null&&fS(l,n),n}function hS(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["inputConfig"],iS(Xv(e,o)));const l=s(t,["config"]);return l!=null&&mS(l,n),n}function pS(e,t){const n={},i=s(e,["displayName"]);return t!==void 0&&i!=null&&a(t,["batch","displayName"],i),n}function yu(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],SS(e,o));const l=s(t,["config"]);return l!=null&&pS(l,n),n}function gS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function yS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function xS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);return l!=null&&a(t,["error"],Hf(l)),t}function vS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);return l!=null&&a(t,["error"],e0(l)),t}function CS(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function TS(e,t){const n={},i=s(t,["contents"]);i!=null&&a(n,["requests[]","request","content"],Pf(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],bS(o,n)),n}function bS(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=s(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function SS(e,t){const n={},i=s(t,["fileName"]);i!=null&&a(n,["file_name"],i);const o=s(t,["inlinedRequests"]);return o!=null&&a(n,["requests"],TS(e,o)),n}function wS(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function ES(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function MS(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function kS(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function AS(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function _S(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function NS(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Qv(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=s(t,["logprobs"]);p!=null&&a(i,["logprobs"],p);const g=s(t,["presencePenalty"]);g!=null&&a(i,["presencePenalty"],g);const v=s(t,["frequencyPenalty"]);v!=null&&a(i,["frequencyPenalty"],v);const T=s(t,["seed"]);T!=null&&a(i,["seed"],T);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],QS(Vf(x)));const y=s(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=s(t,["safetySettings"]);if(n!==void 0&&C!=null){let F=C;Array.isArray(F)&&(F=F.map(se=>ZS(se))),a(n,["safetySettings"],F)}const S=s(t,["tools"]);if(n!==void 0&&S!=null){let F=zl(S);Array.isArray(F)&&(F=F.map(se=>rw(Bl(se)))),a(n,["tools"],F)}const k=s(t,["toolConfig"]);if(n!==void 0&&k!=null&&a(n,["toolConfig"],lw(k)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=s(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Si(e,N));const R=s(t,["responseModalities"]);R!=null&&a(i,["responseModalities"],R);const B=s(t,["mediaResolution"]);B!=null&&a(i,["mediaResolution"],B);const X=s(t,["speechConfig"]);if(X!=null&&a(i,["speechConfig"],nw($f(X))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=s(t,["thinkingConfig"]);return I!=null&&a(i,["thinkingConfig"],iw(I)),i}function RS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>aS(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=s(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function DS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function jS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Gl(e,i)),n}function IS(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],CS(n)),t}function LS(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],$S(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function US(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],ew(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],Hf(i)),t}function PS(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["request","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>Qv(u))),a(n,["request","contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["request","generationConfig"],NS(e,l,n)),n}function VS(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],RS(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],Hf(i)),t}function $S(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function Hf(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function e0(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function FS(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function HS(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);if(t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),s(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BS(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function zS(e){const t={},n=s(e,["config"]);return n!=null&&HS(n,t),t}function GS(e){const t={},n=s(e,["config"]);return n!=null&&BS(n,t),t}function qS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ko(c))),a(t,["batchJobs"],l)}return t}function OS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>wd(c))),a(t,["batchJobs"],l)}return t}function YS(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tw(o))),a(t,["speakerVoiceConfigs"],i)}return t}function JS(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],uw(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],oS(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],wS(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],MS(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function WS(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],dw(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],lS(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],ES(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],kS(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function XS(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function KS(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],FS(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function ZS(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function QS(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const p=s(e,["maximum"]);p!=null&&a(t,["maximum"],p);const g=s(e,["minItems"]);g!=null&&a(t,["minItems"],g);const v=s(e,["minLength"]);v!=null&&a(t,["minLength"],v);const T=s(e,["minProperties"]);T!=null&&a(t,["minProperties"],T);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=s(e,["properties"]);C!=null&&a(t,["properties"],C);const S=s(e,["propertyOrdering"]);S!=null&&a(t,["propertyOrdering"],S);const k=s(e,["required"]);k!=null&&a(t,["required"],k);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function ew(e){const t={},n=s(e,["embedding"]);n!=null&&a(t,["embedding"],uS(n));const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function tw(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],t0(i)),t}function nw(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],t0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],YS(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function iw(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function ow(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function lw(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],AS(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],KS(i)),t}function rw(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>_S(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],LS(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],IS(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],aw());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],ow(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function sw(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cw(o))),a(t,["urlMetadata"],i)}return t}function aw(){return{}}function cw(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function uw(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function dw(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function t0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],XS(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _o;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_o||(_o={}));class ms{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,l;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fw extends Io{constructor(t){super(),this.apiClient=t,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const l=n.src;if(!(Array.isArray(n.src)||l.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),f=u.path,d=u.body,m=gu(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()).then(p=>Ko(p))},this.createEmbeddings=async n=>{var i,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),f=u.path,d=u.body,m=yu(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()).then(p=>Ko(p))},this.list=async(n={})=>new ms(_o.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=gu(this.apiClient,t),i=n._url,o=de("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const m of f){const h=Object.assign({},m);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=p,h.request=g}d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}createInlinedEmbedContentRequest(t){const n=yu(this.apiClient,t),i=n._url,o=de("{model}:asyncBatchEmbedContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];delete u.config;for(const m of f){const h=Object.assign({},m),p=h.request;for(const g in h)g!=="request"&&(p[g]=h[g],delete h[g]);d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(t),c=this.getBigqueryUri(t);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=hS(this.apiClient,t);return u=de("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>wd(m))}else{const d=gu(this.apiClient,t);return u=de("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Ko(m))}}async createEmbeddingsInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yu(this.apiClient,t);return l=de("{model}:asyncBatchEmbedContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Ko(f))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=jS(this.apiClient,t);return u=de("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>wd(m))}else{const d=DS(this.apiClient,t);return u=de("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Ko(m))}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=sS(this.apiClient,t);c=de("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=rS(this.apiClient,t);c=de("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=GS(t);return u=de("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=OS(m),p=new Lp;return Object.assign(p,h),p})}else{const d=zS(t);return u=de("batches",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=qS(m),p=new Lp;return Object.assign(p,h),p})}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=yS(this.apiClient,t);return u=de("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>vS(m))}else{const d=gS(this.apiClient,t);return u=de("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>xS(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mw(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function hw(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],mw(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function pw(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function gw(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ra(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function sa(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function $p(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Qw(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Fp(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>eE(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function yw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let m=_n(c);Array.isArray(m)&&(m=m.map(h=>$p(h))),a(t,["contents"],m)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],$p(Bt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>sE(h))),a(t,["tools"],m)}const d=s(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],lE(d)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function xw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let h=_n(c);Array.isArray(h)&&(h=h.map(p=>Fp(p))),a(t,["contents"],h)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],Fp(Bt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>aE(p))),a(t,["tools"],h)}const d=s(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],rE(d));const m=s(e,["kmsKeyName"]);return t!==void 0&&m!=null&&a(t,["encryption_spec","kmsKeyName"],m),n}function vw(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Hv(e,i));const o=s(t,["config"]);return o!=null&&yw(o,n),n}function Cw(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Hv(e,i));const o=s(t,["config"]);return o!=null&&xw(o,n),n}function Tw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Si(e,i)),n}function bw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Si(e,i)),n}function Sw(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function ww(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Ew(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function Mw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function kw(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function Aw(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function _w(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Nw(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Rw(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Dw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function jw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function Iw(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function Lw(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function Uw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Si(e,i)),n}function Pw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Si(e,i)),n}function Vw(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],hw(n)),t}function $w(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Ew(n)),t}function Fw(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Mw(n)),t}function Hw(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],zw(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Bw(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],Gw(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function zw(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function Gw(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function qw(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function Ow(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function Yw(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function Jw(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function Ww(e){const t={},n=s(e,["config"]);return n!=null&&Yw(n,t),t}function Xw(e){const t={},n=s(e,["config"]);return n!=null&&Jw(n,t),t}function Kw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ra(c))),a(t,["cachedContents"],l)}return t}function Zw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>sa(c))),a(t,["cachedContents"],l)}return t}function Qw(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],pE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],pw(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Aw(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],Nw(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function eE(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],gE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],gw(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],_w(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],Rw(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function tE(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],qw(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function nE(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],Ow(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function iE(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function oE(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function lE(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Dw(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],tE(i)),t}function rE(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],jw(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],nE(i)),t}function sE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Iw(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],Hw(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],$w(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],mE());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],iE(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function aE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Lw(p))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Bw(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],Fw(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],kw(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],Vw(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],hE());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],oE(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function cE(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function uE(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function dE(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],Si(e,i));const o=s(t,["config"]);return o!=null&&cE(o,n),n}function fE(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],Si(e,i));const o=s(t,["config"]);return o!=null&&uE(o,n),n}function mE(){return{}}function hE(){return{}}function pE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function gE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yE extends Io{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ms(_o.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,t);return u=de("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>sa(m))}else{const d=vw(this.apiClient,t);return u=de("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ra(m))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Pw(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>sa(m))}else{const d=Uw(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ra(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=bw(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=ww(m),p=new jp;return Object.assign(p,h),p})}else{const d=Tw(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Sw(m),p=new jp;return Object.assign(p,h),p})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=fE(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>sa(m))}else{const d=dE(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ra(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Xw(t);return u=de("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Zw(m),p=new Ip;return Object.assign(p,h),p})}else{const d=Ww(t);return u=de("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Kw(m),p=new Ip;return Object.assign(p,h),p})}}}function Hp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(e){return this instanceof lt?(this.v=e,this):new lt(e)}function Tl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(g){return function(v){return Promise.resolve(v).then(g,h)}}function u(g,v){i[g]&&(o[g]=function(T){return new Promise(function(M,x){l.push([g,T,M,x])>1||f(g,T)})},v&&(o[g]=v(o[g])))}function f(g,v){try{d(i[g](v))}catch(T){p(l[0][3],T)}}function d(g){g.value instanceof lt?Promise.resolve(g.value.v).then(m,h):p(l[0][2],g)}function m(g){f("next",g)}function h(g){f("throw",g)}function p(g,v){g(v),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Ir(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hp=="function"?Hp(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(c){return new Promise(function(u,f){c=e[l](c),o(u,f,c.done,c.value)})}}function o(l,c,u,f){Promise.resolve(f).then(function(d){l({value:d,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xE(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:n0(n)}function n0(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function vE(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Bp(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let l=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),l&&!n0(e[i])&&(l=!1),i++;l?t.push(...o):t.pop()}return t}class CE{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new TE(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class TE{constructor(t,n,i,o={},l=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),vE(l)}async sendMessage(t){var n;await this.sendPromise;const i=Bt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,u;const f=await o,d=(c=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,m=f.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];m!=null&&(p=(u=m.slice(h))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(i,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Bt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(t=!1){const n=t?Bp(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,o;return Tl(this,arguments,function*(){var c,u,f,d;const m=[];try{for(var h=!0,p=Ir(t),g;g=yield lt(p.next()),c=g.done,!c;h=!0){d=g.value,h=!1;const v=d;if(xE(v)){const T=(o=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;T!==void 0&&m.push(T)}yield yield lt(v)}}catch(v){u={error:v}}finally{try{!h&&!c&&(f=p.return)&&(yield lt(f.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Bp(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,dc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bE(e){const t={},n=s(e,["file"]);return n!=null&&a(t,["file"],AE(n)),t}function SE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function wE(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","file"],Yv(n)),t}function EE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Ed(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const p=s(e,["state"]);p!=null&&a(t,["state"],p);const g=s(e,["source"]);g!=null&&a(t,["source"],g);const v=s(e,["videoMetadata"]);v!=null&&a(t,["videoMetadata"],v);const T=s(e,["error"]);return T!=null&&a(t,["error"],ME(T)),t}function ME(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function kE(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function AE(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const p=s(e,["state"]);p!=null&&a(t,["state"],p);const g=s(e,["source"]);g!=null&&a(t,["source"],g);const v=s(e,["videoMetadata"]);v!=null&&a(t,["videoMetadata"],v);const T=s(e,["error"]);return T!=null&&a(t,["error"],kE(T)),t}function _E(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","file"],Yv(n)),t}function NE(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function RE(e){const t={},n=s(e,["config"]);return n!=null&&NE(n,t),t}function DE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ed(c))),a(t,["files"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jE extends Io{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ms(_o.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>Ed(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RE(t);return l=de("files",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=DE(f),m=new V1;return Object.assign(m,d),m})}}async createInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bE(t);return l=de("upload/v1beta/files",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=SE(f),m=new $1;return Object.assign(m,d),m})}}async get(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_E(t);return l=de("files/{file}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Ed(f))}}async delete(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wE(t);return l=de("files/{file}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=EE(f),m=new F1;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IE(){return{}}function LE(){return{}}function UE(){return{}}function PE(){return{}}function VE(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function $E(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);i!=null&&a(t,["mimeType"],i);const o=s(e,["sourceMetadata"]);return o!=null&&a(t,["sourceMetadata"],_M(o)),t}function zp(){return{}}function Gp(){return{}}function FE(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],VE(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function HE(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function BE(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function zE(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function GE(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function qE(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function OE(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function YE(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>YM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function JE(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>JM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function WE(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>WM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function XE(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>XM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function KE(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],lk(i)),t}function ZE(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],rk(i)),t}function QE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function eM(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function tM(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function nM(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function iM(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function oM(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function lM(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function i0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function o0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function rM(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function sM(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function aM(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function cM(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function uM(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],FE(n)),t}function dM(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],QE(n)),t}function fM(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],eM(n)),t}function mM(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],pM(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function hM(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],gM(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function pM(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function gM(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function yM(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],ak(Ff(h)));const p=s(e,["enableAffectiveDialog"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],p);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],WE(Bt(g)));const v=s(e,["tools"]);if(t!==void 0&&v!=null){let k=zl(v);Array.isArray(k)&&(k=k.map(N=>fk(Bl(N)))),a(t,["setup","tools"],k)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],ik(T));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],zp());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],zp());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],tk(y));const C=s(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],KE(C));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&a(t,["setup","proactivity"],QM(S)),n}function xM(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],ck(Ff(h)));const p=s(e,["enableAffectiveDialog"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],p);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],XE(Bt(g)));const v=s(e,["tools"]);if(t!==void 0&&v!=null){let k=zl(v);Array.isArray(k)&&(k=k.map(N=>mk(Bl(N)))),a(t,["setup","tools"],k)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],ok(T));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],Gp());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Gp());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],nk(y));const C=s(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],ZE(C));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&a(t,["setup","proactivity"],ek(S)),n}function vM(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],yM(o,n)),n}function CM(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],xM(o,n)),n}function TM(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ek(o))),a(t,["weightedPrompts"],i)}return t}function l0(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>c0(o))),a(t,["weightedPrompts"],i)}return t}function Md(e){const t={},n=s(e,["setup"]);n!=null&&a(t,["setup"],r0(n));const i=s(e,["clientContent"]);i!=null&&a(t,["clientContent"],l0(i));const o=s(e,["musicGenerationConfig"]);o!=null&&a(t,["musicGenerationConfig"],s0(o));const l=s(e,["playbackControl"]);return l!=null&&a(t,["playbackControl"],l),t}function r0(e){const t={},n=s(e,["model"]);return n!=null&&a(t,["model"],n),t}function bM(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["filteredReason"]);return i!=null&&a(t,["filteredReason"],i),t}function SM(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const p=s(e,["onlyBassAndDrums"]);p!=null&&a(t,["onlyBassAndDrums"],p);const g=s(e,["musicGenerationMode"]);return g!=null&&a(t,["musicGenerationMode"],g),t}function s0(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const p=s(e,["onlyBassAndDrums"]);p!=null&&a(t,["onlyBassAndDrums"],p);const g=s(e,["musicGenerationMode"]);return g!=null&&a(t,["musicGenerationMode"],g),t}function wM(e){const t={},n=s(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>$E(o))),a(t,["audioChunks"],i)}return t}function EM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],MM());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],wM(i));const o=s(e,["filteredPrompt"]);return o!=null&&a(t,["filteredPrompt"],bM(o)),t}function MM(){return{}}function kM(e){const t={},n=s(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],s0(n)),t}function AM(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>c0(o))),a(t,["weightedPrompts"],i)}return t}function _M(e){const t={},n=s(e,["clientContent"]);n!=null&&a(t,["clientContent"],TM(n));const i=s(e,["musicGenerationConfig"]);return i!=null&&a(t,["musicGenerationConfig"],SM(i)),t}function NM(e){const t={},n=s(e,["media"]);if(n!=null){let d=Bv(n);Array.isArray(d)&&(d=d.map(m=>m)),a(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&a(t,["audio"],Gv(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=s(e,["video"]);l!=null&&a(t,["video"],zv(l));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],UE()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],IE()),t}function RM(e){const t={},n=s(e,["media"]);if(n!=null){let d=Bv(n);Array.isArray(d)&&(d=d.map(m=>m)),a(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&a(t,["audio"],Gv(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=s(e,["video"]);l!=null&&a(t,["video"],zv(l));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],PE()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],LE()),t}function DM(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],YE(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],qp(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],qp(f));const d=s(e,["urlContextMetadata"]);d!=null&&a(t,["urlContextMetadata"],hk(d));const m=s(e,["turnCompleteReason"]);m!=null&&a(t,["turnCompleteReason"],m);const h=s(e,["waitingForInput"]);return h!=null&&a(t,["waitingForInput"],h),t}function jM(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],JE(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],Op(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],Op(f));const d=s(e,["turnCompleteReason"]);d!=null&&a(t,["turnCompleteReason"],d);const m=s(e,["waitingForInput"]);return m!=null&&a(t,["waitingForInput"],m),t}function IM(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function LM(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function UM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],FM());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],DM(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],GM(o));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],BM(l));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],xk(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],IM(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],VM(f)),t}function PM(e){const t={},n=s(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],HM(n));const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],jM(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],qM(o));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],zM(l));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],vk(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],LM(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],$M(f)),t}function VM(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function $M(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function FM(){return{}}function HM(e){const t={},n=s(e,["sessionId"]);return n!=null&&a(t,["sessionId"],n),t}function BM(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function zM(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function GM(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>i0(o))),a(t,["functionCalls"],i)}return t}function qM(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o0(o))),a(t,["functionCalls"],i)}return t}function Bs(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function zs(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function OM(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sk(o))),a(t,["speakerVoiceConfigs"],i)}return t}function YM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ck(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],zE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],nM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],i0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function JM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Tk(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],GE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],iM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],o0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function WM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],bk(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],qE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],oM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],rM(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function XM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Sk(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],OE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],lM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],sM(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function KM(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function ZM(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function QM(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function ek(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function tk(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],HE(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function nk(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],BE(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function ik(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ok(e){const t={},n=s(e,["handle"]);n!=null&&a(t,["handle"],n);const i=s(e,["transparent"]);return i!=null&&a(t,["transparent"],i),t}function lk(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function rk(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function sk(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],a0(i)),t}function ak(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],a0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],OM(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function ck(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],wk(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function uk(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function dk(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function fk(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>aM(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],mM(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],dM(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],pk());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],uk(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function mk(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>cM(p))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],hM(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],fM(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],tM(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],uM(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],gk());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],dk(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function qp(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function Op(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function hk(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yk(o))),a(t,["urlMetadata"],i)}return t}function pk(){return{}}function gk(){return{}}function yk(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function xk(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["responseTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>Bs(g))),a(t,["promptTokensDetails"],p)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>Bs(g))),a(t,["cacheTokensDetails"],p)}const m=s(e,["responseTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>Bs(g))),a(t,["responseTokensDetails"],p)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>Bs(g))),a(t,["toolUsePromptTokensDetails"],p)}return t}function vk(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>zs(v))),a(t,["promptTokensDetails"],g)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>zs(v))),a(t,["cacheTokensDetails"],g)}const m=s(e,["candidatesTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>zs(v))),a(t,["responseTokensDetails"],g)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>zs(v))),a(t,["toolUsePromptTokensDetails"],g)}const p=s(e,["trafficType"]);return p!=null&&a(t,["trafficType"],p),t}function Ck(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Tk(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function bk(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Sk(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function a0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],KM(n)),t}function wk(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],ZM(n)),t}function Ek(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function c0(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function kk(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Mk(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function Ak(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function _k(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Nk(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Rk(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Dk(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],Bk(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],Lk(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],aN(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function jk(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],zk(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],Uk(i));const o=s(e,["finishMessage"]);o!=null&&a(t,["finishMessage"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],cN(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Ik(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);return o!=null&&a(t,["step"],o),t}function Lk(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function Uk(e){const t={},n=s(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function Pk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let l=_n(o);Array.isArray(l)&&(l=l.map(c=>ql(c))),a(n,["contents"],l)}return n}function Vk(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["tokensInfo"]);return i!=null&&a(t,["tokensInfo"],i),t}function $k(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function Fk(e){const t={},n=s(e,["values"]);n!=null&&a(t,["values"],n);const i=s(e,["statistics"]);return i!=null&&a(t,["statistics"],Hk(i)),t}function Hk(e){const t={},n=s(e,["truncated"]);n!=null&&a(t,["truncated"],n);const i=s(e,["token_count"]);return i!=null&&a(t,["tokenCount"],i),t}function Bk(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>x_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function zk(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>v_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function fc(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>C_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function ql(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>T_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Gk(e){const t={},n=s(e,["controlType"]);n!=null&&a(t,["controlType"],n);const i=s(e,["enableControlImageComputation"]);return i!=null&&a(t,["computeControl"],i),t}function qk(e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ok(e,t){const n={},i=s(e,["systemInstruction"]);t!==void 0&&i!=null&&a(t,["systemInstruction"],ql(Bt(i)));const o=s(e,["tools"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>h0(u))),a(t,["tools"],c)}const l=s(e,["generationConfig"]);return t!==void 0&&l!=null&&a(t,["generationConfig"],l),n}function Yk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>fc(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&qk(l),n}function Jk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>ql(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&Ok(l,n),n}function Wk(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);i!=null&&a(t,["totalTokens"],i);const o=s(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function Xk(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);return i!=null&&a(t,["totalTokens"],i),t}function Kk(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Be(e,i)),n}function Zk(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Be(e,i)),n}function Qk(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function eA(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function tA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function nA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function iA(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const p=s(e,["includeRaiReason"]);t!==void 0&&p!=null&&a(t,["parameters","includeRaiReason"],p);const g=s(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const v=s(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=s(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const M=s(e,["addWatermark"]);t!==void 0&&M!=null&&a(t,["parameters","addWatermark"],M);const x=s(e,["editMode"]);t!==void 0&&x!=null&&a(t,["parameters","editMode"],x);const y=s(e,["baseSteps"]);return t!==void 0&&y!=null&&a(t,["parameters","editConfig","baseSteps"],y),n}function oA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>__(f))),a(n,["instances[0]","referenceImages"],u)}const c=s(t,["config"]);return c!=null&&iA(c,n),n}function lA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>mc(l))),a(t,["generatedImages"],o)}return t}function rA(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=s(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sA(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["instances[]","task_type"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);const l=s(e,["outputDimensionality"]);t!==void 0&&l!=null&&a(t,["parameters","outputDimensionality"],l);const c=s(e,["mimeType"]);t!==void 0&&c!=null&&a(t,["instances[]","mimeType"],c);const u=s(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function aA(){return{}}function cA(e){const t={},n=s(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function uA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);o!=null&&a(n,["requests[]","content"],Pf(e,o));const l=s(t,["config"]);l!=null&&rA(l,n);const c=s(t,["model"]);return c!==void 0&&a(n,["requests[]","model"],Be(e,c)),n}function dA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);o!=null&&a(n,["instances[]","content"],Pf(e,o));const l=s(t,["config"]);return l!=null&&sA(l,n),n}function fA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>$k(c))),a(t,["embeddings"],l)}return s(e,["metadata"])!=null&&a(t,["metadata"],aA()),t}function mA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Fk(c))),a(t,["embeddings"],l)}const o=s(e,["metadata"]);return o!=null&&a(t,["metadata"],cA(o)),t}function hA(e){const t={},n=s(e,["endpoint"]);n!=null&&a(t,["name"],n);const i=s(e,["deployedModelId"]);return i!=null&&a(t,["deployedModelId"],i),t}function pA(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function gA(e){const t={},n=s(e,["label"]);n!=null&&a(t,["label"],n);const i=s(e,["score"]);return i!=null&&a(t,["score"],i),t}function yA(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function xA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function vA(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function CA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function TA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function bA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function SA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function wA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function EA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function MA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function kA(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function AA(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function _A(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],fc(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=s(t,["logprobs"]);p!=null&&a(i,["logprobs"],p);const g=s(t,["presencePenalty"]);g!=null&&a(i,["presencePenalty"],g);const v=s(t,["frequencyPenalty"]);v!=null&&a(i,["frequencyPenalty"],v);const T=s(t,["seed"]);T!=null&&a(i,["seed"],T);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],I_(Vf(x)));const y=s(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=s(t,["safetySettings"]);if(n!==void 0&&C!=null){let F=C;Array.isArray(F)&&(F=F.map(se=>D_(se))),a(n,["safetySettings"],F)}const S=s(t,["tools"]);if(n!==void 0&&S!=null){let F=zl(S);Array.isArray(F)&&(F=F.map(se=>Z_(Bl(se)))),a(n,["tools"],F)}const k=s(t,["toolConfig"]);if(n!==void 0&&k!=null&&a(n,["toolConfig"],X_(k)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=s(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Si(e,N));const R=s(t,["responseModalities"]);R!=null&&a(i,["responseModalities"],R);const B=s(t,["mediaResolution"]);B!=null&&a(i,["mediaResolution"],B);const X=s(t,["speechConfig"]);if(X!=null&&a(i,["speechConfig"],B_($f(X))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=s(t,["thinkingConfig"]);return I!=null&&a(i,["thinkingConfig"],O_(I)),i}function NA(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],ql(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=s(t,["logprobs"]);p!=null&&a(i,["logprobs"],p);const g=s(t,["presencePenalty"]);g!=null&&a(i,["presencePenalty"],g);const v=s(t,["frequencyPenalty"]);v!=null&&a(i,["frequencyPenalty"],v);const T=s(t,["seed"]);T!=null&&a(i,["seed"],T);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],L_(Vf(x)));const y=s(t,["responseJsonSchema"]);y!=null&&a(i,["responseJsonSchema"],y);const C=s(t,["routingConfig"]);C!=null&&a(i,["routingConfig"],C);const S=s(t,["modelSelectionConfig"]);S!=null&&a(i,["modelConfig"],g_(S));const k=s(t,["safetySettings"]);if(n!==void 0&&k!=null){let ae=k;Array.isArray(ae)&&(ae=ae.map(ee=>j_(ee))),a(n,["safetySettings"],ae)}const N=s(t,["tools"]);if(n!==void 0&&N!=null){let ae=zl(N);Array.isArray(ae)&&(ae=ae.map(ee=>h0(Bl(ee)))),a(n,["tools"],ae)}const R=s(t,["toolConfig"]);n!==void 0&&R!=null&&a(n,["toolConfig"],K_(R));const B=s(t,["labels"]);n!==void 0&&B!=null&&a(n,["labels"],B);const X=s(t,["cachedContent"]);n!==void 0&&X!=null&&a(n,["cachedContent"],Si(e,X));const I=s(t,["responseModalities"]);I!=null&&a(i,["responseModalities"],I);const F=s(t,["mediaResolution"]);F!=null&&a(i,["mediaResolution"],F);const se=s(t,["speechConfig"]);se!=null&&a(i,["speechConfig"],z_($f(se)));const ue=s(t,["audioTimestamp"]);ue!=null&&a(i,["audioTimestamp"],ue);const pe=s(t,["thinkingConfig"]);return pe!=null&&a(i,["thinkingConfig"],Y_(pe)),i}function Yp(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>fc(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["generationConfig"],_A(e,l,n)),n}function Jp(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>ql(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["generationConfig"],NA(e,l,n)),n}function Wp(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>Dk(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=s(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function Xp(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>jk(m))),a(t,["candidates"],d)}const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const l=s(e,["modelVersion"]);l!=null&&a(t,["modelVersion"],l);const c=s(e,["promptFeedback"]);c!=null&&a(t,["promptFeedback"],c);const u=s(e,["responseId"]);u!=null&&a(t,["responseId"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function RA(e,t){const n={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);const l=s(e,["guidanceScale"]);if(t!==void 0&&l!=null&&a(t,["parameters","guidanceScale"],l),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=s(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const u=s(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const f=s(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&a(t,["parameters","includeSafetyAttributes"],f);const d=s(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);const m=s(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const h=s(e,["outputMimeType"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","mimeType"],h);const p=s(e,["outputCompressionQuality"]);if(t!==void 0&&p!=null&&a(t,["parameters","outputOptions","compressionQuality"],p),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=s(e,["imageSize"]);if(t!==void 0&&g!=null&&a(t,["parameters","sampleImageSize"],g),s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function DA(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const p=s(e,["includeRaiReason"]);t!==void 0&&p!=null&&a(t,["parameters","includeRaiReason"],p);const g=s(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const v=s(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=s(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const M=s(e,["addWatermark"]);t!==void 0&&M!=null&&a(t,["parameters","addWatermark"],M);const x=s(e,["imageSize"]);t!==void 0&&x!=null&&a(t,["parameters","sampleImageSize"],x);const y=s(e,["enhancePrompt"]);return t!==void 0&&y!=null&&a(t,["parameters","enhancePrompt"],y),n}function jA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["config"]);return l!=null&&RA(l,n),n}function IA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["config"]);return l!=null&&DA(l,n),n}function LA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>YA(c))),a(t,["generatedImages"],l)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],f0(o)),t}function UA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>mc(c))),a(t,["generatedImages"],l)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],m0(o)),t}function PA(e,t){const n={},i=s(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(e,["aspectRatio"]);t!==void 0&&l!=null&&a(t,["parameters","aspectRatio"],l);const c=s(e,["resolution"]);t!==void 0&&c!=null&&a(t,["parameters","resolution"],c);const u=s(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=s(e,["negativePrompt"]);t!==void 0&&f!=null&&a(t,["parameters","negativePrompt"],f);const d=s(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","enhancePrompt"],d),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(s(e,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(s(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function VA(e,t){const n={},i=s(e,["numberOfVideos"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const l=s(e,["fps"]);t!==void 0&&l!=null&&a(t,["parameters","fps"],l);const c=s(e,["durationSeconds"]);t!==void 0&&c!=null&&a(t,["parameters","durationSeconds"],c);const u=s(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const f=s(e,["aspectRatio"]);t!==void 0&&f!=null&&a(t,["parameters","aspectRatio"],f);const d=s(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["pubsubTopic"]);t!==void 0&&h!=null&&a(t,["parameters","pubsubTopic"],h);const p=s(e,["negativePrompt"]);t!==void 0&&p!=null&&a(t,["parameters","negativePrompt"],p);const g=s(e,["enhancePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","enhancePrompt"],g);const v=s(e,["generateAudio"]);t!==void 0&&v!=null&&a(t,["parameters","generateAudio"],v);const T=s(e,["lastFrame"]);t!==void 0&&T!=null&&a(t,["instances[0]","lastFrame"],Fn(T));const M=s(e,["referenceImages"]);if(t!==void 0&&M!=null){let C=M;Array.isArray(C)&&(C=C.map(S=>yN(S))),a(t,["instances[0]","referenceImages"],C)}const x=s(e,["mask"]);t!==void 0&&x!=null&&a(t,["instances[0]","mask"],gN(x));const y=s(e,["compressionQuality"]);return t!==void 0&&y!=null&&a(t,["parameters","compressionQuality"],y),n}function $A(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],zA(c)),t}function FA(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response"]);return c!=null&&a(t,["response"],GA(c)),t}function HA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["image"]);if(l!=null&&a(n,["instances[0]","image"],d0(l)),s(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=s(t,["source"]);c!=null&&qA(c,n);const u=s(t,["config"]);return u!=null&&PA(u,n),n}function BA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["image"]);l!=null&&a(n,["instances[0]","image"],Fn(l));const c=s(t,["video"]);c!=null&&a(n,["instances[0]","video"],p0(c));const u=s(t,["source"]);u!=null&&OA(u,n);const f=s(t,["config"]);return f!=null&&VA(f,n),n}function zA(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>WA(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function GA(e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>XA(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function qA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);if(t!==void 0&&o!=null&&a(t,["instances[0]","image"],d0(o)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function OA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],Fn(o));const l=s(e,["video"]);return t!==void 0&&l!=null&&a(t,["instances[0]","video"],p0(l)),n}function YA(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],o_(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],f0(o)),t}function mc(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],u0(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);o!=null&&a(t,["safetyAttributes"],m0(o));const l=s(e,["prompt"]);return l!=null&&a(t,["enhancedPrompt"],l),t}function JA(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["mask"],u0(n));const i=s(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>gA(l))),a(t,["labels"],o)}return t}function WA(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],hN(n)),t}function XA(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],pN(n)),t}function KA(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Be(e,i)),n}function ZA(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Be(e,i)),n}function QA(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],kk(n)),t}function e_(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],tA(n)),t}function t_(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],nA(n)),t}function n_(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],l_(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function i_(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],r_(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function o_(e){const t={},n=s(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],Lo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function u0(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["imageBytes"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function d0(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],Lo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Fn(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["imageBytes"]);i!=null&&a(t,["bytesBase64Encoded"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function l_(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function r_(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function s_(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function a_(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function c_(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=s(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Jv(e,u)),i}function u_(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=s(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Jv(e,u)),i}function d_(e,t){const n={},i=s(t,["config"]);return i!=null&&c_(e,i,n),n}function f_(e,t){const n={},i=s(t,["config"]);return i!=null&&u_(e,i,n),n}function m_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let l=Wv(o);Array.isArray(l)&&(l=l.map(c=>kd(c))),a(t,["models"],l)}return t}function h_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let l=Wv(o);Array.isArray(l)&&(l=l.map(c=>Ad(c))),a(t,["models"],l)}return t}function p_(e){const t={},n=s(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const i=s(e,["segmentationClasses"]);i!=null&&a(t,["maskClasses"],i);const o=s(e,["maskDilation"]);return o!=null&&a(t,["dilation"],o),t}function kd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["version"]);l!=null&&a(t,["version"],l);const c=s(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],Q_(c));const u=s(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const f=s(e,["outputTokenLimit"]);f!=null&&a(t,["outputTokenLimit"],f);const d=s(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function Ad(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["versionId"]);l!=null&&a(t,["version"],l);const c=s(e,["deployedModels"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>hA(p))),a(t,["endpoints"],h)}const u=s(e,["labels"]);u!=null&&a(t,["labels"],u);const f=s(e,["_self"]);f!=null&&a(t,["tunedModelInfo"],eN(f));const d=s(e,["defaultCheckpointId"]);d!=null&&a(t,["defaultCheckpointId"],d);const m=s(e,["checkpoints"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(p=>Ik(p))),a(t,["checkpoints"],h)}return t}function g_(e){const t={},n=s(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function y_(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>H_(o))),a(t,["speakerVoiceConfigs"],i)}return t}function x_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],xN(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Ak(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],yA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],TA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function v_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],vN(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],_k(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],xA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],bA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function C_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],CN(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Nk(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],vA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],SA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function T_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],TN(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Rk(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],CA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],wA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function b_(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function S_(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function w_(e){const t={},n=s(e,["productImage"]);return n!=null&&a(t,["image"],Fn(n)),t}function E_(e,t){const n={},i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["baseSteps"]);t!==void 0&&o!=null&&a(t,["parameters","editConfig","baseSteps"],o);const l=s(e,["outputGcsUri"]);t!==void 0&&l!=null&&a(t,["parameters","storageUri"],l);const c=s(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const u=s(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const d=s(e,["addWatermark"]);t!==void 0&&d!=null&&a(t,["parameters","addWatermark"],d);const m=s(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const h=s(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h);const p=s(e,["enhancePrompt"]);return t!==void 0&&p!=null&&a(t,["parameters","enhancePrompt"],p),n}function M_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["source"]);o!=null&&A_(o,n);const l=s(t,["config"]);return l!=null&&E_(l,n),n}function k_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mc(o))),a(t,["generatedImages"],i)}return t}function A_(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["personImage"]);t!==void 0&&o!=null&&a(t,["instances[0]","personImage","image"],Fn(o));const l=s(e,["productImages"]);if(t!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>w_(u))),a(t,["instances[0]","productImages"],c)}return n}function __(e){const t={},n=s(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],Fn(n));const i=s(e,["referenceId"]);i!=null&&a(t,["referenceId"],i);const o=s(e,["referenceType"]);o!=null&&a(t,["referenceType"],o);const l=s(e,["maskImageConfig"]);l!=null&&a(t,["maskImageConfig"],p_(l));const c=s(e,["controlImageConfig"]);c!=null&&a(t,["controlImageConfig"],Gk(c));const u=s(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],G_(u));const f=s(e,["subjectImageConfig"]);return f!=null&&a(t,["subjectImageConfig"],q_(f)),t}function N_(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],s_(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function R_(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],a_(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function f0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function m0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function D_(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function j_(e){const t={},n=s(e,["method"]);n!=null&&a(t,["method"],n);const i=s(e,["category"]);i!=null&&a(t,["category"],i);const o=s(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function I_(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const p=s(e,["maximum"]);p!=null&&a(t,["maximum"],p);const g=s(e,["minItems"]);g!=null&&a(t,["minItems"],g);const v=s(e,["minLength"]);v!=null&&a(t,["minLength"],v);const T=s(e,["minProperties"]);T!=null&&a(t,["minProperties"],T);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=s(e,["properties"]);C!=null&&a(t,["properties"],C);const S=s(e,["propertyOrdering"]);S!=null&&a(t,["propertyOrdering"],S);const k=s(e,["required"]);k!=null&&a(t,["required"],k);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function L_(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const p=s(e,["maximum"]);p!=null&&a(t,["maximum"],p);const g=s(e,["minItems"]);g!=null&&a(t,["minItems"],g);const v=s(e,["minLength"]);v!=null&&a(t,["minLength"],v);const T=s(e,["minProperties"]);T!=null&&a(t,["minProperties"],T);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const C=s(e,["properties"]);C!=null&&a(t,["properties"],C);const S=s(e,["propertyOrdering"]);S!=null&&a(t,["propertyOrdering"],S);const k=s(e,["required"]);k!=null&&a(t,["required"],k);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function U_(e){const t={},n=s(e,["image"]);return n!=null&&a(t,["image"],Fn(n)),t}function P_(e,t){const n={},i=s(e,["mode"]);t!==void 0&&i!=null&&a(t,["parameters","mode"],i);const o=s(e,["maxPredictions"]);t!==void 0&&o!=null&&a(t,["parameters","maxPredictions"],o);const l=s(e,["confidenceThreshold"]);t!==void 0&&l!=null&&a(t,["parameters","confidenceThreshold"],l);const c=s(e,["maskDilation"]);t!==void 0&&c!=null&&a(t,["parameters","maskDilation"],c);const u=s(e,["binaryColorThreshold"]);return t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u),n}function V_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["source"]);o!=null&&F_(o,n);const l=s(t,["config"]);return l!=null&&P_(l,n),n}function $_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>JA(o))),a(t,["generatedMasks"],i)}return t}function F_(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],Fn(o));const l=s(e,["scribbleImage"]);return t!==void 0&&l!=null&&a(t,["instances[0]","scribble"],U_(l)),n}function H_(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],g0(i)),t}function B_(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],g0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],y_(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function z_(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],bN(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function G_(e){const t={},n=s(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function q_(e){const t={},n=s(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const i=s(e,["subjectDescription"]);return i!=null&&a(t,["subjectDescription"],i),t}function O_(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function Y_(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function J_(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function W_(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function X_(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],EA(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],N_(i)),t}function K_(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],MA(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],R_(i)),t}function Z_(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>kA(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],n_(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],e_(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],uN());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],J_(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function h0(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>AA(p))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],i_(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],t_(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],pA(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],QA(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],dN());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],W_(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function Q_(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function eN(e){const t={},n=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function tN(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function nN(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function iN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&tN(o,n),n}function oN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&nN(o,n),n}function lN(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const l=s(e,["outputMimeType"]);t!==void 0&&l!=null&&a(t,["parameters","outputOptions","mimeType"],l);const c=s(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&a(t,["parameters","outputOptions","compressionQuality"],c);const u=s(e,["enhanceInputImage"]);t!==void 0&&u!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],u);const f=s(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=s(e,["numberOfImages"]);t!==void 0&&d!=null&&a(t,["parameters","sampleCount"],d);const m=s(e,["mode"]);return t!==void 0&&m!=null&&a(t,["parameters","mode"],m),n}function rN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["image"]);o!=null&&a(n,["instances[0]","image"],Fn(o));const l=s(t,["upscaleFactor"]);l!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=s(t,["config"]);return c!=null&&lN(c,n),n}function sN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>mc(l))),a(t,["generatedImages"],o)}return t}function aN(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fN(o))),a(t,["urlMetadata"],i)}return t}function cN(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mN(o))),a(t,["urlMetadata"],i)}return t}function uN(){return{}}function dN(){return{}}function fN(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function mN(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function hN(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Lo(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function pN(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function gN(e){const t={},n=s(e,["image"]);n!=null&&a(t,["_self"],Fn(n));const i=s(e,["maskMode"]);return i!=null&&a(t,["maskMode"],i),t}function yN(e){const t={},n=s(e,["image"]);n!=null&&a(t,["image"],Fn(n));const i=s(e,["referenceType"]);return i!=null&&a(t,["referenceType"],i),t}function xN(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function vN(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function CN(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function TN(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function p0(e){const t={},n=s(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["videoBytes"]);i!=null&&a(t,["bytesBase64Encoded"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function g0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],b_(n)),t}function bN(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],S_(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN="Content-Type",wN="X-Server-Timeout",EN="User-Agent",_d="x-goog-api-client",MN="1.21.0",kN=`google-genai-sdk/${MN}`,AN="v1beta1",_N="v1beta",Kp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class NN{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:AN,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:_N,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[c,u]of Object.entries(t.queryParams))o.searchParams.append(c,String(u));let l={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=t.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.unaryApiCall(o,l,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,l]of Object.entries(n))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=t.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.streamApiCall(o,l,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=l}return n&&n.extraBody!==null&&RN(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Zp(o),new bd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Zp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return Tl(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield lt(o.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(f,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),g=p.status,v=p.code,T=`got status: ${g}. ${JSON.stringify(h)}`;if(v>=400&&v<600)throw new dc({message:T,status:v})}}catch(h){if(h.name==="ApiError")throw h}c+=d;let m=c.match(Kp);for(;m;){const h=m[1];try{const p=new Response(h,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield lt(new bd(p)),c=c.slice(m[0].length),m=c.match(Kp)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=kN+" "+this.clientOptions.userAgentExtra;return t[EN]=n,t[_d]=n,t[SN]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))n.append(i,o);t.timeout&&t.timeout>0&&n.append(wN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(t);o.sizeBytes=String(c.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return l.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const l={file:t},c=await this.request({path:de("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Zp(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new dc({message:o,status:n}):new Error(o)}}function RN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const l=JSON.parse(e.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,c){const u=Object.assign({},l);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const d=c[f],m=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?u[f]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DN="mcp_used/unknown";let jN=!1;function y0(e){for(const t of e)if(IN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return jN}function x0(e){var t;const n=(t=e[_d])!==null&&t!==void 0?t:"";e[_d]=(n+` ${DN}`).trimStart()}function IN(e){return e!==null&&typeof e=="object"&&e instanceof Bf}function LN(e,t=100){return Tl(this,arguments,function*(){let i,o=0;for(;o<t;){const l=yield lt(e.listTools({cursor:i}));for(const c of l.tools)yield yield lt(c),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Bf{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Bf(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const m of this.mcpClients)try{for(var u=!0,f=(n=void 0,Ir(LN(m))),d;d=await f.next(),t=d.done,!t;u=!0){o=d.value,u=!1;const h=o;c.push(h);const p=h.name;if(l[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);l[p]=m}}catch(h){n={error:h}}finally{try{!u&&!t&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),X1(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,l);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UN(e,t,n){const i=new B1;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const l=EM(o);Object.assign(i,l),t(i)}class PN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=FN(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const m=new Promise(C=>{d=C}),h=t.callbacks,p=function(){d({})},g=this.apiClient,v={onopen:p,onmessage:C=>{UN(g,h.onmessage,C)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(C){}},T=this.webSocketFactory.create(f,$N(c),v);T.connect(),await m;const M=Be(this.apiClient,t.model),x=r0({model:M}),y=Md({setup:x});return T.send(JSON.stringify(y)),new VN(T,this.apiClient)}}class VN{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AM(t),i=l0(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=kM(t),i=Md(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const n=Md({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ul.PLAY)}pause(){this.sendPlaybackControl(ul.PAUSE)}stop(){this.sendPlaybackControl(ul.STOP)}resetContext(){this.sendPlaybackControl(ul.RESET_CONTEXT)}close(){this.conn.close()}}function $N(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function FN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BN(e,t,n){const i=new H1;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(e.isVertexAI()){const c=PM(l);Object.assign(i,c)}else{const c=UM(l);Object.assign(i,c)}t(i)}class zN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new PN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,l,c,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&y0(t.config.tools)&&x0(h);const p=YN(h);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const X=this.apiClient.getApiKey();let I="BidiGenerateContent",F="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",F="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${I}?${F}=${X}`}let g=()=>{};const v=new Promise(X=>{g=X}),T=t.callbacks,M=function(){var X;(X=T==null?void 0:T.onopen)===null||X===void 0||X.call(T),g({})},x=this.apiClient,y={onopen:M,onmessage:X=>{BN(x,T.onmessage,X)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(X){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(X){}},C=this.webSocketFactory.create(m,ON(p),y);C.connect(),await v;let S=Be(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const X=this.apiClient.getProject(),I=this.apiClient.getLocation();S=`projects/${X}/locations/${I}/`+S}let k={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[$a.AUDIO]}:t.config.responseModalities=[$a.AUDIO]),!((l=t.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[],R=[];for(const X of N)if(this.isCallableTool(X)){const I=X;R.push(await I.tool())}else R.push(X);R.length>0&&(t.config.tools=R);const B={model:S,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?k=CM(this.apiClient,B):k=vM(this.apiClient,B),delete k.config,C.send(JSON.stringify(k)),new qN(C,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const GN={turnComplete:!0};class qN{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=_n(n.turns),t.isVertexAI()?i=i.map(o=>ql(o)):i=i.map(o=>fc(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(HN)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},GN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:RM(t)}:n={realtimeInput:NM(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ON(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function YN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qp=10;function eg(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const c of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(bl(c)){o=!0;break}if(!o)return!0;const l=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function bl(e){return"callTool"in e&&typeof e.callTool=="function"}function JN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>bl(o)))!==null&&i!==void 0?i:!1}function WN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>!bl(o)))!==null&&i!==void 0?i:!1}function tg(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XN extends Io{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,l,c,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!JN(n)||eg(n.config))return await this.generateContentInternal(f);if(WN(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,m;const h=_n(f.contents),p=(l=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Qp;let g=0;for(;g<p&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const v=d.candidates[0].content,T=[];for(const M of(u=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[])if(bl(M)){const y=await M.callTool(d.functionCalls);T.push(...y)}g++,m={role:"user",parts:T},f.contents=_n(f.contents),f.contents.push(v),f.contents.push(m),tg(f.config)&&(h.push(v),h.push(m))}return tg(f.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),eg(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let l;const c=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:c.push(f);let u;return l?u={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ms(_o.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const l=(n=t.config)===null||n===void 0?void 0:n.tools;if(!l)return t;const c=await Promise.all(l.map(async f=>bl(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(u.config.tools=c,t.config&&t.config.tools&&y0(t.config.tools)){const f=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),x0(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,i,o;const l=new Map;for(const c of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(bl(c)){const u=c,f=await u.tool();for(const d of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(t){var n,i,o;const l=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Qp;let c=!1,u=0;const f=await this.initAfcToolsMap(t);return function(d,m,h){var p,g;return Tl(this,arguments,function*(){for(var v,T,M,x;u<l;){c&&(u++,c=!1);const k=yield lt(d.processParamsMaybeAddMcpUsage(h)),N=yield lt(d.generateContentStreamInternal(k)),R=[],B=[];try{for(var y=!0,C=(T=void 0,Ir(N)),S;S=yield lt(C.next()),v=S.done,!v;y=!0){x=S.value,y=!1;const X=x;if(yield yield lt(X),X.candidates&&(!((p=X.candidates[0])===null||p===void 0)&&p.content)){B.push(X.candidates[0].content);for(const I of(g=X.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(I.functionCall.name)){const F=yield lt(m.get(I.functionCall.name).callTool([I.functionCall]));R.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(X){T={error:X}}finally{try{!y&&!v&&(M=C.return)&&(yield lt(M.call(C)))}finally{if(T)throw T.error}}if(R.length>0){c=!0;const X=new fr;X.candidates=[{content:{role:"user",parts:R}}],yield yield lt(X);const I=[];I.push(...B),I.push({role:"user",parts:R});const F=_n(h.contents).concat(I);h.contents=F}else break}})}(this,f,t)}async generateContentInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Jp(this.apiClient,t);return u=de("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Xp(m),p=new fr;return Object.assign(p,h),p})}else{const d=Yp(this.apiClient,t);return u=de("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Wp(m),p=new fr;return Object.assign(p,h),p})}}async generateContentStreamInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Jp(this.apiClient,t);return u=de("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(h){return Tl(this,arguments,function*(){var p,g,v,T;try{for(var M=!0,x=Ir(h),y;y=yield lt(x.next()),p=y.done,!p;M=!0){T=y.value,M=!1;const C=T,S=Xp(yield lt(C.json()));S.sdkHttpResponse={headers:C.headers};const k=new fr;Object.assign(k,S),yield yield lt(k)}}catch(C){g={error:C}}finally{try{!M&&!p&&(v=x.return)&&(yield lt(v.call(x)))}finally{if(g)throw g.error}}})})}else{const d=Yp(this.apiClient,t);return u=de("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(h){return Tl(this,arguments,function*(){var p,g,v,T;try{for(var M=!0,x=Ir(h),y;y=yield lt(x.next()),p=y.done,!p;M=!0){T=y.value,M=!1;const C=T,S=Wp(yield lt(C.json()));S.sdkHttpResponse={headers:C.headers};const k=new fr;Object.assign(k,S),yield yield lt(k)}}catch(C){g={error:C}}finally{try{!M&&!p&&(v=x.return)&&(yield lt(v.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=dA(this.apiClient,t);return u=de("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=mA(m),p=new kp;return Object.assign(p,h),p})}else{const d=uA(this.apiClient,t);return u=de("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=fA(m),p=new kp;return Object.assign(p,h),p})}}async generateImagesInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=IA(this.apiClient,t);return u=de("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=UA(m),p=new Ap;return Object.assign(p,h),p})}else{const d=jA(this.apiClient,t);return u=de("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=LA(m),p=new Ap;return Object.assign(p,h),p})}}async editImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=oA(this.apiClient,t);return l=de("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=lA(f),m=new j1;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=rN(this.apiClient,t);return l=de("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=sN(f),m=new I1;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=M_(this.apiClient,t);return l=de("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=k_(f),m=new L1;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=V_(this.apiClient,t);return l=de("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=$_(f),m=new U1;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=ZA(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Ad(m))}else{const d=KA(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>kd(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=f_(this.apiClient,t);return u=de("{models_url}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=h_(m),p=new _p;return Object.assign(p,h),p})}else{const d=d_(this.apiClient,t);return u=de("{models_url}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=m_(m),p=new _p;return Object.assign(p,h),p})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=oN(this.apiClient,t);return u=de("{model}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Ad(m))}else{const d=iN(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>kd(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Zk(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=eA(m),p=new Np;return Object.assign(p,h),p})}else{const d=Kk(this.apiClient,t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Qk(m),p=new Np;return Object.assign(p,h),p})}}async countTokens(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Jk(this.apiClient,t);return u=de("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Xk(m),p=new Rp;return Object.assign(p,h),p})}else{const d=Yk(this.apiClient,t);return u=de("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=Wk(m),p=new Rp;return Object.assign(p,h),p})}}async computeTokens(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Pk(this.apiClient,t);return l=de("{model}:computeTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=Vk(f),m=new P1;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=BA(this.apiClient,t);return u=de("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>{const h=FA(m),p=new Fa;return Object.assign(p,h),p})}else{const d=HA(this.apiClient,t);return u=de("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>{const h=$A(m),p=new Fa;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KN extends Io{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=N1(t);return u=de("{operationName}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c}else{const d=_1(t);return u=de("{operationName}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c}}async fetchPredictVideosOperationInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=b1(t);return l=de("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ng(){return{}}function ZN(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["name"],n),t}function QN(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function eR(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function tR(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>pR(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function nR(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],CR(i)),t}function iR(e,t,n){const i={},o=s(t,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const l=s(t,["newSessionExpireTime"]);n!==void 0&&l!=null&&a(n,["newSessionExpireTime"],l);const c=s(t,["uses"]);n!==void 0&&c!=null&&a(n,["uses"],c);const u=s(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],mR(e,u));const f=s(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&a(n,["fieldMask"],f),i}function oR(e,t){const n={},i=s(t,["config"]);return i!=null&&a(n,["config"],iR(e,i,n)),n}function lR(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function rR(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function sR(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function aR(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function cR(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],lR(n)),t}function uR(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],dR(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function dR(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function fR(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],bR(Ff(h)));const p=s(e,["enableAffectiveDialog"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],p);const g=s(e,["systemInstruction"]);t!==void 0&&g!=null&&a(t,["setup","systemInstruction"],tR(Bt(g)));const v=s(e,["tools"]);if(t!==void 0&&v!=null){let k=zl(v);Array.isArray(k)&&(k=k.map(N=>wR(Bl(N)))),a(t,["setup","tools"],k)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&a(t,["setup","sessionResumption"],vR(T));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],ng());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],ng());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],xR(y));const C=s(e,["contextWindowCompression"]);t!==void 0&&C!=null&&a(t,["setup","contextWindowCompression"],nR(C));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&a(t,["setup","proactivity"],yR(S)),n}function mR(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],fR(o,n)),n}function hR(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>TR(o))),a(t,["speakerVoiceConfigs"],i)}return t}function pR(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],MR(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],eR(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],rR(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],sR(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function gR(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function yR(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function xR(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],QN(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function vR(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function CR(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function TR(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],v0(i)),t}function bR(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],v0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],hR(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function SR(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function wR(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>aR(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],uR(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],cR(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],ER());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],SR(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function ER(){return{}}function MR(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function v0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],gR(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${n}.${l}`);t.push(...o)}else t.push(n)}return t.join(",")}function AR(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(e.bidiGenerateContentSetup=l,n=l):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const l=kR(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)l?e.fieldMask=l:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(d=>c.includes(d)?`generationConfig.${d}`:d));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class _R extends Io{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=oR(this.apiClient,t);l=de("auth_tokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=AR(u,t.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>ZN(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function RR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function DR(e,t){const n={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=s(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&a(t,["displayName"],i),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(e,["epochCount"]);t!==void 0&&o!=null&&a(t,["tuningTask","hyperparameters","epochCount"],o);const l=s(e,["learningRateMultiplier"]);if(l!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=s(e,["batchSize"]);t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","batchSize"],c);const u=s(e,["learningRate"]);if(t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","learningRate"],u),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function jR(e,t){const n={},i=s(e,["validationDataset"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec"],KR(i,n));const o=s(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&a(t,["tunedModelDisplayName"],o);const l=s(e,["description"]);t!==void 0&&l!=null&&a(t,["description"],l);const c=s(e,["epochCount"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],c);const u=s(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=s(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=s(e,["adapterSize"]);if(t!==void 0&&d!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],d),s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=s(e,["labels"]);return t!==void 0&&m!=null&&a(t,["labels"],m),n}function IR(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],YR(o));const l=s(e,["config"]);return l!=null&&DR(l,t),t}function LR(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],JR(o,t));const l=s(e,["config"]);return l!=null&&jR(l,t),t}function UR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function PR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function VR(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function $R(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function FR(e){const t={},n=s(e,["config"]);return n!=null&&VR(n,t),t}function HR(e){const t={},n=s(e,["config"]);return n!=null&&$R(n,t),t}function BR(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>C0(c))),a(t,["tuningJobs"],l)}return t}function zR(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Nd(c))),a(t,["tuningJobs"],l)}return t}function GR(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);o!=null&&a(t,["step"],o);const l=s(e,["endpoint"]);return l!=null&&a(t,["endpoint"],l),t}function qR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["model"],n);const i=s(e,["name"]);return i!=null&&a(t,["endpoint"],i),t}function OR(e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],n);const i=s(e,["endpoint"]);i!=null&&a(t,["endpoint"],i);const o=s(e,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>GR(c))),a(t,["checkpoints"],l)}return t}function YR(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=s(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>WR(o))),a(t,["examples","examples"],i)}return t}function JR(e,t){const n={},i=s(e,["gcsUri"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function WR(e){const t={},n=s(e,["textInput"]);n!=null&&a(t,["textInput"],n);const i=s(e,["output"]);return i!=null&&a(t,["output"],i),t}function C0(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],Ov(o));const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["tuningTask","startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["description"]);d!=null&&a(t,["description"],d);const m=s(e,["baseModel"]);m!=null&&a(t,["baseModel"],m);const h=s(e,["_self"]);h!=null&&a(t,["tunedModel"],qR(h));const p=s(e,["customBaseModel"]);p!=null&&a(t,["customBaseModel"],p);const g=s(e,["experiment"]);g!=null&&a(t,["experiment"],g);const v=s(e,["labels"]);v!=null&&a(t,["labels"],v);const T=s(e,["outputUri"]);T!=null&&a(t,["outputUri"],T);const M=s(e,["pipelineJob"]);M!=null&&a(t,["pipelineJob"],M);const x=s(e,["serviceAccount"]);x!=null&&a(t,["serviceAccount"],x);const y=s(e,["tunedModelDisplayName"]);return y!=null&&a(t,["tunedModelDisplayName"],y),t}function Nd(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],Ov(o));const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["endTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["error"]);d!=null&&a(t,["error"],d);const m=s(e,["description"]);m!=null&&a(t,["description"],m);const h=s(e,["baseModel"]);h!=null&&a(t,["baseModel"],h);const p=s(e,["tunedModel"]);p!=null&&a(t,["tunedModel"],OR(p));const g=s(e,["preTunedModel"]);g!=null&&a(t,["preTunedModel"],g);const v=s(e,["supervisedTuningSpec"]);v!=null&&a(t,["supervisedTuningSpec"],v);const T=s(e,["tuningDataStats"]);T!=null&&a(t,["tuningDataStats"],T);const M=s(e,["encryptionSpec"]);M!=null&&a(t,["encryptionSpec"],M);const x=s(e,["partnerModelTuningSpec"]);x!=null&&a(t,["partnerModelTuningSpec"],x);const y=s(e,["customBaseModel"]);y!=null&&a(t,["customBaseModel"],y);const C=s(e,["experiment"]);C!=null&&a(t,["experiment"],C);const S=s(e,["labels"]);S!=null&&a(t,["labels"],S);const k=s(e,["outputUri"]);k!=null&&a(t,["outputUri"],k);const N=s(e,["pipelineJob"]);N!=null&&a(t,["pipelineJob"],N);const R=s(e,["serviceAccount"]);R!=null&&a(t,["serviceAccount"],R);const B=s(e,["tunedModelDisplayName"]);return B!=null&&a(t,["tunedModelDisplayName"],B),t}function XR(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const l=s(e,["done"]);l!=null&&a(t,["done"],l);const c=s(e,["error"]);return c!=null&&a(t,["error"],c),t}function KR(e,t){const n={},i=s(e,["gcsUri"]);i!=null&&a(n,["validationDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);return t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZR extends Io{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ms(_o.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Td.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=PR(t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>Nd(m))}else{const d=UR(t);return u=de("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>C0(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=HR(t);return u=de("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=zR(m),p=new Dp;return Object.assign(p,h),p})}else{const d=FR(t);return u=de("tunedModels",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:m.headers},p})),c.then(m=>{const h=BR(m),p=new Dp;return Object.assign(p,h),p})}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=RR(t);c=de("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=NR(t);c=de("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=LR(t);return l=de("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>Nd(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IR(t);return l=de("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>XR(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const eD=1024*1024*8,tD=3,nD=1e3,iD=2,xu="x-goog-upload-status";async function oD(e,t,n){var i,o,l;let c=0,u=0,f=new bd(new Response),d="upload";for(c=e.size;u<c;){const h=Math.min(eD,c-u),p=e.slice(u,u+h);u+h>=c&&(d+=", finalize");let g=0,v=nD;for(;g<tD&&(f=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[xu]));)g++,await rD(v),v=v*iD;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[xu])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[xu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function lD(e){return{size:e.size,type:e.type}}function rD(e){return new Promise(t=>setTimeout(t,e))}class sD{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await oD(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await lD(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aD{create(t,n,i){return new cD(t,n,i)}}class cD{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ig="x-goog-api-key";class uD{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(ig)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(ig,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dD="gl-node/";class fD{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=T1(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new uD(this.apiKey);this.apiClient=new NN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:dD+"web",uploader:new sD,downloader:new QR}),this.models=new XN(this.apiClient),this.live=new zN(this.apiClient,o,new aD),this.batches=new fw(this.apiClient),this.chats=new CE(this.models,this.apiClient),this.caches=new yE(this.apiClient),this.files=new jE(this.apiClient),this.operations=new KN(this.apiClient),this.authTokens=new _R(this.apiClient),this.tunings=new ZR(this.apiClient)}}const mD={а:"a",б:"b",в:"v",г:"h",ґ:"g",д:"d",е:"e",є:"ie",ж:"zh",з:"z",и:"y",і:"i",ї:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ь:"",ю:"iu",я:"ia",А:"A",Б:"B",В:"V",Г:"H",Ґ:"G",Д:"D",Е:"E",Є:"Ie",Ж:"Zh",З:"Z",И:"Y",І:"I",Ї:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Shch",Ь:"",Ю:"Iu",Я:"Ia"};function Gs(e){return e&&e.split("").map(t=>mD[t]||t).join("")}async function hD(e,t,n,i,o,l,c,u){if(!e)throw new Error("API ключ не надано. Будь ласка, введіть ваш ключ у налаштуваннях.");const f=new fD({apiKey:e}),d=Gs(l),m=t.map(g=>{const v={...g};return v.name&&(v.name=Gs(v.name)),v.comment&&(v.comment=Gs(v.comment)),v.type==="text"&&(v.text=Gs(v.text)),v}),h=`
Generate a complete Python script using the Tkinter library to draw a scene. The output must be only the Python code, with no explanations, introductions, or markdown formatting.

Here are the specifications:

1.  **Window and Canvas:**
    *   The main window should be titled "${d}".
    *   The canvas variable must be named "${c}".
    *   The canvas dimensions must be ${n}x${i} pixels.
    *   The canvas background color must be "${o}".

2.  **Script Structure:**
    *   Import tkinter: \`from tkinter import *\`.
    *   Create the root window: \`root = Tk()\`.
    *   Set the window title and geometry.
    *   Create the canvas: \`${c} = Canvas(root, ...)\`.
    *   Pack the canvas: \`${c}.pack()\`.
    *   Draw all the shapes provided below.
    *   For each shape, you MUST add a comment with its unique ID right before the drawing command, in the format: \`# ID:shape-id-123\`. This is critical for mapping code back to the editor.
    *   ${u?"Add a short, descriptive comment for each shape based on its properties (e.g., `# A blue square`).":`Do not add any descriptive comments unless one is provided in the shape object's "comment" property.`}
    *   End the script with \`root.mainloop()\`.

3.  **Shapes to Draw (JSON format):**
    ${JSON.stringify(m,null,2)}

Please generate only the Python code as a single block of text.
`,p="You are an expert Python developer specializing in the Tkinter library. Your task is to generate a complete, self-contained Python script based on a JSON description of shapes and canvas properties. The output must be only the Python code, with no surrounding text, explanations, or markdown formatting.";try{return(await f.models.generateContent({model:"gemini-2.5-flash",contents:h,config:{systemInstruction:p,temperature:.1}})).text.replace(/^```(python)?\n/i,"").replace(/```$/,"").trim()}catch(g){throw console.error("Error calling Gemini API:",g),g instanceof Error?g.message.includes("API key not valid")?new Error("Наданий ключ Gemini API недійсний. Будь ласка, перевірте його та спробуйте знову."):new Error(`Сталася помилка під час зв'язку з Gemini API: ${g.message}`):new Error("Невідома помилка під час генерації коду за допомогою Gemini.")}}const ot=e=>Math.round(e*100)/100,Cn=e=>{const t=Object.entries(e).filter(([,n])=>n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)).map(([n,i])=>{if(typeof i=="string"){if(["first","last","both","pieslice","chord","arc","miter","round","bevel","butt","projecting","normal","hidden","disabled"].includes(i))return`${n}="${i}"`;const o=i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return`${n}="${o}"`}return Array.isArray(i)?`${n}=(${i.join(", ")})`:`${n}=${i}`});return t.length>0?`, ${t.join(", ")}`:""},pD=e=>e.name||Ot(e);function gD(e,t,n){if(e.state==="hidden")return null;const i={},o=e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed||e.type==="arc"&&e.style==="arc";if(e.state!=="normal"&&(i.state=e.state),"fill"in e&&e.fill!=="none"&&!o&&(i.fill=e.fill),e.stroke!=="none"&&e.strokeWidth>0&&(i.width=ot(e.strokeWidth),o?i.fill=e.stroke:i.outline=e.stroke),"joinstyle"in e&&e.joinstyle&&(i.joinstyle=e.joinstyle),"stipple"in e&&e.stipple&&"fill"in e&&e.fill!=="none"&&(i.stipple=e.stipple),"dash"in e&&e.dash){const d=e.strokeWidth>0?e.strokeWidth:1;i.dash=e.dash.map(m=>ot(m*d)),"dashoffset"in e&&e.dashoffset!==void 0&&(i.dashoffset=ot(e.dashoffset))}const l=d=>{if(d.arrow&&d.arrow!=="none"&&d.arrowshape){i.arrow=d.arrow;const m=d.strokeWidth>0?d.strokeWidth:1;i.arrowshape=d.arrowshape.map(h=>ot(h*m))}d.capstyle&&(i.capstyle=d.capstyle)};if((e.type==="bezier"||e.type==="polyline")&&e.smooth){i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps),l(e);let d=e.points;if(e.rotation!==0){const h=Tt(e);h&&(d=e.points.map(p=>qe(p,h,e.rotation)))}const m=d.flatMap(h=>[ot(h.x),ot(h.y)]).join(", ");return e.isClosed?`${n}.create_polygon(${m}${Cn(i)})`:`${n}.create_line(${m}${Cn(i)})`}if((e.type==="line"||e.type==="bezier"||e.type==="polyline"||e.type==="arc"||e.type==="pencil")&&l(e),e.type==="text"){const d=[e.font,Math.round(e.fontSize)];e.weight==="bold"&&d.push("bold"),e.slant==="italic"&&d.push("italic"),e.underline&&d.push("underline"),e.overstrike&&d.push("overstrike"),i.font=d.join(" "),i.text=e.text,e.fill!=="none"&&(i.fill=e.fill),i.anchor=e.anchor,e.width>0&&(i.width=ot(e.width)),e.justify&&(i.justify=e.justify),e.rotation!==0&&(i.angle=ot(e.rotation)),e.stipple&&e.fill!=="none"&&(i.stipple=e.stipple);const m=[ot(e.x),ot(e.y)].join(", ");return`${n}.create_text(${m}${Cn(i)})`}if(e.type==="image"){i.image=t.get(e.id);const d=[ot(e.x+e.width/2),ot(e.y+e.height/2)].join(", ");let m=`${n}.create_image(${d}${Cn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(e.type==="bitmap"){i.bitmap=e.bitmapType,i.foreground=e.foreground,i.background=e.background;const d=[ot(e.x+e.width/2),ot(e.y+e.height/2)].join(", ");let m=`${n}.create_bitmap(${d}${Cn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(!("rotation"in e)||e.rotation===0||e.type==="ellipse"&&e.isAspectRatioLocked)switch(e.type){case"rectangle":const d=e,m=[d.x,d.y,d.x+d.width,d.y+d.height].map(ot).join(", ");return`${n}.create_rectangle(${m}${Cn(i)})`;case"ellipse":const h=e,p=[h.cx-h.rx,h.cy-h.ry,h.cx+h.rx,h.cy+h.ry].map(ot).join(", ");return`${n}.create_oval(${p}${Cn(i)})`;case"arc":const g=e;i.start=ot(g.start),i.extent=ot(g.extent),g.style!=="pieslice"&&(i.style=g.style),g.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const v=[g.x,g.y,g.x+g.width,g.y+g.height].map(ot).join(", ");return`${n}.create_arc(${v}${Cn(i)})`}if(e.type==="arc"&&e.rotation!==0){const d=e;if(d.width===d.height){i.start=ot(d.start-d.rotation),i.extent=ot(d.extent),d.style!=="pieslice"&&(i.style=d.style),d.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const m=[d.x,d.y,d.x+d.width,d.y+d.height].map(ot).join(", ");return`${n}.create_arc(${m}${Cn(i)})`}}if(e.type==="polyline"&&e.isClosed&&!e.rotation&&cv(e)){const d=e.points.map(p=>p.x),m=e.points.map(p=>p.y),h=[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)].map(ot).join(", ");return`${n}.create_rectangle(${h}${Cn(i)})`}const u=ei(e);if(!u||u.length<2)return null;"smooth"in e&&e.smooth&&(i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps));const f=u.flatMap(d=>[ot(d.x),ot(d.y)]).join(", ");return o?`${n}.create_line(${f}${Cn(i)})`:`${n}.create_polygon(${f}${Cn(i)})`}async function og(e,t,n,i,o,l,c){const u=l.trim()||"c",f=e.filter(p=>p.type==="image"),d=new Map;let m="";f.length>0&&(m+=`from PIL import Image, ImageTk
`,m+=`import base64
`,m+=`import io

`,f.forEach((p,g)=>{const v=`img_photo_${g}`,T=p.src.split(",")[1];m+=`img_data_${g} = base64.b64decode(b'${T}')
`,m+=`img_pil_${g} = Image.open(io.BytesIO(img_data_${g}))
`,m+=`${v} = ImageTk.PhotoImage(img_pil_${g})
`,d.set(p.id,v)}),m+=`
`);const h=[];return h.push({content:"from tkinter import *",shapeId:null}),m.trim()&&(h.push({content:`
# --- Image setup ---`,shapeId:null}),m.split(`
`).forEach(p=>h.push({content:p,shapeId:null}))),h.push({content:"",shapeId:null}),h.push({content:"root = Tk()",shapeId:null}),h.push({content:`root.title("${o}")`,shapeId:null}),h.push({content:`root.geometry("${t}x${n}")`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:`${u} = Canvas(root, width=${t}, height=${n}, bg="${i}")`,shapeId:null}),h.push({content:`${u}.pack()`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:"# --- Фігури (Об'єкти) ---",shapeId:null}),e.length===0?h.push({content:"# Об'єкти для малювання відсутні",shapeId:null}):e.forEach(p=>{const g=gD(p,d,u);if(g){let v=p.comment;c&&!v&&(v=pD(p)),v&&v.split(`
`).forEach(T=>{h.push({content:T.trim()===""?"#":`# ${T}`,shapeId:p.id})}),h.push({content:g,shapeId:p.id})}}),h.push({content:"",shapeId:null}),h.push({content:"root.mainloop()",shapeId:null}),Promise.resolve({codeLines:h})}const yD=e=>{const[t,n]=w.useState(e.initialTab||"canvas"),[i,o]=w.useState(null),[l,c]=w.useState(""),u=w.useRef(null);w.useEffect(()=>{i&&u.current&&(u.current.focus(),u.current.select())},[i]);const f=v=>{o(v.id),c(v.name)},d=()=>{o(null),c("")},m=()=>{i&&l.trim()!==""&&e.onRenameTemplate(i,l.trim()),d()},h=v=>{v.key==="Enter"?m():v.key==="Escape"&&d()},p=v=>{let T=v.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(T)&&(T="_"+T),e.setCanvasVarName(T)},g=v=>{e.setGeneratorType(v)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e.onClose,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:v=>v.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Налаштування"}),r.jsx("button",{onClick:e.onClose,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("button",{onClick:()=>n("canvas"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="canvas"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Полотно"}),r.jsx("button",{onClick:()=>n("grid"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="grid"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Сітка"}),r.jsx("button",{onClick:()=>n("appearance"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="appearance"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Вигляд"}),r.jsx("button",{onClick:()=>n("generator"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="generator"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Генератор"}),r.jsx("button",{onClick:()=>n("templates"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="templates"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Шаблони"})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[t==="canvas"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Розмір полотна"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasWidth",children:"Ширина:"}),r.jsx(Ae,{id:"canvasWidth",value:e.canvasWidth,onChange:e.setCanvasWidth,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasHeight",children:"Висота:"}),r.jsx(Ae,{id:"canvasHeight",value:e.canvasHeight,onChange:e.setCanvasHeight,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasVarName",children:"Назва полотна:"}),r.jsx("input",{id:"canvasVarName",type:"text",value:e.canvasVarName,onChange:v=>p(v.target.value),onBlur:v=>{v.target.value.trim()===""&&e.setCanvasVarName("c")},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsx("div",{className:"pl-28 -mt-3",children:r.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Тло"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasBgColor",children:"Колір тла:"}),r.jsx(Gt,{id:"canvasBgColor",value:e.canvasBgColor,onChange:e.setCanvasBgColor,onPreview:e.setPreviewCanvasBgColor,onCancel:()=>e.setPreviewCanvasBgColor(null)})]})]}),t==="grid"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Налаштування сітки"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"gridSize",children:"Крок сітки:"}),r.jsx(Ae,{id:"gridSize",value:e.gridSize,onChange:e.setGridSize,min:1,step:1})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"gridSnapStep",children:"Крок прив'язки:"}),r.jsx(Ae,{id:"gridSnapStep",value:e.gridSnapStep,onChange:e.setGridSnapStep,min:1,step:1})]})]}),t==="appearance"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Інтерфейс"}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showTkinterNames",type:"checkbox",checked:e.showTkinterNames,onChange:v=>e.setShowTkinterNames(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showTkinterNames",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати назви команд Tkinter",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:'Наприклад: "Прямокутник [rectangle]".'})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showLineNumbers",type:"checkbox",checked:e.showLineNumbers,onChange:v=>e.setShowLineNumbers(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showLineNumbers",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати номери рядків",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає нумерацію рядків у вікні коду."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showAxes",type:"checkbox",checked:e.showAxes,onChange:v=>e.setShowAxes(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showAxes",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати лінійки",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає лінійки зліва та зверху від полотна."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showCursorCoords",type:"checkbox",checked:e.showCursorCoords,onChange:v=>e.setShowCursorCoords(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showCursorCoords",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати координати біля курсора",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає координати X/Y поруч з курсором."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showRotationAngle",type:"checkbox",checked:e.showRotationAngle,onChange:v=>e.setShowRotationAngle(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showRotationAngle",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати кут при обертанні",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає кут у підказці біля курсора."})]})]}),r.jsxs("label",{htmlFor:"highlightCodeOnSelection",className:"flex items-start pt-2 has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed",children:[r.jsx("input",{id:"highlightCodeOnSelection",type:"checkbox",checked:e.highlightCodeOnSelection,onChange:v=>e.setHighlightCodeOnSelection(v.target.checked),disabled:e.generatorType==="gemini",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Підсвічувати код при виділенні",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Автоматично виділяти рядок коду, що відповідає вибраній фігурі."})]})]})]}),t==="generator"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Метод генерації коду"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:"generatorType",value:"local",checked:e.generatorType==="local",onChange:()=>g("local"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Локальний генератор"}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Генерує код Tkinter безпосередньо у вашому браузері.",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Миттєво, працює офлайн, безкоштовно. Рекомендовано для більшості випадків."]})]})]}),r.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:"generatorType",value:"gemini",checked:e.generatorType==="gemini",onChange:()=>g("gemini"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Gemini API"}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Надсилає опис малюнка до Google AI для генерації коду.",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Потенціал для складніших завдань у майбутньому (напр. оптимізація коду).",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--destructive-text)]",children:"Недоліки:"})," Повільніше, вимагає інтернет та API ключ."]})]})]})]}),e.generatorType==="gemini"&&r.jsxs("div",{className:"pt-4",children:[r.jsx("h4",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Ключ Gemini API"}),r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1 mb-2",children:"Для використання генератора Gemini потрібен ваш особистий ключ API."}),r.jsx("button",{onClick:()=>{e.onOpenApiKeyModal(),e.onClose()},className:"w-full text-center px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Керувати ключем API"})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs("label",{htmlFor:"autoGenerateComments",className:"flex items-start pt-2",children:[r.jsx("input",{id:"autoGenerateComments",type:"checkbox",checked:e.autoGenerateComments,onChange:v=>e.setAutoGenerateComments(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Автоматично генерувати коментарі",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Генерує описовий коментар для кожної фігури, якщо ви не додали власний."})]})]})]}),t==="templates"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Шаблони проєктів"}),e.templates.length>0?r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-2",children:e.templates.map(v=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-secondary)] rounded-md",children:[i===v.id?r.jsx("input",{ref:u,type:"text",value:l,onChange:T=>c(T.target.value),onBlur:m,onKeyDown:h,className:"bg-[var(--bg-app)] text-sm text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):r.jsx("span",{className:"text-sm text-[var(--text-primary)] truncate",title:v.name,children:v.name}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx("button",{onClick:()=>f(v),disabled:!!i,className:"text-xs px-2 py-1 rounded-md bg-[var(--bg-tertiary)] hover:bg-[var(--bg-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Перейменувати"}),r.jsx("button",{onClick:()=>e.onDeleteTemplate(v.id),disabled:!!i,className:"text-xs px-2 py-1 rounded-md bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Видалити"})]})]},v.id))}):r.jsx("p",{className:"text-sm text-[var(--text-tertiary)]",children:'Шаблони не збережено. Ви можете зберегти поточне полотно як шаблон через меню "Файл".'})]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:r.jsx("button",{onClick:e.onClose,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})},ji=e=>e.map(t=>`${t.x},${t.y}`).join(" "),xD=({projectName:e,shapes:t,width:n,height:i,backgroundColor:o,onClose:l})=>{const c=d=>{if("rotation"in d&&d.rotation&&d.rotation!==0){const m=d.type==="text"?{x:d.x,y:d.y}:Tt(d);if(m)return`rotate(${d.rotation} ${m.x} ${m.y})`}},u=w.useMemo(()=>{const d=new Map;return t.forEach(m=>{if(m&&(m.type==="line"||m.type==="bezier"||m.type==="polyline"&&!m.isClosed)&&m.arrow&&m.arrow!=="none"&&m.stroke!=="none"&&m.strokeWidth>0&&m.arrowshape){const[h,p,g]=m.arrowshape,v=m.strokeWidth,T=h*v,M=p*v,x=g*v,y=JSON.stringify({color:m.stroke,shape:[T,M,x]});d.has(y)||d.set(y,{color:m.stroke,shapeParams:[T,M,x]})}}),Array.from(d.values())},[t]),f=d=>{const m=d.joinstyle??"miter";return{strokeLinejoin:m,strokeMiterlimit:m==="miter"?10:void 0}};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:l,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl flex flex-col max-w-full max-h-full",onClick:d=>d.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-2 px-4 border-b border-[var(--border-primary)] bg-[var(--bg-app)] rounded-t-lg flex-shrink-0",children:[r.jsxs("h2",{className:"text-sm font-bold text-[var(--text-primary)] truncate",title:`Попередній перегляд: ${e}`,children:["Попередній перегляд: ",e]}),r.jsx("button",{onClick:l,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-4 bg-[var(--bg-secondary)]/50 overflow-auto",children:r.jsxs("svg",{width:n,height:i,style:{backgroundColor:o,boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},className:"rounded-md flex-shrink-0",children:[r.jsxs("defs",{children:[r.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"3",height:"3",fill:"black"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray12",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),r.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray25",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),r.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray50",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),r.jsx("mask",{id:"mask-gray75",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),r.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),r.jsx("mask",{id:"mask-bitmap-error",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),r.jsx("mask",{id:"mask-bitmap-hourglass",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-info",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-questhead",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-question",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-warning",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),u.map(({color:d,shapeParams:m})=>{const[h,p,g]=m;if(h<=0||p<=0)return null;const v=`${d.replace(/[^a-zA-Z0-9]/g,"")}-${h}-${p}-${g}`;return r.jsxs(wt.Fragment,{children:[r.jsx("marker",{id:`arrow-end-${v}`,viewBox:`0 0 ${h} ${p}`,refX:h,refY:p/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:p,orient:"auto",children:r.jsx("path",{d:`M 0,0 L ${h},${p/2} L 0,${p} L ${g},${p/2} z`,fill:d})}),r.jsx("marker",{id:`arrow-start-${v}`,viewBox:`0 0 ${h} ${p}`,refX:h,refY:p/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:p,orient:"auto-start-reverse",children:r.jsx("path",{d:`M 0,0 L ${h},${p/2} L 0,${p} L ${g},${p/2} z`,fill:d})})]},v)})]}),r.jsx("rect",{x:"0",y:"0",width:n,height:i,fill:o}),t.map(d=>{if(!d||d.state==="hidden")return null;const m={stroke:d.stroke,strokeWidth:d.strokeWidth,style:{opacity:d.state==="disabled"?.5:1},transform:c(d)},h=p=>{const g=p.stroke!=="none"&&p.strokeWidth>0;let v;if("dash"in p&&p.dash&&p.dash.length>0&&p.strokeWidth>0){const S="capstyle"in p&&p.capstyle?p.capstyle:"butt";v=p.dash.map((k,N)=>N%2===0&&k<=2?S==="round"?.01:p.strokeWidth:k*p.strokeWidth).join(" ")}const M="dashoffset"in p?p.dashoffset:void 0,x=(p.capstyle==="projecting"?"square":p.capstyle)??"butt";let y,C;if(g&&p.arrow&&p.arrow!=="none"&&p.arrowshape){const[S,k,N]=p.arrowshape,R=p.strokeWidth,B=S*R,X=k*R,I=N*R,F=`${p.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${B}-${X}-${I}`;(p.arrow==="first"||p.arrow==="both")&&(y=`url(#arrow-start-${F})`),(p.arrow==="last"||p.arrow==="both")&&(C=`url(#arrow-end-${F})`)}return{strokeDasharray:v,strokeDashoffset:M,markerStart:y,markerEnd:C,strokeLinecap:x}};switch(d.type){case"rectangle":{const g={...m,x:d.x,y:d.y,width:d.width,height:d.height,fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("rect",{...g},d.id)}case"ellipse":{const g=d,v={...m,cx:g.cx,cy:g.cy,rx:g.rx,ry:g.ry,fill:g.fill};return g.stipple&&g.fill!=="none"&&(v.mask=`url(#mask-${g.stipple})`),g.dash&&(v.strokeDasharray=g.dash.map(T=>T*g.strokeWidth).join(" ")),g.dashoffset&&(v.strokeDashoffset=g.dashoffset),r.jsx("ellipse",{...v},g.id)}case"arc":{const g=d,v={...m,d:Rf(g),fill:g.style==="arc"?"none":g.fill,...h(g)};return g.stipple&&g.fill!=="none"&&g.style!=="arc"&&(v.mask=`url(#mask-${g.stipple})`),r.jsx("path",{...v},d.id)}case"line":return r.jsx("line",{...m,x1:d.points[0].x,y1:d.points[0].y,x2:d.points[1].x,y2:d.points[1].y,...h(d)},d.id);case"bezier":const p=d.isClosed?d.fill:"none";return r.jsx("path",{...m,d:vl(d.points,d.smooth,d.isClosed),fill:p,...h(d),...f(d)},d.id);case"pencil":return r.jsx("path",{...m,d:If(d.points),fill:"none",strokeLinecap:"round",...f(d),...h(d)},d.id);case"polyline":{const g={...m,...f(d)};return d.stipple&&d.isClosed&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),d.isClosed?g.fill=d.fill:(g.fill="none",Object.assign(g,h(d))),d.smooth?r.jsx("path",{...g,d:vl(d.points,!0,d.isClosed)},d.id):d.isClosed?r.jsx("polygon",{...g,points:ji(d.points)},d.id):r.jsx("polyline",{...g,points:ji(d.points),fill:"none"},d.id)}case"triangle":{const g={...m,points:ji(Wr(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...g},d.id)}case"right-triangle":{const g={...m,points:ji(Df(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...g},d.id)}case"rhombus":{const g={...m,points:ji(jf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...g},d.id)}case"trapezoid":{const g={...m,points:ji(rc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...g},d.id)}case"parallelogram":{const g={...m,points:ji(sc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(g.mask=`url(#mask-${d.stipple})`),d.dash&&(g.strokeDasharray=d.dash.map(v=>v*d.strokeWidth).join(" ")),d.dashoffset&&(g.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...g},d.id)}case"polygon":case"star":{const g=d,v={...m,fill:g.fill,...f(g)};return g.stipple&&g.fill!=="none"&&(v.mask=`url(#mask-${g.stipple})`),g.dash&&(v.strokeDasharray=g.dash.map(T=>T*g.strokeWidth).join(" ")),g.dashoffset&&(v.strokeDashoffset=g.dashoffset),g.smooth?r.jsx("path",{...v,d:vl(ei(d),!0,!0)},d.id):r.jsx("polygon",{...v,points:ji(Il(d))},d.id)}case"text":{const g=d,{font:v,fontSize:T,weight:M,slant:x,underline:y,overstrike:C,fill:S,justify:k}=g,N=ac(g),R=io(g);if(!R)return null;const B=k==="center"?"middle":k==="right"?"end":"start";let X;B==="start"?X=R.x:B==="middle"?X=R.x+R.width/2:X=R.x+R.width,g.width>0&&(B==="middle"?X=R.x+g.width/2:B==="end"?X=R.x+g.width:X=R.x);const I={fontFamily:cc(v),fontSize:T,fontWeight:M,fontStyle:x==="italic"?"italic":"normal",textDecoration:`${y?"underline":""} ${C?"line-through":""}`.trim(),whiteSpace:"pre"};return r.jsx("text",{...m,x:X,y:R.y,fill:S,textAnchor:B,dominantBaseline:"hanging",style:{...m.style,...I},children:N.map((F,se)=>r.jsx("tspan",{x:X,dy:se===0?0:`${T*1.2}px`,children:F},se))},g.id)}case"image":{const g=d;return r.jsx("image",{href:g.src,x:g.x,y:g.y,width:g.width,height:g.height,...m},g.id)}case"bitmap":{const g=d,{x:v,y:T,width:M,height:x,bitmapType:y,foreground:C,background:S}=g,k=y.startsWith("gray")?`url(#mask-${y})`:`url(#mask-bitmap-${y})`;return r.jsxs("g",{...m,children:[r.jsx("rect",{x:v,y:T,width:M,height:x,fill:S}),r.jsx("rect",{x:v,y:T,width:M,height:x,fill:C,mask:k})]},g.id)}default:return null}})]})})]})})},vD=({onClose:e,onExport:t})=>{const[n,i]=w.useState("png"),[o,l]=w.useState(1),[c,u]=w.useState(90),f=()=>{t({format:n,scale:o,quality:c})},d=({value:m,label:h})=>r.jsx("button",{onClick:()=>i(m),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition ${n===m?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:h});return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:m=>m.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Експортувати зображення"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Ut,{})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx(re,{htmlFor:"format-group",title:"Оберіть формат файлу для експорту.",children:"Формат:"}),r.jsxs("div",{id:"format-group",className:"flex items-center gap-2 mt-2 p-1 bg-[var(--bg-app)] rounded-lg",children:[r.jsx(d,{value:"svg",label:"SVG"}),r.jsx(d,{value:"png",label:"PNG"}),r.jsx(d,{value:"jpeg",label:"JPEG"})]})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"export-scale",title:"Множник розміру зображення. 2x зробить зображення вдвічі більшим.",children:"Масштаб:"}),r.jsx(Ae,{id:"export-scale",value:o,onChange:l,min:.1,max:10,step:.1})]}),n==="jpeg"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"export-quality",title:"Якість стиснення JPEG від 0 (низька) до 100 (висока).",children:"Якість:"}),r.jsx(Ae,{id:"export-quality",value:c,onChange:u,min:0,max:100,step:1})]}),r.jsx("div",{className:"flex items-center gap-2 ml-32",children:r.jsx("input",{type:"range",min:"0",max:"100",value:c,onChange:m=>u(Number(m.target.value)),className:"w-full h-2 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer"})})]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:r.jsx("button",{onClick:f,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Експорт"})})]})})},CD=({onClose:e,onCreate:t,initialSettings:n,templates:i})=>{const[o,l]=w.useState((i.length>0,"blank")),[c,u]=w.useState(""),[f,d]=w.useState(n.width),[m,h]=w.useState(n.height),[p,g]=w.useState(n.bgColor),[v,T]=w.useState(n.canvasVarName);w.useEffect(()=>{if(o==="blank")u(n.projectName),d(n.width),h(n.height),g(n.bgColor),T(n.canvasVarName);else{const y=i.find(C=>C.id===o);if(y){const{settings:C}=y;u(C.projectName),d(C.width),h(C.height),g(C.bgColor),T(C.canvasVarName)}}},[o,i,n]);const M=()=>{t({projectName:c,width:f,height:m,bgColor:p,canvasVarName:v.trim()||"c"},o==="blank"?null:o)},x=y=>{let C=y.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(C)&&(C="_"+C),T(C)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:y=>y.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Новий проєкт"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Ut,{})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[i.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"template-selection",children:"Створити з:"}),r.jsxs(un,{id:"template-selection",value:o,onChange:l,children:[r.jsx("option",{value:"blank",children:"Чисте полотно"}),r.jsx("optgroup",{label:"Ваші шаблони",children:i.map(y=>r.jsxs("option",{value:y.id,children:[y.name," (",y.settings.width,"x",y.settings.height,", ",y.shapes.length," об.)"]},y.id))})]})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"projectName",children:"Назва проєкту:"}),r.jsx("input",{id:"projectName",type:"text",value:c,onChange:y=>u(y.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-tertiary)] pt-2",children:"Налаштування полотна"}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasWidth",children:"Ширина:"}),r.jsx(Ae,{id:"canvasWidth",value:f,onChange:d,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasHeight",children:"Висота:"}),r.jsx(Ae,{id:"canvasHeight",value:m,onChange:h,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasVarName",children:"Назва полотна:"}),r.jsx("input",{id:"canvasVarName",type:"text",value:v,onChange:y=>x(y.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsx("div",{className:"pl-28 -mt-3",children:r.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"canvasBgColor",children:"Колір тла:"}),r.jsx(Gt,{id:"canvasBgColor",value:p,onChange:g,onPreview:()=>{},onCancel:()=>{}})]})]}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:M,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Створити"})]})]})})},TD=({isOpen:e,onClose:t,onConfirm:n,title:i,message:o,confirmText:l="Продовжити",cancelText:c="Скасувати"})=>e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:i}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-[var(--text-secondary)]",children:o})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:c}),r.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:l})]})]})}):null,bD=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=w.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як..."}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"newProjectName",children:"Назва проєкту:"}),r.jsx("input",{id:"newProjectName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},SD=({isOpen:e,onClose:t,version:n})=>e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:i=>i.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:'Про редактор "ВереTkа"'}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsxs("div",{className:"p-6 space-y-4 text-sm text-[var(--text-secondary)]",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це простий векторний редактор, призначений для швидкого створення графічних примітивів та генерації відповідного Python коду для бібліотеки Tkinter."]}),r.jsx("p",{children:"Він використовує локальний генератор коду для миттєвого та надійного результату, а також може використовувати Google Gemini API для експериментальних можливостей."}),r.jsx("hr",{className:"border-[var(--border-secondary)]"}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Автор ідеї та розробник:"})," Віталій Кушнір"]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Доопрацювання та підтримка:"})," AI-асистент на базі Google Gemini."]}),r.jsxs("p",{className:"mt-2",children:["Створено за допомогою ",r.jsx("a",{href:"https://aistudio.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"AI Studio Google"}),"."]})]}),r.jsxs("p",{className:"text-xs text-center text-[var(--text-tertiary)] pt-4",children:["Версія ",n]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})}):null,wD=(e,t)=>{const[n,i]=w.useState(e);return w.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},ED=({isOpen:e,onClose:t})=>{if(!e)return null;const n=w.useRef(null),[i,o]=w.useState(""),l=wD(i,300),[c,u]=w.useState(0),[f,d]=w.useState(-1),m=[{id:"intro",title:"1. Вступ"},{id:"interface",title:"2. Огляд інтерфейсу"},{id:"projects",title:"3. Робота з проєктами"},{id:"templates",title:"4. Робота з шаблонами"},{id:"shapes",title:"5. Робота з об'єктами"},{id:"code-export",title:"6. Код та експорт"},{id:"feedback",title:"7. Зворотний зв'язок"},{id:"hotkeys",title:"8. Гарячі клавіші"}],h=(S,k)=>{var R;S.preventDefault();const N=(R=n.current)==null?void 0:R.querySelector(`#${k}`);N&&N.scrollIntoView({behavior:"smooth",block:"start"})};w.useEffect(()=>{if(!n.current)return;if(!l.trim()){u(0),d(-1);return}const S=n.current.querySelectorAll("mark");u(S.length),d(S.length>0?0:-1)},[l]),w.useEffect(()=>{if(!n.current||f===-1)return;const S=Array.from(n.current.querySelectorAll("mark"));S.length!==0&&S.forEach((k,N)=>{N===f?(k.classList.add("bg-orange-500","text-white"),k.classList.remove("bg-yellow-400/80","text-black"),k.scrollIntoView({behavior:"smooth",block:"center"})):(k.classList.remove("bg-orange-500","text-white"),k.classList.add("bg-yellow-400/80","text-black"))})},[f,l]);const p=()=>{c!==0&&d(S=>(S+1)%c)},g=()=>{c!==0&&d(S=>(S-1+c)%c)},v=(S,k)=>{if(typeof S=="string")return k.trim()?S.split(new RegExp(`(${k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((R,B)=>R.toLowerCase()===k.toLowerCase()?r.jsx("mark",{className:"bg-yellow-400/80 text-black px-0.5 rounded-sm",children:R},B):R):S;if(wt.isValidElement(S)){const N=S;if(N.props.children)return wt.cloneElement(N,{...N.props,children:wt.Children.map(N.props.children,R=>v(R,k))})}return Array.isArray(S)?S.map((N,R)=>r.jsx(wt.Fragment,{children:v(N,k)},R)):S},T=({id:S,children:k})=>r.jsx("h2",{id:S,className:"text-xl font-bold text-[var(--text-primary)] mt-6 mb-3 pb-2 border-b border-[var(--border-secondary)] scroll-mt-4",children:v(k,l)}),M=({children:S})=>r.jsx("h3",{className:"text-md font-semibold text-[var(--text-primary)] mt-4 mb-2",children:v(S,l)}),x=({children:S})=>r.jsx("p",{className:"mb-2 leading-relaxed",children:v(S,l)}),y=({children:S})=>r.jsx("code",{className:"bg-[var(--bg-tertiary)] text-sm text-[var(--text-primary)] px-1.5 py-0.5 rounded-md font-mono",children:S}),C=({children:S})=>r.jsx("li",{className:"mb-2 pl-2",children:v(S,l)});return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col",onClick:S=>S.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Довідка та інструкції"}),r.jsxs("div",{className:"flex-grow mx-4 max-w-sm relative",children:[r.jsx("input",{type:"text",placeholder:"Пошук у довідці...",value:i,onChange:S=>o(S.target.value),className:"w-full px-3 py-1.5 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-md border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-28"}),r.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 h-full flex items-center gap-1 bg-[var(--bg-secondary)] pl-2",children:[i&&r.jsx("button",{onClick:()=>o(""),className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:"Очистити пошук","aria-label":"Очистити пошук",children:r.jsx(Ut,{size:16})}),l.trim()&&r.jsxs(r.Fragment,{children:[i&&r.jsx("div",{className:"w-px h-4 bg-[var(--border-secondary)]"}),r.jsx("div",{className:"flex items-center text-xs text-[var(--text-tertiary)]",children:c>0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"font-mono",children:[f+1,"/",c]}),r.jsx("button",{onClick:g,className:"p-1 hover:text-[var(--text-primary)]",title:"Попередній","aria-label":"Попередній результат",children:"▲"}),r.jsx("button",{onClick:p,className:"p-1 hover:text-[var(--text-primary)]",title:"Наступний","aria-label":"Наступний результат",children:"▼"})]}):r.jsx("span",{className:"px-1",children:"Не знайдено"})})]})]})]}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsxs("div",{className:"flex flex-grow min-h-0",children:[r.jsx("nav",{className:"w-64 flex-shrink-0 border-r border-[var(--border-secondary)] p-4 overflow-y-auto",children:r.jsx("ul",{className:"space-y-1",children:m.map(S=>r.jsx("li",{children:r.jsx("a",{href:`#${S.id}`,onClick:k=>h(k,S.id),className:"block text-sm p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:S.title})},S.id))})}),r.jsxs("div",{ref:n,className:"flex-grow p-6 text-sm text-[var(--text-secondary)] overflow-y-auto scroll-smooth",children:[r.jsxs("section",{children:[r.jsx(T,{id:"intro",children:"1. Вступ"}),r.jsxs(x,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це професійний веб-інструмент, розроблений для візуального створення графічних елементів та автоматичної генерації коду для бібліотеки Tkinter у Python. Редактор слугує мостом між дизайном та розробкою, дозволяючи швидко прототипувати, створювати складні сцени та отримувати чистий, готовий до використання код."]}),r.jsx(x,{children:"Ця інструкція допоможе вам освоїти всі можливості редактора, від базових операцій до просунутих технік."})]}),r.jsxs("section",{children:[r.jsx(T,{id:"interface",children:"2. Огляд інтерфейсу"}),r.jsx(x,{children:"Інтерфейс редактора логічно поділений на функціональні зони для максимальної зручності:"}),r.jsxs("ul",{className:"list-decimal list-inside space-y-3 pl-2",children:[r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Головне меню:"})," Розташоване у верхній частині, надає доступ до глобальних операцій: керування файлами (",r.jsx(y,{children:"Файл"}),"), історія змін та робота з буфером обміну (",r.jsx(y,{children:"Редагувати"}),"), операції над об'єктами (",r.jsx(y,{children:"Об'єкт"}),"), налаштування видимості (",r.jsx(y,{children:"Вигляд"}),") та довідкова інформація (",r.jsx(y,{children:"Довідка"}),")."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Панелі інструментів:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Верхня панель:"})," Динамічна панель, що відображає налаштування для активного інструмента (наприклад, колір заливки для прямокутника) або властивості виділеного об'єкта. Це дозволяє швидко змінювати параметри, не звертаючись до правої панелі."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Ліва панель:"})," Основний набір інструментів для створення фігур. Згруповані за типом: примітиви, лінії та криві, багатокутники та інше."]})]})]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Робоча область (Полотно):"})," Центральна частина, де ви малюєте та редагуєте об'єкти. Полотно має налаштовуваний розмір та колір тла. Навколо нього можуть бути розташовані лінійки для точного позиціонування."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:'Панель "Код Tkinter":'})," Знаходиться зліва під панеллю інструментів. Тут у реальному часі (при використанні локального генератора) відображається Python-код, що відповідає вашому малюнку. Має кнопки для копіювання, попереднього перегляду та оновлення коду."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:`Праві панелі ("Об'єкти" та "Властивості"):`}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Список об'єктів:"})," Ієрархічний список усіх фігур на полотні. Тут ви можете змінювати їх порядок (шари), перейменовувати, приховувати та блокувати."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Редактор властивостей:"})," Детальна панель для налаштування параметрів виділеного об'єкта: координати, розміри, кольори, товщина контуру, специфічні атрибути (наприклад, кількість сторін у багатокутника) та вузлові точки для контурів."]})]})]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Рядок стану:"})," Нижня панель, що відображає поточний рівень масштабування та координати курсора на полотні."]})]}),r.jsx(M,{children:"Повноекранний режим"}),r.jsxs(x,{children:["Для максимального занурення в роботу ви можете увімкнути повноекранний режим через меню ",r.jsx(y,{children:"Вигляд"})," → ",r.jsx(y,{children:"Повноекранний режим"})," або натиснувши клавішу ",r.jsx(y,{children:"F11"}),". Це приховає інтерфейс браузера, надавши більше простору для творчості."]}),r.jsxs(x,{children:["Щоб вийти з цього режиму, натисніть ",r.jsx(y,{children:"F11"})," ще раз або ",r.jsxs("strong",{className:"text-[var(--text-primary)]",children:["утримуйте клавішу ",r.jsx(y,{children:"Escape (Esc)"})," протягом 2 секунд"]}),". Утримування запобігає випадковому виходу з режиму."]})]}),r.jsxs("section",{children:[r.jsx(T,{id:"projects",children:"3. Робота з проєктами"}),r.jsx(M,{children:"Створення нового проєкту"}),r.jsxs(x,{children:["Ви можете створити новий проєкт через меню ",r.jsx(y,{children:"Файл"})," → ",r.jsx(y,{children:"Новий проєкт..."})," або з головного екрана. У вікні створення можна налаштувати назву, розміри та колір тла полотна, а також назву змінної для Tkinter Canvas у коді."]}),r.jsx(M,{children:"Збереження та завантаження"}),r.jsxs(x,{children:["Проєкти зберігаються у форматі ",r.jsx(y,{children:".vec.json"})," — це текстовий файл, що містить повну інформацію про всі об'єкти, налаштування полотна та інтерфейсу."]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx(y,{children:"Зберегти"})," (",r.jsx(y,{children:"Ctrl+S"}),'): Зберігає поточні зміни у відкритий файл. Якщо проєкт новий, відкриється діалог "Зберегти як...".']}),r.jsxs(C,{children:[r.jsx(y,{children:"Зберегти як..."}),": Дозволяє зберегти проєкт у новий файл, можливо, з іншою назвою."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Завантажити проєкт..."}),": Відкриває діалогове вікно для вибору та завантаження файлу ",r.jsx(y,{children:".vec.json"}),"."]})]}),r.jsx(x,{children:"Редактор також веде список останніх відкритих проєктів, доступний на головному екрані для швидкого доступу."})]}),r.jsxs("section",{children:[r.jsx(T,{id:"templates",children:"4. Робота з шаблонами"}),r.jsx(M,{children:"Призначення та переваги"}),r.jsx(x,{children:"Шаблони — це потужний інструмент для стандартизації та прискорення вашої роботи. Шаблон зберігає повний стан поточного проєкту: розміри та колір полотна, налаштування сітки, а також усі намальовані об'єкти."}),r.jsx(x,{children:"Використання шаблонів є корисним, якщо ви:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsx(C,{children:"Часто створюєте проєкти з однаковими налаштуваннями полотна."}),r.jsx(C,{children:"Хочете мати стартовий набір об'єктів (наприклад, фірмовий логотип, рамку, сітку координат)."}),r.jsx(C,{children:"Розробляєте серію ілюстрацій в єдиному стилі."})]}),r.jsx(M,{children:"Створення та використання"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Створення:"})," Налаштуйте полотно та намалюйте потрібні об'єкти. Потім перейдіть до меню ",r.jsx(y,{children:"Файл"})," → ",r.jsx(y,{children:"Зберегти як шаблон..."}),". Введіть зрозумілу назву для шаблону та збережіть."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Використання:"})," При створенні нового проєкту (",r.jsx(y,{children:"Файл"})," → ",r.jsx(y,{children:"Новий проєкт..."}),`) у модальному вікні з'явиться випадаючий список "Створити з:". Виберіть потрібний шаблон зі списку. Усі налаштування та об'єкти з шаблону будуть автоматично застосовані до нового проєкту.`]})]}),r.jsx(M,{children:"Керування шаблонами"}),r.jsxs(x,{children:["Ви можете керувати вашими шаблонами у вікні налаштувань. Перейдіть до ",r.jsx(y,{children:"Налаштування"})," (у правому верхньому куті) та відкрийте вкладку ",r.jsx(y,{children:"Шаблони"}),". Тут ви можете перейменовувати або видаляти непотрібні шаблони."]}),r.jsx(M,{children:"Де зберігаються шаблони?"}),r.jsxs(x,{children:["Шаблони зберігаються локально у вашому браузері за допомогою технології ",r.jsx(y,{children:"localStorage"}),". Це означає, що вони доступні лише на тому пристрої та в тому браузері, де були створені."]}),r.jsxs(x,{children:[r.jsx("strong",{className:"text-[var(--destructive-text)]",children:"Увага:"})," Якщо ви очистите дані сайту (кеш, cookies) у налаштуваннях браузера, ваші шаблони буде видалено."]})]}),r.jsxs("section",{children:[r.jsx(T,{id:"shapes",children:"5. Робота з об'єктами"}),r.jsx(M,{children:"Створення об'єктів"}),r.jsxs(x,{children:["Виберіть інструмент на лівій панелі та клацніть на полотні, щоб почати малювати. Для більшості фігур потрібно затиснути ліву кнопку миші та потягнути, щоб визначити розмір. Інструменти, як-от ",r.jsx(y,{children:"Ламана"})," та ",r.jsx(y,{children:"Крива Без'є"}),", вимагають послідовних клацань для додавання вузлів."]}),r.jsx(M,{children:"Виділення та трансформація"}),r.jsxs(x,{children:["Використовуйте інструмент ",r.jsx(y,{children:"Вибрати"})," (гаряча клавіша ",r.jsx(y,{children:"V"}),"), щоб виділяти об'єкти. Навколо виділеного об'єкта з'явиться рамка з маніпуляторами:"]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Переміщення:"})," Затисніть ліву кнопку миші на самому об'єкті та перетягуйте."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Масштабування:"})," Потягніть за квадратні маніпулятори на кутах або сторонах рамки. Утримуйте ",r.jsx(y,{children:"Shift"})," для збереження пропорцій."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Обертання:"})," Потягніть за круглий маніпулятор, що знаходиться над рамкою."]})]}),r.jsx(M,{children:"Редагування вузлів"}),r.jsxs(x,{children:["Для контурних об'єктів (лінії, полігони, криві) доступний режим редагування вузлів (гаряча клавіша ",r.jsx(y,{children:"A"}),"). У цьому режимі ви можете переміщувати окремі вузлові точки, додавати нові (клацаючи на сегменті між точками) або видаляти існуючі (",r.jsx(y,{children:"Delete"})," або ",r.jsx(y,{children:"Backspace"})," на виділеному вузлі)."]}),r.jsx(M,{children:"Порядок (Шари)"}),r.jsx(x,{children:"Усі об'єкти розташовані у списку на правій панелі. Цей список визначає порядок їх відображення: об'єкти, що знаходяться вище у списку, будуть намальовані поверх тих, що нижче. Ви можете змінювати порядок, перетягуючи елементи у списку або використовуючи іконки-стрілочки, що з'являються при наведенні."})]}),r.jsxs("section",{children:[r.jsx(T,{id:"code-export",children:"6. Код та експорт"}),r.jsx(M,{children:"Генерація коду"}),r.jsx(x,{children:'Панель "Код Tkinter" автоматично оновлює код при будь-яких змінах на полотні (якщо ввімкнено локальний генератор). Якщо ви використовуєте Gemini API, натисніть кнопку "Згенерувати код", щоб надіслати запит.'}),r.jsxs(x,{children:["Згенерований код є повністю самодостатнім Python-скриптом. Ви можете скопіювати його, зберегти у файл ",r.jsx(y,{children:".py"})," або одразу відкрити та запустити в онлайн-середовищі ЄPython."]}),r.jsx(M,{children:"Експорт зображень"}),r.jsxs(x,{children:["Ви можете експортувати ваш малюнок у растрових (",r.jsx(y,{children:"PNG"}),", ",r.jsx(y,{children:"JPEG"}),") або векторному (",r.jsx(y,{children:"SVG"}),") форматах. Для цього перейдіть до меню ",r.jsx(y,{children:"Файл"})," → ",r.jsx(y,{children:"Експортувати як..."}),". У вікні експорту можна налаштувати формат, масштаб та якість (для JPEG)."]})]}),r.jsxs("section",{children:[r.jsx(T,{id:"feedback",children:"7. Зворотний зв'язок"}),r.jsx(x,{children:'Ваш відгук є надзвичайно важливим для подальшого розвитку редактора "ВереTkа". Ви можете легко повідомити про помилку, запропонувати нову функцію або просто поділитися враженнями через спеціальну форму.'}),r.jsx(M,{children:"Як залишити відгук"}),r.jsxs(x,{children:["Щоб відкрити вікно для відгуку, перейдіть до головного меню та виберіть ",r.jsx(y,{children:"Довідка"})," → ",r.jsx(y,{children:"Залишити відгук"}),". У модальному вікні, що з'явиться, буде кнопка для переходу до Google Форми."]}),r.jsx(M,{children:"Автоматична передача даних"}),r.jsx(x,{children:"Для того, щоб зробити процес повідомлення про помилки максимально ефективним, редактор автоматично додає до вашого відгуку деяку технічну інформацію. Це допомагає розробнику швидше зрозуміти проблему та знайти її причину."}),r.jsx(x,{children:"Автоматично передаються наступні дані:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Версія редактора:"}),' Точна версія "ВереTkа", яку ви використовуєте (напр., 1.0.3).']}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Операційна система:"})," Ваша ОС та її версія (напр., Windows 10, macOS Sonoma)."]}),r.jsxs(C,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Веб-браузер:"})," Назва та версія вашого браузера (напр., Chrome 126, Firefox 127)."]})]}),r.jsxs(x,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Примітка про приватність:"})," Ця інформація не містить жодних особистих даних і використовується виключно для технічних цілей діагностики помилок."]})]}),r.jsxs("section",{children:[r.jsx(T,{id:"hotkeys",children:"8. Гарячі клавіші"}),r.jsx(x,{children:"Використовуйте ці комбінації для прискорення робочого процесу."}),r.jsx(M,{children:"Робота з файлами та історією"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx(y,{children:"Ctrl+S"})," — Зберегти проєкт."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Ctrl+Z"})," — Скасувати останню дію."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Ctrl+Y"})," (або ",r.jsx(y,{children:"Ctrl+Shift+Z"}),") — Повернути скасовану дію."]})]}),r.jsx(M,{children:"Інструменти та виділення"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx(y,{children:"V"}),' — Активувати інструмент "Вибрати".']}),r.jsxs(C,{children:[r.jsx(y,{children:"A"}),' — Активувати інструмент "Редагувати вузли".']}),r.jsxs(C,{children:[r.jsx(y,{children:"Ctrl+D"})," — Дублювати виділений об'єкт."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Delete"})," / ",r.jsx(y,{children:"Backspace"})," — Видалити виділений об'єкт або вузол."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Стрілки"})," — Перемістити виділений об'єкт на 1 піксель."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Shift + Стрілки"})," — Перемістити виділений об'єкт на 10 пікселів."]})]}),r.jsx(M,{children:"Навігація та Загальне"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(C,{children:[r.jsx(y,{children:"Коліщатко миші"})," — Масштабування полотна."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Середня кнопка миші (натиснути й тягнути)"})," — Панорамування полотна."]}),r.jsxs(C,{children:[r.jsx(y,{children:"F11"})," — Вхід / вихід з повноекранного режиму."]}),r.jsxs(C,{children:[r.jsx(y,{children:"Escape (Esc)"})," — Скасовує поточну дію (наприклад, малювання полілінії), знімає виділення з об'єкта або закриває активні модальні вікна. Також виходить з повноекранного режиму (потрібно ",r.jsx("strong",{className:"text-[var(--text-primary)]",children:"утримувати 2 секунди"}),")."]})]})]})]})]})]})})},MD=({isOpen:e,onClose:t,onSave:n,currentApiKey:i})=>{const[o,l]=w.useState(i||""),[c,u]=w.useState(!1),[f,d]=w.useState(!1);w.useEffect(()=>{e&&(l(i||""),d(!1))},[e,i]);const m=()=>{n(o.trim()===""?null:o.trim()),t()},h=()=>{l(""),n(null),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",onClick:p=>p.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Керування ключем Gemini API"}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:f?r.jsxs("div",{children:[r.jsx("button",{onClick:()=>d(!1),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline mb-4",children:"← Повернутися до введення ключа"}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:"Як отримати ключ Gemini API"}),r.jsxs("div",{className:"space-y-3 text-sm text-[var(--text-secondary)]",children:[r.jsx("p",{children:"Ви можете безкоштовно отримати ключ API для доступу до моделей Gemini у Google AI Studio."}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 pl-2",children:[r.jsxs("li",{children:["Перейдіть на сайт ",r.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"Google AI Studio"}),"."]}),r.jsx("li",{children:"Увійдіть за допомогою вашого Google акаунту."}),r.jsxs("li",{children:["На сторінці, що відкриється, натисніть на кнопку ",r.jsx("strong",{children:'"Create API key in new project"'}),"."]}),r.jsx("li",{children:"Через декілька секунд буде згенеровано ваш ключ. Він виглядатиме як довгий рядок з випадкових символів."}),r.jsx("li",{children:"Натисніть на іконку копіювання поруч з ключем."}),r.jsx("li",{children:"Поверніться сюди та вставте скопійований ключ у поле вище."})]}),r.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[r.jsx("strong",{children:"Важливо:"})," Зберігайте ваш ключ у безпечному місці та не діліться ним ні з ким. Редактор не зберігає ключ на постійній основі і не передає його нікуди, окрім як безпосередньо до Google API при генерації коду."]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[r.jsx("strong",{children:"Важливо:"})," Ваш ключ API зберігатиметься лише на час поточної сесії і буде видалений після оновлення або закриття сторінки. Він не зберігається назавжди для вашої безпеки."]})}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:c?"text":"password",value:o,onChange:p=>l(p.target.value),placeholder:"Вставте ваш API ключ сюди",className:"w-full bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-3 py-2 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-10"}),r.jsx("button",{onClick:()=>u(p=>!p),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:c?"Приховати ключ":"Показати ключ",children:c?r.jsx($v,{size:18}):r.jsx(Vv,{size:18})})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>d(!0),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline",children:"Де взяти API ключ?"})})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-between items-center flex-shrink-0",children:[r.jsx("div",{children:i&&r.jsx("button",{onClick:h,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:"Видалити ключ"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:m,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Зберегти"})]})]})]})}):null},kD=()=>{if(typeof navigator>"u")return{browser:"Unknown",os:"Unknown"};const e=navigator.userAgent;let t="Unknown Browser",n="Unknown OS";e.includes("Win")&&(n="Windows"),e.includes("Mac")&&(n="macOS"),e.includes("Linux")&&(n="Linux"),e.includes("Android")&&(n="Android"),/(iPhone|iPad|iPod)/.test(e)&&(n="iOS"),/Windows NT 10.0/.test(e)?n="Windows 10/11":/Windows NT 6.3/.test(e)?n="Windows 8.1":/Windows NT 6.2/.test(e)?n="Windows 8":/Windows NT 6.1/.test(e)&&(n="Windows 7");let i;return(i=e.match(/(Edg|Edge)\/([\d.]+)/))?t=`Edge ${i[2]}`:(i=e.match(/Firefox\/([\d.]+)/))?t=`Firefox ${i[1]}`:(i=e.match(/Chrome\/([\d.]+)/))?t=`Chrome ${i[1]}`:(i=e.match(/Version\/([\d.]+).*Safari/))&&(t=`Safari ${i[1]}`),{browser:t,os:n}},AD=({onClose:e,appVersion:t})=>{const{browser:n,os:i}=w.useMemo(()=>kD(),[]),o="https://docs.google.com/forms/d/e/1FAIpQLSdTUJruu59--TShiM49xMQYohQ53K3ULIf0VpcCLWylFS-uzQ/viewform",l="entry.1570252682",c="entry.271524049",u="entry.1270693046",f=w.useMemo(()=>{const d=new URLSearchParams({usp:"pp_url",[l]:t,[c]:i,[u]:n});return`${o}?${d.toString()}`},[t,i,n]);return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:e,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",onClick:d=>d.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Залишити відгук"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(l1,{size:48,className:"text-[var(--accent-primary)]"})}),r.jsx("p",{className:"text-md text-[var(--text-secondary)]",children:'Ваш відгук надзвичайно важливий для покращення редактора. Повідомлення про помилки, нові ідеї та просто враження допомагають робити "ВереTkа" кращою.'}),r.jsx("p",{className:"text-sm text-[var(--text-tertiary)]",children:"Найзручніший спосіб поділитися думками — заповнити спеціальну Google Форму. Це займе лише кілька хвилин."}),r.jsxs("div",{className:"text-xs text-[var(--text-tertiary)] bg-[var(--bg-secondary)] p-2 rounded-md",children:[r.jsx("strong",{children:"Примітка:"})," Дані про версію редактора, вашу ОС та браузер будуть додані до форми автоматично."]}),r.jsx("div",{children:r.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",onClick:e,className:"inline-flex items-center gap-3 px-6 py-3 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors text-lg",children:[r.jsx("span",{children:"Перейти до форми відгуків"}),r.jsx(r1,{size:20})]})})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end flex-shrink-0",children:r.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Закрити"})})]})})};function vu(e,t,n){const i=e instanceof Blob?e:new Blob([e],{type:n}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}async function _D(){if(typeof window.showOpenFilePicker!="function")return null;try{const[e]=await window.showOpenFilePicker({types:[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}]}),n=await(await e.getFile()).text();return{handle:e,content:n}}catch(e){const t=e;if(t.name==="AbortError"||t.name==="SecurityError")return console.log(`File picker failed gracefully: ${t.name}. Falling back.`),null;throw e}}async function T0(e,t){const n=await e.createWritable();await n.write(t),await n.close()}async function mr(e,t,n,i){if(typeof window.showSaveFilePicker=="function")try{const o=await window.showSaveFilePicker({suggestedName:t,types:n});return await T0(o,e),o}catch(o){const l=o;return l.name==="AbortError"||l.name==="SecurityError"?(console.log(`File picker failed gracefully (${l.name}), falling back to download.`),vu(e,t,i),null):(console.error("Unexpected error with File System Access API, falling back to download:",o),vu(e,t,i),null)}else return vu(e,t,i),null}function ND(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function RD(e){if(e.state==="hidden")return"";const t=u=>{if("rotation"in u&&u.rotation&&u.rotation!==0){const f=u.type==="text"?{x:u.x,y:u.y}:Tt(u);if(f)return`transform="rotate(${u.rotation} ${f.x} ${f.y})"`}return""},n=u=>{let f=`stroke="${u.stroke}" stroke-width="${u.strokeWidth}" ${t(u)}`;return u.state==="disabled"&&(f+=' opacity="0.5"'),f},i=u=>u.fill==="none"?'fill="none"':"stipple"in u&&u.stipple?`fill="url(#pattern-${u.stipple}-fill)"`:`fill="${u.fill}"`,o=u=>{const f=u.joinstyle??"miter";return`stroke-linejoin="${f}" ${f==="miter"?'stroke-miterlimit="10"':""}`},l=u=>{let f=`stroke-linecap="${(u.capstyle==="projecting"?"square":u.capstyle)??"butt"}"`;if("dash"in u&&u.dash&&u.dash.length>0&&u.strokeWidth>0&&(f+=` stroke-dasharray="${u.dash.map(d=>d*u.strokeWidth).join(" ")}"`,"dashoffset"in u&&u.dashoffset&&(f+=` stroke-dashoffset="${u.dashoffset}"`)),u.arrow&&u.arrow!=="none"&&u.arrowshape){const[d,m,h]=u.arrowshape,p=u.strokeWidth>0?u.strokeWidth:1,g=`${u.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${d*p}-${m*p}-${h*p}`;(u.arrow==="first"||u.arrow==="both")&&(f+=` marker-start="url(#arrow-start-${g})"`),(u.arrow==="last"||u.arrow==="both")&&(f+=` marker-end="url(#arrow-end-${g})"`)}return f},c=ei(e);if(!c)return"";switch(e.type){case"rectangle":return`<rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${n(e)} ${i(e)} ${o(e)} />`;case"ellipse":return`<ellipse cx="${e.cx}" cy="${e.cy}" rx="${e.rx}" ry="${e.ry}" ${n(e)} ${i(e)} />`;case"image":return`<image href="${e.src}" x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${t(e)} />`;case"bitmap":return`<g ${t(e)}><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="${e.background}" /><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="url(#pattern-bitmap-${e.bitmapType}-fill)" /></g>`;case"text":{if(!io(e))return"";const f=()=>["n","ne","nw"].includes(e.anchor)?"hanging":["w","center","e"].includes(e.anchor)?"middle":"alphabetic",d=e.justify==="center"?"middle":e.justify==="right"?"end":"start",m=`font-family='${cc(e.font)}' font-size='${e.fontSize}px' font-weight='${e.weight}' font-style='${e.slant==="italic"?"italic":"normal"}'`,h=`text-decoration='${e.underline?"underline":""} ${e.overstrike?"line-through":""}'`,g=ac(e).map((v,T)=>{let M=0;return e.justify==="center"&&e.width>0&&(M=e.width/2),e.justify==="right"&&e.width>0&&(M=e.width),`<tspan x="${e.x+M}" dy="${T===0?"0":`${e.fontSize*1.2}px`}">${ND(v)}</tspan>`}).join("");return`<text x="${e.x}" y="${e.y}" ${t(e)} dominant-baseline="${f()}" text-anchor="${d}" fill="${e.fill}" ${m} ${h} style="white-space: pre">${g}</text>`}case"arc":{const u=e.style==="arc"?"none":e.fill;return`<path d="${Rf(e)}" ${n(e)} fill="${u}" ${l(e)} />`}default:{const u=c.map((h,p)=>`${p===0?"M":"L"}${h.x},${h.y}`).join(" "),f=e.type!=="line"&&e.type!=="pencil"&&!(e.type==="polyline"&&!e.isClosed)&&!(e.type==="bezier"&&!e.isClosed),d=`${u} ${f?"Z":""}`,m=f&&"fill"in e?i(e):'fill="none"';return`<path d="${d}" ${n(e)} ${m} ${l(e)} ${o(e)} />`}}}function lg(e,t,n,i){const o=new Set,l=new Set,c=new Map;e.forEach(p=>{if(p&&("stipple"in p&&p.stipple&&o.add(p.stipple),p.type==="bitmap"&&l.add(p.bitmapType),(p.type==="line"||p.type==="bezier"||p.type==="polyline"||p.type==="arc")&&p.arrow&&p.arrow!=="none"&&p.stroke!=="none"&&p.strokeWidth>0&&p.arrowshape)){const[g,v,T]=p.arrowshape,M=p.strokeWidth>0?p.strokeWidth:1,x=`${p.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${g*M}-${v*M}-${T*M}`;c.has(x)||c.set(x,{color:p.stroke,shapeParams:[g*M,v*M,T*M]})}});const u=Array.from(o).map(p=>p==="gray12"?`<pattern id="pattern-gray12-fill" width="3" height="3" patternUnits="userSpaceOnUse"><rect width="3" height="3" fill="${i}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#333":"#000"}"/></pattern>`:p==="gray25"?`<pattern id="pattern-gray25-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#444":"#000"}"/></pattern>`:p==="gray50"?`<pattern id="pattern-gray50-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/></pattern>`:p==="gray75"?`<pattern id="pattern-gray75-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i==="#fff"?"#000":"#fff"}"/><rect x="1" y="1" width="1" height="1" fill="${i}"/></pattern>`:"").join(`
`),f=Array.from(l).map(p=>`<pattern id="pattern-bitmap-${p}-fill" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M0,0 L8,8 M8,0 L0,8" stroke="currentColor" stroke-width="1" shape-rendering="crispEdges"/></pattern>`).join(`
`),d=Array.from(c.values()).map(({color:p,shapeParams:g})=>{const[v,T,M]=g;if(v<=0||T<=0)return"";const x=`${p.replace(/[^a-zA-Z0-9]/g,"")}-${v}-${T}-${M}`;return`
            <marker id="arrow-end-${x}" viewBox="0 0 ${v} ${T}" refX="${v}" refY="${T/2}" markerUnits="userSpaceOnUse" markerWidth="${v}" markerHeight="${T}" orient="auto">
                <path d="M 0,0 L ${v},${T/2} L 0,${T} L ${M},${T/2} z" fill="${p}" />
            </marker>
            <marker id="arrow-start-${x}" viewBox="0 0 ${v} ${T}" refX="0" refY="${T/2}" markerUnits="userSpaceOnUse" markerWidth="${v}" markerHeight="${T}" orient="auto-start-reverse">
                <path d="M ${v},0 L 0,${T/2} L ${v},${T} L ${v-M},${T/2} z" fill="${p}" />
            </marker>`}).join(`
`),m=`<defs>${u}${f}${d}</defs>`,h=e.map(RD).join(`
`);return`<svg width="${t}" height="${n}" viewBox="0 0 ${t} ${n}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        ${m}
        <rect x="0" y="0" width="${t}" height="${n}" fill="${i}" />
        ${h}
    </svg>`}async function DD(e,t,n,i,o,l){return new Promise((c,u)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)return u(new Error("Не вдалося отримати контекст canvas."));const m=n*o,h=i*o;f.width=m,f.height=h;const p=new Image;p.onload=()=>{d.drawImage(p,0,0,m,h);const T=e==="png"?"image/png":"image/jpeg",M=f.toDataURL(T,l/100);c(M)},p.onerror=T=>{console.error("Помилка завантаження SVG в зображення:",T),u(new Error("Не вдалося завантажити SVG для конвертації."))};const g=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),v=URL.createObjectURL(g);p.src=v})}const qn=24,rg=(e,t)=>{if(t<=0)return 100;const n=e/t,i=Math.floor(Math.log10(n)),o=Math.pow(10,i),l=n/o;let c;return l<1.5?c=1:l<3.5?c=2:l<7.5?c=5:c=10,c*o},sg=({orientation:e,transform:t,length:n,canvasSize:i})=>{const o=e==="horizontal",l=o?n:qn,c=o?qn:n,u=w.useMemo(()=>{if(n<=0)return[];const f=rg(60,t.scale),d=rg(15,t.scale),m=o?-t.x/t.scale:-t.y/t.scale,h=m+n/t.scale,p=[],g=Math.floor(m/d)*d,v=2e3;let T=0;for(let M=g;M<=h&&T<v;M+=d){T++;const x=o?i.width:i.height;if(M<0||M>x)continue;const y=M*t.scale+(o?t.x:t.y);if(y<0||y>n)continue;const C=d/100,S=Math.abs(M%f)<C;let k,N=null;if(S)k=qn,N=(Math.round(M*100)/100).toString();else{if(d*t.scale<5)continue;k=qn*.3}p.push({value:N,position:y,tickHeight:k})}return p},[n,t,o,i.width,i.height]);return l<=0||c<=0?null:r.jsx("svg",{width:l,height:c,className:"bg-[var(--ruler-bg)]",children:r.jsx("g",{children:u.map(({value:f,position:d,tickHeight:m},h)=>r.jsxs(wt.Fragment,{children:[r.jsx("line",{x1:o?d:qn-m,y1:o?qn-m:d,x2:o?d:qn,y2:o?qn:d,stroke:"var(--ruler-tick)",strokeWidth:1}),f!==null&&r.jsx("text",{x:o?d+4:qn/2,y:o?qn/2:d+4,fill:"var(--ruler-text)",fontSize:10,textAnchor:o?"start":"middle",dominantBaseline:"middle",children:f})]},`${e}-${d}-${h}`))})})},ag=.05,cg=30,jD=({zoomLevel:e,cursorPos:t,onZoomChange:n,onResetZoom:i})=>{const o=p=>Math.round(p*100)/100,l=`${Math.round(e*100)}%`,c=Math.log(ag),f=Math.log(cg)-c,d=p=>{if(f===0)return 0;const g=Math.max(ag,Math.min(cg,p));return(Math.log(g)-c)/f*100},m=p=>Math.exp(c+f*p/100),h=p=>{const g=m(Number(p.target.value));n(g)};return r.jsxs("div",{className:"bg-[var(--bg-primary)]/80 h-6 flex-shrink-0 px-3 flex items-center justify-between text-xs text-[var(--text-tertiary)] select-none",children:[r.jsx("div",{className:"font-mono w-48",children:t?`X: ${o(t.x)} Y: ${o(t.y)}`:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:d(e),onChange:h,className:"w-24 h-1 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--accent-primary)]",title:`Масштаб: ${l}`}),r.jsx("button",{onClick:i,className:"w-12 text-center hover:text-[var(--text-primary)]",title:"Скинути масштаб до 100%",children:l})]})]})},ID=({onCreateNew:e,onLoadProject:t,recentProjects:n,onOpenRecent:i,onRemoveProject:o,onClearAllProjects:l})=>{const c=u=>{const d=Math.round((new Date().getTime()-u.getTime())/1e3),m=Math.floor(d/86400);return m===0?"Сьогодні":m===1?"Вчора":m<7?`${m} дні тому`:u.toLocaleDateString()};return r.jsx("div",{className:"w-full h-full bg-[var(--bg-app)] rounded-lg flex flex-col p-8 sm:p-12 lg:p-16 overflow-y-auto",children:r.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[r.jsxs("header",{className:"text-center mb-12 animate-fade-in-down",children:[r.jsx("h1",{className:"text-6xl md:text-7xl font-extrabold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"ВереTkа"}),r.jsxs("div",{className:"mt-4 max-w-3xl mx-auto",children:[r.jsx("p",{className:"text-xl md:text-2xl text-[var(--text-secondary)] font-medium italic",children:"Перетворюйте ваші малюнки на готовий код для Canvas Tkinter"}),r.jsx("hr",{className:"my-4 border-[var(--border-secondary)] w-1/2 mx-auto"}),r.jsxs("p",{className:"text-md text-[var(--text-tertiary)] mt-2",children:["Простий векторний редактор ",r.jsx("br",{}),"із функцією швидкої генерації коду Python (Tkinter) на основі ваших малюнків"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16 animate-fade-in-up",children:[r.jsxs("button",{onClick:e,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[r.jsx(z2,{size:32,className:"text-indigo-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Створити новий проєкт"}),r.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Почати з чистого полотна та нових ідей."})]})]}),r.jsxs("button",{onClick:t,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[r.jsx(G2,{size:32,className:"text-purple-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Завантажити проєкт"}),r.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Відкрити існуючий файл .vec.json."})]})]})]}),r.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(q2,{size:20,className:"text-[var(--text-tertiary)]"}),r.jsx("h2",{className:"text-xl font-semibold text-[var(--text-secondary)]",children:"Останні проєкти"})]}),n.length>0&&r.jsx("button",{onClick:l,className:"text-xs text-[var(--destructive-text)] hover:underline",children:"Очистити список"})]}),n.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((u,f)=>r.jsxs("div",{className:"w-full flex flex-col rounded-lg bg-[var(--bg-primary)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-200 ease-in-out text-left group relative",children:[r.jsx("button",{onClick:d=>{d.stopPropagation(),o(u)},className:"absolute top-1 right-1 z-10 p-1 rounded-full bg-[var(--bg-secondary)]/50 text-[var(--text-tertiary)] hover:bg-[var(--destructive-bg)] hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Видалити зі списку",children:r.jsx(Ut,{size:14})}),r.jsxs("button",{onClick:()=>i(u),className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"w-full h-32 bg-[var(--bg-secondary)] flex items-center justify-center rounded-t-lg overflow-hidden",children:u.thumbnail?r.jsx("img",{src:u.thumbnail,alt:`Ескіз ${u.name}`,className:"w-full h-full object-contain"}):r.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:"Немає ескізу"})}),r.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[r.jsx("p",{className:"font-semibold text-[var(--text-primary)] break-words line-clamp-2",title:u.name.replace(/\.vec\.json$/,""),children:u.name.replace(/\.vec\.json$/,"")}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-2",children:["Відкрито: ",c(new Date(u.lastOpened))]})]})]})]},u.name+f))}):r.jsxs("div",{className:"text-center text-[var(--text-tertiary)] py-10 border-2 border-dashed border-[var(--border-primary)] rounded-lg",children:[r.jsx("p",{children:"Список останніх проєктів порожній."}),r.jsx("p",{className:"text-xs mt-1",children:"Почніть роботу, створивши або завантаживши проєкт."})]})]})]})})},LD="VeretkaDB",UD=1,On="recentProjects",PD=10;let Cu=null;const qs=()=>(Cu||(Cu=new Promise((e,t)=>{const n=indexedDB.open(LD,UD);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const i=n.result;i.objectStoreNames.contains(On)||i.createObjectStore(On,{keyPath:"name"})}})),Cu),VD=()=>{const[e,t]=w.useState([]),n=w.useCallback(async()=>{try{const m=(await qs()).transaction(On,"readonly").objectStore(On).getAll();m.onsuccess=()=>{const h=m.result;h.sort((p,g)=>new Date(g.lastOpened).getTime()-new Date(p.lastOpened).getTime()),t(h)},m.onerror=()=>{console.error("Could not load recent projects from DB:",m.error)}}catch(u){console.error("Failed to open IndexedDB:",u)}},[]);w.useEffect(()=>{typeof indexedDB<"u"&&n()},[n]);const i=w.useCallback(async(u,f)=>{if(!(!u||typeof indexedDB>"u"))try{const m=(await qs()).transaction(On,"readwrite"),h=m.objectStore(On),p={name:u.name,handle:u,lastOpened:new Date,thumbnail:f};h.put(p);const g=h.getAll();g.onsuccess=()=>{if(g.result.length>PD){const v=g.result;v.sort((M,x)=>new Date(M.lastOpened).getTime()-new Date(x.lastOpened).getTime());const T=v[0].name;h.delete(T)}},m.oncomplete=()=>{n()}}catch(d){console.error("Failed to add recent project:",d)}},[n]),o=w.useCallback(async u=>{if(!(typeof indexedDB>"u"))try{const d=(await qs()).transaction(On,"readwrite");d.objectStore(On).delete(u),d.oncomplete=()=>{n()}}catch(f){console.error("Failed to remove recent project:",f)}},[n]),l=w.useCallback(async()=>{if(!(typeof indexedDB>"u"))try{const f=(await qs()).transaction(On,"readwrite");f.objectStore(On).clear(),f.oncomplete=()=>{n()}}catch(u){console.error("Failed to clear recent projects:",u)}},[n]),c=w.useCallback(async u=>{try{if(await u.handle.queryPermission({mode:"read"})!=="granted"&&await u.handle.requestPermission({mode:"read"})!=="granted")throw new Error("Permission to read file was denied.");const d=await(await u.handle.getFile()).text();return await i(u.handle,u.thumbnail),d}catch(f){throw console.error(`Failed to open recent project ${u.name}:`,f),await o(u.name),f}},[i,o]);return{projects:e,addRecentProject:i,openRecentProject:c,removeRecentProject:o,clearAllProjects:l}},$D=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=w.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти код як..."}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"codeFileName",children:"Назва файлу:"}),r.jsxs("div",{className:"flex items-center w-full",children:[r.jsx("input",{id:"codeFileName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-l px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0}),r.jsx("span",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-3 py-1 rounded-r border border-l-0 border-[var(--border-secondary)]",children:".py"})]})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},FD=({shape:e,viewTransform:t,onUpdateText:n,onStopEditing:i})=>{const o=w.useRef(null),[l]=w.useState(e.text);w.useEffect(()=>{const N=o.current;N&&(N.focus(),N.select(),N.style.height="auto",N.style.height=`${N.scrollHeight}px`)},[]);const c=N=>{n(N.target.value),N.target.style.height="auto",N.target.style.height=`${N.target.scrollHeight}px`},u=N=>{N.key==="Escape"&&(n(l),i())},f=()=>{i()},d=w.useMemo(()=>io({...e}),[e]);if(!d)return null;const{scale:m,x:h,y:p}=t,g={x:d.x-e.x,y:d.y-e.y},v=e.rotation*Math.PI/180,T=Math.cos(v),M=Math.sin(v),x={x:g.x*T-g.y*M,y:g.x*M+g.y*T},y={x:e.x*m+h,y:e.y*m+p},C=y.x+x.x*m,S=y.y+x.y*m,k={position:"absolute",left:`${C}px`,top:`${S}px`,width:`${d.width*m}px`,height:`${Math.max(d.height*m,e.fontSize*1.2*m)}px`,padding:0,margin:0,border:"none",outline:"1px dashed var(--selection-stroke)",overflow:"hidden",resize:"none",backgroundColor:"transparent",color:e.fill,lineHeight:1.2,fontFamily:cc(e.font),fontSize:`${e.fontSize*m}px`,fontWeight:e.weight,fontStyle:e.slant==="italic"?"italic":"normal",textAlign:e.justify,transform:`rotate(${e.rotation}deg)`,transformOrigin:"0 0",whiteSpace:"pre-wrap",cursor:"text",zIndex:10};return r.jsx("textarea",{ref:o,value:e.text,onChange:c,onBlur:f,onKeyDown:u,style:k,className:"allow-selection"})},HD=({onClose:e,onSave:t})=>{const[n,i]=w.useState("Новий шаблон"),o=()=>{n.trim()&&t(n.trim())};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:l=>l.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як шаблон"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Ut,{})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs(ie,{children:[r.jsx(re,{htmlFor:"templateName",children:"Назва шаблону:"}),r.jsx("input",{id:"templateName",type:"text",value:n,onChange:l=>i(l.target.value),onKeyDown:l=>{l.key==="Enter"&&o()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:o,disabled:!n.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})})},ug="1.1.0",ho=24,BD=30,zD=1024,GD=(e,t)=>{w.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},hr=()=>{const[e,t]=w.useState(!1),n=w.useRef(null),i=w.useCallback(()=>t(!1),[]);return GD(n,i),{isOpen:e,toggle:()=>t(c=>!c),close:i,wrapperProps:{ref:n,onMouseLeave:i}}},qD=wt.memo(e=>{const{isOpen:t,toggle:n,close:i,wrapperProps:o}=hr(),{isOpen:l,toggle:c,close:u,wrapperProps:f}=hr(),{isOpen:d,toggle:m,close:h,wrapperProps:p}=hr(),{isOpen:g,toggle:v,close:T,wrapperProps:M}=hr(),{isOpen:x,toggle:y,close:C,wrapperProps:S}=hr(),k=(B,X)=>{B(),X()},N=({onClick:B,children:X,disabled:I,shortcut:F,selected:se})=>r.jsxs("button",{onClick:B,disabled:I,className:`flex justify-between items-center w-full px-3 py-1.5 text-left text-sm ${se?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed`,children:[r.jsx("span",{children:X}),F&&r.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:F})]}),R=({checked:B,onChange:X,children:I})=>r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[r.jsx("input",{type:"checkbox",checked:B,onChange:F=>X(F.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:I})]});return r.jsxs("nav",{className:"bg-[var(--bg-primary)] text-sm font-medium flex items-center px-2 select-none h-8 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center",children:[e.isProjectActive&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:e.onGoHome,title:"На головну",className:"px-2 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:r.jsx(J2,{size:18})}),r.jsx("div",{className:"w-px h-5 bg-[var(--border-secondary)] mx-1"})]}),r.jsxs("div",{...o,className:"relative",children:[r.jsx("button",{onClick:n,className:`px-3 py-1 rounded-md ${t?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Файл"}),t&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>k(e.onNewProject,i),children:"Новий проєкт..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>k(e.onSaveProject,i),disabled:!e.canSave,shortcut:"Ctrl+S",children:"Зберегти"}),r.jsx(N,{onClick:()=>k(e.onSaveProjectAs,i),disabled:!e.isProjectActive,children:"Зберегти як..."}),r.jsx(N,{onClick:()=>k(e.onSaveAsTemplate,i),disabled:!e.isProjectActive,children:"Зберегти як шаблон..."}),r.jsx(N,{onClick:()=>k(e.onLoadProject,i),children:"Завантажити проєкт..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>k(e.onExport,i),disabled:!e.isProjectActive,children:"Експортувати як..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),e.showGenerateButton&&r.jsx(N,{onClick:()=>k(e.onGenerate,i),disabled:!e.isProjectActive,children:"Згенерувати код..."})]})]}),r.jsxs("div",{...f,className:"relative",children:[r.jsx("button",{onClick:c,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${l?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Редагувати"}),l&&e.isProjectActive&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>k(e.onUndo,u),disabled:!e.canUndo,shortcut:"Ctrl+Z",children:"Скасувати"}),r.jsx(N,{onClick:()=>k(e.onRedo,u),disabled:!e.canRedo,shortcut:"Ctrl+Y",children:"Повернути"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>k(e.onDuplicate,u),disabled:!e.isShapeSelected,shortcut:"Ctrl+D",children:"Дублювати"}),r.jsx(N,{onClick:()=>k(e.onDelete,u),disabled:!e.isShapeSelected,shortcut:"Del",children:"Видалити"})]})]}),r.jsxs("div",{...p,className:"relative",children:[r.jsx("button",{onClick:m,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${d?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Об'єкт"}),d&&e.isProjectActive&&r.jsx("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:r.jsx(N,{onClick:()=>k(e.onConvertToPath,h),disabled:!e.canConvertToPath,children:"Перетворити на контур"})})]}),r.jsxs("div",{...M,className:"relative",children:[r.jsx("button",{onClick:v,className:`px-3 py-1 rounded-md ${g?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Вигляд"}),g&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>k(e.onFitCanvasToView,T),disabled:!e.isProjectActive,children:"Показати все полотно"}),r.jsx(N,{onClick:()=>k(e.onToggleFullscreen,T),shortcut:"F11",children:e.isFullscreen?"Вийти з повноекранного режиму":"Повноекранний режим"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(R,{checked:e.showGrid,onChange:e.setShowGrid,children:"Сітка"}),r.jsx(R,{checked:e.snapToGrid,onChange:e.setSnapToGrid,children:"Прив'язка до сітки"}),r.jsx(R,{checked:e.showAxes,onChange:e.setShowAxes,children:"Лінійки"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx("div",{className:"px-3 py-1.5 text-xs text-[var(--text-tertiary)]",children:"Тема"}),r.jsx(N,{onClick:()=>{e.setTheme("dark"),T()},selected:e.theme==="dark",children:"Темна"}),r.jsx(N,{onClick:()=>{e.setTheme("light"),T()},selected:e.theme==="light",children:"Світла"})]})]}),r.jsxs("div",{...S,className:"relative",children:[r.jsx("button",{onClick:y,className:`px-3 py-1 rounded-md ${x?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Довідка"}),x&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>k(e.onOpenAbout,C),children:"Про редактор"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>k(e.onOpenHelp,C),children:"Довідка"}),r.jsx(N,{onClick:()=>k(e.onOpenFeedback,C),children:"Залишити відгук"})]})]})]}),r.jsx("div",{className:"flex-grow flex justify-center items-center text-sm text-[var(--text-tertiary)] truncate px-4",children:r.jsx("span",{className:"truncate",title:e.projectName,children:e.isProjectActive?e.projectName:""})}),r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"relative",children:r.jsx("button",{onClick:e.onOpenSettings,className:"px-3 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:"Налаштування"})})})]})}),OD=wt.memo(({activeTool:e,setActiveTool:t})=>{const i=[{name:"rectangle",label:"Прямокутник",icon:r.jsx(gv,{size:18}),group:1},{name:"square",label:"Квадрат",icon:r.jsx(pv,{size:18}),group:1},{name:"ellipse",label:"Еліпс",icon:r.jsx(xv,{size:18}),group:1},{name:"circle",label:"Коло",icon:r.jsx(yv,{size:18}),group:1},{name:"line",label:"Лінія",icon:r.jsx(vv,{size:18}),group:2},{name:"polyline",label:"Ламана",icon:r.jsx(Cv,{size:18}),group:2},{name:"bezier",label:"Крива Без'є",icon:r.jsx(Tv,{size:18}),group:2},{name:"arc",label:"Дуга",icon:r.jsx(Rv,{size:18}),group:2},{name:"pieslice",label:"Сектор",icon:r.jsx(_v,{size:18}),group:2},{name:"chord",label:"Сегмент",icon:r.jsx(Nv,{size:18}),group:2},{name:"polygon",label:"Багатокутник",icon:r.jsx(bv,{size:18}),group:3},{name:"star",label:"Зірка",icon:r.jsx(Dv,{size:18}),group:3},{name:"triangle",label:"Трикутник",icon:r.jsx(wv,{size:18}),group:3},{name:"right-triangle",label:"Прямокутний трикутник",icon:r.jsx(Ev,{size:18}),group:3},{name:"rhombus",label:"Ромб",icon:r.jsx(Mv,{size:18}),group:3},{name:"trapezoid",label:"Трапеція",icon:r.jsx(kv,{size:18}),group:3},{name:"parallelogram",label:"Паралелограм",icon:r.jsx(Av,{size:18}),group:3},{name:"text",label:"Текст",icon:r.jsx(jv,{size:18}),group:3},{name:"pencil",label:"Олівець",icon:r.jsx(Sv,{size:18}),group:4},{name:"image",label:"Зображення",icon:r.jsx(Iv,{size:18}),group:4,disabled:!0},{name:"bitmap",label:"Bitmap",icon:r.jsx(Lv,{size:18}),group:4,disabled:!0}];return r.jsx("aside",{className:"bg-[var(--bg-primary)] rounded-lg p-1 flex flex-col items-center",children:r.jsx("div",{className:"grid grid-cols-10 gap-0.5 w-full",role:"group","aria-label":"Інструменти",children:i.map((o,l)=>{const c=l>0?i[l-1].group:-1,u=o.group!==c&&l>0;return r.jsxs(wt.Fragment,{children:[u&&r.jsx("div",{className:"col-span-10 h-px bg-[var(--border-secondary)] my-0.5"}),r.jsx("button",{onClick:()=>t(o.name),"aria-label":o.label,title:o.label,disabled:o.disabled,className:`p-1 rounded-md transition-colors duration-200 aspect-square flex items-center justify-center ${e===o.name?"bg-[var(--accent-primary)] text-[var(--accent-text)] shadow-md":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--icon-hover-text)]"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent`,children:o.icon})]},o.name)})})})}),YD=wt.memo(e=>{const{isGenerating:t,hasShapes:n,onUndo:i,onRedo:o,canUndo:l,canRedo:c,onDuplicate:u,isShapeSelected:f,onOpenMobileLeft:d,onOpenMobileRight:m,theme:h,setTheme:p,onToggleFullscreen:g,isFullscreen:v,selectedShape:T,updateShape:M,setShapePreview:x,cancelShapePreview:y,activeTool:C,setActiveTool:S,onGenerate:k,showGenerateButton:N,onClear:R}=e,B={"Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],Serif:["Times New Roman","Georgia","Garamond"],Monospace:["Courier New","Consolas","Lucida Console","Monaco"]},X=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],I=({label:ue,htmlFor:pe,children:ae})=>r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("label",{htmlFor:pe,className:"text-sm font-medium text-[var(--text-secondary)] whitespace-nowrap",children:[ue,":"]}),ae]}),F=()=>{const{drawMode:ue,setDrawMode:pe,isFillEnabled:ae,setIsFillEnabled:ee,fillColor:ge,setFillColor:ve,setPreviewFillColor:J,isStrokeEnabled:ce,setIsStrokeEnabled:le,strokeColor:ne,setStrokeColor:Ee,setPreviewStrokeColor:fe,strokeWidth:Me,setStrokeWidth:Ne,numberOfSides:K,setNumberOfSides:z,textColor:W,setTextColor:Se,setPreviewTextColor:b,textFont:G,setTextFont:Y,textFontSize:xe,setTextFontSize:ye}=e,Te=["rectangle","square","circle","ellipse","triangle","right-triangle","polygon","star","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(C),Ie=!["select","edit-points","line","pencil","polyline","bezier","image","bitmap","text"].includes(C),Je=!["select","edit-points","image","bitmap","text"].includes(C),st=["polygon","star"].includes(C),Pt=C==="text";return r.jsxs(r.Fragment,{children:[Te&&r.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-app)] p-1 rounded-lg",children:[r.jsx("button",{title:"Малювати від кута",onClick:()=>pe("corner"),className:`p-1.5 rounded ${ue==="corner"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(E2,{})}),r.jsx("button",{title:"Малювати від центру",onClick:()=>pe("center"),className:`p-1.5 rounded ${ue==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(M2,{})})]}),Ie&&r.jsxs(I,{label:"Заливка",htmlFor:"fillColor",children:[r.jsx("input",{id:"fillEnable",type:"checkbox",checked:ae,onChange:He=>ee(He.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:"fillColor",value:ge,onChange:He=>{ve(He),J(null)},onPreview:J,onCancel:()=>J(null),disabled:!ae})]}),Je&&r.jsxs(r.Fragment,{children:[r.jsxs(I,{label:"Контур",htmlFor:"strokeColor",children:[r.jsx("input",{id:"strokeEnable",type:"checkbox",checked:ce,onChange:He=>le(He.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:"strokeColor",value:ne,onChange:He=>{Ee(He),fe(null)},onPreview:fe,onCancel:()=>fe(null),disabled:!ce})]}),r.jsx(I,{label:"Товщина",htmlFor:"strokeWidth",children:r.jsx("input",{id:"strokeWidth",type:"number",min:"1",max:"100",value:Me,onChange:He=>Ne(Number(He.target.value)),disabled:!ce,className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),st&&r.jsx(I,{label:"Сторони",htmlFor:"sides",children:r.jsx("input",{id:"sides",type:"number",min:"3",max:"50",value:K,onChange:He=>z(Number(He.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),Pt&&r.jsxs(r.Fragment,{children:[r.jsx(I,{label:"Колір",htmlFor:"textColor",children:r.jsx(Gt,{id:"textColor",value:W,onChange:He=>{Se(He),b(null)},onPreview:b,onCancel:()=>b(null)})}),r.jsx(I,{label:"Шрифт",htmlFor:"textFont",children:r.jsxs(un,{id:"textFont",value:G,onChange:Y,className:"w-32 py-0.5",children:[Object.entries(B).map(([He,wi])=>r.jsx("optgroup",{label:He,children:wi.map(ti=>r.jsx("option",{value:ti,children:ti},ti))},He)),r.jsx("optgroup",{label:"Шрифти Tkinter",children:X.map(He=>r.jsx("option",{value:He,children:He},He))})]})}),r.jsx(I,{label:"Розмір",htmlFor:"textFontSize",children:r.jsx("input",{id:"textFontSize",type:"number",min:"1",value:xe,onChange:He=>ye(Number(He.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]})]})},se=()=>{if(!T)return null;const ue=T,pe=ne=>{M({...T,...ne})},ae=ne=>{pe(ne?{fill:e.fillColor}:{fill:"none"})},ee=ne=>{pe(ne?{stroke:e.strokeColor}:{stroke:"none"})},ge="fill"in T&&T.type!=="text",ve="stroke"in T&&"strokeWidth"in T&&!["image","bitmap","text"].includes(T.type),J=T.type==="polygon"||T.type==="star",ce=T.type==="text",le=ne=>Math.round(ne*100)/100;return r.jsxs(r.Fragment,{children:[ge&&r.jsxs(I,{label:"Заливка",htmlFor:`${T.id}-ctx-fill`,children:[r.jsx("input",{type:"checkbox",checked:T.fill!=="none",onChange:ne=>ae(ne.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:`${T.id}-ctx-fill`,value:T.fill==="none"?"#000000":T.fill,onChange:ne=>pe({fill:ne}),onPreview:ne=>x(T.id,{fill:ne}),onCancel:y,disabled:T.fill==="none"})]}),ve&&r.jsxs(r.Fragment,{children:[r.jsxs(I,{label:"Контур",htmlFor:`${T.id}-ctx-stroke`,children:[r.jsx("input",{type:"checkbox",checked:T.stroke!=="none",onChange:ne=>ee(ne.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:`${T.id}-ctx-stroke`,value:T.stroke==="none"?"#ffffff":T.stroke,onChange:ne=>pe({stroke:ne}),onPreview:ne=>x(T.id,{stroke:ne}),onCancel:y,disabled:T.stroke==="none"})]}),r.jsx(I,{label:"Товщина",htmlFor:`${T.id}-ctx-strokeWidth`,children:r.jsx("input",{id:`${T.id}-ctx-strokeWidth`,type:"number",min:"0",value:T.strokeWidth,onChange:ne=>pe({strokeWidth:Number(ne.target.value)}),disabled:T.stroke==="none",className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),J&&r.jsx(I,{label:"Сторони",htmlFor:`${T.id}-ctx-sides`,children:r.jsx("input",{id:`${T.id}-ctx-sides`,type:"number",min:"3",max:"50",value:T.sides,onChange:ne=>pe({sides:Number(ne.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),ce&&r.jsxs(r.Fragment,{children:[r.jsx(I,{label:"Колір",htmlFor:`${ue.id}-ctx-fill`,children:r.jsx(Gt,{id:`${ue.id}-ctx-fill`,value:ue.fill,onChange:ne=>pe({fill:ne}),onPreview:ne=>x(ue.id,{fill:ne}),onCancel:y})}),r.jsx(I,{label:"Шрифт",htmlFor:`${ue.id}-ctx-font`,children:r.jsxs(un,{id:`${ue.id}-ctx-font`,value:ue.font,onChange:ne=>pe({font:ne}),className:"w-32 py-0.5",children:[Object.entries(B).map(([ne,Ee])=>r.jsx("optgroup",{label:ne,children:Ee.map(fe=>r.jsx("option",{value:fe,children:fe},fe))},ne)),r.jsx("optgroup",{label:"Шрифти Tkinter",children:X.map(ne=>r.jsx("option",{value:ne,children:ne},ne))})]})}),r.jsx(I,{label:"Розмір",htmlFor:`${ue.id}-ctx-fontSize`,children:r.jsx("input",{id:`${ue.id}-ctx-fontSize`,type:"number",min:"1",value:le(ue.fontSize),onChange:ne=>pe({fontSize:Number(ne.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),r.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[r.jsx("button",{title:"Виразний",onClick:()=>pe({weight:ue.weight==="bold"?"normal":"bold"}),className:`p-1.5 rounded ${ue.weight==="bold"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(W2,{size:16})}),r.jsx("button",{title:"Курсив",onClick:()=>pe({slant:ue.slant==="italic"?"roman":"italic"}),className:`p-1.5 rounded ${ue.slant==="italic"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(X2,{size:16})}),r.jsx("button",{title:"Підкреслений",onClick:()=>pe({underline:!ue.underline}),className:`p-1.5 rounded ${ue.underline?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(K2,{size:16})}),r.jsx("button",{title:"Закреслений",onClick:()=>pe({overstrike:!ue.overstrike}),className:`p-1.5 rounded ${ue.overstrike?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(Z2,{size:16})})]}),r.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[r.jsx("button",{title:"Ліворуч",onClick:()=>pe({justify:"left"}),className:`p-1.5 rounded ${ue.justify==="left"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(Q2,{size:16})}),r.jsx("button",{title:"Центр",onClick:()=>pe({justify:"center"}),className:`p-1.5 rounded ${ue.justify==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(e1,{size:16})}),r.jsx("button",{title:"Праворуч",onClick:()=>pe({justify:"right"}),className:`p-1.5 rounded ${ue.justify==="right"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(t1,{size:16})})]})]})]})};return r.jsxs("div",{className:"bg-[var(--bg-primary)] p-2 flex-shrink-0 flex flex-wrap items-center justify-between gap-x-3 gap-y-2 select-none",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{title:"Скасувати (Ctrl+Z)",onClick:i,disabled:!l,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(b2,{})}),r.jsx("button",{title:"Повернути (Ctrl+Y)",onClick:o,disabled:!c,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(S2,{})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),r.jsx("button",{title:"Вибрати (V)",onClick:()=>S("select"),className:`p-2 rounded-md ${C==="select"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:r.jsx(mv,{})}),r.jsx("button",{title:"Редагувати вузли (A)",onClick:()=>S("edit-points"),className:`p-2 rounded-md ${C==="edit-points"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:r.jsx(hv,{})}),r.jsx("button",{title:"Дублювати (Ctrl+D)",onClick:u,disabled:!f,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(Uv,{})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),r.jsx("div",{className:"md:hidden flex items-center gap-2",children:r.jsx("button",{onClick:d,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:r.jsx(k2,{})})})]}),r.jsx("div",{className:"flex items-center gap-x-2 gap-y-2 flex-wrap",children:T?r.jsx(se,{}):r.jsx(F,{})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>p(h==="dark"?"light":"dark"),title:"Змінити тему",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:h==="dark"?r.jsx($2,{}):r.jsx(F2,{})}),r.jsx("button",{onClick:g,title:v?"Вийти з повноекранного режиму (F11)":"Повноекранний режим (F11)",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:v?r.jsx(o1,{}):r.jsx(i1,{})}),r.jsx("div",{className:"md:hidden flex items-center gap-2",children:r.jsx("button",{onClick:m,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:r.jsx(vd,{})})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1 md:hidden"}),r.jsxs("button",{onClick:R,disabled:!n,className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[r.jsx(uc,{size:16}),r.jsx("span",{children:"Очистити"})]}),N&&r.jsxs("button",{onClick:k,disabled:t||!n,className:"flex items-center gap-2 px-4 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[r.jsx(vd,{}),r.jsx("span",{children:t?"Генерація...":"Згенерувати код"})]})]})]})});function JD(){const{state:e,setState:t,undo:n,redo:i,canUndo:o,canRedo:l,reset:c}=y1([]),[u,f]=w.useState("Новий малюнок. ВереTkа"),[d,m]=w.useState("select"),[h,p]=w.useState(null),[g,v]=w.useState(null),[T,M]=w.useState(!1),[x,y]=w.useState([]),[C,S]=w.useState(!1),[k,N]=w.useState([]),[R,B]=w.useState(null),[X,I]=w.useState("corner"),[F,se]=w.useState(!1),[ue,pe]=w.useState(!0),[ae,ee]=w.useState("#4f46e5"),[ge,ve]=w.useState("#000000"),[J,ce]=w.useState(1),[le,ne]=w.useState(5),[Ee,fe]=w.useState("#000000"),[Me,Ne]=w.useState(null),[K,z]=w.useState("Arial"),[W,Se]=w.useState(24),[b,G]=w.useState([]),[Y,xe]=w.useState(!1),[ye,Te]=w.useState(null),[Ie,Je]=w.useState(null),[st,Pt]=w.useState(null),[He,wi]=w.useState(!1),[ti,ni]=w.useState(!1),[hc,hs]=w.useState("canvas"),[pc,Ol]=w.useState(!1),[gc,Uo]=w.useState(!1),[Yl,ro]=w.useState(!1),[zf,Jl]=w.useState(!1),[yc,Wl]=w.useState(!1),[ln,ps]=w.useState(!1),[gs,Xl]=w.useState(!1),[Kl,Zl]=w.useState(!1),[Po,Vo]=w.useState(!1),[E,_]=w.useState(null),[H,be]=w.useState(800),[Q,D]=w.useState(600),[P,Z]=w.useState("#ffffff"),[q,V]=w.useState("c"),[me,L]=w.useState(!0),[oe,he]=w.useState(10),[Le,Wt]=w.useState(!0),[Xt,xn]=w.useState(1),[Vt,Mt]=w.useState(!0),[Ve,Kt]=w.useState(!0),[zt,ht]=w.useState(!0),[Ke,je]=w.useState(!0),[$e,it]=w.useState(!0),[at,kt]=w.useState(!0),[Ze,Dt]=w.useState("local"),[Hn,ii]=w.useState(!0),[Zt,Ei]=w.useState(!0),[oi,xc]=w.useState(!!document.fullscreenElement),[$o,ys]=w.useState({}),[so,vc]=w.useState(null),[ao,Cc]=w.useState(null),[Tc,xs]=w.useState(null),[Dn,jn]=w.useState({scale:1,x:50,y:50}),[S0,w0]=w.useState(null),vs=w.useRef(null),[Bn,E0]=w.useState({width:0,height:0}),[M0,Gf]=w.useState(!1),[k0,qf]=w.useState(!1),[A0,bc]=w.useState(null),Of=w.useRef(null),Yf=w.useRef(null),[Mi,Sc]=w.useState("dark"),[Fo,Ho]=w.useState(null),[Cs,li]=w.useState(null),[rn,wc]=w.useState(!1),{projects:Ec,addRecentProject:co,openRecentProject:Jf,removeRecentProject:Wf,clearAllProjects:Xf}=VD(),[Kf,_0]=w.useState(!1),[Ts,bs]=w.useState([]),ki=w.useRef(null),N0=2e3;w.useEffect(()=>{try{const A=localStorage.getItem("veretka-project-templates");if(A){const j=JSON.parse(A);Array.isArray(j)&&bs(j)}}catch(A){console.error("Failed to load project templates from localStorage",A)}},[]),w.useEffect(()=>{const A=()=>{_0(window.innerWidth<zD)};return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]),w.useEffect(()=>{document.body.className=`${Mi}-theme bg-[var(--bg-app)] text-[var(--text-primary)] font-sans`},[Mi]),w.useEffect(()=>{Ze==="gemini"&&ii(!1)},[Ze]);const Zf=w.useCallback((A,j,U,$)=>{const te=lg(A,j,U,$);return`data:image/svg+xml;base64,${btoa(te)}`},[]),sn=w.useCallback((A,j)=>JSON.stringify({projectName:A,shapes:j,canvasSettings:{width:H,height:Q,bgColor:P,varName:q},uiSettings:{theme:Mi,showGrid:me,gridSize:oe,snapToGrid:Le,gridSnapStep:Xt,showAxes:Ve,showCursorCoords:zt,showRotationAngle:Ke,showLineNumbers:$e,showTkinterNames:Vt,generatorType:Ze,highlightCodeOnSelection:Hn,autoGenerateComments:Zt,showComments:at}}),[H,Q,P,q,Mi,me,oe,Le,Xt,Ve,zt,Ke,$e,Vt,Ze,Hn,Zt,at]),zn=w.useRef(""),[uo,R0]=w.useState(!1);w.useEffect(()=>{if(!rn)return;const A=sn(u,e);zn.current===""&&(zn.current=A),R0(A!==zn.current)},[u,e,sn,rn]),w.useEffect(()=>{const A=j=>{uo&&(j.preventDefault(),j.returnValue="")};return window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A)}},[uo]);const D0=w.useMemo(()=>Object.keys($o).length===0?e:e.map(A=>{const j=$o[A.id];return j?{...A,...j}:A}),[e,$o]),Bo=w.useCallback(()=>{ys({})},[]);w.useEffect(()=>{Bo()},[h,Bo]);const Ai=w.useCallback(()=>{if(Bn.width===0||Bn.height===0)return;const A=10,j=Ve?ho:0,U=Bn.width-j,$=Bn.height-j;if(U<=0||$<=0)return;const te=U-A*2,Ce=$-A*2,_e=te/H,et=Ce/Q,tt=Math.min(_e,et,BD),$t=H*tt,In=Q*tt,Go=(U-$t)/2,Ic=($-In)/2;jn({scale:tt,x:Go,y:Ic})},[H,Q,Bn,Ve]),Qf=w.useRef(!1);w.useEffect(()=>{!Qf.current&&Bn.width>0&&Bn.height>0&&(Ai(),Qf.current=!0)},[Bn,Ai]),w.useEffect(()=>{const A=vs.current;if(!A||!rn)return;const j=new ResizeObserver(U=>{for(let $ of U)E0({width:$.contentRect.width,height:$.contentRect.height})});return j.observe(A),()=>j.disconnect()},[rn]);const ke=(A,j="info",U=3e3)=>{Je({message:A,type:j}),setTimeout(()=>Je(null),U)},Ql=w.useCallback(A=>{t(j=>[...j,A]),A.type!=="polyline"&&A.type!=="bezier"&&(p(A.id),m("select"))},[t]),_i=w.useCallback(A=>{Bo(),t(j=>j.map(U=>U.id===A.id?A:U)),A.id===h&&A.state!=="normal"&&(p(null),B(null))},[t,h,Bo]),em=w.useCallback((A,j)=>{ys({[A]:j})},[]),zo=w.useCallback(A=>{t(j=>j.filter(U=>U.id!==A)),h===A&&(p(null),B(null))},[h,t]),Mc=w.useCallback((A,j)=>{t(U=>U.map($=>{if($.id===A&&"points"in $&&$.points.length>2){const te=[...$.points];switch(te.splice(j,1),$.type){case"pencil":case"polyline":case"bezier":return{...$,points:te};default:return $}}return $})),B(null)},[t]),j0=w.useCallback((A,j)=>{const U=$=>{if(["polyline","bezier","line","pencil"].includes($.type))return $;const te=Lf($);if(!te)return null;const Ce=$.type==="arc"?$.style!=="arc":!0,_e={id:$.id,name:void 0,type:"polyline",points:te,isClosed:Ce,rotation:"rotation"in $?$.rotation:0,state:$.state,stroke:$.stroke,strokeWidth:$.strokeWidth,fill:"fill"in $&&typeof $.fill=="string"&&Ce?$.fill:"none",joinstyle:"joinstyle"in $&&$.joinstyle?$.joinstyle:void 0};return _e.name=Ot(_e),_e};t($=>{const te=$.findIndex(Ic=>Ic.id===A);if(te===-1)return $;let Ce=$[te],_e=U(Ce);if(!_e)return $;const et=[..._e.points],tt=et[j-1],$t=_e.isClosed?et[j%et.length]:et[j];if(!tt||!$t)return $;const In={x:(tt.x+$t.x)/2,y:(tt.y+$t.y)/2};et.splice(j,0,In),_e.points=et;const Go=[...$];return Go[te]=_e,Go}),B(j)},[t]),er=w.useCallback(A=>{const j=e.find(te=>te.id===A);if(!j)return;let U;switch(j.type){case"line":U={...j,points:[{...j.points[0]},{...j.points[1]}]};break;case"pencil":case"polyline":case"bezier":U={...j,points:j.points.map(te=>({...te}))};break;default:U={...j}}U.id=new Date().toISOString();const $=10;switch(U.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":U.x+=$,U.y+=$;break;case"ellipse":case"polygon":case"star":U.cx+=$,U.cy+=$;break;case"line":U.points[0].x+=$,U.points[0].y+=$,U.points[1].x+=$,U.points[1].y+=$;break;case"pencil":case"polyline":case"bezier":U.points=U.points.map(te=>({x:te.x+$,y:te.y+$}));break}t(te=>[...te,U]),p(U.id),ke("Фігуру дубльовано.")},[e,t]),I0=w.useCallback((A,j)=>{t(U=>{const $=U.findIndex(_e=>_e.id===A);if($===-1)return U;const te=[...U],Ce=j==="up"?$+1:$-1;return Ce<0||Ce>=te.length?U:([te[$],te[Ce]]=[te[Ce],te[$]],te)})},[t]),L0=w.useCallback((A,j,U)=>{t($=>{const te=$.findIndex(In=>In.id===A),Ce=$.findIndex(In=>In.id===j);if(te===-1||Ce===-1||te===Ce)return $;const _e=[...$],[et]=_e.splice(te,1),tt=_e.findIndex(In=>In.id===j),$t=U==="top"?tt+1:tt;return _e.splice($t,0,et),_e})},[t]),kc=w.useCallback(A=>{const j=e.find(et=>et.id===A);if(!j||["polyline","bezier","pencil","line","text","image","bitmap"].includes(j.type))return;const U=ei(j);if(!U)return;const $=j.type!=="arc"||j.style!=="arc",te={id:j.id,name:void 0,type:"polyline",points:U,isClosed:$,rotation:0,state:j.state,stroke:j.stroke,strokeWidth:j.strokeWidth,fill:"fill"in j&&typeof j.fill=="string"&&$?j.fill:"none",joinstyle:"joinstyle"in j&&j.joinstyle?j.joinstyle:void 0,dash:"dash"in j?j.dash:void 0,dashoffset:"dashoffset"in j?j.dashoffset:void 0,smooth:"smooth"in j?j.smooth:void 0,stipple:"stipple"in j?j.stipple:void 0,capstyle:void 0,arrow:void 0,arrowshape:void 0,activeStroke:void 0,isAspectRatioLocked:"isAspectRatioLocked"in j?j.isAspectRatioLocked:!1},Ce=j.name,_e=!Ce||Va(Ce);te.name=_e?Ot(te):Ce,_i(te),m("edit-points"),ke("Фігуру перетворено на контур.")},[e,_i]),tm=w.useCallback(A=>{p(A),M(!1),y([]),S(!1),N([]),B(null),(A===null&&d==="edit-points"||A&&d!=="edit-points")&&m("select")},[d]),Ac=w.useCallback(A=>{const j=x.filter(te=>te);if(j.length<2){M(!1),y([]);return}let U=[...j];if(U.length>1){const te=U[U.length-1],Ce=U[U.length-2];te&&Ce&&te.x===Ce.x&&te.y===Ce.y&&U.pop()}if(U.length<2){M(!1),y([]);return}const $={id:new Date().toISOString(),name:A?"Багатокутник":"Ламана",type:"polyline",points:U,isClosed:A,fill:A&&F?so??ae:"none",stroke:ue?ao??ge:"none",strokeWidth:ue?J:0,state:"normal",rotation:0,capstyle:"round",isAspectRatioLocked:!1};Ql($),M(!1),y([]),m("select"),p($.id)},[x,Ql,F,ae,ue,ge,J,so,ao]),U0=w.useCallback(()=>{M(!1),y([]),m("select")},[]),P0=w.useCallback(A=>{const j=k.filter(Boolean);if(j.length<2){S(!1),N([]);return}let U=[...j];if(U.length>1){const te=U[U.length-1],Ce=U[U.length-2];te&&Ce&&te.x===Ce.x&&te.y===Ce.y&&U.pop()}if(U.length<2){S(!1),N([]);return}const $={id:new Date().toISOString(),name:A?"Багатокутник":"Крива Без'є",type:"bezier",points:U,smooth:!0,splinesteps:12,stroke:ue?ao??ge:"none",strokeWidth:ue?J:0,rotation:0,capstyle:"round",state:"normal",isClosed:A,fill:A&&F?so??ae:"none",isAspectRatioLocked:!1};Ql($),S(!1),N([]),m("select"),p($.id)},[k,Ql,ue,ge,J,F,ae,so,ao]),_c=w.useCallback(()=>{S(!1),N([]),m("select")},[]),V0=A=>{var U;const j=(U=A.target.files)==null?void 0:U[0];if(j){const $=new FileReader;$.onload=te=>{var _e;const Ce=(_e=te.target)==null?void 0:_e.result;bc(Ce),m("image"),ke("Клацніть на полотні, щоб розмістити зображення.")},$.readAsDataURL(j)}A.target&&(A.target.value="")},tr=w.useCallback(A=>{var U;T&&Ac(!1),C&&_c(),B(null),A==="select"||A==="edit-points"||p(null),A==="polyline"?(M(!0),y([])):M(!1),A==="bezier"?(S(!0),N([])):S(!1),A==="image"?(U=Of.current)==null||U.click():(bc(null),m(A))},[T,C,Ac,_c]),nr=w.useMemo(()=>{const A=e.find(j=>(j==null?void 0:j.id)===h)??null;return A?{...A}:null},[e,h]),nm=w.useMemo(()=>g&&e.find(A=>A.id===g)||null,[e,g]),Nc=w.useCallback(async()=>{if(e.length===0){ke("Спочатку намалюйте щось на полотні!","info");return}if(Ze==="gemini"&&!E){ke("Будь ласка, введіть ваш ключ Gemini API у налаштуваннях.","info"),Vo(!0);return}xe(!0),Te(null),G([]);try{if(Ze==="local"){const{codeLines:A}=await og(e,H,Q,P,u,q,Zt);G(A)}else{const U=(await hD(E,e,H,Q,P,u,q,Zt)).split(`
`).map($=>{const te=$.match(/(.*?) # ID:([a-zA-Z0-9.-]+)/);return te&&te[1]&&te[2]?{content:te[1].trim(),shapeId:te[2]}:{content:$,shapeId:null}});G(U)}Pt(JSON.parse(JSON.stringify(e))),ke("Код успішно згенеровано!","info")}catch(A){const j=A instanceof Error?A.message:"Сталася невідома помилка.";Te(`Не вдалося згенерувати код: ${j}`),ke("Помилка генерації коду.","error",5e3)}finally{xe(!1)}},[e,H,Q,P,u,Ze,q,Zt,E]);w.useEffect(()=>{Ze==="local"&&rn&&(async()=>{const{codeLines:j}=await og(e,H,Q,P,u,q,Zt);G(j),Pt(JSON.parse(JSON.stringify(e)))})()},[e,H,Q,P,Ze,u,rn,q,Zt]);const $0=w.useMemo(()=>st?JSON.stringify(e)!==JSON.stringify(st):!1,[e,st]),Rc=()=>{c([]),G([]),Te(null),p(null),B(null),M(!1),y([]),S(!1),N([]),Pt(null),Ho(null)},Ni=w.useCallback((A,j,U)=>{if(!uo){A();return}li({title:j,message:U,onConfirm:()=>{A(),li(null)}})},[uo]),F0=w.useCallback(()=>{Ni(()=>{Rc(),ke("Полотно очищено.")},"Очистити полотно?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[Ni]),H0=w.useCallback((A,j)=>{if(Rc(),f(A.projectName),be(A.width),D(A.height),Z(A.bgColor),V(A.canvasVarName),j){const U=Ts.find($=>$.id===j);if(U){const $=JSON.parse(JSON.stringify(U.shapes));c($),zn.current=sn(A.projectName,$)}else c([]),zn.current=sn(A.projectName,[])}else c([]),zn.current=sn(A.projectName,[]);Uo(!1),wc(!0),setTimeout(Ai,0)},[sn,Ai,Ts,c]),im=w.useCallback(()=>{Ni(()=>Uo(!0),"Створити новий проєкт?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[Ni]),B0=w.useCallback(()=>{Ni(()=>wc(!1),"Повернутися на головну?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[Ni]),Ss=w.useCallback(A=>({projectName:A,shapes:e,thumbnail:Zf(e,H,Q,P),canvasSettings:{width:H,height:Q,bgColor:P,varName:q},viewTransform:Dn,uiSettings:{theme:Mi,showGrid:me,gridSize:oe,snapToGrid:Le,gridSnapStep:Xt,showAxes:Ve,showCursorCoords:zt,showRotationAngle:Ke,showLineNumbers:$e,showTkinterNames:Vt,generatorType:Ze,highlightCodeOnSelection:Hn,autoGenerateComments:Zt,showComments:at}}),[e,H,Q,P,q,Dn,Mi,me,oe,Le,Xt,Ve,zt,Ke,$e,Vt,Ze,Hn,Zt,at,Zf]),Dc=w.useCallback(async()=>{if(!uo&&Fo){ke("Незбережених змін немає.","info");return}const A=Ss(u);if(Fo)try{await T0(Fo,JSON.stringify(A,null,2)),zn.current=sn(u,e),co(Fo,A.thumbnail),ke("Проєкт збережено.","info")}catch(j){console.error("Не вдалося зберегти у файл",j),ke('Не вдалося зберегти у файл. Спробуйте "Зберегти як...".',"error")}else try{const j=JSON.stringify(A,null,2),U=await mr(j,`${u}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(U){const $=U.name.replace(/\.vec.json$/,"");Ho(U),f($),zn.current=sn($,e),co(U,A.thumbnail),ke("Проєкт збережено.","info")}}catch(j){console.error("Не вдалося зберегти проєкт",j),ke("Не вдалося зберегти проєкт.","error")}},[uo,Fo,Ss,u,sn,e,co]),z0=w.useCallback(async A=>{ro(!1);try{const j=Ss(A),U=JSON.stringify(j,null,2),$=await mr(U,`${A}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if($){const te=$.name.replace(/\.vec.json$/,"");Ho($),f(te),zn.current=sn(te,e),co($,j.thumbnail),ke("Проєкт збережено.","info")}}catch(j){console.error("Не вдалося зберегти проєкт",j),ke("Не вдалося зберегти проєкт.","error")}},[Ss,e,co,sn]),G0=w.useCallback(A=>{const j={id:Date.now().toString(),name:A,settings:{projectName:`Проєкт (з шаблону "${A}")`,width:H,height:Q,bgColor:P,canvasVarName:q},shapes:JSON.parse(JSON.stringify(e))};bs(U=>{const $=[...U,j];try{localStorage.setItem("veretka-project-templates",JSON.stringify($)),ke(`Шаблон "${A}" збережено.`,"info")}catch(te){console.error("Failed to save project templates to localStorage",te),ke("Не вдалося зберегти шаблон.","error")}return $}),Wl(!1)},[e,H,Q,P,q]),q0=w.useCallback(A=>{li({title:"Видалити шаблон?",message:"Ця дія назавжди видалить цей шаблон. Ви впевнені?",onConfirm:()=>{bs(j=>{const U=j.filter($=>$.id!==A);try{localStorage.setItem("veretka-project-templates",JSON.stringify(U)),ke("Шаблон видалено.","info")}catch($){console.error("Failed to delete project template from localStorage",$),ke("Не вдалося видалити шаблон.","error")}return U}),li(null)}})},[]),O0=w.useCallback((A,j)=>{bs(U=>{const $=U.map(te=>te.id===A?{...te,name:j}:te);try{localStorage.setItem("veretka-project-templates",JSON.stringify($)),ke("Шаблон перейменовано.","info")}catch(te){console.error("Failed to rename project template in localStorage",te),ke("Не вдалося перейменувати шаблон.","error")}return $})},[]),ir=w.useCallback((A,j,U)=>{try{const $=JSON.parse(A);if($.shapes&&$.canvasSettings&&$.viewTransform){const te=$.projectName||(j?j.replace(/\.vec.json$/,""):"Завантажений проєкт");Rc(),c($.shapes),f(te),be($.canvasSettings.width),D($.canvasSettings.height),Z($.canvasSettings.bgColor),V($.canvasSettings.varName||"c"),jn($.viewTransform);const Ce=$.uiSettings||{};Sc(Ce.theme||"dark"),L(Ce.showGrid??!0),he(Ce.gridSize||10),Wt(Ce.snapToGrid??!0),xn(Ce.gridSnapStep||1),Kt(Ce.showAxes??!0),ht(Ce.showCursorCoords??!0),je(Ce.showRotationAngle??!0),it(Ce.showLineNumbers??!0),kt(Ce.showComments??!0),Mt(Ce.showTkinterNames??!0),Dt(Ce.generatorType||"local"),ii(Ce.highlightCodeOnSelection??!0),Ei(Ce.autoGenerateComments??!0),zn.current=sn(te,$.shapes),(d==="polyline"||d==="bezier")&&m("select"),wc(!0),U&&co(U,$.thumbnail),ke("Проєкт успішно завантажено.","info"),setTimeout(Ai,0)}else ke("Неправильний формат файлу проєкту.","error")}catch($){console.error("Помилка парсингу файлу проєкту",$),ke("Не вдалося завантажити проєкт. Файл пошкоджено.","error")}},[c,sn,co,Ai,d]),om=w.useCallback(async()=>{var j;let A=null;if(typeof window.showOpenFilePicker=="function")try{A=await _D()}catch(U){console.error("Не вдалося завантажити проєкт через API",U),ke("Не вдалося завантажити проєкт.","error");return}A?(ir(A.content,A.handle.name,A.handle),Ho(A.handle)):(j=Yf.current)==null||j.click()},[ir]),lm=w.useCallback(()=>{Ni(om,"Завантажити проєкт?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[Ni,om]),Y0=A=>{var $;const j=($=A.target.files)==null?void 0:$[0];if(!j)return;const U=new FileReader;U.onload=te=>{var Ce;try{const _e=(Ce=te.target)==null?void 0:Ce.result;Ho(null),ir(_e,j.name)}catch(_e){console.error("Не вдалося завантажити проєкт",_e),ke("Не вдалося завантажити проєкт. Файл може бути пошкоджений.","error")}},U.onerror=()=>{ke("Не вдалося прочитати файл.","error")},U.readAsText(j),A.target&&(A.target.value="")},J0=w.useCallback(async A=>{Ol(!1),ke("Експорт зображення...","info",1500);try{const j=lg(e,H,Q,P),U=`${u}.${A.format}`;if(A.format==="svg")await mr(j,U,[{description:"SVG Зображення",accept:{"image/svg+xml":[".svg"]}}],"image/svg+xml");else{const $=await DD(A.format,j,H,Q,A.scale,A.quality),Ce=await(await fetch($)).blob(),_e=A.format==="png"?"image/png":"image/jpeg",et=A.format==="png"?"PNG Зображення":"JPEG Зображення";await mr(Ce,U,[{description:et,accept:{[_e]:[`.${A.format}`]}}],_e)}ke("Зображення успішно експортовано!","info")}catch(j){console.error("Помилка експорту:",j),ke("Не вдалося експортувати зображення.","error")}},[e,H,Q,P,u]),W0=w.useCallback(async A=>{try{const j=await Jf(A);j&&(ir(j,A.name,A.handle),Ho(A.handle))}catch(j){console.error("Не вдалося відкрити останній проєкт:",j),ke(`Не вдалося відкрити проєкт: ${j instanceof Error?j.message:"Невідома помилка"}.`,"error",5e3)}},[Jf,ir]),X0=w.useCallback(A=>{li({title:`Видалити "${A.name.replace(/\.vec\.json$/,"")}"?`,message:"Ця дія видалить проєкт лише зі списку останніх, а не сам файл. Ви впевнені?",onConfirm:()=>{Wf(A.name),ke("Проєкт видалено зі списку."),li(null)}})},[Wf]),K0=w.useCallback(()=>{Ec.length!==0&&li({title:"Очистити список останніх проєктів?",message:"Ця дія видалить усі проєкти зі списку, але не самі файли. Ви впевнені?",onConfirm:()=>{Xf(),ke("Список останніх проєктів очищено."),li(null)}})},[Xf,Ec.length]),Z0=w.useCallback(async A=>{Jl(!1);const j=b.map(U=>U.content).join(`
`);if(!j){ke("Немає коду для збереження.","error");return}try{await mr(j,`${A}.py`,[{description:"Python файл",accept:{"text/python":[".py"]}}],"text/python"),ke("Код успішно збережено.","info")}catch(U){console.error("Не вдалося зберегти код:",U),ke("Не вдалося зберегти код.","error")}},[b]),Q0=w.useCallback(A=>{const j=b.map(U=>U.content).join(`
`);if(!j){ke("Немає коду для запуску.","error");return}try{const $=new TextEncoder().encode(j);let te="";$.forEach(tt=>{te+=String.fromCharCode(tt)});const Ce=btoa(te),et=`https://yepython.pp.ua/?${A?"runcode":"code"}=${Ce}`;window.open(et,"_blank","noopener,noreferrer")}catch(U){console.error("Error creating online IDE link:",U),ke("Не вдалося створити посилання для онлайн IDE.","error")}},[b]),rm=w.useCallback(()=>{h&&er(h)},[h,er]),eC=w.useCallback(()=>{h&&zo(h)},[h,zo]),tC=w.useMemo(()=>nr?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(nr.type):!1,[nr]),ws=w.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(A=>{ke(`Не вдалося увійти в повноекранний режим: ${A.message}`,"error")})},[]);w.useEffect(()=>{const A=()=>{xc(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",A),()=>{document.removeEventListener("fullscreenchange",A)}},[]),w.useEffect(()=>{const A=U=>{if(U.key==="F11"){U.preventDefault(),ws();return}if(U.key==="Escape"&&oi&&(U.preventDefault(),ki.current===null&&(ki.current=window.setTimeout(()=>{document.exitFullscreen&&document.exitFullscreen(),ki.current=null},N0))),!(U.target.matches('input, textarea, [contenteditable="true"]')||g)){if(U.ctrlKey||U.metaKey)switch(U.code){case"KeyD":h&&(U.preventDefault(),er(h));return;case"KeyZ":U.preventDefault(),U.shiftKey?l&&i():o&&n();return;case"KeyY":U.preventDefault(),l&&i();return;case"KeyS":U.preventDefault(),Dc();return}if(h&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code)){U.preventDefault();const te=e.find($t=>$t.id===h);if(!te)return;const Ce=U.shiftKey?10:1;let _e=0,et=0;switch(U.code){case"ArrowUp":et=-Ce;break;case"ArrowDown":et=Ce;break;case"ArrowLeft":_e=-Ce;break;case"ArrowRight":_e=Ce;break}if(_e===0&&et===0)return;let tt;switch(te.type){case"line":tt={...te,points:[{...te.points[0]},{...te.points[1]}]};break;case"pencil":case"polyline":case"bezier":tt={...te,points:te.points.map($t=>({...$t}))};break;default:tt={...te}}switch(tt.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":tt.x+=_e,tt.y+=et;break;case"ellipse":case"polygon":case"star":tt.cx+=_e,tt.cy+=et;break;case"line":case"pencil":case"polyline":case"bezier":tt.points=tt.points.map($t=>({x:$t.x+_e,y:$t.y+et}));break}_i(tt);return}switch(U.code){case"KeyV":U.preventDefault(),tr("select");return;case"KeyA":U.preventDefault(),tr("edit-points");return;case"Delete":case"Backspace":U.preventDefault(),d==="edit-points"&&h&&R!==null?Mc(h,R):h&&zo(h);return}}},j=U=>{U.key==="Escape"&&ki.current!==null&&(clearTimeout(ki.current),ki.current=null)};return window.addEventListener("keydown",A),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",j),ki.current&&clearTimeout(ki.current)}},[h,d,R,Mc,zo,er,n,i,o,l,Dc,tr,e,_i,g,ws,oi]);const jc=w.useCallback(A=>{if(!vs.current)return;const{width:j,height:U}=vs.current.getBoundingClientRect(),{scale:$,x:te,y:Ce}=Dn,_e=j/2,et=U/2,tt=(_e-te)/$,$t=(et-Ce)/$,In=_e-tt*A,Go=et-$t*A;jn({scale:A,x:In,y:Go})},[Dn]),nC=w.useCallback(()=>{jc(1)},[jc]),iC=w.useCallback(()=>{h&&kc(h)},[h,kc]),oC=w.useCallback(()=>{hs("canvas"),ni(!0)},[]),lC=w.useCallback(()=>{Gf(A=>!A)},[]),rC=w.useCallback(()=>{qf(A=>!A)},[]),sC=w.useCallback(()=>{Dt("local"),Te(null),ke("Перемкнено на локальний генератор. Код буде оновлено автоматично.","info")},[]),aC=w.useCallback(()=>{hs("generator"),ni(!0)},[]),cC=w.useCallback(A=>{v(A),p(A)},[]),uC=w.useCallback(()=>{e.find(j=>j.id===g)&&t(e),v(null)},[g,e,t]),dC=w.useCallback(A=>{if(!g)return;const j=e.map($=>$.id===g&&$.type==="text"?{...$,text:A}:$),U=t._internal_setHistory;U?U($=>{const te=[...$];return te[te.length-1]=j,te}):t(j)},[g,e,t]),fC=w.useCallback(A=>{_(A),Vo(!1),ke(A?"Ключ API збережено для поточної сесії.":"Ключ API видалено.","info")},[]);return r.jsxs("div",{className:"h-screen bg-[var(--bg-app)] text-[var(--text-primary)] font-sans flex flex-col selection:bg-[var(--accent-primary)] selection:text-[var(--accent-text)] overflow-hidden",children:[Kf&&r.jsx("div",{className:"fixed inset-0 bg-[var(--bg-app)] flex items-center justify-center z-[100] text-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx(n1,{size:96,className:"text-[var(--text-tertiary)]"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] mb-4",children:"Розмір екрана замалий"}),r.jsxs("p",{className:"text-[var(--text-secondary)]",children:['На жаль, для коректної роботи редактора "ВереTkа" потрібен більший екран.',r.jsx("br",{}),"Будь ласка, відкрийте цей застосунок на комп'ютері або планшеті."]})]})]})}),r.jsxs("div",{className:Kf?"hidden":"h-full flex flex-col",children:[r.jsx("input",{type:"file",ref:Of,style:{display:"none"},accept:"image/png, image/jpeg, image/gif, image/webp",onChange:V0}),r.jsx("input",{type:"file",ref:Yf,style:{display:"none"},accept:".json,.vec.json",onChange:Y0}),Ie&&r.jsx("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 ${Ie.type==="error"?"bg-[var(--destructive-bg)]":"bg-[var(--accent-primary)]"} text-[var(--accent-text)] py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-down`,children:Ie.message}),r.jsx(qD,{onGenerate:Nc,showGenerateButton:Ze==="gemini",onNewProject:im,onSaveProject:Dc,canSave:rn&&(uo||!Fo),onSaveProjectAs:()=>ro(!0),onSaveAsTemplate:()=>Wl(!0),onLoadProject:lm,onExport:()=>Ol(!0),onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:rm,isShapeSelected:!!h,onDelete:eC,onConvertToPath:iC,canConvertToPath:tC,onFitCanvasToView:Ai,onToggleFullscreen:ws,isFullscreen:oi,showGrid:me,setShowGrid:L,snapToGrid:Le,setSnapToGrid:Wt,showAxes:Ve,setShowAxes:Kt,onOpenSettings:oC,theme:Mi,setTheme:Sc,projectName:u,isProjectActive:rn,onGoHome:B0,onOpenAbout:()=>ps(!0),onOpenHelp:()=>Xl(!0),onOpenFeedback:()=>Zl(!0)}),rn&&r.jsx(YD,{activeTool:d,setActiveTool:tr,drawMode:X,setDrawMode:I,isFillEnabled:F,setIsFillEnabled:se,isStrokeEnabled:ue,setIsStrokeEnabled:pe,fillColor:ae,setFillColor:ee,setPreviewFillColor:vc,strokeColor:ge,setStrokeColor:ve,setPreviewStrokeColor:Cc,strokeWidth:J,setStrokeWidth:ce,numberOfSides:le,setNumberOfSides:ne,onGenerate:Nc,showGenerateButton:Ze==="gemini",onClear:F0,isGenerating:Y,hasShapes:e.length>0,onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:rm,isShapeSelected:!!h,onOpenMobileLeft:lC,onOpenMobileRight:rC,theme:Mi,setTheme:Sc,onToggleFullscreen:ws,isFullscreen:oi,selectedShape:nr,updateShape:_i,setShapePreview:em,cancelShapePreview:Bo,textColor:Ee,setTextColor:fe,setPreviewTextColor:Ne,textFont:K,setTextFont:z,textFontSize:W,setTextFontSize:Se}),r.jsxs("main",{className:"flex-grow grid grid-cols-1 md:grid-cols-[380px_1fr] lg:grid-cols-[380px_1fr_260px] min-h-0",children:[rn&&r.jsxs("aside",{className:`${M0?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} md:static md:bg-transparent md:z-auto md:p-0 md:flex flex-col gap-4 min-h-0 bg-[var(--bg-primary)]/50 md:p-2`,children:[r.jsx("div",{className:"md:hidden flex justify-end mb-4",children:r.jsx("button",{onClick:()=>Gf(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:r.jsx(Ut,{})})}),r.jsx(OD,{activeTool:d,setActiveTool:tr}),r.jsx("div",{className:"flex-1 min-h-0 mt-2",children:r.jsx(u1,{codeLines:b,isLoading:Y,error:ye,onUpdate:Nc,onPreview:()=>wi(!0),hasUnsyncedChanges:$0,opacity:1,setOpacity:()=>{},selectedShapeId:h,highlightCodeOnSelection:Hn,setHighlightCodeOnSelection:ii,showLineNumbers:$e,setShowLineNumbers:it,showComments:at,setShowComments:kt,generatorType:Ze,onSwitchToLocalGenerator:sC,onOpenSettingsToGenerator:aC,onSaveCode:()=>Jl(!0),onOpenOrRunCodeOnline:Q0})})]}),r.jsx("div",{className:`flex flex-col min-w-0 min-h-0 p-2 md:p-4 ${!rn&&"md:col-start-1 lg:col-start-1 md:col-span-3 lg:col-span-3"}`,children:rn?r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:vs,className:"bg-[var(--bg-secondary)] rounded-lg shadow-inner flex-grow overflow-hidden relative grid",style:{gridTemplateRows:Ve?`${ho}px 1fr`:"1fr",gridTemplateColumns:Ve?`${ho}px 1fr`:"1fr"},children:[Ve&&r.jsx("div",{className:"bg-[var(--ruler-bg)] z-10 flex items-center justify-center p-1",children:r.jsx(C2,{size:16})}),Ve&&r.jsx(sg,{orientation:"horizontal",transform:Dn,length:Bn.width-ho,canvasSize:{width:H,height:Q}}),Ve&&r.jsx(sg,{orientation:"vertical",transform:Dn,length:Bn.height-ho,canvasSize:{width:H,height:Q}}),r.jsxs("div",{className:"relative overflow-hidden",style:{gridRow:Ve?2:"1 / -1",gridColumn:Ve?2:"1 / -1"},children:[nm&&r.jsx(FD,{shape:nm,viewTransform:Dn,onUpdateText:dC,onStopEditing:uC,canvasOffset:{left:Ve?ho:0,top:Ve?ho:0}}),r.jsx(a1,{width:H,height:Q,backgroundColor:Tc??P,shapes:D0,addShape:Ql,updateShape:_i,activeTool:d,drawMode:X,fillColor:F?so??ae:"none",strokeColor:ue?ao??ge:"none",strokeWidth:ue?J:0,textColor:Me??Ee,textFont:K,textFontSize:W,numberOfSides:le,selectedShapeId:h,onSelectShape:tm,isDrawingPolyline:T,polylinePoints:x,setPolylinePoints:y,onCompletePolyline:Ac,onCancelPolyline:U0,isDrawingBezier:C,bezierPoints:k,setBezierPoints:N,onCompleteBezier:P0,onCancelBezier:_c,showGrid:me,gridSize:oe,snapStep:Le?Xt:1,viewTransform:Dn,setViewTransform:jn,activePointIndex:R,setActivePointIndex:B,showCursorCoords:zt,showRotationAngle:Ke,pendingImage:A0,setPendingImage:bc,setCursorPos:w0,showNotification:ke,onStartInlineEdit:cC,inlineEditingShapeId:g})]}),r.jsx("button",{onClick:Ai,title:"Показати все полотно",className:"absolute bottom-4 right-4 z-10 p-2 bg-[var(--bg-primary)] text-[var(--text-secondary)] rounded-full shadow-lg hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:r.jsx(T2,{})})]}),r.jsx(jD,{zoomLevel:Dn.scale,cursorPos:S0,onZoomChange:jc,onResetZoom:nC})]}):r.jsx(ID,{onCreateNew:im,onLoadProject:lm,recentProjects:Ec,onOpenRecent:W0,onRemoveProject:X0,onClearAllProjects:K0})}),rn&&r.jsxs("aside",{className:`${k0?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} lg:static lg:bg-transparent lg:z-auto lg:p-0 lg:flex flex-col gap-4 overflow-y-auto md:p-2`,children:[r.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:r.jsx("button",{onClick:()=>qf(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:r.jsx(Ut,{})})}),r.jsx("div",{className:"flex-1 min-h-0",children:r.jsx(g1,{shapes:e,selectedShapeId:h,onSelectShape:tm,onDeleteShape:zo,onMoveShape:I0,onUpdateShape:_i,onReorderShape:L0,showTkinterNames:Vt})}),r.jsx("div",{className:"flex-[2_2_0%] min-h-0",children:r.jsx(h1,{selectedShape:nr,updateShape:_i,deleteShape:zo,duplicateShape:er,activeTool:d,activePointIndex:R,setActivePointIndex:B,deletePoint:Mc,addPoint:j0,convertToPath:kc,showNotification:ke,setShapePreview:em,cancelShapePreview:Bo})})]})]}),ti&&r.jsx(yD,{initialTab:hc,onClose:()=>ni(!1),onOpenApiKeyModal:()=>Vo(!0),onDeleteTemplate:q0,onRenameTemplate:O0,templates:Ts,canvasWidth:H,setCanvasWidth:be,canvasHeight:Q,setCanvasHeight:D,canvasBgColor:P,setCanvasBgColor:A=>{Z(A),xs(null)},setPreviewCanvasBgColor:xs,canvasVarName:q,setCanvasVarName:V,gridSize:oe,setGridSize:he,gridSnapStep:Xt,setGridSnapStep:xn,showTkinterNames:Vt,setShowTkinterNames:Mt,showAxes:Ve,setShowAxes:Kt,showCursorCoords:zt,setShowCursorCoords:ht,showRotationAngle:Ke,setShowRotationAngle:je,showLineNumbers:$e,setShowLineNumbers:it,generatorType:Ze,setGeneratorType:Dt,highlightCodeOnSelection:Hn,setHighlightCodeOnSelection:ii,autoGenerateComments:Zt,setAutoGenerateComments:Ei}),Po&&r.jsx(MD,{isOpen:Po,onClose:()=>Vo(!1),onSave:fC,currentApiKey:E}),He&&st&&r.jsx(xD,{projectName:u,shapes:st,width:H,height:Q,backgroundColor:P,onClose:()=>wi(!1)}),pc&&r.jsx(vD,{onClose:()=>Ol(!1),onExport:J0}),gc&&r.jsx(CD,{onClose:()=>Uo(!1),onCreate:H0,initialSettings:{projectName:"Новий малюнок. ВереTkа",width:H,height:Q,bgColor:"#ffffff",canvasVarName:"c"},templates:Ts}),Cs&&r.jsx(TD,{isOpen:!0,title:Cs.title,message:Cs.message,onConfirm:Cs.onConfirm,onClose:()=>li(null)}),Yl&&r.jsx(bD,{isOpen:!0,onClose:()=>ro(!1),onSave:z0,currentProjectName:u}),zf&&r.jsx($D,{isOpen:!0,onClose:()=>Jl(!1),onSave:Z0,currentProjectName:u.replace(/\. ВереTkа$/,"")}),yc&&r.jsx(HD,{onClose:()=>Wl(!1),onSave:G0}),ln&&r.jsx(SD,{isOpen:ln,onClose:()=>ps(!1),version:ug}),gs&&r.jsx(ED,{isOpen:gs,onClose:()=>Xl(!1)}),Kl&&r.jsx(AD,{onClose:()=>Zl(!1),appVersion:ug})]})]})}const b0=document.getElementById("root");if(!b0)throw new Error("Could not find root element to mount to");const WD=c2.createRoot(b0);WD.render(r.jsx(wt.StrictMode,{children:r.jsx(JD,{})}));
