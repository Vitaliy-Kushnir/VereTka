(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lp={exports:{}},Pa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0=Symbol.for("react.transitional.element"),Q0=Symbol.for("react.fragment");function rp(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:Z0,type:e,key:i,ref:t!==void 0?t:null,props:n}}Pa.Fragment=Q0;Pa.jsx=rp;Pa.jsxs=rp;lp.exports=Pa;var r=lp.exports,sp={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.transitional.element"),eC=Symbol.for("react.portal"),tC=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),iC=Symbol.for("react.profiler"),oC=Symbol.for("react.consumer"),lC=Symbol.for("react.context"),rC=Symbol.for("react.forward_ref"),sC=Symbol.for("react.suspense"),aC=Symbol.for("react.memo"),ap=Symbol.for("react.lazy"),tm=Symbol.iterator;function cC(e){return e===null||typeof e!="object"?null:(e=tm&&e[tm]||e["@@iterator"],typeof e=="function"?e:null)}var cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},up=Object.assign,dp={};function jl(e,t,n){this.props=e,this.context=t,this.refs=dp,this.updater=n||cp}jl.prototype.isReactComponent={};jl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fp(){}fp.prototype=jl.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=dp,this.updater=n||cp}var Ad=Md.prototype=new fp;Ad.constructor=Md;up(Ad,jl.prototype);Ad.isPureReactComponent=!0;var nm=Array.isArray,ut={H:null,A:null,T:null,S:null,V:null},mp=Object.prototype.hasOwnProperty;function kd(e,t,n,i,o,l){return n=l.ref,{$$typeof:Ed,type:e,key:t,ref:n!==void 0?n:null,props:l}}function uC(e,t){return kd(e.type,t,void 0,void 0,void 0,e.props)}function _d(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ed}function dC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var im=/\/+/g;function _c(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dC(""+e.key):t.toString(36)}function om(){}function fC(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(om,om):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function qo(e,t,n,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Ed:case eC:c=!0;break;case ap:return c=e._init,qo(c(e._payload),t,n,i,o)}}if(c)return o=o(e),c=i===""?"."+_c(e,0):i,nm(o)?(n="",c!=null&&(n=c.replace(im,"$&/")+"/"),qo(o,t,n,"",function(d){return d})):o!=null&&(_d(o)&&(o=uC(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(im,"$&/")+"/")+c)),t.push(o)),1;c=0;var u=i===""?".":i+":";if(nm(e))for(var f=0;f<e.length;f++)i=e[f],l=u+_c(i,f),c+=qo(i,t,n,l,o);else if(f=cC(e),typeof f=="function")for(e=f.call(e),f=0;!(i=e.next()).done;)i=i.value,l=u+_c(i,f++),c+=qo(i,t,n,l,o);else if(l==="object"){if(typeof e.then=="function")return qo(fC(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function Cs(e,t,n){if(e==null)return e;var i=[],o=0;return qo(e,i,"","",function(l){return t.call(n,l,o++)}),i}function mC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hC(){}De.Children={map:Cs,forEach:function(e,t,n){Cs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cs(e,function(){t++}),t},toArray:function(e){return Cs(e,function(t){return t})||[]},only:function(e){if(!_d(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=jl;De.Fragment=tC;De.Profiler=iC;De.PureComponent=Md;De.StrictMode=nC;De.Suspense=sC;De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ut;De.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ut.H.useMemoCache(e)}};De.cache=function(e){return function(){return e.apply(null,arguments)}};De.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=up({},e.props),o=e.key,l=void 0;if(t!=null)for(c in t.ref!==void 0&&(l=void 0),t.key!==void 0&&(o=""+t.key),t)!mp.call(t,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&t.ref===void 0||(i[c]=t[c]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return kd(e.type,o,void 0,void 0,l,i)};De.createContext=function(e){return e={$$typeof:lC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:oC,_context:e},e};De.createElement=function(e,t,n){var i,o={},l=null;if(t!=null)for(i in t.key!==void 0&&(l=""+t.key),t)mp.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return kd(e,l,void 0,void 0,null,o)};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:rC,render:e}};De.isValidElement=_d;De.lazy=function(e){return{$$typeof:ap,_payload:{_status:-1,_result:e},_init:mC}};De.memo=function(e,t){return{$$typeof:aC,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=ut.T,n={};ut.T=n;try{var i=e(),o=ut.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(hC,lm)}catch(l){lm(l)}finally{ut.T=t}};De.unstable_useCacheRefresh=function(){return ut.H.useCacheRefresh()};De.use=function(e){return ut.H.use(e)};De.useActionState=function(e,t,n){return ut.H.useActionState(e,t,n)};De.useCallback=function(e,t){return ut.H.useCallback(e,t)};De.useContext=function(e){return ut.H.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e,t){return ut.H.useDeferredValue(e,t)};De.useEffect=function(e,t,n){var i=ut.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};De.useId=function(){return ut.H.useId()};De.useImperativeHandle=function(e,t,n){return ut.H.useImperativeHandle(e,t,n)};De.useInsertionEffect=function(e,t){return ut.H.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return ut.H.useLayoutEffect(e,t)};De.useMemo=function(e,t){return ut.H.useMemo(e,t)};De.useOptimistic=function(e,t){return ut.H.useOptimistic(e,t)};De.useReducer=function(e,t,n){return ut.H.useReducer(e,t,n)};De.useRef=function(e){return ut.H.useRef(e)};De.useState=function(e){return ut.H.useState(e)};De.useSyncExternalStore=function(e,t,n){return ut.H.useSyncExternalStore(e,t,n)};De.useTransition=function(){return ut.H.useTransition()};De.version="19.1.1";sp.exports=De;var E=sp.exports;const Mt=op(E);var hp={exports:{}},Va={},gp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,fe){var he=te.length;te.push(fe);e:for(;0<he;){var W=he-1>>>1,O=te[W];if(0<o(O,fe))te[W]=fe,te[he]=O,he=W;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var fe=te[0],he=te.pop();if(he!==fe){te[0]=he;e:for(var W=0,O=te.length,re=O>>>1;W<re;){var Ce=2*(W+1)-1,ke=te[Ce],ye=Ce+1,we=te[ye];if(0>o(ke,he))ye<O&&0>o(we,ke)?(te[W]=we,te[ye]=he,W=ye):(te[W]=ke,te[Ce]=he,W=Ce);else if(ye<O&&0>o(we,he))te[W]=we,te[ye]=he,W=ye;else break e}}return fe}function o(te,fe){var he=te.sortIndex-fe.sortIndex;return he!==0?he:te.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],m=1,h=null,g=3,p=!1,b=!1,S=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function C(te){for(var fe=n(d);fe!==null;){if(fe.callback===null)i(d);else if(fe.startTime<=te)i(d),fe.sortIndex=fe.expirationTime,t(f,fe);else break;fe=n(d)}}function A(te){if(S=!1,C(te),!b)if(n(f)!==null)b=!0,N||(N=!0,ee());else{var fe=n(d);fe!==null&&ae(A,fe.startTime-te)}}var N=!1,R=-1,V=5,K=-1;function U(){return M?!0:!(e.unstable_now()-K<V)}function I(){if(M=!1,N){var te=e.unstable_now();K=te;var fe=!0;try{e:{b=!1,S&&(S=!1,y(R),R=-1),p=!0;var he=g;try{t:{for(C(te),h=n(f);h!==null&&!(h.expirationTime>te&&U());){var W=h.callback;if(typeof W=="function"){h.callback=null,g=h.priorityLevel;var O=W(h.expirationTime<=te);if(te=e.unstable_now(),typeof O=="function"){h.callback=O,C(te),fe=!0;break t}h===n(f)&&i(f),C(te)}else i(f);h=n(f)}if(h!==null)fe=!0;else{var re=n(d);re!==null&&ae(A,re.startTime-te),fe=!1}}break e}finally{h=null,g=he,p=!1}fe=void 0}}finally{fe?ee():N=!1}}}var ee;if(typeof T=="function")ee=function(){T(I)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,_e=be.port2;be.port1.onmessage=I,ee=function(){_e.postMessage(null)}}else ee=function(){x(I,0)};function ae(te,fe){R=x(function(){te(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(te){switch(g){case 1:case 2:case 3:var fe=3;break;default:fe=g}var he=g;g=fe;try{return te()}finally{g=he}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var he=g;g=te;try{return fe()}finally{g=he}},e.unstable_scheduleCallback=function(te,fe,he){var W=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?W+he:W):he=W,te){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=he+O,te={id:m++,callback:fe,priorityLevel:te,startTime:he,expirationTime:O,sortIndex:-1},he>W?(te.sortIndex=he,t(d,te),n(f)===null&&te===n(d)&&(S?(y(R),R=-1):S=!0,ae(A,he-W))):(te.sortIndex=O,t(f,te),b||p||(b=!0,N||(N=!0,ee()))),te},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(te){var fe=g;return function(){var he=g;g=fe;try{return te.apply(this,arguments)}finally{g=he}}}})(pp);gp.exports=pp;var gC=gp.exports,yp={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=E;function xp(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Mi(){}var Ot={d:{f:Mi,r:function(){throw Error(xp(522))},D:Mi,C:Mi,L:Mi,m:Mi,X:Mi,S:Mi,M:Mi},p:0,findDOMNode:null},yC=Symbol.for("react.portal");function xC(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yC,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var gr=pC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function $a(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ot;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(xp(299));return xC(e,t,null,n)};Yt.flushSync=function(e){var t=gr.T,n=Ot.p;try{if(gr.T=null,Ot.p=2,e)return e()}finally{gr.T=t,Ot.p=n,Ot.d.f()}};Yt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ot.d.C(e,t))};Yt.prefetchDNS=function(e){typeof e=="string"&&Ot.d.D(e)};Yt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=$a(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ot.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:l}):n==="script"&&Ot.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Yt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=$a(t.as,t.crossOrigin);Ot.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ot.d.M(e)};Yt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=$a(n,t.crossOrigin);Ot.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Yt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=$a(t.as,t.crossOrigin);Ot.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ot.d.m(e)};Yt.requestFormReset=function(e){Ot.d.r(e)};Yt.unstable_batchedUpdates=function(e,t){return e(t)};Yt.useFormState=function(e,t,n){return gr.H.useFormState(e,t,n)};Yt.useFormStatus=function(){return gr.H.useHostTransitionStatus()};Yt.version="19.1.1";function vp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vp)}catch(e){console.error(e)}}vp(),yp.exports=Yt;var vC=yp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At=gC,Cp=E,CC=vC;function F(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Tp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rm(e){if(Yr(e)!==e)throw Error(F(188))}function TC(e){var t=e.alternate;if(!t){if(t=Yr(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return rm(o),e;if(l===i)return rm(o),t;l=l.sibling}throw Error(F(188))}if(n.return!==i.return)n=o,i=l;else{for(var c=!1,u=o.child;u;){if(u===n){c=!0,n=o,i=l;break}if(u===i){c=!0,i=o,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,i=o;break}if(u===i){c=!0,i=l,n=o;break}u=u.sibling}if(!c)throw Error(F(189))}}if(n.alternate!==i)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Sp(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Sp(e),t!==null)return t;e=e.sibling}return null}var rt=Object.assign,bC=Symbol.for("react.element"),Ts=Symbol.for("react.transitional.element"),dr=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),wp=Symbol.for("react.strict_mode"),gu=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),Ep=Symbol.for("react.consumer"),ri=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),pu=Symbol.for("react.suspense"),yu=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),xu=Symbol.for("react.activity"),wC=Symbol.for("react.memo_cache_sentinel"),sm=Symbol.iterator;function er(e){return e===null||typeof e!="object"?null:(e=sm&&e[sm]||e["@@iterator"],typeof e=="function"?e:null)}var EC=Symbol.for("react.client.reference");function vu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===EC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wo:return"Fragment";case gu:return"Profiler";case wp:return"StrictMode";case pu:return"Suspense";case yu:return"SuspenseList";case xu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case dr:return"Portal";case ri:return(e.displayName||"Context")+".Provider";case Ep:return(e._context.displayName||"Context")+".Consumer";case Nd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rd:return t=e.displayName||null,t!==null?t:vu(e.type)||"Memo";case Ni:t=e._payload,e=e._init;try{return vu(e(t))}catch{}}return null}var fr=Array.isArray,Se=Cp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=CC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,po={pending:!1,data:null,method:null,action:null},Cu=[],Ko=-1;function Xn(e){return{current:e}}function Dt(e){0>Ko||(e.current=Cu[Ko],Cu[Ko]=null,Ko--)}function dt(e,t){Ko++,Cu[Ko]=e.current,e.current=t}var On=Xn(null),Rr=Xn(null),Bi=Xn(null),ia=Xn(null);function oa(e,t){switch(dt(Bi,t),dt(Rr,e),dt(On,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?fh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=fh(t),e=zx(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Dt(On),dt(On,e)}function Tl(){Dt(On),Dt(Rr),Dt(Bi)}function Tu(e){e.memoizedState!==null&&dt(ia,e);var t=On.current,n=zx(t,e.type);t!==n&&(dt(Rr,e),dt(On,n))}function la(e){Rr.current===e&&(Dt(On),Dt(Rr)),ia.current===e&&(Dt(ia),Br._currentValue=po)}var bu=Object.prototype.hasOwnProperty,Dd=At.unstable_scheduleCallback,Nc=At.unstable_cancelCallback,MC=At.unstable_shouldYield,AC=At.unstable_requestPaint,Yn=At.unstable_now,kC=At.unstable_getCurrentPriorityLevel,Mp=At.unstable_ImmediatePriority,Ap=At.unstable_UserBlockingPriority,ra=At.unstable_NormalPriority,_C=At.unstable_LowPriority,kp=At.unstable_IdlePriority,NC=At.log,RC=At.unstable_setDisableYieldValue,Jr=null,dn=null;function Ui(e){if(typeof NC=="function"&&RC(e),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Jr,e)}catch{}}var fn=Math.clz32?Math.clz32:IC,DC=Math.log,jC=Math.LN2;function IC(e){return e>>>=0,e===0?32:31-(DC(e)/jC|0)|0}var bs=256,Ss=4194304;function mo(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ha(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,l=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var u=i&134217727;return u!==0?(i=u&~l,i!==0?o=mo(i):(c&=u,c!==0?o=mo(c):n||(n=u&~e,n!==0&&(o=mo(n))))):(u=i&~l,u!==0?o=mo(u):c!==0?o=mo(c):n||(n=i&~e,n!==0&&(o=mo(n)))),o===0?0:t!==0&&t!==o&&!(t&l)&&(l=o&-o,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:o}function Xr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function LC(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _p(){var e=bs;return bs<<=1,!(bs&4194048)&&(bs=256),e}function Np(){var e=Ss;return Ss<<=1,!(Ss&62914560)&&(Ss=4194304),e}function Rc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function UC(e,t,n,i,o,l){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var u=e.entanglements,f=e.expirationTimes,d=e.hiddenUpdates;for(n=c&~n;0<n;){var m=31-fn(n),h=1<<m;u[m]=0,f[m]=-1;var g=d[m];if(g!==null)for(d[m]=null,m=0;m<g.length;m++){var p=g[m];p!==null&&(p.lane&=-536870913)}n&=~h}i!==0&&Rp(e,i,0),l!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=l&~(c&~t))}function Rp(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-fn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function Dp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-fn(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function jd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Id(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function jp(){var e=Fe.p;return e!==0?e:(e=window.event,e===void 0?32:Zx(e.type))}function PC(e,t){var n=Fe.p;try{return Fe.p=e,t()}finally{Fe.p=n}}var Qi=Math.random().toString(36).slice(2),$t="__reactFiber$"+Qi,Zt="__reactProps$"+Qi,Il="__reactContainer$"+Qi,Su="__reactEvents$"+Qi,VC="__reactListeners$"+Qi,$C="__reactHandles$"+Qi,am="__reactResources$"+Qi,Kr="__reactMarker$"+Qi;function Ld(e){delete e[$t],delete e[Zt],delete e[Su],delete e[VC],delete e[$C]}function Zo(e){var t=e[$t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Il]||n[$t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gh(e);e!==null;){if(n=e[$t])return n;e=gh(e)}return t}e=n,n=e.parentNode}return null}function Ll(e){if(e=e[$t]||e[Il]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function mr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(F(33))}function cl(e){var t=e[am];return t||(t=e[am]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Nt(e){e[Kr]=!0}var Ip=new Set,Lp={};function ko(e,t){bl(e,t),bl(e+"Capture",t)}function bl(e,t){for(Lp[e]=t,e=0;e<t.length;e++)Ip.add(t[e])}var HC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cm={},um={};function BC(e){return bu.call(um,e)?!0:bu.call(cm,e)?!1:HC.test(e)?um[e]=!0:(cm[e]=!0,!1)}function Bs(e,t,n){if(BC(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ws(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ti(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Dc,dm;function Oo(e){if(Dc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dc=t&&t[1]||"",dm=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dc+e+dm}var jc=!1;function Ic(e,t){if(!e||jc)return"";jc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(p){var g=p}Reflect.construct(e,[],h)}else{try{h.call()}catch(p){g=p}e.call(h.prototype)}}else{try{throw Error()}catch(p){g=p}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(p){if(p&&g&&typeof p.stack=="string")return[p.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),c=l[0],u=l[1];if(c&&u){var f=c.split(`
`),d=u.split(`
`);for(o=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(i===f.length||o===d.length)for(i=f.length-1,o=d.length-1;1<=i&&0<=o&&f[i]!==d[o];)o--;for(;1<=i&&0<=o;i--,o--)if(f[i]!==d[o]){if(i!==1||o!==1)do if(i--,o--,0>o||f[i]!==d[o]){var m=`
`+f[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=o);break}}}finally{jc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Oo(n):""}function zC(e){switch(e.tag){case 26:case 27:case 5:return Oo(e.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 15:return Ic(e.type,!1);case 11:return Ic(e.type.render,!1);case 1:return Ic(e.type,!0);case 31:return Oo("Activity");default:return""}}function fm(e){try{var t="";do t+=zC(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function bn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Up(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GC(e){var t=Up(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){i=""+c,l.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sa(e){e._valueTracker||(e._valueTracker=GC(e))}function Pp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Up(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function aa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var FC=/[\n"\\]/g;function En(e){return e.replace(FC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wu(e,t,n,i,o,l,c,u){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bn(t)):e.value!==""+bn(t)&&(e.value=""+bn(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Eu(e,c,bn(t)):n!=null?Eu(e,c,bn(n)):i!=null&&e.removeAttribute("value"),o==null&&l!=null&&(e.defaultChecked=!!l),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.name=""+bn(u):e.removeAttribute("name")}function Vp(e,t,n,i,o,l,c,u){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;n=n!=null?""+bn(n):"",t=t!=null?""+bn(t):n,u||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=u?e.checked:!!i,e.defaultChecked=!!i,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function Eu(e,t,n){t==="number"&&aa(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ul(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $p(e,t,n){if(t!=null&&(t=""+bn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+bn(n):""}function Hp(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(F(92));if(fr(i)){if(1<i.length)throw Error(F(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=bn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mm(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||qC.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Bp(e,t,n){if(t!=null&&typeof t!="object")throw Error(F(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&mm(e,o,i)}else for(var l in t)t.hasOwnProperty(l)&&mm(e,l,t[l])}function Ud(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zs(e){return YC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mu=null;function Pd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qo=null,dl=null;function hm(e){var t=Ll(e);if(t&&(e=t.stateNode)){var n=e[Zt]||null;e:switch(e=t.stateNode,t.type){case"input":if(wu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+En(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[Zt]||null;if(!o)throw Error(F(90));wu(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Pp(i)}break e;case"textarea":$p(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ul(e,!!n.multiple,t,!1)}}}var Lc=!1;function zp(e,t,n){if(Lc)return e(t,n);Lc=!0;try{var i=e(t);return i}finally{if(Lc=!1,(Qo!==null||dl!==null)&&(Wa(),Qo&&(t=Qo,e=dl,dl=Qo=null,hm(t),e)))for(t=0;t<e.length;t++)hm(e[t])}}function Dr(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Zt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=!1;if(mi)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){Au=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{Au=!1}var Pi=null,Vd=null,Gs=null;function Gp(){if(Gs)return Gs;var e,t=Vd,n=t.length,i,o="value"in Pi?Pi.value:Pi.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===o[l-i];i++);return Gs=o.slice(e,1<i?1-i:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Es(){return!0}function gm(){return!1}function en(e){function t(n,i,o,l,c){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Es:gm,this.isPropagationStopped=gm,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=en(_o),Zr=rt({},_o,{view:0,detail:0}),JC=en(Zr),Uc,Pc,nr,za=rt({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nr&&(nr&&e.type==="mousemove"?(Uc=e.screenX-nr.screenX,Pc=e.screenY-nr.screenY):Pc=Uc=0,nr=e),Uc)},movementY:function(e){return"movementY"in e?e.movementY:Pc}}),pm=en(za),XC=rt({},za,{dataTransfer:0}),WC=en(XC),KC=rt({},Zr,{relatedTarget:0}),Vc=en(KC),ZC=rt({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=en(ZC),eT=rt({},_o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tT=en(eT),nT=rt({},_o,{data:0}),ym=en(nT),iT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lT[e])?!!t[e]:!1}function $d(){return rT}var sT=rt({},Zr,{key:function(e){if(e.key){var t=iT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aT=en(sT),cT=rt({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=en(cT),uT=rt({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),dT=en(uT),fT=rt({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),mT=en(fT),hT=rt({},za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=en(hT),pT=rt({},_o,{newState:0,oldState:0}),yT=en(pT),xT=[9,13,27,32],Hd=mi&&"CompositionEvent"in window,pr=null;mi&&"documentMode"in document&&(pr=document.documentMode);var vT=mi&&"TextEvent"in window&&!pr,Fp=mi&&(!Hd||pr&&8<pr&&11>=pr),vm=" ",Cm=!1;function qp(e,t){switch(e){case"keyup":return xT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var el=!1;function CT(e,t){switch(e){case"compositionend":return Op(t);case"keypress":return t.which!==32?null:(Cm=!0,vm);case"textInput":return e=t.data,e===vm&&Cm?null:e;default:return null}}function TT(e,t){if(el)return e==="compositionend"||!Hd&&qp(e,t)?(e=Gp(),Gs=Vd=Pi=null,el=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fp&&t.locale!=="ko"?null:t.data;default:return null}}var bT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bT[e.type]:t==="textarea"}function Yp(e,t,n,i){Qo?dl?dl.push(i):dl=[i]:Qo=i,t=Ma(t,"onChange"),0<t.length&&(n=new Ba("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var yr=null,jr=null;function ST(e){$x(e,0)}function Ga(e){var t=mr(e);if(Pp(t))return e}function bm(e,t){if(e==="change")return t}var Jp=!1;if(mi){var $c;if(mi){var Hc="oninput"in document;if(!Hc){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),Hc=typeof Sm.oninput=="function"}$c=Hc}else $c=!1;Jp=$c&&(!document.documentMode||9<document.documentMode)}function wm(){yr&&(yr.detachEvent("onpropertychange",Xp),jr=yr=null)}function Xp(e){if(e.propertyName==="value"&&Ga(jr)){var t=[];Yp(t,jr,e,Pd(e)),zp(ST,t)}}function wT(e,t,n){e==="focusin"?(wm(),yr=t,jr=n,yr.attachEvent("onpropertychange",Xp)):e==="focusout"&&wm()}function ET(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ga(jr)}function MT(e,t){if(e==="click")return Ga(t)}function AT(e,t){if(e==="input"||e==="change")return Ga(t)}function kT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:kT;function Ir(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!bu.call(t,o)||!gn(e[o],t[o]))return!1}return!0}function Em(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mm(e,t){var n=Em(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Em(n)}}function Wp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=aa(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=aa(e.document)}return t}function Bd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _T=mi&&"documentMode"in document&&11>=document.documentMode,tl=null,ku=null,xr=null,_u=!1;function Am(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_u||tl==null||tl!==aa(i)||(i=tl,"selectionStart"in i&&Bd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xr&&Ir(xr,i)||(xr=i,i=Ma(ku,"onSelect"),0<i.length&&(t=new Ba("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=tl)))}function co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nl={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},Bc={},Zp={};mi&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function No(e){if(Bc[e])return Bc[e];if(!nl[e])return e;var t=nl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zp)return Bc[e]=t[n];return e}var Qp=No("animationend"),ey=No("animationiteration"),ty=No("animationstart"),NT=No("transitionrun"),RT=No("transitionstart"),DT=No("transitioncancel"),ny=No("transitionend"),iy=new Map,Nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nu.push("scrollEnd");function Vn(e,t){iy.set(e,t),ko(t,[e])}var km=new WeakMap;function Mn(e,t){if(typeof e=="object"&&e!==null){var n=km.get(e);return n!==void 0?n:(t={value:e,source:t,stack:fm(t)},km.set(e,t),t)}return{value:e,source:t,stack:fm(t)}}var Tn=[],il=0,zd=0;function Fa(){for(var e=il,t=zd=il=0;t<e;){var n=Tn[t];Tn[t++]=null;var i=Tn[t];Tn[t++]=null;var o=Tn[t];Tn[t++]=null;var l=Tn[t];if(Tn[t++]=null,i!==null&&o!==null){var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}l!==0&&oy(n,o,l)}}function qa(e,t,n,i){Tn[il++]=e,Tn[il++]=t,Tn[il++]=n,Tn[il++]=i,zd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Gd(e,t,n,i){return qa(e,t,n,i),ca(e)}function Ul(e,t){return qa(e,null,null,t),ca(e)}function oy(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,l=e.return;l!==null;)l.childLanes|=n,i=l.alternate,i!==null&&(i.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(o=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,o&&t!==null&&(o=31-fn(n),e=l.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),l):null}function ca(e){if(50<kr)throw kr=0,Ku=null,Error(F(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ol={};function jT(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,n,i){return new jT(e,t,n,i)}function Fd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function di(e,t){var n=e.alternate;return n===null?(n=un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ly(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qs(e,t,n,i,o,l){var c=0;if(i=e,typeof e=="function")Fd(e)&&(c=1);else if(typeof e=="string")c=Lb(e,n,On.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case xu:return e=un(31,n,t,o),e.elementType=xu,e.lanes=l,e;case Wo:return yo(n.children,o,l,t);case wp:c=8,o|=24;break;case gu:return e=un(12,n,t,o|2),e.elementType=gu,e.lanes=l,e;case pu:return e=un(13,n,t,o),e.elementType=pu,e.lanes=l,e;case yu:return e=un(19,n,t,o),e.elementType=yu,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SC:case ri:c=10;break e;case Ep:c=9;break e;case Nd:c=11;break e;case Rd:c=14;break e;case Ni:c=16,i=null;break e}c=29,n=Error(F(130,e===null?"null":typeof e,"")),i=null}return t=un(c,n,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function yo(e,t,n,i){return e=un(7,e,i,t),e.lanes=n,e}function zc(e,t,n){return e=un(6,e,null,t),e.lanes=n,e}function Gc(e,t,n){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ll=[],rl=0,ua=null,da=0,Sn=[],wn=0,xo=null,si=1,ai="";function ho(e,t){ll[rl++]=da,ll[rl++]=ua,ua=e,da=t}function ry(e,t,n){Sn[wn++]=si,Sn[wn++]=ai,Sn[wn++]=xo,xo=e;var i=si;e=ai;var o=32-fn(i)-1;i&=~(1<<o),n+=1;var l=32-fn(t)+o;if(30<l){var c=o-o%5;l=(i&(1<<c)-1).toString(32),i>>=c,o-=c,si=1<<32-fn(t)+o|n<<o|i,ai=l+e}else si=1<<l|n<<o|i,ai=e}function qd(e){e.return!==null&&(ho(e,1),ry(e,1,0))}function Od(e){for(;e===ua;)ua=ll[--rl],ll[rl]=null,da=ll[--rl],ll[rl]=null;for(;e===xo;)xo=Sn[--wn],Sn[wn]=null,ai=Sn[--wn],Sn[wn]=null,si=Sn[--wn],Sn[wn]=null}var Ft=null,gt=null,Ge=!1,vo=null,Fn=!1,Ru=Error(F(519));function So(e){var t=Error(F(418,""));throw Lr(Mn(t,e)),Ru}function _m(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[$t]=e,t[Zt]=i,n){case"dialog":Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":case"embed":Ve("load",t);break;case"video":case"audio":for(n=0;n<Vr.length;n++)Ve(Vr[n],t);break;case"source":Ve("error",t);break;case"img":case"image":case"link":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"input":Ve("invalid",t),Vp(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),sa(t);break;case"select":Ve("invalid",t);break;case"textarea":Ve("invalid",t),Hp(t,i.value,i.defaultValue,i.children),sa(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Bx(t.textContent,n)?(i.popover!=null&&(Ve("beforetoggle",t),Ve("toggle",t)),i.onScroll!=null&&Ve("scroll",t),i.onScrollEnd!=null&&Ve("scrollend",t),i.onClick!=null&&(t.onclick=Qa),t=!0):t=!1,t||So(e)}function Nm(e){for(Ft=e.return;Ft;)switch(Ft.tag){case 5:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Ft=Ft.return}}function ir(e){if(e!==Ft)return!1;if(!Ge)return Nm(e),Ge=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&gt&&So(e),Nm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){gt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}gt=null}}else t===27?(t=gt,eo(e.type)?(e=rd,rd=null,gt=e):gt=t):gt=Ft?Pn(e.stateNode.nextSibling):null;return!0}function Qr(){gt=Ft=null,Ge=!1}function Rm(){var e=vo;return e!==null&&(Kt===null?Kt=e:Kt.push.apply(Kt,e),vo=null),e}function Lr(e){vo===null?vo=[e]:vo.push(e)}var Du=Xn(null),Ro=null,ci=null;function Di(e,t,n){dt(Du,t._currentValue),t._currentValue=n}function fi(e){e._currentValue=Du.current,Dt(Du)}function ju(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Iu(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){var c=o.child;l=l.firstContext;e:for(;l!==null;){var u=l;l=o;for(var f=0;f<t.length;f++)if(u.context===t[f]){l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),ju(l.return,n,e),i||(c=null);break e}l=u.next}}else if(o.tag===18){if(c=o.return,c===null)throw Error(F(341));c.lanes|=n,l=c.alternate,l!==null&&(l.lanes|=n),ju(c,n,e),c=null}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}}function es(e,t,n,i){e=null;for(var o=t,l=!1;o!==null;){if(!l){if(o.flags&524288)l=!0;else if(o.flags&262144)break}if(o.tag===10){var c=o.alternate;if(c===null)throw Error(F(387));if(c=c.memoizedProps,c!==null){var u=o.type;gn(o.pendingProps.value,c.value)||(e!==null?e.push(u):e=[u])}}else if(o===ia.current){if(c=o.alternate,c===null)throw Error(F(387));c.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Br):e=[Br])}o=o.return}e!==null&&Iu(t,e,n,i),t.flags|=262144}function fa(e){for(e=e.firstContext;e!==null;){if(!gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wo(e){Ro=e,ci=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return sy(Ro,e)}function Ms(e,t){return Ro===null&&wo(e),sy(e,t)}function sy(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ci===null){if(e===null)throw Error(F(308));ci=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ci=ci.next=t;return n}var IT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},LT=At.unstable_scheduleCallback,UT=At.unstable_NormalPriority,wt={$$typeof:ri,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new IT,data:new Map,refCount:0}}function ts(e){e.refCount--,e.refCount===0&&LT(UT,function(){e.controller.abort()})}var vr=null,Lu=0,wl=0,fl=null;function PT(e,t){if(vr===null){var n=vr=[];Lu=0,wl=yf(),fl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Lu++,t.then(Dm,Dm),t}function Dm(){if(--Lu===0&&vr!==null){fl!==null&&(fl.status="fulfilled");var e=vr;vr=null,wl=0,fl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function VT(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var jm=Se.S;Se.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&PT(e,t),jm!==null&&jm(e,t)};var Co=Xn(null);function Jd(){var e=Co.current;return e!==null?e:et.pooledCache}function Os(e,t){t===null?dt(Co,Co.current):dt(Co,t.pool)}function ay(){var e=Jd();return e===null?null:{parent:wt._currentValue,pool:e}}var ns=Error(F(460)),cy=Error(F(474)),Oa=Error(F(542)),Uu={then:function(){}};function Im(e){return e=e.status,e==="fulfilled"||e==="rejected"}function As(){}function uy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(As,As),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Um(e),e;default:if(typeof t.status=="string")t.then(As,As);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(F(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Um(e),e}throw Cr=t,ns}}var Cr=null;function Lm(){if(Cr===null)throw Error(F(459));var e=Cr;return Cr=null,e}function Um(e){if(e===ns||e===Oa)throw Error(F(483))}var Ri=!1;function Xd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function zi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ye&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=ca(e),oy(e,null,n),t}return qa(e,i,t,n),ca(e)}function Tr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Dp(e,n)}}function Fc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?o=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Vu=!1;function br(){if(Vu){var e=fl;if(e!==null)throw e}}function Sr(e,t,n,i){Vu=!1;var o=e.updateQueue;Ri=!1;var l=o.firstBaseUpdate,c=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,d=f.next;f.next=null,c===null?l=d:c.next=d,c=f;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==c&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=f))}if(l!==null){var h=o.baseState;c=0,m=d=f=null,u=l;do{var g=u.lane&-536870913,p=g!==u.lane;if(p?(He&g)===g:(i&g)===g){g!==0&&g===wl&&(Vu=!0),m!==null&&(m=m.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var b=e,S=u;g=t;var M=n;switch(S.tag){case 1:if(b=S.payload,typeof b=="function"){h=b.call(M,h,g);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,g=typeof b=="function"?b.call(M,h,g):b,g==null)break e;h=rt({},h,g);break e;case 2:Ri=!0}}g=u.callback,g!==null&&(e.flags|=64,p&&(e.flags|=8192),p=o.callbacks,p===null?o.callbacks=[g]:p.push(g))}else p={lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=p,f=h):m=m.next=p,c|=g;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;p=u,u=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);m===null&&(f=h),o.baseState=f,o.firstBaseUpdate=d,o.lastBaseUpdate=m,l===null&&(o.shared.lanes=0),Ki|=c,e.lanes=c,e.memoizedState=h}}function dy(e,t){if(typeof e!="function")throw Error(F(191,e));e.call(t)}function fy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)dy(n[e],t)}var El=Xn(null),ma=Xn(0);function Pm(e,t){e=pi,dt(ma,e),dt(El,t),pi=e|t.baseLanes}function $u(){dt(ma,pi),dt(El,El.current)}function Wd(){pi=ma.current,Dt(El),Dt(ma)}var Xi=0,je=null,We=null,Tt=null,ha=!1,ml=!1,Eo=!1,ga=0,Ur=0,hl=null,$T=0;function xt(){throw Error(F(321))}function Kd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function Zd(e,t,n,i,o,l){return Xi=l,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Se.H=e===null||e.memoizedState===null?Gy:Fy,Eo=!1,l=n(i,o),Eo=!1,ml&&(l=hy(t,n,i,o)),my(e),l}function my(e){Se.H=pa;var t=We!==null&&We.next!==null;if(Xi=0,Tt=We=je=null,ha=!1,Ur=0,hl=null,t)throw Error(F(300));e===null||Rt||(e=e.dependencies,e!==null&&fa(e)&&(Rt=!0))}function hy(e,t,n,i){je=e;var o=0;do{if(ml&&(hl=null),Ur=0,ml=!1,25<=o)throw Error(F(301));if(o+=1,Tt=We=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}Se.H=OT,l=t(n,i)}while(ml);return l}function HT(){var e=Se.H,t=e.useState()[0];return t=typeof t.then=="function"?is(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(je.flags|=1024),t}function Qd(){var e=ga!==0;return ga=0,e}function ef(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function tf(e){if(ha){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ha=!1}Xi=0,Tt=We=je=null,ml=!1,Ur=ga=0,hl=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?je.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function bt(){if(We===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Tt===null?je.memoizedState:Tt.next;if(t!==null)Tt=t,We=e;else{if(e===null)throw je.alternate===null?Error(F(467)):Error(F(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Tt===null?je.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function is(e){var t=Ur;return Ur+=1,hl===null&&(hl=[]),e=uy(hl,e,t),t=je,(Tt===null?t.memoizedState:Tt.next)===null&&(t=t.alternate,Se.H=t===null||t.memoizedState===null?Gy:Fy),e}function Ya(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return is(e);if(e.$$typeof===ri)return Ht(e)}throw Error(F(438,String(e)))}function of(e){var t=null,n=je.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=je.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=nf(),je.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=wC;return t.index++,n}function hi(e,t){return typeof t=="function"?t(e):t}function Ys(e){var t=bt();return lf(t,We,e)}function lf(e,t,n){var i=e.queue;if(i===null)throw Error(F(311));i.lastRenderedReducer=n;var o=e.baseQueue,l=i.pending;if(l!==null){if(o!==null){var c=o.next;o.next=l.next,l.next=c}t.baseQueue=o=l,i.pending=null}if(l=e.baseState,o===null)e.memoizedState=l;else{t=o.next;var u=c=null,f=null,d=t,m=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(He&h)===h:(Xi&h)===h){var g=d.revertLane;if(g===0)f!==null&&(f=f.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===wl&&(m=!0);else if((Xi&g)===g){d=d.next,g===wl&&(m=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=h,c=l):f=f.next=h,je.lanes|=g,Ki|=g;h=d.action,Eo&&n(l,h),l=d.hasEagerState?d.eagerState:n(l,h)}else g={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=g,c=l):f=f.next=g,je.lanes|=h,Ki|=h;d=d.next}while(d!==null&&d!==t);if(f===null?c=l:f.next=u,!gn(l,e.memoizedState)&&(Rt=!0,m&&(n=fl,n!==null)))throw n;e.memoizedState=l,e.baseState=c,e.baseQueue=f,i.lastRenderedState=l}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qc(e){var t=bt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do l=e(l,c.action),c=c.next;while(c!==o);gn(l,t.memoizedState)||(Rt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function gy(e,t,n){var i=je,o=bt(),l=Ge;if(l){if(n===void 0)throw Error(F(407));n=n()}else n=t();var c=!gn((We||o).memoizedState,n);c&&(o.memoizedState=n,Rt=!0),o=o.queue;var u=xy.bind(null,i,o,e);if(os(2048,8,u,[e]),o.getSnapshot!==t||c||Tt!==null&&Tt.memoizedState.tag&1){if(i.flags|=2048,Ml(9,Ja(),yy.bind(null,i,o,n,t),null),et===null)throw Error(F(349));l||Xi&124||py(i,t,n)}return n}function py(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=je.updateQueue,t===null?(t=nf(),je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yy(e,t,n,i){t.value=n,t.getSnapshot=i,vy(t)&&Cy(e)}function xy(e,t,n){return n(function(){vy(t)&&Cy(e)})}function vy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function Cy(e){var t=Ul(e,2);t!==null&&hn(t,e,2)}function Hu(e){var t=Xt();if(typeof e=="function"){var n=e;if(e=n(),Eo){Ui(!0);try{n()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t}function Ty(e,t,n,i){return e.baseState=n,lf(e,We,typeof i=="function"?i:hi)}function BT(e,t,n,i,o){if(Xa(e))throw Error(F(485));if(e=t.action,e!==null){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){l.listeners.push(c)}};Se.T!==null?n(!0):l.isTransition=!1,i(l),n=t.pending,n===null?(l.next=t.pending=l,by(t,l)):(l.next=n.next,t.pending=n.next=l)}}function by(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var l=Se.T,c={};Se.T=c;try{var u=n(o,i),f=Se.S;f!==null&&f(c,u),Vm(e,t,u)}catch(d){Bu(e,t,d)}finally{Se.T=l}}else try{l=n(o,i),Vm(e,t,l)}catch(d){Bu(e,t,d)}}function Vm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){$m(e,t,i)},function(i){return Bu(e,t,i)}):$m(e,t,n)}function $m(e,t,n){t.status="fulfilled",t.value=n,Sy(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,by(e,n)))}function Bu(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Sy(t),t=t.next;while(t!==i)}e.action=null}function Sy(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wy(e,t){return t}function Hm(e,t){if(Ge){var n=et.formState;if(n!==null){e:{var i=je;if(Ge){if(gt){t:{for(var o=gt,l=Fn;o.nodeType!==8;){if(!l){o=null;break t}if(o=Pn(o.nextSibling),o===null){o=null;break t}}l=o.data,o=l==="F!"||l==="F"?o:null}if(o){gt=Pn(o.nextSibling),i=o.data==="F!";break e}}So(i)}i=!1}i&&(t=n[0])}}return n=Xt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:t},n.queue=i,n=Hy.bind(null,je,i),i.dispatch=n,i=Hu(!1),l=cf.bind(null,je,!1,i.queue),i=Xt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=BT.bind(null,je,o,l,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function Bm(e){var t=bt();return Ey(t,We,e)}function Ey(e,t,n){if(t=lf(e,t,wy)[0],e=Ys(hi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=is(t)}catch(c){throw c===ns?Oa:c}else i=t;t=bt();var o=t.queue,l=o.dispatch;return n!==t.memoizedState&&(je.flags|=2048,Ml(9,Ja(),zT.bind(null,o,n),null)),[i,l,e]}function zT(e,t){e.action=t}function zm(e){var t=bt(),n=We;if(n!==null)return Ey(t,n,e);bt(),t=t.memoizedState,n=bt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ml(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=je.updateQueue,t===null&&(t=nf(),je.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ja(){return{destroy:void 0,resource:void 0}}function My(){return bt().memoizedState}function Js(e,t,n,i){var o=Xt();i=i===void 0?null:i,je.flags|=e,o.memoizedState=Ml(1|t,Ja(),n,i)}function os(e,t,n,i){var o=bt();i=i===void 0?null:i;var l=o.memoizedState.inst;We!==null&&i!==null&&Kd(i,We.memoizedState.deps)?o.memoizedState=Ml(t,l,n,i):(je.flags|=e,o.memoizedState=Ml(1|t,l,n,i))}function Gm(e,t){Js(8390656,8,e,t)}function Ay(e,t){os(2048,8,e,t)}function ky(e,t){return os(4,2,e,t)}function _y(e,t){return os(4,4,e,t)}function Ny(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ry(e,t,n){n=n!=null?n.concat([e]):null,os(4,4,Ny.bind(null,t,e),n)}function rf(){}function Dy(e,t){var n=bt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Kd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function jy(e,t){var n=bt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Kd(t,i[1]))return i[0];if(i=e(),Eo){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i}function sf(e,t,n){return n===void 0||Xi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Sx(),je.lanes|=e,Ki|=e,n)}function Iy(e,t,n,i){return gn(n,t)?n:El.current!==null?(e=sf(e,n,i),gn(e,t)||(Rt=!0),e):Xi&42?(e=Sx(),je.lanes|=e,Ki|=e,t):(Rt=!0,e.memoizedState=n)}function Ly(e,t,n,i,o){var l=Fe.p;Fe.p=l!==0&&8>l?l:8;var c=Se.T,u={};Se.T=u,cf(e,!1,t,n);try{var f=o(),d=Se.S;if(d!==null&&d(u,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=VT(f,i);wr(e,t,m,mn(e))}else wr(e,t,i,mn(e))}catch(h){wr(e,t,{then:function(){},status:"rejected",reason:h},mn())}finally{Fe.p=l,Se.T=c}}function GT(){}function zu(e,t,n,i){if(e.tag!==5)throw Error(F(476));var o=Uy(e).queue;Ly(e,o,t,po,n===null?GT:function(){return Py(e),n(i)})}function Uy(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:po,baseState:po,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:po},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Py(e){var t=Uy(e).next.queue;wr(e,t,{},mn())}function af(){return Ht(Br)}function Vy(){return bt().memoizedState}function $y(){return bt().memoizedState}function FT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=mn();e=zi(n);var i=Gi(t,e,n);i!==null&&(hn(i,t,n),Tr(i,t,n)),t={cache:Yd()},e.payload=t;return}t=t.return}}function qT(e,t,n){var i=mn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e)?By(t,n):(n=Gd(e,t,n,i),n!==null&&(hn(n,e,i),zy(n,t,i)))}function Hy(e,t,n){var i=mn();wr(e,t,n,i)}function wr(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))By(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var c=t.lastRenderedState,u=l(c,n);if(o.hasEagerState=!0,o.eagerState=u,gn(u,c))return qa(e,t,o,0),et===null&&Fa(),!1}catch{}finally{}if(n=Gd(e,t,o,i),n!==null)return hn(n,e,i),zy(n,t,i),!0}return!1}function cf(e,t,n,i){if(i={lane:2,revertLane:yf(),action:i,hasEagerState:!1,eagerState:null,next:null},Xa(e)){if(t)throw Error(F(479))}else t=Gd(e,n,i,2),t!==null&&hn(t,e,2)}function Xa(e){var t=e.alternate;return e===je||t!==null&&t===je}function By(e,t){ml=ha=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zy(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Dp(e,n)}}var pa={readContext:Ht,use:Ya,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},Gy={readContext:Ht,use:Ya,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Gm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Js(4194308,4,Ny.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){Js(4,2,e,t)},useMemo:function(e,t){var n=Xt();t=t===void 0?null:t;var i=e();if(Eo){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Xt();if(n!==void 0){var o=n(t);if(Eo){Ui(!0);try{n(t)}finally{Ui(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=qT.bind(null,je,e),[i.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=Hu(e);var t=e.queue,n=Hy.bind(null,je,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:rf,useDeferredValue:function(e,t){var n=Xt();return sf(n,e,t)},useTransition:function(){var e=Hu(!1);return e=Ly.bind(null,je,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=je,o=Xt();if(Ge){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),et===null)throw Error(F(349));He&124||py(i,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Gm(xy.bind(null,i,l,e),[e]),i.flags|=2048,Ml(9,Ja(),yy.bind(null,i,l,n,t),null),n},useId:function(){var e=Xt(),t=et.identifierPrefix;if(Ge){var n=ai,i=si;n=(i&~(1<<32-fn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=ga++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=$T++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:af,useFormState:Hm,useActionState:Hm,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=cf.bind(null,je,!0,n),n.dispatch=t,[e,t]},useMemoCache:of,useCacheRefresh:function(){return Xt().memoizedState=FT.bind(null,je)}},Fy={readContext:Ht,use:Ya,useCallback:Dy,useContext:Ht,useEffect:Ay,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:_y,useMemo:jy,useReducer:Ys,useRef:My,useState:function(){return Ys(hi)},useDebugValue:rf,useDeferredValue:function(e,t){var n=bt();return Iy(n,We.memoizedState,e,t)},useTransition:function(){var e=Ys(hi)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:is(e),t]},useSyncExternalStore:gy,useId:Vy,useHostTransitionStatus:af,useFormState:Bm,useActionState:Bm,useOptimistic:function(e,t){var n=bt();return Ty(n,We,e,t)},useMemoCache:of,useCacheRefresh:$y},OT={readContext:Ht,use:Ya,useCallback:Dy,useContext:Ht,useEffect:Ay,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:_y,useMemo:jy,useReducer:qc,useRef:My,useState:function(){return qc(hi)},useDebugValue:rf,useDeferredValue:function(e,t){var n=bt();return We===null?sf(n,e,t):Iy(n,We.memoizedState,e,t)},useTransition:function(){var e=qc(hi)[0],t=bt().memoizedState;return[typeof e=="boolean"?e:is(e),t]},useSyncExternalStore:gy,useId:Vy,useHostTransitionStatus:af,useFormState:zm,useActionState:zm,useOptimistic:function(e,t){var n=bt();return We!==null?Ty(n,We,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:of,useCacheRefresh:$y},gl=null,Pr=0;function ks(e){var t=Pr;return Pr+=1,gl===null&&(gl=[]),uy(gl,e,t)}function or(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _s(e,t){throw t.$$typeof===bC?Error(F(525)):(e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Fm(e){var t=e._init;return t(e._payload)}function qy(e){function t(x,y){if(e){var T=x.deletions;T===null?(x.deletions=[y],x.flags|=16):T.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function i(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function o(x,y){return x=di(x,y),x.index=0,x.sibling=null,x}function l(x,y,T){return x.index=T,e?(T=x.alternate,T!==null?(T=T.index,T<y?(x.flags|=67108866,y):T):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function c(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function u(x,y,T,C){return y===null||y.tag!==6?(y=zc(T,x.mode,C),y.return=x,y):(y=o(y,T),y.return=x,y)}function f(x,y,T,C){var A=T.type;return A===Wo?m(x,y,T.props.children,C,T.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ni&&Fm(A)===y.type)?(y=o(y,T.props),or(y,T),y.return=x,y):(y=qs(T.type,T.key,T.props,null,x.mode,C),or(y,T),y.return=x,y)}function d(x,y,T,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=Gc(T,x.mode,C),y.return=x,y):(y=o(y,T.children||[]),y.return=x,y)}function m(x,y,T,C,A){return y===null||y.tag!==7?(y=yo(T,x.mode,C,A),y.return=x,y):(y=o(y,T),y.return=x,y)}function h(x,y,T){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=zc(""+y,x.mode,T),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ts:return T=qs(y.type,y.key,y.props,null,x.mode,T),or(T,y),T.return=x,T;case dr:return y=Gc(y,x.mode,T),y.return=x,y;case Ni:var C=y._init;return y=C(y._payload),h(x,y,T)}if(fr(y)||er(y))return y=yo(y,x.mode,T,null),y.return=x,y;if(typeof y.then=="function")return h(x,ks(y),T);if(y.$$typeof===ri)return h(x,Ms(x,y),T);_s(x,y)}return null}function g(x,y,T,C){var A=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return A!==null?null:u(x,y,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ts:return T.key===A?f(x,y,T,C):null;case dr:return T.key===A?d(x,y,T,C):null;case Ni:return A=T._init,T=A(T._payload),g(x,y,T,C)}if(fr(T)||er(T))return A!==null?null:m(x,y,T,C,null);if(typeof T.then=="function")return g(x,y,ks(T),C);if(T.$$typeof===ri)return g(x,y,Ms(x,T),C);_s(x,T)}return null}function p(x,y,T,C,A){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return x=x.get(T)||null,u(y,x,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ts:return x=x.get(C.key===null?T:C.key)||null,f(y,x,C,A);case dr:return x=x.get(C.key===null?T:C.key)||null,d(y,x,C,A);case Ni:var N=C._init;return C=N(C._payload),p(x,y,T,C,A)}if(fr(C)||er(C))return x=x.get(T)||null,m(y,x,C,A,null);if(typeof C.then=="function")return p(x,y,T,ks(C),A);if(C.$$typeof===ri)return p(x,y,T,Ms(y,C),A);_s(y,C)}return null}function b(x,y,T,C){for(var A=null,N=null,R=y,V=y=0,K=null;R!==null&&V<T.length;V++){R.index>V?(K=R,R=null):K=R.sibling;var U=g(x,R,T[V],C);if(U===null){R===null&&(R=K);break}e&&R&&U.alternate===null&&t(x,R),y=l(U,y,V),N===null?A=U:N.sibling=U,N=U,R=K}if(V===T.length)return n(x,R),Ge&&ho(x,V),A;if(R===null){for(;V<T.length;V++)R=h(x,T[V],C),R!==null&&(y=l(R,y,V),N===null?A=R:N.sibling=R,N=R);return Ge&&ho(x,V),A}for(R=i(R);V<T.length;V++)K=p(R,x,V,T[V],C),K!==null&&(e&&K.alternate!==null&&R.delete(K.key===null?V:K.key),y=l(K,y,V),N===null?A=K:N.sibling=K,N=K);return e&&R.forEach(function(I){return t(x,I)}),Ge&&ho(x,V),A}function S(x,y,T,C){if(T==null)throw Error(F(151));for(var A=null,N=null,R=y,V=y=0,K=null,U=T.next();R!==null&&!U.done;V++,U=T.next()){R.index>V?(K=R,R=null):K=R.sibling;var I=g(x,R,U.value,C);if(I===null){R===null&&(R=K);break}e&&R&&I.alternate===null&&t(x,R),y=l(I,y,V),N===null?A=I:N.sibling=I,N=I,R=K}if(U.done)return n(x,R),Ge&&ho(x,V),A;if(R===null){for(;!U.done;V++,U=T.next())U=h(x,U.value,C),U!==null&&(y=l(U,y,V),N===null?A=U:N.sibling=U,N=U);return Ge&&ho(x,V),A}for(R=i(R);!U.done;V++,U=T.next())U=p(R,x,V,U.value,C),U!==null&&(e&&U.alternate!==null&&R.delete(U.key===null?V:U.key),y=l(U,y,V),N===null?A=U:N.sibling=U,N=U);return e&&R.forEach(function(ee){return t(x,ee)}),Ge&&ho(x,V),A}function M(x,y,T,C){if(typeof T=="object"&&T!==null&&T.type===Wo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ts:e:{for(var A=T.key;y!==null;){if(y.key===A){if(A=T.type,A===Wo){if(y.tag===7){n(x,y.sibling),C=o(y,T.props.children),C.return=x,x=C;break e}}else if(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ni&&Fm(A)===y.type){n(x,y.sibling),C=o(y,T.props),or(C,T),C.return=x,x=C;break e}n(x,y);break}else t(x,y);y=y.sibling}T.type===Wo?(C=yo(T.props.children,x.mode,C,T.key),C.return=x,x=C):(C=qs(T.type,T.key,T.props,null,x.mode,C),or(C,T),C.return=x,x=C)}return c(x);case dr:e:{for(A=T.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(x,y.sibling),C=o(y,T.children||[]),C.return=x,x=C;break e}else{n(x,y);break}else t(x,y);y=y.sibling}C=Gc(T,x.mode,C),C.return=x,x=C}return c(x);case Ni:return A=T._init,T=A(T._payload),M(x,y,T,C)}if(fr(T))return b(x,y,T,C);if(er(T)){if(A=er(T),typeof A!="function")throw Error(F(150));return T=A.call(T),S(x,y,T,C)}if(typeof T.then=="function")return M(x,y,ks(T),C);if(T.$$typeof===ri)return M(x,y,Ms(x,T),C);_s(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,y!==null&&y.tag===6?(n(x,y.sibling),C=o(y,T),C.return=x,x=C):(n(x,y),C=zc(T,x.mode,C),C.return=x,x=C),c(x)):n(x,y)}return function(x,y,T,C){try{Pr=0;var A=M(x,y,T,C);return gl=null,A}catch(R){if(R===ns||R===Oa)throw R;var N=un(29,R,null,x.mode);return N.lanes=C,N.return=x,N}finally{}}}var Al=qy(!0),Oy=qy(!1),_n=Xn(null),Jn=null;function ji(e){var t=e.alternate;dt(Et,Et.current&1),dt(_n,e),Jn===null&&(t===null||El.current!==null||t.memoizedState!==null)&&(Jn=e)}function Yy(e){if(e.tag===22){if(dt(Et,Et.current),dt(_n,e),Jn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Jn=e)}}else Ii()}function Ii(){dt(Et,Et.current),dt(_n,_n.current)}function ui(e){Dt(_n),Jn===e&&(Jn=null),Dt(Et)}var Et=Xn(0);function ya(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||ld(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Oc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gu={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=mn(),o=zi(i);o.payload=t,n!=null&&(o.callback=n),t=Gi(e,o,i),t!==null&&(hn(t,e,i),Tr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=mn(),o=zi(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Gi(e,o,i),t!==null&&(hn(t,e,i),Tr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mn(),i=zi(n);i.tag=2,t!=null&&(i.callback=t),t=Gi(e,i,n),t!==null&&(hn(t,e,n),Tr(t,e,n))}};function qm(e,t,n,i,o,l,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,c):t.prototype&&t.prototype.isPureReactComponent?!Ir(n,i)||!Ir(o,l):!0}function Om(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Gu.enqueueReplaceState(t,t.state,null)}function Mo(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=rt({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var xa=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Jy(e){xa(e)}function Xy(e){console.error(e)}function Wy(e){xa(e)}function va(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ym(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Fu(e,t,n){return n=zi(n),n.tag=3,n.payload={element:null},n.callback=function(){va(e,t)},n}function Ky(e){return e=zi(e),e.tag=3,e}function Zy(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=i.value;e.payload=function(){return o(l)},e.callback=function(){Ym(t,n,i)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Ym(t,n,i),typeof o!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:""})})}function YT(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&es(t,n,o,!0),n=_n.current,n!==null){switch(n.tag){case 13:return Jn===null?Zu():n.alternate===null&&pt===0&&(pt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Uu?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),iu(e,i,o)),!1;case 22:return n.flags|=65536,i===Uu?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),iu(e,i,o)),!1}throw Error(F(435,n.tag))}return iu(e,i,o),Zu(),!1}if(Ge)return t=_n.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Ru&&(e=Error(F(422),{cause:i}),Lr(Mn(e,n)))):(i!==Ru&&(t=Error(F(423),{cause:i}),Lr(Mn(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Mn(i,n),o=Fu(e.stateNode,i,o),Fc(e,o),pt!==4&&(pt=2)),!1;var l=Error(F(520),{cause:i});if(l=Mn(l,n),Ar===null?Ar=[l]:Ar.push(l),pt!==4&&(pt=2),t===null)return!0;i=Mn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Fu(n.stateNode,i,e),Fc(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Fi===null||!Fi.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Ky(o),Zy(o,e,n,i),Fc(n,o),!1}n=n.return}while(n!==null);return!1}var Qy=Error(F(461)),Rt=!1;function jt(e,t,n,i){t.child=e===null?Oy(t,null,n,i):Al(t,e.child,n,i)}function Jm(e,t,n,i,o){n=n.render;var l=t.ref;if("ref"in i){var c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}else c=i;return wo(t),i=Zd(e,t,n,c,l,o),u=Qd(),e!==null&&!Rt?(ef(e,t,o),gi(e,t,o)):(Ge&&u&&qd(t),t.flags|=1,jt(e,t,i,o),t.child)}function Xm(e,t,n,i,o){if(e===null){var l=n.type;return typeof l=="function"&&!Fd(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,ex(e,t,l,i,o)):(e=qs(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!uf(e,o)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ir,n(c,i)&&e.ref===t.ref)return gi(e,t,o)}return t.flags|=1,e=di(l,i),e.ref=t.ref,e.return=t,t.child=e}function ex(e,t,n,i,o){if(e!==null){var l=e.memoizedProps;if(Ir(l,i)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=i=l,uf(e,o))e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,gi(e,t,o)}return qu(e,t,n,i,o)}function tx(e,t,n){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=l!==null?l.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;t.childLanes=l&~i}else t.childLanes=0,t.child=null;return Wm(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Os(t,l!==null?l.cachePool:null),l!==null?Pm(t,l):$u(),Yy(t);else return t.lanes=t.childLanes=536870912,Wm(e,t,l!==null?l.baseLanes|n:n,n)}else l!==null?(Os(t,l.cachePool),Pm(t,l),Ii(),t.memoizedState=null):(e!==null&&Os(t,null),$u(),Ii());return jt(e,t,o,n),t.child}function Wm(e,t,n,i){var o=Jd();return o=o===null?null:{parent:wt._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Os(t,null),$u(),Yy(t),e!==null&&es(e,t,i,!0),null}function Xs(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(F(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function qu(e,t,n,i,o){return wo(t),n=Zd(e,t,n,i,void 0,o),i=Qd(),e!==null&&!Rt?(ef(e,t,o),gi(e,t,o)):(Ge&&i&&qd(t),t.flags|=1,jt(e,t,n,o),t.child)}function Km(e,t,n,i,o,l){return wo(t),t.updateQueue=null,n=hy(t,i,n,o),my(e),i=Qd(),e!==null&&!Rt?(ef(e,t,l),gi(e,t,l)):(Ge&&i&&qd(t),t.flags|=1,jt(e,t,n,l),t.child)}function Zm(e,t,n,i,o){if(wo(t),t.stateNode===null){var l=ol,c=n.contextType;typeof c=="object"&&c!==null&&(l=Ht(c)),l=new n(i,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Gu,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=i,l.state=t.memoizedState,l.refs={},Xd(t),c=n.contextType,l.context=typeof c=="object"&&c!==null?Ht(c):ol,l.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(Oc(t,n,c,i),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(c=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),c!==l.state&&Gu.enqueueReplaceState(l,l.state,null),Sr(t,i,l,o),br(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){l=t.stateNode;var u=t.memoizedProps,f=Mo(n,u);l.props=f;var d=l.context,m=n.contextType;c=ol,typeof m=="object"&&m!==null&&(c=Ht(m));var h=n.getDerivedStateFromProps;m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function",u=t.pendingProps!==u,m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u||d!==c)&&Om(t,l,i,c),Ri=!1;var g=t.memoizedState;l.state=g,Sr(t,i,l,o),br(),d=t.memoizedState,u||g!==d||Ri?(typeof h=="function"&&(Oc(t,n,h,i),d=t.memoizedState),(f=Ri||qm(t,n,f,i,g,d,c))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),l.props=i,l.state=d,l.context=c,i=f):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Pu(e,t),c=t.memoizedProps,m=Mo(n,c),l.props=m,h=t.pendingProps,g=l.context,d=n.contextType,f=ol,typeof d=="object"&&d!==null&&(f=Ht(d)),u=n.getDerivedStateFromProps,(d=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||g!==f)&&Om(t,l,i,f),Ri=!1,g=t.memoizedState,l.state=g,Sr(t,i,l,o),br();var p=t.memoizedState;c!==h||g!==p||Ri||e!==null&&e.dependencies!==null&&fa(e.dependencies)?(typeof u=="function"&&(Oc(t,n,u,i),p=t.memoizedState),(m=Ri||qm(t,n,m,i,g,p,f)||e!==null&&e.dependencies!==null&&fa(e.dependencies))?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,p,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,p,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),l.props=i,l.state=p,l.context=f,i=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),i=!1)}return l=i,Xs(e,t),i=(t.flags&128)!==0,l||i?(l=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&i?(t.child=Al(t,e.child,null,o),t.child=Al(t,null,n,o)):jt(e,t,n,o),t.memoizedState=l.state,e=t.child):e=gi(e,t,o),e}function Qm(e,t,n,i){return Qr(),t.flags|=256,jt(e,t,n,i),t.child}var Yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jc(e){return{baseLanes:e,cachePool:ay()}}function Xc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=An),e}function nx(e,t,n){var i=t.pendingProps,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),c&&(o=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ge){if(o?ji(t):Ii(),Ge){var u=gt,f;if(f=u){e:{for(f=u,u=Fn;f.nodeType!==8;){if(!u){u=null;break e}if(f=Pn(f.nextSibling),f===null){u=null;break e}}u=f}u!==null?(t.memoizedState={dehydrated:u,treeContext:xo!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},f=un(18,null,null,0),f.stateNode=u,f.return=t,t.child=f,Ft=t,gt=null,f=!0):f=!1}f||So(t)}if(u=t.memoizedState,u!==null&&(u=u.dehydrated,u!==null))return ld(u)?t.lanes=32:t.lanes=536870912,null;ui(t)}return u=i.children,i=i.fallback,o?(Ii(),o=t.mode,u=Ca({mode:"hidden",children:u},o),i=yo(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,o=t.child,o.memoizedState=Jc(n),o.childLanes=Xc(e,c,n),t.memoizedState=Yc,i):(ji(t),Ou(t,u))}if(f=e.memoizedState,f!==null&&(u=f.dehydrated,u!==null)){if(l)t.flags&256?(ji(t),t.flags&=-257,t=Wc(e,t,n)):t.memoizedState!==null?(Ii(),t.child=e.child,t.flags|=128,t=null):(Ii(),o=i.fallback,u=t.mode,i=Ca({mode:"visible",children:i.children},u),o=yo(o,u,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,Al(t,e.child,null,n),i=t.child,i.memoizedState=Jc(n),i.childLanes=Xc(e,c,n),t.memoizedState=Yc,t=o);else if(ji(t),ld(u)){if(c=u.nextSibling&&u.nextSibling.dataset,c)var d=c.dgst;c=d,i=Error(F(419)),i.stack="",i.digest=c,Lr({value:i,source:null,stack:null}),t=Wc(e,t,n)}else if(Rt||es(e,t,n,!1),c=(n&e.childLanes)!==0,Rt||c){if(c=et,c!==null&&(i=n&-n,i=i&42?1:jd(i),i=i&(c.suspendedLanes|n)?0:i,i!==0&&i!==f.retryLane))throw f.retryLane=i,Ul(e,i),hn(c,e,i),Qy;u.data==="$?"||Zu(),t=Wc(e,t,n)}else u.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,gt=Pn(u.nextSibling),Ft=t,Ge=!0,vo=null,Fn=!1,e!==null&&(Sn[wn++]=si,Sn[wn++]=ai,Sn[wn++]=xo,si=e.id,ai=e.overflow,xo=t),t=Ou(t,i.children),t.flags|=4096);return t}return o?(Ii(),o=i.fallback,u=t.mode,f=e.child,d=f.sibling,i=di(f,{mode:"hidden",children:i.children}),i.subtreeFlags=f.subtreeFlags&65011712,d!==null?o=di(d,o):(o=yo(o,u,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,u=e.child.memoizedState,u===null?u=Jc(n):(f=u.cachePool,f!==null?(d=wt._currentValue,f=f.parent!==d?{parent:d,pool:d}:f):f=ay(),u={baseLanes:u.baseLanes|n,cachePool:f}),o.memoizedState=u,o.childLanes=Xc(e,c,n),t.memoizedState=Yc,i):(ji(t),n=e.child,e=n.sibling,n=di(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function Ou(e,t){return t=Ca({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ca(e,t){return e=un(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wc(e,t,n){return Al(t,e.child,null,n),e=Ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eh(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ju(e.return,t,n)}function Kc(e,t,n,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function ix(e,t,n){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(jt(e,t,i.children,n),i=Et.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eh(e,n,t);else if(e.tag===19)eh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(dt(Et,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ya(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Kc(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ya(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Kc(t,!0,n,null,l);break;case"together":Kc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ki|=t.lanes,!(n&t.childLanes))if(e!==null){if(es(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=di(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=di(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&fa(e)))}function JT(e,t,n){switch(t.tag){case 3:oa(t,t.stateNode.containerInfo),Di(t,wt,e.memoizedState.cache),Qr();break;case 27:case 5:Tu(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:Di(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ji(t),t.flags|=128,null):n&t.child.childLanes?nx(e,t,n):(ji(t),e=gi(e,t,n),e!==null?e.sibling:null);ji(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(es(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return ix(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),dt(Et,Et.current),i)break;return null;case 22:case 23:return t.lanes=0,tx(e,t,n);case 24:Di(t,wt,e.memoizedState.cache)}return gi(e,t,n)}function ox(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Rt=!0;else{if(!uf(e,n)&&!(t.flags&128))return Rt=!1,JT(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Ge&&t.flags&1048576&&ry(t,da,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")Fd(i)?(e=Mo(i,e),t.tag=1,t=Zm(null,t,i,e,n)):(t.tag=0,t=qu(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===Nd){t.tag=11,t=Jm(null,t,i,e,n);break e}else if(o===Rd){t.tag=14,t=Xm(null,t,i,e,n);break e}}throw t=vu(i)||i,Error(F(306,t,""))}}return t;case 0:return qu(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=Mo(i,t.pendingProps),Zm(e,t,i,o,n);case 3:e:{if(oa(t,t.stateNode.containerInfo),e===null)throw Error(F(387));i=t.pendingProps;var l=t.memoizedState;o=l.element,Pu(e,t),Sr(t,i,null,n);var c=t.memoizedState;if(i=c.cache,Di(t,wt,i),i!==l.cache&&Iu(t,[wt],n,!0),br(),i=c.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Qm(e,t,i,n);break e}else if(i!==o){o=Mn(Error(F(424)),t),Lr(o),t=Qm(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(gt=Pn(e.firstChild),Ft=t,Ge=!0,vo=null,Fn=!0,n=Oy(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Qr(),i===o){t=gi(e,t,n);break e}jt(e,t,i,n)}t=t.child}return t;case 26:return Xs(e,t),e===null?(n=yh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ge||(n=t.type,e=t.pendingProps,i=Aa(Bi.current).createElement(n),i[$t]=t,i[Zt]=e,Lt(i,n,e),Nt(i),t.stateNode=i):t.memoizedState=yh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tu(t),e===null&&Ge&&(i=t.stateNode=Fx(t.type,t.pendingProps,Bi.current),Ft=t,Fn=!0,o=gt,eo(t.type)?(rd=o,gt=Pn(i.firstChild)):gt=o),jt(e,t,t.pendingProps.children,n),Xs(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ge&&((o=i=gt)&&(i=bb(i,t.type,t.pendingProps,Fn),i!==null?(t.stateNode=i,Ft=t,gt=Pn(i.firstChild),Fn=!1,o=!0):o=!1),o||So(t)),Tu(t),o=t.type,l=t.pendingProps,c=e!==null?e.memoizedProps:null,i=l.children,id(o,l)?i=null:c!==null&&id(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=Zd(e,t,HT,null,null,n),Br._currentValue=o),Xs(e,t),jt(e,t,i,n),t.child;case 6:return e===null&&Ge&&((e=n=gt)&&(n=Sb(n,t.pendingProps,Fn),n!==null?(t.stateNode=n,Ft=t,gt=null,e=!0):e=!1),e||So(t)),null;case 13:return nx(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Al(t,null,i,n):jt(e,t,i,n),t.child;case 11:return Jm(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Di(t,t.type,i.value),jt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,wo(t),o=Ht(o),i=i(o),t.flags|=1,jt(e,t,i,n),t.child;case 14:return Xm(e,t,t.type,t.pendingProps,n);case 15:return ex(e,t,t.type,t.pendingProps,n);case 19:return ix(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Ca(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=di(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return tx(e,t,n);case 24:return wo(t),i=Ht(wt),e===null?(o=Jd(),o===null&&(o=et,l=Yd(),o.pooledCache=l,l.refCount++,l!==null&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:i,cache:o},Xd(t),Di(t,wt,o)):(e.lanes&n&&(Pu(e,t),Sr(t,null,null,n),br()),o=e.memoizedState,l=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Di(t,wt,i)):(i=l.cache,Di(t,wt,i),i!==o.cache&&Iu(t,[wt],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(F(156,t.tag))}function ni(e){e.flags|=4}function th(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Yx(t)){if(t=_n.current,t!==null&&((He&4194048)===He?Jn!==null:(He&62914560)!==He&&!(He&536870912)||t!==Jn))throw Cr=Uu,cy;e.flags|=8192}}function Ns(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Np():536870912,e.lanes|=t,kl|=t)}function lr(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function XT(e,t,n){var i=t.pendingProps;switch(Od(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return mt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),fi(wt),Tl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ir(t)?ni(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rm())),mt(t),null;case 26:return n=t.memoizedState,e===null?(ni(t),n!==null?(mt(t),th(t,n)):(mt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ni(t),mt(t),th(t,n)):(mt(t),t.flags&=-16777217):(e.memoizedProps!==i&&ni(t),mt(t),t.flags&=-16777217),null;case 27:la(t),n=Bi.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(!i){if(t.stateNode===null)throw Error(F(166));return mt(t),null}e=On.current,ir(t)?_m(t):(e=Fx(o,i,n),t.stateNode=e,ni(t))}return mt(t),null;case 5:if(la(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(!i){if(t.stateNode===null)throw Error(F(166));return mt(t),null}if(e=On.current,ir(t))_m(t);else{switch(o=Aa(Bi.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[$t]=t,e[Zt]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Lt(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ni(t)}}return mt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ni(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(F(166));if(e=Bi.current,ir(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Ft,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[$t]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Bx(e.nodeValue,n)),e||So(t)}else e=Aa(e).createTextNode(i),e[$t]=t,t.stateNode=e}return mt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ir(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(F(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(F(317));o[$t]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),o=!1}else o=Rm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(ui(t),t):(ui(t),null)}if(ui(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var l=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ns(t,t.updateQueue),mt(t),null;case 4:return Tl(),e===null&&xf(t.stateNode.containerInfo),mt(t),null;case 10:return fi(t.type),mt(t),null;case 19:if(Dt(Et),o=t.memoizedState,o===null)return mt(t),null;if(i=(t.flags&128)!==0,l=o.rendering,l===null)if(i)lr(o,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ya(e),l!==null){for(t.flags|=128,lr(o,!1),e=l.updateQueue,t.updateQueue=e,Ns(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ly(n,e),n=n.sibling;return dt(Et,Et.current&1|2),t.child}e=e.sibling}o.tail!==null&&Yn()>ba&&(t.flags|=128,i=!0,lr(o,!1),t.lanes=4194304)}else{if(!i)if(e=ya(l),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Ns(t,e),lr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ge)return mt(t),null}else 2*Yn()-o.renderingStartTime>ba&&n!==536870912&&(t.flags|=128,i=!0,lr(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Yn(),t.sibling=null,e=Et.current,dt(Et,i?e&1|2:e&1),t):(mt(t),null);case 22:case 23:return ui(t),Wd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),n=t.updateQueue,n!==null&&Ns(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Dt(Co),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),fi(wt),mt(t),null;case 25:return null;case 30:return null}throw Error(F(156,t.tag))}function WT(e,t){switch(Od(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fi(wt),Tl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return la(t),null;case 13:if(ui(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dt(Et),null;case 4:return Tl(),null;case 10:return fi(t.type),null;case 22:case 23:return ui(t),Wd(),e!==null&&Dt(Co),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fi(wt),null;case 25:return null;default:return null}}function lx(e,t){switch(Od(t),t.tag){case 3:fi(wt),Tl();break;case 26:case 27:case 5:la(t);break;case 4:Tl();break;case 13:ui(t);break;case 19:Dt(Et);break;case 10:fi(t.type);break;case 22:case 23:ui(t),Wd(),e!==null&&Dt(Co);break;case 24:fi(wt)}}function ls(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var l=n.create,c=n.inst;i=l(),c.destroy=i}n=n.next}while(n!==o)}}catch(u){Ke(t,t.return,u)}}function Wi(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var l=o.next;i=l;do{if((i.tag&e)===e){var c=i.inst,u=c.destroy;if(u!==void 0){c.destroy=void 0,o=t;var f=n,d=u;try{d()}catch(m){Ke(o,f,m)}}}i=i.next}while(i!==l)}}catch(m){Ke(t,t.return,m)}}function rx(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{fy(t,n)}catch(i){Ke(e,e.return,i)}}}function sx(e,t,n){n.props=Mo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ke(e,t,i)}}function Er(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){Ke(e,t,o)}}function qn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Ke(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ke(e,t,o)}else n.current=null}function ax(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Ke(e,e.return,o)}}function Zc(e,t,n){try{var i=e.stateNode;yb(i,e.type,n,t),i[Zt]=t}catch(o){Ke(e,e.return,o)}}function cx(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&eo(e.type)||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&eo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qa));else if(i!==4&&(i===27&&eo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yu(e,t,n),e=e.sibling;e!==null;)Yu(e,t,n),e=e.sibling}function Ta(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&eo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ta(e,t,n),e=e.sibling;e!==null;)Ta(e,t,n),e=e.sibling}function ux(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Lt(t,i,n),t[$t]=e,t[Zt]=n}catch(l){Ke(e,e.return,l)}}var li=!1,vt=!1,eu=!1,nh=typeof WeakSet=="function"?WeakSet:Set,_t=null;function KT(e,t){if(e=e.containerInfo,td=Ra,e=Kp(e),Bd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var c=0,u=-1,f=-1,d=0,m=0,h=e,g=null;t:for(;;){for(var p;h!==n||o!==0&&h.nodeType!==3||(u=c+o),h!==l||i!==0&&h.nodeType!==3||(f=c+i),h.nodeType===3&&(c+=h.nodeValue.length),(p=h.firstChild)!==null;)g=h,h=p;for(;;){if(h===e)break t;if(g===n&&++d===o&&(u=c),g===l&&++m===i&&(f=c),(p=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=p}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},Ra=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){switch(t=_t,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,i=n.stateNode;try{var b=Mo(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(b,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(S){Ke(n,n.return,S)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(F(163))}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}}function dx(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ai(e,n),i&4&&ls(5,n);break;case 1:if(Ai(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){Ke(n,n.return,c)}else{var o=Mo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){Ke(n,n.return,c)}}i&64&&rx(n),i&512&&Er(n,n.return);break;case 3:if(Ai(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{fy(e,t)}catch(c){Ke(n,n.return,c)}}break;case 27:t===null&&i&4&&ux(n);case 26:case 5:Ai(e,n),t===null&&i&4&&ax(n),i&512&&Er(n,n.return);break;case 12:Ai(e,n);break;case 13:Ai(e,n),i&4&&hx(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=rb.bind(null,n),wb(e,n))));break;case 22:if(i=n.memoizedState!==null||li,!i){t=t!==null&&t.memoizedState!==null||vt,o=li;var l=vt;li=i,(vt=t)&&!l?_i(e,n,(n.subtreeFlags&8772)!==0):Ai(e,n),li=o,vt=l}break;case 30:break;default:Ai(e,n)}}function fx(e){var t=e.alternate;t!==null&&(e.alternate=null,fx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ld(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,Wt=!1;function ii(e,t,n){for(n=n.child;n!==null;)mx(e,t,n),n=n.sibling}function mx(e,t,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Jr,n)}catch{}switch(n.tag){case 26:vt||qn(n,t),ii(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:vt||qn(n,t);var i=at,o=Wt;eo(n.type)&&(at=n.stateNode,Wt=!1),ii(e,t,n),_r(n.stateNode),at=i,Wt=o;break;case 5:vt||qn(n,t);case 6:if(i=at,o=Wt,at=null,ii(e,t,n),at=i,Wt=o,at!==null)if(Wt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(n.stateNode)}catch(l){Ke(n,t,l)}else try{at.removeChild(n.stateNode)}catch(l){Ke(n,t,l)}break;case 18:at!==null&&(Wt?(e=at,hh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Fr(e)):hh(at,n.stateNode));break;case 4:i=at,o=Wt,at=n.stateNode.containerInfo,Wt=!0,ii(e,t,n),at=i,Wt=o;break;case 0:case 11:case 14:case 15:vt||Wi(2,n,t),vt||Wi(4,n,t),ii(e,t,n);break;case 1:vt||(qn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&sx(n,t,i)),ii(e,t,n);break;case 21:ii(e,t,n);break;case 22:vt=(i=vt)||n.memoizedState!==null,ii(e,t,n),vt=i;break;default:ii(e,t,n)}}function hx(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fr(e)}catch(n){Ke(t,t.return,n)}}function ZT(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nh),t;default:throw Error(F(435,e.tag))}}function tu(e,t){var n=ZT(e);t.forEach(function(i){var o=sb.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function sn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],l=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 27:if(eo(u.type)){at=u.stateNode,Wt=!1;break e}break;case 5:at=u.stateNode,Wt=!1;break e;case 3:case 4:at=u.stateNode.containerInfo,Wt=!0;break e}u=u.return}if(at===null)throw Error(F(160));mx(l,c,o),at=null,Wt=!1,l=o.alternate,l!==null&&(l.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)gx(t,e),t=t.sibling}var Un=null;function gx(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sn(t,e),an(e),i&4&&(Wi(3,e,e.return),ls(3,e),Wi(5,e,e.return));break;case 1:sn(t,e),an(e),i&512&&(vt||n===null||qn(n,n.return)),i&64&&li&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Un;if(sn(t,e),an(e),i&512&&(vt||n===null||qn(n,n.return)),i&4){var l=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":l=o.getElementsByTagName("title")[0],(!l||l[Kr]||l[$t]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=o.createElement(i),o.head.insertBefore(l,o.querySelector("head > title"))),Lt(l,i,n),l[$t]=e,Nt(l),i=l;break e;case"link":var c=vh("link","href",o).get(i+(n.href||""));if(c){for(var u=0;u<c.length;u++)if(l=c[u],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(u,1);break t}}l=o.createElement(i),Lt(l,i,n),o.head.appendChild(l);break;case"meta":if(c=vh("meta","content",o).get(i+(n.content||""))){for(u=0;u<c.length;u++)if(l=c[u],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(u,1);break t}}l=o.createElement(i),Lt(l,i,n),o.head.appendChild(l);break;default:throw Error(F(468,i))}l[$t]=e,Nt(l),i=l}e.stateNode=i}else Ch(o,e.type,e.stateNode);else e.stateNode=xh(o,i,e.memoizedProps);else l!==i?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,i===null?Ch(o,e.type,e.stateNode):xh(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,n.memoizedProps)}break;case 27:sn(t,e),an(e),i&512&&(vt||n===null||qn(n,n.return)),n!==null&&i&4&&Zc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(sn(t,e),an(e),i&512&&(vt||n===null||qn(n,n.return)),e.flags&32){o=e.stateNode;try{Sl(o,"")}catch(p){Ke(e,e.return,p)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Zc(e,o,n!==null?n.memoizedProps:o)),i&1024&&(eu=!0);break;case 6:if(sn(t,e),an(e),i&4){if(e.stateNode===null)throw Error(F(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){Ke(e,e.return,p)}}break;case 3:if(Zs=null,o=Un,Un=ka(t.containerInfo),sn(t,e),Un=o,an(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Fr(t.containerInfo)}catch(p){Ke(e,e.return,p)}eu&&(eu=!1,px(e));break;case 4:i=Un,Un=ka(e.stateNode.containerInfo),sn(t,e),an(e),Un=i;break;case 12:sn(t,e),an(e);break;case 13:sn(t,e),an(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gf=Yn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,tu(e,i)));break;case 22:o=e.memoizedState!==null;var f=n!==null&&n.memoizedState!==null,d=li,m=vt;if(li=d||o,vt=m||f,sn(t,e),vt=m,li=d,an(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||f||li||vt||go(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){f=n=t;try{if(l=f.stateNode,o)c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{u=f.stateNode;var h=f.memoizedProps.style,g=h!=null&&h.hasOwnProperty("display")?h.display:null;u.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(p){Ke(f,f.return,p)}}}else if(t.tag===6){if(n===null){f=t;try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(p){Ke(f,f.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,tu(e,n))));break;case 19:sn(t,e),an(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,tu(e,i)));break;case 30:break;case 21:break;default:sn(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(cx(i)){n=i;break}i=i.return}if(n==null)throw Error(F(160));switch(n.tag){case 27:var o=n.stateNode,l=Qc(e);Ta(e,l,o);break;case 5:var c=n.stateNode;n.flags&32&&(Sl(c,""),n.flags&=-33);var u=Qc(e);Ta(e,u,c);break;case 3:case 4:var f=n.stateNode.containerInfo,d=Qc(e);Yu(e,d,f);break;default:throw Error(F(161))}}catch(m){Ke(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function px(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;px(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ai(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)dx(e,t.alternate,t),t=t.sibling}function go(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wi(4,t,t.return),go(t);break;case 1:qn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&sx(t,t.return,n),go(t);break;case 27:_r(t.stateNode);case 26:case 5:qn(t,t.return),go(t);break;case 22:t.memoizedState===null&&go(t);break;case 30:go(t);break;default:go(t)}e=e.sibling}}function _i(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,l=t,c=l.flags;switch(l.tag){case 0:case 11:case 15:_i(o,l,n),ls(4,l);break;case 1:if(_i(o,l,n),i=l,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(d){Ke(i,i.return,d)}if(i=l,o=i.updateQueue,o!==null){var u=i.stateNode;try{var f=o.shared.hiddenCallbacks;if(f!==null)for(o.shared.hiddenCallbacks=null,o=0;o<f.length;o++)dy(f[o],u)}catch(d){Ke(i,i.return,d)}}n&&c&64&&rx(l),Er(l,l.return);break;case 27:ux(l);case 26:case 5:_i(o,l,n),n&&i===null&&c&4&&ax(l),Er(l,l.return);break;case 12:_i(o,l,n);break;case 13:_i(o,l,n),n&&c&4&&hx(o,l);break;case 22:l.memoizedState===null&&_i(o,l,n),Er(l,l.return);break;case 30:break;default:_i(o,l,n)}t=t.sibling}}function df(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ts(n))}function ff(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ts(e))}function Bn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yx(e,t,n,i),t=t.sibling}function yx(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Bn(e,t,n,i),o&2048&&ls(9,t);break;case 1:Bn(e,t,n,i);break;case 3:Bn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ts(e)));break;case 12:if(o&2048){Bn(e,t,n,i),e=t.stateNode;try{var l=t.memoizedProps,c=l.id,u=l.onPostCommit;typeof u=="function"&&u(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){Ke(t,t.return,f)}}else Bn(e,t,n,i);break;case 13:Bn(e,t,n,i);break;case 23:break;case 22:l=t.stateNode,c=t.alternate,t.memoizedState!==null?l._visibility&2?Bn(e,t,n,i):Mr(e,t):l._visibility&2?Bn(e,t,n,i):(l._visibility|=2,Yo(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&df(c,t);break;case 24:Bn(e,t,n,i),o&2048&&ff(t.alternate,t);break;default:Bn(e,t,n,i)}}function Yo(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,c=t,u=n,f=i,d=c.flags;switch(c.tag){case 0:case 11:case 15:Yo(l,c,u,f,o),ls(8,c);break;case 23:break;case 22:var m=c.stateNode;c.memoizedState!==null?m._visibility&2?Yo(l,c,u,f,o):Mr(l,c):(m._visibility|=2,Yo(l,c,u,f,o)),o&&d&2048&&df(c.alternate,c);break;case 24:Yo(l,c,u,f,o),o&&d&2048&&ff(c.alternate,c);break;default:Yo(l,c,u,f,o)}t=t.sibling}}function Mr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:Mr(n,i),o&2048&&df(i.alternate,i);break;case 24:Mr(n,i),o&2048&&ff(i.alternate,i);break;default:Mr(n,i)}t=t.sibling}}var hr=8192;function Go(e){if(e.subtreeFlags&hr)for(e=e.child;e!==null;)xx(e),e=e.sibling}function xx(e){switch(e.tag){case 26:Go(e),e.flags&hr&&e.memoizedState!==null&&Pb(Un,e.memoizedState,e.memoizedProps);break;case 5:Go(e);break;case 3:case 4:var t=Un;Un=ka(e.stateNode.containerInfo),Go(e),Un=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=hr,hr=16777216,Go(e),hr=t):Go(e));break;default:Go(e)}}function vx(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function rr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];_t=i,Tx(i,e)}vx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cx(e),e=e.sibling}function Cx(e){switch(e.tag){case 0:case 11:case 15:rr(e),e.flags&2048&&Wi(9,e,e.return);break;case 3:rr(e);break;case 12:rr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ws(e)):rr(e);break;default:rr(e)}}function Ws(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];_t=i,Tx(i,e)}vx(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wi(8,t,t.return),Ws(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ws(t));break;default:Ws(t)}e=e.sibling}}function Tx(e,t){for(;_t!==null;){var n=_t;switch(n.tag){case 0:case 11:case 15:Wi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ts(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,_t=i;else e:for(n=e;_t!==null;){i=_t;var o=i.sibling,l=i.return;if(fx(i),i===n){_t=null;break e}if(o!==null){o.return=l,_t=o;break e}_t=l}}}var QT={getCacheForType:function(e){var t=Ht(wt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},eb=typeof WeakMap=="function"?WeakMap:Map,Ye=0,et=null,$e=null,He=0,Oe=0,cn=null,Vi=!1,Pl=!1,mf=!1,pi=0,pt=0,Ki=0,To=0,hf=0,An=0,kl=0,Ar=null,Kt=null,Ju=!1,gf=0,ba=1/0,Sa=null,Fi=null,It=0,qi=null,_l=null,pl=0,Xu=0,Wu=null,bx=null,kr=0,Ku=null;function mn(){if(Ye&2&&He!==0)return He&-He;if(Se.T!==null){var e=wl;return e!==0?e:yf()}return jp()}function Sx(){An===0&&(An=!(He&536870912)||Ge?_p():536870912);var e=_n.current;return e!==null&&(e.flags|=32),An}function hn(e,t,n){(e===et&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Nl(e,0),$i(e,He,An,!1)),Wr(e,n),(!(Ye&2)||e!==et)&&(e===et&&(!(Ye&2)&&(To|=n),pt===4&&$i(e,He,An,!1)),Wn(e))}function wx(e,t,n){if(Ye&6)throw Error(F(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Xr(e,t),o=i?ib(e,t):nu(e,t,!0),l=i;do{if(o===0){Pl&&!i&&$i(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!tb(n)){o=nu(e,t,!1),l=!1;continue}if(o===2){if(l=t,e.errorRecoveryDisabledLanes&l)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var u=e;o=Ar;var f=u.current.memoizedState.isDehydrated;if(f&&(Nl(u,c).flags|=256),c=nu(u,c,!1),c!==2){if(mf&&!f){u.errorRecoveryDisabledLanes|=l,To|=l,o=4;break e}l=Kt,Kt=o,l!==null&&(Kt===null?Kt=l:Kt.push.apply(Kt,l))}o=c}if(l=!1,o!==2)continue}}if(o===1){Nl(e,0),$i(e,t,0,!0);break}e:{switch(i=e,l=o,l){case 0:case 1:throw Error(F(345));case 4:if((t&4194048)!==t)break;case 6:$i(i,t,An,!Vi);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(F(329))}if((t&62914560)===t&&(o=gf+300-Yn(),10<o)){if($i(i,t,An,!Vi),Ha(i,0,!0)!==0)break e;i.timeoutHandle=Gx(ih.bind(null,i,n,Kt,Sa,Ju,t,An,To,kl,Vi,l,2,-0,0),o);break e}ih(i,n,Kt,Sa,Ju,t,An,To,kl,Vi,l,0,-0,0)}}break}while(!0);Wn(e)}function ih(e,t,n,i,o,l,c,u,f,d,m,h,g,p){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(Hr={stylesheets:null,count:0,unsuspend:Ub},xx(t),h=Vb(),h!==null)){e.cancelPendingCommit=h(lh.bind(null,e,t,l,n,i,o,c,u,f,m,1,g,p)),$i(e,l,c,!d);return}lh(e,t,l,n,i,o,c,u,f)}function tb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!gn(l(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $i(e,t,n,i){t&=~hf,t&=~To,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var l=31-fn(o),c=1<<l;i[l]=-1,o&=~c}n!==0&&Rp(e,n,t)}function Wa(){return Ye&6?!0:(rs(0),!1)}function pf(){if($e!==null){if(Oe===0)var e=$e.return;else e=$e,ci=Ro=null,tf(e),gl=null,Pr=0,e=$e;for(;e!==null;)lx(e.alternate,e),e=e.return;$e=null}}function Nl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,vb(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),pf(),et=e,$e=n=di(e.current,null),He=t,Oe=0,cn=null,Vi=!1,Pl=Xr(e,t),mf=!1,kl=An=hf=To=Ki=pt=0,Kt=Ar=null,Ju=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-fn(i),l=1<<o;t|=e[o],i&=~l}return pi=t,Fa(),n}function Ex(e,t){je=null,Se.H=pa,t===ns||t===Oa?(t=Lm(),Oe=3):t===cy?(t=Lm(),Oe=4):Oe=t===Qy?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,cn=t,$e===null&&(pt=1,va(e,Mn(t,e.current)))}function Mx(){var e=Se.H;return Se.H=pa,e===null?pa:e}function Ax(){var e=Se.A;return Se.A=QT,e}function Zu(){pt=4,Vi||(He&4194048)!==He&&_n.current!==null||(Pl=!0),!(Ki&134217727)&&!(To&134217727)||et===null||$i(et,He,An,!1)}function nu(e,t,n){var i=Ye;Ye|=2;var o=Mx(),l=Ax();(et!==e||He!==t)&&(Sa=null,Nl(e,t)),t=!1;var c=pt;e:do try{if(Oe!==0&&$e!==null){var u=$e,f=cn;switch(Oe){case 8:pf(),c=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(t=!0);var d=Oe;if(Oe=0,cn=null,sl(e,u,f,d),n&&Pl){c=0;break e}break;default:d=Oe,Oe=0,cn=null,sl(e,u,f,d)}}nb(),c=pt;break}catch(m){Ex(e,m)}while(!0);return t&&e.shellSuspendCounter++,ci=Ro=null,Ye=i,Se.H=o,Se.A=l,$e===null&&(et=null,He=0,Fa()),c}function nb(){for(;$e!==null;)kx($e)}function ib(e,t){var n=Ye;Ye|=2;var i=Mx(),o=Ax();et!==e||He!==t?(Sa=null,ba=Yn()+500,Nl(e,t)):Pl=Xr(e,t);e:do try{if(Oe!==0&&$e!==null){t=$e;var l=cn;t:switch(Oe){case 1:Oe=0,cn=null,sl(e,t,l,1);break;case 2:case 9:if(Im(l)){Oe=0,cn=null,oh(t);break}t=function(){Oe!==2&&Oe!==9||et!==e||(Oe=7),Wn(e)},l.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Im(l)?(Oe=0,cn=null,oh(t)):(Oe=0,cn=null,sl(e,t,l,7));break;case 5:var c=null;switch($e.tag){case 26:c=$e.memoizedState;case 5:case 27:var u=$e;if(!c||Yx(c)){Oe=0,cn=null;var f=u.sibling;if(f!==null)$e=f;else{var d=u.return;d!==null?($e=d,Ka(d)):$e=null}break t}}Oe=0,cn=null,sl(e,t,l,5);break;case 6:Oe=0,cn=null,sl(e,t,l,6);break;case 8:pf(),pt=6;break e;default:throw Error(F(462))}}ob();break}catch(m){Ex(e,m)}while(!0);return ci=Ro=null,Se.H=i,Se.A=o,Ye=n,$e!==null?0:(et=null,He=0,Fa(),pt)}function ob(){for(;$e!==null&&!MC();)kx($e)}function kx(e){var t=ox(e.alternate,e,pi);e.memoizedProps=e.pendingProps,t===null?Ka(e):$e=t}function oh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Km(n,t,t.pendingProps,t.type,void 0,He);break;case 11:t=Km(n,t,t.pendingProps,t.type.render,t.ref,He);break;case 5:tf(t);default:lx(n,t),t=$e=ly(t,pi),t=ox(n,t,pi)}e.memoizedProps=e.pendingProps,t===null?Ka(e):$e=t}function sl(e,t,n,i){ci=Ro=null,tf(t),gl=null,Pr=0;var o=t.return;try{if(YT(e,o,t,n,He)){pt=1,va(e,Mn(n,e.current)),$e=null;return}}catch(l){if(o!==null)throw $e=o,l;pt=1,va(e,Mn(n,e.current)),$e=null;return}t.flags&32768?(Ge||i===1?e=!0:Pl||He&536870912?e=!1:(Vi=e=!0,(i===2||i===9||i===3||i===6)&&(i=_n.current,i!==null&&i.tag===13&&(i.flags|=16384))),_x(t,e)):Ka(t)}function Ka(e){var t=e;do{if(t.flags&32768){_x(t,Vi);return}e=t.return;var n=XT(t.alternate,t,pi);if(n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);pt===0&&(pt=5)}function _x(e,t){do{var n=WT(e.alternate,e);if(n!==null){n.flags&=32767,$e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){$e=e;return}$e=e=n}while(e!==null);pt=6,$e=null}function lh(e,t,n,i,o,l,c,u,f){e.cancelPendingCommit=null;do Za();while(It!==0);if(Ye&6)throw Error(F(327));if(t!==null){if(t===e.current)throw Error(F(177));if(l=t.lanes|t.childLanes,l|=zd,UC(e,n,l,c,u,f),e===et&&($e=et=null,He=0),_l=t,qi=e,pl=n,Xu=l,Wu=o,bx=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ab(ra,function(){return Ix(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Se.T,Se.T=null,o=Fe.p,Fe.p=2,c=Ye,Ye|=4;try{KT(e,t,n)}finally{Ye=c,Fe.p=o,Se.T=i}}It=1,Nx(),Rx(),Dx()}}function Nx(){if(It===1){It=0;var e=qi,t=_l,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Se.T,Se.T=null;var i=Fe.p;Fe.p=2;var o=Ye;Ye|=4;try{gx(t,e);var l=nd,c=Kp(e.containerInfo),u=l.focusedElem,f=l.selectionRange;if(c!==u&&u&&u.ownerDocument&&Wp(u.ownerDocument.documentElement,u)){if(f!==null&&Bd(u)){var d=f.start,m=f.end;if(m===void 0&&(m=d),"selectionStart"in u)u.selectionStart=d,u.selectionEnd=Math.min(m,u.value.length);else{var h=u.ownerDocument||document,g=h&&h.defaultView||window;if(g.getSelection){var p=g.getSelection(),b=u.textContent.length,S=Math.min(f.start,b),M=f.end===void 0?S:Math.min(f.end,b);!p.extend&&S>M&&(c=M,M=S,S=c);var x=Mm(u,S),y=Mm(u,M);if(x&&y&&(p.rangeCount!==1||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var T=h.createRange();T.setStart(x.node,x.offset),p.removeAllRanges(),S>M?(p.addRange(T),p.extend(y.node,y.offset)):(T.setEnd(y.node,y.offset),p.addRange(T))}}}}for(h=[],p=u;p=p.parentNode;)p.nodeType===1&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<h.length;u++){var C=h[u];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}Ra=!!td,nd=td=null}finally{Ye=o,Fe.p=i,Se.T=n}}e.current=t,It=2}}function Rx(){if(It===2){It=0;var e=qi,t=_l,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Se.T,Se.T=null;var i=Fe.p;Fe.p=2;var o=Ye;Ye|=4;try{dx(e,t.alternate,t)}finally{Ye=o,Fe.p=i,Se.T=n}}It=3}}function Dx(){if(It===4||It===3){It=0,AC();var e=qi,t=_l,n=pl,i=bx;t.subtreeFlags&10256||t.flags&10256?It=5:(It=0,_l=qi=null,jx(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Fi=null),Id(n),t=t.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Jr,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Se.T,o=Fe.p,Fe.p=2,Se.T=null;try{for(var l=e.onRecoverableError,c=0;c<i.length;c++){var u=i[c];l(u.value,{componentStack:u.stack})}}finally{Se.T=t,Fe.p=o}}pl&3&&Za(),Wn(e),o=e.pendingLanes,n&4194090&&o&42?e===Ku?kr++:(kr=0,Ku=e):kr=0,rs(0)}}function jx(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ts(t)))}function Za(e){return Nx(),Rx(),Dx(),Ix()}function Ix(){if(It!==5)return!1;var e=qi,t=Xu;Xu=0;var n=Id(pl),i=Se.T,o=Fe.p;try{Fe.p=32>n?32:n,Se.T=null,n=Wu,Wu=null;var l=qi,c=pl;if(It=0,_l=qi=null,pl=0,Ye&6)throw Error(F(331));var u=Ye;if(Ye|=4,Cx(l.current),yx(l,l.current,c,n),Ye=u,rs(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Jr,l)}catch{}return!0}finally{Fe.p=o,Se.T=i,jx(e,t)}}function rh(e,t,n){t=Mn(n,t),t=Fu(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(Wr(e,2),Wn(e))}function Ke(e,t,n){if(e.tag===3)rh(e,e,n);else for(;t!==null;){if(t.tag===3){rh(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fi===null||!Fi.has(i))){e=Mn(n,e),n=Ky(2),i=Gi(t,n,2),i!==null&&(Zy(n,i,t,e),Wr(i,2),Wn(i));break}}t=t.return}}function iu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new eb;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(mf=!0,o.add(n),e=lb.bind(null,e,t,n),t.then(e,e))}function lb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,et===e&&(He&n)===n&&(pt===4||pt===3&&(He&62914560)===He&&300>Yn()-gf?!(Ye&2)&&Nl(e,0):hf|=n,kl===He&&(kl=0)),Wn(e)}function Lx(e,t){t===0&&(t=Np()),e=Ul(e,t),e!==null&&(Wr(e,t),Wn(e))}function rb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lx(e,n)}function sb(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(F(314))}i!==null&&i.delete(t),Lx(e,n)}function ab(e,t){return Dd(e,t)}var wa=null,Jo=null,Qu=!1,Ea=!1,ou=!1,bo=0;function Wn(e){e!==Jo&&e.next===null&&(Jo===null?wa=Jo=e:Jo=Jo.next=e),Ea=!0,Qu||(Qu=!0,ub())}function rs(e,t){if(!ou&&Ea){ou=!0;do for(var n=!1,i=wa;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var l=0;else{var c=i.suspendedLanes,u=i.pingedLanes;l=(1<<31-fn(42|e)+1)-1,l&=o&~(c&~u),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,sh(i,l))}else l=He,l=Ha(i,i===et?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(l&3)||Xr(i,l)||(n=!0,sh(i,l));i=i.next}while(n);ou=!1}}function cb(){Ux()}function Ux(){Ea=Qu=!1;var e=0;bo!==0&&(xb()&&(e=bo),bo=0);for(var t=Yn(),n=null,i=wa;i!==null;){var o=i.next,l=Px(i,t);l===0?(i.next=null,n===null?wa=o:n.next=o,o===null&&(Jo=n)):(n=i,(e!==0||l&3)&&(Ea=!0)),i=o}rs(e)}function Px(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var c=31-fn(l),u=1<<c,f=o[c];f===-1?(!(u&n)||u&i)&&(o[c]=LC(u,t)):f<=t&&(e.expiredLanes|=u),l&=~u}if(t=et,n=He,n=Ha(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Nc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Xr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Nc(i),Id(n)){case 2:case 8:n=Ap;break;case 32:n=ra;break;case 268435456:n=kp;break;default:n=ra}return i=Vx.bind(null,e),n=Dd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Nc(i),e.callbackPriority=2,e.callbackNode=null,2}function Vx(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Za()&&e.callbackNode!==n)return null;var i=He;return i=Ha(e,e===et?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(wx(e,i,t),Px(e,Yn()),e.callbackNode!=null&&e.callbackNode===n?Vx.bind(null,e):null)}function sh(e,t){if(Za())return null;wx(e,t,!0)}function ub(){Cb(function(){Ye&6?Dd(Mp,cb):Ux()})}function yf(){return bo===0&&(bo=_p()),bo}function ah(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zs(""+e)}function ch(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function db(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var l=ah((o[Zt]||null).action),c=i.submitter;c&&(t=(t=c[Zt]||null)?ah(t.formAction):c.getAttribute("formAction"),t!==null&&(l=t,c=null));var u=new Ba("action","action",null,i,o);e.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(bo!==0){var f=c?ch(o,c):new FormData(o);zu(n,{pending:!0,data:f,method:o.method,action:l},null,f)}}else typeof l=="function"&&(u.preventDefault(),f=c?ch(o,c):new FormData(o),zu(n,{pending:!0,data:f,method:o.method,action:l},l,f))},currentTarget:o}]})}}for(var lu=0;lu<Nu.length;lu++){var ru=Nu[lu],fb=ru.toLowerCase(),mb=ru[0].toUpperCase()+ru.slice(1);Vn(fb,"on"+mb)}Vn(Qp,"onAnimationEnd");Vn(ey,"onAnimationIteration");Vn(ty,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(NT,"onTransitionRun");Vn(RT,"onTransitionStart");Vn(DT,"onTransitionCancel");Vn(ny,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vr));function $x(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var c=i.length-1;0<=c;c--){var u=i[c],f=u.instance,d=u.currentTarget;if(u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){xa(m)}o.currentTarget=null,l=f}else for(c=0;c<i.length;c++){if(u=i[c],f=u.instance,d=u.currentTarget,u=u.listener,f!==l&&o.isPropagationStopped())break e;l=u,o.currentTarget=d;try{l(o)}catch(m){xa(m)}o.currentTarget=null,l=f}}}}function Ve(e,t){var n=t[Su];n===void 0&&(n=t[Su]=new Set);var i=e+"__bubble";n.has(i)||(Hx(t,e,2,!1),n.add(i))}function su(e,t,n){var i=0;t&&(i|=4),Hx(n,e,i,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function xf(e){if(!e[Rs]){e[Rs]=!0,Ip.forEach(function(n){n!=="selectionchange"&&(hb.has(n)||su(n,!1,e),su(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,su("selectionchange",!1,t))}}function Hx(e,t,n,i){switch(Zx(t)){case 2:var o=Bb;break;case 8:o=zb;break;default:o=bf}n=o.bind(null,t,n,e),o=void 0,!Au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function au(e,t,n,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var u=i.stateNode.containerInfo;if(u===o)break;if(c===4)for(c=i.return;c!==null;){var f=c.tag;if((f===3||f===4)&&c.stateNode.containerInfo===o)return;c=c.return}for(;u!==null;){if(c=Zo(u),c===null)return;if(f=c.tag,f===5||f===6||f===26||f===27){i=l=c;continue e}u=u.parentNode}}i=i.return}zp(function(){var d=l,m=Pd(n),h=[];e:{var g=iy.get(e);if(g!==void 0){var p=Ba,b=e;switch(e){case"keypress":if(Fs(n)===0)break e;case"keydown":case"keyup":p=aT;break;case"focusin":b="focus",p=Vc;break;case"focusout":b="blur",p=Vc;break;case"beforeblur":case"afterblur":p=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=WC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dT;break;case Qp:case ey:case ty:p=QC;break;case ny:p=mT;break;case"scroll":case"scrollend":p=JC;break;case"wheel":p=gT;break;case"copy":case"cut":case"paste":p=tT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=xm;break;case"toggle":case"beforetoggle":p=yT}var S=(t&4)!==0,M=!S&&(e==="scroll"||e==="scrollend"),x=S?g!==null?g+"Capture":null:g;S=[];for(var y=d,T;y!==null;){var C=y;if(T=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||T===null||x===null||(C=Dr(y,x),C!=null&&S.push($r(y,C,T))),M)break;y=y.return}0<S.length&&(g=new p(g,b,null,n,m),h.push({event:g,listeners:S}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",g&&n!==Mu&&(b=n.relatedTarget||n.fromElement)&&(Zo(b)||b[Il]))break e;if((p||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=d,b=b?Zo(b):null,b!==null&&(M=Yr(b),S=b.tag,b!==M||S!==5&&S!==27&&S!==6)&&(b=null)):(p=null,b=d),p!==b)){if(S=pm,C="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(S=xm,C="onPointerLeave",x="onPointerEnter",y="pointer"),M=p==null?g:mr(p),T=b==null?g:mr(b),g=new S(C,y+"leave",p,n,m),g.target=M,g.relatedTarget=T,C=null,Zo(m)===d&&(S=new S(x,y+"enter",b,n,m),S.target=T,S.relatedTarget=M,C=S),M=C,p&&b)t:{for(S=p,x=b,y=0,T=S;T;T=Fo(T))y++;for(T=0,C=x;C;C=Fo(C))T++;for(;0<y-T;)S=Fo(S),y--;for(;0<T-y;)x=Fo(x),T--;for(;y--;){if(S===x||x!==null&&S===x.alternate)break t;S=Fo(S),x=Fo(x)}S=null}else S=null;p!==null&&uh(h,g,p,S,!1),b!==null&&M!==null&&uh(h,M,b,S,!0)}}e:{if(g=d?mr(d):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var A=bm;else if(Tm(g))if(Jp)A=AT;else{A=ET;var N=wT}else p=g.nodeName,!p||p.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&Ud(d.elementType)&&(A=bm):A=MT;if(A&&(A=A(e,d))){Yp(h,A,n,m);break e}N&&N(e,g,d),e==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&Eu(g,"number",g.value)}switch(N=d?mr(d):window,e){case"focusin":(Tm(N)||N.contentEditable==="true")&&(tl=N,ku=d,xr=null);break;case"focusout":xr=ku=tl=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,Am(h,n,m);break;case"selectionchange":if(_T)break;case"keydown":case"keyup":Am(h,n,m)}var R;if(Hd)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else el?qp(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Fp&&n.locale!=="ko"&&(el||V!=="onCompositionStart"?V==="onCompositionEnd"&&el&&(R=Gp()):(Pi=m,Vd="value"in Pi?Pi.value:Pi.textContent,el=!0)),N=Ma(d,V),0<N.length&&(V=new ym(V,e,null,n,m),h.push({event:V,listeners:N}),R?V.data=R:(R=Op(n),R!==null&&(V.data=R)))),(R=vT?CT(e,n):TT(e,n))&&(V=Ma(d,"onBeforeInput"),0<V.length&&(N=new ym("onBeforeInput","beforeinput",null,n,m),h.push({event:N,listeners:V}),N.data=R)),db(h,e,d,n,m)}$x(h,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ma(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||l===null||(o=Dr(e,n),o!=null&&i.unshift($r(e,o,l)),o=Dr(e,t),o!=null&&i.push($r(e,o,l))),e.tag===3)return i;e=e.return}return[]}function Fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uh(e,t,n,i,o){for(var l=t._reactName,c=[];n!==null&&n!==i;){var u=n,f=u.alternate,d=u.stateNode;if(u=u.tag,f!==null&&f===i)break;u!==5&&u!==26&&u!==27||d===null||(f=d,o?(d=Dr(n,l),d!=null&&c.unshift($r(n,d,f))):o||(d=Dr(n,l),d!=null&&c.push($r(n,d,f)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var gb=/\r\n?/g,pb=/\u0000|\uFFFD/g;function dh(e){return(typeof e=="string"?e:""+e).replace(gb,`
`).replace(pb,"")}function Bx(e,t){return t=dh(t),dh(e)===t}function Qa(){}function Xe(e,t,n,i,o,l){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Sl(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Sl(e,""+i);break;case"className":ws(e,"class",i);break;case"tabIndex":ws(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(e,n,i);break;case"style":Bp(e,i,l);break;case"data":if(t!=="object"){ws(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=zs(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&Xe(e,t,"name",o.name,o,null),Xe(e,t,"formEncType",o.formEncType,o,null),Xe(e,t,"formMethod",o.formMethod,o,null),Xe(e,t,"formTarget",o.formTarget,o,null)):(Xe(e,t,"encType",o.encType,o,null),Xe(e,t,"method",o.method,o,null),Xe(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=zs(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Qa);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(F(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=zs(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),Bs(e,"popover",i);break;case"xlinkActuate":ti(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ti(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ti(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ti(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ti(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ti(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ti(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ti(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ti(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Bs(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=OC.get(n)||n,Bs(e,n,i))}}function ed(e,t,n,i,o,l){switch(n){case"style":Bp(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(F(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Sl(e,i):(typeof i=="number"||typeof i=="bigint")&&Sl(e,""+i);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lp.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),l=e[Zt]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,o),typeof i=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Bs(e,n,i)}}}function Lt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var i=!1,o=!1,l;for(l in n)if(n.hasOwnProperty(l)){var c=n[l];if(c!=null)switch(l){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(F(137,t));default:Xe(e,t,l,c,n,null)}}o&&Xe(e,t,"srcSet",n.srcSet,n,null),i&&Xe(e,t,"src",n.src,n,null);return;case"input":Ve("invalid",e);var u=l=c=o=null,f=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":o=m;break;case"type":c=m;break;case"checked":f=m;break;case"defaultChecked":d=m;break;case"value":l=m;break;case"defaultValue":u=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(F(137,t));break;default:Xe(e,t,i,m,n,null)}}Vp(e,l,u,f,d,c,o,!1),sa(e);return;case"select":Ve("invalid",e),i=c=l=null;for(o in n)if(n.hasOwnProperty(o)&&(u=n[o],u!=null))switch(o){case"value":l=u;break;case"defaultValue":c=u;break;case"multiple":i=u;default:Xe(e,t,o,u,n,null)}t=l,n=c,e.multiple=!!i,t!=null?ul(e,!!i,t,!1):n!=null&&ul(e,!!i,n,!0);return;case"textarea":Ve("invalid",e),l=o=i=null;for(c in n)if(n.hasOwnProperty(c)&&(u=n[c],u!=null))switch(c){case"value":i=u;break;case"defaultValue":o=u;break;case"children":l=u;break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(F(91));break;default:Xe(e,t,c,u,n,null)}Hp(e,i,o,l),sa(e);return;case"option":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Xe(e,t,f,i,n,null)}return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(i=0;i<Vr.length;i++)Ve(Vr[i],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(F(137,t));default:Xe(e,t,d,i,n,null)}return;default:if(Ud(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&ed(e,t,m,i,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!=null&&Xe(e,t,u,i,n,null))}function yb(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,c=null,u=null,f=null,d=null,m=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&h!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":f=h;default:i.hasOwnProperty(p)||Xe(e,t,p,null,i,h)}}for(var g in i){var p=i[g];if(h=n[g],i.hasOwnProperty(g)&&(p!=null||h!=null))switch(g){case"type":l=p;break;case"name":o=p;break;case"checked":d=p;break;case"defaultChecked":m=p;break;case"value":c=p;break;case"defaultValue":u=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(F(137,t));break;default:p!==h&&Xe(e,t,g,p,i,h)}}wu(e,c,u,f,d,m,l,o);return;case"select":p=c=u=g=null;for(l in n)if(f=n[l],n.hasOwnProperty(l)&&f!=null)switch(l){case"value":break;case"multiple":p=f;default:i.hasOwnProperty(l)||Xe(e,t,l,null,i,f)}for(o in i)if(l=i[o],f=n[o],i.hasOwnProperty(o)&&(l!=null||f!=null))switch(o){case"value":g=l;break;case"defaultValue":u=l;break;case"multiple":c=l;default:l!==f&&Xe(e,t,o,l,i,f)}t=u,n=c,i=p,g!=null?ul(e,!!n,g,!1):!!i!=!!n&&(t!=null?ul(e,!!n,t,!0):ul(e,!!n,n?[]:"",!1));return;case"textarea":p=g=null;for(u in n)if(o=n[u],n.hasOwnProperty(u)&&o!=null&&!i.hasOwnProperty(u))switch(u){case"value":break;case"children":break;default:Xe(e,t,u,null,i,o)}for(c in i)if(o=i[c],l=n[c],i.hasOwnProperty(c)&&(o!=null||l!=null))switch(c){case"value":g=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(F(91));break;default:o!==l&&Xe(e,t,c,o,i,l)}$p(e,g,p);return;case"option":for(var b in n)if(g=n[b],n.hasOwnProperty(b)&&g!=null&&!i.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Xe(e,t,b,null,i,g)}for(f in i)if(g=i[f],p=n[f],i.hasOwnProperty(f)&&g!==p&&(g!=null||p!=null))switch(f){case"selected":e.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Xe(e,t,f,g,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)g=n[S],n.hasOwnProperty(S)&&g!=null&&!i.hasOwnProperty(S)&&Xe(e,t,S,null,i,g);for(d in i)if(g=i[d],p=n[d],i.hasOwnProperty(d)&&g!==p&&(g!=null||p!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(F(137,t));break;default:Xe(e,t,d,g,i,p)}return;default:if(Ud(t)){for(var M in n)g=n[M],n.hasOwnProperty(M)&&g!==void 0&&!i.hasOwnProperty(M)&&ed(e,t,M,void 0,i,g);for(m in i)g=i[m],p=n[m],!i.hasOwnProperty(m)||g===p||g===void 0&&p===void 0||ed(e,t,m,g,i,p);return}}for(var x in n)g=n[x],n.hasOwnProperty(x)&&g!=null&&!i.hasOwnProperty(x)&&Xe(e,t,x,null,i,g);for(h in i)g=i[h],p=n[h],!i.hasOwnProperty(h)||g===p||g==null&&p==null||Xe(e,t,h,g,i,p)}var td=null,nd=null;function Aa(e){return e.nodeType===9?e:e.ownerDocument}function fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zx(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cu=null;function xb(){var e=window.event;return e&&e.type==="popstate"?e===cu?!1:(cu=e,!0):(cu=null,!1)}var Gx=typeof setTimeout=="function"?setTimeout:void 0,vb=typeof clearTimeout=="function"?clearTimeout:void 0,mh=typeof Promise=="function"?Promise:void 0,Cb=typeof queueMicrotask=="function"?queueMicrotask:typeof mh<"u"?function(e){return mh.resolve(null).then(e).catch(Tb)}:Gx;function Tb(e){setTimeout(function(){throw e})}function eo(e){return e==="head"}function hh(e,t){var n=t,i=0,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(0<i&&8>i){n=i;var c=e.ownerDocument;if(n&1&&_r(c.documentElement),n&2&&_r(c.body),n&4)for(n=c.head,_r(n),c=n.firstChild;c;){var u=c.nextSibling,f=c.nodeName;c[Kr]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=u}}if(o===0){e.removeChild(l),Fr(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:i=n.charCodeAt(0)-48;else i=0;n=l}while(n);Fr(t)}function od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),Ld(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function bb(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Kr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Pn(e.nextSibling),e===null)break}return null}function Sb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Pn(e.nextSibling),e===null))return null;return e}function ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function wb(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var rd=null;function gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Fx(e,t,n){switch(t=Aa(n),e){case"html":if(e=t.documentElement,!e)throw Error(F(452));return e;case"head":if(e=t.head,!e)throw Error(F(453));return e;case"body":if(e=t.body,!e)throw Error(F(454));return e;default:throw Error(F(451))}}function _r(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ld(e)}var Nn=new Map,ph=new Set;function ka(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yi=Fe.d;Fe.d={f:Eb,r:Mb,D:Ab,C:kb,L:_b,m:Nb,X:Db,S:Rb,M:jb};function Eb(){var e=yi.f(),t=Wa();return e||t}function Mb(e){var t=Ll(e);t!==null&&t.tag===5&&t.type==="form"?Py(t):yi.r(e)}var Vl=typeof document>"u"?null:document;function qx(e,t,n){var i=Vl;if(i&&typeof t=="string"&&t){var o=En(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),ph.has(o)||(ph.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Lt(t,"link",e),Nt(t),i.head.appendChild(t)))}}function Ab(e){yi.D(e),qx("dns-prefetch",e,null)}function kb(e,t){yi.C(e,t),qx("preconnect",e,t)}function _b(e,t,n){yi.L(e,t,n);var i=Vl;if(i&&e&&t){var o='link[rel="preload"][as="'+En(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+En(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+En(n.imageSizes)+'"]')):o+='[href="'+En(e)+'"]';var l=o;switch(t){case"style":l=Rl(e);break;case"script":l=$l(e)}Nn.has(l)||(e=rt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Nn.set(l,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(ss(l))||t==="script"&&i.querySelector(as(l))||(t=i.createElement("link"),Lt(t,"link",e),Nt(t),i.head.appendChild(t)))}}function Nb(e,t){yi.m(e,t);var n=Vl;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+En(i)+'"][href="'+En(e)+'"]',l=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=$l(e)}if(!Nn.has(l)&&(e=rt({rel:"modulepreload",href:e},t),Nn.set(l,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(as(l)))return}i=n.createElement("link"),Lt(i,"link",e),Nt(i),n.head.appendChild(i)}}}function Rb(e,t,n){yi.S(e,t,n);var i=Vl;if(i&&e){var o=cl(i).hoistableStyles,l=Rl(e);t=t||"default";var c=o.get(l);if(!c){var u={loading:0,preload:null};if(c=i.querySelector(ss(l)))u.loading=5;else{e=rt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Nn.get(l))&&vf(e,n);var f=c=i.createElement("link");Nt(f),Lt(f,"link",e),f._p=new Promise(function(d,m){f.onload=d,f.onerror=m}),f.addEventListener("load",function(){u.loading|=1}),f.addEventListener("error",function(){u.loading|=2}),u.loading|=4,Ks(c,t,i)}c={type:"stylesheet",instance:c,count:1,state:u},o.set(l,c)}}}function Db(e,t){yi.X(e,t);var n=Vl;if(n&&e){var i=cl(n).hoistableScripts,o=$l(e),l=i.get(o);l||(l=n.querySelector(as(o)),l||(e=rt({src:e,async:!0},t),(t=Nn.get(o))&&Cf(e,t),l=n.createElement("script"),Nt(l),Lt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function jb(e,t){yi.M(e,t);var n=Vl;if(n&&e){var i=cl(n).hoistableScripts,o=$l(e),l=i.get(o);l||(l=n.querySelector(as(o)),l||(e=rt({src:e,async:!0,type:"module"},t),(t=Nn.get(o))&&Cf(e,t),l=n.createElement("script"),Nt(l),Lt(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function yh(e,t,n,i){var o=(o=Bi.current)?ka(o):null;if(!o)throw Error(F(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Rl(n.href),n=cl(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Rl(n.href);var l=cl(o).hoistableStyles,c=l.get(e);if(c||(o=o.ownerDocument||o,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,c),(l=o.querySelector(ss(e)))&&!l._p&&(c.instance=l,c.state.loading=5),Nn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nn.set(e,n),l||Ib(o,e,n,c.state))),t&&i===null)throw Error(F(528,""));return c}if(t&&i!==null)throw Error(F(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$l(n),n=cl(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(F(444,e))}}function Rl(e){return'href="'+En(e)+'"'}function ss(e){return'link[rel="stylesheet"]['+e+"]"}function Ox(e){return rt({},e,{"data-precedence":e.precedence,precedence:null})}function Ib(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Lt(t,"link",n),Nt(t),e.head.appendChild(t))}function $l(e){return'[src="'+En(e)+'"]'}function as(e){return"script[async]"+e}function xh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+En(n.href)+'"]');if(i)return t.instance=i,Nt(i),i;var o=rt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Nt(i),Lt(i,"style",o),Ks(i,n.precedence,e),t.instance=i;case"stylesheet":o=Rl(n.href);var l=e.querySelector(ss(o));if(l)return t.state.loading|=4,t.instance=l,Nt(l),l;i=Ox(n),(o=Nn.get(o))&&vf(i,o),l=(e.ownerDocument||e).createElement("link"),Nt(l);var c=l;return c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(l,"link",i),t.state.loading|=4,Ks(l,n.precedence,e),t.instance=l;case"script":return l=$l(n.src),(o=e.querySelector(as(l)))?(t.instance=o,Nt(o),o):(i=n,(o=Nn.get(l))&&(i=rt({},n),Cf(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Nt(o),Lt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(F(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Ks(i,n.precedence,e));return t.instance}function Ks(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,l=o,c=0;c<i.length;c++){var u=i[c];if(u.dataset.precedence===t)l=u;else if(l!==o)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function vf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zs=null;function vh(e,t,n){if(Zs===null){var i=new Map,o=Zs=new Map;o.set(n,i)}else o=Zs,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var l=n[o];if(!(l[Kr]||l[$t]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var c=l.getAttribute(t)||"";c=e+c;var u=i.get(c);u?u.push(l):i.set(c,[l])}}return i}function Ch(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Lb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yx(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Hr=null;function Ub(){}function Pb(e,t,n){if(Hr===null)throw Error(F(475));var i=Hr;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=Rl(n.href),l=e.querySelector(ss(o));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=_a.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=l,Nt(l);return}l=e.ownerDocument||e,n=Ox(n),(o=Nn.get(o))&&vf(n,o),l=l.createElement("link"),Nt(l);var c=l;c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(l,"link",n),t.instance=l}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=_a.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Vb(){if(Hr===null)throw Error(F(475));var e=Hr;return e.stylesheets&&e.count===0&&sd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&sd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function _a(){if(this.count--,this.count===0){if(this.stylesheets)sd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Na=null;function sd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Na=new Map,t.forEach($b,e),Na=null,_a.call(e))}function $b(e,t){if(!(t.state.loading&4)){var n=Na.get(e);if(n)var i=n.get(null);else{n=new Map,Na.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<o.length;l++){var c=o[l];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),i=c)}i&&n.set(null,i)}o=t.instance,c=o.getAttribute("data-precedence"),l=n.get(c)||i,l===i&&n.set(null,o),n.set(c,o),this.count++,i=_a.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),l?l.parentNode.insertBefore(o,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Br={$$typeof:ri,Provider:null,Consumer:null,_currentValue:po,_currentValue2:po,_threadCount:0};function Hb(e,t,n,i,o,l,c,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rc(0),this.hiddenUpdates=Rc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=l,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Jx(e,t,n,i,o,l,c,u,f,d,m,h){return e=new Hb(e,t,n,c,u,f,d,h),t=1,l===!0&&(t|=24),l=un(3,null,null,t),e.current=l,l.stateNode=e,t=Yd(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:i,isDehydrated:n,cache:t},Xd(l),e}function Xx(e){return e?(e=ol,e):ol}function Wx(e,t,n,i,o,l){o=Xx(o),i.context===null?i.context=o:i.pendingContext=o,i=zi(t),i.payload={element:n},l=l===void 0?null:l,l!==null&&(i.callback=l),n=Gi(e,i,t),n!==null&&(hn(n,e,t),Tr(n,e,t))}function Th(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tf(e,t){Th(e,t),(e=e.alternate)&&Th(e,t)}function Kx(e){if(e.tag===13){var t=Ul(e,67108864);t!==null&&hn(t,e,67108864),Tf(e,67108864)}}var Ra=!0;function Bb(e,t,n,i){var o=Se.T;Se.T=null;var l=Fe.p;try{Fe.p=2,bf(e,t,n,i)}finally{Fe.p=l,Se.T=o}}function zb(e,t,n,i){var o=Se.T;Se.T=null;var l=Fe.p;try{Fe.p=8,bf(e,t,n,i)}finally{Fe.p=l,Se.T=o}}function bf(e,t,n,i){if(Ra){var o=ad(i);if(o===null)au(e,t,i,Da,n),bh(e,i);else if(Fb(o,e,t,n,i))i.stopPropagation();else if(bh(e,i),t&4&&-1<Gb.indexOf(e)){for(;o!==null;){var l=Ll(o);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=mo(l.pendingLanes);if(c!==0){var u=l;for(u.pendingLanes|=2,u.entangledLanes|=2;c;){var f=1<<31-fn(c);u.entanglements[1]|=f,c&=~f}Wn(l),!(Ye&6)&&(ba=Yn()+500,rs(0))}}break;case 13:u=Ul(l,2),u!==null&&hn(u,l,2),Wa(),Tf(l,2)}if(l=ad(i),l===null&&au(e,t,i,Da,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else au(e,t,i,null,n)}}function ad(e){return e=Pd(e),Sf(e)}var Da=null;function Sf(e){if(Da=null,e=Zo(e),e!==null){var t=Yr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=bp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Da=e,null}function Zx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kC()){case Mp:return 2;case Ap:return 8;case ra:case _C:return 32;case kp:return 268435456;default:return 32}default:return 32}}var cd=!1,Oi=null,Yi=null,Ji=null,zr=new Map,Gr=new Map,Li=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function sr(e,t,n,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=Ll(t),t!==null&&Kx(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Fb(e,t,n,i,o){switch(t){case"focusin":return Oi=sr(Oi,e,t,n,i,o),!0;case"dragenter":return Yi=sr(Yi,e,t,n,i,o),!0;case"mouseover":return Ji=sr(Ji,e,t,n,i,o),!0;case"pointerover":var l=o.pointerId;return zr.set(l,sr(zr.get(l)||null,e,t,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Gr.set(l,sr(Gr.get(l)||null,e,t,n,i,o)),!0}return!1}function Qx(e){var t=Zo(e.target);if(t!==null){var n=Yr(t);if(n!==null){if(t=n.tag,t===13){if(t=bp(n),t!==null){e.blockedOn=t,PC(e.priority,function(){if(n.tag===13){var i=mn();i=jd(i);var o=Ul(n,i);o!==null&&hn(o,n,i),Tf(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ad(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Mu=i,n.target.dispatchEvent(i),Mu=null}else return t=Ll(n),t!==null&&Kx(t),e.blockedOn=n,!1;t.shift()}return!0}function Sh(e,t,n){Qs(e)&&n.delete(t)}function qb(){cd=!1,Oi!==null&&Qs(Oi)&&(Oi=null),Yi!==null&&Qs(Yi)&&(Yi=null),Ji!==null&&Qs(Ji)&&(Ji=null),zr.forEach(Sh),Gr.forEach(Sh)}function Ds(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,qb)))}var js=null;function wh(e){js!==e&&(js=e,At.unstable_scheduleCallback(At.unstable_NormalPriority,function(){js===e&&(js=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Sf(i||n)===null)continue;break}var l=Ll(n);l!==null&&(e.splice(t,3),t-=3,zu(l,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Fr(e){function t(f){return Ds(f,e)}Oi!==null&&Ds(Oi,e),Yi!==null&&Ds(Yi,e),Ji!==null&&Ds(Ji,e),zr.forEach(t),Gr.forEach(t);for(var n=0;n<Li.length;n++){var i=Li[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)Qx(n),n.blockedOn===null&&Li.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],l=n[i+1],c=o[Zt]||null;if(typeof l=="function")c||wh(n);else if(c){var u=null;if(l&&l.hasAttribute("formAction")){if(o=l,c=l[Zt]||null)u=c.formAction;else if(Sf(o)!==null)continue}else u=c.action;typeof u=="function"?n[i+1]=u:(n.splice(i,3),i-=3),wh(n)}}}function wf(e){this._internalRoot=e}ec.prototype.render=wf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));var n=t.current,i=mn();Wx(n,i,e,t,null,null)};ec.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wx(e.current,2,null,e,null,null),Wa(),t[Il]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var t=jp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Li.length&&t!==0&&t<Li[n].priority;n++);Li.splice(n,0,e),n===0&&Qx(e)}};var Eh=Cp.version;if(Eh!=="19.1.1")throw Error(F(527,Eh,"19.1.1"));Fe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=TC(t),e=e!==null?Sp(e):null,e=e===null?null:e.stateNode,e};var Ob={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Se,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{Jr=Is.inject(Ob),dn=Is}catch{}}Va.createRoot=function(e,t){if(!Tp(e))throw Error(F(299));var n=!1,i="",o=Jy,l=Xy,c=Wy,u=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(u=t.unstable_transitionCallbacks)),t=Jx(e,1,!1,null,null,n,i,o,l,c,u,null),e[Il]=t.current,xf(e),new wf(t)};Va.hydrateRoot=function(e,t,n){if(!Tp(e))throw Error(F(299));var i=!1,o="",l=Jy,c=Xy,u=Wy,f=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(u=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(f=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=Jx(e,1,!0,t,n??null,i,o,l,c,u,f,d),t.context=Xx(null),n=t.current,i=mn(),i=jd(i),o=zi(i),o.callback=null,Gi(n,o,i),n=i,t.current.lanes=n,Wr(t,n),Wn(t),e[Il]=t.current,xf(e),new ec(t)};Va.version="19.1.1";function ev(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ev)}catch(e){console.error(e)}}ev(),hp.exports=Va;var Yb=hp.exports;const Jb=op(Yb),Ls=(e,t,n,i)=>{const o=[];for(let l=1;l<=i;l++){const c=l/i,u=1-c,f=u*u*e.x+2*u*c*t.x+c*c*n.x,d=u*u*e.y+2*u*c*t.y+c*c*n.y;o.push({x:f,y:d})}return o},tv=(e,t)=>{const n=e.length;if(n<2)return e;const i=[],o=8;if(t){if(n<3)return e;const l={x:(e[n-1].x+e[0].x)/2,y:(e[n-1].y+e[0].y)/2};i.push(l);for(let c=0;c<n;c++){const u=e[c],f=e[(c+1)%n],d=u,m={x:(u.x+f.x)/2,y:(u.y+f.y)/2},h=i[i.length-1];i.push(...Ls(h,d,m,o))}}else{if(n<3)return e;i.push(e[0]);const l={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};i.push(...Ls(e[0],e[0],l,o));for(let u=1;u<n-1;u++){const f=e[u-1],d=e[u],m=e[u+1],h={x:(f.x+d.x)/2,y:(f.y+d.y)/2},g=d,p={x:(d.x+m.x)/2,y:(d.y+m.y)/2};i.push(...Ls(h,g,p,o))}const c={x:(e[n-2].x+e[n-1].x)/2,y:(e[n-2].y+e[n-1].y)/2};i.push(...Ls(c,e[n-1],e[n-1],o))}return i},Xb=e=>{const t=e.points.filter(n=>n);return t.length<2?t:e.smooth?tv(t,e.isClosed):t},yl=(e,t,n)=>{const i=e.filter(c=>c);if(i.length===0)return"";if(i.length<2){let c=`M ${i[0].x} ${i[0].y}`;return n&&(c+=" Z"),c}const o=t?tv(i,n):i;let l=kf(o);return n&&(l+=" Z"),l},Ef=e=>{const{x:t,y:n,width:i,height:o,start:l,extent:c,style:u}=e;if(i<=0||o<=0||c===0)return"";const f=i/2,d=o/2,m=t+f,h=n+d;if(Math.abs(c)>=360){const A=m+f,N=h,R=m-f,K=`A ${f} ${d} 0 0 0 ${R} ${h}`,U=`A ${f} ${d} 0 0 0 ${A} ${N}`;return`M ${A} ${N} ${K} ${U}`}const g=l*Math.PI/180,p=(l+c)*Math.PI/180,b=m+f*Math.cos(g),S=h-d*Math.sin(g),M=m+f*Math.cos(p),x=h-d*Math.sin(p),y=Math.abs(c)>180?1:0,T=c>0?0:1,C=`A ${f} ${d} 0 ${y} ${T} ${M} ${x}`;return u==="arc"?`M ${b} ${S} ${C}`:u==="chord"?`M ${b} ${S} ${C} Z`:`M ${m} ${h} L ${b} ${S} ${C} Z`},qr=e=>{const{x:t,y:n,width:i,height:o,topVertexOffset:l=0,isFlippedVertically:c}=e,f=t+i/2+l*i;return c?[{x:f,y:n+o},{x:t+i,y:n},{x:t,y:n}]:[{x:f,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Mf=e=>{const{x:t,y:n,width:i,height:o,isFlippedHorizontally:l,isFlippedVertically:c}=e;let u=[{x:t,y:n+o},{x:t,y:n},{x:t+i,y:n+o}];if(l){const f=t+i/2;u=u.map(d=>({x:f-(d.x-f),y:d.y}))}if(c){const f=n+o/2;u=u.map(d=>({x:d.x,y:f-(d.y-f)}))}return u},Af=e=>{const{x:t,y:n,width:i,height:o}=e;return[{x:t+i/2,y:n},{x:t+i,y:n+o/2},{x:t+i/2,y:n+o},{x:t,y:n+o/2}]},tc=e=>{const{x:t,y:n,width:i,height:o,topLeftOffsetRatio:l,topRightOffsetRatio:c,isFlippedVertically:u}=e,f=i*l,d=i*c;return u?[{x:t,y:n},{x:t+i,y:n},{x:t+i-d,y:n+o},{x:t+f,y:n+o}]:[{x:t+f,y:n},{x:t+i-d,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},nc=e=>{const{x:t,y:n,width:i,height:o,angle:l,isFlippedVertically:c}=e;if(o===0)return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}];const f=Math.max(1,Math.min(179,l))*Math.PI/180,d=o/Math.tan(f),m=i-Math.abs(d);return m<0?[{x:t,y:n},{x:t,y:n},{x:t,y:n},{x:t,y:n}]:c?d>=0?[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t+d,y:n+o}]:[{x:t-d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:d>=0?[{x:t+d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t-d,y:n+o}]},Dl=e=>{const t=[],{cx:n,cy:i,radius:o,sides:l,innerRadius:c,isFlippedHorizontally:u,isFlippedVertically:f}=e,d=Math.PI*2/l,m=-Math.PI/2,h=c!==void 0,g=h?l*2:l;for(let p=0;p<g;p++){const b=h&&p%2!==0?c:o;if(b===void 0)continue;const S=p*d/(h?2:1)+m;let M=n+Math.cos(S)*b,x=i+Math.sin(S)*b;u&&(M=n-(M-n)),f&&(x=i-(x-i)),t.push({x:M,y:x})}return t},kf=e=>{const t=e.filter(o=>o);if(t.length===0)return"";const[n,...i]=t;return`M ${n.x} ${n.y} ${i.map(o=>`L ${o.x} ${o.y}`).join(" ")}`},nv=e=>{if(!e.isClosed)return!1;let t=[...e.points].filter(o=>o);if(t.length>1&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&t.pop(),t.length!==4)return!1;const n=new Set(t.map(o=>o.x)),i=new Set(t.map(o=>o.y));return!(n.size!==2||i.size!==2)},Wb=e=>{const{radius:t,sides:n}=e;return n<2?0:2*t*Math.sin(Math.PI/n)},Kb=e=>{const{sideLength:t,sides:n}=e;return n<2?0:t/(2*Math.sin(Math.PI/n))},iv=e=>{const n=document.createElement("canvas").getContext("2d");return n&&(n.font=e),n},ic=e=>{const{text:t,font:n,fontSize:i,weight:o,slant:l,width:c}=e,u=`${l==="italic"?"italic":"normal"} ${o} ${i}px ${n}`,f=iv(u);if(!f)return t.split(`
`);const d=t.split(`
`),m=[];return d.forEach(h=>{if(c<=0){m.push(h);return}const g=h.split(" ");let p="";for(let b=0;b<g.length;b++){const S=g[b],M=p+(p?" ":"")+S;f.measureText(M).width>c&&b>0?(m.push(p),p=S):p=M}m.push(p)}),m},Zi=e=>{const{font:t,fontSize:n,weight:i,slant:o}=e,l=ic(e);if(l.length===0)return{x:e.x,y:e.y,width:0,height:0};const c=`${o==="italic"?"italic":"normal"} ${i} ${n}px ${t}`,u=iv(c);if(!u){const x=Math.max(...l.map(y=>y.length))*n*.6;return{x:e.x,y:e.y,width:x,height:l.length*n*1.2}}const f=u.measureText("M"),d=f.fontBoundingBoxAscent??n*.8,m=f.fontBoundingBoxDescent??n*.2,h=d+m,g=n*.2,p=h+(l.length-1)*(h+g),b=Math.max(...l.map(x=>u.measureText(x).width));let{x:S,y:M}=e;return["n","s","center"].includes(e.anchor)?S-=b/2:["ne","e","se"].includes(e.anchor)&&(S-=b),["w","e","center"].includes(e.anchor)?M-=p/2:["sw","s","se"].includes(e.anchor)&&(M-=p),{x:S,y:M,width:b,height:p}},Or=e=>{let t;switch(e.type){case"rectangle":case"arc":return{x:e.x,y:e.y,width:e.width,height:e.height};case"ellipse":return{x:e.cx-e.rx,y:e.cy-e.ry,width:e.rx*2,height:e.ry*2};case"text":return Zi(e);case"image":case"bitmap":return{x:e.x,y:e.y,width:e.width,height:e.height};case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"polygon":case"star":t=Kn({...e,rotation:0})??[];break;case"bezier":case"polyline":t=e.points;break;case"line":case"pencil":t=e.points;break;default:return null}if(!t||t.length===0)return null;const n=t.filter(d=>!!d);if(n.length===0)return null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},St=e=>{if("cx"in e&&"cy"in e)return{x:e.cx,y:e.cy};const t="rotation"in e&&e.rotation!==0?{...e,rotation:0}:e,n=Or(t);return n?{x:n.x+n.width/2,y:n.y+n.height/2}:"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x+e.width/2,y:e.y+e.height/2}:null},qe=(e,t,n)=>{const i=n*(Math.PI/180),o=Math.cos(i),l=Math.sin(i),c=e.x-t.x,u=e.y-t.y;return{x:c*o-u*l+t.x,y:c*l+u*o+t.y}};function Kn(e,t){let n;switch(e.type){case"line":case"pencil":n=e.points.filter(y=>y);break;case"polyline":case"bezier":n=Xb(e);break;case"rectangle":case"image":case"bitmap":n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];break;case"text":{const y=Zi(e);if(!y)return null;n=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}]}break;case"triangle":n=qr(e);break;case"right-triangle":n=Mf(e);break;case"rhombus":n=Af(e);break;case"trapezoid":n=tc(e);break;case"parallelogram":n=nc(e);break;case"polygon":case"star":n=Dl(e);break;case"ellipse":const i=e,o=Math.max(24,Math.round(Math.max(i.rx,i.ry)/4));n=Dl({id:e.id,cx:i.cx,cy:i.cy,radius:i.rx,sides:o,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth}).map(y=>({x:y.x,y:i.cy+(y.y-i.cy)*(i.ry/i.rx)}));break;case"arc":const{x:l,y:c,width:u,height:f,start:d,extent:m,style:h}=e,g=u/2,p=f/2,b=l+g,S=c+p,M=32,x=m/M;n=[],h==="pieslice"&&n.push({x:b,y:S});for(let y=0;y<=M;y++){const C=(d+y*x)*Math.PI/180;n.push({x:b+g*Math.cos(C),y:S-p*Math.sin(C)})}h==="pieslice"&&n.push({x:b,y:S});break;default:return null}if("rotation"in e&&e.rotation!==0){const i=t??(e.type==="text"?{x:e.x,y:e.y}:St(e));return i?n.map(o=>qe(o,i,e.rotation)):n}return n}const ud=(e,t)=>{const n=Kn(e,t);if(!n||n.length===0)return"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x,y:e.y,width:e.width,height:e.height}:"cx"in e&&"cy"in e?{x:e.cx,y:e.cy,width:0,height:0}:null;const i=n.map(d=>d.x),o=n.map(d=>d.y),l=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:l,y:c,width:u-l,height:f-c}},_f=e=>{if(e.type==="bezier"||e.type==="polyline"||e.type==="pencil"||e.type==="line")return e.points.filter(o=>o);const t={...e,rotation:0},n=Kn(t);if(!n||n.length===0)return null;let i=e.type==="arc"&&(e.style==="pieslice"||e.style==="chord")||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","image","bitmap","text"].includes(e.type);if(e.type==="arc"&&e.style==="arc"&&(i=!1),i&&n.length>1){const o=n[0],l=n[n.length-1];if(Math.abs(o.x-l.x)<.01&&Math.abs(o.y-l.y)<.01)return n.slice(0,-1)}return n};function Zb(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},l=o.x*o.x+o.y*o.y;if(l===0)return{point:t,t:0};let u=(i.x*o.x+i.y*o.y)/l;return u=Math.max(0,Math.min(1,u)),{point:{x:t.x+o.x*u,y:t.y+o.y*u},t:u}}const ct={select:"Вибрати","edit-points":"Редагувати вузли",rectangle:"Прямокутник",square:"Квадрат",circle:"Коло",ellipse:"Еліпс",line:"Лінія",pencil:"Олівець",triangle:"Трикутник","right-triangle":"Прямокутний трикутник",polygon:"Багатокутник",star:"Зірка",polyline:"Ламана",rhombus:"Ромб",trapezoid:"Трапеція",parallelogram:"Паралелограм",bezier:"Крива Без'є",arc:"Дуга",pieslice:"Сектор",chord:"Сегмент",text:"Текст",image:"Зображення",bitmap:"Bitmap"},ea=[{name:"Суцільна лінія",pattern:[],description:"Суцільна лінія без штрихів."},{name:"Простий пунктир",pattern:[5,3],description:"Штрих 5px, пропуск 3px."},{name:"Довгі штрихи",pattern:[10,5],description:"Штрих 10px, пропуск 5px."},{name:"Дрібні точки",pattern:[2,2],description:"Штрих 2px, пропуск 2px (виглядає як точки)."},{name:"Розріджені точки",pattern:[2,4],description:"Штрих 2px, пропуск 4px."},{name:"Штрих-пунктир",pattern:[10,3,2,3],description:"Штрих 10px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Штрих і 2 точки",pattern:[15,3,2,3,2,3],description:"Штрих 15px, пропуск 3px, штрих 2px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Подвійна точка",pattern:[2,3,2,6],description:"Штрих 2px, пропуск 3px, штрих 2px, пропуск 6px."},{name:"Довгий+короткий штрих",pattern:[20,5,5,5],description:"Штрих 20px, пропуск 5px, штрих 5px, пропуск 5px."}],ov=e=>{if(e.type==="text")return"text";if(e.type==="image")return"image";if(e.type==="bitmap")return"bitmap";if(e.type==="ellipse"&&e.isAspectRatioLocked)return"oval";if(e.type==="arc")return e.rotation===0?"arc":e.style==="arc"?"line":"polygon";if(!("rotation"in e)||e.rotation===0){if(e.type==="rectangle")return"rectangle";if(e.type==="ellipse")return"oval";if(e.type==="polyline"&&e.isClosed&&nv(e))return"rectangle"}return e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed?"line":"polygon"},qt=e=>{if(e.type==="arc")return ct[e.style];const t=ov(e);return t==="polygon"&&e.type!=="polygon"&&e.type!=="star"?"Багатокутник":t==="rectangle"&&e.type==="polyline"?ct.rectangle:e.type==="rectangle"&&e.isAspectRatioLocked?ct.square:e.type==="ellipse"&&e.isAspectRatioLocked?ct.circle:e.type==="polyline"?e.isClosed?"Багатокутник":ct.polyline:e.type==="bezier"?e.isClosed?"Багатокутник":ct.bezier:ct[e.type]},dd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M23 4v6h-6'/%3E%3Cpath d='M20.49 15a9 9 0 1 1-2.12-9.36L23 10'/%3E%3C/svg%3E") 10 10, auto`,fd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M3 9 L21 9 L17 5'/%3E%3Cpath d='M21 15 L3 15 L7 19'/%3E%3C/svg%3E") 10 10, auto`,Qb=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M4.2 3.2l14 8-6 2-2 6-6-14z' fill='white' stroke-width='0'/%3E%3Cpath d='M14 18h6m-3-3v6' stroke='white' stroke-width='2.5' stroke-linecap='round' fill='none'/%3E%3C/svg%3E") 4 3, auto`,oc=e=>e.startsWith("Tk")?e==="TkFixedFont"?"monospace":"sans-serif":e.includes(" ")?`"${e}", sans-serif`:`${e}, sans-serif`,lv=new Set(Object.values(ct));lv.add("Багатокутник");const ja=e=>lv.has(e),e1=8,t1=24,n1=20,i1=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";default:return"default"}},o1=({shape:e,setAction:t,svgRef:n,activeTool:i,getSnappedMousePosition:o,viewTransform:l,getPointerPosition:c,activePointIndex:u,setActivePointIndex:f,updateShape:d,action:m})=>{if(!e)return null;const h=e1/l.scale,g=t1/l.scale,p=1/l.scale,b=n1/l.scale,S=e.type==="text"?{x:e.x,y:e.y}:St(e);if(!S)return null;const M="rotation"in e?e.rotation??0:0,x=E.useMemo(()=>e?(m==null?void 0:m.type)==="point-editing"&&"rotation"in m.initialShape&&m.initialShape.rotation!==0?ud(e,m.center):ud(e):null,[e,m]),y=x&&r.jsxs("g",{style:{pointerEvents:"none"},children:[r.jsx("rect",{x:x.x,y:x.y,width:x.width,height:x.height,fill:"none",stroke:"var(--text-tertiary)",strokeWidth:p,strokeDasharray:`${3/l.scale} ${3/l.scale}`}),r.jsx("circle",{cx:x.x,cy:x.y,r:h/2.5,fill:"var(--text-tertiary)"}),r.jsx("circle",{cx:x.x+x.width,cy:x.y+x.height,r:h/2.5,fill:"var(--text-tertiary)"})]}),T=E.useMemo(()=>{if(e.type!=="text")return null;const W=e,O=h/1.5,re=O*.6;return r.jsxs("g",{style:{pointerEvents:"none"},"aria-label":"Точка прив'язки тексту",children:[r.jsx("circle",{cx:W.x,cy:W.y,r:O,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p}),r.jsx("line",{x1:W.x-re,y1:W.y,x2:W.x+re,y2:W.y,stroke:"var(--special-handle-stroke)",strokeWidth:p}),r.jsx("line",{x1:W.x,y1:W.y-re,x2:W.x,y2:W.y+re,stroke:"var(--special-handle-stroke)",strokeWidth:p})]})},[e,h,p]);if(i==="edit-points"){const W=_f(e);if(!W)return null;let O;(m==null?void 0:m.type)==="point-editing"&&M!==0?O=W.map(ye=>qe(ye,m.center,M)):O=W.map(ye=>qe(ye,S,M));const re=(ye,we)=>{ye.stopPropagation(),f(we);const Re=St(e);if(!Re)return;let Z=e;if(e.type!=="polyline"&&e.type!=="line"&&e.type!=="pencil"&&e.type!=="bezier"){const B=e.type!=="arc"||e.style!=="arc",J=Kn({...e,rotation:0});if(!J)return;const Te={id:e.id,name:void 0,type:"polyline",points:J,isClosed:B,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&B?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0,stipple:"stipple"in e?e.stipple:void 0,dash:"dash"in e?e.dash:void 0},v=e.name,G=!v||ja(v);Te.name=G?qt(Te):v,d(Te),Z=Te}t({type:"point-editing",initialShape:Z,pointIndex:we,center:Re})},Ce=(ye,we,Re)=>{ye.preventDefault(),ye.stopPropagation();const Z=o(c(ye)),B=qe(Z,S,-M),J=W[we],Te=W[Re],{point:v}=Zb(B,J,Te),G=[...W];G.splice(Re,0,v);let Y;if(e.type==="bezier")Y={...e,points:G};else if(e.type==="polyline"||e.type==="line"||e.type==="pencil")Y={...e,points:G};else{const me=e.type!=="arc"||e.style!=="arc",xe={id:e.id,name:void 0,type:"polyline",points:G,isClosed:me,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&me?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0},Le=e.name,Je=!Le||ja(Le);xe.name=Je?qt(xe):Le,Y=xe}d(Y),f(Re);const pe=St(Y);pe&&t({type:"point-editing",initialShape:Y,pointIndex:Re,center:pe})},ke=e.type==="polyline"&&e.isClosed||e.type==="bezier"&&e.isClosed||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(e.type);return r.jsxs("g",{children:[y,O.map((ye,we)=>{if(!ke&&we===O.length-1)return null;const Re=(we+1)%O.length,Z=O[Re];return r.jsx("line",{x1:ye.x,y1:ye.y,x2:Z.x,y2:Z.y,stroke:"transparent",strokeWidth:g,style:{cursor:m?"inherit":"copy"},onMouseDown:B=>Ce(B,we,Re)},`segment-${we}`)}),O.map((ye,we)=>{const Re=we===u;return r.jsxs("g",{onMouseDown:Z=>re(Z,we),onTouchStart:Z=>re(Z,we),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:ye.x,cy:ye.y,r:Re?h*.75:h/2,fill:Re?"var(--selection-stroke)":"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:ye.x,cy:ye.y,r:g/2,fill:"transparent"})]},`point-${we}`)})]})}const C=Or(e);if(!C||C.width<=0&&C.height<=0)return null;if(e.type==="line"){const[W,O]=e.points,re=qe(W,S,M),Ce=qe(O,S,M),ke=Or(e),ye=e.rotationHandlePosition,we={x:S.x,y:ye==="bottom"?ke.y+ke.height+b:ke.y-b},Re=qe(we,S,M),Z=(J,Te)=>{J.stopPropagation();const v=St(e);t({type:"resizing",handle:Te,initialShape:e,anchorPointGlobal:Te==="line-start"?Ce:re,initialShapeProps:{rotationCenter:S,geometricCenter:v,bbox:C}})},B=J=>{if(J.stopPropagation(),!n.current)return;const Te=St(e);if(!Te)return;const v="touches"in J?J.touches[0]:J;if(!v)return;const G=o(c(v)),Y=Math.atan2(G.y-Te.y,G.x-Te.x),me=e.rotation*Math.PI/180-Y;t({type:"rotating",initialShape:e,center:Te,startAngle:me})};return r.jsxs(Mt.Fragment,{children:[y,r.jsxs("g",{children:[r.jsx("line",{x1:re.x,y1:re.y,x2:Ce.x,y2:Ce.y,stroke:"var(--selection-stroke)",strokeWidth:6/l.scale,strokeOpacity:"0.3",strokeLinecap:"round",style:{pointerEvents:"none"}}),r.jsxs("g",{onMouseDown:J=>Z(J,"line-start"),onTouchStart:J=>Z(J,"line-start"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:re.x,cy:re.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:re.x,cy:re.y,r:g/2,fill:"transparent"})]}),r.jsxs("g",{onMouseDown:J=>Z(J,"line-end"),onTouchStart:J=>Z(J,"line-end"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[r.jsx("circle",{cx:Ce.x,cy:Ce.y,r:h/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:Ce.x,cy:Ce.y,r:g/2,fill:"transparent"})]}),r.jsxs("g",{onMouseDown:B,onTouchStart:B,"data-handle":"true",style:{cursor:m?"inherit":dd},children:[r.jsx("line",{x1:S.x,y1:S.y,x2:Re.x,y2:Re.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:Re.x,cy:Re.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-M} ${Re.x} ${Re.y})`}),r.jsx("circle",{cx:Re.x,cy:Re.y,r:g/2,fill:"transparent"})]})]})]})}const A=[{name:"top-left",x:C.x,y:C.y},{name:"top-center",x:C.x+C.width/2,y:C.y},{name:"top-right",x:C.x+C.width,y:C.y},{name:"middle-left",x:C.x,y:C.y+C.height/2},{name:"middle-right",x:C.x+C.width,y:C.y+C.height/2},{name:"bottom-left",x:C.x,y:C.y+C.height},{name:"bottom-center",x:C.x+C.width/2,y:C.y+C.height},{name:"bottom-right",x:C.x+C.width,y:C.y+C.height}],N=(W,O)=>{W.stopPropagation();const re=St(e),ke={"top-left":"bottom-right","top-center":"bottom-center","top-right":"bottom-left","middle-left":"middle-right","middle-right":"middle-left","bottom-left":"top-right","bottom-center":"top-center","bottom-right":"top-left"}[O],ye=A.find(Re=>Re.name===ke);if(!ye)return;const we=qe({x:ye.x,y:ye.y},S,M);t({type:"resizing",handle:O,initialShape:e,anchorPointGlobal:we,initialShapeProps:{rotationCenter:S,geometricCenter:re,bbox:C}})},R=e.type==="text"?C.x+C.width/2:S.x,V=e.rotationHandlePosition,K={x:R,y:V==="bottom"?C.y+C.height+b:C.y-b},U=qe(K,S,M),I=W=>{if(W.stopPropagation(),!n.current)return;const O=St(e);if(!O)return;const re="touches"in W?W.touches[0]:W;if(!re)return;const Ce=o(c(re)),ke=Math.atan2(Ce.y-O.y,Ce.x-O.x),we=("rotation"in e?e.rotation:0)*Math.PI/180-ke;t({type:"rotating",initialShape:e,center:O,startAngle:we})},ee=(W,O,re)=>{W.stopPropagation();const Ce="touches"in W?W.touches[0]:W;if(!Ce)return;const ke=o(c(Ce));switch(O){case"arc-angle":if(e.type!=="arc")return;const ye=St(e),we=Math.atan2(-(ke.y-ye.y),ke.x-ye.x)*180/Math.PI;t({type:"arc-angle-editing",handle:re,initialShape:e,center:ye,initialMouseAngle:we});break;case"trapezoid-offset":if(e.type!=="trapezoid")return;t({type:"trapezoid-offset-editing",handle:re,initialShape:e});break;case"parallelogram-angle":if(e.type!=="parallelogram")return;t({type:"parallelogram-angle-editing",initialShape:e});break;case"triangle-vertex":if(e.type!=="triangle")return;t({type:"triangle-vertex-editing",initialShape:e});break;case"star-inner-radius":if(e.type!=="star")return;t({type:"star-inner-radius-editing",initialShape:e,center:St(e)});break}},be=(W,O)=>r.jsxs("g",{onMouseDown:O,onTouchStart:O,"data-handle":"true",style:{cursor:m?"inherit":fd},children:[r.jsx("circle",{cx:W.x,cy:W.y,r:h/1.5,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:W.x,cy:W.y,r:g/2,fill:"transparent"})]}),_e=W=>{const{x:O,y:re,width:Ce,height:ke,start:ye,extent:we}=W,Re=Ce/2,Z=ke/2,B=O+Re,J=re+Z,Te=ye*Math.PI/180,v=(ye+we)*Math.PI/180,G=(ye+we/2)*Math.PI/180,Y={x:B+Re*Math.cos(Te),y:J-Z*Math.sin(Te)},pe={x:B+Re*Math.cos(v),y:J-Z*Math.sin(v)},me={x:B+Re*Math.cos(G),y:J-Z*Math.sin(G)},xe=qe(Y,S,M),Le=qe(pe,S,M),Je=qe(me,S,M);return r.jsxs(r.Fragment,{children:[be(xe,Ee=>ee(Ee,"arc-angle","start")),be(Le,Ee=>ee(Ee,"arc-angle","end")),be(Je,Ee=>ee(Ee,"arc-angle","move"))]})},ae=W=>{const O=tc(W),re=O[W.isFlippedVertically?3:0],Ce=O[W.isFlippedVertically?2:1],ke=qe(re,S,M),ye=qe(Ce,S,M);return r.jsxs(r.Fragment,{children:[be(ke,we=>ee(we,"trapezoid-offset","left")),be(ye,we=>ee(we,"trapezoid-offset","right"))]})},te=W=>{const re=nc(W)[W.isFlippedVertically?3:0],Ce=qe(re,S,M);return be(Ce,ke=>ee(ke,"parallelogram-angle","angle"))},fe=W=>{const re=qr(W)[0],Ce=qe(re,S,M);return be(Ce,ke=>ee(ke,"triangle-vertex","top"))},he=W=>{const O=Dl(W);if(O.length<2||W.innerRadius===void 0)return null;let re=O[1];if(W.innerRadius===0){const ke=Math.PI*2/W.sides,ye=-Math.PI/2,we=ke/2+ye,Re=10/l.scale;re={x:W.cx+Math.cos(we)*Re,y:W.cy+Math.sin(we)*Re}}const Ce=qe(re,S,M);return be(Ce,ke=>ee(ke,"star-inner-radius","inner-radius"))};return r.jsxs(Mt.Fragment,{children:[r.jsx("g",{transform:`rotate(${M} ${S.x} ${S.y})`,children:r.jsx("rect",{x:C.x,y:C.y,width:C.width,height:C.height,fill:"none",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}})}),y,r.jsxs("g",{children:[A.map(({name:W,x:O,y:re})=>{const Ce=qe({x:O,y:re},S,M),ke=i1(W);return r.jsxs("g",{onMouseDown:ye=>N(ye,W),onTouchStart:ye=>N(ye,W),"data-handle":"true",style:{cursor:m?"inherit":`${ke}`},children:[r.jsx("rect",{x:Ce.x-h/2,y:Ce.y-h/2,width:h,height:h,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-M} ${Ce.x} ${Ce.y})`}),r.jsx("rect",{x:Ce.x-g/2,y:Ce.y-g/2,width:g,height:g,fill:"transparent"})]},W)}),"rotation"in e&&e.rotation!==void 0&&r.jsxs("g",{onMouseDown:I,onTouchStart:I,"data-handle":"true",style:{cursor:m?"inherit":dd},children:[r.jsx("line",{x1:S.x,y1:S.y,x2:U.x,y2:U.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),r.jsx("circle",{cx:U.x,cy:U.y,r:h/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-M} ${U.x} ${U.y})`}),r.jsx("circle",{cx:U.x,cy:U.y,r:g/2,fill:"transparent"})]}),T,e.type==="arc"&&_e(e),e.type==="trapezoid"&&ae(e),e.type==="parallelogram"&&te(e),e.type==="triangle"&&fe(e),e.type==="star"&&he(e)]})]})},rv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),r.jsx("path",{d:"M13 13l6 6"})]}),sv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 4H4v16",strokeDasharray:"4 4"}),r.jsx("path",{d:"M4 20L12 12L20 4v16H4"}),r.jsx("circle",{cx:"20",cy:"4",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"4",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),r.jsx("circle",{cx:"4",cy:"4",r:"2",fill:"var(--bg-primary)"})]}),av=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),cv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"})}),uv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("circle",{cx:"12",cy:"12",r:"10"})}),dv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"})}),md=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"16 18 22 12 16 6"}),r.jsx("polyline",{points:"8 6 2 12 8 18"})]}),Qt=({size:e=24})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),l1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M4 4v16"}),r.jsx("path",{d:"M4 4h16"}),r.jsx("path",{d:"M4 20l-4-5h8z",fill:"currentColor",strokeWidth:"0"}),r.jsx("path",{d:"M20 4l-5-4v8z",fill:"currentColor",strokeWidth:"0"})]}),r1=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M4 14h-2v6h6v-2H4v-4zm16 0v4h-4v2h6v-6h-2zM4 10V4h6V2H2v8h2zm16-6v6h2V2h-8v2h6z"})}),fv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"4"})}),mv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),r.jsx("circle",{cx:"3",cy:"12",r:"1.5"}),r.jsx("circle",{cx:"8",cy:"5",r:"1.5"}),r.jsx("circle",{cx:"15",cy:"16",r:"1.5"}),r.jsx("circle",{cx:"20",cy:"12",r:"1.5"})]}),hv=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M 2 20.7 C 4 10, 8 9.4, 15 12.6 S 22 3.5, 22 3.5",fill:"none"}),r.jsx("circle",{cx:"2",cy:"20.7",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"22",cy:"3.5",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"8",cy:"9.4",r:"2.7",strokeWidth:"0",fill:"currentColor"}),r.jsx("circle",{cx:"15",cy:"12.6",r:"2.7",strokeWidth:"0",fill:"currentColor"})]}),gv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2l10 7.5-4 12.5H6L2 9.5z"})}),pv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),yv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2L2 22h20L12 2z"})}),xv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M3 22L21 22L3 4z"})}),vv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M12 2l8 10-8 10-8-10z"})}),Cv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M2 20h20L18 4H6z"})}),Tv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M2 20l6-16h14l-6 16H2z"})}),bv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 12,22 A 10,10 0 1 1 22,12 L 12,12 Z"})}),Sv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 22 12 A 10 10 0 1 0 12 22 Z"})}),wv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M 2 8 C 13 8, 22 12.5, 22 18"})}),Ev=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Mv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M 3 4 H 21 V 7 H 14 V 19 H 17 V 21 H 7 V 19 H 10 V 7 H 3 Z"})}),Av=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),r.jsx("polyline",{points:"21 15 16 10 5 21"})]}),kv=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M14 6l5 5-5 5M10 18l-5-5 5-5"})}),s1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M14 17a5 5 0 1 0 0-10H5.5"}),r.jsx("path",{d:"M9.5 11L5.5 7l4-4"})]}),a1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M10 17a5 5 0 1 1 0-10h8.5"}),r.jsx("path",{d:"M14.5 11L18.5 7l-4-4"})]}),_v=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2",ry:"2"}),r.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),lc=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),c1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),u1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M22 2 V22 H2",fill:"none",strokeDasharray:"3 3"}),r.jsx("circle",{cx:"2",cy:"2",r:"2",stroke:"none"}),r.jsxs("g",{fill:"none",children:[r.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"2"}),r.jsx("line",{x1:"2",y1:"2",x2:"2",y2:"22"}),r.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),r.jsxs("g",{stroke:"none",children:[r.jsx("polygon",{points:"22,2 19,0.5 19,3.5"}),r.jsx("polygon",{points:"2,22 0.5,19 3.5,19"}),r.jsx("polygon",{points:"22,22 22,19 19,22"})]})]}),d1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"2",y:"2",width:"20",height:"20",fill:"none",strokeDasharray:"3 3"}),r.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"none"}),r.jsxs("g",{fill:"none",children:[r.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),r.jsx("line",{x1:"21",y1:"3",x2:"3",y2:"21"})]}),r.jsxs("g",{stroke:"none",children:[r.jsx("polygon",{points:"3,3 5.5,3 3,5.5"}),r.jsx("polygon",{points:"21,21 18.5,21 21,18.5"}),r.jsx("polygon",{points:"21,3 18.5,3 21,5.5"}),r.jsx("polygon",{points:"3,21 5.5,21 3,18.5"})]})]}),Nv=({size:e=16})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})}),f1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),m1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"9 11 12 14 22 4"}),r.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),h1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),r.jsx("path",{d:"M20 12 L3 12",strokeDasharray:"4 2"})]}),g1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),r.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),p1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),y1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),x1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 2v2.5"}),r.jsx("path",{d:"M12 22v-2.5"}),r.jsx("path",{d:"M22 12h-2.5"}),r.jsx("path",{d:"M2 12h2.5"})]}),v1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),r.jsx("polyline",{points:"5 12 12 5 19 12"})]}),C1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Rv=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Dv=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),r.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),T1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),b1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"23 4 23 10 17 10"}),r.jsx("polyline",{points:"1 20 1 14 7 14"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"}),r.jsx("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"})]}),S1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),w1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),E1=({size:e=20})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),M1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M17 10h4v4"}),r.jsx("path",{d:"M21 14l-4-4"}),r.jsx("path",{d:"M3 6h12"}),r.jsx("path",{d:"M3 12h12"}),r.jsx("path",{d:"M3 18h12"})]}),A1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"1"}),r.jsx("circle",{cx:"19",cy:"12",r:"1"}),r.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),k1=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.jsx("polyline",{points:"14 2 14 8 20 8"}),r.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),r.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),_1=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M20 12v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5"}),r.jsx("path",{d:"M18 8V2l-4 4"}),r.jsx("path",{d:"M14 2h4a2 2 0 0 1 2 2v2"})]}),N1=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M3 3v5h5"}),r.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),r.jsx("path",{d:"M12 7v5l4 2"})]}),R1=({size:e=16})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),r.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),r.jsx("polyline",{points:"7 3 7 8 15 8"})]}),D1=({size:e=16})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M5 3l14 9-14 9V3z"})}),j1=({size:e=20,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),I1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),r.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]}),L1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),r.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),r.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]}),U1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),r.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]}),P1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}),r.jsx("path",{d:"M14 12a4 4 0 0 1 0 8H6"}),r.jsx("line",{x1:"4",y1:"12",x2:"18",y2:"12"})]}),V1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"17",y1:"18",x2:"3",y2:"18"})]}),$1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]}),H1=({size:e=20})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),r.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),r.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),r.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]}),B1=({size:e=96,className:t})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[r.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),r.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),r.jsx("path",{d:"M9 8h.01"}),r.jsx("path",{d:"M15 8h.01"}),r.jsx("path",{d:"M9.5 13a4.6 4.6 0 0 0 5 0"})]}),uo=3,Mh=.05,Ah=30,z1=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";case"line-start":case"line-end":return"grabbing";default:return"default"}},kh=e=>e%360,oi=e=>e.map(t=>`${t.x},${t.y}`).join(" "),G1=e=>{const{width:t,height:n,backgroundColor:i,shapes:o,addShape:l,updateShape:c,activeTool:u,drawMode:f,fillColor:d,strokeColor:m,strokeWidth:h,textColor:g,textFont:p,textFontSize:b,numberOfSides:S,selectedShapeId:M,onSelectShape:x,isDrawingPolyline:y,polylinePoints:T,setPolylinePoints:C,onCompletePolyline:A,onCancelPolyline:N,isDrawingBezier:R,bezierPoints:V,setBezierPoints:K,onCompleteBezier:U,onCancelBezier:I,showGrid:ee,gridSize:be,snapStep:_e,viewTransform:ae,setViewTransform:te,activePointIndex:fe,setActivePointIndex:he,showCursorCoords:W,showRotationAngle:O,pendingImage:re,setPendingImage:Ce,setCursorPos:ke,showNotification:ye,onStartInlineEdit:we,inlineEditingShapeId:Re}=e,[Z,B]=E.useState(null),[J,Te]=E.useState(null),[v,G]=E.useState(null),[Y,pe]=E.useState(null),me=E.useRef(null),xe=E.useRef(null),Le=E.useRef(!1),Je=E.useRef(null),Ee=E.useRef(null),Ut=E.useCallback(w=>{if(!me.current)return{x:0,y:0};const k=me.current.getBoundingClientRect();return{x:w.clientX-k.left,y:w.clientY-k.top}},[]),tn=E.useCallback(w=>{const k=(w.x-ae.x)/ae.scale,z=(w.y-ae.y)/ae.scale;return _e>0?{x:Math.round(k/_e)*_e,y:Math.round(z/_e)*_e}:{x:k,y:z}},[ae,_e]),Io=E.useCallback(w=>{if(w.button===1){B({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}Le.current=!1;const k=tn(Ut(w));if(Je.current=k,w.button===2){const Q=w.target.dataset.id,X=Q?o.find(P=>P.id===Q):null;if(X){M!==Q&&x(Q);let P;switch(X.type){case"line":P={...X,points:[{...X.points[0]},{...X.points[1]}]};break;case"pencil":case"polyline":case"bezier":P={...X,points:X.points.map(ue=>({...ue}))};break;default:P={...X}}B({type:"duplicating",initialShape:P,startPos:k})}return}if(w.button!==0)return;const z=w.target;if(z.closest('[data-handle="true"]'))return;if(R){K(Q=>[...Q,k]);return}if(y){C(Q=>[...Q,k]);return}const ve=z.dataset.id,ne=o.find(Q=>(Q==null?void 0:Q.id)===ve);if(u==="edit-points"){ne?ne&&ne.state==="normal"&&M!==ne.id&&x(ne.id):x(null);return}if(u==="select"){ne&&ne.state!=="disabled"?(B({type:"dragging",initialShape:ne,startPos:k}),M!==ne.id&&x(ne.id)):B({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}x(null);const j=new Date().toISOString();let $=null;switch(u){case"rectangle":$={id:j,name:ct[u],type:"rectangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1,joinstyle:"miter"};break;case"square":$={id:j,name:ct[u],type:"rectangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0,joinstyle:"miter"};break;case"circle":$={id:j,name:ct[u],type:"ellipse",cx:k.x,cy:k.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!0};break;case"ellipse":$={id:j,name:ct[u],type:"ellipse",cx:k.x,cy:k.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",isAspectRatioLocked:!1};break;case"line":$={id:j,name:ct[u],type:"line",points:[{...k},{...k}],stroke:m,strokeWidth:h,rotation:0,capstyle:"round",state:"normal"};break;case"pencil":$={id:j,name:ct[u],type:"pencil",points:[k],stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"round",capstyle:"round",isAspectRatioLocked:!1};break;case"triangle":$={id:j,name:ct[u],type:"triangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",topVertexOffset:0,isAspectRatioLocked:!1};break;case"right-triangle":$={id:j,name:ct[u],type:"right-triangle",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"rhombus":$={id:j,name:ct[u],type:"rhombus",x:k.x,y:k.y,width:0,height:0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"trapezoid":$={id:j,name:ct[u],type:"trapezoid",x:k.x,y:k.y,width:0,height:0,topLeftOffsetRatio:.25,topRightOffsetRatio:.25,isSymmetrical:!0,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"parallelogram":$={id:j,name:ct[u],type:"parallelogram",x:k.x,y:k.y,width:0,height:0,angle:75,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"pieslice":case"chord":case"arc":{let Q;u==="pieslice"?Q="pieslice":u==="chord"?Q="chord":Q="arc";const X=Q==="arc"?"none":d,P=Q==="pieslice"||Q==="chord"?270:90;$={id:j,name:ct[u],type:"arc",x:k.x,y:k.y,width:0,height:0,fill:X,stroke:m,strokeWidth:h,rotation:0,state:"normal",start:0,extent:P,style:Q,capstyle:"round",isAspectRatioLocked:!1};break}case"polygon":case"star":$={id:j,name:ct[u],type:u,cx:k.x,cy:k.y,radius:0,sides:S,fill:d,stroke:m,strokeWidth:h,rotation:0,state:"normal",joinstyle:"miter",innerRadius:u==="star"?0:void 0,isAspectRatioLocked:!0};break;case"text":{$={id:j,name:ct[u],type:"text",x:k.x,y:k.y,text:"Текст",font:p,fontSize:b,weight:"normal",slant:"roman",underline:!1,overstrike:!1,fill:g,stroke:"none",strokeWidth:0,rotation:0,anchor:"nw",justify:"left",width:0,state:"normal",isAspectRatioLocked:!1};break}case"image":{if(re){const Q=new Image;Q.onload=()=>{const X={id:j,name:ct[u],type:"image",x:k.x,y:k.y,width:Q.width,height:Q.height,src:re,stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!0};l(X),Ce(null)},Q.src=re}break}case"bitmap":{$={id:j,name:ct[u],type:"bitmap",x:k.x,y:k.y,width:50,height:50,bitmapType:"error",foreground:"#000000",background:"#ffffff",stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!1};break}}$&&!["text","image","bitmap"].includes($.type)?B({type:"drawing",shape:$,startPos:k}):$&&l($)},[u,o,x,d,m,h,g,p,b,S,y,C,R,K,tn,Ut,M,re,Ce,l]),Fl=E.useCallback(w=>{const k=Ut(w);pe(k);const z=tn(k);if(G(z),ke(z),!Le.current&&Je.current&&Math.hypot(z.x-Je.current.x,z.y-Je.current.y)>uo&&(Le.current=!0),!Z)return;if(Z.type==="drawing"){const{shape:j,startPos:$}=Z;let Q=j;switch(j.type){case"rectangle":{let X=Math.abs(z.x-$.x),P=Math.abs(z.y-$.y);if(j.isAspectRatioLocked&&(X=P=Math.max(X,P)),f==="corner"){const ue=z.x<$.x?$.x-X:$.x,L=z.y<$.y?$.y-P:$.y;Q={...j,x:ue,y:L,width:X,height:P}}else j.isAspectRatioLocked?X=P=Math.max(Math.abs(z.x-$.x),Math.abs(z.y-$.y))*2:(X*=2,P*=2),Q={...j,x:$.x-X/2,y:$.y-P/2,width:X,height:P};break}case"arc":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":{let X=Math.abs(z.x-$.x),P=Math.abs(z.y-$.y);if("isAspectRatioLocked"in j&&j.isAspectRatioLocked&&(X=P=Math.max(X,P)),f==="corner"){const ue=z.x<$.x?$.x-X:$.x,L=z.y<$.y?$.y-P:$.y;Q={...j,x:ue,y:L,width:X,height:P}}else"isAspectRatioLocked"in j&&j.isAspectRatioLocked?X=P=Math.max(Math.abs(z.x-$.x),Math.abs(z.y-$.y))*2:(X*=2,P*=2),Q={...j,x:$.x-X/2,y:$.y-P/2,width:X,height:P};break}case"ellipse":{const X=z.x-$.x,P=z.y-$.y;if(j.isAspectRatioLocked){const ue=Math.hypot(X,P),L=f==="center"?ue:ue/2,le=f==="center"?$.x:$.x+X/2,de=f==="center"?$.y:$.y+P/2;Q={...j,cx:le,cy:de,rx:L,ry:L}}else{const ue=f==="center"?Math.abs(X):Math.abs(X)/2,L=f==="center"?Math.abs(P):Math.abs(P)/2,le=f==="center"?$.x:$.x+X/2,de=$.y+P/2;Q={...j,cx:le,cy:de,rx:ue,ry:L}}break}case"line":{Q={...j,points:[$,z]};break}case"pencil":{Q={...j,points:[...j.points,z]};break}case"polygon":case"star":{let X,P,ue;if(f==="corner"){const le=Math.abs(z.x-$.x),de=Math.abs(z.y-$.y);X=$.x+(z.x-$.x)/2,P=$.y+(z.y-$.y)/2,ue=Math.min(le,de)/2}else X=$.x,P=$.y,ue=Math.hypot(z.x-$.x,z.y-$.y);const L=j.type==="star"?ue/2:void 0;Q={...j,cx:X,cy:P,radius:ue,innerRadius:L};break}}B({...Z,shape:Q});return}if(Z.type==="panning"){const j=w.clientX-Z.initialPos.x,$=w.clientY-Z.initialPos.y;te(Q=>({...Q,x:Q.x+j,y:Q.y+$})),B({type:"panning",initialPos:{x:w.clientX,y:w.clientY}});return}const ve=J??("initialShape"in Z?Z.initialShape:null);if(!ve)return;let ne=ve;switch(Z.type){case"point-editing":{const{initialShape:j,pointIndex:$,center:Q}=Z,X=j,P="rotation"in j?j.rotation:0;let ue=z;P!==0&&(ue=qe(z,Q,-P));const L=[...X.points];L[$]=ue,ne={...X,points:L};break}case"arc-angle-editing":{const{initialShape:j,handle:$,center:Q,initialMouseAngle:X}=Z;let ue=Math.atan2(-(z.y-Q.y),z.x-Q.x)*180/Math.PI-X;if(ue>180&&(ue-=360),ue<-180&&(ue+=360),$==="move"||j.isExtentLocked)ne={...j,start:j.start+ue};else if($==="start"){const L=j.start+ue,le=j.extent-ue;ne={...j,start:L,extent:kh(le)}}else{const L=j.extent+ue;ne={...j,extent:kh(L)}}break}case"triangle-vertex-editing":{const{initialShape:j}=Z,$=St(j);if(!$||j.width===0)break;const X=(qe(z,$,-j.rotation).x-(j.x+j.width/2))/j.width;ne={...j,topVertexOffset:X};break}case"star-inner-radius-editing":{const{initialShape:j,center:$}=Z;if(j.type!=="star")break;const Q=Math.hypot(z.x-$.x,z.y-$.y),X=Math.max(0,Math.min(Q,j.radius));ne={...j,innerRadius:X};break}case"trapezoid-offset-editing":{const{initialShape:j,handle:$}=Z,Q=St(j);if(!Q||j.width===0)break;const X=qe(z,Q,-j.rotation);let P=j.topLeftOffsetRatio,ue=j.topRightOffsetRatio;if($==="left"?(P=(X.x-j.x)/j.width,j.isSymmetrical&&(ue=P)):(ue=(j.x+j.width-X.x)/j.width,j.isSymmetrical&&(P=ue)),P=Math.max(0,P),ue=Math.max(0,ue),P+ue>=1)break;ne={...j,topLeftOffsetRatio:P,topRightOffsetRatio:ue};break}case"parallelogram-angle-editing":{const{initialShape:j}=Z,$=St(j);if(!$||j.height===0)break;const X=qe(z,$,-j.rotation).x-j.x;if(j.width-Math.abs(X)<=0)break;let ue=Math.atan2(j.height,X)*180/Math.PI;ue=Math.max(1,Math.min(179,ue)),ne={...j,angle:ue};break}case"duplicating":case"dragging":{const j=z.x-Z.startPos.x,$=z.y-Z.startPos.y,{initialShape:Q}=Z;switch(Q.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":ne={...Q,x:Q.x+j,y:Q.y+$};break;case"ellipse":case"polygon":case"star":ne={...Q,cx:Q.cx+j,cy:Q.cy+$};break;case"line":case"bezier":case"pencil":case"polyline":ne={...Q,points:Q.points.map(X=>({x:X.x+j,y:X.y+$}))};break}break}case"resizing":{const{initialShape:j,handle:$,anchorPointGlobal:Q,initialShapeProps:X}=Z,{bbox:P,rotationCenter:ue,geometricCenter:L}=X;if($==="line-start"||$==="line-end"){ne={...j,points:$==="line-start"?[z,Q]:[Q,z],rotation:0};break}const le=qe(z,ue,-j.rotation),de=qe(Q,ue,-j.rotation);let Ue;const Jt=$.includes("left")||$.includes("right"),tt=$.includes("top")||$.includes("bottom"),on="isAspectRatioLocked"in j&&j.isAspectRatioLocked;if(Jt&&tt){let Ie=Math.abs(le.x-de.x),Me=Math.abs(le.y-de.y);if(on&&(P.width>0||P.height>0)){const Ct=P.width/P.height;Ie/P.width>Me/P.height?Me=Ie/Ct:Ie=Me*Ct}const nt=$.includes("left")?de.x-Ie:de.x,it=$.includes("top")?de.y-Me:de.y;Ue={x:nt,y:it,width:Ie,height:Me}}else if(on){const Ie=P.height===0||P.width===0?1:P.width/P.height;if(Jt){const Me=Math.abs(le.x-de.x),nt=Me/Ie;Ue={x:Math.min(le.x,de.x),y:P.y+P.height/2-nt/2,width:Me,height:nt}}else{const Me=Math.abs(le.y-de.y),nt=Me*Ie;Ue={x:P.x+P.width/2-nt/2,y:Math.min(le.y,de.y),width:nt,height:Me}}}else Jt?Ue={x:Math.min(le.x,de.x),y:P.y,width:Math.abs(le.x-de.x),height:P.height}:Ue={x:P.x,y:Math.min(le.y,de.y),width:P.width,height:Math.abs(le.y-de.y)};["line","pencil","polyline","bezier"].includes(j.type)&&(Ue.width=Math.max(1,Ue.width),Ue.height=Math.max(1,Ue.height));const{width:kt,height:st}=Ue,ln={x:Ue.x+kt/2,y:Ue.y+st/2},zt={x:ln.x-(P.x+P.width/2),y:ln.y-(P.y+P.height/2)},ft=qe(zt,{x:0,y:0},j.rotation),Qe={x:L.x+ft.x,y:L.y+ft.y};switch(j.type){case"text":{const Ie=Zi(j);if(Ie.width<=0)break;const Me=kt/Ie.width,nt=Math.max(.1,j.fontSize*Me),it={x:Qe.x-kt/2,y:Qe.y-st/2,width:kt,height:st},Ct=j.anchor;let ht=it.x,Vt=it.y;["n","s","center"].includes(Ct)&&(ht+=it.width/2),["ne","e","se"].includes(Ct)&&(ht+=it.width),["w","e","center"].includes(Ct)&&(Vt+=it.height/2),["sw","s","se"].includes(Ct)&&(Vt+=it.height),ne={...j,fontSize:parseFloat(nt.toFixed(1)),x:ht,y:Vt};break}case"triangle":{const Ie=j,Me=qr(Ie),nt=Or({...Ie,rotation:0}),it=nt.width>0?kt/nt.width:1,Ct=nt.height>0?st/nt.height:1,ht=Me.map(Ci=>({x:de.x+(Ci.x-de.x)*it,y:de.y+(Ci.y-de.y)*Ct})),Vt=ht.map(Ci=>Ci.x),io=ht.map(Ci=>Ci.y),oo={x:Math.min(...Vt),y:Math.min(...io),width:Math.max(...Vt)-Math.min(...Vt),height:Math.max(...io)-Math.min(...io)},Qn=ht[0],lo=[ht[1],ht[2]],Hn=Math.abs(lo[0].x-lo[1].x),fc=Math.abs(Qn.y-lo[0].y),ps=Math.min(lo[0].x,lo[1].x),ys=Qn.y,Rn=Hn>0?(Qn.x-(ps+Hn/2))/Hn:0,Uo=ps-oo.x,mc=ys-oo.y,hc=Qe.x-oo.width/2,Po=Qe.y-oo.height/2,pn=hc+Uo,gc=Po+mc;ne={...Ie,x:pn,y:gc,width:Hn,height:fc,topVertexOffset:Rn};break}case"rectangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const Ie=Qe.x-kt/2,Me=Qe.y-st/2;ne={...j,x:Ie,y:Me,width:kt,height:st};break}case"ellipse":{const Ie=kt/2,Me=st/2;ne={...j,cx:Qe.x,cy:Qe.y,rx:Ie,ry:Me};break}case"polygon":case"star":{const Ie=P.width>0?kt/P.width:1,Me=P.height>0?st/P.height:1,nt=Math.max(Ie,Me),it=j.radius*nt;let Ct=j.innerRadius;j.type==="star"&&j.innerRadius!==void 0&&(Ct=j.innerRadius*nt),ne={...j,cx:Qe.x,cy:Qe.y,radius:it,innerRadius:Ct};break}case"line":case"bezier":case"pencil":case"polyline":{const Ie=P.width!==0?kt/P.width:1,Me=P.height!==0?st/P.height:1,nt=j.points.map(Vt=>({x:Ue.x+(Vt.x-P.x)*Ie,y:Ue.y+(Vt.y-P.y)*Me})),it={x:Qe.x-Ue.width/2,y:Qe.y-Ue.height/2},Ct={x:it.x-Ue.x,y:it.y-Ue.y},ht=nt.map(Vt=>({x:Vt.x+Ct.x,y:Vt.y+Ct.y}));ne={...j,points:ht};break}}break}case"rotating":{const{center:j,startAngle:$,initialShape:Q}=Z;if(!("rotation"in Q))break;let ue=(Math.atan2(z.y-j.y,z.x-j.x)+$)*180/Math.PI;ue=Math.round(ue),ne={...Q,rotation:ue};break}}Te(ne)},[Z,f,J,tn,te,Ut,ke]),Zn=E.useCallback(w=>{if((Z==null?void 0:Z.type)==="panning"&&!Le.current&&x(null),(Z==null?void 0:Z.type)==="drawing"&&Le.current){const{shape:k}=Z;"width"in k&&"height"in k&&(k.width<=uo||k.height<=uo)||"rx"in k&&(k.rx*2<=uo||k.ry*2<=uo)||"radius"in k&&k.radius<=uo||k.type==="line"&&Math.hypot(k.points[1].x-k.points[0].x,k.points[1].y-k.points[0].y)<=uo||k.type==="pencil"&&k.points.length<=2||l(k)}else if((Z==null?void 0:Z.type)==="duplicating"&&J){if(Le.current){const k={...J,id:new Date().toISOString()};l(k),ye("Фігуру дубльовано.")}}else if((Z==null?void 0:Z.type)==="point-editing"&&J){const{initialShape:k,center:z}=Z;let ve=J;const ne=k.name,j=ne&&!ja(ne);if("rotation"in k&&k.rotation!==0)if(k.type==="bezier"||k.type==="polyline"&&k.smooth){const X=J.points.map(ue=>qe(ue,z,k.rotation)),P={...J,points:X,rotation:0,name:void 0};P.name=j?ne:qt(P),ve=P}else{const Q=Kn(J,z);if(Q){const X={...J,points:Q,rotation:0,name:void 0};X.name=j?ne:qt(X),ve=X}}else{const $=J,Q=j?ne:qt($);$.name!==Q&&(ve={...$,name:Q})}c(ve)}else J&&c(J);B(null),Te(null),Le.current=!1,Je.current=null},[Z,l,c,x,J,ye]),cc=w=>{if(y){A(!1);return}if(R){U(!1);return}const k=w.target.dataset.id,z=o.find(ve=>ve.id===k);z&&z.type==="text"&&we(z.id)},us=w=>{G(null),pe(null),ke(null),Je.current&&Zn(w)},uc=w=>{w.preventDefault();const{deltaY:k}=w,z=1.1,ve=Ut(w);te(ne=>{let j=k<0?ne.scale*z:ne.scale/z;if(j=Math.max(Mh,Math.min(Ah,j)),j===ne.scale)return ne;const $=ve.x-(ve.x-ne.x)*(j/ne.scale),Q=ve.y-(ve.y-ne.y)*(j/ne.scale);return{scale:j,x:$,y:Q}})},ql=E.useCallback(w=>{if(w.preventDefault(),w.touches.length>=2){const[ve,ne]=[w.touches[0],w.touches[1]],j=Math.hypot(ve.clientX-ne.clientX,ve.clientY-ne.clientY);if(j<1){Ee.current=null;return}const $={x:(ve.clientX+ne.clientX)/2,y:(ve.clientY+ne.clientY)/2};Ee.current={initialDist:j,initialMidpoint:$,initialTransform:ae},B(null);return}const k=w.touches[0],z={clientX:k.clientX,clientY:k.clientY,button:0,target:w.target};Io(z)},[Io,ae]),dc=E.useCallback(w=>{if(w.preventDefault(),w.touches.length===1){const k=w.touches[0],z={clientX:k.clientX,clientY:k.clientY,button:0};Fl(z)}else if(w.touches.length===2&&Ee.current){const{initialDist:k,initialMidpoint:z,initialTransform:ve}=Ee.current;if(k===0)return;const[ne,j]=[w.touches[0],w.touches[1]],$=Math.hypot(ne.clientX-j.clientX,ne.clientY-j.clientY),Q={x:(ne.clientX+j.clientX)/2,y:(ne.clientY+j.clientY)/2};let X=ve.scale*($/k);X=Math.max(Mh,Math.min(Ah,X));const P=Q.x-z.x,ue=Q.y-z.y,L=Q.x-(Q.x-(ve.x+P))*(X/ve.scale),le=Q.y-(Q.y-(ve.y+ue))*(X/ve.scale);te({scale:X,x:L,y:le})}},[Fl,te,Ut]),Lo=E.useCallback(w=>{w.preventDefault(),w.touches.length<2&&(Ee.current=null);const k=w.changedTouches[0];if(k){const z={clientX:k.clientX,clientY:k.clientY,button:0,target:w.target};Zn(z)}else Zn({button:0})},[Zn]),Ol=E.useMemo(()=>{let w=[...o];if((Z==null?void 0:Z.type)==="drawing"&&Le.current)w.push(Z.shape);else if((Z==null?void 0:Z.type)==="duplicating"&&J)w.push(J);else if(J){const k=w.findIndex(z=>(z==null?void 0:z.id)===J.id);k!==-1&&(w[k]=J)}if(y&&T.length>0&&v){const k=T.filter(Boolean);k.length>0&&(w.push({id:"temp-polyline-main",type:"polyline",points:k,isClosed:!1,stroke:m,strokeWidth:h,fill:"none",state:"normal",joinstyle:"round",rotation:0,capstyle:"round"}),w.push({id:"temp-polyline-rubberband",type:"line",points:[k[k.length-1],v],stroke:m,strokeWidth:1,rotation:0,state:"normal",dash:[4,4]}))}if(R&&V.length>0&&v){const k=V.filter(Boolean);if(k.length>0){const z=[...k,v];w.push({id:"temp-bezier-preview-dashed",type:"bezier",points:z,smooth:!0,splinesteps:12,stroke:m,strokeWidth:1,dash:[4,4],capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"}),k.length>1&&w.push({id:"temp-bezier-main-solid",type:"bezier",points:k,smooth:!0,splinesteps:12,stroke:m,strokeWidth:h,capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"})}}return w},[o,Z,Le,J,y,T,v,m,h,R,V]),to=E.useMemo(()=>{const w=o.find(k=>(k==null?void 0:k.id)===M);return(w==null?void 0:w.id)===(J==null?void 0:J.id)?J:w??null},[o,M,J]),Yl=(()=>{if(!Z)return u==="select"?"grab":u==="edit-points"?"default":u==="image"&&re?"copy":["text","image","bitmap"].includes(u)&&u!=="image"?"crosshair":u==="image"&&!re?"default":"crosshair";switch(Z.type){case"panning":case"dragging":case"point-editing":return"grabbing";case"duplicating":return Qb;case"arc-angle-editing":return fd;case"rotating":return dd;case"resizing":return z1(Z.handle);case"trapezoid-offset-editing":case"parallelogram-angle-editing":case"triangle-vertex-editing":case"star-inner-radius-editing":return fd;case"drawing":return"crosshair";default:return u==="select"?"grab":u==="edit-points"?"default":"crosshair"}})(),ds=w=>{if("rotation"in w&&w.rotation&&w.rotation!==0){const k=w.type==="text"?{x:w.x,y:w.y}:St(w);if(k)return`rotate(${w.rotation} ${k.x} ${k.y})`}},fs=E.useMemo(()=>{const w=new Map;return Ol.forEach(k=>{if((k.type==="line"||k.type==="bezier"||k.type==="pencil"||k.type==="polyline"&&!k.isClosed||k.type==="arc"&&k.style==="arc")&&k.arrow&&k.arrow!=="none"&&k.stroke!=="none"&&k.strokeWidth>0&&k.arrowshape){const[z,ve,ne]=k.arrowshape,j=k.strokeWidth,$=z*j,Q=ve*j,X=ne*j,P=JSON.stringify({color:k.stroke,shape:[$,Q,X]});w.has(P)||w.set(P,{color:k.stroke,shapeParams:[$,Q,X]})}}),Array.from(w.values())},[Ol]),nn=w=>{const k=w.joinstyle??"miter";return{strokeLinejoin:k,strokeMiterlimit:k==="miter"?10:void 0}},ms=E.useMemo(()=>{const w=y?T:V;if(!((y||R)&&w.length>0))return null;const z=w.length>=2,ve=w.length>=3,ne="flex items-center gap-2 px-3 py-1.5 rounded-md transition-colors duration-200 text-sm font-semibold",j="bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)]",$="bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)]",Q="bg-[var(--bg-disabled)] text-[var(--text-disabled)] cursor-not-allowed";return r.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-[var(--bg-primary)]/80 backdrop-blur-sm p-1 rounded-lg shadow-lg flex items-center gap-2 z-10",onMouseDown:X=>X.stopPropagation(),onTouchStart:X=>X.stopPropagation(),children:[r.jsxs("button",{onClick:()=>y?A(!1):U(!1),title:"Завершити",disabled:!z,className:`${ne} ${z?j:Q}`,children:[r.jsx(m1,{}),r.jsx("span",{children:"Завершити"})]}),r.jsxs("button",{onClick:()=>y?A(!0):U(!0),title:"Замкнути контур",disabled:!ve,className:`${ne} ${ve?j:Q}`,children:[r.jsx(h1,{}),r.jsx("span",{children:"Замкнути"})]}),r.jsxs("button",{onClick:()=>y?N():I(),title:"Скасувати",className:`${ne} ${$}`,children:[r.jsx(g1,{}),r.jsx("span",{children:"Скасувати"})]})]})},[y,R,T,V,A,U,N,I]),hs=E.useMemo(()=>{const w=i.replace("#","");if(w.length<6)return"rgba(0, 0, 0, 0.1)";const k=parseInt(w.substring(0,2),16),z=parseInt(w.substring(2,4),16),ve=parseInt(w.substring(4,6),16),ne=(k*299+z*587+ve*114)/1e3,j=.15,$=Math.log10(Math.max(1,ae.scale)),Q=Math.min(j+$*.25,.75);return ne<128?`rgba(255, 255, 255, ${Q})`:`rgba(0, 0, 0, ${Q})`},[i,ae.scale]),no=w=>Math.round(w*100)/100,vi=(Z==null?void 0:Z.type)==="rotating",gs=(Z==null?void 0:Z.type)==="duplicating",Ze=E.useMemo(()=>{if(vi&&Z.initialShape&&"rotation"in Z.initialShape){let w=null;if(J&&"rotation"in J?w=J.rotation:Z.initialShape&&"rotation"in Z.initialShape&&(w=Z.initialShape.rotation),w!==null){const k=Z.initialShape.rotation;let z=w-k;return z>180&&(z-=360),z<-180&&(z+=360),{absolute:w,delta:z}}}return null},[Z,J,vi]),Jl=(W||O&&vi||gs)&&Y&&v;return r.jsxs("div",{ref:me,className:"w-full h-full relative",style:{cursor:Yl},onMouseDown:Io,onMouseMove:Fl,onMouseUp:Zn,onMouseLeave:us,onDoubleClick:cc,onWheel:uc,onTouchStart:ql,onTouchMove:dc,onTouchEnd:Lo,onTouchCancel:Lo,onContextMenu:w=>w.preventDefault(),children:[ms,Jl&&r.jsxs("div",{className:"absolute p-1 px-2 text-xs rounded-md shadow-lg pointer-events-none z-20 bg-[var(--cursor-bg)] text-[var(--cursor-text)] font-mono",style:{left:Y.x+15,top:Y.y-15,transform:"translateY(-100%)"},children:[gs&&r.jsx("div",{className:"font-sans font-semibold",children:"Дублювання"}),O&&Ze&&r.jsx("div",{children:`Кут: ${Ze.absolute.toFixed(0)}° (Δ: ${Ze.delta.toFixed(0)}°)`}),W&&r.jsx("div",{children:`X: ${no(v.x)}, Y: ${no(v.y)}`})]}),r.jsxs("svg",{ref:xe,className:"rounded-md touch-none w-full h-full",children:[r.jsxs("defs",{children:[r.jsx("filter",{id:"dropshadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:r.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"5",floodColor:"#000000",floodOpacity:"0.3"})}),ee&&r.jsx("pattern",{id:"grid",width:be,height:be,patternUnits:"userSpaceOnUse",children:r.jsx("path",{d:`M ${be} 0 L 0 0 0 ${be}`,fill:"none",stroke:hs,strokeWidth:1/ae.scale})}),r.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"3",height:"3",fill:"black"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray12",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),r.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray25",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),r.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray50",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),r.jsx("mask",{id:"mask-gray75",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),r.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),r.jsx("mask",{id:"mask-bitmap-error",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),r.jsx("mask",{id:"mask-bitmap-hourglass",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-info",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-questhead",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-question",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-warning",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),fs.map(({color:w,shapeParams:k})=>{const[z,ve,ne]=k;if(z<=0||ve<=0)return null;const j=`${w.replace(/[^a-zA-Z0-9]/g,"")}-${z}-${ve}-${ne}`;return r.jsxs(Mt.Fragment,{children:[r.jsx("marker",{id:`arrow-end-${j}`,viewBox:`0 0 ${z} ${ve}`,refX:z,refY:ve/2,markerUnits:"userSpaceOnUse",markerWidth:z,markerHeight:ve,orient:"auto",children:r.jsx("path",{d:`M 0,0 L ${z},${ve/2} L 0,${ve} L ${ne},${ve/2} z`,fill:w})}),r.jsx("marker",{id:`arrow-start-${j}`,viewBox:`0 0 ${z} ${ve}`,refX:z,refY:ve/2,markerUnits:"userSpaceOnUse",markerWidth:z,markerHeight:ve,orient:"auto-start-reverse",children:r.jsx("path",{d:`M 0,0 L ${z},${ve/2} L 0,${ve} L ${ne},${ve/2} z`,fill:w})})]},j)})]}),r.jsxs("g",{transform:`translate(${ae.x} ${ae.y}) scale(${ae.scale})`,children:[r.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:i,filter:"url(#dropshadow)"}),ee&&r.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:"url(#grid)",style:{pointerEvents:"none"}}),Ol.filter(Boolean).map(w=>{if(w.state==="hidden")return null;const k=w.state==="disabled",z=u!=="select",ve=(Z==null?void 0:Z.type)==="duplicating"&&w===J,ne=k?"default":z?"inherit":"move",j=Math.max(w.strokeWidth,20/ae.scale);let $=ds(w);if((Z==null?void 0:Z.type)==="point-editing"&&w.id===Z.initialShape.id){const{center:L}=Z,le="rotation"in w&&w.rotation?w.rotation:0;le!==0&&L&&($=`rotate(${le} ${L.x} ${L.y})`)}const X={stroke:w.stroke,strokeWidth:w.strokeWidth,transform:$,style:{pointerEvents:"none",opacity:k?.5:ve?.6:1}},P={"data-id":w.id,key:`${w.id}-hitbox`,transform:$,stroke:"transparent",strokeWidth:j,style:{cursor:ne}},ue=L=>{const le=L.stroke!=="none"&&L.strokeWidth>0;let de;if("dash"in L&&L.dash&&L.dash.length>0&&L.strokeWidth>0){const kt="capstyle"in L&&L.capstyle?L.capstyle:"butt";de=L.dash.map((st,ln)=>ln%2===0&&st<=2?kt==="round"?.01:L.strokeWidth:st*L.strokeWidth).join(" ")}const Jt="dashoffset"in L?L.dashoffset:void 0,tt=(L.capstyle==="projecting"?"square":L.capstyle)??"round";let on,Pt;if(le&&L.arrow&&L.arrow!=="none"&&L.arrowshape){const[kt,st,ln]=L.arrowshape,zt=L.strokeWidth>0?L.strokeWidth:1,ft=kt*zt,Qe=st*zt,Ie=ln*zt,Me=`${L.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${ft}-${Qe}-${Ie}`;(L.arrow==="first"||L.arrow==="both")&&(on=`url(#arrow-start-${Me})`),(L.arrow==="last"||L.arrow==="both")&&(Pt=`url(#arrow-end-${Me})`)}return{strokeDasharray:de,strokeDashoffset:Jt,markerStart:on,markerEnd:Pt,strokeLinecap:tt}};switch(w.type){case"rectangle":{const L={...X,fill:w.fill,...nn(w)};return w.stipple&&w.fill!=="none"&&(L.mask=`url(#mask-${w.stipple})`),w.dash&&(L.strokeDasharray=w.dash.map(le=>le*w.strokeWidth).join(" ")),w.dashoffset&&(L.strokeDashoffset=w.dashoffset),r.jsxs("g",{children:[r.jsx("rect",{...P,x:w.x,y:w.y,width:w.width,height:w.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("rect",{x:w.x,y:w.y,width:w.width,height:w.height,...L})]},w.id)}case"ellipse":{const L=w,le={...X,fill:L.fill};return L.stipple&&L.fill!=="none"&&(le.mask=`url(#mask-${L.stipple})`),L.dash&&(le.strokeDasharray=L.dash.map(de=>de*L.strokeWidth).join(" ")),L.dashoffset&&(le.strokeDashoffset=L.dashoffset),r.jsxs("g",{children:[r.jsx("ellipse",{...P,cx:L.cx,cy:L.cy,rx:L.rx,ry:L.ry,fill:"transparent",style:{...P.style,pointerEvents:k?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("ellipse",{cx:L.cx,cy:L.cy,rx:L.rx,ry:L.ry,...le})]},L.id)}case"arc":{const L=w,le=Ef(L),de={...X,fill:L.style==="arc"?"none":L.fill,...ue(L)};return L.stipple&&L.fill!=="none"&&L.style!=="arc"&&(de.mask=`url(#mask-${L.stipple})`),r.jsxs("g",{children:[r.jsx("path",{...P,d:le,fill:"transparent",style:{...P.style,pointerEvents:k?"none":L.fill==="none"||L.style==="arc"?"stroke":"all"}}),r.jsx("path",{d:le,...de})]},w.id)}case"line":return r.jsxs("g",{children:[r.jsx("line",{...P,x1:w.points[0].x,y1:w.points[0].y,x2:w.points[1].x,y2:w.points[1].y,style:{...P.style,pointerEvents:k?"none":"stroke"}}),r.jsx("line",{x1:w.points[0].x,y1:w.points[0].y,x2:w.points[1].x,y2:w.points[1].y,...X,...ue(w)})]},w.id);case"bezier":{const L=yl(w.points,w.smooth,w.isClosed),le=w.isClosed?w.fill:"none";return r.jsxs("g",{children:[r.jsx("path",{...P,d:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":le==="none"?"stroke":"all"}}),r.jsx("path",{d:L,...X,fill:le,...ue(w),...nn(w)})]},w.id)}case"pencil":{const L=kf(w.points);return r.jsxs("g",{children:[r.jsx("path",{...P,d:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"stroke"}}),r.jsx("path",{d:L,...X,fill:"none",strokeLinecap:"round",...nn(w),...ue(w)})]},w.id)}case"polyline":{const L={...X,...nn(w)};w.stipple&&w.isClosed&&w.fill!=="none"&&(L.mask=`url(#mask-${w.stipple})`),w.dash&&(L.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),w.dashoffset&&(L.strokeDashoffset=w.dashoffset);const le=w.isClosed?w.fill:"none";if(w.isClosed||Object.assign(L,ue(w)),w.smooth){const de=yl(w.points,!0,w.isClosed);return r.jsxs("g",{children:[r.jsx("path",{...P,d:de,fill:"transparent",style:{...P.style,pointerEvents:k?"none":le==="none"?"stroke":"all"}}),r.jsx("path",{...L,d:de,fill:le})]},w.id)}if(w.isClosed){const de=oi(w.points);return r.jsxs("g",{children:[r.jsx("polygon",{...P,points:de,fill:"transparent",style:{...P.style,pointerEvents:k?"none":le==="none"?"stroke":"all"}}),r.jsx("polygon",{...L,points:de,fill:le})]},w.id)}return r.jsxs("g",{children:[r.jsx("polyline",{...P,points:oi(w.points),fill:"transparent",style:{...P.style,pointerEvents:k?"none":"stroke"}}),r.jsx("polyline",{...L,points:oi(w.points),fill:"none"})]},w.id)}case"triangle":{const L=oi(qr(w)),le={...X,fill:w.fill,...nn(w)};return w.dash&&(le.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...P,points:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:L})]},w.id)}case"right-triangle":{const L=oi(Mf(w)),le={...X,fill:w.fill,...nn(w)};return w.dash&&(le.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...P,points:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:L})]},w.id)}case"rhombus":{const L=oi(Af(w)),le={...X,fill:w.fill,...nn(w)};return w.dash&&(le.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...P,points:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:L})]},w.id)}case"trapezoid":{const L=oi(tc(w)),le={...X,fill:w.fill,...nn(w)};return w.dash&&(le.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...P,points:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:L})]},w.id)}case"parallelogram":{const L=oi(nc(w)),le={...X,fill:w.fill,...nn(w)};return w.dash&&(le.strokeDasharray=w.dash.map(de=>de*w.strokeWidth).join(" ")),r.jsxs("g",{children:[r.jsx("polygon",{...P,points:L,fill:"transparent",style:{...P.style,pointerEvents:k?"none":w.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:L})]},w.id)}case"polygon":case"star":{const L=w,le={...X,fill:L.fill,...nn(L)};if(L.stipple&&L.fill!=="none"&&(le.mask=`url(#mask-${L.stipple})`),L.dash&&(le.strokeDasharray=L.dash.map(Ue=>Ue*L.strokeWidth).join(" ")),L.dashoffset&&(le.strokeDashoffset=L.dashoffset),L.smooth){const Ue=yl(Dl(w),!0,!0);return r.jsxs("g",{children:[r.jsx("path",{...P,d:Ue,fill:"transparent",style:{...P.style,pointerEvents:k?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("path",{...le,d:Ue})]},w.id)}const de=oi(Dl(w));return r.jsxs("g",{children:[r.jsx("polygon",{...P,points:de,fill:"transparent",style:{...P.style,pointerEvents:k?"none":L.fill==="none"?"stroke":"all"}}),r.jsx("polygon",{...le,points:de})]},w.id)}case"text":{const{text:L,font:le,fontSize:de,weight:Ue,slant:Jt,underline:tt,overstrike:on,fill:Pt,anchor:kt,justify:st,width:ln}=w,zt=ic(w),ft=Zi(w);if(!ft)return null;const Qe=st==="center"?"middle":st==="right"?"end":"start";let Ie;Qe==="start"?Ie=ft.x:Qe==="middle"?Ie=ft.x+ft.width/2:Ie=ft.x+ft.width,ln>0&&(Qe==="middle"?Ie=ft.x+ln/2:Qe==="end"?Ie=ft.x+ln:Ie=ft.x);const Me={fontFamily:oc(le),fontSize:de,fontWeight:Ue,fontStyle:Jt==="italic"?"italic":"normal",textDecoration:`${tt?"underline":""} ${on?"line-through":""}`,visibility:w.id===Re?"hidden":"visible"};return r.jsxs("g",{"data-id":w.id,children:[r.jsx("rect",{...P,x:ft.x,y:ft.y,width:ft.width,height:ft.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),r.jsx("text",{...X,x:Ie,y:ft.y,fill:Pt,textAnchor:Qe,dominantBaseline:"hanging",style:{...X.style,...Me,whiteSpace:"pre"},children:zt.map((nt,it)=>r.jsx("tspan",{x:Ie,dy:it===0?0:`${de*1.2}px`,children:nt},it))})]},w.id)}case"image":return r.jsxs("g",{children:[r.jsx("rect",{...P,x:w.x,y:w.y,width:w.width,height:w.height,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),r.jsx("image",{href:w.src,x:w.x,y:w.y,width:w.width,height:w.height,...X})]},w.id);case"bitmap":{const{x:L,y:le,width:de,height:Ue,bitmapType:Jt,foreground:tt,background:on}=w;let Pt;return Jt.startsWith("gray")?Pt=`url(#mask-${Jt})`:Pt=`url(#mask-bitmap-${Jt})`,r.jsxs("g",{children:[r.jsx("rect",{...P,x:L,y:le,width:de,height:Ue,fill:"transparent",style:{...P.style,pointerEvents:k?"none":"all"}}),r.jsxs("g",{...X,children:[r.jsx("rect",{x:L,y:le,width:de,height:Ue,fill:on}),r.jsx("rect",{x:L,y:le,width:de,height:Ue,fill:tt,mask:Pt})]})]},w.id)}default:return null}}),to&&to.state==="normal"&&r.jsx(o1,{shape:to,setAction:B,svgRef:xe,activeTool:u,getSnappedMousePosition:tn,viewTransform:ae,getPointerPosition:Ut,activePointIndex:fe,setActivePointIndex:he,updateShape:c,action:Z})]})]})]})},F1=(e,t)=>{E.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},q1=({codeLines:e,isLoading:t,error:n,onUpdate:i,onPreview:o,onSaveCode:l,onOpenOrRunCodeOnline:c,hasUnsyncedChanges:u,selectedShapeId:f,highlightCodeOnSelection:d,setHighlightCodeOnSelection:m,showLineNumbers:h,setShowLineNumbers:g,showComments:p,setShowComments:b,generatorType:S,onSwitchToLocalGenerator:M,onOpenSettingsToGenerator:x})=>{const[y,T]=E.useState(!1),[C,A]=E.useState(!1),[N,R]=E.useState(!1),V=E.useRef(null),K=E.useRef(null);F1(V,()=>R(!1));const U=E.useMemo(()=>e.map(ae=>ae.content).join(`
`),[e]),I=E.useMemo(()=>p?e.length>0:e.some(ae=>!ae.content.trim().startsWith("#")),[e,p]);E.useEffect(()=>{e.length>0&&T(!1)},[e]),E.useEffect(()=>{var ae;d&&((ae=K.current)==null||ae.scrollIntoView({behavior:"smooth",block:"center"}))},[f,e,d]);const ee=()=>{U&&(navigator.clipboard.writeText(U),T(!0),setTimeout(()=>T(!1),2e3))},be=()=>t?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-[var(--accent-primary)] rounded-full animate-spin"}),r.jsx("p",{className:"mt-4",children:"Генеруємо Python код..."})]}):n?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 p-4 text-center",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"Помилка генерації"}),r.jsx("p",{className:"text-sm",children:n}),r.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-3",children:[r.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[r.jsx(c1,{size:16}),r.jsx("span",{children:"Перейти в налаштування"})]}),S==="gemini"&&r.jsx("button",{onClick:M,className:"px-4 py-2 rounded-md font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Перемкнутись на локальний генератор"})]})]}):I?r.jsx("div",{className:"p-4 overflow-auto text-sm h-full font-mono allow-selection",children:e.map((ae,te)=>{const fe=ae.content.trim().startsWith("#");if(!p&&fe)return null;const he=d&&f!==null&&ae.shapeId===f,W=he?fe?"code-line-comment-highlighted":"code-line-highlighted":"";return r.jsxs("div",{ref:he?K:null,className:"flex items-start",children:[h&&r.jsx("span",{className:`text-right text-[var(--text-tertiary)] select-none pr-4 w-12 flex-shrink-0 ${he&&!fe?"line-number-highlighted":""}`,"aria-hidden":"true",children:te+1}),r.jsx("span",{className:`code-line flex-grow ${C?"whitespace-pre-wrap break-words":"whitespace-pre"} ${W?`${W} rounded`:""}`,children:ae.content||" "})]},te)})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)] p-4",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Код з'явиться тут"}),r.jsx("p",{className:"text-sm text-center mt-2",children:!p&&e.length>0?"Коментарі приховані. Увімкніть їх, щоб побачити код.":"Намалюйте фігури та згенеруйте код."})]}),_e=S==="gemini";return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Код Tkinter"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>A(ae=>!ae),title:C?"Вимкнути перенесення рядків":"Увімкнути перенесення рядків",className:`p-1.5 rounded-md transition-colors duration-200 ${C?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:r.jsx(M1,{size:16})}),u&&e.length>0&&!t&&r.jsxs("button",{onClick:i,title:"Оновити код",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-yellow-600 hover:bg-yellow-500 text-white ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[r.jsx(b1,{}),!_e&&r.jsx("span",{children:"Оновити"})]}),e.length>0&&!n&&!t&&r.jsxs("button",{onClick:o,title:"Попередній перегляд",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[r.jsx(S1,{}),!_e&&r.jsx("span",{children:"Перегляд"})]}),e.length>0&&!n&&r.jsxs("button",{onClick:ee,disabled:y,className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] disabled:bg-green-600 disabled:text-white ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[y?r.jsx(Nv,{}):r.jsx(T1,{}),!_e&&(y?r.jsx("span",{children:"Скопійовано!"}):r.jsx("span",{children:"Копіювати"}))]}),r.jsxs("div",{ref:V,className:"relative",onMouseLeave:()=>R(!1),children:[r.jsx("button",{onClick:()=>R(ae=>!ae),title:"Додаткові опції",className:"p-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]",children:r.jsx(A1,{size:16})}),N&&r.jsxs("div",{className:"absolute top-full right-0 mt-0 w-64 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-20 border border-[var(--border-secondary)]",children:[r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer",title:"Показувати або приховувати коментарі у коді.",children:[r.jsx("input",{type:"checkbox",checked:p,onChange:ae=>b(ae.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Показувати коментарі"})]}),r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Показувати або приховувати номери рядків у вікні коду.",children:[r.jsx("input",{type:"checkbox",checked:h,onChange:ae=>g(ae.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Показувати номери рядків"})]}),r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Автоматично підсвічувати рядок коду, що відповідає вибраній фігурі на полотні. Працює лише з локальним генератором.",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:ae=>m(ae.target.checked),disabled:_e,className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:"Підсвічувати код при виділенні"})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsxs("button",{onClick:()=>{l(),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Зберегти згенерований Python код у .py файл.",children:[r.jsx(R1,{size:16}),r.jsx("span",{children:"Зберегти у файл..."})]}),r.jsxs("button",{onClick:()=>{c(!1),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити код у онлайн-редакторі ЄPython без запуску.",children:[r.jsx(md,{size:16}),r.jsx("span",{children:"Відкрити в онлайн IDE..."})]}),r.jsxs("button",{onClick:()=>{c(!0),R(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити та одразу запустити код у онлайн-редакторі ЄPython.",children:[r.jsx(D1,{size:16}),r.jsx("span",{children:"Запустити в онлайн IDE..."})]})]})]})]})]}),r.jsx("div",{className:"flex-grow min-h-[200px] lg:min-h-0",children:be()})]})},ie=({children:e})=>r.jsx("div",{className:"flex items-center gap-2",children:e}),se=({htmlFor:e,children:t,title:n})=>r.jsx("label",{htmlFor:e,className:"text-sm font-medium text-[var(--text-secondary)] w-24 flex-shrink-0",title:n,children:t}),Ae=E.forwardRef(({id:e,value:t,onChange:n,disabled:i,step:o=1,min:l,max:c,onFocus:u,title:f,className:d},m)=>r.jsx("input",{ref:m,id:e,type:"number",value:t,onChange:h=>{const g=Number(h.target.value);isNaN(g)||n(g)},disabled:i,step:o,min:l,max:c,onFocus:u,title:f,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${d??""}`}));Ae.displayName="NumberInput";const jv=(e,t)=>{E.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},Gt=({id:e,value:t,onChange:n,onPreview:i,onCancel:o,disabled:l,title:c})=>{const[u,f]=E.useState(t),[d,m]=E.useState(!1),h=E.useRef(t),g=E.useRef(null);E.useEffect(()=>{d||(f(t),h.current=t)},[t,d]);const p=E.useCallback(()=>{d&&(o(),f(h.current),m(!1))},[d,o]);jv(g,p);const b=M=>{const x=M.target.value;d||(h.current=t,m(!0)),f(x),i(x)},S=M=>{M.stopPropagation(),n(u),h.current=u,m(!1)};return r.jsxs("div",{ref:g,className:"flex items-center gap-1",children:[r.jsx("input",{id:e,type:"color",value:u,onInput:b,disabled:l,title:c,className:"w-6 h-6 p-0 border-none rounded cursor-pointer bg-[var(--bg-secondary)] disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("div",{className:"flex items-center",style:{width:48,height:24},children:d&&!l&&r.jsxs("div",{className:"flex items-center bg-[var(--bg-tertiary)] rounded-md",children:[r.jsx("button",{onClick:S,title:"Застосувати колір",className:"p-1 rounded-l-md text-green-400 hover:bg-green-600 hover:text-white",children:r.jsx(Nv,{size:16})}),r.jsx("button",{onClick:p,title:"Скасувати зміну",className:"p-1 rounded-r-md text-red-400 hover:bg-red-600 hover:text-white",children:r.jsx(Qt,{size:16})})]})})]})},vn=({id:e,checked:t,onChange:n,label:i,disabled:o,title:l})=>r.jsxs("div",{className:"flex items-center gap-2",title:l,children:[r.jsx("input",{id:e,type:"checkbox",checked:t,onChange:c=>n(c.target.checked),disabled:o,className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("label",{htmlFor:e,className:`text-sm font-medium ${o?"text-[var(--text-disabled)]":"text-[var(--text-secondary)]"}`,children:i})]}),Cn=({id:e,value:t,onChange:n,children:i,disabled:o,title:l,className:c})=>r.jsx("select",{id:e,value:t,onChange:u=>n(u.target.value),disabled:o,title:l,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1.5 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${c??""}`,children:i}),_h=({id:e,value:t,onChange:n,disabled:i,rows:o=3,title:l,placeholder:c})=>r.jsx("textarea",{id:e,value:t,onChange:u=>n(u.target.value),disabled:i,rows:o,title:l,placeholder:c,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),O1=({id:e,value:t,onChange:n,disabled:i,isCustom:o})=>{const[l,c]=E.useState(!1),u=E.useRef(null);jv(u,()=>c(!1));const f=o?{name:"Користувацький"}:ea.find(m=>JSON.stringify(m.pattern)===JSON.stringify(t??[]))??ea[0],d=m=>{n(m.length>0?m:void 0),c(!1)};return r.jsxs("div",{ref:u,className:"relative w-full",onMouseLeave:()=>c(!1),children:[r.jsxs("button",{id:e,type:"button",onClick:()=>c(m=>!m),disabled:i,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between",title:"Вибрати готовий стиль штрихування або налаштувати власний",children:[r.jsx("span",{className:"truncate",children:f.name}),r.jsx("span",{className:"transform transition-transform text-[var(--text-tertiary)]",children:l?"▲":"▼"})]}),l&&r.jsx("div",{className:"absolute z-10 top-full left-0 mt-0 w-full bg-[var(--bg-tertiary)] rounded-md shadow-lg max-h-60 overflow-y-auto border border-[var(--border-secondary)]",children:ea.map(m=>r.jsxs("button",{onClick:()=>d(m.pattern),title:m.description,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-[var(--text-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[r.jsx("div",{className:"w-20 flex-shrink-0 flex items-center justify-center h-4 mr-2",children:r.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 4",preserveAspectRatio:"none",children:r.jsx("line",{x1:"0",y1:"2",x2:"100",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeDasharray:m.pattern.join(" "),strokeLinecap:"round"})})}),r.jsx("span",{className:"flex-grow truncate",children:m.name})]},m.name))})]})},hd=({shape:e,updateShape:t,roundFn:n})=>{const i=e.stroke==="none"||e.strokeWidth===0,o=e.strokeWidth>0?e.strokeWidth:1,l=Mt.useMemo(()=>!e.dash||e.dash.length===0?!1:!ea.some(m=>JSON.stringify(m.pattern)===JSON.stringify(e.dash)),[e.dash]),c=m=>{t({...e,dash:m,dashoffset:m?e.dashoffset??0:void 0})},u=(m,h)=>{if(!e.dash)return;const g=[...e.dash],p=h>=0?h/o:0;g[m]=p,t({...e,dash:g})},f=()=>{const m=e.dash??[];t({...e,dash:[...m,5,3]})},d=()=>{if(!e.dash||e.dash.length<2)return;const m=e.dash.slice(0,-2);t({...e,dash:m.length>0?m:void 0})};return r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-dash-select`,title:"Стиль штрихування лінії.",children:"Штрихування:"}),r.jsx(O1,{id:`${e.id}-dash-select`,value:e.dash,onChange:c,disabled:i,isCustom:l})]}),e.dash&&e.dash.length>0&&r.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[r.jsx("div",{className:"space-y-2",children:e.dash.map((m,h)=>r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-dash-${h}`,title:h%2===0?`Довжина ${h/2+1}-го штриха в пікселях.`:`Довжина ${Math.ceil(h/2)}-го пропуску в пікселях.`,children:h%2===0?`Штрих ${h/2+1} (px):`:`Пропуск ${Math.ceil(h/2)} (px):`}),r.jsx(Ae,{id:`${e.id}-dash-${h}`,value:n(m*o),onChange:g=>u(h,g),min:0,disabled:i,title:h%2===0?"Довжина штриха в пікселях":"Довжина пропуску в пікселях"})]},h))}),r.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[r.jsx("button",{onClick:d,disabled:e.dash.length<2,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--destructive-bg)] rounded-md disabled:opacity-50",title:"Видалити останній сегмент (штрих і пропуск)",children:"-"}),r.jsx("button",{onClick:f,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--accent-primary)] rounded-md",title:"Додати сегмент (штрих і пропуск)",children:"+"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-dashoffset`,title:"Зміщення патерна штрихування вздовж лінії.",children:"Зсув штриха:"}),r.jsx(Ae,{id:`${e.id}-dashoffset`,value:n(e.dashoffset??0),onChange:m=>t({...e,dashoffset:m}),disabled:i,title:"Зміщує початок патерна штрихування вздовж лінії"})]})]})]})},yn=({shape:e,updateShape:t})=>{const n="fill"in e&&e.fill!=="none";return r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-stipple`,title:"Патерн для заповнення фігури (працює лише на X11).",children:"Патерн заливки:"}),r.jsxs(Cn,{id:`${e.id}-stipple`,value:e.stipple??"none",onChange:i=>t({...e,stipple:i==="none"?void 0:i}),disabled:!n,title:"Вибрати патерн для заповнення фігури.",children:[r.jsx("option",{value:"none",children:"Немає"}),r.jsx("option",{value:"gray12",children:"Gray 12%"}),r.jsx("option",{value:"gray25",children:"Gray 25%"}),r.jsx("option",{value:"gray50",children:"Gray 50%"}),r.jsx("option",{value:"gray75",children:"Gray 75%"})]})]}),r.jsx("div",{className:"text-xs text-[var(--text-tertiary)] ml-32 -mt-2 mb-2",children:"Примітка: stipple може працювати лише на X11."})]})},In=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i})=>{const o=e.fill==="none",l=e.type==="arc"&&e.style==="arc"||(e.type==="polyline"||e.type==="bezier")&&!e.isClosed;return r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(vn,{id:`${e.id}-fill-toggle`,checked:!o,onChange:c=>t({...e,fill:c?"#4f46e5":"none"}),label:"Заливка:",disabled:l,title:"Увімкнути або вимкнути заливку фігури."}),r.jsx(Gt,{id:`${e.id}-fill`,value:o?"#000000":e.fill,onChange:c=>t({...e,fill:c}),onPreview:c=>n(e.id,{fill:c}),onCancel:i,disabled:o||l,title:"Колір заливки фігури."})]})})},Ln=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,roundFn:o})=>{const l=e.stroke==="none",c=e.type!=="text";return r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Контур"}),r.jsxs(ie,{children:[r.jsx(vn,{id:`${e.id}-stroke-toggle`,checked:!l,onChange:u=>t({...e,stroke:u?"#000000":"none"}),label:"Контур:",title:"Увімкнути або вимкнути контур фігури."}),r.jsx(Gt,{id:`${e.id}-stroke`,value:l?"#ffffff":e.stroke,onChange:u=>t({...e,stroke:u}),onPreview:u=>n(e.id,{stroke:u}),onCancel:i,disabled:l,title:"Колір контуру фігури."})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-stroke-width`,title:"Товщина лінії контуру в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${e.id}-stroke-width`,value:o(e.strokeWidth),onChange:u=>t({...e,strokeWidth:u}),min:0,disabled:l,title:"Товщина лінії контуру в пікселях."})]}),c&&r.jsx(hd,{shape:e,updateShape:t,roundFn:o})]})},Y1=({points:e,onPointsChange:t,shapeId:n,selectedShape:i,isEditing:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,isShapeClosed:d,roundFn:m})=>{const[h,g]=E.useState(e.length<10),p=E.useRef([]),b=E.useRef([]);E.useEffect(()=>{p.current=p.current.slice(0,e.length),b.current=b.current.slice(0,e.length)},[e.length]),E.useEffect(()=>{var T,C;l!==null&&((T=p.current[l])==null||T.scrollIntoView({behavior:"smooth",block:"nearest"}),(C=b.current[l])==null||C.focus({preventScroll:!0}))},[l]);const S=E.useMemo(()=>St(i),[i]),M=E.useMemo(()=>"rotation"in i?i.rotation:0,[i]),x=E.useMemo(()=>!S||M===0?e:e.map(T=>qe(T,S,M)),[e,S,M]),y=(T,C,A)=>{if(!S)return;if(M===0){const U=[...e];U[T]={...U[T],[C]:A},t(U);return}const R={...x[T],[C]:A},V=qe(R,S,-M),K=[...e];K[T]=V,t(K)};return r.jsxs("div",{className:"border-t border-[var(--border-secondary)] pt-2 mt-2",children:[r.jsxs("button",{onClick:()=>g(T=>!T),className:"w-full text-left font-semibold text-[var(--text-secondary)] py-1 flex justify-between items-center",title:"Показати/приховати список вузлових точок фігури",children:[r.jsxs("span",{children:["Вузли (",e.length,")"]}),r.jsx("span",{className:`transform transition-transform ${h?"rotate-180":"rotate-0"}`,children:"▼"})]}),h&&r.jsx("div",{className:"space-y-1 mt-2 max-h-60 overflow-y-auto pr-2",children:e.map((T,C)=>r.jsxs(Mt.Fragment,{children:[r.jsxs("div",{ref:A=>{p.current[C]=A},className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 p-1 rounded-md transition-colors",children:[r.jsxs("span",{className:"text-xs text-[var(--text-tertiary)] font-mono text-right",children:[C,":"]}),r.jsx(Ae,{ref:A=>{b.current[C]=A},id:`${n}-point-${C}-x`,value:m(x[C].x),onChange:A=>y(C,"x",A),disabled:!o,onFocus:()=>c(C),title:`X-координата вузла ${C}`,className:l===C?"bg-[#4f46e5]/30":""}),r.jsx(Ae,{id:`${n}-point-${C}-y`,value:m(x[C].y),onChange:A=>y(C,"y",A),disabled:!o,onFocus:()=>c(C),title:`Y-координата вузла ${C}`,className:l===C?"bg-[#4f46e5]/30":""}),r.jsx("button",{onClick:()=>u(C),title:"Видалити вузол",className:"p-1 text-[var(--destructive-text)] hover:text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:!o||e.length<=2,children:r.jsx(lc,{size:16})})]},`${n}-point-${C}`),(d||C<e.length-1)&&o&&r.jsxs("div",{className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 h-4",children:[r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("button",{onClick:()=>f(C+1),title:"Додати вузол між цим та наступним",className:"w-5 h-5 flex justify-center items-center bg-[var(--bg-primary)] text-[var(--text-tertiary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] rounded-full transition-colors group",children:r.jsxs("svg",{className:"w-3 h-3 text-[var(--text-tertiary)] group-hover:text-[var(--accent-text)]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),r.jsx("div",{className:"col-span-3 h-px bg-[var(--border-secondary)]"})]})]},`${n}-point-fragment-${C}`))})]})},J1=({shape:e,updateShape:t,roundFn:n})=>{let i=0,o=0,l=0,c=0;e.type==="rectangle"||e.type==="arc"?(i=e.x,o=e.y,l=e.x+e.width,c=e.y+e.height):e.type==="ellipse"&&(i=e.cx-e.rx,o=e.cy-e.ry,l=e.cx+e.rx,c=e.cy+e.ry);const u=(f,d)=>{if(e.type==="rectangle"||e.type==="arc"){let{x:m,y:h,width:g,height:p}=e;switch(f){case"x1":g=m+g-d,m=d;break;case"y1":p=h+p-d,h=d;break;case"x2":g=d-m;break;case"y2":p=d-h;break}g>=0&&p>=0&&t({...e,x:m,y:h,width:g,height:p})}else if(e.type==="ellipse"){let m=e.cx-e.rx,h=e.cy-e.ry,g=e.cx+e.rx,p=e.cy+e.ry;switch(f){case"x1":m=d;break;case"y1":h=d;break;case"x2":g=d;break;case"y2":p=d;break}const b=(m+g)/2,S=(h+p)/2,M=(g-m)/2,x=(p-h)/2;M>=0&&x>=0&&t({...e,cx:b,cy:S,rx:M,ry:x})}};return r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-tk-x1`,title:"X-координата верхнього лівого кута рамки Tkinter.",children:"x1:"}),r.jsx(Ae,{id:`${e.id}-tk-x1`,value:n(i),onChange:f=>u("x1",f)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-tk-y1`,title:"Y-координата верхнього лівого кута рамки Tkinter.",children:"y1:"}),r.jsx(Ae,{id:`${e.id}-tk-y1`,value:n(o),onChange:f=>u("y1",f)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-tk-x2`,title:"X-координата нижнього правого кута рамки Tkinter.",children:"x2:"}),r.jsx(Ae,{id:`${e.id}-tk-x2`,value:n(l),onChange:f=>u("x2",f)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-tk-y2`,title:"Y-координата нижнього правого кута рамки Tkinter.",children:"y2:"}),r.jsx(Ae,{id:`${e.id}-tk-y2`,value:n(c),onChange:f=>u("y2",f)})]})]})},Nh=e=>e?["line","pencil","polyline","bezier"].includes(e.type):!1,X1=({selectedShape:e,updateShape:t,deleteShape:n,duplicateShape:i,activeTool:o,activePointIndex:l,setActivePointIndex:c,deletePoint:u,addPoint:f,convertToPath:d,showNotification:m,setShapePreview:h,cancelShapePreview:g})=>{const[p,b]=E.useState(null),[S,M]=E.useState(!1),[x,y]=E.useState(null),[T,C]=E.useState(""),[A,N]=E.useState(""),R=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],V={"Популярні Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],"Популярні Serif":["Times New Roman","Georgia","Garamond"],"Популярні Monospace":["Courier New","Consolas","Lucida Console","Monaco"],Декоративні:["Impact","Comic Sans MS","Brush Script MT"]},K=[...Object.values(V).flat(),...R].sort((B,J)=>B.localeCompare(J)),U=B=>Math.round(B*100)/100,I=Mt.useMemo(()=>e?ud(e):null,[e]),ee=Mt.useMemo(()=>e?Or({...e,rotation:0}):null,[e]);E.useEffect(()=>{ee&&(C(U(ee.width).toString()),N(U(ee.height).toString()))},[ee]);const be=(B,J)=>{if(!e||!I)return;const Te=B==="x"?I.x:I.y,v=J-Te,G=B==="x"?v:0,Y=B==="y"?v:0;let pe={...e};switch(pe.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":pe.x+=G,pe.y+=Y;break;case"ellipse":case"polygon":case"star":pe.cx+=G,pe.cy+=Y;break;case"line":case"bezier":case"pencil":case"polyline":pe.points=pe.points.map(me=>({x:me.x+G,y:me.y+Y}));break}t(pe)},_e=(B,J)=>{if(!e||!ee)return;const Te=B==="width"?ee.width:ee.height,v=St(e);if(!v)return;let G={...e};const Y="isAspectRatioLocked"in e&&e.isAspectRatioLocked;if(Te===0&&J>0)switch(G.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const pe=G.width,me=G.height,xe=B==="width"||Y?J:pe,Le=B==="height"||Y?J:me;G.x=v.x-xe/2,G.y=v.y-Le/2,G.width=xe,G.height=Le;break}case"ellipse":{const pe=G.rx,me=G.ry;G.rx=B==="width"||Y?J/2:pe,G.ry=B==="height"||Y?J/2:me;break}case"text":{const pe=Zi(G);if(!pe||pe.height===0||pe.width===0)break;const me=J/(B==="width"?pe.width:pe.height);G.fontSize*=me;break}}else{if(Te<=0)return;let pe=1,me=1;switch(B==="width"?(pe=J/Te,Y&&(me=pe)):(me=J/Te,Y&&(pe=me)),G.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const xe=G.width*pe,Le=G.height*me;G.x=v.x-xe/2,G.y=v.y-Le/2,G.width=xe,G.height=Le;break}case"ellipse":{G.rx*=pe,G.ry*=me;break}case"polygon":case"star":{const xe=Y||B!=="height"?pe:me;G.radius*=xe,G.innerRadius!==void 0&&(G.innerRadius*=xe);break}case"text":{const xe=Y||B!=="height"?pe:me;G.fontSize*=xe;break}case"line":case"pencil":case"polyline":case"bezier":{G.points=G.points.map(xe=>({x:v.x+(xe.x-v.x)*pe,y:v.y+(xe.y-v.y)*me}));break}}}t(G)},ae=(B,J)=>{if(!e||(B==="width"?C(J):N(J),J===""))return;const Te=parseFloat(J);isNaN(Te)||Te<0||Nh(e)&&Te<1||_e(B,Te)},te=B=>{if(!e||!ee)return;const J=B==="width"?T:A,Te=parseFloat(J);let v=null;if(isNaN(Te)||Te<0||J===""?v=B==="width"?ee.width:ee.height:Nh(e)&&Te<1&&(m("Розмір контурів не може бути менше 1, щоб уникнути втрати форми.","info"),v=Math.max(1,B==="width"?ee.width:ee.height)),v!==null){const G=U(v);B==="width"?C(G.toString()):N(G.toString());const Y=B==="width"?ee.width:ee.height;Math.abs(Y-G)>.001&&_e(B,G)}},fe=B=>{if(e)if(e.type==="polyline"||e.type==="bezier"||e.type==="pencil"||e.type==="line")t({...e,points:B});else{if(!Kn(e))return;const Te={id:e.id,name:e.name,type:"polyline",points:B,isClosed:!0,rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"?e.fill:"none",joinstyle:"joinstyle"in e&&typeof e.joinstyle=="string"?e.joinstyle:"miter",smooth:"smooth"in e&&typeof e.smooth=="boolean"?e.smooth:void 0,dash:"dash"in e?e.dash:void 0,dashoffset:"dashoffset"in e?e.dashoffset:void 0,isAspectRatioLocked:"isAspectRatioLocked"in e?e.isAspectRatioLocked:!1};t(Te)}},he=async()=>{if(!("queryLocalFonts"in window)){m("Ваш браузер або середовище не підтримує завантаження локальних шрифтів.","error",5e3),b([]);return}try{M(!0);const B=await window.queryLocalFonts();if(B.length===0){m("Локальні шрифти не знайдено або дозвіл не було надано.","info",4e3),b([]);return}const J=new Set;for(const G of B)J.add(G.family);const Te=new Set(K),v=Array.from(J).filter(G=>!Te.has(G));b(v.sort((G,Y)=>G.localeCompare(Y))),v.length>0?m(`Завантажено ${v.length} нових системних шрифтів.`,"info"):m("Нових унікальних системних шрифтів не знайдено.","info")}catch(B){console.error("Помилка під час завантаження системних шрифтів:",B),b([]);let J="Не вдалося завантажити шрифти. Дивіться консоль для деталей.",Te=5e3;(B instanceof Error?B.toString():String(B)).includes("disallowed by Permissions Policy")||B instanceof DOMException&&B.name==="SecurityError"?(J="Доступ до шрифтів заблоковано політикою безпеки середовища.",Te=6e3):B instanceof DOMException&&B.name==="NotAllowedError"&&(J="Ви відхилили дозвіл на доступ до шрифтів."),m(J,"error",Te)}finally{M(!1)}},W=async B=>{if(!(!e||e.type!=="text")){if(B==="load-system-fonts"){await he();return}t({...e,font:B})}},O=Mt.useMemo(()=>e?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(e.type):!1,[e]),re=()=>{if(!e||!I)return null;const B=r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-state`,title:"Стан видимості та інтерактивності об'єкта.",children:"Стан:"}),r.jsxs(Cn,{id:`${e.id}-state`,value:e.state,onChange:v=>t({...e,state:v}),children:[r.jsx("option",{value:"normal",children:"Звичайний"}),r.jsx("option",{value:"hidden",children:"Прихований"}),r.jsx("option",{value:"disabled",children:"Вимкнений"})]})]})}),J=v=>r.jsx(r.Fragment,{children:r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-joinstyle`,title:"Стиль з'єднання сегментів лінії.",children:"Стиль з'єднання:"}),r.jsxs(Cn,{id:`${v.id}-joinstyle`,value:v.joinstyle??"miter",onChange:G=>t({...v,joinstyle:G}),title:"Визначає, як виглядають кути при з'єднанні ліній.",children:[r.jsx("option",{value:"miter",children:"Гострий"}),r.jsx("option",{value:"round",children:"Круглий"}),r.jsx("option",{value:"bevel",children:"Скошений"})]})]})}),Te=v=>{const G=(v.type==="polyline"||v.type==="bezier")&&v.isClosed,Y=v.strokeWidth>0?v.strokeWidth:1,[pe,me,xe]=v.arrowshape??[4,4,1.5],Le=(Je,Ee)=>{if(Y===0)return;const Ut=[...v.arrowshape??[4,4,1.5]],tn=Ee/Y;Ut[Je]=parseFloat(tn.toFixed(2)),t({...v,arrowshape:Ut})};return r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-capstyle`,title:"Стиль кінців незамкнених ліній.",children:"Стиль кінця:"}),r.jsxs(Cn,{id:`${v.id}-capstyle`,value:v.capstyle??"round",onChange:Je=>t({...v,capstyle:Je}),title:"Визначає, як виглядають кінці ліній.",children:[r.jsx("option",{value:"butt",children:"Плаский"}),r.jsx("option",{value:"round",children:"Круглий"}),r.jsx("option",{value:"projecting",children:"Квадратний"})]})]}),!G&&r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-arrow`,title:"Додати стрілки на кінці лінії.",children:"Стрілки:"}),r.jsxs(Cn,{id:`${v.id}-arrow`,value:v.arrow??"none",onChange:Je=>{const Ee={...v,arrow:Je};Je!=="none"&&!v.arrowshape&&(Ee.arrowshape=[4,4,1.5]),t(Ee)},title:"Додати стрілки на початок, кінець або на обидва кінці лінії.",children:[r.jsx("option",{value:"none",children:"Немає"}),r.jsx("option",{value:"first",children:"На початку"}),r.jsx("option",{value:"last",children:"В кінці"}),r.jsx("option",{value:"both",children:"На обох кінцях"})]})]}),v.arrow&&v.arrow!=="none"&&r.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-arrow-d1`,title:"Абсолютна довжина стрілки в пікселях.",children:"Довжина:"}),r.jsx(Ae,{id:`${v.id}-arrow-d1`,value:U(pe*Y),onChange:Je=>Le(0,Je),min:0,title:"Абсолютна довжина стрілки в пікселях"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-arrow-d2`,title:"Абсолютна ширина стрілки в пікселях.",children:"Ширина:"}),r.jsx(Ae,{id:`${v.id}-arrow-d2`,value:U(me*Y),onChange:Je=>Le(1,Je),min:0,title:"Абсолютна ширина стрілки в пікселях"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-arrow-d3`,title:"Абсолютна ширина основи стрілки в пікселях.",children:"Ширина основи:"}),r.jsx(Ae,{id:`${v.id}-arrow-d3`,value:U(xe*Y),onChange:Je=>Le(2,Je),min:0,title:"Абсолютна ширина основи стрілки в пікселях"})]})]})]})]})};switch(e.type){case"rectangle":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"ellipse":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U})]})}case"polygon":case"star":{const v=e,G=Wb(v);return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-sides`,title:"Кількість сторін або променів у фігури.",children:"Сторони:"}),r.jsx(Ae,{id:`${v.id}-sides`,value:v.sides,onChange:Y=>t({...v,sides:Y}),min:3})]}),v.type==="star"&&r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-inner-radius`,title:"Радіус внутрішніх вершин зірки.",children:"Внутр. радіус:"}),r.jsx(Ae,{id:`${v.id}-inner-radius`,value:U(v.innerRadius??0),onChange:Y=>t({...v,innerRadius:Y}),min:0})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-side-length`,title:"Довжина однієї сторони багатокутника.",children:"Довжина сторони:"}),r.jsx(Ae,{id:`${v.id}-side-length`,value:U(G),onChange:Y=>t({...v,radius:Kb({sideLength:Y,sides:v.sides})})})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"triangle":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-top-offset`,title:"Горизонтальне зміщення верхньої вершини відносно центру основи.",children:"Зсув вершини:"}),r.jsx(Ae,{id:`${v.id}-top-offset`,value:U(v.topVertexOffset??0),onChange:G=>t({...v,topVertexOffset:G}),step:.01})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"right-triangle":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"rhombus":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"trapezoid":{const v=e,G=(pe,me)=>{let xe=Math.max(0,me/100);const Le={};v.isSymmetrical?(xe>.5&&(xe=.5),Le.topLeftOffsetRatio=xe,Le.topRightOffsetRatio=xe):pe==="left"?(xe>1-v.topRightOffsetRatio&&(xe=1-v.topRightOffsetRatio),Le.topLeftOffsetRatio=xe):(xe>1-v.topLeftOffsetRatio&&(xe=1-v.topLeftOffsetRatio),Le.topRightOffsetRatio=xe),t({...v,...Le})},Y=pe=>{const me={...v,isSymmetrical:pe};if(pe){let xe=(me.topLeftOffsetRatio+me.topRightOffsetRatio)/2;xe>.5&&(xe=.5),me.topLeftOffsetRatio=xe,me.topRightOffsetRatio=xe}t(me)};return r.jsxs(r.Fragment,{children:[B,r.jsx(ie,{children:r.jsx(vn,{id:`${v.id}-symm`,checked:!!v.isSymmetrical,onChange:Y,label:"Симетрична:",title:"Зробити зміщення верхніх кутів однаковим."})}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-topleft`,title:"Зміщення верхнього лівого кута всередину у відсотках від ширини.",children:"Зсув зліва (%):"}),r.jsx(Ae,{id:`${v.id}-topleft`,value:U(v.topLeftOffsetRatio*100),onChange:pe=>G("left",pe)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-topright`,title:"Зміщення верхнього правого кута всередину у відсотках від ширини.",children:"Зсув справа (%):"}),r.jsx(Ae,{id:`${v.id}-topright`,value:U(v.topRightOffsetRatio*100),onChange:pe=>G("right",pe),disabled:!!v.isSymmetrical})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"parallelogram":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-angle`,title:"Кут нахилу бічних сторін (90 градусів = прямокутник).",children:"Кут (º):"}),r.jsx(Ae,{id:`${v.id}-angle`,value:U(v.angle),onChange:G=>t({...v,angle:G}),min:1,max:179})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v)]})}case"line":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),r.jsx(Gt,{id:`${v.id}-stroke`,value:v.stroke,onChange:G=>t({...v,stroke:G}),onPreview:G=>h(v.id,{stroke:G}),onCancel:g})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${v.id}-stroke-width`,value:U(v.strokeWidth),onChange:G=>t({...v,strokeWidth:G}),min:0})]}),r.jsx(hd,{shape:v,updateShape:t,roundFn:U}),Te(v)]})}case"pencil":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),r.jsx(Gt,{id:`${v.id}-stroke`,value:v.stroke,onChange:G=>t({...v,stroke:G}),onPreview:G=>h(v.id,{stroke:G}),onCancel:g})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),r.jsx(Ae,{id:`${v.id}-stroke-width`,value:U(v.strokeWidth),onChange:G=>t({...v,strokeWidth:G}),min:0})]}),r.jsx(hd,{shape:v,updateShape:t,roundFn:U}),J(v),Te(v)]})}case"polyline":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx(ie,{children:r.jsx(vn,{id:`${v.id}-isClosed`,checked:v.isClosed,onChange:G=>t({...v,isClosed:G,name:qt({...v,isClosed:G})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),r.jsx(ie,{children:r.jsx(vn,{id:`${v.id}-smooth`,checked:!!v.smooth,onChange:G=>t({...v,smooth:G}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки згладжування:"}),r.jsx(Ae,{id:`${v.id}-splinesteps`,value:v.splinesteps??12,onChange:G=>t({...v,splinesteps:G}),min:1,max:100,disabled:!v.smooth})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v),Te(v)]})}case"bezier":{const v=e;return r.jsxs(r.Fragment,{children:[B,r.jsx(ie,{children:r.jsx(vn,{id:`${v.id}-isClosed`,checked:v.isClosed,onChange:G=>t({...v,isClosed:G,name:qt({...v,isClosed:G})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),r.jsx(ie,{children:r.jsx(vn,{id:`${v.id}-smooth`,checked:!!v.smooth,onChange:G=>t({...v,smooth:G}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки сплайна:"}),r.jsx(Ae,{id:`${v.id}-splinesteps`,value:v.splinesteps,onChange:G=>t({...v,splinesteps:G}),min:1,max:100,disabled:!v.smooth})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),J(v),Te(v)]})}case"arc":{const v=e,G=v.start+v.extent,Y=me=>{if(v.isExtentLocked)t({...v,start:me});else{const xe=G-me;t({...v,start:me,extent:xe})}},pe=me=>{if(v.isExtentLocked){const xe=me-v.extent;t({...v,start:xe})}else{const xe=me-v.start;t({...v,extent:xe})}};return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-style`,title:"Стиль дуги: Сектор (pieslice), Хорда (chord), або Дуга (arc).",children:"Стиль:"}),r.jsxs(Cn,{id:`${v.id}-style`,value:v.style,onChange:me=>{const xe=qt({...v,style:me});t({...v,style:me,name:xe})},children:[r.jsx("option",{value:"pieslice",children:"Сектор"}),r.jsx("option",{value:"chord",children:"Хорда"}),r.jsx("option",{value:"arc",children:"Дуга"})]})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-start`,title:"Початковий кут дуги в градусах (0 - на 3 години).",children:"Початок (º):"}),r.jsx(Ae,{id:`${v.id}-start`,value:U(v.start),onChange:Y})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-end`,title:"Кінцевий кут дуги в градусах.",children:"Кінець (º):"}),r.jsx(Ae,{id:`${v.id}-end`,value:U(G),onChange:pe})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-extent`,title:"Довжина дуги в градусах.",children:"Довжина (º):"}),r.jsx(Ae,{id:`${v.id}-extent`,value:U(v.extent),onChange:me=>t({...v,extent:me}),disabled:v.isExtentLocked})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-extent-lock`,children:""}),r.jsx(vn,{id:`${v.id}-extent-lock`,checked:!!v.isExtentLocked,onChange:me=>t({...v,isExtentLocked:me}),label:"Блокувати довжину",title:"Зберігати довжину дуги при зміні її кінців."})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsx(In,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g}),r.jsx(yn,{shape:v,updateShape:t}),r.jsx(Ln,{shape:v,updateShape:t,setShapePreview:h,cancelShapePreview:g,roundFn:U}),v.style==="arc"&&Te(v)]})}case"text":{const v=e,G={nw:"Верхній лівий кут",n:"Верхній центр",ne:"Верхній правий кут",w:"Центр ліворуч",center:"Центр",e:"Центр праворуч",sw:"Нижній лівий кут",s:"Нижній центр",se:"Нижній правий кут"};return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-text`,title:"Текст для відображення.",children:"Текст:"}),r.jsx(_h,{id:`${v.id}-text`,value:v.text,onChange:Y=>t({...v,text:Y})})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-font`,title:"Шрифт для тексту.",children:"Шрифт:"}),r.jsxs(Cn,{id:`${v.id}-font`,value:v.font,onChange:W,children:[Object.entries(V).map(([Y,pe])=>r.jsx("optgroup",{label:Y,children:pe.map(me=>r.jsx("option",{value:me,children:me},me))},Y)),p&&p.length>0&&r.jsx("optgroup",{label:"Системні шрифти",children:p.map(Y=>r.jsx("option",{value:Y,children:Y},Y))}),r.jsx("optgroup",{label:"Логічні шрифти Tk",children:R.map(Y=>r.jsx("option",{value:Y,children:Y},Y))}),r.jsx("optgroup",{label:"Дії",children:r.jsx("option",{value:"load-system-fonts",disabled:S,children:S?"Завантаження...":"Завантажити системні шрифти"})})]})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-fontSize`,title:"Розмір шрифту.",children:"Розмір:"}),r.jsx(Ae,{id:`${v.id}-fontSize`,value:U(v.fontSize),onChange:Y=>t({...v,fontSize:Y}),min:1})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-fill`,title:"Колір тексту.",children:"Колір:"}),r.jsx(Gt,{id:`${v.id}-fill`,value:v.fill,onChange:Y=>t({...v,fill:Y}),onPreview:Y=>h(v.id,{fill:Y}),onCancel:g})]}),r.jsx(yn,{shape:v,updateShape:t}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-style`,title:"Стилі тексту.",children:"Стиль:"}),r.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[r.jsx(vn,{id:`${v.id}-bold`,checked:v.weight==="bold",onChange:Y=>t({...v,weight:Y?"bold":"normal"}),label:"Виразний"}),r.jsx(vn,{id:`${v.id}-italic`,checked:v.slant==="italic",onChange:Y=>t({...v,slant:Y?"italic":"roman"}),label:"Курсив"}),r.jsx(vn,{id:`${v.id}-underline`,checked:v.underline,onChange:Y=>t({...v,underline:Y}),label:"Підкреслений"}),r.jsx(vn,{id:`${v.id}-overstrike`,checked:v.overstrike,onChange:Y=>t({...v,overstrike:Y}),label:"Закреслений"})]})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-anchor`,title:"Точка на тексті, яка буде розташована за вказаними координатами.",children:"Прив'язка:"}),r.jsx(Cn,{id:`${v.id}-anchor`,value:v.anchor,onChange:Y=>{t({...v,anchor:Y})},children:Object.entries(G).map(([Y,pe])=>r.jsx("option",{value:Y,children:pe},Y))})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-anchor-x`,title:"X-координата точки прив'язки.",children:"X прив'язки:"}),r.jsx(Ae,{id:`${v.id}-anchor-x`,value:U(v.x),onChange:Y=>t({...v,x:Y})})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-anchor-y`,title:"Y-координата точки прив'язки.",children:"Y прив'язки:"}),r.jsx(Ae,{id:`${v.id}-anchor-y`,value:U(v.y),onChange:Y=>t({...v,y:Y})})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-justify`,title:"Вирівнювання тексту всередині його рамки.",children:"Вирівнювання:"}),r.jsxs(Cn,{id:`${v.id}-justify`,value:v.justify,onChange:Y=>t({...v,justify:Y}),children:[r.jsx("option",{value:"left",children:"Ліворуч"}),r.jsx("option",{value:"center",children:"Центр"}),r.jsx("option",{value:"right",children:"Праворуч"})]})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-width`,title:"Ширина текстового блока. 0 - без переносу.",children:"Ширина блока:"}),r.jsx(Ae,{id:`${v.id}-width`,value:U(v.width),onChange:Y=>t({...v,width:Y}),min:0})]})]})}case"image":return r.jsx(r.Fragment,{children:B});case"bitmap":{const v=e,G=["error","gray75","gray50","gray25","gray12","hourglass","info","questhead","question","warning"];return r.jsxs(r.Fragment,{children:[B,r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-type`,title:"Стандартний тип бітової карти в Tkinter.",children:"Тип:"}),r.jsx(Cn,{id:`${v.id}-type`,value:v.bitmapType,onChange:Y=>t({...v,bitmapType:Y}),children:G.map(Y=>r.jsx("option",{value:Y,children:Y},Y))})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-fg`,title:"Колір переднього плану бітової карти.",children:"Основний колір:"}),r.jsx(Gt,{id:`${v.id}-fg`,value:v.foreground,onChange:Y=>t({...v,foreground:Y}),onPreview:Y=>h(v.id,{foreground:Y}),onCancel:g})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${v.id}-bg`,title:"Колір фону бітової карти.",children:"Тловий колір:"}),r.jsx(Gt,{id:`${v.id}-bg`,value:v.background,onChange:Y=>t({...v,background:Y}),onPreview:Y=>h(v.id,{background:Y}),onCancel:g})]})]})}default:return r.jsx(r.Fragment,{children:B})}};if(!e)return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)] p-4",children:[r.jsx("div",{className:"flex justify-between items-center pb-2 border-b border-[var(--border-primary)]",children:r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"})}),r.jsx("div",{className:"flex-grow flex items-center justify-center text-center text-[var(--text-tertiary)]",children:r.jsx("p",{className:"text-sm",children:"Виберіть об'єкт, щоб побачити його властивості."})})]});const Ce=o==="edit-points",ke=_f(e),ye=Ce&&ke&&ke.length>0,we="isAspectRatioLocked"in e,Re=e.rotation===0&&(e.type==="rectangle"||e.type==="ellipse"||e.type==="arc"),Z=e?e.type==="polyline"||e.type==="bezier"?e.isClosed:e.type==="line"||e.type==="pencil"?!1:e.type==="arc"?e.style!=="arc":!0:!1;return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"}),r.jsxs("div",{className:"flex items-center gap-1",children:[O&&r.jsx("button",{onClick:()=>d(e.id),title:"Перетворити на контур",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:r.jsx(x1,{size:18})}),r.jsx("button",{onClick:()=>i(e.id),title:"Дублювати",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:r.jsx(_v,{size:18})}),r.jsx("button",{onClick:()=>n(e.id),title:"Видалити",className:"p-1.5 rounded hover:bg-[var(--destructive-bg)] text-[var(--destructive-text)] hover:text-[var(--accent-text)]",children:r.jsx(lc,{size:18})})]})]}),r.jsxs("div",{className:"flex-grow overflow-y-auto p-3 space-y-2",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-name`,title:"Назва об'єкта.",children:"Назва:"}),r.jsx("input",{id:`${e.id}-name`,type:"text",value:x??e.name??qt(e),onFocus:B=>y(B.target.value),onBlur:()=>{x!==null&&t({...e,name:x.trim()===""?qt(e):x.trim()}),y(null)},onChange:B=>y(B.target.value),onKeyDown:B=>{B.key==="Enter"&&B.target.blur(),B.key==="Escape"&&(y(null),B.target.blur())},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-comment`,title:"Додати коментар до коду.",children:"Коментар:"}),r.jsx(_h,{id:`${e.id}-comment`,value:e.comment??"",onChange:B=>t({...e,comment:B}),rows:2,placeholder:"Цей коментар буде додано до коду",title:"Кожен рядок буде окремим коментарем у згенерованому коді."})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Геометрія"}),r.jsxs("div",{className:"space-y-2",children:[I&&ee&&r.jsxs(r.Fragment,{children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-pos-x`,title:"X-координата верхнього лівого кута рамки виділення.",children:"X:"}),r.jsx(Ae,{id:`${e.id}-pos-x`,value:U(I.x),onChange:B=>be("x",B)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-pos-y`,title:"Y-координата верхнього лівого кута рамки виділення.",children:"Y:"}),r.jsx(Ae,{id:`${e.id}-pos-y`,value:U(I.y),onChange:B=>be("y",B)})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-width`,title:"Геометрична ширина об'єкта (без обертання).",children:"Ширина:"}),r.jsx("input",{id:`${e.id}-width`,type:"number",step:"1",value:T,onChange:B=>ae("width",B.target.value),onBlur:()=>te("width"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-height`,title:"Геометрична висота об'єкта (без обертання).",children:"Висота:"}),r.jsx("input",{id:`${e.id}-height`,type:"number",step:"1",value:A,onChange:B=>ae("height",B.target.value),onBlur:()=>te("height"),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-visual-width`,title:"Візуальна ширина об'єкта з урахуванням обертання.",children:"Ширина (віз.):"}),r.jsx(Ae,{id:`${e.id}-visual-width`,value:U(I.width),onChange:()=>{},disabled:!0})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-visual-height`,title:"Візуальна висота об'єкта з урахуванням обертання.",children:"Висота (віз.):"}),r.jsx(Ae,{id:`${e.id}-visual-height`,value:U(I.height),onChange:()=>{},disabled:!0})]})]}),"rotation"in e&&r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-rotation`,title:"Кут обертання об'єкта в градусах.",children:"Обертання:"}),r.jsx(Ae,{id:`${e.id}-rotation`,value:U(e.rotation),onChange:B=>t({...e,rotation:B})})]}),we&&r.jsxs(ie,{children:[r.jsx(se,{htmlFor:`${e.id}-aspect-lock`,children:"Пропорції:"}),r.jsx("button",{id:`${e.id}-aspect-lock`,onClick:()=>t({...e,isAspectRatioLocked:!e.isAspectRatioLocked}),className:`p-1.5 rounded-md ${e.isAspectRatioLocked?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,title:e.isAspectRatioLocked?"Розблокувати пропорції":"Заблокувати пропорції",children:e.isAspectRatioLocked?r.jsx(p1,{size:16}):r.jsx(y1,{size:16})})]})]}),Re&&r.jsxs(r.Fragment,{children:[r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Рамка Tkinter (Bbox)"}),r.jsx(J1,{shape:e,updateShape:t,roundFn:U})]}),re(),ye&&r.jsx(Y1,{points:ke,onPointsChange:fe,shapeId:e.id,selectedShape:e,isEditing:Ce,activePointIndex:l,setActivePointIndex:c,deletePoint:B=>u(e.id,B),addPoint:B=>f(e.id,B),isShapeClosed:Z,roundFn:U})]})]})},Us={select:r.jsx(rv,{}),"edit-points":r.jsx(sv,{}),rectangle:r.jsx(cv,{}),square:r.jsx(av,{}),circle:r.jsx(uv,{}),ellipse:r.jsx(dv,{}),line:r.jsx(fv,{}),bezier:r.jsx(hv,{}),pencil:r.jsx(pv,{}),triangle:r.jsx(yv,{}),"right-triangle":r.jsx(xv,{}),polygon:r.jsx(gv,{}),star:r.jsx(Ev,{}),polyline:r.jsx(mv,{}),rhombus:r.jsx(vv,{}),trapezoid:r.jsx(Cv,{}),parallelogram:r.jsx(Tv,{}),arc:r.jsx(wv,{}),pieslice:r.jsx(bv,{}),chord:r.jsx(Sv,{}),text:r.jsx(Mv,{}),image:r.jsx(Av,{}),bitmap:r.jsx(kv,{})},W1=e=>e.type==="arc"?Us[e.style]:e.type==="rectangle"&&e.isAspectRatioLocked?Us.square:(e.type==="polyline"||e.type==="bezier")&&e.isClosed?Us.polygon:Us[e.type],K1=({shapes:e,selectedShapeId:t,onSelectShape:n,onDeleteShape:i,onMoveShape:o,onUpdateShape:l,onReorderShape:c,showTkinterNames:u})=>{const[f,d]=E.useState(null),[m,h]=E.useState(""),[g,p]=E.useState(null),[b,S]=E.useState(null),[M,x]=E.useState(null),y=I=>{d(I.id),h(I.name||qt(I))},T=()=>{if(f){const I=e.find(ee=>ee.id===f);I&&m.trim()!==""&&l({...I,name:m.trim()})}d(null)},C=I=>{I.key==="Enter"?T():I.key==="Escape"&&d(null)},A=(I,ee)=>{I.stopPropagation();const be=ee.state==="hidden"?"normal":"hidden";l({...ee,state:be})},N=(I,ee)=>{p(ee),I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("text/plain",ee)},R=(I,ee)=>{if(I.preventDefault(),ee===g)return;S(ee);const be=I.currentTarget.getBoundingClientRect(),_e=be.top+be.height/2;x(I.clientY<_e?"top":"bottom")},V=()=>{S(null),x(null)},K=(I,ee)=>{I.preventDefault(),g&&g!==ee&&M&&c(g,ee,M),p(null),S(null),x(null)},U=()=>{p(null),S(null),x(null)};return r.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[r.jsx("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:r.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Об'єкти"})}),r.jsx("div",{className:"flex-grow overflow-y-auto",children:e.length>0?r.jsx("ul",{className:"p-1 space-y-1",children:[...e].reverse().map((I,ee)=>{if(!I)return null;const be=I.id===t,_e=f===I.id,ae=e.length-1-ee,te=ae<e.length-1,fe=ae>0,he=qt(I),W=b===I.id&&M==="top",O=b===I.id&&M==="bottom";return r.jsxs("li",{onClick:()=>n(I.id),onDoubleClick:()=>y(I),draggable:!_e,onDragStart:_e?void 0:re=>N(re,I.id),onDragOver:_e?void 0:re=>R(re,I.id),onDragLeave:_e?void 0:V,onDrop:_e?void 0:re=>K(re,I.id),onDragEnd:_e?void 0:U,className:`group flex items-center justify-between p-2 rounded-md transition-all duration-150 cursor-pointer 
                                    ${be?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"hover:bg-[var(--bg-hover)] text-[var(--text-secondary)]"}
                                    ${g===I.id?"opacity-30":""}
                                    ${W?"border-t-2 border-[var(--selection-stroke)]":"border-t-2 border-transparent -mb-0.5"}
                                    ${O?"border-b-2 border-[var(--selection-stroke)]":"border-b-2 border-transparent -mt-0.5"}
                                `,children:[r.jsxs("div",{className:"flex items-center gap-3 truncate",children:[r.jsx("button",{onClick:re=>A(re,I),title:I.state==="hidden"?"Показати":"Приховати",className:"flex-shrink-0 p-1 rounded hover:bg-[var(--bg-hover)]",children:I.state==="hidden"?r.jsx(Dv,{}):r.jsx(Rv,{})}),r.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",style:{opacity:I.state==="hidden"?.5:1},children:W1(I)}),r.jsx("div",{className:"truncate text-sm",style:{opacity:I.state==="hidden"?.5:1},children:_e?r.jsx("input",{type:"text",value:m,onChange:re=>h(re.target.value),onBlur:T,onKeyDown:C,onClick:re=>re.stopPropagation(),autoFocus:!0,className:"bg-[var(--bg-app)]/80 text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):r.jsxs("span",{className:"truncate",title:I.name||he,children:[I.name||he,u&&r.jsxs("span",{className:"ml-1 text-xs text-[var(--text-tertiary)]",children:["[",ov(I),"]"]})]})})]}),r.jsxs("div",{className:`flex items-center gap-0.5 transition-opacity ${be&&!_e?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[r.jsx("button",{onClick:re=>{re.stopPropagation(),o(I.id,"up")},disabled:!te,title:"Перемістити вище",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(v1,{})}),r.jsx("button",{onClick:re=>{re.stopPropagation(),o(I.id,"down")},disabled:!fe,title:"Перемістити нижче",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(C1,{})}),r.jsx("button",{onClick:re=>{re.stopPropagation(),i(I.id)},title:"Видалити",className:"p-1 rounded text-[var(--destructive-text)] hover:bg-[var(--destructive-bg)] hover:text-[var(--accent-text)]",children:r.jsx(lc,{size:16})})]})]},I.id)})}):r.jsx("div",{className:"text-center text-[var(--text-tertiary)] py-8 px-4",children:r.jsx("p",{className:"text-sm",children:"Немає об'єктів."})})})]})};function Z1(e){const[t,n]=E.useState([e]),[i,o]=E.useState(0),l=E.useCallback(h=>{const g=typeof h=="function"?h(t[i]):h,p=t.slice(0,i+1);p.push(g),n(p),o(p.length-1)},[i,t]),c=E.useCallback(()=>{i>0&&o(h=>h-1)},[i]),u=E.useCallback(()=>{i<t.length-1&&o(h=>h+1)},[i,t.length]),f=E.useCallback(h=>{n([h]),o(0)},[]),d=i>0,m=i<t.length-1;return{state:t[i],setState:l,undo:c,redo:u,canUndo:d,canRedo:m,reset:f}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Q1,eS;function tS(){return{geminiUrl:Q1,vertexUrl:eS}}function nS(e,t,n,i){var o,l;if(!(e!=null&&e.baseUrl)){const c=tS();return t?(o=c.vertexUrl)!==null&&o!==void 0?o:n:(l=c.geminiUrl)!==null&&l!==void 0?l:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Do{}function ce(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const l=t[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(e,t,n){for(let l=0;l<t.length-1;l++){const c=t[l];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];a(m,t.slice(l+1),n[d])}else for(const d of f)a(d,t.slice(l+1),n)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];a(f[0],t.slice(l+1),n);return}(!e[c]||typeof e[c]!="object")&&(e[c]={}),e=e[c]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function s(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const l=e[o];return Array.isArray(l)?l.map(c=>s(c,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iS(e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function oS(e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["operationName"],n);const i=s(e,["resourceName"]);i!=null&&a(t,["_url","resourceName"],i);const o=s(e,["config"]);return o!=null&&a(t,["config"],o),t}function lS(e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["_url","operationName"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function rS(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Nf(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function sS(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],rS(n)),t}function aS(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>sS(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function cS(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],aS(c)),t}function uS(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Nf(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function dS(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],uS(n)),t}function fS(e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>dS(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function mS(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response"]);return c!=null&&a(t,["response"],fS(c)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rh;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rh||(Rh={}));var Dh;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Dh||(Dh={}));var Hi;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Hi||(Hi={}));var jh;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(jh||(jh={}));var Ih;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Ih||(Ih={}));var Lh;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Lh||(Lh={}));var Uh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Uh||(Uh={}));var Ph;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Ph||(Ph={}));var Vh;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Vh||(Vh={}));var $h;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($h||($h={}));var Hh;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Hh||(Hh={}));var Bh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Bh||(Bh={}));var zh;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zh||(zh={}));var Gh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(Gh||(Gh={}));var Fh;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fh||(Fh={}));var Ia;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Ia||(Ia={}));var qh;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qh||(qh={}));var gd;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(gd||(gd={}));var Oh;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Oh||(Oh={}));var Yh;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yh||(Yh={}));var Jh;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Jh||(Jh={}));var Xh;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Xh||(Xh={}));var Wh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Wh||(Wh={}));var Kh;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Kh||(Kh={}));var Zh;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Zh||(Zh={}));var Qh;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Qh||(Qh={}));var eg;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(eg||(eg={}));var tg;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(tg||(tg={}));var ng;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ng||(ng={}));var ig;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ig||(ig={}));var og;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(og||(og={}));var lg;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lg||(lg={}));var rg;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(rg||(rg={}));var sg;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(sg||(sg={}));var ag;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(ag||(ag={}));var cg;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(cg||(cg={}));var ug;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(ug||(ug={}));var dg;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(dg||(dg={}));var fg;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fg||(fg={}));var mg;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(mg||(mg={}));var hg;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(hg||(hg={}));var gg;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gg||(gg={}));var pg;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(pg||(pg={}));var yg;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yg||(yg={}));var xg;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(xg||(xg={}));var vg;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(vg||(vg={}));var Cg;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Cg||(Cg={}));var al;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(al||(al={}));class pd{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ar{get text(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const h=[];for(const g of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[p,b]of Object.entries(g))p!=="text"&&p!=="thought"&&(b!==null||b!==void 0)&&h.push(p);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,d+=g.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const h of(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,p]of Object.entries(h))g!=="inlineData"&&(p!==null||p!==void 0)&&m.push(g);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,o,l,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,o,l,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(u=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class Tg{}class bg{}class hS{}class gS{}class pS{}class yS{}class Sg{}class wg{}class Eg{}class xS{}class La{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new La;let o;const l=t;return n?o=mS(l):o=cS(l),Object.assign(i,o),i}}class Mg{}class Ag{}class kg{}class vS{}class CS{}class TS{}class _g{}class bS{get text(){var t,n,i;let o="",l=!1;const c=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&c.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,o+=u.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var t,n,i;let o="";const l=[];for(const c of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(c))u!=="inlineData"&&f!==null&&l.push(u);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class SS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Be(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Iv(e,t){const n=Be(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Lv(e){return Array.isArray(e)?e.map(t=>Ua(t)):[Ua(e)]}function Ua(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Uv(e){const t=Ua(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Pv(e){const t=Ua(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ng(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Vv(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Ng(t)):[Ng(e)]}function yd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Rg(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Dg(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Bt(e){if(e==null)throw new Error("ContentUnion is required");return yd(e)?e:{role:"user",parts:Vv(e)}}function Rf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Bt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Bt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Bt(n)):[Bt(t)]}function kn(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Rg(e)||Dg(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bt(e)]}const t=[],n=[],i=yd(e[0]);for(const o of e){const l=yd(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(o);else{if(Rg(o)||Dg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:Vv(n)}),t}function wS(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Hi).includes(n[0].toUpperCase())?n[0].toUpperCase():Hi.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Hi).includes(i.toUpperCase())?i.toUpperCase():Hi.TYPE_UNSPECIFIED})}}function xl(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=e.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(t.nullable=!0,e=l[1]):l[1].type==="null"&&(t.nullable=!0,e=l[0])),e.type instanceof Array&&wS(e.type,t);for(const[c,u]of Object.entries(e))if(u!=null)if(c=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Hi).includes(u.toUpperCase())?u.toUpperCase():Hi.TYPE_UNSPECIFIED}else if(n.includes(c))t[c]=xl(u);else if(i.includes(c)){const f=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}f.push(xl(d))}t[c]=f}else if(o.includes(c)){const f={};for(const[d,m]of Object.entries(u))f[d]=xl(m);t[c]=f}else{if(c==="additionalProperties")continue;t[c]=u}return t}function Df(e){return xl(e)}function jf(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function If(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Hl(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=xl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=xl(t.response));return e}function Bl(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ES(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function xi(e,t){if(typeof t!="string")throw new Error("name must be a string");return ES(e,t,"cachedContents")}function $v(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function jo(e){return Nf(e)}function MS(e){return e!=null&&typeof e=="object"&&"name"in e}function AS(e){return e!=null&&typeof e=="object"&&"video"in e}function kS(e){return e!=null&&typeof e=="object"&&"uri"in e}function Hv(e){var t;let n;if(MS(e)&&(n=e.name),!(kS(e)&&(n=e.uri,n===void 0))&&!(AS(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Bv(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function zv(e){for(const t of["models","tunedModels","publisherModels"])if(_S(e,t))return e[t];return[]}function _S(e,t){return e!==null&&typeof e=="object"&&t in e}function NS(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function RS(e,t={}){const n=[],i=new Set;for(const o of e){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const c=NS(o,t);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Gv(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function DS(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Fv(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function zl(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function qv(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jS(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function IS(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function LS(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function US(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function PS(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],jS(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],IS(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],LS(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],US(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Ov(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>PS(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function VS(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=s(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=s(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const T=s(e,["properties"]);T!=null&&a(t,["properties"],T);const C=s(e,["propertyOrdering"]);C!=null&&a(t,["propertyOrdering"],C);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function $S(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function HS(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function BS(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function zS(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],BS(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function GS(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function FS(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],GS(n)),t}function qS(){return{}}function OS(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function YS(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>HS(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],zS(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],FS(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],qS());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],OS(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function JS(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function XS(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function WS(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],XS(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function KS(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],JS(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],WS(i)),t}function ZS(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Yv(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],ZS(n)),t}function QS(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],Yv(i)),t}function e2(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QS(o))),a(t,["speakerVoiceConfigs"],i)}return t}function t2(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Yv(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],e2(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function n2(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function i2(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Ov(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=s(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=s(t,["seed"]);S!=null&&a(i,["seed"],S);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],VS(Df(x)));const y=s(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=s(t,["safetySettings"]);if(n!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(ee=>$S(ee))),a(n,["safetySettings"],I)}const C=s(t,["tools"]);if(n!==void 0&&C!=null){let I=Bl(C);Array.isArray(I)&&(I=I.map(ee=>YS(Hl(ee)))),a(n,["tools"],I)}const A=s(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],KS(A)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=s(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],xi(e,N));const R=s(t,["responseModalities"]);R!=null&&a(i,["responseModalities"],R);const V=s(t,["mediaResolution"]);V!=null&&a(i,["mediaResolution"],V);const K=s(t,["speechConfig"]);if(K!=null&&a(i,["speechConfig"],t2(jf(K))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=s(t,["thinkingConfig"]);return U!=null&&a(i,["thinkingConfig"],n2(U)),i}function o2(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["request","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>Ov(u))),a(n,["request","contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["request","generationConfig"],i2(e,l,n)),n}function l2(e,t){const n={};if(s(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(t,["fileName"]);i!=null&&a(n,["fileName"],i);const o=s(t,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>o2(e,c))),a(n,["requests","requests"],l)}return n}function r2(e,t){const n={},i=s(e,["displayName"]);if(t!==void 0&&i!=null&&a(t,["batch","displayName"],i),s(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function uu(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],l2(e,Gv(e,o)));const l=s(t,["config"]);return l!=null&&a(n,["config"],r2(l,n)),n}function s2(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=s(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function a2(e,t){const n={},i=s(t,["contents"]);i!=null&&a(n,["requests[]","request","content"],Rf(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],s2(o,n)),n}function c2(e,t){const n={},i=s(t,["fileName"]);i!=null&&a(n,["file_name"],i);const o=s(t,["inlinedRequests"]);return o!=null&&a(n,["requests"],a2(e,o)),n}function u2(e,t){const n={},i=s(e,["displayName"]);return t!==void 0&&i!=null&&a(t,["batch","displayName"],i),n}function du(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],c2(e,o));const l=s(t,["config"]);return l!=null&&a(n,["config"],u2(l,n)),n}function d2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function f2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function m2(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);if(t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),s(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function h2(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],m2(n,t)),t}function g2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function p2(e){const t={},n=s(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsSource","uris"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigquerySource","inputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function y2(e){const t={},n=s(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsDestination","outputUriPrefix"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigqueryDestination","outputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function x2(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["dest"]);return t!==void 0&&o!=null&&a(t,["outputConfig"],y2(DS(o))),n}function v2(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Be(e,i));const o=s(t,["src"]);o!=null&&a(n,["inputConfig"],p2(Gv(e,o)));const l=s(t,["config"]);return l!=null&&a(n,["config"],x2(l,n)),n}function C2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function T2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function b2(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function S2(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],b2(n,t)),t}function w2(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],zl(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function E2(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function M2(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function A2(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function k2(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function _2(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],E2(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],M2(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],A2(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],k2(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function N2(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>_2(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function R2(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function D2(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function j2(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>D2(o))),a(t,["urlMetadata"],i)}return t}function I2(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],N2(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],R2(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],j2(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function L2(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>I2(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=s(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function Lf(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function U2(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],L2(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],Lf(i)),t}function P2(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function V2(e){const t={},n=s(e,["embedding"]);n!=null&&a(t,["embedding"],P2(n));const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function $2(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],V2(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],Lf(i)),t}function H2(e){const t={},n=s(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const i=s(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>U2(c))),a(t,["inlinedResponses"],l)}const o=s(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$2(c))),a(t,["inlinedEmbedContentResponses"],l)}return t}function Xo(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata","displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["metadata","state"]);o!=null&&a(t,["state"],qv(o));const l=s(e,["metadata","createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["metadata","endTime"]);c!=null&&a(t,["endTime"],c);const u=s(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const f=s(e,["metadata","model"]);f!=null&&a(t,["model"],f);const d=s(e,["metadata","output"]);return d!=null&&a(t,["dest"],H2(Fv(d))),t}function B2(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Xo(c))),a(t,["batchJobs"],l)}return t}function z2(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);return l!=null&&a(t,["error"],Lf(l)),t}function Jv(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function G2(e){const t={},n=s(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsSource","uris"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigquerySource","inputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function F2(e){const t={},n=s(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsDestination","outputUriPrefix"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigqueryDestination","outputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function xd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],qv(o));const l=s(e,["error"]);l!=null&&a(t,["error"],Jv(l));const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["startTime"]);u!=null&&a(t,["startTime"],u);const f=s(e,["endTime"]);f!=null&&a(t,["endTime"],f);const d=s(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const m=s(e,["model"]);m!=null&&a(t,["model"],m);const h=s(e,["inputConfig"]);h!=null&&a(t,["src"],G2(h));const g=s(e,["outputConfig"]);return g!=null&&a(t,["dest"],F2(Fv(g))),t}function q2(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>xd(c))),a(t,["batchJobs"],l)}return t}function O2(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);return l!=null&&a(t,["error"],Jv(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ao;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ao||(Ao={}));class cs{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,l;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2 extends Do{constructor(t){super(),this.apiClient=t,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const l=n.src;if(!(Array.isArray(n.src)||l.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),f=u.path,d=u.body,m=uu(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()).then(g=>Xo(g))},this.createEmbeddings=async n=>{var i,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),f=u.path,d=u.body,m=du(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()).then(g=>Xo(g))},this.list=async(n={})=>new cs(Ao.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=uu(this.apiClient,t),i=n._url,o=ce("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const m of f){const h=Object.assign({},m);if(h.systemInstruction){const g=h.systemInstruction;delete h.systemInstruction;const p=h.request;p.systemInstruction=g,h.request=p}d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}createInlinedEmbedContentRequest(t){const n=du(this.apiClient,t),i=n._url,o=ce("{model}:asyncBatchEmbedContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];delete u.config;for(const m of f){const h=Object.assign({},m),g=h.request;for(const p in h)p!=="request"&&(g[p]=h[p],delete h[p]);d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(t),c=this.getBigqueryUri(t);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=v2(this.apiClient,t);return u=ce("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>xd(m))}else{const d=uu(this.apiClient,t);return u=ce("{model}:batchGenerateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Xo(m))}}async createEmbeddingsInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=du(this.apiClient,t);return l=ce("{model}:asyncBatchEmbedContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Xo(f))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=C2(this.apiClient,t);return u=ce("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>xd(m))}else{const d=d2(this.apiClient,t);return u=ce("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Xo(m))}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=T2(this.apiClient,t);c=ce("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=f2(this.apiClient,t);c=ce("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=S2(t);return u=ce("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=q2(m),g=new _g;return Object.assign(g,h),g})}else{const d=h2(t);return u=ce("batches",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=B2(m),g=new _g;return Object.assign(g,h),g})}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=w2(this.apiClient,t);return u=ce("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>O2(m))}else{const d=g2(this.apiClient,t);return u=ce("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>z2(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function X2(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function W2(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function K2(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Z2(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],J2(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],X2(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],W2(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],K2(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function jg(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Z2(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Q2(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function ew(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function tw(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],ew(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function nw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function iw(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],nw(n)),t}function ow(){return{}}function lw(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function rw(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Q2(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],tw(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],iw(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],ow());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],lw(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function sw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function aw(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function cw(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],aw(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function uw(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],sw(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],cw(i)),t}function dw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let m=kn(c);Array.isArray(m)&&(m=m.map(h=>jg(h))),a(t,["contents"],m)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],jg(Bt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>rw(h))),a(t,["tools"],m)}const d=s(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],uw(d)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function fw(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Iv(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],dw(o,n)),n}function mw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function hw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function gw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function pw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],gw(o,n)),n}function yw(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function xw(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],yw(n,t)),t}function vw(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Cw(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Tw(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function bw(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Sw(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],vw(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Cw(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],Tw(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],bw(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Ig(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Sw(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function ww(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function Ew(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function Mw(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],Ew(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function Aw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function kw(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Aw(n)),t}function _w(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function Nw(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function Rw(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Nw(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function Dw(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],Rw(n)),t}function jw(){return{}}function Iw(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function Lw(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>ww(g))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Mw(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],kw(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],_w(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],Dw(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],jw());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],Iw(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function Uw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function Pw(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function Vw(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],Pw(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function $w(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],Uw(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],Vw(i)),t}function Hw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const l=s(e,["displayName"]);t!==void 0&&l!=null&&a(t,["displayName"],l);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let h=kn(c);Array.isArray(h)&&(h=h.map(g=>Ig(g))),a(t,["contents"],h)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],Ig(Bt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Lw(g))),a(t,["tools"],h)}const d=s(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],$w(d));const m=s(e,["kmsKeyName"]);return t!==void 0&&m!=null&&a(t,["encryption_spec","kmsKeyName"],m),n}function Bw(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Iv(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],Hw(o,n)),n}function zw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function Gw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function Fw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function qw(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],xi(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],Fw(o,n)),n}function Ow(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function Yw(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],Ow(n,t)),t}function ta(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function Jw(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Xw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ta(c))),a(t,["cachedContents"],l)}return t}function na(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function Ww(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Kw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>na(c))),a(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zw extends Do{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new cs(Ao.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Bw(this.apiClient,t);return u=ce("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>na(m))}else{const d=fw(this.apiClient,t);return u=ce("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ta(m))}}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=zw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>na(m))}else{const d=mw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ta(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Gw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Ww(m),g=new Ag;return Object.assign(g,h),g})}else{const d=hw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Jw(m),g=new Ag;return Object.assign(g,h),g})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=qw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>na(m))}else{const d=pw(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>ta(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Yw(t);return u=ce("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Kw(m),g=new kg;return Object.assign(g,h),g})}else{const d=xw(t);return u=ce("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Xw(m),g=new kg;return Object.assign(g,h),g})}}}function Lg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(e){return this instanceof lt?(this.v=e,this):new lt(e)}function vl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(p){return function(b){return Promise.resolve(b).then(p,h)}}function u(p,b){i[p]&&(o[p]=function(S){return new Promise(function(M,x){l.push([p,S,M,x])>1||f(p,S)})},b&&(o[p]=b(o[p])))}function f(p,b){try{d(i[p](b))}catch(S){g(l[0][3],S)}}function d(p){p.value instanceof lt?Promise.resolve(p.value.v).then(m,h):g(l[0][2],p)}function m(p){f("next",p)}function h(p){f("throw",p)}function g(p,b){p(b),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Nr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lg=="function"?Lg(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(c){return new Promise(function(u,f){c=e[l](c),o(u,f,c.done,c.value)})}}function o(l,c,u,f){Promise.resolve(f).then(function(d){l({value:d,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qw(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Xv(n)}function Xv(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function eE(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ug(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let l=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),l&&!Xv(e[i])&&(l=!1),i++;l?t.push(...o):t.pop()}return t}class tE{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new nE(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class nE{constructor(t,n,i,o={},l=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),eE(l)}async sendMessage(t){var n;await this.sendPromise;const i=Bt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,u;const f=await o,d=(c=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,m=f.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let g=[];m!=null&&(g=(u=m.slice(h))!==null&&u!==void 0?u:[]);const p=d?[d]:[];this.recordHistory(i,p,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Bt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(t=!1){const n=t?Ug(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,o;return vl(this,arguments,function*(){var c,u,f,d;const m=[];try{for(var h=!0,g=Nr(t),p;p=yield lt(g.next()),c=p.done,!c;h=!0){d=p.value,h=!1;const b=d;if(Qw(b)){const S=(o=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;S!==void 0&&m.push(S)}yield yield lt(b)}}catch(b){u={error:b}}finally{try{!h&&!c&&(f=g.return)&&(yield lt(f.call(g)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Ug(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,rc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iE(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function oE(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],iE(n,t)),t}function lE(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function rE(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=s(e,["state"]);g!=null&&a(t,["state"],g);const p=s(e,["source"]);p!=null&&a(t,["source"],p);const b=s(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const S=s(e,["error"]);return S!=null&&a(t,["error"],lE(S)),t}function sE(e){const t={},n=s(e,["file"]);n!=null&&a(t,["file"],rE(n));const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function aE(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","file"],Hv(n));const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function cE(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","file"],Hv(n));const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function uE(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function vd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const l=s(e,["sizeBytes"]);l!=null&&a(t,["sizeBytes"],l);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const h=s(e,["downloadUri"]);h!=null&&a(t,["downloadUri"],h);const g=s(e,["state"]);g!=null&&a(t,["state"],g);const p=s(e,["source"]);p!=null&&a(t,["source"],p);const b=s(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const S=s(e,["error"]);return S!=null&&a(t,["error"],uE(S)),t}function dE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>vd(c))),a(t,["files"],l)}return t}function fE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function mE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hE extends Do{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new cs(Ao.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>vd(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oE(t);return l=ce("files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=dE(f),m=new vS;return Object.assign(m,d),m})}}async createInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sE(t);return l=ce("upload/v1beta/files",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=fE(f),m=new CS;return Object.assign(m,d),m})}}async get(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aE(t);return l=ce("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>vd(f))}}async delete(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cE(t);return l=ce("files/{file}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=mE(f),m=new TS;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gE(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function Wv(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],gE(n)),t}function pE(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],Wv(i)),t}function yE(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pE(o))),a(t,["speakerVoiceConfigs"],i)}return t}function xE(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],Wv(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],yE(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function vE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function CE(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function TE(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function bE(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function SE(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],vE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],CE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],TE(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],bE(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function wE(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>SE(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function EE(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function ME(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function AE(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],ME(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function kE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function _E(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],kE(n)),t}function NE(){return{}}function RE(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function DE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>EE(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],AE(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],_E(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],NE());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],RE(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function jE(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Pg(){return{}}function IE(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function LE(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],IE(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function UE(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function PE(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],UE(i)),t}function VE(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function $E(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],xE(If(h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],wE(Bt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Bl(b);Array.isArray(A)&&(A=A.map(N=>DE(Hl(N)))),a(t,["setup","tools"],A)}const S=s(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],jE(S));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],Pg());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Pg());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],LE(y));const T=s(e,["contextWindowCompression"]);t!==void 0&&T!=null&&a(t,["setup","contextWindowCompression"],PE(T));const C=s(e,["proactivity"]);return t!==void 0&&C!=null&&a(t,["setup","proactivity"],VE(C)),n}function HE(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],$E(o,n)),n}function BE(){return{}}function zE(){return{}}function GE(e){const t={},n=s(e,["media"]);n!=null&&a(t,["mediaChunks"],Lv(n));const i=s(e,["audio"]);i!=null&&a(t,["audio"],Pv(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=s(e,["video"]);l!=null&&a(t,["video"],Uv(l));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],BE()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],zE()),t}function Kv(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function FE(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Kv(o))),a(t,["weightedPrompts"],i)}return t}function Zv(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=s(e,["onlyBassAndDrums"]);g!=null&&a(t,["onlyBassAndDrums"],g);const p=s(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function qE(e){const t={},n=s(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],Zv(n)),t}function Qv(e){const t={},n=s(e,["model"]);return n!=null&&a(t,["model"],n),t}function e0(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Kv(o))),a(t,["weightedPrompts"],i)}return t}function Cd(e){const t={},n=s(e,["setup"]);n!=null&&a(t,["setup"],Qv(n));const i=s(e,["clientContent"]);i!=null&&a(t,["clientContent"],e0(i));const o=s(e,["musicGenerationConfig"]);o!=null&&a(t,["musicGenerationConfig"],Zv(o));const l=s(e,["playbackControl"]);return l!=null&&a(t,["playbackControl"],l),t}function OE(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function YE(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],OE(n)),t}function JE(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],YE(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function XE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function WE(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function KE(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ZE(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function QE(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],XE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],WE(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],KE(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],ZE(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function eM(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>QE(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function tM(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function nM(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function iM(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],nM(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function oM(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function lM(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],oM(n)),t}function rM(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function sM(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function aM(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],sM(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function cM(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],aM(n)),t}function uM(){return{}}function dM(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function fM(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>tM(g))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],iM(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],lM(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],rM(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],cM(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],uM());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],dM(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function mM(e){const t={},n=s(e,["handle"]);n!=null&&a(t,["handle"],n);const i=s(e,["transparent"]);return i!=null&&a(t,["transparent"],i),t}function Vg(){return{}}function hM(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function gM(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],hM(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function pM(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function yM(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],pM(i)),t}function xM(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function vM(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],JE(If(h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],eM(Bt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Bl(b);Array.isArray(A)&&(A=A.map(N=>fM(Hl(N)))),a(t,["setup","tools"],A)}const S=s(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],mM(S));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],Vg());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Vg());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],gM(y));const T=s(e,["contextWindowCompression"]);t!==void 0&&T!=null&&a(t,["setup","contextWindowCompression"],yM(T));const C=s(e,["proactivity"]);return t!==void 0&&C!=null&&a(t,["setup","proactivity"],xM(C)),n}function CM(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],vM(o,n)),n}function TM(){return{}}function bM(){return{}}function SM(e){const t={},n=s(e,["media"]);n!=null&&a(t,["mediaChunks"],Lv(n));const i=s(e,["audio"]);i!=null&&a(t,["audio"],Pv(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const l=s(e,["video"]);l!=null&&a(t,["video"],Uv(l));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],TM()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],bM()),t}function wM(){return{}}function EM(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function MM(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function AM(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function t0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function kM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],EM(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],MM(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],AM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],t0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function _M(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>kM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function $g(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function NM(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function RM(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>NM(o))),a(t,["urlMetadata"],i)}return t}function DM(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],_M(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],$g(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],$g(f));const d=s(e,["urlContextMetadata"]);d!=null&&a(t,["urlContextMetadata"],RM(d));const m=s(e,["turnCompleteReason"]);m!=null&&a(t,["turnCompleteReason"],m);const h=s(e,["waitingForInput"]);return h!=null&&a(t,["waitingForInput"],h),t}function jM(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t0(o))),a(t,["functionCalls"],i)}return t}function IM(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function Ps(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function LM(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["responseTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(p=>Ps(p))),a(t,["promptTokensDetails"],g)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(p=>Ps(p))),a(t,["cacheTokensDetails"],g)}const m=s(e,["responseTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(p=>Ps(p))),a(t,["responseTokensDetails"],g)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(p=>Ps(p))),a(t,["toolUsePromptTokensDetails"],g)}return t}function UM(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function PM(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function VM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],wM());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],DM(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],jM(o));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],IM(l));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],LM(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],UM(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],PM(f)),t}function $M(){return{}}function HM(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function BM(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>HM(o))),a(t,["weightedPrompts"],i)}return t}function zM(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const l=s(e,["guidance"]);l!=null&&a(t,["guidance"],l);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const h=s(e,["muteDrums"]);h!=null&&a(t,["muteDrums"],h);const g=s(e,["onlyBassAndDrums"]);g!=null&&a(t,["onlyBassAndDrums"],g);const p=s(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function GM(e){const t={},n=s(e,["clientContent"]);n!=null&&a(t,["clientContent"],BM(n));const i=s(e,["musicGenerationConfig"]);return i!=null&&a(t,["musicGenerationConfig"],zM(i)),t}function FM(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);i!=null&&a(t,["mimeType"],i);const o=s(e,["sourceMetadata"]);return o!=null&&a(t,["sourceMetadata"],GM(o)),t}function qM(e){const t={},n=s(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>FM(o))),a(t,["audioChunks"],i)}return t}function OM(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["filteredReason"]);return i!=null&&a(t,["filteredReason"],i),t}function YM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],$M());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],qM(i));const o=s(e,["filteredPrompt"]);return o!=null&&a(t,["filteredPrompt"],OM(o)),t}function JM(e){const t={},n=s(e,["sessionId"]);return n!=null&&a(t,["sessionId"],n),t}function XM(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function WM(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function KM(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function n0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function ZM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],XM(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],WM(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],KM(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],n0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function QM(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ZM(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Hg(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function eA(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],QM(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const l=s(e,["groundingMetadata"]);l!=null&&a(t,["groundingMetadata"],l);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],Hg(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],Hg(f));const d=s(e,["turnCompleteReason"]);d!=null&&a(t,["turnCompleteReason"],d);const m=s(e,["waitingForInput"]);return m!=null&&a(t,["waitingForInput"],m),t}function tA(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>n0(o))),a(t,["functionCalls"],i)}return t}function nA(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function Vs(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function iA(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const l=s(e,["toolUsePromptTokenCount"]);l!=null&&a(t,["toolUsePromptTokenCount"],l);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(b=>Vs(b))),a(t,["promptTokensDetails"],p)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(b=>Vs(b))),a(t,["cacheTokensDetails"],p)}const m=s(e,["candidatesTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(b=>Vs(b))),a(t,["responseTokensDetails"],p)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(b=>Vs(b))),a(t,["toolUsePromptTokensDetails"],p)}const g=s(e,["trafficType"]);return g!=null&&a(t,["trafficType"],g),t}function oA(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function lA(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function rA(e){const t={},n=s(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],JM(n));const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],eA(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],tA(o));const l=s(e,["toolCallCancellation"]);l!=null&&a(t,["toolCallCancellation"],nA(l));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],iA(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],oA(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],lA(f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function aA(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function cA(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function uA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function dA(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],sA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],aA(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],cA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],uA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function sc(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>dA(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function fA(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=s(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=s(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const T=s(e,["properties"]);T!=null&&a(t,["properties"],T);const C=s(e,["propertyOrdering"]);C!=null&&a(t,["propertyOrdering"],C);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function mA(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function hA(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function gA(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function pA(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],gA(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function yA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function xA(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],yA(n)),t}function vA(){return{}}function CA(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function TA(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>hA(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],pA(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],xA(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],vA());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],CA(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function bA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function SA(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function wA(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],SA(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function EA(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],bA(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],wA(i)),t}function MA(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function i0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],MA(n)),t}function AA(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],i0(i)),t}function kA(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>AA(o))),a(t,["speakerVoiceConfigs"],i)}return t}function _A(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],i0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],kA(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function NA(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function RA(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],sc(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=s(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=s(t,["seed"]);S!=null&&a(i,["seed"],S);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],fA(Df(x)));const y=s(t,["responseJsonSchema"]);if(y!=null&&a(i,["responseJsonSchema"],y),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=s(t,["safetySettings"]);if(n!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(ee=>mA(ee))),a(n,["safetySettings"],I)}const C=s(t,["tools"]);if(n!==void 0&&C!=null){let I=Bl(C);Array.isArray(I)&&(I=I.map(ee=>TA(Hl(ee)))),a(n,["tools"],I)}const A=s(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],EA(A)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=s(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],xi(e,N));const R=s(t,["responseModalities"]);R!=null&&a(i,["responseModalities"],R);const V=s(t,["mediaResolution"]);V!=null&&a(i,["mediaResolution"],V);const K=s(t,["speechConfig"]);if(K!=null&&a(i,["speechConfig"],_A(jf(K))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=s(t,["thinkingConfig"]);return U!=null&&a(i,["thinkingConfig"],NA(U)),i}function Bg(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>sc(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["generationConfig"],RA(e,l,n)),n}function DA(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const l=s(e,["outputDimensionality"]);if(t!==void 0&&l!=null&&a(t,["requests[]","outputDimensionality"],l),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);o!=null&&a(n,["requests[]","content"],Rf(e,o));const l=s(t,["config"]);l!=null&&a(n,["config"],DA(l,n));const c=s(t,["model"]);return c!==void 0&&a(n,["requests[]","model"],Be(e,c)),n}function IA(e,t){const n={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);const l=s(e,["guidanceScale"]);if(t!==void 0&&l!=null&&a(t,["parameters","guidanceScale"],l),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=s(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const u=s(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const f=s(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&a(t,["parameters","includeSafetyAttributes"],f);const d=s(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);const m=s(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const h=s(e,["outputMimeType"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","mimeType"],h);const g=s(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&a(t,["parameters","outputOptions","compressionQuality"],g),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const p=s(e,["imageSize"]);if(t!==void 0&&p!=null&&a(t,["parameters","sampleImageSize"],p),s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function LA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["config"]);return l!=null&&a(n,["config"],IA(l,n)),n}function UA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function PA(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=s(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Bv(e,u)),i}function VA(e,t){const n={},i=s(t,["config"]);return i!=null&&a(n,["config"],PA(e,i,n)),n}function $A(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function HA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],$A(o,n)),n}function BA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function zA(e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function GA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>sc(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["config"],zA(l)),n}function o0(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],jo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function FA(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);if(t!==void 0&&o!=null&&a(t,["instances[0]","image"],o0(o)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function qA(e,t){const n={},i=s(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(e,["aspectRatio"]);t!==void 0&&l!=null&&a(t,["parameters","aspectRatio"],l);const c=s(e,["resolution"]);t!==void 0&&c!=null&&a(t,["parameters","resolution"],c);const u=s(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=s(e,["negativePrompt"]);t!==void 0&&f!=null&&a(t,["parameters","negativePrompt"],f);const d=s(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","enhancePrompt"],d),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(s(e,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(s(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function OA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["image"]);if(l!=null&&a(n,["instances[0]","image"],o0(l)),s(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=s(t,["source"]);c!=null&&a(n,["config"],FA(c,n));const u=s(t,["config"]);return u!=null&&a(n,["config"],qA(u,n)),n}function YA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function JA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function XA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function WA(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function KA(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],YA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],JA(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],XA(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],WA(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function Gl(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>KA(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function ZA(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["enum"]);l!=null&&a(t,["enum"],l);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const h=s(e,["maxProperties"]);h!=null&&a(t,["maxProperties"],h);const g=s(e,["maximum"]);g!=null&&a(t,["maximum"],g);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const S=s(e,["minProperties"]);S!=null&&a(t,["minProperties"],S);const M=s(e,["minimum"]);M!=null&&a(t,["minimum"],M);const x=s(e,["nullable"]);x!=null&&a(t,["nullable"],x);const y=s(e,["pattern"]);y!=null&&a(t,["pattern"],y);const T=s(e,["properties"]);T!=null&&a(t,["properties"],T);const C=s(e,["propertyOrdering"]);C!=null&&a(t,["propertyOrdering"],C);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const N=s(e,["title"]);N!=null&&a(t,["title"],N);const R=s(e,["type"]);return R!=null&&a(t,["type"],R),t}function QA(e){const t={},n=s(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function ek(e){const t={},n=s(e,["method"]);n!=null&&a(t,["method"],n);const i=s(e,["category"]);i!=null&&a(t,["category"],i);const o=s(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function tk(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const l=s(e,["parametersJsonSchema"]);l!=null&&a(t,["parametersJsonSchema"],l);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function nk(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function ik(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],nk(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function ok(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function lk(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],ok(n)),t}function rk(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function sk(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function ak(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],sk(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const l=s(e,["httpBasicAuthConfig"]);l!=null&&a(t,["httpBasicAuthConfig"],l);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function ck(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],ak(n)),t}function uk(){return{}}function dk(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function l0(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>tk(g))),a(t,["functionDeclarations"],h)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],ik(o));const l=s(e,["googleSearchRetrieval"]);l!=null&&a(t,["googleSearchRetrieval"],lk(l));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],rk(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],ck(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],uk());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],dk(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function fk(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function mk(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function hk(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],mk(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function gk(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],fk(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],hk(i)),t}function pk(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function yk(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],pk(n)),t}function xk(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],yk(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function vk(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function Ck(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Gl(Bt(o)));const l=s(t,["temperature"]);l!=null&&a(i,["temperature"],l);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const h=s(t,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const g=s(t,["logprobs"]);g!=null&&a(i,["logprobs"],g);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const S=s(t,["seed"]);S!=null&&a(i,["seed"],S);const M=s(t,["responseMimeType"]);M!=null&&a(i,["responseMimeType"],M);const x=s(t,["responseSchema"]);x!=null&&a(i,["responseSchema"],ZA(Df(x)));const y=s(t,["responseJsonSchema"]);y!=null&&a(i,["responseJsonSchema"],y);const T=s(t,["routingConfig"]);T!=null&&a(i,["routingConfig"],T);const C=s(t,["modelSelectionConfig"]);C!=null&&a(i,["modelConfig"],QA(C));const A=s(t,["safetySettings"]);if(n!==void 0&&A!=null){let ae=A;Array.isArray(ae)&&(ae=ae.map(te=>ek(te))),a(n,["safetySettings"],ae)}const N=s(t,["tools"]);if(n!==void 0&&N!=null){let ae=Bl(N);Array.isArray(ae)&&(ae=ae.map(te=>l0(Hl(te)))),a(n,["tools"],ae)}const R=s(t,["toolConfig"]);n!==void 0&&R!=null&&a(n,["toolConfig"],gk(R));const V=s(t,["labels"]);n!==void 0&&V!=null&&a(n,["labels"],V);const K=s(t,["cachedContent"]);n!==void 0&&K!=null&&a(n,["cachedContent"],xi(e,K));const U=s(t,["responseModalities"]);U!=null&&a(i,["responseModalities"],U);const I=s(t,["mediaResolution"]);I!=null&&a(i,["mediaResolution"],I);const ee=s(t,["speechConfig"]);ee!=null&&a(i,["speechConfig"],xk(jf(ee)));const be=s(t,["audioTimestamp"]);be!=null&&a(i,["audioTimestamp"],be);const _e=s(t,["thinkingConfig"]);return _e!=null&&a(i,["thinkingConfig"],vk(_e)),i}function zg(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>Gl(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["generationConfig"],Ck(e,l,n)),n}function Tk(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["instances[]","task_type"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);const l=s(e,["outputDimensionality"]);t!==void 0&&l!=null&&a(t,["parameters","outputDimensionality"],l);const c=s(e,["mimeType"]);t!==void 0&&c!=null&&a(t,["instances[]","mimeType"],c);const u=s(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function bk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);o!=null&&a(n,["instances[]","content"],Rf(e,o));const l=s(t,["config"]);return l!=null&&a(n,["config"],Tk(l,n)),n}function Sk(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=s(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const p=s(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=s(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const S=s(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","compressionQuality"],S);const M=s(e,["addWatermark"]);t!==void 0&&M!=null&&a(t,["parameters","addWatermark"],M);const x=s(e,["imageSize"]);t!==void 0&&x!=null&&a(t,["parameters","sampleImageSize"],x);const y=s(e,["enhancePrompt"]);return t!==void 0&&y!=null&&a(t,["parameters","enhancePrompt"],y),n}function wk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["config"]);return l!=null&&a(n,["config"],Sk(l,n)),n}function $n(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["imageBytes"]);i!=null&&a(t,["bytesBase64Encoded"],jo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Ek(e){const t={},n=s(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const i=s(e,["segmentationClasses"]);i!=null&&a(t,["maskClasses"],i);const o=s(e,["maskDilation"]);return o!=null&&a(t,["dilation"],o),t}function Mk(e){const t={},n=s(e,["controlType"]);n!=null&&a(t,["controlType"],n);const i=s(e,["enableControlImageComputation"]);return i!=null&&a(t,["computeControl"],i),t}function Ak(e){const t={},n=s(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function kk(e){const t={},n=s(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const i=s(e,["subjectDescription"]);return i!=null&&a(t,["subjectDescription"],i),t}function _k(e){const t={},n=s(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],$n(n));const i=s(e,["referenceId"]);i!=null&&a(t,["referenceId"],i);const o=s(e,["referenceType"]);o!=null&&a(t,["referenceType"],o);const l=s(e,["maskImageConfig"]);l!=null&&a(t,["maskImageConfig"],Ek(l));const c=s(e,["controlImageConfig"]);c!=null&&a(t,["controlImageConfig"],Mk(c));const u=s(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],Ak(u));const f=s(e,["subjectImageConfig"]);return f!=null&&a(t,["subjectImageConfig"],kk(f)),t}function Nk(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const l=s(e,["numberOfImages"]);t!==void 0&&l!=null&&a(t,["parameters","sampleCount"],l);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&a(t,["parameters","includeSafetyAttributes"],h);const g=s(e,["includeRaiReason"]);t!==void 0&&g!=null&&a(t,["parameters","includeRaiReason"],g);const p=s(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=s(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const S=s(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&a(t,["parameters","outputOptions","compressionQuality"],S);const M=s(e,["addWatermark"]);t!==void 0&&M!=null&&a(t,["parameters","addWatermark"],M);const x=s(e,["editMode"]);t!==void 0&&x!=null&&a(t,["parameters","editMode"],x);const y=s(e,["baseSteps"]);return t!==void 0&&y!=null&&a(t,["parameters","editConfig","baseSteps"],y),n}function Rk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>_k(f))),a(n,["instances[0]","referenceImages"],u)}const c=s(t,["config"]);return c!=null&&a(n,["config"],Nk(c,n)),n}function Dk(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const l=s(e,["outputMimeType"]);t!==void 0&&l!=null&&a(t,["parameters","outputOptions","mimeType"],l);const c=s(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&a(t,["parameters","outputOptions","compressionQuality"],c);const u=s(e,["enhanceInputImage"]);t!==void 0&&u!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],u);const f=s(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=s(e,["numberOfImages"]);t!==void 0&&d!=null&&a(t,["parameters","sampleCount"],d);const m=s(e,["mode"]);return t!==void 0&&m!=null&&a(t,["parameters","mode"],m),n}function jk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["image"]);o!=null&&a(n,["instances[0]","image"],$n(o));const l=s(t,["upscaleFactor"]);l!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=s(t,["config"]);return c!=null&&a(n,["config"],Dk(c,n)),n}function Ik(e){const t={},n=s(e,["productImage"]);return n!=null&&a(t,["image"],$n(n)),t}function Lk(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["personImage"]);t!==void 0&&o!=null&&a(t,["instances[0]","personImage","image"],$n(o));const l=s(e,["productImages"]);if(t!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>Ik(u))),a(t,["instances[0]","productImages"],c)}return n}function Uk(e,t){const n={},i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["baseSteps"]);t!==void 0&&o!=null&&a(t,["parameters","editConfig","baseSteps"],o);const l=s(e,["outputGcsUri"]);t!==void 0&&l!=null&&a(t,["parameters","storageUri"],l);const c=s(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const u=s(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const d=s(e,["addWatermark"]);t!==void 0&&d!=null&&a(t,["parameters","addWatermark"],d);const m=s(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const h=s(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h);const g=s(e,["enhancePrompt"]);return t!==void 0&&g!=null&&a(t,["parameters","enhancePrompt"],g),n}function Pk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["source"]);o!=null&&a(n,["config"],Lk(o,n));const l=s(t,["config"]);return l!=null&&a(n,["config"],Uk(l,n)),n}function Vk(e){const t={},n=s(e,["image"]);return n!=null&&a(t,["image"],$n(n)),t}function $k(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],$n(o));const l=s(e,["scribbleImage"]);return t!==void 0&&l!=null&&a(t,["instances[0]","scribble"],Vk(l)),n}function Hk(e,t){const n={},i=s(e,["mode"]);t!==void 0&&i!=null&&a(t,["parameters","mode"],i);const o=s(e,["maxPredictions"]);t!==void 0&&o!=null&&a(t,["parameters","maxPredictions"],o);const l=s(e,["confidenceThreshold"]);t!==void 0&&l!=null&&a(t,["parameters","confidenceThreshold"],l);const c=s(e,["maskDilation"]);t!==void 0&&c!=null&&a(t,["parameters","maskDilation"],c);const u=s(e,["binaryColorThreshold"]);return t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u),n}function Bk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["source"]);o!=null&&a(n,["config"],$k(o,n));const l=s(t,["config"]);return l!=null&&a(n,["config"],Hk(l,n)),n}function zk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function Gk(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const l=s(t,["pageToken"]);n!==void 0&&l!=null&&a(n,["_query","pageToken"],l);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Bv(e,u)),i}function Fk(e,t){const n={},i=s(t,["config"]);return i!=null&&a(n,["config"],Gk(e,i,n)),n}function qk(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const l=s(e,["defaultCheckpointId"]);return t!==void 0&&l!=null&&a(t,["defaultCheckpointId"],l),n}function Ok(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],qk(o,n)),n}function Yk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],o),n}function Jk(e,t){const n={},i=s(e,["systemInstruction"]);t!==void 0&&i!=null&&a(t,["systemInstruction"],Gl(Bt(i)));const o=s(e,["tools"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>l0(u))),a(t,["tools"],c)}const l=s(e,["generationConfig"]);return t!==void 0&&l!=null&&a(t,["generationConfig"],l),n}function Xk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>Gl(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["config"],Jk(l,n)),n}function Wk(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["contents"]);if(o!=null){let c=kn(o);Array.isArray(c)&&(c=c.map(u=>Gl(u))),a(n,["contents"],c)}const l=s(t,["config"]);return l!=null&&a(n,["config"],l),n}function r0(e){const t={},n=s(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["videoBytes"]);i!=null&&a(t,["bytesBase64Encoded"],jo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Kk(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],$n(o));const l=s(e,["video"]);return t!==void 0&&l!=null&&a(t,["instances[0]","video"],r0(l)),n}function Zk(e){const t={},n=s(e,["image"]);n!=null&&a(t,["image"],$n(n));const i=s(e,["referenceType"]);return i!=null&&a(t,["referenceType"],i),t}function Qk(e){const t={},n=s(e,["image"]);n!=null&&a(t,["_self"],$n(n));const i=s(e,["maskMode"]);return i!=null&&a(t,["maskMode"],i),t}function e_(e,t){const n={},i=s(e,["numberOfVideos"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const l=s(e,["fps"]);t!==void 0&&l!=null&&a(t,["parameters","fps"],l);const c=s(e,["durationSeconds"]);t!==void 0&&c!=null&&a(t,["parameters","durationSeconds"],c);const u=s(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const f=s(e,["aspectRatio"]);t!==void 0&&f!=null&&a(t,["parameters","aspectRatio"],f);const d=s(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const h=s(e,["pubsubTopic"]);t!==void 0&&h!=null&&a(t,["parameters","pubsubTopic"],h);const g=s(e,["negativePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","negativePrompt"],g);const p=s(e,["enhancePrompt"]);t!==void 0&&p!=null&&a(t,["parameters","enhancePrompt"],p);const b=s(e,["generateAudio"]);t!==void 0&&b!=null&&a(t,["parameters","generateAudio"],b);const S=s(e,["lastFrame"]);t!==void 0&&S!=null&&a(t,["instances[0]","lastFrame"],$n(S));const M=s(e,["referenceImages"]);if(t!==void 0&&M!=null){let T=M;Array.isArray(T)&&(T=T.map(C=>Zk(C))),a(t,["instances[0]","referenceImages"],T)}const x=s(e,["mask"]);t!==void 0&&x!=null&&a(t,["instances[0]","mask"],Qk(x));const y=s(e,["compressionQuality"]);return t!==void 0&&y!=null&&a(t,["parameters","compressionQuality"],y),n}function t_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Be(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const l=s(t,["image"]);l!=null&&a(n,["instances[0]","image"],$n(l));const c=s(t,["video"]);c!=null&&a(n,["instances[0]","video"],r0(c));const u=s(t,["source"]);u!=null&&a(n,["config"],Kk(u,n));const f=s(t,["config"]);return f!=null&&a(n,["config"],e_(f,n)),n}function n_(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function i_(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function o_(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function l_(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function r_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n_(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],i_(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],o_(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],l_(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function s_(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>r_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function a_(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function c_(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function u_(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>c_(o))),a(t,["urlMetadata"],i)}return t}function d_(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],s_(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],a_(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],u_(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Gg(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>d_(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const l=s(e,["promptFeedback"]);l!=null&&a(t,["promptFeedback"],l);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function f_(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function m_(){return{}}function h_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>f_(c))),a(t,["embeddings"],l)}return s(e,["metadata"])!=null&&a(t,["metadata"],m_()),t}function g_(e){const t={},n=s(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],jo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function s0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function p_(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],g_(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],s0(o)),t}function y_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>p_(c))),a(t,["generatedImages"],l)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],s0(o)),t}function x_(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function Td(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["version"]);l!=null&&a(t,["version"],l);const c=s(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],x_(c));const u=s(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const f=s(e,["outputTokenLimit"]);f!=null&&a(t,["outputTokenLimit"],f);const d=s(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function v_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let l=zv(o);Array.isArray(l)&&(l=l.map(c=>Td(c))),a(t,["models"],l)}return t}function C_(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function T_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);i!=null&&a(t,["totalTokens"],i);const o=s(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function b_(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],jo(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function S_(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],b_(n)),t}function w_(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>S_(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function E_(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],w_(c)),t}function M_(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function A_(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function k_(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function __(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function N_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],M_(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],A_(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],k_(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],__(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function R_(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>N_(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function D_(e){const t={},n=s(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function j_(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function I_(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>j_(o))),a(t,["urlMetadata"],i)}return t}function L_(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],R_(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],D_(i));const o=s(e,["finishMessage"]);o!=null&&a(t,["finishMessage"],o);const l=s(e,["finishReason"]);l!=null&&a(t,["finishReason"],l);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],I_(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const h=s(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Fg(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>L_(m))),a(t,["candidates"],d)}const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const l=s(e,["modelVersion"]);l!=null&&a(t,["modelVersion"],l);const c=s(e,["promptFeedback"]);c!=null&&a(t,["promptFeedback"],c);const u=s(e,["responseId"]);u!=null&&a(t,["responseId"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function U_(e){const t={},n=s(e,["truncated"]);n!=null&&a(t,["truncated"],n);const i=s(e,["token_count"]);return i!=null&&a(t,["tokenCount"],i),t}function P_(e){const t={},n=s(e,["values"]);n!=null&&a(t,["values"],n);const i=s(e,["statistics"]);return i!=null&&a(t,["statistics"],U_(i)),t}function V_(e){const t={},n=s(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function $_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>P_(c))),a(t,["embeddings"],l)}const o=s(e,["metadata"]);return o!=null&&a(t,["metadata"],V_(o)),t}function a0(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["imageBytes"],jo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function c0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function ac(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],a0(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);o!=null&&a(t,["safetyAttributes"],c0(o));const l=s(e,["prompt"]);return l!=null&&a(t,["enhancedPrompt"],l),t}function H_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ac(c))),a(t,["generatedImages"],l)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],c0(o)),t}function B_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ac(l))),a(t,["generatedImages"],o)}return t}function z_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ac(l))),a(t,["generatedImages"],o)}return t}function G_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ac(o))),a(t,["generatedImages"],i)}return t}function F_(e){const t={},n=s(e,["label"]);n!=null&&a(t,["label"],n);const i=s(e,["score"]);return i!=null&&a(t,["score"],i),t}function q_(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["mask"],a0(n));const i=s(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>F_(l))),a(t,["labels"],o)}return t}function O_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q_(o))),a(t,["generatedMasks"],i)}return t}function Y_(e){const t={},n=s(e,["endpoint"]);n!=null&&a(t,["name"],n);const i=s(e,["deployedModelId"]);return i!=null&&a(t,["deployedModelId"],i),t}function J_(e){const t={},n=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function X_(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);return o!=null&&a(t,["step"],o),t}function bd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const l=s(e,["versionId"]);l!=null&&a(t,["version"],l);const c=s(e,["deployedModels"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Y_(g))),a(t,["endpoints"],h)}const u=s(e,["labels"]);u!=null&&a(t,["labels"],u);const f=s(e,["_self"]);f!=null&&a(t,["tunedModelInfo"],J_(f));const d=s(e,["defaultCheckpointId"]);d!=null&&a(t,["defaultCheckpointId"],d);const m=s(e,["checkpoints"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>X_(g))),a(t,["checkpoints"],h)}return t}function W_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let l=zv(o);Array.isArray(l)&&(l=l.map(c=>bd(c))),a(t,["models"],l)}return t}function K_(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Z_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);return i!=null&&a(t,["totalTokens"],i),t}function Q_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["tokensInfo"]);return i!=null&&a(t,["tokensInfo"],i),t}function eN(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],jo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function tN(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],eN(n)),t}function nN(e){const t={},n=s(e,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>tN(c))),a(t,["generatedVideos"],l)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function iN(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const l=s(e,["error"]);l!=null&&a(t,["error"],l);const c=s(e,["response"]);return c!=null&&a(t,["response"],nN(c)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oN="Content-Type",lN="X-Server-Timeout",rN="User-Agent",Sd="x-goog-api-client",sN="1.20.0",aN=`google-genai-sdk/${sN}`,cN="v1beta1",uN="v1beta",qg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dN{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:cN,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:uN,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[c,u]of Object.entries(t.queryParams))o.searchParams.append(c,String(u));let l={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=t.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.unaryApiCall(o,l,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,l]of Object.entries(n))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=t.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,t.abortSignal),this.streamApiCall(o,l,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=l}return n&&n.extraBody!==null&&fN(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Og(o),new pd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Og(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return vl(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield lt(o.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(f,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const g=JSON.parse(JSON.stringify(h.error)),p=g.status,b=g.code,S=`got status: ${p}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new rc({message:S,status:b})}}catch(h){if(h.name==="ApiError")throw h}c+=d;let m=c.match(qg);for(;m;){const h=m[1];try{const g=new Response(h,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield lt(new pd(g)),c=c.slice(m[0].length),m=c.match(qg)}catch(g){throw new Error(`exception parsing stream chunk ${h}. ${g}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=aN+" "+this.clientOptions.userAgentExtra;return t[rN]=n,t[Sd]=n,t[oN]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))n.append(i,o);t.timeout&&t.timeout>0&&n.append(lN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(t);o.sizeBytes=String(c.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return l.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const l={file:t},c=await this.request({path:ce("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Og(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new rc({message:o,status:n}):new Error(o)}}function fN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const l=JSON.parse(e.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,c){const u=Object.assign({},l);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const d=c[f],m=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?u[f]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mN="mcp_used/unknown";let hN=!1;function u0(e){for(const t of e)if(gN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return hN}function d0(e){var t;const n=(t=e[Sd])!==null&&t!==void 0?t:"";e[Sd]=(n+` ${mN}`).trimStart()}function gN(e){return e!==null&&typeof e=="object"&&e instanceof Uf}function pN(e,t=100){return vl(this,arguments,function*(){let i,o=0;for(;o<t;){const l=yield lt(e.listTools({cursor:i}));for(const c of l.tools)yield yield lt(c),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Uf{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Uf(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const m of this.mcpClients)try{for(var u=!0,f=(n=void 0,Nr(pN(m))),d;d=await f.next(),t=d.done,!t;u=!0){o=d.value,u=!1;const h=o;c.push(h);const g=h.name;if(l[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);l[g]=m}}catch(h){n={error:h}}finally{try{!u&&!t&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),RS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,l);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yN(e,t,n){const i=new SS;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const l=YM(o);Object.assign(i,l),t(i)}class xN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=TN(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const m=new Promise(T=>{d=T}),h=t.callbacks,g=function(){d({})},p=this.apiClient,b={onopen:g,onmessage:T=>{yN(p,h.onmessage,T)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(T){}},S=this.webSocketFactory.create(f,CN(c),b);S.connect(),await m;const M=Be(this.apiClient,t.model),x=Qv({model:M}),y=Cd({setup:x});return S.send(JSON.stringify(y)),new vN(S,this.apiClient)}}class vN{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=FE(t),i=e0(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=qE(t),i=Cd(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const n=Cd({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(al.PLAY)}pause(){this.sendPlaybackControl(al.PAUSE)}stop(){this.sendPlaybackControl(al.STOP)}resetContext(){this.sendPlaybackControl(al.RESET_CONTEXT)}close(){this.conn.close()}}function CN(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function TN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function SN(e,t,n){const i=new bS;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(e.isVertexAI()){const c=rA(l);Object.assign(i,c)}else{const c=VM(l);Object.assign(i,c)}t(i)}class wN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new xN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,l,c,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const h=this.apiClient.getHeaders();t.config&&t.config.tools&&u0(t.config.tools)&&d0(h);const g=kN(h);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const K=this.apiClient.getApiKey();let U="BidiGenerateContent",I="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",I="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${I}=${K}`}let p=()=>{};const b=new Promise(K=>{p=K}),S=t.callbacks,M=function(){var K;(K=S==null?void 0:S.onopen)===null||K===void 0||K.call(S),p({})},x=this.apiClient,y={onopen:M,onmessage:K=>{SN(x,S.onmessage,K)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(K){},onclose:(i=S==null?void 0:S.onclose)!==null&&i!==void 0?i:function(K){}},T=this.webSocketFactory.create(m,AN(g),y);T.connect(),await b;let C=Be(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const K=this.apiClient.getProject(),U=this.apiClient.getLocation();C=`projects/${K}/locations/${U}/`+C}let A={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ia.AUDIO]}:t.config.responseModalities=[Ia.AUDIO]),!((l=t.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[],R=[];for(const K of N)if(this.isCallableTool(K)){const U=K;R.push(await U.tool())}else R.push(K);R.length>0&&(t.config.tools=R);const V={model:C,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?A=CM(this.apiClient,V):A=HE(this.apiClient,V),delete A.config,T.send(JSON.stringify(A)),new MN(T,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const EN={turnComplete:!0};class MN{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=kn(n.turns),t.isVertexAI()?i=i.map(o=>Gl(o)):i=i.map(o=>sc(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(bN)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},EN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:SM(t)}:n={realtimeInput:GE(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function AN(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function kN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yg=10;function Jg(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const c of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Cl(c)){o=!0;break}if(!o)return!0;const l=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Cl(e){return"callTool"in e&&typeof e.callTool=="function"}function _N(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Cl(o)))!==null&&i!==void 0?i:!1}function NN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>!Cl(o)))!==null&&i!==void 0?i:!1}function Xg(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RN extends Do{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,l,c,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!_N(n)||Jg(n.config))return await this.generateContentInternal(f);if(NN(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,m;const h=kn(f.contents),g=(l=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Yg;let p=0;for(;p<g&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const b=d.candidates[0].content,S=[];for(const M of(u=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[])if(Cl(M)){const y=await M.callTool(d.functionCalls);S.push(...y)}p++,m={role:"user",parts:S},f.contents=kn(f.contents),f.contents.push(b),f.contents.push(m),Xg(f.config)&&(h.push(b),h.push(m))}return Xg(f.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Jg(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let l;const c=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:c.push(f);let u;return l?u={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new cs(Ao.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const l=(n=t.config)===null||n===void 0?void 0:n.tools;if(!l)return t;const c=await Promise.all(l.map(async f=>Cl(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(u.config.tools=c,t.config&&t.config.tools&&u0(t.config.tools)){const f=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),d0(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,i,o;const l=new Map;for(const c of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Cl(c)){const u=c,f=await u.tool();for(const d of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(t){var n,i,o;const l=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Yg;let c=!1,u=0;const f=await this.initAfcToolsMap(t);return function(d,m,h){var g,p;return vl(this,arguments,function*(){for(var b,S,M,x;u<l;){c&&(u++,c=!1);const A=yield lt(d.processParamsMaybeAddMcpUsage(h)),N=yield lt(d.generateContentStreamInternal(A)),R=[],V=[];try{for(var y=!0,T=(S=void 0,Nr(N)),C;C=yield lt(T.next()),b=C.done,!b;y=!0){x=C.value,y=!1;const K=x;if(yield yield lt(K),K.candidates&&(!((g=K.candidates[0])===null||g===void 0)&&g.content)){V.push(K.candidates[0].content);for(const U of(p=K.candidates[0].content.parts)!==null&&p!==void 0?p:[])if(u<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(U.functionCall.name)){const I=yield lt(m.get(U.functionCall.name).callTool([U.functionCall]));R.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(K){S={error:K}}finally{try{!y&&!b&&(M=T.return)&&(yield lt(M.call(T)))}finally{if(S)throw S.error}}if(R.length>0){c=!0;const K=new ar;K.candidates=[{content:{role:"user",parts:R}}],yield yield lt(K);const U=[];U.push(...V),U.push({role:"user",parts:R});const I=kn(h.contents).concat(U);h.contents=I}else break}})}(this,f,t)}async generateContentInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=zg(this.apiClient,t);return u=ce("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Fg(m),g=new ar;return Object.assign(g,h),g})}else{const d=Bg(this.apiClient,t);return u=ce("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Gg(m),g=new ar;return Object.assign(g,h),g})}}async generateContentStreamInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=zg(this.apiClient,t);return u=ce("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(h){return vl(this,arguments,function*(){var g,p,b,S;try{for(var M=!0,x=Nr(h),y;y=yield lt(x.next()),g=y.done,!g;M=!0){S=y.value,M=!1;const T=S,C=Fg(yield lt(T.json()));C.sdkHttpResponse={headers:T.headers};const A=new ar;Object.assign(A,C),yield yield lt(A)}}catch(T){p={error:T}}finally{try{!M&&!g&&(b=x.return)&&(yield lt(b.call(x)))}finally{if(p)throw p.error}}})})}else{const d=Bg(this.apiClient,t);return u=ce("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(h){return vl(this,arguments,function*(){var g,p,b,S;try{for(var M=!0,x=Nr(h),y;y=yield lt(x.next()),g=y.done,!g;M=!0){S=y.value,M=!1;const T=S,C=Gg(yield lt(T.json()));C.sdkHttpResponse={headers:T.headers};const A=new ar;Object.assign(A,C),yield yield lt(A)}}catch(T){p={error:T}}finally{try{!M&&!g&&(b=x.return)&&(yield lt(b.call(x)))}finally{if(p)throw p.error}}})})}}async embedContent(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=bk(this.apiClient,t);return u=ce("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=$_(m),g=new Tg;return Object.assign(g,h),g})}else{const d=jA(this.apiClient,t);return u=ce("{model}:batchEmbedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=h_(m),g=new Tg;return Object.assign(g,h),g})}}async generateImagesInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=wk(this.apiClient,t);return u=ce("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=H_(m),g=new bg;return Object.assign(g,h),g})}else{const d=LA(this.apiClient,t);return u=ce("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=y_(m),g=new bg;return Object.assign(g,h),g})}}async editImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Rk(this.apiClient,t);return l=ce("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=B_(f),m=new hS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=jk(this.apiClient,t);return l=ce("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=z_(f),m=new gS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Pk(this.apiClient,t);return l=ce("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=G_(f),m=new pS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Bk(this.apiClient,t);return l=ce("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=O_(f),m=new yS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=zk(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>bd(m))}else{const d=UA(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Td(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Fk(this.apiClient,t);return u=ce("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=W_(m),g=new Sg;return Object.assign(g,h),g})}else{const d=VA(this.apiClient,t);return u=ce("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=v_(m),g=new Sg;return Object.assign(g,h),g})}}async update(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Ok(this.apiClient,t);return u=ce("{model}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>bd(m))}else{const d=HA(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>Td(m))}}async delete(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Yk(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=K_(m),g=new wg;return Object.assign(g,h),g})}else{const d=BA(this.apiClient,t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=C_(m),g=new wg;return Object.assign(g,h),g})}}async countTokens(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Xk(this.apiClient,t);return u=ce("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=Z_(m),g=new Eg;return Object.assign(g,h),g})}else{const d=GA(this.apiClient,t);return u=ce("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=T_(m),g=new Eg;return Object.assign(g,h),g})}}async computeTokens(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Wk(this.apiClient,t);return l=ce("{model}:computeTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=Q_(f),m=new xS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=t_(this.apiClient,t);return u=ce("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>{const h=iN(m),g=new La;return Object.assign(g,h),g})}else{const d=OA(this.apiClient,t);return u=ce("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c.then(m=>{const h=E_(m),g=new La;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends Do{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=lS(t);return u=ce("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c}else{const d=iS(t);return u=ce("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json()),c}}async fetchPredictVideosOperationInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=oS(t);return l=ce("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jN(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function f0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],jN(n)),t}function IN(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],f0(i)),t}function LN(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IN(o))),a(t,["speakerVoiceConfigs"],i)}return t}function UN(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],f0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],LN(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function PN(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function VN(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function $N(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function HN(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function BN(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],PN(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],VN(o));const l=s(e,["fileData"]);l!=null&&a(t,["fileData"],$N(l));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],HN(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const h=s(e,["text"]);return h!=null&&a(t,["text"],h),t}function zN(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>BN(l))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function GN(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const l=s(e,["parameters"]);l!=null&&a(t,["parameters"],l);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function FN(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function qN(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],FN(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function ON(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function YN(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],ON(n)),t}function JN(){return{}}function XN(e){const t={},n=s(e,["environment"]);return n!=null&&a(t,["environment"],n),t}function WN(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>GN(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],qN(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],YN(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],JN());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],XN(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function KN(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Wg(){return{}}function ZN(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const l=s(e,["prefixPaddingMs"]);l!=null&&a(t,["prefixPaddingMs"],l);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function QN(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],ZN(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function eR(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function tR(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],eR(i)),t}function nR(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function iR(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const l=s(e,["temperature"]);t!==void 0&&l!=null&&a(t,["setup","generationConfig","temperature"],l);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","speechConfig"],UN(If(h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],zN(Bt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Bl(b);Array.isArray(A)&&(A=A.map(N=>WN(Hl(N)))),a(t,["setup","tools"],A)}const S=s(e,["sessionResumption"]);t!==void 0&&S!=null&&a(t,["setup","sessionResumption"],KN(S));const M=s(e,["inputAudioTranscription"]);t!==void 0&&M!=null&&a(t,["setup","inputAudioTranscription"],Wg());const x=s(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Wg());const y=s(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&a(t,["setup","realtimeInputConfig"],QN(y));const T=s(e,["contextWindowCompression"]);t!==void 0&&T!=null&&a(t,["setup","contextWindowCompression"],tR(T));const C=s(e,["proactivity"]);return t!==void 0&&C!=null&&a(t,["setup","proactivity"],nR(C)),n}function oR(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Be(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],iR(o,n)),n}function lR(e,t,n){const i={},o=s(t,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const l=s(t,["newSessionExpireTime"]);n!==void 0&&l!=null&&a(n,["newSessionExpireTime"],l);const c=s(t,["uses"]);n!==void 0&&c!=null&&a(n,["uses"],c);const u=s(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],oR(e,u));const f=s(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&a(n,["fieldMask"],f),i}function rR(e,t){const n={},i=s(t,["config"]);return i!=null&&a(n,["config"],lR(e,i,n)),n}function sR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aR(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${n}.${l}`);t.push(...o)}else t.push(n)}return t.join(",")}function cR(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(e.bidiGenerateContentSetup=l,n=l):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const l=aR(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)l?e.fieldMask=l:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(d=>c.includes(d)?`generationConfig.${d}`:d));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class uR extends Do{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=rR(this.apiClient,t);l=ce("auth_tokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=cR(u,t.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>sR(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function fR(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function mR(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],fR(n,t)),t}function hR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function gR(e){const t={},n=s(e,["textInput"]);n!=null&&a(t,["textInput"],n);const i=s(e,["output"]);return i!=null&&a(t,["output"],i),t}function pR(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=s(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gR(o))),a(t,["examples","examples"],i)}return t}function yR(e,t){const n={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=s(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&a(t,["displayName"],i),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(e,["epochCount"]);t!==void 0&&o!=null&&a(t,["tuningTask","hyperparameters","epochCount"],o);const l=s(e,["learningRateMultiplier"]);if(l!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=s(e,["batchSize"]);t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","batchSize"],c);const u=s(e,["learningRate"]);if(t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","learningRate"],u),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function xR(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],pR(o));const l=s(e,["config"]);return l!=null&&a(t,["config"],yR(l,t)),t}function vR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function CR(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const l=s(e,["filter"]);return t!==void 0&&l!=null&&a(t,["_query","filter"],l),n}function TR(e){const t={},n=s(e,["config"]);return n!=null&&a(t,["config"],CR(n,t)),t}function bR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["_url","name"],n);const i=s(e,["config"]);return i!=null&&a(t,["config"],i),t}function SR(e,t){const n={},i=s(e,["gcsUri"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function wR(e,t){const n={},i=s(e,["gcsUri"]);i!=null&&a(n,["validationDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);return t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),n}function ER(e,t){const n={},i=s(e,["validationDataset"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec"],wR(i,n));const o=s(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&a(t,["tunedModelDisplayName"],o);const l=s(e,["description"]);t!==void 0&&l!=null&&a(t,["description"],l);const c=s(e,["epochCount"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],c);const u=s(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=s(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=s(e,["preTunedModelCheckpointId"]);d!=null&&a(n,["preTunedModel","checkpointId"],d);const m=s(e,["adapterSize"]);if(t!==void 0&&m!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m),s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=s(e,["labels"]);return t!==void 0&&h!=null&&a(t,["labels"],h),n}function MR(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],SR(o,t));const l=s(e,["config"]);return l!=null&&a(t,["config"],ER(l,t)),t}function AR(e){const t={},n=s(e,["name"]);n!=null&&a(t,["model"],n);const i=s(e,["name"]);return i!=null&&a(t,["endpoint"],i),t}function m0(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],$v(o));const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["tuningTask","startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["description"]);d!=null&&a(t,["description"],d);const m=s(e,["baseModel"]);m!=null&&a(t,["baseModel"],m);const h=s(e,["_self"]);h!=null&&a(t,["tunedModel"],AR(h));const g=s(e,["customBaseModel"]);g!=null&&a(t,["customBaseModel"],g);const p=s(e,["experiment"]);p!=null&&a(t,["experiment"],p);const b=s(e,["labels"]);b!=null&&a(t,["labels"],b);const S=s(e,["outputUri"]);S!=null&&a(t,["outputUri"],S);const M=s(e,["pipelineJob"]);M!=null&&a(t,["pipelineJob"],M);const x=s(e,["serviceAccount"]);x!=null&&a(t,["serviceAccount"],x);const y=s(e,["tunedModelDisplayName"]);return y!=null&&a(t,["tunedModelDisplayName"],y),t}function kR(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>m0(c))),a(t,["tuningJobs"],l)}return t}function _R(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const l=s(e,["done"]);l!=null&&a(t,["done"],l);const c=s(e,["error"]);return c!=null&&a(t,["error"],c),t}function NR(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);o!=null&&a(t,["step"],o);const l=s(e,["endpoint"]);return l!=null&&a(t,["endpoint"],l),t}function RR(e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],n);const i=s(e,["endpoint"]);i!=null&&a(t,["endpoint"],i);const o=s(e,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>NR(c))),a(t,["checkpoints"],l)}return t}function wd(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],$v(o));const l=s(e,["createTime"]);l!=null&&a(t,["createTime"],l);const c=s(e,["startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["endTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["error"]);d!=null&&a(t,["error"],d);const m=s(e,["description"]);m!=null&&a(t,["description"],m);const h=s(e,["baseModel"]);h!=null&&a(t,["baseModel"],h);const g=s(e,["tunedModel"]);g!=null&&a(t,["tunedModel"],RR(g));const p=s(e,["preTunedModel"]);p!=null&&a(t,["preTunedModel"],p);const b=s(e,["supervisedTuningSpec"]);b!=null&&a(t,["supervisedTuningSpec"],b);const S=s(e,["tuningDataStats"]);S!=null&&a(t,["tuningDataStats"],S);const M=s(e,["encryptionSpec"]);M!=null&&a(t,["encryptionSpec"],M);const x=s(e,["partnerModelTuningSpec"]);x!=null&&a(t,["partnerModelTuningSpec"],x);const y=s(e,["customBaseModel"]);y!=null&&a(t,["customBaseModel"],y);const T=s(e,["experiment"]);T!=null&&a(t,["experiment"],T);const C=s(e,["labels"]);C!=null&&a(t,["labels"],C);const A=s(e,["outputUri"]);A!=null&&a(t,["outputUri"],A);const N=s(e,["pipelineJob"]);N!=null&&a(t,["pipelineJob"],N);const R=s(e,["serviceAccount"]);R!=null&&a(t,["serviceAccount"],R);const V=s(e,["tunedModelDisplayName"]);return V!=null&&a(t,["tunedModelDisplayName"],V),t}function DR(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>wd(c))),a(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jR extends Do{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new cs(Ao.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel},o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:gd.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=vR(t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>wd(m))}else{const d=dR(t);return u=ce("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>m0(m))}}async listInternal(t){var n,i,o,l;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=TR(t);return u=ce("tuningJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=DR(m),g=new Mg;return Object.assign(g,h),g})}else{const d=mR(t);return u=ce("tunedModels",d._url),f=d._query,delete d.config,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(m=>m.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:m.headers},g})),c.then(m=>{const h=kR(m),g=new Mg;return Object.assign(g,h),g})}}async cancel(t){var n,i,o,l;let c="",u={};if(this.apiClient.isVertexAI()){const f=bR(t);c=ce("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=hR(t);c=ce("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=MR(t);return l=ce("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>wd(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xR(t);return l=ce("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>_R(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IR{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const LR=1024*1024*8,UR=3,PR=1e3,VR=2,fu="x-goog-upload-status";async function $R(e,t,n){var i,o,l;let c=0,u=0,f=new pd(new Response),d="upload";for(c=e.size;u<c;){const h=Math.min(LR,c-u),g=e.slice(u,u+h);u+h>=c&&(d+=", finalize");let p=0,b=PR;for(;p<UR&&(f=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[fu]));)p++,await BR(b),b=b*VR;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[fu])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[fu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function HR(e){return{size:e.size,type:e.type}}function BR(e){return new Promise(t=>setTimeout(t,e))}class zR{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await $R(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await HR(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GR{create(t,n,i){return new FR(t,n,i)}}class FR{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kg="x-goog-api-key";class qR{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Kg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Kg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OR="gl-node/";class YR{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=nS(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new qR(this.apiKey);this.apiClient=new dN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:OR+"web",uploader:new zR,downloader:new IR}),this.models=new RN(this.apiClient),this.live=new wN(this.apiClient,o,new GR),this.batches=new Y2(this.apiClient),this.chats=new tE(this.models,this.apiClient),this.caches=new Zw(this.apiClient),this.files=new hE(this.apiClient),this.operations=new DN(this.apiClient),this.authTokens=new uR(this.apiClient),this.tunings=new jR(this.apiClient)}}const JR={а:"a",б:"b",в:"v",г:"h",ґ:"g",д:"d",е:"e",є:"ie",ж:"zh",з:"z",и:"y",і:"i",ї:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ь:"",ю:"iu",я:"ia",А:"A",Б:"B",В:"V",Г:"H",Ґ:"G",Д:"D",Е:"E",Є:"Ie",Ж:"Zh",З:"Z",И:"Y",І:"I",Ї:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Shch",Ь:"",Ю:"Iu",Я:"Ia"};function $s(e){return e&&e.split("").map(t=>JR[t]||t).join("")}async function XR(e,t,n,i,o,l,c,u){if(!e)throw new Error("API ключ не надано. Будь ласка, введіть ваш ключ у налаштуваннях.");const f=new YR({apiKey:e}),d=$s(l),m=t.map(p=>{const b={...p};return b.name&&(b.name=$s(b.name)),b.comment&&(b.comment=$s(b.comment)),b.type==="text"&&(b.text=$s(b.text)),b}),h=`
Generate a complete Python script using the Tkinter library to draw a scene. The output must be only the Python code, with no explanations, introductions, or markdown formatting.

Here are the specifications:

1.  **Window and Canvas:**
    *   The main window should be titled "${d}".
    *   The canvas variable must be named "${c}".
    *   The canvas dimensions must be ${n}x${i} pixels.
    *   The canvas background color must be "${o}".

2.  **Script Structure:**
    *   Import tkinter: \`from tkinter import *\`.
    *   Create the root window: \`root = Tk()\`.
    *   Set the window title and geometry.
    *   Create the canvas: \`${c} = Canvas(root, ...)\`.
    *   Pack the canvas: \`${c}.pack()\`.
    *   Draw all the shapes provided below.
    *   For each shape, you MUST add a comment with its unique ID right before the drawing command, in the format: \`# ID:shape-id-123\`. This is critical for mapping code back to the editor.
    *   ${u?"Add a short, descriptive comment for each shape based on its properties (e.g., `# A blue square`).":`Do not add any descriptive comments unless one is provided in the shape object's "comment" property.`}
    *   End the script with \`root.mainloop()\`.

3.  **Shapes to Draw (JSON format):**
    ${JSON.stringify(m,null,2)}

Please generate only the Python code as a single block of text.
`,g="You are an expert Python developer specializing in the Tkinter library. Your task is to generate a complete, self-contained Python script based on a JSON description of shapes and canvas properties. The output must be only the Python code, with no surrounding text, explanations, or markdown formatting.";try{return(await f.models.generateContent({model:"gemini-2.5-flash",contents:h,config:{systemInstruction:g,temperature:.1}})).text.replace(/^```(python)?\n/i,"").replace(/```$/,"").trim()}catch(p){throw console.error("Error calling Gemini API:",p),p instanceof Error?p.message.includes("API key not valid")?new Error("Наданий ключ Gemini API недійсний. Будь ласка, перевірте його та спробуйте знову."):new Error(`Сталася помилка під час зв'язку з Gemini API: ${p.message}`):new Error("Невідома помилка під час генерації коду за допомогою Gemini.")}}const ot=e=>Math.round(e*100)/100,xn=e=>{const t=Object.entries(e).filter(([,n])=>n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)).map(([n,i])=>{if(typeof i=="string"){if(["first","last","both","pieslice","chord","arc","miter","round","bevel","butt","projecting","normal","hidden","disabled"].includes(i))return`${n}="${i}"`;const o=i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return`${n}="${o}"`}return Array.isArray(i)?`${n}=(${i.join(", ")})`:`${n}=${i}`});return t.length>0?`, ${t.join(", ")}`:""},WR=e=>e.name||qt(e);function KR(e,t,n){if(e.state==="hidden")return null;const i={},o=e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed||e.type==="arc"&&e.style==="arc";if(e.state!=="normal"&&(i.state=e.state),"fill"in e&&e.fill!=="none"&&!o&&(i.fill=e.fill),e.stroke!=="none"&&e.strokeWidth>0&&(i.width=ot(e.strokeWidth),o?i.fill=e.stroke:i.outline=e.stroke),"joinstyle"in e&&e.joinstyle&&(i.joinstyle=e.joinstyle),"stipple"in e&&e.stipple&&"fill"in e&&e.fill!=="none"&&(i.stipple=e.stipple),"dash"in e&&e.dash){const d=e.strokeWidth>0?e.strokeWidth:1;i.dash=e.dash.map(m=>ot(m*d)),"dashoffset"in e&&e.dashoffset!==void 0&&(i.dashoffset=ot(e.dashoffset))}const l=d=>{if(d.arrow&&d.arrow!=="none"&&d.arrowshape){i.arrow=d.arrow;const m=d.strokeWidth>0?d.strokeWidth:1;i.arrowshape=d.arrowshape.map(h=>ot(h*m))}d.capstyle&&(i.capstyle=d.capstyle)};if((e.type==="bezier"||e.type==="polyline")&&e.smooth){i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps),l(e);let d=e.points;if(e.rotation!==0){const h=St(e);h&&(d=e.points.map(g=>qe(g,h,e.rotation)))}const m=d.flatMap(h=>[ot(h.x),ot(h.y)]).join(", ");return e.isClosed?`${n}.create_polygon(${m}${xn(i)})`:`${n}.create_line(${m}${xn(i)})`}if((e.type==="line"||e.type==="bezier"||e.type==="polyline"||e.type==="arc"||e.type==="pencil")&&l(e),e.type==="text"){const d=[e.font,Math.round(e.fontSize)];e.weight==="bold"&&d.push("bold"),e.slant==="italic"&&d.push("italic"),e.underline&&d.push("underline"),e.overstrike&&d.push("overstrike"),i.font=d.join(" "),i.text=e.text,e.fill!=="none"&&(i.fill=e.fill),i.anchor=e.anchor,e.width>0&&(i.width=ot(e.width)),e.justify&&(i.justify=e.justify),e.rotation!==0&&(i.angle=ot(e.rotation)),e.stipple&&e.fill!=="none"&&(i.stipple=e.stipple);const m=[ot(e.x),ot(e.y)].join(", ");return`${n}.create_text(${m}${xn(i)})`}if(e.type==="image"){i.image=t.get(e.id);const d=[ot(e.x+e.width/2),ot(e.y+e.height/2)].join(", ");let m=`${n}.create_image(${d}${xn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(e.type==="bitmap"){i.bitmap=e.bitmapType,i.foreground=e.foreground,i.background=e.background;const d=[ot(e.x+e.width/2),ot(e.y+e.height/2)].join(", ");let m=`${n}.create_bitmap(${d}${xn(i)})`;return e.rotation!==0&&(m+=" # Tkinter не підтримує обертання для цього об'єкта."),m}if(!("rotation"in e)||e.rotation===0||e.type==="ellipse"&&e.isAspectRatioLocked)switch(e.type){case"rectangle":const d=e,m=[d.x,d.y,d.x+d.width,d.y+d.height].map(ot).join(", ");return`${n}.create_rectangle(${m}${xn(i)})`;case"ellipse":const h=e,g=[h.cx-h.rx,h.cy-h.ry,h.cx+h.rx,h.cy+h.ry].map(ot).join(", ");return`${n}.create_oval(${g}${xn(i)})`;case"arc":const p=e;i.start=ot(p.start),i.extent=ot(p.extent),p.style!=="pieslice"&&(i.style=p.style),p.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const b=[p.x,p.y,p.x+p.width,p.y+p.height].map(ot).join(", ");return`${n}.create_arc(${b}${xn(i)})`}if(e.type==="arc"&&e.rotation!==0){const d=e;if(d.width===d.height){i.start=ot(d.start-d.rotation),i.extent=ot(d.extent),d.style!=="pieslice"&&(i.style=d.style),d.style==="arc"&&(i.outline&&i.fill&&i.fill!==i.outline||i.fill&&!i.outline)&&delete i.fill;const m=[d.x,d.y,d.x+d.width,d.y+d.height].map(ot).join(", ");return`${n}.create_arc(${m}${xn(i)})`}}if(e.type==="polyline"&&e.isClosed&&!e.rotation&&nv(e)){const d=e.points.map(g=>g.x),m=e.points.map(g=>g.y),h=[Math.min(...d),Math.min(...m),Math.max(...d),Math.max(...m)].map(ot).join(", ");return`${n}.create_rectangle(${h}${xn(i)})`}const u=Kn(e);if(!u||u.length<2)return null;"smooth"in e&&e.smooth&&(i.smooth="True","splinesteps"in e&&e.splinesteps&&(i.splinesteps=e.splinesteps));const f=u.flatMap(d=>[ot(d.x),ot(d.y)]).join(", ");return o?`${n}.create_line(${f}${xn(i)})`:`${n}.create_polygon(${f}${xn(i)})`}async function Zg(e,t,n,i,o,l,c){const u=l.trim()||"c",f=e.filter(g=>g.type==="image"),d=new Map;let m="";f.length>0&&(m+=`from PIL import Image, ImageTk
`,m+=`import base64
`,m+=`import io

`,f.forEach((g,p)=>{const b=`img_photo_${p}`,S=g.src.split(",")[1];m+=`img_data_${p} = base64.b64decode(b'${S}')
`,m+=`img_pil_${p} = Image.open(io.BytesIO(img_data_${p}))
`,m+=`${b} = ImageTk.PhotoImage(img_pil_${p})
`,d.set(g.id,b)}),m+=`
`);const h=[];return h.push({content:"from tkinter import *",shapeId:null}),m.trim()&&(h.push({content:`
# --- Image setup ---`,shapeId:null}),m.split(`
`).forEach(g=>h.push({content:g,shapeId:null}))),h.push({content:"",shapeId:null}),h.push({content:"root = Tk()",shapeId:null}),h.push({content:`root.title("${o}")`,shapeId:null}),h.push({content:`root.geometry("${t}x${n}")`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:`${u} = Canvas(root, width=${t}, height=${n}, bg="${i}")`,shapeId:null}),h.push({content:`${u}.pack()`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:"# --- Фігури (Об'єкти) ---",shapeId:null}),e.length===0?h.push({content:"# Об'єкти для малювання відсутні",shapeId:null}):e.forEach(g=>{const p=KR(g,d,u);if(p){let b=g.comment;c&&!b&&(b=WR(g)),b&&b.split(`
`).forEach(S=>{h.push({content:S.trim()===""?"#":`# ${S}`,shapeId:g.id})}),h.push({content:p,shapeId:g.id})}}),h.push({content:"",shapeId:null}),h.push({content:"root.mainloop()",shapeId:null}),Promise.resolve({codeLines:h})}const ZR=e=>{const[t,n]=E.useState(e.initialTab||"canvas"),i=l=>{let c=l.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(c)&&(c="_"+c),e.setCanvasVarName(c)},o=l=>{e.setGeneratorType(l)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e.onClose,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:l=>l.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Налаштування"}),r.jsx("button",{onClick:e.onClose,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-4 border-b border-[var(--border-primary)]",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>n("canvas"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="canvas"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Полотно"}),r.jsx("button",{onClick:()=>n("grid"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="grid"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Сітка"}),r.jsx("button",{onClick:()=>n("appearance"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="appearance"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Вигляд"}),r.jsx("button",{onClick:()=>n("generator"),className:`px-4 py-2 rounded-md font-semibold transition ${t==="generator"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:"Генератор"})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[t==="canvas"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Розмір полотна"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasWidth",children:"Ширина:"}),r.jsx(Ae,{id:"canvasWidth",value:e.canvasWidth,onChange:e.setCanvasWidth,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasHeight",children:"Висота:"}),r.jsx(Ae,{id:"canvasHeight",value:e.canvasHeight,onChange:e.setCanvasHeight,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasVarName",children:"Назва полотна:"}),r.jsx("input",{id:"canvasVarName",type:"text",value:e.canvasVarName,onChange:l=>i(l.target.value),onBlur:l=>{l.target.value.trim()===""&&e.setCanvasVarName("c")},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsx("div",{className:"pl-28 -mt-3",children:r.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Тло"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasBgColor",children:"Колір тла:"}),r.jsx(Gt,{id:"canvasBgColor",value:e.canvasBgColor,onChange:e.setCanvasBgColor,onPreview:e.setPreviewCanvasBgColor,onCancel:()=>e.setPreviewCanvasBgColor(null)})]})]}),t==="grid"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Налаштування сітки"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"gridSize",children:"Крок сітки:"}),r.jsx(Ae,{id:"gridSize",value:e.gridSize,onChange:e.setGridSize,min:1,step:1})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"gridSnapStep",children:"Крок прив'язки:"}),r.jsx(Ae,{id:"gridSnapStep",value:e.gridSnapStep,onChange:e.setGridSnapStep,min:1,step:1})]})]}),t==="appearance"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Інтерфейс"}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showTkinterNames",type:"checkbox",checked:e.showTkinterNames,onChange:l=>e.setShowTkinterNames(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showTkinterNames",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати назви команд Tkinter",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:'Наприклад: "Прямокутник [rectangle]".'})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showLineNumbers",type:"checkbox",checked:e.showLineNumbers,onChange:l=>e.setShowLineNumbers(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showLineNumbers",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати номери рядків",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає нумерацію рядків у вікні коду."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showAxes",type:"checkbox",checked:e.showAxes,onChange:l=>e.setShowAxes(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showAxes",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати лінійки",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає лінійки зліва та зверху від полотна."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showCursorCoords",type:"checkbox",checked:e.showCursorCoords,onChange:l=>e.setShowCursorCoords(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showCursorCoords",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати координати біля курсора",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає координати X/Y поруч з курсором."})]})]}),r.jsxs("div",{className:"flex items-start pt-2",children:[r.jsx("input",{id:"showRotationAngle",type:"checkbox",checked:e.showRotationAngle,onChange:l=>e.setShowRotationAngle(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("label",{htmlFor:"showRotationAngle",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати кут при обертанні",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає кут у підказці біля курсора."})]})]}),r.jsxs("label",{htmlFor:"highlightCodeOnSelection",className:"flex items-start pt-2 has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed",children:[r.jsx("input",{id:"highlightCodeOnSelection",type:"checkbox",checked:e.highlightCodeOnSelection,onChange:l=>e.setHighlightCodeOnSelection(l.target.checked),disabled:e.generatorType==="gemini",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Підсвічувати код при виділенні",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Автоматично виділяти рядок коду, що відповідає вибраній фігурі."})]})]})]}),t==="generator"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Метод генерації коду"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:"generatorType",value:"local",checked:e.generatorType==="local",onChange:()=>o("local"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Локальний генератор"}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Генерує код Tkinter безпосередньо у вашому браузері.",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Миттєво, працює офлайн, безкоштовно. Рекомендовано для більшості випадків."]})]})]}),r.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:"generatorType",value:"gemini",checked:e.generatorType==="gemini",onChange:()=>o("gemini"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Gemini API"}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:["Надсилає опис малюнка до Google AI для генерації коду.",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--text-secondary)]",children:"Переваги:"})," Потенціал для складніших завдань у майбутньому (напр. оптимізація коду).",r.jsx("br",{}),r.jsx("strong",{className:"text-[var(--destructive-text)]",children:"Недоліки:"})," Повільніше, вимагає інтернет та API ключ."]})]})]})]}),e.generatorType==="gemini"&&r.jsxs("div",{className:"pt-4",children:[r.jsx("h4",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Ключ Gemini API"}),r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1 mb-2",children:"Для використання генератора Gemini потрібен ваш особистий ключ API."}),r.jsx("button",{onClick:()=>{e.onOpenApiKeyModal(),e.onClose()},className:"w-full text-center px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Керувати ключем API"})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsxs("label",{htmlFor:"autoGenerateComments",className:"flex items-start pt-2",children:[r.jsx("input",{id:"autoGenerateComments",type:"checkbox",checked:e.autoGenerateComments,onChange:l=>e.setAutoGenerateComments(l.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Автоматично генерувати коментарі",r.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Генерує описовий коментар для кожної фігури, якщо ви не додали власний."})]})]})]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:r.jsx("button",{onClick:e.onClose,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})},ki=e=>e.map(t=>`${t.x},${t.y}`).join(" "),QR=({projectName:e,shapes:t,width:n,height:i,backgroundColor:o,onClose:l})=>{const c=d=>{if("rotation"in d&&d.rotation&&d.rotation!==0){const m=d.type==="text"?{x:d.x,y:d.y}:St(d);if(m)return`rotate(${d.rotation} ${m.x} ${m.y})`}},u=E.useMemo(()=>{const d=new Map;return t.forEach(m=>{if(m&&(m.type==="line"||m.type==="bezier"||m.type==="polyline"&&!m.isClosed)&&m.arrow&&m.arrow!=="none"&&m.stroke!=="none"&&m.strokeWidth>0&&m.arrowshape){const[h,g,p]=m.arrowshape,b=m.strokeWidth,S=h*b,M=g*b,x=p*b,y=JSON.stringify({color:m.stroke,shape:[S,M,x]});d.has(y)||d.set(y,{color:m.stroke,shapeParams:[S,M,x]})}}),Array.from(d.values())},[t]),f=d=>{const m=d.joinstyle??"miter";return{strokeLinejoin:m,strokeMiterlimit:m==="miter"?10:void 0}};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:l,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl flex flex-col max-w-full max-h-full",onClick:d=>d.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-2 px-4 border-b border-[var(--border-primary)] bg-[var(--bg-app)] rounded-t-lg flex-shrink-0",children:[r.jsxs("h2",{className:"text-sm font-bold text-[var(--text-primary)] truncate",title:`Попередній перегляд: ${e}`,children:["Попередній перегляд: ",e]}),r.jsx("button",{onClick:l,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-4 bg-[var(--bg-secondary)]/50 overflow-auto",children:r.jsxs("svg",{width:n,height:i,style:{backgroundColor:o,boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},className:"rounded-md flex-shrink-0",children:[r.jsxs("defs",{children:[r.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"3",height:"3",fill:"black"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray12",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),r.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray25",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),r.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"black"}),r.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),r.jsx("mask",{id:"mask-gray50",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[r.jsx("rect",{width:"2",height:"2",fill:"white"}),r.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),r.jsx("mask",{id:"mask-gray75",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),r.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),r.jsx("mask",{id:"mask-bitmap-error",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),r.jsx("mask",{id:"mask-bitmap-hourglass",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-info",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-questhead",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-question",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),r.jsx("mask",{id:"mask-bitmap-warning",children:r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),u.map(({color:d,shapeParams:m})=>{const[h,g,p]=m;if(h<=0||g<=0)return null;const b=`${d.replace(/[^a-zA-Z0-9]/g,"")}-${h}-${g}-${p}`;return r.jsxs(Mt.Fragment,{children:[r.jsx("marker",{id:`arrow-end-${b}`,viewBox:`0 0 ${h} ${g}`,refX:h,refY:g/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:g,orient:"auto",children:r.jsx("path",{d:`M 0,0 L ${h},${g/2} L 0,${g} L ${p},${g/2} z`,fill:d})}),r.jsx("marker",{id:`arrow-start-${b}`,viewBox:`0 0 ${h} ${g}`,refX:h,refY:g/2,markerUnits:"userSpaceOnUse",markerWidth:h,markerHeight:g,orient:"auto-start-reverse",children:r.jsx("path",{d:`M 0,0 L ${h},${g/2} L 0,${g} L ${p},${g/2} z`,fill:d})})]},b)})]}),r.jsx("rect",{x:"0",y:"0",width:n,height:i,fill:o}),t.map(d=>{if(!d||d.state==="hidden")return null;const m={stroke:d.stroke,strokeWidth:d.strokeWidth,style:{opacity:d.state==="disabled"?.5:1},transform:c(d)},h=g=>{const p=g.stroke!=="none"&&g.strokeWidth>0;let b;if("dash"in g&&g.dash&&g.dash.length>0&&g.strokeWidth>0){const C="capstyle"in g&&g.capstyle?g.capstyle:"butt";b=g.dash.map((A,N)=>N%2===0&&A<=2?C==="round"?.01:g.strokeWidth:A*g.strokeWidth).join(" ")}const M="dashoffset"in g?g.dashoffset:void 0,x=(g.capstyle==="projecting"?"square":g.capstyle)??"butt";let y,T;if(p&&g.arrow&&g.arrow!=="none"&&g.arrowshape){const[C,A,N]=g.arrowshape,R=g.strokeWidth,V=C*R,K=A*R,U=N*R,I=`${g.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${V}-${K}-${U}`;(g.arrow==="first"||g.arrow==="both")&&(y=`url(#arrow-start-${I})`),(g.arrow==="last"||g.arrow==="both")&&(T=`url(#arrow-end-${I})`)}return{strokeDasharray:b,strokeDashoffset:M,markerStart:y,markerEnd:T,strokeLinecap:x}};switch(d.type){case"rectangle":{const p={...m,x:d.x,y:d.y,width:d.width,height:d.height,fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("rect",{...p},d.id)}case"ellipse":{const p=d,b={...m,cx:p.cx,cy:p.cy,rx:p.rx,ry:p.ry,fill:p.fill};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(S=>S*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),r.jsx("ellipse",{...b},p.id)}case"arc":{const p=d,b={...m,d:Ef(p),fill:p.style==="arc"?"none":p.fill,...h(p)};return p.stipple&&p.fill!=="none"&&p.style!=="arc"&&(b.mask=`url(#mask-${p.stipple})`),r.jsx("path",{...b},d.id)}case"line":return r.jsx("line",{...m,x1:d.points[0].x,y1:d.points[0].y,x2:d.points[1].x,y2:d.points[1].y,...h(d)},d.id);case"bezier":const g=d.isClosed?d.fill:"none";return r.jsx("path",{...m,d:yl(d.points,d.smooth,d.isClosed),fill:g,...h(d),...f(d)},d.id);case"pencil":return r.jsx("path",{...m,d:kf(d.points),fill:"none",strokeLinecap:"round",...f(d),...h(d)},d.id);case"polyline":{const p={...m,...f(d)};return d.stipple&&d.isClosed&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),d.isClosed?p.fill=d.fill:(p.fill="none",Object.assign(p,h(d))),d.smooth?r.jsx("path",{...p,d:yl(d.points,!0,d.isClosed)},d.id):d.isClosed?r.jsx("polygon",{...p,points:ki(d.points)},d.id):r.jsx("polyline",{...p,points:ki(d.points),fill:"none"},d.id)}case"triangle":{const p={...m,points:ki(qr(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...p},d.id)}case"right-triangle":{const p={...m,points:ki(Mf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...p},d.id)}case"rhombus":{const p={...m,points:ki(Af(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...p},d.id)}case"trapezoid":{const p={...m,points:ki(tc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...p},d.id)}case"parallelogram":{const p={...m,points:ki(nc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),r.jsx("polygon",{...p},d.id)}case"polygon":case"star":{const p=d,b={...m,fill:p.fill,...f(p)};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(S=>S*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),p.smooth?r.jsx("path",{...b,d:yl(Kn(d),!0,!0)},d.id):r.jsx("polygon",{...b,points:ki(Dl(d))},d.id)}case"text":{const p=d,{font:b,fontSize:S,weight:M,slant:x,underline:y,overstrike:T,fill:C,justify:A}=p,N=ic(p),R=Zi(p);if(!R)return null;const V=A==="center"?"middle":A==="right"?"end":"start";let K;V==="start"?K=R.x:V==="middle"?K=R.x+R.width/2:K=R.x+R.width,p.width>0&&(V==="middle"?K=R.x+p.width/2:V==="end"?K=R.x+p.width:K=R.x);const U={fontFamily:oc(b),fontSize:S,fontWeight:M,fontStyle:x==="italic"?"italic":"normal",textDecoration:`${y?"underline":""} ${T?"line-through":""}`.trim(),whiteSpace:"pre"};return r.jsx("text",{...m,x:K,y:R.y,fill:C,textAnchor:V,dominantBaseline:"hanging",style:{...m.style,...U},children:N.map((I,ee)=>r.jsx("tspan",{x:K,dy:ee===0?0:`${S*1.2}px`,children:I},ee))},p.id)}case"image":{const p=d;return r.jsx("image",{href:p.src,x:p.x,y:p.y,width:p.width,height:p.height,...m},p.id)}case"bitmap":{const p=d,{x:b,y:S,width:M,height:x,bitmapType:y,foreground:T,background:C}=p,A=y.startsWith("gray")?`url(#mask-${y})`:`url(#mask-bitmap-${y})`;return r.jsxs("g",{...m,children:[r.jsx("rect",{x:b,y:S,width:M,height:x,fill:C}),r.jsx("rect",{x:b,y:S,width:M,height:x,fill:T,mask:A})]},p.id)}default:return null}})]})})]})})},eD=({onClose:e,onExport:t})=>{const[n,i]=E.useState("png"),[o,l]=E.useState(1),[c,u]=E.useState(90),f=()=>{t({format:n,scale:o,quality:c})},d=({value:m,label:h})=>r.jsx("button",{onClick:()=>i(m),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition ${n===m?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:h});return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:m=>m.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Експортувати зображення"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Qt,{})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx(se,{htmlFor:"format-group",title:"Оберіть формат файлу для експорту.",children:"Формат:"}),r.jsxs("div",{id:"format-group",className:"flex items-center gap-2 mt-2 p-1 bg-[var(--bg-app)] rounded-lg",children:[r.jsx(d,{value:"svg",label:"SVG"}),r.jsx(d,{value:"png",label:"PNG"}),r.jsx(d,{value:"jpeg",label:"JPEG"})]})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"export-scale",title:"Множник розміру зображення. 2x зробить зображення вдвічі більшим.",children:"Масштаб:"}),r.jsx(Ae,{id:"export-scale",value:o,onChange:l,min:.1,max:10,step:.1})]}),n==="jpeg"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"export-quality",title:"Якість стиснення JPEG від 0 (низька) до 100 (висока).",children:"Якість:"}),r.jsx(Ae,{id:"export-quality",value:c,onChange:u,min:0,max:100,step:1})]}),r.jsx("div",{className:"flex items-center gap-2 ml-32",children:r.jsx("input",{type:"range",min:"0",max:"100",value:c,onChange:m=>u(Number(m.target.value)),className:"w-full h-2 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer"})})]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:r.jsx("button",{onClick:f,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Експорт"})})]})})},tD=({onClose:e,onCreate:t,initialSettings:n})=>{const[i,o]=E.useState(n.projectName),[l,c]=E.useState(n.width),[u,f]=E.useState(n.height),[d,m]=E.useState(n.bgColor),[h,g]=E.useState(n.canvasVarName),p=()=>{t({projectName:i,width:l,height:u,bgColor:d,canvasVarName:h.trim()||"c"})},b=S=>{let M=S.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(M)&&(M="_"+M),g(M)};return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:S=>S.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Новий проєкт"}),r.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:r.jsx(Qt,{})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"projectName",children:"Назва проєкту:"}),r.jsx("input",{id:"projectName",type:"text",value:i,onChange:S=>o(S.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Налаштування полотна"}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasWidth",children:"Ширина:"}),r.jsx(Ae,{id:"canvasWidth",value:l,onChange:c,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasHeight",children:"Висота:"}),r.jsx(Ae,{id:"canvasHeight",value:u,onChange:f,min:100,step:10})]}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasVarName",children:"Назва полотна:"}),r.jsx("input",{id:"canvasVarName",type:"text",value:h,onChange:S=>b(S.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),r.jsx("div",{className:"pl-28 -mt-3",children:r.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"canvasBgColor",children:"Колір тла:"}),r.jsx(Gt,{id:"canvasBgColor",value:d,onChange:m,onPreview:()=>{},onCancel:()=>{}})]})]}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:p,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Створити"})]})]})})},nD=({isOpen:e,onClose:t,onConfirm:n,title:i,message:o,confirmText:l="Продовжити",cancelText:c="Скасувати"})=>e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:i}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-[var(--text-secondary)]",children:o})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:c}),r.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:l})]})]})}):null,iD=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=E.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як..."}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"newProjectName",children:"Назва проєкту:"}),r.jsx("input",{id:"newProjectName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},oD=({isOpen:e,onClose:t})=>e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:n=>n.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:'Про редактор "ВереTkа"'}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsxs("div",{className:"p-6 space-y-4 text-sm text-[var(--text-secondary)]",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це простий векторний редактор, призначений для швидкого створення графічних примітивів та генерації відповідного Python коду для бібліотеки Tkinter."]}),r.jsx("p",{children:"Він використовує локальний генератор коду для миттєвого та надійного результату, а також може використовувати Google Gemini API для експериментальних можливостей."}),r.jsx("hr",{className:"border-[var(--border-secondary)]"}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Автор ідеї та розробник:"})," Віталій Кушнір"]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Доопрацювання та підтримка:"})," AI-асистент на базі Google Gemini."]}),r.jsxs("p",{className:"mt-2",children:["Створено за допомогою ",r.jsx("a",{href:"https://aistudio.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"AI Studio Google"}),"."]})]}),r.jsx("p",{className:"text-xs text-center text-[var(--text-tertiary)] pt-4",children:"Версія 1.0.3"})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})}):null,lD=(e,t)=>{const[n,i]=E.useState(e);return E.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},rD=({isOpen:e,onClose:t})=>{if(!e)return null;const n=E.useRef(null),[i,o]=E.useState(""),l=lD(i,300),[c,u]=E.useState(0),[f,d]=E.useState(-1),m=[{id:"intro",title:"1. Вступ"},{id:"interface",title:"2. Огляд інтерфейсу"},{id:"projects",title:"3. Робота з проєктами"},{id:"shapes",title:"4. Робота з об'єктами"},{id:"code-export",title:"5. Код та експорт"},{id:"hotkeys",title:"6. Гарячі клавіші"}],h=(C,A)=>{var R;C.preventDefault();const N=(R=n.current)==null?void 0:R.querySelector(`#${A}`);N&&N.scrollIntoView({behavior:"smooth",block:"start"})};E.useEffect(()=>{if(!n.current)return;if(!l.trim()){u(0),d(-1);return}const C=n.current.querySelectorAll("mark");u(C.length),d(C.length>0?0:-1)},[l]),E.useEffect(()=>{if(!n.current||f===-1)return;const C=Array.from(n.current.querySelectorAll("mark"));C.length!==0&&C.forEach((A,N)=>{N===f?(A.classList.add("bg-orange-500","text-white"),A.classList.remove("bg-yellow-400/80","text-black"),A.scrollIntoView({behavior:"smooth",block:"center"})):(A.classList.remove("bg-orange-500","text-white"),A.classList.add("bg-yellow-400/80","text-black"))})},[f,l]);const g=()=>{c!==0&&d(C=>(C+1)%c)},p=()=>{c!==0&&d(C=>(C-1+c)%c)},b=(C,A)=>{if(typeof C=="string")return A.trim()?C.split(new RegExp(`(${A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((R,V)=>R.toLowerCase()===A.toLowerCase()?r.jsx("mark",{className:"bg-yellow-400/80 text-black px-0.5 rounded-sm",children:R},V):R):C;if(Mt.isValidElement(C)){const N=C;if(N.props.children)return Mt.cloneElement(N,{...N.props,children:Mt.Children.map(N.props.children,R=>b(R,A))})}return Array.isArray(C)?C.map((N,R)=>r.jsx(Mt.Fragment,{children:b(N,A)},R)):C},S=({id:C,children:A})=>r.jsx("h2",{id:C,className:"text-xl font-bold text-[var(--text-primary)] mt-6 mb-3 pb-2 border-b border-[var(--border-secondary)] scroll-mt-4",children:b(A,l)}),M=({children:C})=>r.jsx("h3",{className:"text-md font-semibold text-[var(--text-primary)] mt-4 mb-2",children:b(C,l)}),x=({children:C})=>r.jsx("p",{className:"mb-2 leading-relaxed",children:b(C,l)}),y=({children:C})=>r.jsx("code",{className:"bg-[var(--bg-tertiary)] text-sm text-[var(--text-primary)] px-1.5 py-0.5 rounded-md font-mono",children:C}),T=({children:C})=>r.jsx("li",{className:"mb-2 pl-2",children:b(C,l)});return r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col",onClick:C=>C.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Довідка та інструкції"}),r.jsxs("div",{className:"flex-grow mx-4 max-w-sm relative",children:[r.jsx("input",{type:"search",placeholder:"Пошук у довідці...",value:i,onChange:C=>o(C.target.value),className:"w-full px-3 py-1.5 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-md border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"}),l.trim()&&r.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center text-xs text-[var(--text-tertiary)] bg-[var(--bg-secondary)] pl-2",children:c>0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"font-mono",children:[f+1,"/",c]}),r.jsx("button",{onClick:p,className:"p-1 hover:text-[var(--text-primary)]",title:"Попередній","aria-label":"Попередній результат",children:"▲"}),r.jsx("button",{onClick:g,className:"p-1 hover:text-[var(--text-primary)]",title:"Наступний","aria-label":"Наступний результат",children:"▼"})]}):r.jsx("span",{className:"px-1",children:"Не знайдено"})})]}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsxs("div",{className:"flex flex-grow min-h-0",children:[r.jsx("nav",{className:"w-64 flex-shrink-0 border-r border-[var(--border-secondary)] p-4 overflow-y-auto",children:r.jsx("ul",{className:"space-y-1",children:m.map(C=>r.jsx("li",{children:r.jsx("a",{href:`#${C.id}`,onClick:A=>h(A,C.id),className:"block text-sm p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:C.title})},C.id))})}),r.jsxs("div",{ref:n,className:"flex-grow p-6 text-sm text-[var(--text-secondary)] overflow-y-auto scroll-smooth",children:[r.jsxs("section",{children:[r.jsx(S,{id:"intro",children:"1. Вступ"}),r.jsxs(x,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це професійний веб-інструмент, розроблений для візуального створення графічних елементів та автоматичної генерації коду для бібліотеки Tkinter у Python. Редактор слугує мостом між дизайном та розробкою, дозволяючи швидко прототипувати, створювати складні сцени та отримувати чистий, готовий до використання код."]}),r.jsx(x,{children:"Ця інструкція допоможе вам освоїти всі можливості редактора, від базових операцій до просунутих технік."})]}),r.jsxs("section",{children:[r.jsx(S,{id:"interface",children:"2. Огляд інтерфейсу"}),r.jsx(x,{children:"Інтерфейс редактора логічно поділений на функціональні зони для максимальної зручності:"}),r.jsxs("ul",{className:"list-decimal list-inside space-y-3 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Головне меню:"})," Розташоване у верхній частині, надає доступ до глобальних операцій: керування файлами (",r.jsx(y,{children:"Файл"}),"), історія змін та робота з буфером обміну (",r.jsx(y,{children:"Редагувати"}),"), операції над об'єктами (",r.jsx(y,{children:"Об'єкт"}),"), налаштування видимості (",r.jsx(y,{children:"Вигляд"}),") та довідкова інформація (",r.jsx(y,{children:"Довідка"}),")."]}),r.jsxs(T,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Панелі інструментів:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Верхня панель:"})," Динамічна панель, що відображає налаштування для активного інструмента (наприклад, колір заливки для прямокутника) або властивості виділеного об'єкта. Це дозволяє швидко змінювати параметри, не звертаючись до правої панелі."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Ліва панель:"})," Основний набір інструментів для створення фігур. Згруповані за типом: примітиви, лінії та криві, багатокутники та інше."]})]})]}),r.jsxs(T,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Робоча область:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Полотно (Canvas):"})," Центральна зона для малювання. Його розмір та колір тла налаштовуються."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Лінійки (Rulers):"})," Горизонтальна та вертикальна лінійки допомагають точно позиціонувати об'єкти."]})]})]}),r.jsxs(T,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Бічні панелі:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Ліва панель (Код):"})," Відображає згенерований Python код. При використанні локального генератора код оновлюється в реальному часі. Меню у заголовку панелі дозволяє налаштовувати вигляд коду, зберігати його та запускати онлайн."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Права панель (Об'єкти та Властивості):"}),r.jsxs("ul",{children:[r.jsxs("li",{children:["- ",r.jsx("strong",{children:"Список об'єктів:"})," Ієрархічний перелік усіх фігур на полотні. Об'єкти у верхній частині списку знаходяться на передньому плані (вищі шари)."]}),r.jsxs("li",{children:["- ",r.jsx("strong",{children:"Редактор властивостей:"})," Потужна панель, де ви можете точно налаштувати кожен аспект виділеного об'єкта: від його назви, координат та розмірів до стилів заливки, контуру та унікальних параметрів (наприклад, кутів дуги або кількості сторін багатокутника). Для контурів тут доступний редактор координат вузлів."]})]})]})]})]}),r.jsxs(T,{children:[r.jsx("strong",{className:"text-[var(--text-primary)]",children:"Рядок стану:"})," Внизу робочої області. Показує рівень масштабування та точні координати курсора на полотні."]})]})]}),r.jsxs("section",{children:[r.jsx(S,{id:"projects",children:"3. Робота з проєктами"}),r.jsxs(x,{children:["ВереTkа працює з проєктами, що зберігаються у файлах формату ",r.jsx(y,{children:".vec.json"}),". Цей файл містить повну інформацію про ваші об'єкти, налаштування полотна та інтерфейсу."]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Створення нового проєкту:"})," Через меню ",r.jsx(y,{children:"Файл → Новий проєкт..."}),". Ви можете задати назву, розміри полотна, колір тла та назву змінної для полотна у коді (напр., ",r.jsx(y,{children:"canvas"}),")."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Збереження:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsxs("li",{children:[r.jsx(y,{children:"Файл → Зберегти"})," (",r.jsx(y,{children:"Ctrl+S"}),'): Зберігає зміни у поточний відкритий файл. Якщо проєкт новий, відкриється діалог "Зберегти як".']}),r.jsxs("li",{children:[r.jsx(y,{children:"Файл → Зберегти як..."}),": Дозволяє зберегти проєкт у новий файл з новою назвою."]})]})]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Завантаження:"})," Використовуйте ",r.jsx(y,{children:"Файл → Завантажити проєкт..."}),' або виберіть проєкт зі списку "Останні проєкти" на головному екрані.']}),r.jsxs(T,{children:[r.jsx("strong",{children:"Попередження про зміни:"})," Якщо ви спробуєте закрити вкладку з незбереженими змінами, браузер покаже попередження, щоб запобігти випадковій втраті роботи."]})]})]}),r.jsxs("section",{children:[r.jsx(S,{id:"shapes",children:"4. Робота з об\\'єктами"}),r.jsx(M,{children:"Створення та стилізація"}),r.jsx(x,{children:'Виберіть інструмент на лівій панелі. На верхній панелі встановіть базові параметри: колір заливки та контуру, товщину лінії. Малювання відбувається шляхом затискання лівої кнопки миші на полотні та розтягування. Для багатьох інструментів доступні два режими малювання (перемикаються на верхній панелі): "Від кута" та "Від центру".'}),r.jsx(M,{children:"Виділення та трансформація"}),r.jsxs(x,{children:['Активуйте інструмент "Вибрати" (',r.jsx(y,{children:"V"}),")."]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Виділення:"})," Клацніть на об'єкті. Для виділення кількох об'єктів у майбутньому буде додана рамка виділення."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Переміщення:"})," Перетягуйте виділений об'єкт. Для точного переміщення використовуйте ",r.jsx(y,{children:"клавіші-стрілки"})," (утримуючи ",r.jsx(y,{children:"Shift"})," для переміщення на 10 пікселів за раз)."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Масштабування:"})," Потягніть за квадратні маніпулятори на рамці виділення. Щоб зберегти пропорції, заблокуйте їх у редакторі властивостей (",r.jsx(y,{children:"Пропорції: 🔒"}),")."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Обертання:"})," Потягніть за круглий маніпулятор, що з'являється над рамкою виділення. Точний кут можна встановити в редакторі властивостей."]})]}),r.jsx(M,{children:"Просунуте редагування"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Дублювання перетягуванням:"})," Швидко створюйте копії, перетягуючи об'єкт із затиснутою ",r.jsx("strong",{children:"правою кнопкою миші"}),"."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Редагування тексту на полотні:"})," Двічі клацніть на текстовому об'єкті, щоб почати редагування безпосередньо на полотні. Щоб зберегти зміни та вийти, клацніть поза текстовим полем або натисніть ",r.jsx(y,{children:"Escape"}),". Клавіша ",r.jsx(y,{children:"Enter"})," використовується для створення нового рядка."]}),r.jsxs(T,{children:[r.jsxs("strong",{children:["Редагування вузлів (",r.jsx(y,{children:"A"}),"):"]})," Це потужний режим для зміни форми об'єкта. Виділіть об'єкт і перейдіть у цей режим.",r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[r.jsx("li",{children:"Переміщуйте існуючі вузли, щоб змінити контур."}),r.jsx("li",{children:"Клацніть на сегменті лінії, щоб додати новий вузол."}),r.jsxs("li",{children:["Виділіть вузол (клацніть по ньому) і натисніть ",r.jsx(y,{children:"Delete"}),", щоб видалити."]}),r.jsx("li",{children:'Координати вузлів можна точно налаштувати в редакторі властивостей у вкладці "Вузли".'})]})]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Перетворення на контур:"})," Будь-який примітив (прямокутник, еліпс, зірка) можна перетворити на полілінію для детального редагування вузлів. Для цього виділіть об'єкт і виберіть ",r.jsx(y,{children:"Об'єкт → Перетворити на контур"}),". Ця дія незворотня."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Спеціальні маніпулятори:"})," Деякі фігури, такі як Зірка, Трапеція, Трикутник, мають додаткові маніпулятори (жовті) для керування їх унікальними властивостями (напр., внутрішній радіус зірки або зсув вершини трикутника)."]})]}),r.jsx(M,{children:"Керування у Списку об'єктів"}),r.jsx(x,{children:`Права панель "Об'єкти" — це ваш центр керування шарами.`}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Порядок (Шари):"})," Перетягуйте об'єкти у списку для зміни їх порядку накладання. Верхні елементи списку знаходяться на передньому плані."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Видимість:"})," Клацніть на іконку ока, щоб тимчасово приховати об'єкт."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Перейменування:"})," Двічі клацніть на назві, щоб дати об'єкту змістовне ім'я. Воно буде використано в автоматичних коментарях до коду."]})]}),r.jsx(M,{children:"Панель властивостей: Точний контроль"}),r.jsx(x,{children:`Коли об'єкт виділено, панель "Властивості" надає повний контроль над усіма його параметрами:`}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Загальні:"})," Редагуйте назву об'єкта, його стан (звичайний, прихований, вимкнений) та додавайте багаторядкові коментарі, які будуть включені у згенерований код."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Геометрія:"})," Встановлюйте точні координати (",r.jsx(y,{children:"X"}),", ",r.jsx(y,{children:"Y"}),"), ширину, висоту та кут обертання. Важливо розрізняти ",r.jsx("strong",{className:"text-[var(--text-primary)]",children:"геометричні"})," розміри (без урахування обертання) та ",r.jsx("strong",{className:"text-[var(--text-primary)]",children:"візуальні"})," (габаритна рамка з урахуванням обертання). Зміна геометричних розмірів відбувається відносно центру фігури."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Заливка та Контур:"})," Повне керування кольором, товщиною, стилем штрихування (пунктир), стилем з'єднання кутів та патернами заповнення (stipple)."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Вузли:"})," Для поліліній, кривих та об'єктів, перетворених на контур, ця вкладка дозволяє вводити точні числові координати для кожного вузла. Координати відображаються з урахуванням обертання фігури, що відповідає їх реальній позиції на полотні."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Унікальні властивості:"})," Для специфічних фігур з'являються додаткові параметри, такі як кути дуги, кількість сторін багатокутника, зсув вершини трикутника, кут нахилу паралелограма тощо."]})]})]}),r.jsxs("section",{children:[r.jsx(S,{id:"code-export",children:"5. Код та експорт"}),r.jsx(M,{children:"Генерація коду"}),r.jsxs(x,{children:["Основна функція редактора. Налаштування генератора знаходяться в меню ",r.jsx(y,{children:"Налаштування → Генератор"}),"."]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"Локальний генератор (рекомендовано):"})," Генерує код миттєво, надійно та працює без інтернету. Код у лівій панелі оновлюється при кожній зміні, що ідеально для ітеративної розробки. Підтримує підсвітку коду при виділенні фігури."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Gemini API:"}),` Використовує штучний інтелект Google для генерації. Потребує інтернет-з'єднання та ключ API. Генерація запускається вручну кнопкою "Згенерувати код".`]}),r.jsxs(T,{children:[r.jsx("strong",{children:"Коментарі до коду:"})," Ви можете додавати власні коментарі до кожної фігури у панелі властивостей. Також можна увімкнути опцію ",r.jsx("strong",{className:"text-[var(--text-primary)]",children:'"Автоматично генерувати коментарі"'}),". Вона додасть коментар на основі назви об'єкта, якщо ви не вказали власний."]})]}),r.jsxs(x,{children:["Згенерований код можна скопіювати, зберегти у файл (",r.jsx(y,{children:".py"}),') або одразу запустити в онлайн-середовищі "ЄPython" за допомогою кнопок у меню вікна коду. У цьому ж меню ви можете налаштувати видимість коментарів та номерів рядків.']}),r.jsx(M,{children:"Експорт"}),r.jsxs(x,{children:["Експортуйте вашу роботу як зображення через ",r.jsx(y,{children:"Файл → Експортувати як..."}),"."]}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[r.jsxs(T,{children:[r.jsx("strong",{children:"SVG:"})," Векторний формат. Ідеально для масштабування без втрати якості та подальшого редагування в інших векторних редакторах."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"PNG:"})," Растровий формат з підтримкою прозорості. Підходить для веб-графіки."]}),r.jsxs(T,{children:[r.jsx("strong",{children:"JPEG:"})," Растровий формат з втратою якості. Гарний вибір для фотографій та складних градієнтів, дозволяє контролювати розмір файлу."]})]}),r.jsx(x,{children:"Для PNG та JPEG можна налаштувати масштаб експорту, щоб отримати зображення вищої роздільної здатності."})]}),r.jsxs("section",{children:[r.jsx(S,{id:"hotkeys",children:"6. Гарячі клавіші"}),r.jsxs(x,{children:["Гарячі клавіші працюють незалежно від поточної розкладки клавіатури (наприклад, ",r.jsx(y,{children:"V"})," для вибору спрацює, навіть якщо у вас ввімкнена українська розкладка, де ця клавіша відповідає літері ",r.jsx(y,{children:"М"}),")."]}),r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border-b-2 border-[var(--border-secondary)] w-1/3",children:"Комбінація"}),r.jsx("th",{className:"p-2 border-b-2 border-[var(--border-secondary)]",children:"Дія"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Ctrl"})," + ",r.jsx(y,{children:"S"})]}),r.jsx("td",{className:"p-2",children:"Зберегти проєкт"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Ctrl"})," + ",r.jsx(y,{children:"Z"})]}),r.jsx("td",{className:"p-2",children:"Скасувати останню дію"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Ctrl"})," + ",r.jsx(y,{children:"Y"})," (або ",r.jsx(y,{children:"Ctrl"})," + ",r.jsx(y,{children:"Shift"})," + ",r.jsx(y,{children:"Z"}),")"]}),r.jsx("td",{className:"p-2",children:"Повернути скасовану дію"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Ctrl"})," + ",r.jsx(y,{children:"D"})]}),r.jsx("td",{className:"p-2",children:"Дублювати виділений об'єкт"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Delete"})," / ",r.jsx(y,{children:"Backspace"})]}),r.jsx("td",{className:"p-2",children:"Видалити виділений об'єкт або вузол"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsx("td",{className:"p-2",children:r.jsx(y,{children:"V"})}),r.jsx("td",{className:"p-2",children:'Активувати інструмент "Вибрати"'})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsx("td",{className:"p-2",children:r.jsx(y,{children:"A"})}),r.jsx("td",{className:"p-2",children:'Активувати інструмент "Редагувати вузли"'})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsx("td",{className:"p-2",children:r.jsx(y,{children:"Стрілки"})}),r.jsx("td",{className:"p-2",children:"Перемістити виділений об'єкт на 1 піксель"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsxs("td",{className:"p-2",children:[r.jsx(y,{children:"Shift"})," + ",r.jsx(y,{children:"Стрілки"})]}),r.jsx("td",{className:"p-2",children:"Перемістити виділений об'єкт на 10 пікселів"})]}),r.jsxs("tr",{className:"border-b border-[var(--border-secondary)]",children:[r.jsx("td",{className:"p-2",children:r.jsx(y,{children:"Escape"})}),r.jsx("td",{className:"p-2",children:"Скасувати малювання полілінії/кривої, вийти з редагування назви або тексту на полотні"})]})]})]})]})]})]}),r.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end flex-shrink-0",children:r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})},sD=({isOpen:e,onClose:t,onSave:n,currentApiKey:i})=>{const[o,l]=E.useState(i||""),[c,u]=E.useState(!1),[f,d]=E.useState(!1);E.useEffect(()=>{e&&(l(i||""),d(!1))},[e,i]);const m=()=>{n(o.trim()===""?null:o.trim()),t()},h=()=>{l(""),n(null),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",onClick:g=>g.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Керування ключем Gemini API"}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:f?r.jsxs("div",{children:[r.jsx("button",{onClick:()=>d(!1),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline mb-4",children:"← Повернутися до введення ключа"}),r.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:"Як отримати ключ Gemini API"}),r.jsxs("div",{className:"space-y-3 text-sm text-[var(--text-secondary)]",children:[r.jsx("p",{children:"Ви можете безкоштовно отримати ключ API для доступу до моделей Gemini у Google AI Studio."}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 pl-2",children:[r.jsxs("li",{children:["Перейдіть на сайт ",r.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"Google AI Studio"}),"."]}),r.jsx("li",{children:"Увійдіть за допомогою вашого Google акаунту."}),r.jsxs("li",{children:["На сторінці, що відкриється, натисніть на кнопку ",r.jsx("strong",{children:'"Create API key in new project"'}),"."]}),r.jsx("li",{children:"Через декілька секунд буде згенеровано ваш ключ. Він виглядатиме як довгий рядок з випадкових символів."}),r.jsx("li",{children:"Натисніть на іконку копіювання поруч з ключем."}),r.jsx("li",{children:"Поверніться сюди та вставте скопійований ключ у поле вище."})]}),r.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[r.jsx("strong",{children:"Важливо:"})," Зберігайте ваш ключ у безпечному місці та не діліться ним ні з ким. Редактор не зберігає ключ на постійній основі і не передає його нікуди, окрім як безпосередньо до Google API при генерації коду."]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[r.jsx("strong",{children:"Важливо:"})," Ваш ключ API зберігатиметься лише на час поточної сесії і буде видалений після оновлення або закриття сторінки. Він не зберігається назавжди для вашої безпеки."]})}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:c?"text":"password",value:o,onChange:g=>l(g.target.value),placeholder:"Вставте ваш API ключ сюди",className:"w-full bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-3 py-2 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-10"}),r.jsx("button",{onClick:()=>u(g=>!g),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:c?"Приховати ключ":"Показати ключ",children:c?r.jsx(Dv,{size:18}):r.jsx(Rv,{size:18})})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>d(!0),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline",children:"Де взяти API ключ?"})})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-between items-center flex-shrink-0",children:[r.jsx("div",{children:i&&r.jsx("button",{onClick:h,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:"Видалити ключ"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:m,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Зберегти"})]})]})]})}):null};function mu(e,t,n){const i=e instanceof Blob?e:new Blob([e],{type:n}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}async function aD(){if(typeof window.showOpenFilePicker!="function")return null;try{const[e]=await window.showOpenFilePicker({types:[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}]}),n=await(await e.getFile()).text();return{handle:e,content:n}}catch(e){const t=e;if(t.name==="AbortError"||t.name==="SecurityError")return console.log(`File picker failed gracefully: ${t.name}. Falling back.`),null;throw e}}async function h0(e,t){const n=await e.createWritable();await n.write(t),await n.close()}async function cr(e,t,n,i){if(typeof window.showSaveFilePicker=="function")try{const o=await window.showSaveFilePicker({suggestedName:t,types:n});return await h0(o,e),o}catch(o){const l=o;return l.name==="AbortError"||l.name==="SecurityError"?(console.log(`File picker failed gracefully (${l.name}), falling back to download.`),mu(e,t,i),null):(console.error("Unexpected error with File System Access API, falling back to download:",o),mu(e,t,i),null)}else return mu(e,t,i),null}function cD(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function uD(e){if(e.state==="hidden")return"";const t=u=>{if("rotation"in u&&u.rotation&&u.rotation!==0){const f=u.type==="text"?{x:u.x,y:u.y}:St(u);if(f)return`transform="rotate(${u.rotation} ${f.x} ${f.y})"`}return""},n=u=>{let f=`stroke="${u.stroke}" stroke-width="${u.strokeWidth}" ${t(u)}`;return u.state==="disabled"&&(f+=' opacity="0.5"'),f},i=u=>u.fill==="none"?'fill="none"':"stipple"in u&&u.stipple?`fill="url(#pattern-${u.stipple}-fill)"`:`fill="${u.fill}"`,o=u=>{const f=u.joinstyle??"miter";return`stroke-linejoin="${f}" ${f==="miter"?'stroke-miterlimit="10"':""}`},l=u=>{let f=`stroke-linecap="${(u.capstyle==="projecting"?"square":u.capstyle)??"butt"}"`;if("dash"in u&&u.dash&&u.dash.length>0&&u.strokeWidth>0&&(f+=` stroke-dasharray="${u.dash.map(d=>d*u.strokeWidth).join(" ")}"`,"dashoffset"in u&&u.dashoffset&&(f+=` stroke-dashoffset="${u.dashoffset}"`)),u.arrow&&u.arrow!=="none"&&u.arrowshape){const[d,m,h]=u.arrowshape,g=u.strokeWidth>0?u.strokeWidth:1,p=`${u.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${d*g}-${m*g}-${h*g}`;(u.arrow==="first"||u.arrow==="both")&&(f+=` marker-start="url(#arrow-start-${p})"`),(u.arrow==="last"||u.arrow==="both")&&(f+=` marker-end="url(#arrow-end-${p})"`)}return f},c=Kn(e);if(!c)return"";switch(e.type){case"rectangle":return`<rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${n(e)} ${i(e)} ${o(e)} />`;case"ellipse":return`<ellipse cx="${e.cx}" cy="${e.cy}" rx="${e.rx}" ry="${e.ry}" ${n(e)} ${i(e)} />`;case"image":return`<image href="${e.src}" x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${t(e)} />`;case"bitmap":return`<g ${t(e)}><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="${e.background}" /><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="url(#pattern-bitmap-${e.bitmapType}-fill)" /></g>`;case"text":{if(!Zi(e))return"";const f=()=>["n","ne","nw"].includes(e.anchor)?"hanging":["w","center","e"].includes(e.anchor)?"middle":"alphabetic",d=e.justify==="center"?"middle":e.justify==="right"?"end":"start",m=`font-family='${oc(e.font)}' font-size='${e.fontSize}px' font-weight='${e.weight}' font-style='${e.slant==="italic"?"italic":"normal"}'`,h=`text-decoration='${e.underline?"underline":""} ${e.overstrike?"line-through":""}'`,p=ic(e).map((b,S)=>{let M=0;return e.justify==="center"&&e.width>0&&(M=e.width/2),e.justify==="right"&&e.width>0&&(M=e.width),`<tspan x="${e.x+M}" dy="${S===0?"0":`${e.fontSize*1.2}px`}">${cD(b)}</tspan>`}).join("");return`<text x="${e.x}" y="${e.y}" ${t(e)} dominant-baseline="${f()}" text-anchor="${d}" fill="${e.fill}" ${m} ${h} style="white-space: pre">${p}</text>`}case"arc":{const u=e.style==="arc"?"none":e.fill;return`<path d="${Ef(e)}" ${n(e)} fill="${u}" ${l(e)} />`}default:{const u=c.map((h,g)=>`${g===0?"M":"L"}${h.x},${h.y}`).join(" "),f=e.type!=="line"&&e.type!=="pencil"&&!(e.type==="polyline"&&!e.isClosed)&&!(e.type==="bezier"&&!e.isClosed),d=`${u} ${f?"Z":""}`,m=f&&"fill"in e?i(e):'fill="none"';return`<path d="${d}" ${n(e)} ${m} ${l(e)} ${o(e)} />`}}}function Qg(e,t,n,i){const o=new Set,l=new Set,c=new Map;e.forEach(g=>{if(g&&("stipple"in g&&g.stipple&&o.add(g.stipple),g.type==="bitmap"&&l.add(g.bitmapType),(g.type==="line"||g.type==="bezier"||g.type==="polyline"||g.type==="arc")&&g.arrow&&g.arrow!=="none"&&g.stroke!=="none"&&g.strokeWidth>0&&g.arrowshape)){const[p,b,S]=g.arrowshape,M=g.strokeWidth>0?g.strokeWidth:1,x=`${g.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${p*M}-${b*M}-${S*M}`;c.has(x)||c.set(x,{color:g.stroke,shapeParams:[p*M,b*M,S*M]})}});const u=Array.from(o).map(g=>g==="gray12"?`<pattern id="pattern-gray12-fill" width="3" height="3" patternUnits="userSpaceOnUse"><rect width="3" height="3" fill="${i}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#333":"#000"}"/></pattern>`:g==="gray25"?`<pattern id="pattern-gray25-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#444":"#000"}"/></pattern>`:g==="gray50"?`<pattern id="pattern-gray50-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/></pattern>`:g==="gray75"?`<pattern id="pattern-gray75-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i==="#fff"?"#000":"#fff"}"/><rect x="1" y="1" width="1" height="1" fill="${i}"/></pattern>`:"").join(`
`),f=Array.from(l).map(g=>`<pattern id="pattern-bitmap-${g}-fill" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M0,0 L8,8 M8,0 L0,8" stroke="currentColor" stroke-width="1" shape-rendering="crispEdges"/></pattern>`).join(`
`),d=Array.from(c.values()).map(({color:g,shapeParams:p})=>{const[b,S,M]=p;if(b<=0||S<=0)return"";const x=`${g.replace(/[^a-zA-Z0-9]/g,"")}-${b}-${S}-${M}`;return`
            <marker id="arrow-end-${x}" viewBox="0 0 ${b} ${S}" refX="${b}" refY="${S/2}" markerUnits="userSpaceOnUse" markerWidth="${b}" markerHeight="${S}" orient="auto">
                <path d="M 0,0 L ${b},${S/2} L 0,${S} L ${M},${S/2} z" fill="${g}" />
            </marker>
            <marker id="arrow-start-${x}" viewBox="0 0 ${b} ${S}" refX="0" refY="${S/2}" markerUnits="userSpaceOnUse" markerWidth="${b}" markerHeight="${S}" orient="auto-start-reverse">
                <path d="M ${b},0 L 0,${S/2} L ${b},${S} L ${b-M},${S/2} z" fill="${g}" />
            </marker>`}).join(`
`),m=`<defs>${u}${f}${d}</defs>`,h=e.map(uD).join(`
`);return`<svg width="${t}" height="${n}" viewBox="0 0 ${t} ${n}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        ${m}
        <rect x="0" y="0" width="${t}" height="${n}" fill="${i}" />
        ${h}
    </svg>`}async function dD(e,t,n,i,o,l){return new Promise((c,u)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)return u(new Error("Не вдалося отримати контекст canvas."));const m=n*o,h=i*o;f.width=m,f.height=h;const g=new Image;g.onload=()=>{d.drawImage(g,0,0,m,h);const S=e==="png"?"image/png":"image/jpeg",M=f.toDataURL(S,l/100);c(M)},g.onerror=S=>{console.error("Помилка завантаження SVG в зображення:",S),u(new Error("Не вдалося завантажити SVG для конвертації."))};const p=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p);g.src=b})}const zn=24,ep=(e,t)=>{if(t<=0)return 100;const n=e/t,i=Math.floor(Math.log10(n)),o=Math.pow(10,i),l=n/o;let c;return l<1.5?c=1:l<3.5?c=2:l<7.5?c=5:c=10,c*o},tp=({orientation:e,transform:t,length:n,canvasSize:i})=>{const o=e==="horizontal",l=o?n:zn,c=o?zn:n,u=E.useMemo(()=>{if(n<=0)return[];const f=ep(60,t.scale),d=ep(15,t.scale),m=o?-t.x/t.scale:-t.y/t.scale,h=m+n/t.scale,g=[],p=Math.floor(m/d)*d,b=2e3;let S=0;for(let M=p;M<=h&&S<b;M+=d){S++;const x=o?i.width:i.height;if(M<0||M>x)continue;const y=M*t.scale+(o?t.x:t.y);if(y<0||y>n)continue;const T=d/100,C=Math.abs(M%f)<T;let A,N=null;if(C)A=zn,N=(Math.round(M*100)/100).toString();else{if(d*t.scale<5)continue;A=zn*.3}g.push({value:N,position:y,tickHeight:A})}return g},[n,t,o,i.width,i.height]);return l<=0||c<=0?null:r.jsx("svg",{width:l,height:c,className:"bg-[var(--ruler-bg)]",children:r.jsx("g",{children:u.map(({value:f,position:d,tickHeight:m},h)=>r.jsxs(Mt.Fragment,{children:[r.jsx("line",{x1:o?d:zn-m,y1:o?zn-m:d,x2:o?d:zn,y2:o?zn:d,stroke:"var(--ruler-tick)",strokeWidth:1}),f!==null&&r.jsx("text",{x:o?d+4:zn/2,y:o?zn/2:d+4,fill:"var(--ruler-text)",fontSize:10,textAnchor:o?"start":"middle",dominantBaseline:"middle",children:f})]},`${e}-${d}-${h}`))})})},np=.05,ip=30,fD=({zoomLevel:e,cursorPos:t,onZoomChange:n,onResetZoom:i})=>{const o=g=>Math.round(g*100)/100,l=`${Math.round(e*100)}%`,c=Math.log(np),f=Math.log(ip)-c,d=g=>{if(f===0)return 0;const p=Math.max(np,Math.min(ip,g));return(Math.log(p)-c)/f*100},m=g=>Math.exp(c+f*g/100),h=g=>{const p=m(Number(g.target.value));n(p)};return r.jsxs("div",{className:"bg-[var(--bg-primary)]/80 h-6 flex-shrink-0 px-3 flex items-center justify-between text-xs text-[var(--text-tertiary)] select-none",children:[r.jsx("div",{className:"font-mono w-48",children:t?`X: ${o(t.x)} Y: ${o(t.y)}`:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:d(e),onChange:h,className:"w-24 h-1 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--accent-primary)]",title:`Масштаб: ${l}`}),r.jsx("button",{onClick:i,className:"w-12 text-center hover:text-[var(--text-primary)]",title:"Скинути масштаб до 100%",children:l})]})]})},mD=({onCreateNew:e,onLoadProject:t,recentProjects:n,onOpenRecent:i,onRemoveProject:o,onClearAllProjects:l})=>{const c=u=>{const d=Math.round((new Date().getTime()-u.getTime())/1e3),m=Math.floor(d/86400);return m===0?"Сьогодні":m===1?"Вчора":m<7?`${m} дні тому`:u.toLocaleDateString()};return r.jsx("div",{className:"w-full h-full bg-[var(--bg-app)] rounded-lg flex flex-col p-8 sm:p-12 lg:p-16 overflow-y-auto",children:r.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[r.jsxs("header",{className:"text-center mb-12 animate-fade-in-down",children:[r.jsx("h1",{className:"text-6xl md:text-7xl font-extrabold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"ВереTkа"}),r.jsxs("div",{className:"mt-4 max-w-3xl mx-auto",children:[r.jsx("p",{className:"text-xl md:text-2xl text-[var(--text-secondary)] font-medium italic",children:"Перетворюйте ваші малюнки на готовий код для Canvas Tkinter"}),r.jsx("hr",{className:"my-4 border-[var(--border-secondary)] w-1/2 mx-auto"}),r.jsxs("p",{className:"text-md text-[var(--text-tertiary)] mt-2",children:["Простий векторний редактор ",r.jsx("br",{}),"із функцією швидкої генерації коду Python (Tkinter) на основі ваших малюнків"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16 animate-fade-in-up",children:[r.jsxs("button",{onClick:e,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[r.jsx(k1,{size:32,className:"text-indigo-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Створити новий проєкт"}),r.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Почати з чистого полотна та нових ідей."})]})]}),r.jsxs("button",{onClick:t,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[r.jsx(_1,{size:32,className:"text-purple-400 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Завантажити проєкт"}),r.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Відкрити існуючий файл .vec.json."})]})]})]}),r.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(N1,{size:20,className:"text-[var(--text-tertiary)]"}),r.jsx("h2",{className:"text-xl font-semibold text-[var(--text-secondary)]",children:"Останні проєкти"})]}),n.length>0&&r.jsx("button",{onClick:l,className:"text-xs text-[var(--destructive-text)] hover:underline",children:"Очистити список"})]}),n.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((u,f)=>r.jsxs("div",{className:"w-full flex flex-col rounded-lg bg-[var(--bg-primary)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-200 ease-in-out text-left group relative",children:[r.jsx("button",{onClick:d=>{d.stopPropagation(),o(u)},className:"absolute top-1 right-1 z-10 p-1 rounded-full bg-[var(--bg-secondary)]/50 text-[var(--text-tertiary)] hover:bg-[var(--destructive-bg)] hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Видалити зі списку",children:r.jsx(Qt,{size:14})}),r.jsxs("button",{onClick:()=>i(u),className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"w-full h-32 bg-[var(--bg-secondary)] flex items-center justify-center rounded-t-lg overflow-hidden",children:u.thumbnail?r.jsx("img",{src:u.thumbnail,alt:`Ескіз ${u.name}`,className:"w-full h-full object-contain"}):r.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:"Немає ескізу"})}),r.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[r.jsx("p",{className:"font-semibold text-[var(--text-primary)] break-words line-clamp-2",title:u.name.replace(/\.vec\.json$/,""),children:u.name.replace(/\.vec\.json$/,"")}),r.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-2",children:["Відкрито: ",c(new Date(u.lastOpened))]})]})]})]},u.name+f))}):r.jsxs("div",{className:"text-center text-[var(--text-tertiary)] py-10 border-2 border-dashed border-[var(--border-primary)] rounded-lg",children:[r.jsx("p",{children:"Список останніх проєктів порожній."}),r.jsx("p",{className:"text-xs mt-1",children:"Почніть роботу, створивши або завантаживши проєкт."})]})]})]})})},hD="VeretkaDB",gD=1,Gn="recentProjects",pD=10;let hu=null;const Hs=()=>(hu||(hu=new Promise((e,t)=>{const n=indexedDB.open(hD,gD);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const i=n.result;i.objectStoreNames.contains(Gn)||i.createObjectStore(Gn,{keyPath:"name"})}})),hu),yD=()=>{const[e,t]=E.useState([]),n=E.useCallback(async()=>{try{const m=(await Hs()).transaction(Gn,"readonly").objectStore(Gn).getAll();m.onsuccess=()=>{const h=m.result;h.sort((g,p)=>new Date(p.lastOpened).getTime()-new Date(g.lastOpened).getTime()),t(h)},m.onerror=()=>{console.error("Could not load recent projects from DB:",m.error)}}catch(u){console.error("Failed to open IndexedDB:",u)}},[]);E.useEffect(()=>{typeof indexedDB<"u"&&n()},[n]);const i=E.useCallback(async(u,f)=>{if(!(!u||typeof indexedDB>"u"))try{const m=(await Hs()).transaction(Gn,"readwrite"),h=m.objectStore(Gn),g={name:u.name,handle:u,lastOpened:new Date,thumbnail:f};h.put(g);const p=h.getAll();p.onsuccess=()=>{if(p.result.length>pD){const b=p.result;b.sort((M,x)=>new Date(M.lastOpened).getTime()-new Date(x.lastOpened).getTime());const S=b[0].name;h.delete(S)}},m.oncomplete=()=>{n()}}catch(d){console.error("Failed to add recent project:",d)}},[n]),o=E.useCallback(async u=>{if(!(typeof indexedDB>"u"))try{const d=(await Hs()).transaction(Gn,"readwrite");d.objectStore(Gn).delete(u),d.oncomplete=()=>{n()}}catch(f){console.error("Failed to remove recent project:",f)}},[n]),l=E.useCallback(async()=>{if(!(typeof indexedDB>"u"))try{const f=(await Hs()).transaction(Gn,"readwrite");f.objectStore(Gn).clear(),f.oncomplete=()=>{n()}}catch(u){console.error("Failed to clear recent projects:",u)}},[n]),c=E.useCallback(async u=>{try{if(await u.handle.queryPermission({mode:"read"})!=="granted"&&await u.handle.requestPermission({mode:"read"})!=="granted")throw new Error("Permission to read file was denied.");const d=await(await u.handle.getFile()).text();return await i(u.handle,u.thumbnail),d}catch(f){throw console.error(`Failed to open recent project ${u.name}:`,f),await o(u.name),f}},[i,o]);return{projects:e,addRecentProject:i,openRecentProject:c,removeRecentProject:o,clearAllProjects:l}},xD=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,l]=E.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:r.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[r.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти код як..."}),r.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:r.jsx(Qt,{})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs(ie,{children:[r.jsx(se,{htmlFor:"codeFileName",children:"Назва файлу:"}),r.jsxs("div",{className:"flex items-center w-full",children:[r.jsx("input",{id:"codeFileName",type:"text",value:o,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-l px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0}),r.jsx("span",{className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] px-3 py-1 rounded-r border border-l-0 border-[var(--border-secondary)]",children:".py"})]})]})}),r.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),r.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},vD=({shape:e,viewTransform:t,onUpdateText:n,onStopEditing:i})=>{const o=E.useRef(null),[l]=E.useState(e.text);E.useEffect(()=>{const N=o.current;N&&(N.focus(),N.select(),N.style.height="auto",N.style.height=`${N.scrollHeight}px`)},[]);const c=N=>{n(N.target.value),N.target.style.height="auto",N.target.style.height=`${N.target.scrollHeight}px`},u=N=>{N.key==="Escape"&&(n(l),i())},f=()=>{i()},d=E.useMemo(()=>Zi({...e}),[e]);if(!d)return null;const{scale:m,x:h,y:g}=t,p={x:d.x-e.x,y:d.y-e.y},b=e.rotation*Math.PI/180,S=Math.cos(b),M=Math.sin(b),x={x:p.x*S-p.y*M,y:p.x*M+p.y*S},y={x:e.x*m+h,y:e.y*m+g},T=y.x+x.x*m,C=y.y+x.y*m,A={position:"absolute",left:`${T}px`,top:`${C}px`,width:`${d.width*m}px`,height:`${Math.max(d.height*m,e.fontSize*1.2*m)}px`,padding:0,margin:0,border:"none",outline:"1px dashed var(--selection-stroke)",overflow:"hidden",resize:"none",backgroundColor:"transparent",color:e.fill,lineHeight:1.2,fontFamily:oc(e.font),fontSize:`${e.fontSize*m}px`,fontWeight:e.weight,fontStyle:e.slant==="italic"?"italic":"normal",textAlign:e.justify,transform:`rotate(${e.rotation}deg)`,transformOrigin:"0 0",whiteSpace:"pre-wrap",cursor:"text",zIndex:10};return r.jsx("textarea",{ref:o,value:e.text,onChange:c,onBlur:f,onKeyDown:u,style:A,className:"allow-selection"})},fo=24,CD=30,TD=1024,bD=(e,t)=>{E.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},ur=()=>{const[e,t]=E.useState(!1),n=E.useRef(null),i=E.useCallback(()=>t(!1),[]);return bD(n,i),{isOpen:e,toggle:()=>t(c=>!c),close:i,wrapperProps:{ref:n,onMouseLeave:i}}},SD=Mt.memo(e=>{const{isOpen:t,toggle:n,close:i,wrapperProps:o}=ur(),{isOpen:l,toggle:c,close:u,wrapperProps:f}=ur(),{isOpen:d,toggle:m,close:h,wrapperProps:g}=ur(),{isOpen:p,toggle:b,close:S,wrapperProps:M}=ur(),{isOpen:x,toggle:y,close:T,wrapperProps:C}=ur(),A=(V,K)=>{V(),K()},N=({onClick:V,children:K,disabled:U,shortcut:I,selected:ee})=>r.jsxs("button",{onClick:V,disabled:U,className:`flex justify-between items-center w-full px-3 py-1.5 text-left text-sm ${ee?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed`,children:[r.jsx("span",{children:K}),I&&r.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:I})]}),R=({checked:V,onChange:K,children:U})=>r.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[r.jsx("input",{type:"checkbox",checked:V,onChange:I=>K(I.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),r.jsx("span",{children:U})]});return r.jsxs("nav",{className:"bg-[var(--bg-primary)] text-sm font-medium flex items-center px-2 select-none h-8 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center",children:[e.isProjectActive&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:e.onGoHome,title:"На головну",className:"px-2 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:r.jsx(j1,{size:18})}),r.jsx("div",{className:"w-px h-5 bg-[var(--border-secondary)] mx-1"})]}),r.jsxs("div",{...o,className:"relative",children:[r.jsx("button",{onClick:n,className:`px-3 py-1 rounded-md ${t?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Файл"}),t&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>A(e.onNewProject,i),children:"Новий проєкт..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>A(e.onSaveProject,i),disabled:!e.canSave,shortcut:"Ctrl+S",children:"Зберегти"}),r.jsx(N,{onClick:()=>A(e.onSaveProjectAs,i),disabled:!e.isProjectActive,children:"Зберегти як..."}),r.jsx(N,{onClick:()=>A(e.onLoadProject,i),children:"Завантажити проєкт..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>A(e.onExport,i),disabled:!e.isProjectActive,children:"Експортувати як..."}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),e.showGenerateButton&&r.jsx(N,{onClick:()=>A(e.onGenerate,i),disabled:!e.isProjectActive,children:"Згенерувати код..."})]})]}),r.jsxs("div",{...f,className:"relative",children:[r.jsx("button",{onClick:c,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${l?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Редагувати"}),l&&e.isProjectActive&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>A(e.onUndo,u),disabled:!e.canUndo,shortcut:"Ctrl+Z",children:"Скасувати"}),r.jsx(N,{onClick:()=>A(e.onRedo,u),disabled:!e.canRedo,shortcut:"Ctrl+Y",children:"Повернути"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>A(e.onDuplicate,u),disabled:!e.isShapeSelected,shortcut:"Ctrl+D",children:"Дублювати"}),r.jsx(N,{onClick:()=>A(e.onDelete,u),disabled:!e.isShapeSelected,shortcut:"Del",children:"Видалити"})]})]}),r.jsxs("div",{...g,className:"relative",children:[r.jsx("button",{onClick:m,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${d?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Об'єкт"}),d&&e.isProjectActive&&r.jsx("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:r.jsx(N,{onClick:()=>A(e.onConvertToPath,h),disabled:!e.canConvertToPath,children:"Перетворити на контур"})})]}),r.jsxs("div",{...M,className:"relative",children:[r.jsx("button",{onClick:b,className:`px-3 py-1 rounded-md ${p?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Вигляд"}),p&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>A(e.onFitCanvasToView,S),disabled:!e.isProjectActive,children:"Показати все полотно"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(R,{checked:e.showGrid,onChange:e.setShowGrid,children:"Сітка"}),r.jsx(R,{checked:e.snapToGrid,onChange:e.setSnapToGrid,children:"Прив'язка до сітки"}),r.jsx(R,{checked:e.showAxes,onChange:e.setShowAxes,children:"Лінійки"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx("div",{className:"px-3 py-1.5 text-xs text-[var(--text-tertiary)]",children:"Тема"}),r.jsx(N,{onClick:()=>{e.setTheme("dark"),S()},selected:e.theme==="dark",children:"Темна"}),r.jsx(N,{onClick:()=>{e.setTheme("light"),S()},selected:e.theme==="light",children:"Світла"})]})]}),r.jsxs("div",{...C,className:"relative",children:[r.jsx("button",{onClick:y,className:`px-3 py-1 rounded-md ${x?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Довідка"}),x&&r.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[r.jsx(N,{onClick:()=>A(e.onOpenAbout,T),children:"Про редактор"}),r.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),r.jsx(N,{onClick:()=>A(e.onOpenHelp,T),children:"Довідка"}),r.jsx(N,{onClick:()=>{window.open("https://github.com/v-d-b/veretka/issues/new","_blank"),T()},children:"Залишити відгук"})]})]})]}),r.jsx("div",{className:"flex-grow flex justify-center items-center text-sm text-[var(--text-tertiary)] truncate px-4",children:r.jsx("span",{className:"truncate",title:e.projectName,children:e.isProjectActive?e.projectName:""})}),r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"relative",children:r.jsx("button",{onClick:e.onOpenSettings,className:"px-3 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:"Налаштування"})})})]})}),wD=Mt.memo(({activeTool:e,setActiveTool:t})=>{const i=[{name:"rectangle",label:"Прямокутник",icon:r.jsx(cv,{size:18}),group:1},{name:"square",label:"Квадрат",icon:r.jsx(av,{size:18}),group:1},{name:"ellipse",label:"Еліпс",icon:r.jsx(dv,{size:18}),group:1},{name:"circle",label:"Коло",icon:r.jsx(uv,{size:18}),group:1},{name:"line",label:"Лінія",icon:r.jsx(fv,{size:18}),group:2},{name:"polyline",label:"Ламана",icon:r.jsx(mv,{size:18}),group:2},{name:"bezier",label:"Крива Без'є",icon:r.jsx(hv,{size:18}),group:2},{name:"arc",label:"Дуга",icon:r.jsx(wv,{size:18}),group:2},{name:"pieslice",label:"Сектор",icon:r.jsx(bv,{size:18}),group:2},{name:"chord",label:"Сегмент",icon:r.jsx(Sv,{size:18}),group:2},{name:"polygon",label:"Багатокутник",icon:r.jsx(gv,{size:18}),group:3},{name:"star",label:"Зірка",icon:r.jsx(Ev,{size:18}),group:3},{name:"triangle",label:"Трикутник",icon:r.jsx(yv,{size:18}),group:3},{name:"right-triangle",label:"Прямокутний трикутник",icon:r.jsx(xv,{size:18}),group:3},{name:"rhombus",label:"Ромб",icon:r.jsx(vv,{size:18}),group:3},{name:"trapezoid",label:"Трапеція",icon:r.jsx(Cv,{size:18}),group:3},{name:"parallelogram",label:"Паралелограм",icon:r.jsx(Tv,{size:18}),group:3},{name:"text",label:"Текст",icon:r.jsx(Mv,{size:18}),group:3},{name:"pencil",label:"Олівець",icon:r.jsx(pv,{size:18}),group:4},{name:"image",label:"Зображення",icon:r.jsx(Av,{size:18}),group:4,disabled:!0},{name:"bitmap",label:"Bitmap",icon:r.jsx(kv,{size:18}),group:4,disabled:!0}];return r.jsx("aside",{className:"bg-[var(--bg-primary)] rounded-lg p-1 flex flex-col items-center",children:r.jsx("div",{className:"grid grid-cols-10 gap-0.5 w-full",role:"group","aria-label":"Інструменти",children:i.map((o,l)=>{const c=l>0?i[l-1].group:-1,u=o.group!==c&&l>0;return r.jsxs(Mt.Fragment,{children:[u&&r.jsx("div",{className:"col-span-10 h-px bg-[var(--border-secondary)] my-0.5"}),r.jsx("button",{onClick:()=>t(o.name),"aria-label":o.label,title:o.label,disabled:o.disabled,className:`p-1 rounded-md transition-colors duration-200 aspect-square flex items-center justify-center ${e===o.name?"bg-[var(--accent-primary)] text-[var(--accent-text)] shadow-md":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--icon-hover-text)]"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent`,children:o.icon})]},o.name)})})})}),ED=Mt.memo(e=>{const{isGenerating:t,hasShapes:n,onUndo:i,onRedo:o,canUndo:l,canRedo:c,onDuplicate:u,isShapeSelected:f,onOpenMobileLeft:d,onOpenMobileRight:m,theme:h,setTheme:g,selectedShape:p,updateShape:b,setShapePreview:S,cancelShapePreview:M,activeTool:x,setActiveTool:y,onGenerate:T,showGenerateButton:C,onClear:A}=e,N={"Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],Serif:["Times New Roman","Georgia","Garamond"],Monospace:["Courier New","Consolas","Lucida Console","Monaco"]},R=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],V=({label:I,htmlFor:ee,children:be})=>r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("label",{htmlFor:ee,className:"text-sm font-medium text-[var(--text-secondary)] whitespace-nowrap",children:[I,":"]}),be]}),K=()=>{const{drawMode:I,setDrawMode:ee,isFillEnabled:be,setIsFillEnabled:_e,fillColor:ae,setFillColor:te,setPreviewFillColor:fe,isStrokeEnabled:he,setIsStrokeEnabled:W,strokeColor:O,setStrokeColor:re,setPreviewStrokeColor:Ce,strokeWidth:ke,setStrokeWidth:ye,numberOfSides:we,setNumberOfSides:Re,textColor:Z,setTextColor:B,setPreviewTextColor:J,textFont:Te,setTextFont:v,textFontSize:G,setTextFontSize:Y}=e,pe=["rectangle","square","circle","ellipse","triangle","right-triangle","polygon","star","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(x),me=!["select","edit-points","line","pencil","polyline","bezier","image","bitmap","text"].includes(x),xe=!["select","edit-points","image","bitmap","text"].includes(x),Le=["polygon","star"].includes(x),Je=x==="text";return r.jsxs(r.Fragment,{children:[pe&&r.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-app)] p-1 rounded-lg",children:[r.jsx("button",{title:"Малювати від кута",onClick:()=>ee("corner"),className:`p-1.5 rounded ${I==="corner"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(u1,{})}),r.jsx("button",{title:"Малювати від центру",onClick:()=>ee("center"),className:`p-1.5 rounded ${I==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(d1,{})})]}),me&&r.jsxs(V,{label:"Заливка",htmlFor:"fillColor",children:[r.jsx("input",{id:"fillEnable",type:"checkbox",checked:be,onChange:Ee=>_e(Ee.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:"fillColor",value:ae,onChange:Ee=>{te(Ee),fe(null)},onPreview:fe,onCancel:()=>fe(null),disabled:!be})]}),xe&&r.jsxs(r.Fragment,{children:[r.jsxs(V,{label:"Контур",htmlFor:"strokeColor",children:[r.jsx("input",{id:"strokeEnable",type:"checkbox",checked:he,onChange:Ee=>W(Ee.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:"strokeColor",value:O,onChange:Ee=>{re(Ee),Ce(null)},onPreview:Ce,onCancel:()=>Ce(null),disabled:!he})]}),r.jsx(V,{label:"Товщина",htmlFor:"strokeWidth",children:r.jsx("input",{id:"strokeWidth",type:"number",min:"1",max:"100",value:ke,onChange:Ee=>ye(Number(Ee.target.value)),disabled:!he,className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),Le&&r.jsx(V,{label:"Сторони",htmlFor:"sides",children:r.jsx("input",{id:"sides",type:"number",min:"3",max:"50",value:we,onChange:Ee=>Re(Number(Ee.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),Je&&r.jsxs(r.Fragment,{children:[r.jsx(V,{label:"Колір",htmlFor:"textColor",children:r.jsx(Gt,{id:"textColor",value:Z,onChange:Ee=>{B(Ee),J(null)},onPreview:J,onCancel:()=>J(null)})}),r.jsx(V,{label:"Шрифт",htmlFor:"textFont",children:r.jsxs(Cn,{id:"textFont",value:Te,onChange:v,className:"w-32 py-0.5",children:[Object.entries(N).map(([Ee,Ut])=>r.jsx("optgroup",{label:Ee,children:Ut.map(tn=>r.jsx("option",{value:tn,children:tn},tn))},Ee)),r.jsx("optgroup",{label:"Шрифти Tkinter",children:R.map(Ee=>r.jsx("option",{value:Ee,children:Ee},Ee))})]})}),r.jsx(V,{label:"Розмір",htmlFor:"textFontSize",children:r.jsx("input",{id:"textFontSize",type:"number",min:"1",value:G,onChange:Ee=>Y(Number(Ee.target.value)),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]})]})},U=()=>{if(!p)return null;const I=p,ee=O=>{b({...p,...O})},be=O=>{ee(O?{fill:e.fillColor}:{fill:"none"})},_e=O=>{ee(O?{stroke:e.strokeColor}:{stroke:"none"})},ae="fill"in p&&p.type!=="text",te="stroke"in p&&"strokeWidth"in p&&!["image","bitmap","text"].includes(p.type),fe=p.type==="polygon"||p.type==="star",he=p.type==="text",W=O=>Math.round(O*100)/100;return r.jsxs(r.Fragment,{children:[ae&&r.jsxs(V,{label:"Заливка",htmlFor:`${p.id}-ctx-fill`,children:[r.jsx("input",{type:"checkbox",checked:p.fill!=="none",onChange:O=>be(O.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:`${p.id}-ctx-fill`,value:p.fill==="none"?"#000000":p.fill,onChange:O=>ee({fill:O}),onPreview:O=>S(p.id,{fill:O}),onCancel:M,disabled:p.fill==="none"})]}),te&&r.jsxs(r.Fragment,{children:[r.jsxs(V,{label:"Контур",htmlFor:`${p.id}-ctx-stroke`,children:[r.jsx("input",{type:"checkbox",checked:p.stroke!=="none",onChange:O=>_e(O.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),r.jsx(Gt,{id:`${p.id}-ctx-stroke`,value:p.stroke==="none"?"#ffffff":p.stroke,onChange:O=>ee({stroke:O}),onPreview:O=>S(p.id,{stroke:O}),onCancel:M,disabled:p.stroke==="none"})]}),r.jsx(V,{label:"Товщина",htmlFor:`${p.id}-ctx-strokeWidth`,children:r.jsx("input",{id:`${p.id}-ctx-strokeWidth`,type:"number",min:"0",value:p.strokeWidth,onChange:O=>ee({strokeWidth:Number(O.target.value)}),disabled:p.stroke==="none",className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})})]}),fe&&r.jsx(V,{label:"Сторони",htmlFor:`${p.id}-ctx-sides`,children:r.jsx("input",{id:`${p.id}-ctx-sides`,type:"number",min:"3",max:"50",value:p.sides,onChange:O=>ee({sides:Number(O.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),he&&r.jsxs(r.Fragment,{children:[r.jsx(V,{label:"Колір",htmlFor:`${I.id}-ctx-fill`,children:r.jsx(Gt,{id:`${I.id}-ctx-fill`,value:I.fill,onChange:O=>ee({fill:O}),onPreview:O=>S(I.id,{fill:O}),onCancel:M})}),r.jsx(V,{label:"Шрифт",htmlFor:`${I.id}-ctx-font`,children:r.jsxs(Cn,{id:`${I.id}-ctx-font`,value:I.font,onChange:O=>ee({font:O}),className:"w-32 py-0.5",children:[Object.entries(N).map(([O,re])=>r.jsx("optgroup",{label:O,children:re.map(Ce=>r.jsx("option",{value:Ce,children:Ce},Ce))},O)),r.jsx("optgroup",{label:"Шрифти Tkinter",children:R.map(O=>r.jsx("option",{value:O,children:O},O))})]})}),r.jsx(V,{label:"Розмір",htmlFor:`${I.id}-ctx-fontSize`,children:r.jsx("input",{id:`${I.id}-ctx-fontSize`,type:"number",min:"1",value:W(I.fontSize),onChange:O=>ee({fontSize:Number(O.target.value)}),className:"w-16 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-0.5 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})}),r.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[r.jsx("button",{title:"Виразний",onClick:()=>ee({weight:I.weight==="bold"?"normal":"bold"}),className:`p-1.5 rounded ${I.weight==="bold"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(I1,{size:16})}),r.jsx("button",{title:"Курсив",onClick:()=>ee({slant:I.slant==="italic"?"roman":"italic"}),className:`p-1.5 rounded ${I.slant==="italic"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(L1,{size:16})}),r.jsx("button",{title:"Підкреслений",onClick:()=>ee({underline:!I.underline}),className:`p-1.5 rounded ${I.underline?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(U1,{size:16})}),r.jsx("button",{title:"Закреслений",onClick:()=>ee({overstrike:!I.overstrike}),className:`p-1.5 rounded ${I.overstrike?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(P1,{size:16})})]}),r.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[r.jsx("button",{title:"Ліворуч",onClick:()=>ee({justify:"left"}),className:`p-1.5 rounded ${I.justify==="left"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(V1,{size:16})}),r.jsx("button",{title:"Центр",onClick:()=>ee({justify:"center"}),className:`p-1.5 rounded ${I.justify==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx($1,{size:16})}),r.jsx("button",{title:"Праворуч",onClick:()=>ee({justify:"right"}),className:`p-1.5 rounded ${I.justify==="right"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:r.jsx(H1,{size:16})})]})]})]})};return r.jsxs("div",{className:"bg-[var(--bg-primary)] p-2 flex-shrink-0 flex flex-wrap items-center justify-between gap-x-3 gap-y-2 select-none",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{title:"Скасувати (Ctrl+Z)",onClick:i,disabled:!l,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(s1,{})}),r.jsx("button",{title:"Повернути (Ctrl+Y)",onClick:o,disabled:!c,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(a1,{})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),r.jsx("button",{title:"Вибрати (V)",onClick:()=>y("select"),className:`p-2 rounded-md ${x==="select"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:r.jsx(rv,{})}),r.jsx("button",{title:"Редагувати вузли (A)",onClick:()=>y("edit-points"),className:`p-2 rounded-md ${x==="edit-points"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:r.jsx(sv,{})}),r.jsx("button",{title:"Дублювати (Ctrl+D)",onClick:u,disabled:!f,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:r.jsx(_v,{})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),r.jsx("div",{className:"md:hidden flex items-center gap-2",children:r.jsx("button",{onClick:d,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:r.jsx(f1,{})})})]}),r.jsx("div",{className:"flex items-center gap-x-2 gap-y-2 flex-wrap",children:p?r.jsx(U,{}):r.jsx(K,{})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>g(h==="dark"?"light":"dark"),title:"Змінити тему",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:h==="dark"?r.jsx(w1,{}):r.jsx(E1,{})}),r.jsx("div",{className:"md:hidden flex items-center gap-2",children:r.jsx("button",{onClick:m,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:r.jsx(md,{})})}),r.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1 md:hidden"}),r.jsxs("button",{onClick:A,disabled:!n,className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[r.jsx(lc,{size:16}),r.jsx("span",{children:"Очистити"})]}),C&&r.jsxs("button",{onClick:T,disabled:t||!n,className:"flex items-center gap-2 px-4 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[r.jsx(md,{}),r.jsx("span",{children:t?"Генерація...":"Згенерувати код"})]})]})]})});function MD(){const{state:e,setState:t,undo:n,redo:i,canUndo:o,canRedo:l,reset:c}=Z1([]),[u,f]=E.useState("Новий малюнок. ВереTkа"),[d,m]=E.useState("select"),[h,g]=E.useState(null),[p,b]=E.useState(null),[S,M]=E.useState(!1),[x,y]=E.useState([]),[T,C]=E.useState(!1),[A,N]=E.useState([]),[R,V]=E.useState(null),[K,U]=E.useState("corner"),[I,ee]=E.useState(!1),[be,_e]=E.useState(!0),[ae,te]=E.useState("#4f46e5"),[fe,he]=E.useState("#000000"),[W,O]=E.useState(1),[re,Ce]=E.useState(5),[ke,ye]=E.useState("#000000"),[we,Re]=E.useState(null),[Z,B]=E.useState("Arial"),[J,Te]=E.useState(24),[v,G]=E.useState([]),[Y,pe]=E.useState(!1),[me,xe]=E.useState(null),[Le,Je]=E.useState(null),[Ee,Ut]=E.useState(null),[tn,Io]=E.useState(!1),[Fl,Zn]=E.useState(!1),[cc,us]=E.useState("canvas"),[uc,ql]=E.useState(!1),[dc,Lo]=E.useState(!1),[Ol,to]=E.useState(!1),[Pf,Yl]=E.useState(!1),[ds,fs]=E.useState(!1),[nn,ms]=E.useState(!1),[hs,no]=E.useState(!1),[vi,gs]=E.useState(null),[Ze,Jl]=E.useState(800),[w,k]=E.useState(600),[z,ve]=E.useState("#ffffff"),[ne,j]=E.useState("c"),[$,Q]=E.useState(!0),[X,P]=E.useState(10),[ue,L]=E.useState(!0),[le,de]=E.useState(1),[Ue,Jt]=E.useState(!0),[tt,on]=E.useState(!0),[Pt,kt]=E.useState(!0),[st,ln]=E.useState(!0),[zt,ft]=E.useState(!0),[Qe,Ie]=E.useState(!0),[Me,nt]=E.useState("local"),[it,Ct]=E.useState(!0),[ht,Vt]=E.useState(!0),[io,oo]=E.useState({}),[Qn,lo]=E.useState(null),[Hn,fc]=E.useState(null),[ps,ys]=E.useState(null),[Rn,Uo]=E.useState({scale:1,x:50,y:50}),[mc,hc]=E.useState(null),Po=E.useRef(null),[pn,gc]=E.useState({width:0,height:0}),[Ci,Vf]=E.useState(!1),[p0,$f]=E.useState(!1),[y0,pc]=E.useState(null),Hf=E.useRef(null),Bf=E.useRef(null),[Ti,yc]=E.useState("dark"),[Vo,$o]=E.useState(null),[xs,ro]=E.useState(null),[rn,xc]=E.useState(!1),{projects:vc,addRecentProject:so,openRecentProject:zf,removeRecentProject:Gf,clearAllProjects:Ff}=yD(),[qf,x0]=E.useState(!1);E.useEffect(()=>{const _=()=>{x0(window.innerWidth<TD)};return _(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]),E.useEffect(()=>{document.body.className=`${Ti}-theme bg-[var(--bg-app)] text-[var(--text-primary)] font-sans`},[Ti]),E.useEffect(()=>{Me==="gemini"&&Ct(!1)},[Me]);const Of=E.useCallback((_,D,q,H)=>{const oe=Qg(_,D,q,H);return`data:image/svg+xml;base64,${btoa(oe)}`},[]),Dn=E.useCallback((_,D)=>JSON.stringify({projectName:_,shapes:D,canvasSettings:{width:Ze,height:w,bgColor:z,varName:ne},uiSettings:{theme:Ti,showGrid:$,gridSize:X,snapToGrid:ue,gridSnapStep:le,showAxes:tt,showCursorCoords:Pt,showRotationAngle:st,showLineNumbers:zt,showTkinterNames:Ue,generatorType:Me,highlightCodeOnSelection:it,autoGenerateComments:ht,showComments:Qe}}),[Ze,w,z,ne,Ti,$,X,ue,le,tt,Pt,st,zt,Ue,Me,it,ht,Qe]),bi=E.useRef(""),[ao,v0]=E.useState(!1);E.useEffect(()=>{if(!rn)return;const _=Dn(u,e);bi.current===""&&(bi.current=_),v0(_!==bi.current)},[u,e,Dn,rn]),E.useEffect(()=>{const _=D=>{ao&&(D.preventDefault(),D.returnValue="")};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[ao]);const C0=E.useMemo(()=>Object.keys(io).length===0?e:e.map(_=>{const D=io[_.id];return D?{..._,...D}:_}),[e,io]),Ho=E.useCallback(()=>{oo({})},[]);E.useEffect(()=>{Ho()},[h,Ho]);const Si=E.useCallback(()=>{if(pn.width===0||pn.height===0)return;const _=10,D=tt?fo:0,q=pn.width-D,H=pn.height-D;if(q<=0||H<=0)return;const oe=q-_*2,ge=H-_*2,Ne=oe/Ze,ze=ge/w,yt=Math.min(Ne,ze,CD),ei=Ze*yt,jn=w*yt,zo=(q-ei)/2,kc=(H-jn)/2;Uo({scale:yt,x:zo,y:kc})},[Ze,w,pn,tt]),Yf=E.useRef(!1);E.useEffect(()=>{!Yf.current&&pn.width>0&&pn.height>0&&(Si(),Yf.current=!0)},[pn,Si]),E.useEffect(()=>{const _=Po.current;if(!_||!rn)return;const D=new ResizeObserver(q=>{for(let H of q)gc({width:H.contentRect.width,height:H.contentRect.height})});return D.observe(_),()=>D.disconnect()},[rn]);const Pe=(_,D="info",q=3e3)=>{Je({message:_,type:D}),setTimeout(()=>Je(null),q)},Xl=E.useCallback(_=>{t(D=>[...D,_]),_.type!=="polyline"&&_.type!=="bezier"&&(g(_.id),m("select"))},[t]),wi=E.useCallback(_=>{Ho(),t(D=>D.map(q=>q.id===_.id?_:q)),_.id===h&&_.state!=="normal"&&(g(null),V(null))},[t,h,Ho]),Jf=E.useCallback((_,D)=>{oo({[_]:D})},[]),Bo=E.useCallback(_=>{t(D=>D.filter(q=>q.id!==_)),h===_&&(g(null),V(null))},[h,t]),Cc=E.useCallback((_,D)=>{t(q=>q.map(H=>{if(H.id===_&&"points"in H&&H.points.length>2){const oe=[...H.points];switch(oe.splice(D,1),H.type){case"pencil":case"polyline":case"bezier":return{...H,points:oe};default:return H}}return H})),V(null)},[t]),T0=E.useCallback((_,D)=>{const q=H=>{if(["polyline","bezier","line","pencil"].includes(H.type))return H;const oe=_f(H);if(!oe)return null;const ge=H.type==="arc"?H.style!=="arc":!0,Ne={id:H.id,name:void 0,type:"polyline",points:oe,isClosed:ge,rotation:"rotation"in H?H.rotation:0,state:H.state,stroke:H.stroke,strokeWidth:H.strokeWidth,fill:"fill"in H&&typeof H.fill=="string"&&ge?H.fill:"none",joinstyle:"joinstyle"in H&&H.joinstyle?H.joinstyle:void 0};return Ne.name=qt(Ne),Ne};t(H=>{const oe=H.findIndex(kc=>kc.id===_);if(oe===-1)return H;let ge=H[oe],Ne=q(ge);if(!Ne)return H;const ze=[...Ne.points],yt=ze[D-1],ei=Ne.isClosed?ze[D%ze.length]:ze[D];if(!yt||!ei)return H;const jn={x:(yt.x+ei.x)/2,y:(yt.y+ei.y)/2};ze.splice(D,0,jn),Ne.points=ze;const zo=[...H];return zo[oe]=Ne,zo}),V(D)},[t]),Wl=E.useCallback(_=>{const D=e.find(oe=>oe.id===_);if(!D)return;let q;switch(D.type){case"line":q={...D,points:[{...D.points[0]},{...D.points[1]}]};break;case"pencil":case"polyline":case"bezier":q={...D,points:D.points.map(oe=>({...oe}))};break;default:q={...D}}q.id=new Date().toISOString();const H=10;switch(q.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":q.x+=H,q.y+=H;break;case"ellipse":case"polygon":case"star":q.cx+=H,q.cy+=H;break;case"line":q.points[0].x+=H,q.points[0].y+=H,q.points[1].x+=H,q.points[1].y+=H;break;case"pencil":case"polyline":case"bezier":q.points=q.points.map(oe=>({x:oe.x+H,y:oe.y+H}));break}t(oe=>[...oe,q]),g(q.id),Pe("Фігуру дубльовано.")},[e,t]),b0=E.useCallback((_,D)=>{t(q=>{const H=q.findIndex(Ne=>Ne.id===_);if(H===-1)return q;const oe=[...q],ge=D==="up"?H+1:H-1;return ge<0||ge>=oe.length?q:([oe[H],oe[ge]]=[oe[ge],oe[H]],oe)})},[t]),S0=E.useCallback((_,D,q)=>{t(H=>{const oe=H.findIndex(jn=>jn.id===_),ge=H.findIndex(jn=>jn.id===D);if(oe===-1||ge===-1||oe===ge)return H;const Ne=[...H],[ze]=Ne.splice(oe,1),yt=Ne.findIndex(jn=>jn.id===D),ei=q==="top"?yt+1:yt;return Ne.splice(ei,0,ze),Ne})},[t]),Tc=E.useCallback(_=>{const D=e.find(ze=>ze.id===_);if(!D||["polyline","bezier","pencil","line","text","image","bitmap"].includes(D.type))return;const q=Kn(D);if(!q)return;const H=D.type!=="arc"||D.style!=="arc",oe={id:D.id,name:void 0,type:"polyline",points:q,isClosed:H,rotation:0,state:D.state,stroke:D.stroke,strokeWidth:D.strokeWidth,fill:"fill"in D&&typeof D.fill=="string"&&H?D.fill:"none",joinstyle:"joinstyle"in D&&D.joinstyle?D.joinstyle:void 0,dash:"dash"in D?D.dash:void 0,dashoffset:"dashoffset"in D?D.dashoffset:void 0,smooth:"smooth"in D?D.smooth:void 0,stipple:"stipple"in D?D.stipple:void 0,capstyle:void 0,arrow:void 0,arrowshape:void 0,activeStroke:void 0,isAspectRatioLocked:"isAspectRatioLocked"in D?D.isAspectRatioLocked:!1},ge=D.name,Ne=!ge||ja(ge);oe.name=Ne?qt(oe):ge,wi(oe),m("edit-points"),Pe("Фігуру перетворено на контур.")},[e,wi]),Xf=E.useCallback(_=>{g(_),M(!1),y([]),C(!1),N([]),V(null),(_===null&&d==="edit-points"||_&&d!=="edit-points")&&m("select")},[d]),bc=E.useCallback(_=>{const D=x.filter(oe=>oe);if(D.length<2){M(!1),y([]);return}let q=[...D];if(q.length>1){const oe=q[q.length-1],ge=q[q.length-2];oe&&ge&&oe.x===ge.x&&oe.y===ge.y&&q.pop()}if(q.length<2){M(!1),y([]);return}const H={id:new Date().toISOString(),name:_?"Багатокутник":"Ламана",type:"polyline",points:q,isClosed:_,fill:_&&I?Qn??ae:"none",stroke:be?Hn??fe:"none",strokeWidth:be?W:0,state:"normal",rotation:0,capstyle:"round",isAspectRatioLocked:!1};Xl(H),M(!1),y([]),m("select"),g(H.id)},[x,Xl,I,ae,be,fe,W,Qn,Hn]),w0=E.useCallback(()=>{M(!1),y([]),m("select")},[]),E0=E.useCallback(_=>{const D=A.filter(Boolean);if(D.length<2){C(!1),N([]);return}let q=[...D];if(q.length>1){const oe=q[q.length-1],ge=q[q.length-2];oe&&ge&&oe.x===ge.x&&oe.y===ge.y&&q.pop()}if(q.length<2){C(!1),N([]);return}const H={id:new Date().toISOString(),name:_?"Багатокутник":"Крива Без'є",type:"bezier",points:q,smooth:!0,splinesteps:12,stroke:be?Hn??fe:"none",strokeWidth:be?W:0,rotation:0,capstyle:"round",state:"normal",isClosed:_,fill:_&&I?Qn??ae:"none",isAspectRatioLocked:!1};Xl(H),C(!1),N([]),m("select"),g(H.id)},[A,Xl,be,fe,W,I,ae,Qn,Hn]),Sc=E.useCallback(()=>{C(!1),N([]),m("select")},[]),M0=_=>{var q;const D=(q=_.target.files)==null?void 0:q[0];if(D){const H=new FileReader;H.onload=oe=>{var Ne;const ge=(Ne=oe.target)==null?void 0:Ne.result;pc(ge),m("image"),Pe("Клацніть на полотні, щоб розмістити зображення.")},H.readAsDataURL(D)}_.target&&(_.target.value="")},Kl=E.useCallback(_=>{var q;S&&bc(!1),T&&Sc(),V(null),_==="select"||_==="edit-points"||g(null),_==="polyline"?(M(!0),y([])):M(!1),_==="bezier"?(C(!0),N([])):C(!1),_==="image"?(q=Hf.current)==null||q.click():(pc(null),m(_))},[S,T,bc,Sc]),Zl=E.useMemo(()=>{const _=e.find(D=>(D==null?void 0:D.id)===h)??null;return _?{..._}:null},[e,h]),Wf=E.useMemo(()=>p&&e.find(_=>_.id===p)||null,[e,p]),wc=E.useCallback(async()=>{if(e.length===0){Pe("Спочатку намалюйте щось на полотні!","info");return}if(Me==="gemini"&&!vi){Pe("Будь ласка, введіть ваш ключ Gemini API у налаштуваннях.","info"),no(!0);return}pe(!0),xe(null),G([]);try{if(Me==="local"){const{codeLines:_}=await Zg(e,Ze,w,z,u,ne,ht);G(_)}else{const q=(await XR(vi,e,Ze,w,z,u,ne,ht)).split(`
`).map(H=>{const oe=H.match(/(.*?) # ID:([a-zA-Z0-9.-]+)/);return oe&&oe[1]&&oe[2]?{content:oe[1].trim(),shapeId:oe[2]}:{content:H,shapeId:null}});G(q)}Ut(JSON.parse(JSON.stringify(e))),Pe("Код успішно згенеровано!","info")}catch(_){const D=_ instanceof Error?_.message:"Сталася невідома помилка.";xe(`Не вдалося згенерувати код: ${D}`),Pe("Помилка генерації коду.","error",5e3)}finally{pe(!1)}},[e,Ze,w,z,u,Me,ne,ht,vi]);E.useEffect(()=>{Me==="local"&&rn&&(async()=>{const{codeLines:D}=await Zg(e,Ze,w,z,u,ne,ht);G(D),Ut(JSON.parse(JSON.stringify(e)))})()},[e,Ze,w,z,Me,u,rn,ne,ht]);const A0=E.useMemo(()=>Ee?JSON.stringify(e)!==JSON.stringify(Ee):!1,[e,Ee]),Ec=()=>{c([]),G([]),xe(null),g(null),V(null),M(!1),y([]),C(!1),N([]),Ut(null),$o(null)},Ei=E.useCallback((_,D,q)=>{if(!ao){_();return}ro({title:D,message:q,onConfirm:()=>{_(),ro(null)}})},[ao]),k0=E.useCallback(()=>{Ei(()=>{Ec(),Pe("Полотно очищено.")},"Очистити полотно?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[Ei]),_0=E.useCallback(_=>{Ec(),f(_.projectName),Jl(_.width),k(_.height),ve(_.bgColor),j(_.canvasVarName),Lo(!1),bi.current=Dn(_.projectName,[]),xc(!0),setTimeout(Si,0)},[Dn,Si]),Kf=E.useCallback(()=>{Ei(()=>Lo(!0),"Створити новий проєкт?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[Ei]),N0=E.useCallback(()=>{Ei(()=>xc(!1),"Повернутися на головну?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[Ei]),vs=E.useCallback(_=>({projectName:_,shapes:e,thumbnail:Of(e,Ze,w,z),canvasSettings:{width:Ze,height:w,bgColor:z,varName:ne},viewTransform:Rn,uiSettings:{theme:Ti,showGrid:$,gridSize:X,snapToGrid:ue,gridSnapStep:le,showAxes:tt,showCursorCoords:Pt,showRotationAngle:st,showLineNumbers:zt,showTkinterNames:Ue,generatorType:Me,highlightCodeOnSelection:it,autoGenerateComments:ht,showComments:Qe}}),[e,Ze,w,z,ne,Rn,Ti,$,X,ue,le,tt,Pt,st,zt,Ue,Me,it,ht,Qe,Of]),Mc=E.useCallback(async()=>{if(!ao&&Vo){Pe("Незбережених змін немає.","info");return}const _=vs(u);if(Vo)try{await h0(Vo,JSON.stringify(_,null,2)),bi.current=Dn(u,e),so(Vo,_.thumbnail),Pe("Проєкт збережено.","info")}catch(D){console.error("Не вдалося зберегти у файл",D),Pe('Не вдалося зберегти у файл. Спробуйте "Зберегти як...".',"error")}else try{const D=JSON.stringify(_,null,2),q=await cr(D,`${u}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(q){const H=q.name.replace(/\.vec.json$/,"");$o(q),f(H),bi.current=Dn(H,e),so(q,_.thumbnail),Pe("Проєкт збережено.","info")}}catch(D){console.error("Не вдалося зберегти проєкт",D),Pe("Не вдалося зберегти проєкт.","error")}},[ao,Vo,vs,u,Dn,e,so]),R0=E.useCallback(async _=>{to(!1);try{const D=vs(_),q=JSON.stringify(D,null,2),H=await cr(q,`${_}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(H){const oe=H.name.replace(/\.vec.json$/,"");$o(H),f(oe),bi.current=Dn(oe,e),so(H,D.thumbnail),Pe("Проєкт збережено.","info")}}catch(D){console.error("Не вдалося зберегти проєкт",D),Pe("Не вдалося зберегти проєкт.","error")}},[vs,e,so,Dn]),Ql=E.useCallback((_,D,q)=>{try{const H=JSON.parse(_);if(H.shapes&&H.canvasSettings&&H.viewTransform){const oe=H.projectName||(D?D.replace(/\.vec.json$/,""):"Завантажений проєкт");Ec(),c(H.shapes),f(oe),Jl(H.canvasSettings.width),k(H.canvasSettings.height),ve(H.canvasSettings.bgColor),j(H.canvasSettings.varName||"c"),Uo(H.viewTransform);const ge=H.uiSettings||{};yc(ge.theme||"dark"),Q(ge.showGrid??!0),P(ge.gridSize||10),L(ge.snapToGrid??!0),de(ge.gridSnapStep||1),on(ge.showAxes??!0),kt(ge.showCursorCoords??!0),ln(ge.showRotationAngle??!0),ft(ge.showLineNumbers??!0),Ie(ge.showComments??!0),Jt(ge.showTkinterNames??!0),nt(ge.generatorType||"local"),Ct(ge.highlightCodeOnSelection??!0),Vt(ge.autoGenerateComments??!0),bi.current=Dn(oe,H.shapes),(d==="polyline"||d==="bezier")&&m("select"),xc(!0),q&&so(q,H.thumbnail),Pe("Проєкт успішно завантажено.","info"),setTimeout(Si,0)}else Pe("Неправильний формат файлу проєкту.","error")}catch(H){console.error("Помилка парсингу файлу проєкту",H),Pe("Не вдалося завантажити проєкт. Файл пошкоджено.","error")}},[c,Dn,so,Si,d]),Zf=E.useCallback(async()=>{var D;let _=null;if(typeof window.showOpenFilePicker=="function")try{_=await aD()}catch(q){console.error("Не вдалося завантажити проєкт через API",q),Pe("Не вдалося завантажити проєкт.","error");return}_?(Ql(_.content,_.handle.name,_.handle),$o(_.handle)):(D=Bf.current)==null||D.click()},[Ql]),Qf=E.useCallback(()=>{Ei(Zf,"Завантажити проєкт?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[Ei,Zf]),D0=_=>{var H;const D=(H=_.target.files)==null?void 0:H[0];if(!D)return;const q=new FileReader;q.onload=oe=>{var ge;try{const Ne=(ge=oe.target)==null?void 0:ge.result;$o(null),Ql(Ne,D.name)}catch(Ne){console.error("Не вдалося завантажити проєкт",Ne),Pe("Не вдалося завантажити проєкт. Файл може бути пошкоджений.","error")}},q.onerror=()=>{Pe("Не вдалося прочитати файл.","error")},q.readAsText(D),_.target&&(_.target.value="")},j0=E.useCallback(async _=>{ql(!1),Pe("Експорт зображення...","info",1500);try{const D=Qg(e,Ze,w,z),q=`${u}.${_.format}`;if(_.format==="svg")await cr(D,q,[{description:"SVG Зображення",accept:{"image/svg+xml":[".svg"]}}],"image/svg+xml");else{const H=await dD(_.format,D,Ze,w,_.scale,_.quality),ge=await(await fetch(H)).blob(),Ne=_.format==="png"?"image/png":"image/jpeg",ze=_.format==="png"?"PNG Зображення":"JPEG Зображення";await cr(ge,q,[{description:ze,accept:{[Ne]:[`.${_.format}`]}}],Ne)}Pe("Зображення успішно експортовано!","info")}catch(D){console.error("Помилка експорту:",D),Pe("Не вдалося експортувати зображення.","error")}},[e,Ze,w,z,u]),I0=E.useCallback(async _=>{try{const D=await zf(_);D&&(Ql(D,_.name,_.handle),$o(_.handle))}catch(D){console.error("Не вдалося відкрити останній проєкт:",D),Pe(`Не вдалося відкрити проєкт: ${D instanceof Error?D.message:"Невідома помилка"}.`,"error",5e3)}},[zf,Ql]),L0=E.useCallback(_=>{ro({title:`Видалити "${_.name.replace(/\.vec\.json$/,"")}"?`,message:"Ця дія видалить проєкт лише зі списку останніх, а не сам файл. Ви впевнені?",onConfirm:()=>{Gf(_.name),Pe("Проєкт видалено зі списку."),ro(null)}})},[Gf]),U0=E.useCallback(()=>{vc.length!==0&&ro({title:"Очистити список останніх проєктів?",message:"Ця дія видалить усі проєкти зі списку, але не самі файли. Ви впевнені?",onConfirm:()=>{Ff(),Pe("Список останніх проєктів очищено."),ro(null)}})},[Ff,vc.length]),P0=E.useCallback(async _=>{Yl(!1);const D=v.map(q=>q.content).join(`
`);if(!D){Pe("Немає коду для збереження.","error");return}try{await cr(D,`${_}.py`,[{description:"Python файл",accept:{"text/python":[".py"]}}],"text/python"),Pe("Код успішно збережено.","info")}catch(q){console.error("Не вдалося зберегти код:",q),Pe("Не вдалося зберегти код.","error")}},[v]),V0=E.useCallback(_=>{const D=v.map(q=>q.content).join(`
`);if(!D){Pe("Немає коду для запуску.","error");return}try{const H=new TextEncoder().encode(D);let oe="";H.forEach(yt=>{oe+=String.fromCharCode(yt)});const ge=btoa(oe),ze=`https://yepython.pp.ua/?${_?"runcode":"code"}=${ge}`;window.open(ze,"_blank","noopener,noreferrer")}catch(q){console.error("Error creating online IDE link:",q),Pe("Не вдалося створити посилання для онлайн IDE.","error")}},[v]),em=E.useCallback(()=>{h&&Wl(h)},[h,Wl]),$0=E.useCallback(()=>{h&&Bo(h)},[h,Bo]),H0=E.useMemo(()=>Zl?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(Zl.type):!1,[Zl]);E.useEffect(()=>{const _=D=>{if(!(D.target.matches('input, textarea, [contenteditable="true"]')||p)){if(D.ctrlKey||D.metaKey)switch(D.code){case"KeyD":h&&(D.preventDefault(),Wl(h));return;case"KeyZ":D.preventDefault(),D.shiftKey?l&&i():o&&n();return;case"KeyY":D.preventDefault(),l&&i();return;case"KeyS":D.preventDefault(),Mc();return}if(h&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(D.code)){D.preventDefault();const H=e.find(yt=>yt.id===h);if(!H)return;const oe=D.shiftKey?10:1;let ge=0,Ne=0;switch(D.code){case"ArrowUp":Ne=-oe;break;case"ArrowDown":Ne=oe;break;case"ArrowLeft":ge=-oe;break;case"ArrowRight":ge=oe;break}if(ge===0&&Ne===0)return;let ze;switch(H.type){case"line":ze={...H,points:[{...H.points[0]},{...H.points[1]}]};break;case"pencil":case"polyline":case"bezier":ze={...H,points:H.points.map(yt=>({...yt}))};break;default:ze={...H}}switch(ze.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":ze.x+=ge,ze.y+=Ne;break;case"ellipse":case"polygon":case"star":ze.cx+=ge,ze.cy+=Ne;break;case"line":case"pencil":case"polyline":case"bezier":ze.points=ze.points.map(yt=>({x:yt.x+ge,y:yt.y+Ne}));break}wi(ze);return}switch(D.code){case"KeyV":D.preventDefault(),Kl("select");return;case"KeyA":D.preventDefault(),Kl("edit-points");return;case"Delete":case"Backspace":D.preventDefault(),d==="edit-points"&&h&&R!==null?Cc(h,R):h&&Bo(h);return}}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[h,d,R,Cc,Bo,Wl,n,i,o,l,Mc,Kl,e,wi,p]);const Ac=E.useCallback(_=>{if(!Po.current)return;const{width:D,height:q}=Po.current.getBoundingClientRect(),{scale:H,x:oe,y:ge}=Rn,Ne=D/2,ze=q/2,yt=(Ne-oe)/H,ei=(ze-ge)/H,jn=Ne-yt*_,zo=ze-ei*_;Uo({scale:_,x:jn,y:zo})},[Rn]),B0=E.useCallback(()=>{Ac(1)},[Ac]),z0=E.useCallback(()=>{h&&Tc(h)},[h,Tc]),G0=E.useCallback(()=>{us("canvas"),Zn(!0)},[]),F0=E.useCallback(()=>{Vf(_=>!_)},[]),q0=E.useCallback(()=>{$f(_=>!_)},[]),O0=E.useCallback(()=>{nt("local"),xe(null),Pe("Перемкнено на локальний генератор. Код буде оновлено автоматично.","info")},[]),Y0=E.useCallback(()=>{us("generator"),Zn(!0)},[]),J0=E.useCallback(_=>{b(_),g(_)},[]),X0=E.useCallback(()=>{e.find(D=>D.id===p)&&t(e),b(null)},[p,e,t]),W0=E.useCallback(_=>{if(!p)return;const D=e.map(H=>H.id===p&&H.type==="text"?{...H,text:_}:H),q=t._internal_setHistory;q?q(H=>{const oe=[...H];return oe[oe.length-1]=D,oe}):t(D)},[p,e,t]),K0=E.useCallback(_=>{gs(_),no(!1),Pe(_?"Ключ API збережено для поточної сесії.":"Ключ API видалено.","info")},[]);return r.jsxs("div",{className:"h-screen bg-[var(--bg-app)] text-[var(--text-primary)] font-sans flex flex-col selection:bg-[var(--accent-primary)] selection:text-[var(--accent-text)] overflow-hidden",children:[qf&&r.jsx("div",{className:"fixed inset-0 bg-[var(--bg-app)] flex items-center justify-center z-[100] text-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx(B1,{size:96,className:"text-[var(--text-tertiary)]"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] mb-4",children:"Розмір екрана замалий"}),r.jsxs("p",{className:"text-[var(--text-secondary)]",children:['На жаль, для коректної роботи редактора "ВереTkа" потрібен більший екран.',r.jsx("br",{}),"Будь ласка, відкрийте цей застосунок на комп'ютері або планшеті."]})]})]})}),r.jsxs("div",{className:qf?"hidden":"h-full flex flex-col",children:[r.jsx("input",{type:"file",ref:Hf,style:{display:"none"},accept:"image/png, image/jpeg, image/gif, image/webp",onChange:M0}),r.jsx("input",{type:"file",ref:Bf,style:{display:"none"},accept:".json,.vec.json",onChange:D0}),Le&&r.jsx("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 ${Le.type==="error"?"bg-[var(--destructive-bg)]":"bg-[var(--accent-primary)]"} text-[var(--accent-text)] py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-down`,children:Le.message}),r.jsx(SD,{onGenerate:wc,showGenerateButton:Me==="gemini",onNewProject:Kf,onSaveProject:Mc,canSave:rn&&(ao||!Vo),onSaveProjectAs:()=>to(!0),onLoadProject:Qf,onExport:()=>ql(!0),onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:em,isShapeSelected:!!h,onDelete:$0,onConvertToPath:z0,canConvertToPath:H0,onFitCanvasToView:Si,showGrid:$,setShowGrid:Q,snapToGrid:ue,setSnapToGrid:L,showAxes:tt,setShowAxes:on,onOpenSettings:G0,theme:Ti,setTheme:yc,projectName:u,isProjectActive:rn,onGoHome:N0,onOpenAbout:()=>fs(!0),onOpenHelp:()=>ms(!0)}),rn&&r.jsx(ED,{activeTool:d,setActiveTool:Kl,drawMode:K,setDrawMode:U,isFillEnabled:I,setIsFillEnabled:ee,isStrokeEnabled:be,setIsStrokeEnabled:_e,fillColor:ae,setFillColor:te,setPreviewFillColor:lo,strokeColor:fe,setStrokeColor:he,setPreviewStrokeColor:fc,strokeWidth:W,setStrokeWidth:O,numberOfSides:re,setNumberOfSides:Ce,onGenerate:wc,showGenerateButton:Me==="gemini",onClear:k0,isGenerating:Y,hasShapes:e.length>0,onUndo:n,onRedo:i,canUndo:o,canRedo:l,onDuplicate:em,isShapeSelected:!!h,onOpenMobileLeft:F0,onOpenMobileRight:q0,theme:Ti,setTheme:yc,selectedShape:Zl,updateShape:wi,setShapePreview:Jf,cancelShapePreview:Ho,textColor:ke,setTextColor:ye,setPreviewTextColor:Re,textFont:Z,setTextFont:B,textFontSize:J,setTextFontSize:Te}),r.jsxs("main",{className:"flex-grow grid grid-cols-1 md:grid-cols-[380px_1fr] lg:grid-cols-[380px_1fr_260px] min-h-0",children:[rn&&r.jsxs("aside",{className:`${Ci?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} md:static md:bg-transparent md:z-auto md:p-0 md:flex flex-col gap-4 min-h-0 bg-[var(--bg-primary)]/50 md:p-2`,children:[r.jsx("div",{className:"md:hidden flex justify-end mb-4",children:r.jsx("button",{onClick:()=>Vf(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:r.jsx(Qt,{})})}),r.jsx(wD,{activeTool:d,setActiveTool:Kl}),r.jsx("div",{className:"flex-1 min-h-0 mt-2",children:r.jsx(q1,{codeLines:v,isLoading:Y,error:me,onUpdate:wc,onPreview:()=>Io(!0),hasUnsyncedChanges:A0,opacity:1,setOpacity:()=>{},selectedShapeId:h,highlightCodeOnSelection:it,setHighlightCodeOnSelection:Ct,showLineNumbers:zt,setShowLineNumbers:ft,showComments:Qe,setShowComments:Ie,generatorType:Me,onSwitchToLocalGenerator:O0,onOpenSettingsToGenerator:Y0,onSaveCode:()=>Yl(!0),onOpenOrRunCodeOnline:V0})})]}),r.jsx("div",{className:`flex flex-col min-w-0 min-h-0 p-2 md:p-4 ${!rn&&"md:col-start-1 lg:col-start-1 md:col-span-3 lg:col-span-3"}`,children:rn?r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:Po,className:"bg-[var(--bg-secondary)] rounded-lg shadow-inner flex-grow overflow-hidden relative grid",style:{gridTemplateRows:tt?`${fo}px 1fr`:"1fr",gridTemplateColumns:tt?`${fo}px 1fr`:"1fr"},children:[tt&&r.jsx("div",{className:"bg-[var(--ruler-bg)] z-10 flex items-center justify-center p-1",children:r.jsx(l1,{size:16})}),tt&&r.jsx(tp,{orientation:"horizontal",transform:Rn,length:pn.width-fo,canvasSize:{width:Ze,height:w}}),tt&&r.jsx(tp,{orientation:"vertical",transform:Rn,length:pn.height-fo,canvasSize:{width:Ze,height:w}}),r.jsxs("div",{className:"relative overflow-hidden",style:{gridRow:tt?2:"1 / -1",gridColumn:tt?2:"1 / -1"},children:[Wf&&r.jsx(vD,{shape:Wf,viewTransform:Rn,onUpdateText:W0,onStopEditing:X0,canvasOffset:{left:tt?fo:0,top:tt?fo:0}}),r.jsx(G1,{width:Ze,height:w,backgroundColor:ps??z,shapes:C0,addShape:Xl,updateShape:wi,activeTool:d,drawMode:K,fillColor:I?Qn??ae:"none",strokeColor:be?Hn??fe:"none",strokeWidth:be?W:0,textColor:we??ke,textFont:Z,textFontSize:J,numberOfSides:re,selectedShapeId:h,onSelectShape:Xf,isDrawingPolyline:S,polylinePoints:x,setPolylinePoints:y,onCompletePolyline:bc,onCancelPolyline:w0,isDrawingBezier:T,bezierPoints:A,setBezierPoints:N,onCompleteBezier:E0,onCancelBezier:Sc,showGrid:$,gridSize:X,snapStep:ue?le:1,viewTransform:Rn,setViewTransform:Uo,activePointIndex:R,setActivePointIndex:V,showCursorCoords:Pt,showRotationAngle:st,pendingImage:y0,setPendingImage:pc,setCursorPos:hc,showNotification:Pe,onStartInlineEdit:J0,inlineEditingShapeId:p})]}),r.jsx("button",{onClick:Si,title:"Показати все полотно",className:"absolute bottom-4 right-4 z-10 p-2 bg-[var(--bg-primary)] text-[var(--text-secondary)] rounded-full shadow-lg hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:r.jsx(r1,{})})]}),r.jsx(fD,{zoomLevel:Rn.scale,cursorPos:mc,onZoomChange:Ac,onResetZoom:B0})]}):r.jsx(mD,{onCreateNew:Kf,onLoadProject:Qf,recentProjects:vc,onOpenRecent:I0,onRemoveProject:L0,onClearAllProjects:U0})}),rn&&r.jsxs("aside",{className:`${p0?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} lg:static lg:bg-transparent lg:z-auto lg:p-0 lg:flex flex-col gap-4 overflow-y-auto md:p-2`,children:[r.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:r.jsx("button",{onClick:()=>$f(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:r.jsx(Qt,{})})}),r.jsx("div",{className:"flex-1 min-h-0",children:r.jsx(K1,{shapes:e,selectedShapeId:h,onSelectShape:Xf,onDeleteShape:Bo,onMoveShape:b0,onUpdateShape:wi,onReorderShape:S0,showTkinterNames:Ue})}),r.jsx("div",{className:"flex-[2_2_0%] min-h-0",children:r.jsx(X1,{selectedShape:Zl,updateShape:wi,deleteShape:Bo,duplicateShape:Wl,activeTool:d,activePointIndex:R,setActivePointIndex:V,deletePoint:Cc,addPoint:T0,convertToPath:Tc,showNotification:Pe,setShapePreview:Jf,cancelShapePreview:Ho})})]})]}),Fl&&r.jsx(ZR,{initialTab:cc,onClose:()=>Zn(!1),onOpenApiKeyModal:()=>no(!0),canvasWidth:Ze,setCanvasWidth:Jl,canvasHeight:w,setCanvasHeight:k,canvasBgColor:z,setCanvasBgColor:_=>{ve(_),ys(null)},setPreviewCanvasBgColor:ys,canvasVarName:ne,setCanvasVarName:j,gridSize:X,setGridSize:P,gridSnapStep:le,setGridSnapStep:de,showTkinterNames:Ue,setShowTkinterNames:Jt,showAxes:tt,setShowAxes:on,showCursorCoords:Pt,setShowCursorCoords:kt,showRotationAngle:st,setShowRotationAngle:ln,showLineNumbers:zt,setShowLineNumbers:ft,generatorType:Me,setGeneratorType:nt,highlightCodeOnSelection:it,setHighlightCodeOnSelection:Ct,autoGenerateComments:ht,setAutoGenerateComments:Vt}),hs&&r.jsx(sD,{isOpen:hs,onClose:()=>no(!1),onSave:K0,currentApiKey:vi}),tn&&Ee&&r.jsx(QR,{projectName:u,shapes:Ee,width:Ze,height:w,backgroundColor:z,onClose:()=>Io(!1)}),uc&&r.jsx(eD,{onClose:()=>ql(!1),onExport:j0}),dc&&r.jsx(tD,{onClose:()=>Lo(!1),onCreate:_0,initialSettings:{projectName:"Новий малюнок. ВереTkа",width:Ze,height:w,bgColor:"#ffffff",canvasVarName:"c"}}),xs&&r.jsx(nD,{isOpen:!0,title:xs.title,message:xs.message,onConfirm:xs.onConfirm,onClose:()=>ro(null)}),Ol&&r.jsx(iD,{isOpen:!0,onClose:()=>to(!1),onSave:R0,currentProjectName:u}),Pf&&r.jsx(xD,{isOpen:!0,onClose:()=>Yl(!1),onSave:P0,currentProjectName:u.replace(/\. ВереTkа$/,"")}),ds&&r.jsx(oD,{isOpen:ds,onClose:()=>fs(!1)}),nn&&r.jsx(rD,{isOpen:nn,onClose:()=>ms(!1)})]})]})}const g0=document.getElementById("root");if(!g0)throw new Error("Could not find root element to mount to");const AD=Jb.createRoot(g0);AD.render(r.jsx(Mt.StrictMode,{children:r.jsx(MD,{})}));
