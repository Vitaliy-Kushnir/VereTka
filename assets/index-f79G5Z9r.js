(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function _p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rp={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=Symbol.for("react.transitional.element"),J1=Symbol.for("react.fragment");function jp(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:Y1,type:e,key:i,ref:t!==void 0?t:null,props:n}}nc.Fragment=J1;nc.jsx=jp;nc.jsxs=jp;Rp.exports=nc;var l=Rp.exports,Dp={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=Symbol.for("react.transitional.element"),W1=Symbol.for("react.portal"),X1=Symbol.for("react.fragment"),K1=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),Q1=Symbol.for("react.consumer"),e2=Symbol.for("react.context"),t2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),i2=Symbol.for("react.memo"),Ip=Symbol.for("react.lazy"),Mm=Symbol.iterator;function o2(e){return e===null||typeof e!="object"?null:(e=Mm&&e[Mm]||e["@@iterator"],typeof e=="function"?e:null)}var Lp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Up=Object.assign,Pp={};function Fl(e,t,n){this.props=e,this.context=t,this.refs=Pp,this.updater=n||Lp}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vp(){}Vp.prototype=Fl.prototype;function Yd(e,t,n){this.props=e,this.context=t,this.refs=Pp,this.updater=n||Lp}var Jd=Yd.prototype=new Vp;Jd.constructor=Yd;Up(Jd,Fl.prototype);Jd.isPureReactComponent=!0;var Am=Array.isArray,ot={H:null,A:null,T:null,S:null,V:null},Bp=Object.prototype.hasOwnProperty;function Wd(e,t,n,i,o,r){return n=r.ref,{$$typeof:Od,type:e,key:t,ref:n!==void 0?n:null,props:r}}function l2(e,t){return Wd(e.type,t,void 0,void 0,void 0,e.props)}function Xd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Od}function r2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nm=/\/+/g;function Yc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?r2(""+e.key):t.toString(36)}function _m(){}function s2(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(_m,_m):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ko(e,t,n,i,o){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(r){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Od:case W1:c=!0;break;case Ip:return c=e._init,Ko(c(e._payload),t,n,i,o)}}if(c)return o=o(e),c=i===""?"."+Yc(e,0):i,Am(o)?(n="",c!=null&&(n=c.replace(Nm,"$&/")+"/"),Ko(o,t,n,"",function(d){return d})):o!=null&&(Xd(o)&&(o=l2(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(Nm,"$&/")+"/")+c)),t.push(o)),1;c=0;var u=i===""?".":i+":";if(Am(e))for(var f=0;f<e.length;f++)i=e[f],r=u+Yc(i,f),c+=Ko(i,t,n,r,o);else if(f=o2(e),typeof f=="function")for(e=f.call(e),f=0;!(i=e.next()).done;)i=i.value,r=u+Yc(i,f++),c+=Ko(i,t,n,r,o);else if(r==="object"){if(typeof e.then=="function")return Ko(s2(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function Ps(e,t,n){if(e==null)return e;var i=[],o=0;return Ko(e,i,"","",function(r){return t.call(n,r,o++)}),i}function a2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function c2(){}Me.Children={map:Ps,forEach:function(e,t,n){Ps(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ps(e,function(){t++}),t},toArray:function(e){return Ps(e,function(t){return t})||[]},only:function(e){if(!Xd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Fl;Me.Fragment=X1;Me.Profiler=Z1;Me.PureComponent=Yd;Me.StrictMode=K1;Me.Suspense=n2;Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ot;Me.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ot.H.useMemoCache(e)}};Me.cache=function(e){return function(){return e.apply(null,arguments)}};Me.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Up({},e.props),o=e.key,r=void 0;if(t!=null)for(c in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(o=""+t.key),t)!Bp.call(t,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&t.ref===void 0||(i[c]=t[c]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return Wd(e.type,o,void 0,void 0,r,i)};Me.createContext=function(e){return e={$$typeof:e2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Q1,_context:e},e};Me.createElement=function(e,t,n){var i,o={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)Bp.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),f=0;f<c;f++)u[f]=arguments[f+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return Wd(e,r,void 0,void 0,null,o)};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:t2,render:e}};Me.isValidElement=Xd;Me.lazy=function(e){return{$$typeof:Ip,_payload:{_status:-1,_result:e},_init:a2}};Me.memo=function(e,t){return{$$typeof:i2,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=ot.T,n={};ot.T=n;try{var i=e(),o=ot.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(c2,Rm)}catch(r){Rm(r)}finally{ot.T=t}};Me.unstable_useCacheRefresh=function(){return ot.H.useCacheRefresh()};Me.use=function(e){return ot.H.use(e)};Me.useActionState=function(e,t,n){return ot.H.useActionState(e,t,n)};Me.useCallback=function(e,t){return ot.H.useCallback(e,t)};Me.useContext=function(e){return ot.H.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e,t){return ot.H.useDeferredValue(e,t)};Me.useEffect=function(e,t,n){var i=ot.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};Me.useId=function(){return ot.H.useId()};Me.useImperativeHandle=function(e,t,n){return ot.H.useImperativeHandle(e,t,n)};Me.useInsertionEffect=function(e,t){return ot.H.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return ot.H.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return ot.H.useMemo(e,t)};Me.useOptimistic=function(e,t){return ot.H.useOptimistic(e,t)};Me.useReducer=function(e,t,n){return ot.H.useReducer(e,t,n)};Me.useRef=function(e){return ot.H.useRef(e)};Me.useState=function(e){return ot.H.useState(e)};Me.useSyncExternalStore=function(e,t,n){return ot.H.useSyncExternalStore(e,t,n)};Me.useTransition=function(){return ot.H.useTransition()};Me.version="19.1.1";Dp.exports=Me;var T=Dp.exports;const St=_p(T);var Fp={exports:{}},ic={},$p={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,xe){var O=ee.length;ee.push(xe);e:for(;0<O;){var H=O-1>>>1,oe=ee[H];if(0<o(oe,xe))ee[H]=xe,ee[O]=oe,O=H;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var xe=ee[0],O=ee.pop();if(O!==xe){ee[0]=O;e:for(var H=0,oe=ee.length,le=oe>>>1;H<le;){var be=2*(H+1)-1,Ee=ee[be],G=be+1,te=ee[G];if(0>o(Ee,O))G<oe&&0>o(te,Ee)?(ee[H]=te,ee[G]=O,H=G):(ee[H]=Ee,ee[be]=O,H=be);else if(G<oe&&0>o(te,O))ee[H]=te,ee[G]=O,H=G;else break e}}return xe}function o(ee,xe){var O=ee.sortIndex-xe.sortIndex;return O!==0?O:ee.id-xe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],m=1,g=null,h=3,p=!1,b=!1,v=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function w(ee){for(var xe=n(d);xe!==null;){if(xe.callback===null)i(d);else if(xe.startTime<=ee)i(d),xe.sortIndex=xe.expirationTime,t(f,xe);else break;xe=n(d)}}function A(ee){if(v=!1,w(ee),!b)if(n(f)!==null)b=!0,D||(D=!0,pe());else{var xe=n(d);xe!==null&&de(A,xe.startTime-ee)}}var D=!1,_=-1,M=5,L=-1;function P(){return E?!0:!(e.unstable_now()-L<M)}function Z(){if(E=!1,D){var ee=e.unstable_now();L=ee;var xe=!0;try{e:{b=!1,v&&(v=!1,x(_),_=-1),p=!0;var O=h;try{t:{for(w(ee),g=n(f);g!==null&&!(g.expirationTime>ee&&P());){var H=g.callback;if(typeof H=="function"){g.callback=null,h=g.priorityLevel;var oe=H(g.expirationTime<=ee);if(ee=e.unstable_now(),typeof oe=="function"){g.callback=oe,w(ee),xe=!0;break t}g===n(f)&&i(f),w(ee)}else i(f);g=n(f)}if(g!==null)xe=!0;else{var le=n(d);le!==null&&de(A,le.startTime-ee),xe=!1}}break e}finally{g=null,h=O,p=!1}xe=void 0}}finally{xe?pe():D=!1}}}var pe;if(typeof S=="function")pe=function(){S(Z)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,_e=Te.port2;Te.port1.onmessage=Z,pe=function(){_e.postMessage(null)}}else pe=function(){C(Z,0)};function de(ee,xe){_=C(function(){ee(e.unstable_now())},xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(ee){switch(h){case 1:case 2:case 3:var xe=3;break;default:xe=h}var O=h;h=xe;try{return ee()}finally{h=O}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(ee,xe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var O=h;h=ee;try{return xe()}finally{h=O}},e.unstable_scheduleCallback=function(ee,xe,O){var H=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,ee){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=O+oe,ee={id:m++,callback:xe,priorityLevel:ee,startTime:O,expirationTime:oe,sortIndex:-1},O>H?(ee.sortIndex=O,t(d,ee),n(f)===null&&ee===n(d)&&(v?(x(_),_=-1):v=!0,de(A,O-H))):(ee.sortIndex=oe,t(f,ee),b||p||(b=!0,D||(D=!0,pe()))),ee},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(ee){var xe=h;return function(){var O=h;h=xe;try{return ee.apply(this,arguments)}finally{h=O}}}})(Gp);$p.exports=Gp;var u2=$p.exports,Hp={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2=T;function zp(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ai(){}var Wt={d:{f:Ai,r:function(){throw Error(zp(522))},D:Ai,C:Ai,L:Ai,m:Ai,X:Ai,S:Ai,M:Ai},p:0,findDOMNode:null},f2=Symbol.for("react.portal");function m2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f2,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ar=d2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function oc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Wt;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(zp(299));return m2(e,t,null,n)};Xt.flushSync=function(e){var t=Ar.T,n=Wt.p;try{if(Ar.T=null,Wt.p=2,e)return e()}finally{Ar.T=t,Wt.p=n,Wt.d.f()}};Xt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Wt.d.C(e,t))};Xt.prefetchDNS=function(e){typeof e=="string"&&Wt.d.D(e)};Xt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=oc(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Wt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:r}):n==="script"&&Wt.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Xt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=oc(t.as,t.crossOrigin);Wt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Wt.d.M(e)};Xt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=oc(n,t.crossOrigin);Wt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Xt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=oc(t.as,t.crossOrigin);Wt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Wt.d.m(e)};Xt.requestFormReset=function(e){Wt.d.r(e)};Xt.unstable_batchedUpdates=function(e,t){return e(t)};Xt.useFormState=function(e,t,n){return Ar.H.useFormState(e,t,n)};Xt.useFormStatus=function(){return Ar.H.useHostTransitionStatus()};Xt.version="19.1.1";function qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qp)}catch(e){console.error(e)}}qp(),Hp.exports=Xt;var h2=Hp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=u2,Op=T,g2=h2;function J(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Yp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ss(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jm(e){if(ss(e)!==e)throw Error(J(188))}function p2(e){var t=e.alternate;if(!t){if(t=ss(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return jm(o),e;if(r===i)return jm(o),t;r=r.sibling}throw Error(J(188))}if(n.return!==i.return)n=o,i=r;else{for(var c=!1,u=o.child;u;){if(u===n){c=!0,n=o,i=r;break}if(u===i){c=!0,i=o,n=r;break}u=u.sibling}if(!c){for(u=r.child;u;){if(u===n){c=!0,n=r,i=o;break}if(u===i){c=!0,i=r,n=o;break}u=u.sibling}if(!c)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Wp(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Wp(e),t!==null)return t;e=e.sibling}return null}var Qe=Object.assign,x2=Symbol.for("react.element"),Vs=Symbol.for("react.transitional.element"),wr=Symbol.for("react.portal"),nl=Symbol.for("react.fragment"),Xp=Symbol.for("react.strict_mode"),Pu=Symbol.for("react.profiler"),y2=Symbol.for("react.provider"),Kp=Symbol.for("react.consumer"),ci=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),Vu=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),Zd=Symbol.for("react.memo"),Di=Symbol.for("react.lazy"),Fu=Symbol.for("react.activity"),v2=Symbol.for("react.memo_cache_sentinel"),Dm=Symbol.iterator;function mr(e){return e===null||typeof e!="object"?null:(e=Dm&&e[Dm]||e["@@iterator"],typeof e=="function"?e:null)}var b2=Symbol.for("react.client.reference");function $u(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===b2?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nl:return"Fragment";case Pu:return"Profiler";case Xp:return"StrictMode";case Vu:return"Suspense";case Bu:return"SuspenseList";case Fu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case wr:return"Portal";case ci:return(e.displayName||"Context")+".Provider";case Kp:return(e._context.displayName||"Context")+".Consumer";case Kd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zd:return t=e.displayName||null,t!==null?t:$u(e.type)||"Memo";case Di:t=e._payload,e=e._init;try{return $u(e(t))}catch{}}return null}var Er=Array.isArray,we=Op.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=g2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yo={pending:!1,data:null,method:null,action:null},Gu=[],il=-1;function Qn(e){return{current:e}}function Nt(e){0>il||(e.current=Gu[il],Gu[il]=null,il--)}function lt(e,t){il++,Gu[il]=e.current,e.current=t}var Xn=Qn(null),qr=Qn(null),zi=Qn(null),ba=Qn(null);function Ca(e,t){switch(lt(zi,t),lt(qr,e),lt(Xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vh(t),e=hv(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Nt(Xn),lt(Xn,e)}function Al(){Nt(Xn),Nt(qr),Nt(zi)}function Hu(e){e.memoizedState!==null&&lt(ba,e);var t=Xn.current,n=hv(t,e.type);t!==n&&(lt(qr,e),lt(Xn,n))}function Ta(e){qr.current===e&&(Nt(Xn),Nt(qr)),ba.current===e&&(Nt(ba),ts._currentValue=yo)}var zu=Object.prototype.hasOwnProperty,Qd=wt.unstable_scheduleCallback,Jc=wt.unstable_cancelCallback,C2=wt.unstable_shouldYield,T2=wt.unstable_requestPaint,Kn=wt.unstable_now,S2=wt.unstable_getCurrentPriorityLevel,Zp=wt.unstable_ImmediatePriority,Qp=wt.unstable_UserBlockingPriority,Sa=wt.unstable_NormalPriority,w2=wt.unstable_LowPriority,ex=wt.unstable_IdlePriority,E2=wt.log,k2=wt.unstable_setDisableYieldValue,as=null,gn=null;function Bi(e){if(typeof E2=="function"&&k2(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(as,e)}catch{}}var pn=Math.clz32?Math.clz32:N2,M2=Math.log,A2=Math.LN2;function N2(e){return e>>>=0,e===0?32:31-(M2(e)/A2|0)|0}var Bs=256,Fs=4194304;function go(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function lc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,r=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var u=i&134217727;return u!==0?(i=u&~r,i!==0?o=go(i):(c&=u,c!==0?o=go(c):n||(n=u&~e,n!==0&&(o=go(n))))):(u=i&~r,u!==0?o=go(u):c!==0?o=go(c):n||(n=i&~e,n!==0&&(o=go(n)))),o===0?0:t!==0&&t!==o&&!(t&r)&&(r=o&-o,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:o}function cs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function _2(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tx(){var e=Bs;return Bs<<=1,!(Bs&4194048)&&(Bs=256),e}function nx(){var e=Fs;return Fs<<=1,!(Fs&62914560)&&(Fs=4194304),e}function Wc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function us(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function R2(e,t,n,i,o,r){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var u=e.entanglements,f=e.expirationTimes,d=e.hiddenUpdates;for(n=c&~n;0<n;){var m=31-pn(n),g=1<<m;u[m]=0,f[m]=-1;var h=d[m];if(h!==null)for(d[m]=null,m=0;m<h.length;m++){var p=h[m];p!==null&&(p.lane&=-536870913)}n&=~g}i!==0&&ix(e,i,0),r!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=r&~(c&~t))}function ix(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-pn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function ox(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-pn(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function ef(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function lx(){var e=Ge.p;return e!==0?e:(e=window.event,e===void 0?32:wv(e.type))}function j2(e,t){var n=Ge.p;try{return Ge.p=e,t()}finally{Ge.p=n}}var no=Math.random().toString(36).slice(2),Ft="__reactFiber$"+no,tn="__reactProps$"+no,$l="__reactContainer$"+no,qu="__reactEvents$"+no,D2="__reactListeners$"+no,I2="__reactHandles$"+no,Im="__reactResources$"+no,ds="__reactMarker$"+no;function nf(e){delete e[Ft],delete e[tn],delete e[qu],delete e[D2],delete e[I2]}function ol(e){var t=e[Ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$l]||n[Ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$h(e);e!==null;){if(n=e[Ft])return n;e=$h(e)}return t}e=n,n=e.parentNode}return null}function Gl(e){if(e=e[Ft]||e[$l]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function kr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(J(33))}function gl(e){var t=e[Im];return t||(t=e[Im]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[ds]=!0}var rx=new Set,sx={};function _o(e,t){Nl(e,t),Nl(e+"Capture",t)}function Nl(e,t){for(sx[e]=t,e=0;e<t.length;e++)rx.add(t[e])}var L2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lm={},Um={};function U2(e){return zu.call(Um,e)?!0:zu.call(Lm,e)?!1:L2.test(e)?Um[e]=!0:(Lm[e]=!0,!1)}function oa(e,t,n){if(U2(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function $s(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function oi(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Xc,Pm;function Zo(e){if(Xc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xc=t&&t[1]||"",Pm=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xc+e+Pm}var Kc=!1;function Zc(e,t){if(!e||Kc)return"";Kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(p){var h=p}Reflect.construct(e,[],g)}else{try{g.call()}catch(p){h=p}e.call(g.prototype)}}else{try{throw Error()}catch(p){h=p}(g=e())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(p){if(p&&h&&typeof p.stack=="string")return[p.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),c=r[0],u=r[1];if(c&&u){var f=c.split(`
`),d=u.split(`
`);for(o=i=0;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;for(;o<d.length&&!d[o].includes("DetermineComponentFrameRoot");)o++;if(i===f.length||o===d.length)for(i=f.length-1,o=d.length-1;1<=i&&0<=o&&f[i]!==d[o];)o--;for(;1<=i&&0<=o;i--,o--)if(f[i]!==d[o]){if(i!==1||o!==1)do if(i--,o--,0>o||f[i]!==d[o]){var m=`
`+f[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=o);break}}}finally{Kc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Zo(n):""}function P2(e){switch(e.tag){case 26:case 27:case 5:return Zo(e.type);case 16:return Zo("Lazy");case 13:return Zo("Suspense");case 19:return Zo("SuspenseList");case 0:case 15:return Zc(e.type,!1);case 11:return Zc(e.type.render,!1);case 1:return Zc(e.type,!0);case 31:return Zo("Activity");default:return""}}function Vm(e){try{var t="";do t+=P2(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function wn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function V2(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){i=""+c,r.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wa(e){e._valueTracker||(e._valueTracker=V2(e))}function cx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ax(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var B2=/[\n"\\]/g;function Mn(e){return e.replace(B2,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ou(e,t,n,i,o,r,c,u){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+wn(t)):e.value!==""+wn(t)&&(e.value=""+wn(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Yu(e,c,wn(t)):n!=null?Yu(e,c,wn(n)):i!=null&&e.removeAttribute("value"),o==null&&r!=null&&(e.defaultChecked=!!r),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.name=""+wn(u):e.removeAttribute("name")}function ux(e,t,n,i,o,r,c,u){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+wn(n):"",t=t!=null?""+wn(t):n,u||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=u?e.checked:!!i,e.defaultChecked=!!i,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function Yu(e,t,n){t==="number"&&Ea(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function pl(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+wn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function dx(e,t,n){if(t!=null&&(t=""+wn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+wn(n):""}function fx(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(J(92));if(Er(i)){if(1<i.length)throw Error(J(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=wn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function _l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var F2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bm(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||F2.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function mx(e,t,n){if(t!=null&&typeof t!="object")throw Error(J(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Bm(e,o,i)}else for(var r in t)t.hasOwnProperty(r)&&Bm(e,r,t[r])}function of(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(e){return G2.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ju=null;function lf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ll=null,xl=null;function Fm(e){var t=Gl(e);if(t&&(e=t.stateNode)){var n=e[tn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ou(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Mn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[tn]||null;if(!o)throw Error(J(90));Ou(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&cx(i)}break e;case"textarea":dx(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&pl(e,!!n.multiple,t,!1)}}}var Qc=!1;function hx(e,t,n){if(Qc)return e(t,n);Qc=!0;try{var i=e(t);return i}finally{if(Qc=!1,(ll!==null||xl!==null)&&(gc(),ll&&(t=ll,e=xl,xl=ll=null,Fm(t),e)))for(t=0;t<e.length;t++)Fm(e[t])}}function Or(e,t){var n=e.stateNode;if(n===null)return null;var i=n[tn]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=!1;if(pi)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Wu=!1}var Fi=null,rf=null,ra=null;function gx(){if(ra)return ra;var e,t=rf,n=t.length,i,o="value"in Fi?Fi.value:Fi.textContent,r=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===o[r-i];i++);return ra=o.slice(e,1<i?1-i:void 0)}function sa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gs(){return!0}function $m(){return!1}function nn(e){function t(n,i,o,r,c){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(r):r[u]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Gs:$m,this.isPropagationStopped=$m,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),t}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=nn(Ro),fs=Qe({},Ro,{view:0,detail:0}),H2=nn(fs),eu,tu,gr,sc=Qe({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gr&&(gr&&e.type==="mousemove"?(eu=e.screenX-gr.screenX,tu=e.screenY-gr.screenY):tu=eu=0,gr=e),eu)},movementY:function(e){return"movementY"in e?e.movementY:tu}}),Gm=nn(sc),z2=Qe({},sc,{dataTransfer:0}),q2=nn(z2),O2=Qe({},fs,{relatedTarget:0}),nu=nn(O2),Y2=Qe({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),J2=nn(Y2),W2=Qe({},Ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),X2=nn(W2),K2=Qe({},Ro,{data:0}),Hm=nn(K2),Z2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eb[e])?!!t[e]:!1}function sf(){return tb}var nb=Qe({},fs,{key:function(e){if(e.key){var t=Z2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sf,charCode:function(e){return e.type==="keypress"?sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ib=nn(nb),ob=Qe({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=nn(ob),lb=Qe({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sf}),rb=nn(lb),sb=Qe({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),ab=nn(sb),cb=Qe({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ub=nn(cb),db=Qe({},Ro,{newState:0,oldState:0}),fb=nn(db),mb=[9,13,27,32],af=pi&&"CompositionEvent"in window,Nr=null;pi&&"documentMode"in document&&(Nr=document.documentMode);var hb=pi&&"TextEvent"in window&&!Nr,px=pi&&(!af||Nr&&8<Nr&&11>=Nr),qm=" ",Om=!1;function xx(e,t){switch(e){case"keyup":return mb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function gb(e,t){switch(e){case"compositionend":return yx(t);case"keypress":return t.which!==32?null:(Om=!0,qm);case"textInput":return e=t.data,e===qm&&Om?null:e;default:return null}}function pb(e,t){if(rl)return e==="compositionend"||!af&&xx(e,t)?(e=gx(),ra=rf=Fi=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return px&&t.locale!=="ko"?null:t.data;default:return null}}var xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ym(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xb[e.type]:t==="textarea"}function vx(e,t,n,i){ll?xl?xl.push(i):xl=[i]:ll=i,t=Ha(t,"onChange"),0<t.length&&(n=new rc("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var _r=null,Yr=null;function yb(e){dv(e,0)}function ac(e){var t=kr(e);if(cx(t))return e}function Jm(e,t){if(e==="change")return t}var bx=!1;if(pi){var iu;if(pi){var ou="oninput"in document;if(!ou){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),ou=typeof Wm.oninput=="function"}iu=ou}else iu=!1;bx=iu&&(!document.documentMode||9<document.documentMode)}function Xm(){_r&&(_r.detachEvent("onpropertychange",Cx),Yr=_r=null)}function Cx(e){if(e.propertyName==="value"&&ac(Yr)){var t=[];vx(t,Yr,e,lf(e)),hx(yb,t)}}function vb(e,t,n){e==="focusin"?(Xm(),_r=t,Yr=n,_r.attachEvent("onpropertychange",Cx)):e==="focusout"&&Xm()}function bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ac(Yr)}function Cb(e,t){if(e==="click")return ac(t)}function Tb(e,t){if(e==="input"||e==="change")return ac(t)}function Sb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:Sb;function Jr(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!zu.call(t,o)||!vn(e[o],t[o]))return!1}return!0}function Km(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zm(e,t){var n=Km(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Km(n)}}function Tx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sx(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ea(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ea(e.document)}return t}function cf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wb=pi&&"documentMode"in document&&11>=document.documentMode,sl=null,Xu=null,Rr=null,Ku=!1;function Qm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||sl==null||sl!==Ea(i)||(i=sl,"selectionStart"in i&&cf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rr&&Jr(Rr,i)||(Rr=i,i=Ha(Xu,"onSelect"),0<i.length&&(t=new rc("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=sl)))}function mo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var al={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionrun:mo("Transition","TransitionRun"),transitionstart:mo("Transition","TransitionStart"),transitioncancel:mo("Transition","TransitionCancel"),transitionend:mo("Transition","TransitionEnd")},lu={},wx={};pi&&(wx=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function jo(e){if(lu[e])return lu[e];if(!al[e])return e;var t=al[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wx)return lu[e]=t[n];return e}var Ex=jo("animationend"),kx=jo("animationiteration"),Mx=jo("animationstart"),Eb=jo("transitionrun"),kb=jo("transitionstart"),Mb=jo("transitioncancel"),Ax=jo("transitionend"),Nx=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function Fn(e,t){Nx.set(e,t),_o(t,[e])}var eh=new WeakMap;function An(e,t){if(typeof e=="object"&&e!==null){var n=eh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Vm(t)},eh.set(e,t),t)}return{value:e,source:t,stack:Vm(t)}}var Sn=[],cl=0,uf=0;function cc(){for(var e=cl,t=uf=cl=0;t<e;){var n=Sn[t];Sn[t++]=null;var i=Sn[t];Sn[t++]=null;var o=Sn[t];Sn[t++]=null;var r=Sn[t];if(Sn[t++]=null,i!==null&&o!==null){var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}r!==0&&_x(n,o,r)}}function uc(e,t,n,i){Sn[cl++]=e,Sn[cl++]=t,Sn[cl++]=n,Sn[cl++]=i,uf|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function df(e,t,n,i){return uc(e,t,n,i),ka(e)}function Hl(e,t){return uc(e,null,null,t),ka(e)}function _x(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(o=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,o&&t!==null&&(o=31-pn(n),e=r.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),r):null}function ka(e){if(50<$r)throw $r=0,vd=null,Error(J(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ul={};function Ab(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,t,n,i){return new Ab(e,t,n,i)}function ff(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hi(e,t){var n=e.alternate;return n===null?(n=hn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Rx(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function aa(e,t,n,i,o,r){var c=0;if(i=e,typeof e=="function")ff(e)&&(c=1);else if(typeof e=="string")c=_C(e,n,Xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Fu:return e=hn(31,n,t,o),e.elementType=Fu,e.lanes=r,e;case nl:return vo(n.children,o,r,t);case Xp:c=8,o|=24;break;case Pu:return e=hn(12,n,t,o|2),e.elementType=Pu,e.lanes=r,e;case Vu:return e=hn(13,n,t,o),e.elementType=Vu,e.lanes=r,e;case Bu:return e=hn(19,n,t,o),e.elementType=Bu,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y2:case ci:c=10;break e;case Kp:c=9;break e;case Kd:c=11;break e;case Zd:c=14;break e;case Di:c=16,i=null;break e}c=29,n=Error(J(130,e===null?"null":typeof e,"")),i=null}return t=hn(c,n,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function vo(e,t,n,i){return e=hn(7,e,i,t),e.lanes=n,e}function ru(e,t,n){return e=hn(6,e,null,t),e.lanes=n,e}function su(e,t,n){return t=hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var dl=[],fl=0,Ma=null,Aa=0,En=[],kn=0,bo=null,ui=1,di="";function po(e,t){dl[fl++]=Aa,dl[fl++]=Ma,Ma=e,Aa=t}function jx(e,t,n){En[kn++]=ui,En[kn++]=di,En[kn++]=bo,bo=e;var i=ui;e=di;var o=32-pn(i)-1;i&=~(1<<o),n+=1;var r=32-pn(t)+o;if(30<r){var c=o-o%5;r=(i&(1<<c)-1).toString(32),i>>=c,o-=c,ui=1<<32-pn(t)+o|n<<o|i,di=r+e}else ui=1<<r|n<<o|i,di=e}function mf(e){e.return!==null&&(po(e,1),jx(e,1,0))}function hf(e){for(;e===Ma;)Ma=dl[--fl],dl[fl]=null,Aa=dl[--fl],dl[fl]=null;for(;e===bo;)bo=En[--kn],En[kn]=null,di=En[--kn],En[kn]=null,ui=En[--kn],En[kn]=null}var Ot=null,at=null,$e=!1,Co=null,Jn=!1,Qu=Error(J(519));function Eo(e){var t=Error(J(418,""));throw Wr(An(t,e)),Qu}function th(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ft]=e,t[tn]=i,n){case"dialog":Re("cancel",t),Re("close",t);break;case"iframe":case"object":case"embed":Re("load",t);break;case"video":case"audio":for(n=0;n<Zr.length;n++)Re(Zr[n],t);break;case"source":Re("error",t);break;case"img":case"image":case"link":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"input":Re("invalid",t),ux(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),wa(t);break;case"select":Re("invalid",t);break;case"textarea":Re("invalid",t),fx(t,i.value,i.defaultValue,i.children),wa(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||mv(t.textContent,n)?(i.popover!=null&&(Re("beforetoggle",t),Re("toggle",t)),i.onScroll!=null&&Re("scroll",t),i.onScrollEnd!=null&&Re("scrollend",t),i.onClick!=null&&(t.onclick=yc),t=!0):t=!1,t||Eo(e)}function nh(e){for(Ot=e.return;Ot;)switch(Ot.tag){case 5:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Ot=Ot.return}}function pr(e){if(e!==Ot)return!1;if(!$e)return nh(e),$e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ed(e.type,e.memoizedProps)),n=!n),n&&at&&Eo(e),nh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){at=Bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}at=null}}else t===27?(t=at,io(e.type)?(e=Ad,Ad=null,at=e):at=t):at=Ot?Bn(e.stateNode.nextSibling):null;return!0}function ms(){at=Ot=null,$e=!1}function ih(){var e=Co;return e!==null&&(Qt===null?Qt=e:Qt.push.apply(Qt,e),Co=null),e}function Wr(e){Co===null?Co=[e]:Co.push(e)}var ed=Qn(null),Do=null,fi=null;function Li(e,t,n){lt(ed,t._currentValue),t._currentValue=n}function gi(e){e._currentValue=ed.current,Nt(ed)}function td(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function nd(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var r=o.dependencies;if(r!==null){var c=o.child;r=r.firstContext;e:for(;r!==null;){var u=r;r=o;for(var f=0;f<t.length;f++)if(u.context===t[f]){r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),td(r.return,n,e),i||(c=null);break e}r=u.next}}else if(o.tag===18){if(c=o.return,c===null)throw Error(J(341));c.lanes|=n,r=c.alternate,r!==null&&(r.lanes|=n),td(c,n,e),c=null}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}}function hs(e,t,n,i){e=null;for(var o=t,r=!1;o!==null;){if(!r){if(o.flags&524288)r=!0;else if(o.flags&262144)break}if(o.tag===10){var c=o.alternate;if(c===null)throw Error(J(387));if(c=c.memoizedProps,c!==null){var u=o.type;vn(o.pendingProps.value,c.value)||(e!==null?e.push(u):e=[u])}}else if(o===ba.current){if(c=o.alternate,c===null)throw Error(J(387));c.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ts):e=[ts])}o=o.return}e!==null&&nd(t,e,n,i),t.flags|=262144}function Na(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ko(e){Do=e,fi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Dx(Do,e)}function Hs(e,t){return Do===null&&ko(e),Dx(e,t)}function Dx(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},fi===null){if(e===null)throw Error(J(308));fi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fi=fi.next=t;return n}var Nb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},_b=wt.unstable_scheduleCallback,Rb=wt.unstable_NormalPriority,Ct={$$typeof:ci,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new Nb,data:new Map,refCount:0}}function gs(e){e.refCount--,e.refCount===0&&_b(Rb,function(){e.controller.abort()})}var jr=null,id=0,Rl=0,yl=null;function jb(e,t){if(jr===null){var n=jr=[];id=0,Rl=Vf(),yl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return id++,t.then(oh,oh),t}function oh(){if(--id===0&&jr!==null){yl!==null&&(yl.status="fulfilled");var e=jr;jr=null,Rl=0,yl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Db(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var lh=we.S;we.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&jb(e,t),lh!==null&&lh(e,t)};var To=Qn(null);function pf(){var e=To.current;return e!==null?e:Xe.pooledCache}function ca(e,t){t===null?lt(To,To.current):lt(To,t.pool)}function Ix(){var e=pf();return e===null?null:{parent:Ct._currentValue,pool:e}}var ps=Error(J(460)),Lx=Error(J(474)),dc=Error(J(542)),od={then:function(){}};function rh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zs(){}function Ux(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(zs,zs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ah(e),e;default:if(typeof t.status=="string")t.then(zs,zs);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(J(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ah(e),e}throw Dr=t,ps}}var Dr=null;function sh(){if(Dr===null)throw Error(J(459));var e=Dr;return Dr=null,e}function ah(e){if(e===ps||e===dc)throw Error(J(483))}var Ii=!1;function xf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,qe&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=ka(e),_x(e,null,n),t}return uc(e,i,t,n),ka(e)}function Ir(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ox(e,n)}}function au(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?o=r=c:r=r.next=c,n=n.next}while(n!==null);r===null?o=r=t:r=r.next=t}else o=r=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var rd=!1;function Lr(){if(rd){var e=yl;if(e!==null)throw e}}function Ur(e,t,n,i){rd=!1;var o=e.updateQueue;Ii=!1;var r=o.firstBaseUpdate,c=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,d=f.next;f.next=null,c===null?r=d:c.next=d,c=f;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==c&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=f))}if(r!==null){var g=o.baseState;c=0,m=d=f=null,u=r;do{var h=u.lane&-536870913,p=h!==u.lane;if(p?(Ie&h)===h:(i&h)===h){h!==0&&h===Rl&&(rd=!0),m!==null&&(m=m.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var b=e,v=u;h=t;var E=n;switch(v.tag){case 1:if(b=v.payload,typeof b=="function"){g=b.call(E,g,h);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,h=typeof b=="function"?b.call(E,g,h):b,h==null)break e;g=Qe({},g,h);break e;case 2:Ii=!0}}h=u.callback,h!==null&&(e.flags|=64,p&&(e.flags|=8192),p=o.callbacks,p===null?o.callbacks=[h]:p.push(h))}else p={lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=p,f=g):m=m.next=p,c|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;p=u,u=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);m===null&&(f=g),o.baseState=f,o.firstBaseUpdate=d,o.lastBaseUpdate=m,r===null&&(o.shared.lanes=0),eo|=c,e.lanes=c,e.memoizedState=g}}function Px(e,t){if(typeof e!="function")throw Error(J(191,e));e.call(t)}function Vx(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Px(n[e],t)}var jl=Qn(null),_a=Qn(0);function ch(e,t){e=vi,lt(_a,e),lt(jl,t),vi=e|t.baseLanes}function sd(){lt(_a,vi),lt(jl,jl.current)}function yf(){vi=_a.current,Nt(jl),Nt(_a)}var Zi=0,Ne=null,Ye=null,xt=null,Ra=!1,vl=!1,Mo=!1,ja=0,Xr=0,bl=null,Ib=0;function mt(){throw Error(J(321))}function vf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vn(e[n],t[n]))return!1;return!0}function bf(e,t,n,i,o,r){return Zi=r,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,we.H=e===null||e.memoizedState===null?gy:py,Mo=!1,r=n(i,o),Mo=!1,vl&&(r=Fx(t,n,i,o)),Bx(e),r}function Bx(e){we.H=Da;var t=Ye!==null&&Ye.next!==null;if(Zi=0,xt=Ye=Ne=null,Ra=!1,Xr=0,bl=null,t)throw Error(J(300));e===null||At||(e=e.dependencies,e!==null&&Na(e)&&(At=!0))}function Fx(e,t,n,i){Ne=e;var o=0;do{if(vl&&(bl=null),Xr=0,vl=!1,25<=o)throw Error(J(301));if(o+=1,xt=Ye=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}we.H=$b,r=t(n,i)}while(vl);return r}function Lb(){var e=we.H,t=e.useState()[0];return t=typeof t.then=="function"?xs(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Ne.flags|=1024),t}function Cf(){var e=ja!==0;return ja=0,e}function Tf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Sf(e){if(Ra){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ra=!1}Zi=0,xt=Ye=Ne=null,vl=!1,Xr=ja=0,bl=null}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ne.memoizedState=xt=e:xt=xt.next=e,xt}function yt(){if(Ye===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=xt===null?Ne.memoizedState:xt.next;if(t!==null)xt=t,Ye=e;else{if(e===null)throw Ne.alternate===null?Error(J(467)):Error(J(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},xt===null?Ne.memoizedState=xt=e:xt=xt.next=e}return xt}function wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xs(e){var t=Xr;return Xr+=1,bl===null&&(bl=[]),e=Ux(bl,e,t),t=Ne,(xt===null?t.memoizedState:xt.next)===null&&(t=t.alternate,we.H=t===null||t.memoizedState===null?gy:py),e}function fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xs(e);if(e.$$typeof===ci)return $t(e)}throw Error(J(438,String(e)))}function Ef(e){var t=null,n=Ne.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=wf(),Ne.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=v2;return t.index++,n}function xi(e,t){return typeof t=="function"?t(e):t}function ua(e){var t=yt();return kf(t,Ye,e)}function kf(e,t,n){var i=e.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=n;var o=e.baseQueue,r=i.pending;if(r!==null){if(o!==null){var c=o.next;o.next=r.next,r.next=c}t.baseQueue=o=r,i.pending=null}if(r=e.baseState,o===null)e.memoizedState=r;else{t=o.next;var u=c=null,f=null,d=t,m=!1;do{var g=d.lane&-536870913;if(g!==d.lane?(Ie&g)===g:(Zi&g)===g){var h=d.revertLane;if(h===0)f!==null&&(f=f.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),g===Rl&&(m=!0);else if((Zi&h)===h){d=d.next,h===Rl&&(m=!0);continue}else g={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=g,c=r):f=f.next=g,Ne.lanes|=h,eo|=h;g=d.action,Mo&&n(r,g),r=d.hasEagerState?d.eagerState:n(r,g)}else h={lane:g,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},f===null?(u=f=h,c=r):f=f.next=h,Ne.lanes|=g,eo|=g;d=d.next}while(d!==null&&d!==t);if(f===null?c=r:f.next=u,!vn(r,e.memoizedState)&&(At=!0,m&&(n=yl,n!==null)))throw n;e.memoizedState=r,e.baseState=c,e.baseQueue=f,i.lastRenderedState=r}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function cu(e){var t=yt(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,r=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do r=e(r,c.action),c=c.next;while(c!==o);vn(r,t.memoizedState)||(At=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function $x(e,t,n){var i=Ne,o=yt(),r=$e;if(r){if(n===void 0)throw Error(J(407));n=n()}else n=t();var c=!vn((Ye||o).memoizedState,n);c&&(o.memoizedState=n,At=!0),o=o.queue;var u=zx.bind(null,i,o,e);if(ys(2048,8,u,[e]),o.getSnapshot!==t||c||xt!==null&&xt.memoizedState.tag&1){if(i.flags|=2048,Dl(9,mc(),Hx.bind(null,i,o,n,t),null),Xe===null)throw Error(J(349));r||Zi&124||Gx(i,t,n)}return n}function Gx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t=wf(),Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hx(e,t,n,i){t.value=n,t.getSnapshot=i,qx(t)&&Ox(e)}function zx(e,t,n){return n(function(){qx(t)&&Ox(e)})}function qx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vn(e,n)}catch{return!0}}function Ox(e){var t=Hl(e,2);t!==null&&yn(t,e,2)}function ad(e){var t=Kt();if(typeof e=="function"){var n=e;if(e=n(),Mo){Bi(!0);try{n()}finally{Bi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t}function Yx(e,t,n,i){return e.baseState=n,kf(e,Ye,typeof i=="function"?i:xi)}function Ub(e,t,n,i,o){if(hc(e))throw Error(J(485));if(e=t.action,e!==null){var r={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};we.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,Jx(t,r)):(r.next=n.next,t.pending=n.next=r)}}function Jx(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var r=we.T,c={};we.T=c;try{var u=n(o,i),f=we.S;f!==null&&f(c,u),uh(e,t,u)}catch(d){cd(e,t,d)}finally{we.T=r}}else try{r=n(o,i),uh(e,t,r)}catch(d){cd(e,t,d)}}function uh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dh(e,t,i)},function(i){return cd(e,t,i)}):dh(e,t,n)}function dh(e,t,n){t.status="fulfilled",t.value=n,Wx(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Jx(e,n)))}function cd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Wx(t),t=t.next;while(t!==i)}e.action=null}function Wx(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xx(e,t){return t}function fh(e,t){if($e){var n=Xe.formState;if(n!==null){e:{var i=Ne;if($e){if(at){t:{for(var o=at,r=Jn;o.nodeType!==8;){if(!r){o=null;break t}if(o=Bn(o.nextSibling),o===null){o=null;break t}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){at=Bn(o.nextSibling),i=o.data==="F!";break e}}Eo(i)}i=!1}i&&(t=n[0])}}return n=Kt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xx,lastRenderedState:t},n.queue=i,n=fy.bind(null,Ne,i),i.dispatch=n,i=ad(!1),r=_f.bind(null,Ne,!1,i.queue),i=Kt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=Ub.bind(null,Ne,o,r,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function mh(e){var t=yt();return Kx(t,Ye,e)}function Kx(e,t,n){if(t=kf(e,t,Xx)[0],e=ua(xi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=xs(t)}catch(c){throw c===ps?dc:c}else i=t;t=yt();var o=t.queue,r=o.dispatch;return n!==t.memoizedState&&(Ne.flags|=2048,Dl(9,mc(),Pb.bind(null,o,n),null)),[i,r,e]}function Pb(e,t){e.action=t}function hh(e){var t=yt(),n=Ye;if(n!==null)return Kx(t,n,e);yt(),t=t.memoizedState,n=yt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Dl(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=wf(),Ne.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function mc(){return{destroy:void 0,resource:void 0}}function Zx(){return yt().memoizedState}function da(e,t,n,i){var o=Kt();i=i===void 0?null:i,Ne.flags|=e,o.memoizedState=Dl(1|t,mc(),n,i)}function ys(e,t,n,i){var o=yt();i=i===void 0?null:i;var r=o.memoizedState.inst;Ye!==null&&i!==null&&vf(i,Ye.memoizedState.deps)?o.memoizedState=Dl(t,r,n,i):(Ne.flags|=e,o.memoizedState=Dl(1|t,r,n,i))}function gh(e,t){da(8390656,8,e,t)}function Qx(e,t){ys(2048,8,e,t)}function ey(e,t){return ys(4,2,e,t)}function ty(e,t){return ys(4,4,e,t)}function ny(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iy(e,t,n){n=n!=null?n.concat([e]):null,ys(4,4,ny.bind(null,t,e),n)}function Mf(){}function oy(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&vf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ly(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&vf(t,i[1]))return i[0];if(i=e(),Mo){Bi(!0);try{e()}finally{Bi(!1)}}return n.memoizedState=[i,t],i}function Af(e,t,n){return n===void 0||Zi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Wy(),Ne.lanes|=e,eo|=e,n)}function ry(e,t,n,i){return vn(n,t)?n:jl.current!==null?(e=Af(e,n,i),vn(e,t)||(At=!0),e):Zi&42?(e=Wy(),Ne.lanes|=e,eo|=e,t):(At=!0,e.memoizedState=n)}function sy(e,t,n,i,o){var r=Ge.p;Ge.p=r!==0&&8>r?r:8;var c=we.T,u={};we.T=u,_f(e,!1,t,n);try{var f=o(),d=we.S;if(d!==null&&d(u,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=Db(f,i);Pr(e,t,m,xn(e))}else Pr(e,t,i,xn(e))}catch(g){Pr(e,t,{then:function(){},status:"rejected",reason:g},xn())}finally{Ge.p=r,we.T=c}}function Vb(){}function ud(e,t,n,i){if(e.tag!==5)throw Error(J(476));var o=ay(e).queue;sy(e,o,t,yo,n===null?Vb:function(){return cy(e),n(i)})}function ay(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:yo,baseState:yo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:yo},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cy(e){var t=ay(e).next.queue;Pr(e,t,{},xn())}function Nf(){return $t(ts)}function uy(){return yt().memoizedState}function dy(){return yt().memoizedState}function Bb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=xn();e=qi(n);var i=Oi(t,e,n);i!==null&&(yn(i,t,n),Ir(i,t,n)),t={cache:gf()},e.payload=t;return}t=t.return}}function Fb(e,t,n){var i=xn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},hc(e)?my(t,n):(n=df(e,t,n,i),n!==null&&(yn(n,e,i),hy(n,t,i)))}function fy(e,t,n){var i=xn();Pr(e,t,n,i)}function Pr(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(hc(e))my(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var c=t.lastRenderedState,u=r(c,n);if(o.hasEagerState=!0,o.eagerState=u,vn(u,c))return uc(e,t,o,0),Xe===null&&cc(),!1}catch{}finally{}if(n=df(e,t,o,i),n!==null)return yn(n,e,i),hy(n,t,i),!0}return!1}function _f(e,t,n,i){if(i={lane:2,revertLane:Vf(),action:i,hasEagerState:!1,eagerState:null,next:null},hc(e)){if(t)throw Error(J(479))}else t=df(e,n,i,2),t!==null&&yn(t,e,2)}function hc(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function my(e,t){vl=Ra=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hy(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ox(e,n)}}var Da={readContext:$t,use:fc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},gy={readContext:$t,use:fc,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:gh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,da(4194308,4,ny.bind(null,t,e),n)},useLayoutEffect:function(e,t){return da(4194308,4,e,t)},useInsertionEffect:function(e,t){da(4,2,e,t)},useMemo:function(e,t){var n=Kt();t=t===void 0?null:t;var i=e();if(Mo){Bi(!0);try{e()}finally{Bi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Kt();if(n!==void 0){var o=n(t);if(Mo){Bi(!0);try{n(t)}finally{Bi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Fb.bind(null,Ne,e),[i.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:function(e){e=ad(e);var t=e.queue,n=fy.bind(null,Ne,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Mf,useDeferredValue:function(e,t){var n=Kt();return Af(n,e,t)},useTransition:function(){var e=ad(!1);return e=sy.bind(null,Ne,e.queue,!0,!1),Kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ne,o=Kt();if($e){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Xe===null)throw Error(J(349));Ie&124||Gx(i,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,gh(zx.bind(null,i,r,e),[e]),i.flags|=2048,Dl(9,mc(),Hx.bind(null,i,r,n,t),null),n},useId:function(){var e=Kt(),t=Xe.identifierPrefix;if($e){var n=di,i=ui;n=(i&~(1<<32-pn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=ja++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Ib++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Nf,useFormState:fh,useActionState:fh,useOptimistic:function(e){var t=Kt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_f.bind(null,Ne,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ef,useCacheRefresh:function(){return Kt().memoizedState=Bb.bind(null,Ne)}},py={readContext:$t,use:fc,useCallback:oy,useContext:$t,useEffect:Qx,useImperativeHandle:iy,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ly,useReducer:ua,useRef:Zx,useState:function(){return ua(xi)},useDebugValue:Mf,useDeferredValue:function(e,t){var n=yt();return ry(n,Ye.memoizedState,e,t)},useTransition:function(){var e=ua(xi)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:xs(e),t]},useSyncExternalStore:$x,useId:uy,useHostTransitionStatus:Nf,useFormState:mh,useActionState:mh,useOptimistic:function(e,t){var n=yt();return Yx(n,Ye,e,t)},useMemoCache:Ef,useCacheRefresh:dy},$b={readContext:$t,use:fc,useCallback:oy,useContext:$t,useEffect:Qx,useImperativeHandle:iy,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:ly,useReducer:cu,useRef:Zx,useState:function(){return cu(xi)},useDebugValue:Mf,useDeferredValue:function(e,t){var n=yt();return Ye===null?Af(n,e,t):ry(n,Ye.memoizedState,e,t)},useTransition:function(){var e=cu(xi)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:xs(e),t]},useSyncExternalStore:$x,useId:uy,useHostTransitionStatus:Nf,useFormState:hh,useActionState:hh,useOptimistic:function(e,t){var n=yt();return Ye!==null?Yx(n,Ye,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:dy},Cl=null,Kr=0;function qs(e){var t=Kr;return Kr+=1,Cl===null&&(Cl=[]),Ux(Cl,e,t)}function xr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Os(e,t){throw t.$$typeof===x2?Error(J(525)):(e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ph(e){var t=e._init;return t(e._payload)}function xy(e){function t(C,x){if(e){var S=C.deletions;S===null?(C.deletions=[x],C.flags|=16):S.push(x)}}function n(C,x){if(!e)return null;for(;x!==null;)t(C,x),x=x.sibling;return null}function i(C){for(var x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function o(C,x){return C=hi(C,x),C.index=0,C.sibling=null,C}function r(C,x,S){return C.index=S,e?(S=C.alternate,S!==null?(S=S.index,S<x?(C.flags|=67108866,x):S):(C.flags|=67108866,x)):(C.flags|=1048576,x)}function c(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function u(C,x,S,w){return x===null||x.tag!==6?(x=ru(S,C.mode,w),x.return=C,x):(x=o(x,S),x.return=C,x)}function f(C,x,S,w){var A=S.type;return A===nl?m(C,x,S.props.children,w,S.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Di&&ph(A)===x.type)?(x=o(x,S.props),xr(x,S),x.return=C,x):(x=aa(S.type,S.key,S.props,null,C.mode,w),xr(x,S),x.return=C,x)}function d(C,x,S,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=su(S,C.mode,w),x.return=C,x):(x=o(x,S.children||[]),x.return=C,x)}function m(C,x,S,w,A){return x===null||x.tag!==7?(x=vo(S,C.mode,w,A),x.return=C,x):(x=o(x,S),x.return=C,x)}function g(C,x,S){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=ru(""+x,C.mode,S),x.return=C,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vs:return S=aa(x.type,x.key,x.props,null,C.mode,S),xr(S,x),S.return=C,S;case wr:return x=su(x,C.mode,S),x.return=C,x;case Di:var w=x._init;return x=w(x._payload),g(C,x,S)}if(Er(x)||mr(x))return x=vo(x,C.mode,S,null),x.return=C,x;if(typeof x.then=="function")return g(C,qs(x),S);if(x.$$typeof===ci)return g(C,Hs(C,x),S);Os(C,x)}return null}function h(C,x,S,w){var A=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return A!==null?null:u(C,x,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vs:return S.key===A?f(C,x,S,w):null;case wr:return S.key===A?d(C,x,S,w):null;case Di:return A=S._init,S=A(S._payload),h(C,x,S,w)}if(Er(S)||mr(S))return A!==null?null:m(C,x,S,w,null);if(typeof S.then=="function")return h(C,x,qs(S),w);if(S.$$typeof===ci)return h(C,x,Hs(C,S),w);Os(C,S)}return null}function p(C,x,S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return C=C.get(S)||null,u(x,C,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vs:return C=C.get(w.key===null?S:w.key)||null,f(x,C,w,A);case wr:return C=C.get(w.key===null?S:w.key)||null,d(x,C,w,A);case Di:var D=w._init;return w=D(w._payload),p(C,x,S,w,A)}if(Er(w)||mr(w))return C=C.get(S)||null,m(x,C,w,A,null);if(typeof w.then=="function")return p(C,x,S,qs(w),A);if(w.$$typeof===ci)return p(C,x,S,Hs(x,w),A);Os(x,w)}return null}function b(C,x,S,w){for(var A=null,D=null,_=x,M=x=0,L=null;_!==null&&M<S.length;M++){_.index>M?(L=_,_=null):L=_.sibling;var P=h(C,_,S[M],w);if(P===null){_===null&&(_=L);break}e&&_&&P.alternate===null&&t(C,_),x=r(P,x,M),D===null?A=P:D.sibling=P,D=P,_=L}if(M===S.length)return n(C,_),$e&&po(C,M),A;if(_===null){for(;M<S.length;M++)_=g(C,S[M],w),_!==null&&(x=r(_,x,M),D===null?A=_:D.sibling=_,D=_);return $e&&po(C,M),A}for(_=i(_);M<S.length;M++)L=p(_,C,M,S[M],w),L!==null&&(e&&L.alternate!==null&&_.delete(L.key===null?M:L.key),x=r(L,x,M),D===null?A=L:D.sibling=L,D=L);return e&&_.forEach(function(Z){return t(C,Z)}),$e&&po(C,M),A}function v(C,x,S,w){if(S==null)throw Error(J(151));for(var A=null,D=null,_=x,M=x=0,L=null,P=S.next();_!==null&&!P.done;M++,P=S.next()){_.index>M?(L=_,_=null):L=_.sibling;var Z=h(C,_,P.value,w);if(Z===null){_===null&&(_=L);break}e&&_&&Z.alternate===null&&t(C,_),x=r(Z,x,M),D===null?A=Z:D.sibling=Z,D=Z,_=L}if(P.done)return n(C,_),$e&&po(C,M),A;if(_===null){for(;!P.done;M++,P=S.next())P=g(C,P.value,w),P!==null&&(x=r(P,x,M),D===null?A=P:D.sibling=P,D=P);return $e&&po(C,M),A}for(_=i(_);!P.done;M++,P=S.next())P=p(_,C,M,P.value,w),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?M:P.key),x=r(P,x,M),D===null?A=P:D.sibling=P,D=P);return e&&_.forEach(function(pe){return t(C,pe)}),$e&&po(C,M),A}function E(C,x,S,w){if(typeof S=="object"&&S!==null&&S.type===nl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vs:e:{for(var A=S.key;x!==null;){if(x.key===A){if(A=S.type,A===nl){if(x.tag===7){n(C,x.sibling),w=o(x,S.props.children),w.return=C,C=w;break e}}else if(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Di&&ph(A)===x.type){n(C,x.sibling),w=o(x,S.props),xr(w,S),w.return=C,C=w;break e}n(C,x);break}else t(C,x);x=x.sibling}S.type===nl?(w=vo(S.props.children,C.mode,w,S.key),w.return=C,C=w):(w=aa(S.type,S.key,S.props,null,C.mode,w),xr(w,S),w.return=C,C=w)}return c(C);case wr:e:{for(A=S.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(C,x.sibling),w=o(x,S.children||[]),w.return=C,C=w;break e}else{n(C,x);break}else t(C,x);x=x.sibling}w=su(S,C.mode,w),w.return=C,C=w}return c(C);case Di:return A=S._init,S=A(S._payload),E(C,x,S,w)}if(Er(S))return b(C,x,S,w);if(mr(S)){if(A=mr(S),typeof A!="function")throw Error(J(150));return S=A.call(S),v(C,x,S,w)}if(typeof S.then=="function")return E(C,x,qs(S),w);if(S.$$typeof===ci)return E(C,x,Hs(C,S),w);Os(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,x!==null&&x.tag===6?(n(C,x.sibling),w=o(x,S),w.return=C,C=w):(n(C,x),w=ru(S,C.mode,w),w.return=C,C=w),c(C)):n(C,x)}return function(C,x,S,w){try{Kr=0;var A=E(C,x,S,w);return Cl=null,A}catch(_){if(_===ps||_===dc)throw _;var D=hn(29,_,null,C.mode);return D.lanes=w,D.return=C,D}finally{}}}var Il=xy(!0),yy=xy(!1),Rn=Qn(null),Zn=null;function Ui(e){var t=e.alternate;lt(Tt,Tt.current&1),lt(Rn,e),Zn===null&&(t===null||jl.current!==null||t.memoizedState!==null)&&(Zn=e)}function vy(e){if(e.tag===22){if(lt(Tt,Tt.current),lt(Rn,e),Zn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Zn=e)}}else Pi()}function Pi(){lt(Tt,Tt.current),lt(Rn,Rn.current)}function mi(e){Nt(Rn),Zn===e&&(Zn=null),Nt(Tt)}var Tt=Qn(0);function Ia(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Md(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=xn(),o=qi(i);o.payload=t,n!=null&&(o.callback=n),t=Oi(e,o,i),t!==null&&(yn(t,e,i),Ir(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=xn(),o=qi(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Oi(e,o,i),t!==null&&(yn(t,e,i),Ir(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xn(),i=qi(n);i.tag=2,t!=null&&(i.callback=t),t=Oi(e,i,n),t!==null&&(yn(t,e,n),Ir(t,e,n))}};function xh(e,t,n,i,o,r,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,c):t.prototype&&t.prototype.isPureReactComponent?!Jr(n,i)||!Jr(o,r):!0}function yh(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&dd.enqueueReplaceState(t,t.state,null)}function Ao(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Qe({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var La=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function by(e){La(e)}function Cy(e){console.error(e)}function Ty(e){La(e)}function Ua(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function vh(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function fd(e,t,n){return n=qi(n),n.tag=3,n.payload={element:null},n.callback=function(){Ua(e,t)},n}function Sy(e){return e=qi(e),e.tag=3,e}function wy(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var r=i.value;e.payload=function(){return o(r)},e.callback=function(){vh(t,n,i)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){vh(t,n,i),typeof o!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:""})})}function Gb(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&hs(t,n,o,!0),n=Rn.current,n!==null){switch(n.tag){case 13:return Zn===null?bd():n.alternate===null&&ct===0&&(ct=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===od?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Cu(e,i,o)),!1;case 22:return n.flags|=65536,i===od?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Cu(e,i,o)),!1}throw Error(J(435,n.tag))}return Cu(e,i,o),bd(),!1}if($e)return t=Rn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Qu&&(e=Error(J(422),{cause:i}),Wr(An(e,n)))):(i!==Qu&&(t=Error(J(423),{cause:i}),Wr(An(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=An(i,n),o=fd(e.stateNode,i,o),au(e,o),ct!==4&&(ct=2)),!1;var r=Error(J(520),{cause:i});if(r=An(r,n),Fr===null?Fr=[r]:Fr.push(r),ct!==4&&(ct=2),t===null)return!0;i=An(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=fd(n.stateNode,i,e),au(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Yi===null||!Yi.has(r))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Sy(o),wy(o,e,n,i),au(n,o),!1}n=n.return}while(n!==null);return!1}var Ey=Error(J(461)),At=!1;function Dt(e,t,n,i){t.child=e===null?yy(t,null,n,i):Il(t,e.child,n,i)}function bh(e,t,n,i,o){n=n.render;var r=t.ref;if("ref"in i){var c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}else c=i;return ko(t),i=bf(e,t,n,c,r,o),u=Cf(),e!==null&&!At?(Tf(e,t,o),yi(e,t,o)):($e&&u&&mf(t),t.flags|=1,Dt(e,t,i,o),t.child)}function Ch(e,t,n,i,o){if(e===null){var r=n.type;return typeof r=="function"&&!ff(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,ky(e,t,r,i,o)):(e=aa(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Rf(e,o)){var c=r.memoizedProps;if(n=n.compare,n=n!==null?n:Jr,n(c,i)&&e.ref===t.ref)return yi(e,t,o)}return t.flags|=1,e=hi(r,i),e.ref=t.ref,e.return=t,t.child=e}function ky(e,t,n,i,o){if(e!==null){var r=e.memoizedProps;if(Jr(r,i)&&e.ref===t.ref)if(At=!1,t.pendingProps=i=r,Rf(e,o))e.flags&131072&&(At=!0);else return t.lanes=e.lanes,yi(e,t,o)}return md(e,t,n,i,o)}function My(e,t,n){var i=t.pendingProps,o=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=r!==null?r.baseLanes|n:n,e!==null){for(o=t.child=e.child,r=0;o!==null;)r=r|o.lanes|o.childLanes,o=o.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Th(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ca(t,r!==null?r.cachePool:null),r!==null?ch(t,r):sd(),vy(t);else return t.lanes=t.childLanes=536870912,Th(e,t,r!==null?r.baseLanes|n:n,n)}else r!==null?(ca(t,r.cachePool),ch(t,r),Pi(),t.memoizedState=null):(e!==null&&ca(t,null),sd(),Pi());return Dt(e,t,o,n),t.child}function Th(e,t,n,i){var o=pf();return o=o===null?null:{parent:Ct._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&ca(t,null),sd(),vy(t),e!==null&&hs(e,t,i,!0),null}function fa(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(J(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function md(e,t,n,i,o){return ko(t),n=bf(e,t,n,i,void 0,o),i=Cf(),e!==null&&!At?(Tf(e,t,o),yi(e,t,o)):($e&&i&&mf(t),t.flags|=1,Dt(e,t,n,o),t.child)}function Sh(e,t,n,i,o,r){return ko(t),t.updateQueue=null,n=Fx(t,i,n,o),Bx(e),i=Cf(),e!==null&&!At?(Tf(e,t,r),yi(e,t,r)):($e&&i&&mf(t),t.flags|=1,Dt(e,t,n,r),t.child)}function wh(e,t,n,i,o){if(ko(t),t.stateNode===null){var r=ul,c=n.contextType;typeof c=="object"&&c!==null&&(r=$t(c)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=dd,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},xf(t),c=n.contextType,r.context=typeof c=="object"&&c!==null?$t(c):ul,r.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(uu(t,n,c,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&dd.enqueueReplaceState(r,r.state,null),Ur(t,i,r,o),Lr(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var u=t.memoizedProps,f=Ao(n,u);r.props=f;var d=r.context,m=n.contextType;c=ul,typeof m=="object"&&m!==null&&(c=$t(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",u=t.pendingProps!==u,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(u||d!==c)&&yh(t,r,i,c),Ii=!1;var h=t.memoizedState;r.state=h,Ur(t,i,r,o),Lr(),d=t.memoizedState,u||h!==d||Ii?(typeof g=="function"&&(uu(t,n,g,i),d=t.memoizedState),(f=Ii||xh(t,n,f,i,h,d,c))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),r.props=i,r.state=d,r.context=c,i=f):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ld(e,t),c=t.memoizedProps,m=Ao(n,c),r.props=m,g=t.pendingProps,h=r.context,d=n.contextType,f=ul,typeof d=="object"&&d!==null&&(f=$t(d)),u=n.getDerivedStateFromProps,(d=typeof u=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==g||h!==f)&&yh(t,r,i,f),Ii=!1,h=t.memoizedState,r.state=h,Ur(t,i,r,o),Lr();var p=t.memoizedState;c!==g||h!==p||Ii||e!==null&&e.dependencies!==null&&Na(e.dependencies)?(typeof u=="function"&&(uu(t,n,u,i),p=t.memoizedState),(m=Ii||xh(t,n,m,i,h,p,f)||e!==null&&e.dependencies!==null&&Na(e.dependencies))?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,p,f),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,p,f)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),r.props=i,r.state=p,r.context=f,i=m):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,fa(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Il(t,e.child,null,o),t.child=Il(t,null,n,o)):Dt(e,t,n,o),t.memoizedState=r.state,e=t.child):e=yi(e,t,o),e}function Eh(e,t,n,i){return ms(),t.flags|=256,Dt(e,t,n,i),t.child}var du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(e){return{baseLanes:e,cachePool:Ix()}}function mu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Nn),e}function Ay(e,t,n){var i=t.pendingProps,o=!1,r=(t.flags&128)!==0,c;if((c=r)||(c=e!==null&&e.memoizedState===null?!1:(Tt.current&2)!==0),c&&(o=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(o?Ui(t):Pi(),$e){var u=at,f;if(f=u){e:{for(f=u,u=Jn;f.nodeType!==8;){if(!u){u=null;break e}if(f=Bn(f.nextSibling),f===null){u=null;break e}}u=f}u!==null?(t.memoizedState={dehydrated:u,treeContext:bo!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},f=hn(18,null,null,0),f.stateNode=u,f.return=t,t.child=f,Ot=t,at=null,f=!0):f=!1}f||Eo(t)}if(u=t.memoizedState,u!==null&&(u=u.dehydrated,u!==null))return Md(u)?t.lanes=32:t.lanes=536870912,null;mi(t)}return u=i.children,i=i.fallback,o?(Pi(),o=t.mode,u=Pa({mode:"hidden",children:u},o),i=vo(i,o,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,o=t.child,o.memoizedState=fu(n),o.childLanes=mu(e,c,n),t.memoizedState=du,i):(Ui(t),hd(t,u))}if(f=e.memoizedState,f!==null&&(u=f.dehydrated,u!==null)){if(r)t.flags&256?(Ui(t),t.flags&=-257,t=hu(e,t,n)):t.memoizedState!==null?(Pi(),t.child=e.child,t.flags|=128,t=null):(Pi(),o=i.fallback,u=t.mode,i=Pa({mode:"visible",children:i.children},u),o=vo(o,u,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,Il(t,e.child,null,n),i=t.child,i.memoizedState=fu(n),i.childLanes=mu(e,c,n),t.memoizedState=du,t=o);else if(Ui(t),Md(u)){if(c=u.nextSibling&&u.nextSibling.dataset,c)var d=c.dgst;c=d,i=Error(J(419)),i.stack="",i.digest=c,Wr({value:i,source:null,stack:null}),t=hu(e,t,n)}else if(At||hs(e,t,n,!1),c=(n&e.childLanes)!==0,At||c){if(c=Xe,c!==null&&(i=n&-n,i=i&42?1:ef(i),i=i&(c.suspendedLanes|n)?0:i,i!==0&&i!==f.retryLane))throw f.retryLane=i,Hl(e,i),yn(c,e,i),Ey;u.data==="$?"||bd(),t=hu(e,t,n)}else u.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,at=Bn(u.nextSibling),Ot=t,$e=!0,Co=null,Jn=!1,e!==null&&(En[kn++]=ui,En[kn++]=di,En[kn++]=bo,ui=e.id,di=e.overflow,bo=t),t=hd(t,i.children),t.flags|=4096);return t}return o?(Pi(),o=i.fallback,u=t.mode,f=e.child,d=f.sibling,i=hi(f,{mode:"hidden",children:i.children}),i.subtreeFlags=f.subtreeFlags&65011712,d!==null?o=hi(d,o):(o=vo(o,u,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,u=e.child.memoizedState,u===null?u=fu(n):(f=u.cachePool,f!==null?(d=Ct._currentValue,f=f.parent!==d?{parent:d,pool:d}:f):f=Ix(),u={baseLanes:u.baseLanes|n,cachePool:f}),o.memoizedState=u,o.childLanes=mu(e,c,n),t.memoizedState=du,i):(Ui(t),n=e.child,e=n.sibling,n=hi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function hd(e,t){return t=Pa({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Pa(e,t){return e=hn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function hu(e,t,n){return Il(t,e.child,null,n),e=hd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kh(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),td(e.return,t,n)}function gu(e,t,n,i,o){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o)}function Ny(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;if(Dt(e,t,i.children,n),i=Tt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kh(e,n,t);else if(e.tag===19)kh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(lt(Tt,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ia(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),gu(t,!1,o,n,r);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ia(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}gu(t,!0,n,null,r);break;case"together":gu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eo|=t.lanes,!(n&t.childLanes))if(e!==null){if(hs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=hi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Na(e)))}function Hb(e,t,n){switch(t.tag){case 3:Ca(t,t.stateNode.containerInfo),Li(t,Ct,e.memoizedState.cache),ms();break;case 27:case 5:Hu(t);break;case 4:Ca(t,t.stateNode.containerInfo);break;case 10:Li(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ui(t),t.flags|=128,null):n&t.child.childLanes?Ay(e,t,n):(Ui(t),e=yi(e,t,n),e!==null?e.sibling:null);Ui(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(hs(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return Ny(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),lt(Tt,Tt.current),i)break;return null;case 22:case 23:return t.lanes=0,My(e,t,n);case 24:Li(t,Ct,e.memoizedState.cache)}return yi(e,t,n)}function _y(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)At=!0;else{if(!Rf(e,n)&&!(t.flags&128))return At=!1,Hb(e,t,n);At=!!(e.flags&131072)}else At=!1,$e&&t.flags&1048576&&jx(t,Aa,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")ff(i)?(e=Ao(i,e),t.tag=1,t=wh(null,t,i,e,n)):(t.tag=0,t=md(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===Kd){t.tag=11,t=bh(null,t,i,e,n);break e}else if(o===Zd){t.tag=14,t=Ch(null,t,i,e,n);break e}}throw t=$u(i)||i,Error(J(306,t,""))}}return t;case 0:return md(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=Ao(i,t.pendingProps),wh(e,t,i,o,n);case 3:e:{if(Ca(t,t.stateNode.containerInfo),e===null)throw Error(J(387));i=t.pendingProps;var r=t.memoizedState;o=r.element,ld(e,t),Ur(t,i,null,n);var c=t.memoizedState;if(i=c.cache,Li(t,Ct,i),i!==r.cache&&nd(t,[Ct],n,!0),Lr(),i=c.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Eh(e,t,i,n);break e}else if(i!==o){o=An(Error(J(424)),t),Wr(o),t=Eh(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=Bn(e.firstChild),Ot=t,$e=!0,Co=null,Jn=!0,n=yy(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ms(),i===o){t=yi(e,t,n);break e}Dt(e,t,i,n)}t=t.child}return t;case 26:return fa(e,t),e===null?(n=Hh(t.type,null,t.pendingProps,null))?t.memoizedState=n:$e||(n=t.type,e=t.pendingProps,i=za(zi.current).createElement(n),i[Ft]=t,i[tn]=e,Lt(i,n,e),Mt(i),t.stateNode=i):t.memoizedState=Hh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Hu(t),e===null&&$e&&(i=t.stateNode=pv(t.type,t.pendingProps,zi.current),Ot=t,Jn=!0,o=at,io(t.type)?(Ad=o,at=Bn(i.firstChild)):at=o),Dt(e,t,t.pendingProps.children,n),fa(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((o=i=at)&&(i=xC(i,t.type,t.pendingProps,Jn),i!==null?(t.stateNode=i,Ot=t,at=Bn(i.firstChild),Jn=!1,o=!0):o=!1),o||Eo(t)),Hu(t),o=t.type,r=t.pendingProps,c=e!==null?e.memoizedProps:null,i=r.children,Ed(o,r)?i=null:c!==null&&Ed(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=bf(e,t,Lb,null,null,n),ts._currentValue=o),fa(e,t),Dt(e,t,i,n),t.child;case 6:return e===null&&$e&&((e=n=at)&&(n=yC(n,t.pendingProps,Jn),n!==null?(t.stateNode=n,Ot=t,at=null,e=!0):e=!1),e||Eo(t)),null;case 13:return Ay(e,t,n);case 4:return Ca(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Il(t,null,i,n):Dt(e,t,i,n),t.child;case 11:return bh(e,t,t.type,t.pendingProps,n);case 7:return Dt(e,t,t.pendingProps,n),t.child;case 8:return Dt(e,t,t.pendingProps.children,n),t.child;case 12:return Dt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Li(t,t.type,i.value),Dt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,ko(t),o=$t(o),i=i(o),t.flags|=1,Dt(e,t,i,n),t.child;case 14:return Ch(e,t,t.type,t.pendingProps,n);case 15:return ky(e,t,t.type,t.pendingProps,n);case 19:return Ny(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Pa(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=hi(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return My(e,t,n);case 24:return ko(t),i=$t(Ct),e===null?(o=pf(),o===null&&(o=Xe,r=gf(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=n),o=r),t.memoizedState={parent:i,cache:o},xf(t),Li(t,Ct,o)):(e.lanes&n&&(ld(e,t),Ur(t,null,null,n),Lr()),o=e.memoizedState,r=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Li(t,Ct,i)):(i=r.cache,Li(t,Ct,i),i!==o.cache&&nd(t,[Ct],n,!0))),Dt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(J(156,t.tag))}function li(e){e.flags|=4}function Mh(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!vv(t)){if(t=Rn.current,t!==null&&((Ie&4194048)===Ie?Zn!==null:(Ie&62914560)!==Ie&&!(Ie&536870912)||t!==Zn))throw Dr=od,Lx;e.flags|=8192}}function Ys(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?nx():536870912,e.lanes|=t,Ll|=t)}function yr(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function zb(e,t,n){var i=t.pendingProps;switch(hf(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),gi(Ct),Al(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(pr(t)?li(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ih())),st(t),null;case 26:return n=t.memoizedState,e===null?(li(t),n!==null?(st(t),Mh(t,n)):(st(t),t.flags&=-16777217)):n?n!==e.memoizedState?(li(t),st(t),Mh(t,n)):(st(t),t.flags&=-16777217):(e.memoizedProps!==i&&li(t),st(t),t.flags&=-16777217),null;case 27:Ta(t),n=zi.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&li(t);else{if(!i){if(t.stateNode===null)throw Error(J(166));return st(t),null}e=Xn.current,pr(t)?th(t):(e=pv(o,i,n),t.stateNode=e,li(t))}return st(t),null;case 5:if(Ta(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&li(t);else{if(!i){if(t.stateNode===null)throw Error(J(166));return st(t),null}if(e=Xn.current,pr(t))th(t);else{switch(o=za(zi.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Ft]=t,e[tn]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Lt(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&li(t)}}return st(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&li(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(J(166));if(e=zi.current,pr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Ot,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||mv(e.nodeValue,n)),e||Eo(t)}else e=za(e).createTextNode(i),e[Ft]=t,t.stateNode=e}return st(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=pr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(J(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Ft]=t}else ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),o=!1}else o=ih(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(mi(t),t):(mi(t),null)}if(mi(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ys(t,t.updateQueue),st(t),null;case 4:return Al(),e===null&&Bf(t.stateNode.containerInfo),st(t),null;case 10:return gi(t.type),st(t),null;case 19:if(Nt(Tt),o=t.memoizedState,o===null)return st(t),null;if(i=(t.flags&128)!==0,r=o.rendering,r===null)if(i)yr(o,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Ia(e),r!==null){for(t.flags|=128,yr(o,!1),e=r.updateQueue,t.updateQueue=e,Ys(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Rx(n,e),n=n.sibling;return lt(Tt,Tt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Kn()>Ba&&(t.flags|=128,i=!0,yr(o,!1),t.lanes=4194304)}else{if(!i)if(e=Ia(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Ys(t,e),yr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!r.alternate&&!$e)return st(t),null}else 2*Kn()-o.renderingStartTime>Ba&&n!==536870912&&(t.flags|=128,i=!0,yr(o,!1),t.lanes=4194304);o.isBackwards?(r.sibling=t.child,t.child=r):(e=o.last,e!==null?e.sibling=r:t.child=r,o.last=r)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Kn(),t.sibling=null,e=Tt.current,lt(Tt,i?e&1|2:e&1),t):(st(t),null);case 22:case 23:return mi(t),yf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),n=t.updateQueue,n!==null&&Ys(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Nt(To),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),gi(Ct),st(t),null;case 25:return null;case 30:return null}throw Error(J(156,t.tag))}function qb(e,t){switch(hf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gi(Ct),Al(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ta(t),null;case 13:if(mi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(Tt),null;case 4:return Al(),null;case 10:return gi(t.type),null;case 22:case 23:return mi(t),yf(),e!==null&&Nt(To),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return gi(Ct),null;case 25:return null;default:return null}}function Ry(e,t){switch(hf(t),t.tag){case 3:gi(Ct),Al();break;case 26:case 27:case 5:Ta(t);break;case 4:Al();break;case 13:mi(t);break;case 19:Nt(Tt);break;case 10:gi(t.type);break;case 22:case 23:mi(t),yf(),e!==null&&Nt(To);break;case 24:gi(Ct)}}function vs(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var r=n.create,c=n.inst;i=r(),c.destroy=i}n=n.next}while(n!==o)}}catch(u){Je(t,t.return,u)}}function Qi(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var r=o.next;i=r;do{if((i.tag&e)===e){var c=i.inst,u=c.destroy;if(u!==void 0){c.destroy=void 0,o=t;var f=n,d=u;try{d()}catch(m){Je(o,f,m)}}}i=i.next}while(i!==r)}}catch(m){Je(t,t.return,m)}}function jy(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Vx(t,n)}catch(i){Je(e,e.return,i)}}}function Dy(e,t,n){n.props=Ao(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Je(e,t,i)}}function Vr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){Je(e,t,o)}}function Wn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Je(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Je(e,t,o)}else n.current=null}function Iy(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Je(e,e.return,o)}}function pu(e,t,n){try{var i=e.stateNode;fC(i,e.type,n,t),i[tn]=t}catch(o){Je(e,e.return,o)}}function Ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&io(e.type)||e.tag===4}function xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&io(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yc));else if(i!==4&&(i===27&&io(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function Va(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&io(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Va(e,t,n),e=e.sibling;e!==null;)Va(e,t,n),e=e.sibling}function Uy(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Lt(t,i,n),t[Ft]=e,t[tn]=n}catch(r){Je(e,e.return,r)}}var ai=!1,ht=!1,yu=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Ob(e,t){if(e=e.containerInfo,Sd=Ja,e=Sx(e),cf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var c=0,u=-1,f=-1,d=0,m=0,g=e,h=null;t:for(;;){for(var p;g!==n||o!==0&&g.nodeType!==3||(u=c+o),g!==r||i!==0&&g.nodeType!==3||(f=c+i),g.nodeType===3&&(c+=g.nodeValue.length),(p=g.firstChild)!==null;)h=g,g=p;for(;;){if(g===e)break t;if(h===n&&++d===o&&(u=c),h===r&&++m===i&&(f=c),(p=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=p}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:e,selectionRange:n},Ja=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){switch(t=kt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,o=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var b=Ao(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(b,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){Je(n,n.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(J(163))}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}}function Py(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ni(e,n),i&4&&vs(5,n);break;case 1:if(Ni(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){Je(n,n.return,c)}else{var o=Ao(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){Je(n,n.return,c)}}i&64&&jy(n),i&512&&Vr(n,n.return);break;case 3:if(Ni(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Vx(e,t)}catch(c){Je(n,n.return,c)}}break;case 27:t===null&&i&4&&Uy(n);case 26:case 5:Ni(e,n),t===null&&i&4&&Iy(n),i&512&&Vr(n,n.return);break;case 12:Ni(e,n);break;case 13:Ni(e,n),i&4&&Fy(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=tC.bind(null,n),vC(e,n))));break;case 22:if(i=n.memoizedState!==null||ai,!i){t=t!==null&&t.memoizedState!==null||ht,o=ai;var r=ht;ai=i,(ht=t)&&!r?ji(e,n,(n.subtreeFlags&8772)!==0):Ni(e,n),ai=o,ht=r}break;case 30:break;default:Ni(e,n)}}function Vy(e){var t=e.alternate;t!==null&&(e.alternate=null,Vy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&nf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Zt=!1;function ri(e,t,n){for(n=n.child;n!==null;)By(e,t,n),n=n.sibling}function By(e,t,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(as,n)}catch{}switch(n.tag){case 26:ht||Wn(n,t),ri(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ht||Wn(n,t);var i=nt,o=Zt;io(n.type)&&(nt=n.stateNode,Zt=!1),ri(e,t,n),Gr(n.stateNode),nt=i,Zt=o;break;case 5:ht||Wn(n,t);case 6:if(i=nt,o=Zt,nt=null,ri(e,t,n),nt=i,Zt=o,nt!==null)if(Zt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(n.stateNode)}catch(r){Je(n,t,r)}else try{nt.removeChild(n.stateNode)}catch(r){Je(n,t,r)}break;case 18:nt!==null&&(Zt?(e=nt,Fh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),os(e)):Fh(nt,n.stateNode));break;case 4:i=nt,o=Zt,nt=n.stateNode.containerInfo,Zt=!0,ri(e,t,n),nt=i,Zt=o;break;case 0:case 11:case 14:case 15:ht||Qi(2,n,t),ht||Qi(4,n,t),ri(e,t,n);break;case 1:ht||(Wn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Dy(n,t,i)),ri(e,t,n);break;case 21:ri(e,t,n);break;case 22:ht=(i=ht)||n.memoizedState!==null,ri(e,t,n),ht=i;break;default:ri(e,t,n)}}function Fy(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{os(e)}catch(n){Je(t,t.return,n)}}function Yb(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ah),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ah),t;default:throw Error(J(435,e.tag))}}function vu(e,t){var n=Yb(e);t.forEach(function(i){var o=nC.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function un(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],r=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 27:if(io(u.type)){nt=u.stateNode,Zt=!1;break e}break;case 5:nt=u.stateNode,Zt=!1;break e;case 3:case 4:nt=u.stateNode.containerInfo,Zt=!0;break e}u=u.return}if(nt===null)throw Error(J(160));By(r,c,o),nt=null,Zt=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)$y(t,e),t=t.sibling}var Vn=null;function $y(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(t,e),dn(e),i&4&&(Qi(3,e,e.return),vs(3,e),Qi(5,e,e.return));break;case 1:un(t,e),dn(e),i&512&&(ht||n===null||Wn(n,n.return)),i&64&&ai&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Vn;if(un(t,e),dn(e),i&512&&(ht||n===null||Wn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":r=o.getElementsByTagName("title")[0],(!r||r[ds]||r[Ft]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(i),o.head.insertBefore(r,o.querySelector("head > title"))),Lt(r,i,n),r[Ft]=e,Mt(r),i=r;break e;case"link":var c=qh("link","href",o).get(i+(n.href||""));if(c){for(var u=0;u<c.length;u++)if(r=c[u],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(u,1);break t}}r=o.createElement(i),Lt(r,i,n),o.head.appendChild(r);break;case"meta":if(c=qh("meta","content",o).get(i+(n.content||""))){for(u=0;u<c.length;u++)if(r=c[u],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(u,1);break t}}r=o.createElement(i),Lt(r,i,n),o.head.appendChild(r);break;default:throw Error(J(468,i))}r[Ft]=e,Mt(r),i=r}e.stateNode=i}else Oh(o,e.type,e.stateNode);else e.stateNode=zh(o,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Oh(o,e.type,e.stateNode):zh(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&pu(e,e.memoizedProps,n.memoizedProps)}break;case 27:un(t,e),dn(e),i&512&&(ht||n===null||Wn(n,n.return)),n!==null&&i&4&&pu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(un(t,e),dn(e),i&512&&(ht||n===null||Wn(n,n.return)),e.flags&32){o=e.stateNode;try{_l(o,"")}catch(p){Je(e,e.return,p)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,pu(e,o,n!==null?n.memoizedProps:o)),i&1024&&(yu=!0);break;case 6:if(un(t,e),dn(e),i&4){if(e.stateNode===null)throw Error(J(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){Je(e,e.return,p)}}break;case 3:if(ga=null,o=Vn,Vn=qa(t.containerInfo),un(t,e),Vn=o,dn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{os(t.containerInfo)}catch(p){Je(e,e.return,p)}yu&&(yu=!1,Gy(e));break;case 4:i=Vn,Vn=qa(e.stateNode.containerInfo),un(t,e),dn(e),Vn=i;break;case 12:un(t,e),dn(e);break;case 13:un(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Uf=Kn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,vu(e,i)));break;case 22:o=e.memoizedState!==null;var f=n!==null&&n.memoizedState!==null,d=ai,m=ht;if(ai=d||o,ht=m||f,un(t,e),ht=m,ai=d,dn(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||f||ai||ht||xo(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){f=n=t;try{if(r=f.stateNode,o)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{u=f.stateNode;var g=f.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null;u.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(p){Je(f,f.return,p)}}}else if(t.tag===6){if(n===null){f=t;try{f.stateNode.nodeValue=o?"":f.memoizedProps}catch(p){Je(f,f.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,vu(e,n))));break;case 19:un(t,e),dn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,vu(e,i)));break;case 30:break;case 21:break;default:un(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Ly(i)){n=i;break}i=i.return}if(n==null)throw Error(J(160));switch(n.tag){case 27:var o=n.stateNode,r=xu(e);Va(e,r,o);break;case 5:var c=n.stateNode;n.flags&32&&(_l(c,""),n.flags&=-33);var u=xu(e);Va(e,u,c);break;case 3:case 4:var f=n.stateNode.containerInfo,d=xu(e);gd(e,d,f);break;default:throw Error(J(161))}}catch(m){Je(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gy(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ni(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Py(e,t.alternate,t),t=t.sibling}function xo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Qi(4,t,t.return),xo(t);break;case 1:Wn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Dy(t,t.return,n),xo(t);break;case 27:Gr(t.stateNode);case 26:case 5:Wn(t,t.return),xo(t);break;case 22:t.memoizedState===null&&xo(t);break;case 30:xo(t);break;default:xo(t)}e=e.sibling}}function ji(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,r=t,c=r.flags;switch(r.tag){case 0:case 11:case 15:ji(o,r,n),vs(4,r);break;case 1:if(ji(o,r,n),i=r,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(d){Je(i,i.return,d)}if(i=r,o=i.updateQueue,o!==null){var u=i.stateNode;try{var f=o.shared.hiddenCallbacks;if(f!==null)for(o.shared.hiddenCallbacks=null,o=0;o<f.length;o++)Px(f[o],u)}catch(d){Je(i,i.return,d)}}n&&c&64&&jy(r),Vr(r,r.return);break;case 27:Uy(r);case 26:case 5:ji(o,r,n),n&&i===null&&c&4&&Iy(r),Vr(r,r.return);break;case 12:ji(o,r,n);break;case 13:ji(o,r,n),n&&c&4&&Fy(o,r);break;case 22:r.memoizedState===null&&ji(o,r,n),Vr(r,r.return);break;case 30:break;default:ji(o,r,n)}t=t.sibling}}function jf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gs(n))}function Df(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gs(e))}function zn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hy(e,t,n,i),t=t.sibling}function Hy(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:zn(e,t,n,i),o&2048&&vs(9,t);break;case 1:zn(e,t,n,i);break;case 3:zn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gs(e)));break;case 12:if(o&2048){zn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,c=r.id,u=r.onPostCommit;typeof u=="function"&&u(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){Je(t,t.return,f)}}else zn(e,t,n,i);break;case 13:zn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,c=t.alternate,t.memoizedState!==null?r._visibility&2?zn(e,t,n,i):Br(e,t):r._visibility&2?zn(e,t,n,i):(r._visibility|=2,Qo(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&jf(c,t);break;case 24:zn(e,t,n,i),o&2048&&Df(t.alternate,t);break;default:zn(e,t,n,i)}}function Qo(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,c=t,u=n,f=i,d=c.flags;switch(c.tag){case 0:case 11:case 15:Qo(r,c,u,f,o),vs(8,c);break;case 23:break;case 22:var m=c.stateNode;c.memoizedState!==null?m._visibility&2?Qo(r,c,u,f,o):Br(r,c):(m._visibility|=2,Qo(r,c,u,f,o)),o&&d&2048&&jf(c.alternate,c);break;case 24:Qo(r,c,u,f,o),o&&d&2048&&Df(c.alternate,c);break;default:Qo(r,c,u,f,o)}t=t.sibling}}function Br(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:Br(n,i),o&2048&&jf(i.alternate,i);break;case 24:Br(n,i),o&2048&&Df(i.alternate,i);break;default:Br(n,i)}t=t.sibling}}var Mr=8192;function Jo(e){if(e.subtreeFlags&Mr)for(e=e.child;e!==null;)zy(e),e=e.sibling}function zy(e){switch(e.tag){case 26:Jo(e),e.flags&Mr&&e.memoizedState!==null&&jC(Vn,e.memoizedState,e.memoizedProps);break;case 5:Jo(e);break;case 3:case 4:var t=Vn;Vn=qa(e.stateNode.containerInfo),Jo(e),Vn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Mr,Mr=16777216,Jo(e),Mr=t):Jo(e));break;default:Jo(e)}}function qy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];kt=i,Yy(i,e)}qy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Oy(e),e=e.sibling}function Oy(e){switch(e.tag){case 0:case 11:case 15:vr(e),e.flags&2048&&Qi(9,e,e.return);break;case 3:vr(e);break;case 12:vr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ma(e)):vr(e);break;default:vr(e)}}function ma(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];kt=i,Yy(i,e)}qy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Qi(8,t,t.return),ma(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ma(t));break;default:ma(t)}e=e.sibling}}function Yy(e,t){for(;kt!==null;){var n=kt;switch(n.tag){case 0:case 11:case 15:Qi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gs(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,kt=i;else e:for(n=e;kt!==null;){i=kt;var o=i.sibling,r=i.return;if(Vy(i),i===n){kt=null;break e}if(o!==null){o.return=r,kt=o;break e}kt=r}}}var Jb={getCacheForType:function(e){var t=$t(Ct),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Wb=typeof WeakMap=="function"?WeakMap:Map,qe=0,Xe=null,je=null,Ie=0,ze=0,mn=null,$i=!1,zl=!1,If=!1,vi=0,ct=0,eo=0,So=0,Lf=0,Nn=0,Ll=0,Fr=null,Qt=null,pd=!1,Uf=0,Ba=1/0,Fa=null,Yi=null,It=0,Ji=null,Ul=null,Tl=0,xd=0,yd=null,Jy=null,$r=0,vd=null;function xn(){if(qe&2&&Ie!==0)return Ie&-Ie;if(we.T!==null){var e=Rl;return e!==0?e:Vf()}return lx()}function Wy(){Nn===0&&(Nn=!(Ie&536870912)||$e?tx():536870912);var e=Rn.current;return e!==null&&(e.flags|=32),Nn}function yn(e,t,n){(e===Xe&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(Pl(e,0),Gi(e,Ie,Nn,!1)),us(e,n),(!(qe&2)||e!==Xe)&&(e===Xe&&(!(qe&2)&&(So|=n),ct===4&&Gi(e,Ie,Nn,!1)),ei(e))}function Xy(e,t,n){if(qe&6)throw Error(J(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||cs(e,t),o=i?Zb(e,t):bu(e,t,!0),r=i;do{if(o===0){zl&&!i&&Gi(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Xb(n)){o=bu(e,t,!1),r=!1;continue}if(o===2){if(r=t,e.errorRecoveryDisabledLanes&r)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var u=e;o=Fr;var f=u.current.memoizedState.isDehydrated;if(f&&(Pl(u,c).flags|=256),c=bu(u,c,!1),c!==2){if(If&&!f){u.errorRecoveryDisabledLanes|=r,So|=r,o=4;break e}r=Qt,Qt=o,r!==null&&(Qt===null?Qt=r:Qt.push.apply(Qt,r))}o=c}if(r=!1,o!==2)continue}}if(o===1){Pl(e,0),Gi(e,t,0,!0);break}e:{switch(i=e,r=o,r){case 0:case 1:throw Error(J(345));case 4:if((t&4194048)!==t)break;case 6:Gi(i,t,Nn,!$i);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(J(329))}if((t&62914560)===t&&(o=Uf+300-Kn(),10<o)){if(Gi(i,t,Nn,!$i),lc(i,0,!0)!==0)break e;i.timeoutHandle=gv(Nh.bind(null,i,n,Qt,Fa,pd,t,Nn,So,Ll,$i,r,2,-0,0),o);break e}Nh(i,n,Qt,Fa,pd,t,Nn,So,Ll,$i,r,0,-0,0)}}break}while(!0);ei(e)}function Nh(e,t,n,i,o,r,c,u,f,d,m,g,h,p){if(e.timeoutHandle=-1,g=t.subtreeFlags,(g&8192||(g&16785408)===16785408)&&(es={stylesheets:null,count:0,unsuspend:RC},zy(t),g=DC(),g!==null)){e.cancelPendingCommit=g(Rh.bind(null,e,t,r,n,i,o,c,u,f,m,1,h,p)),Gi(e,r,c,!d);return}Rh(e,t,r,n,i,o,c,u,f)}function Xb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],r=o.getSnapshot;o=o.value;try{if(!vn(r(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gi(e,t,n,i){t&=~Lf,t&=~So,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var r=31-pn(o),c=1<<r;i[r]=-1,o&=~c}n!==0&&ix(e,n,t)}function gc(){return qe&6?!0:(bs(0),!1)}function Pf(){if(je!==null){if(ze===0)var e=je.return;else e=je,fi=Do=null,Sf(e),Cl=null,Kr=0,e=je;for(;e!==null;)Ry(e.alternate,e),e=e.return;je=null}}function Pl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hC(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Pf(),Xe=e,je=n=hi(e.current,null),Ie=t,ze=0,mn=null,$i=!1,zl=cs(e,t),If=!1,Ll=Nn=Lf=So=eo=ct=0,Qt=Fr=null,pd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-pn(i),r=1<<o;t|=e[o],i&=~r}return vi=t,cc(),n}function Ky(e,t){Ne=null,we.H=Da,t===ps||t===dc?(t=sh(),ze=3):t===Lx?(t=sh(),ze=4):ze=t===Ey?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,mn=t,je===null&&(ct=1,Ua(e,An(t,e.current)))}function Zy(){var e=we.H;return we.H=Da,e===null?Da:e}function Qy(){var e=we.A;return we.A=Jb,e}function bd(){ct=4,$i||(Ie&4194048)!==Ie&&Rn.current!==null||(zl=!0),!(eo&134217727)&&!(So&134217727)||Xe===null||Gi(Xe,Ie,Nn,!1)}function bu(e,t,n){var i=qe;qe|=2;var o=Zy(),r=Qy();(Xe!==e||Ie!==t)&&(Fa=null,Pl(e,t)),t=!1;var c=ct;e:do try{if(ze!==0&&je!==null){var u=je,f=mn;switch(ze){case 8:Pf(),c=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(t=!0);var d=ze;if(ze=0,mn=null,ml(e,u,f,d),n&&zl){c=0;break e}break;default:d=ze,ze=0,mn=null,ml(e,u,f,d)}}Kb(),c=ct;break}catch(m){Ky(e,m)}while(!0);return t&&e.shellSuspendCounter++,fi=Do=null,qe=i,we.H=o,we.A=r,je===null&&(Xe=null,Ie=0,cc()),c}function Kb(){for(;je!==null;)ev(je)}function Zb(e,t){var n=qe;qe|=2;var i=Zy(),o=Qy();Xe!==e||Ie!==t?(Fa=null,Ba=Kn()+500,Pl(e,t)):zl=cs(e,t);e:do try{if(ze!==0&&je!==null){t=je;var r=mn;t:switch(ze){case 1:ze=0,mn=null,ml(e,t,r,1);break;case 2:case 9:if(rh(r)){ze=0,mn=null,_h(t);break}t=function(){ze!==2&&ze!==9||Xe!==e||(ze=7),ei(e)},r.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:rh(r)?(ze=0,mn=null,_h(t)):(ze=0,mn=null,ml(e,t,r,7));break;case 5:var c=null;switch(je.tag){case 26:c=je.memoizedState;case 5:case 27:var u=je;if(!c||vv(c)){ze=0,mn=null;var f=u.sibling;if(f!==null)je=f;else{var d=u.return;d!==null?(je=d,pc(d)):je=null}break t}}ze=0,mn=null,ml(e,t,r,5);break;case 6:ze=0,mn=null,ml(e,t,r,6);break;case 8:Pf(),ct=6;break e;default:throw Error(J(462))}}Qb();break}catch(m){Ky(e,m)}while(!0);return fi=Do=null,we.H=i,we.A=o,qe=n,je!==null?0:(Xe=null,Ie=0,cc(),ct)}function Qb(){for(;je!==null&&!C2();)ev(je)}function ev(e){var t=_y(e.alternate,e,vi);e.memoizedProps=e.pendingProps,t===null?pc(e):je=t}function _h(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Sh(n,t,t.pendingProps,t.type,void 0,Ie);break;case 11:t=Sh(n,t,t.pendingProps,t.type.render,t.ref,Ie);break;case 5:Sf(t);default:Ry(n,t),t=je=Rx(t,vi),t=_y(n,t,vi)}e.memoizedProps=e.pendingProps,t===null?pc(e):je=t}function ml(e,t,n,i){fi=Do=null,Sf(t),Cl=null,Kr=0;var o=t.return;try{if(Gb(e,o,t,n,Ie)){ct=1,Ua(e,An(n,e.current)),je=null;return}}catch(r){if(o!==null)throw je=o,r;ct=1,Ua(e,An(n,e.current)),je=null;return}t.flags&32768?($e||i===1?e=!0:zl||Ie&536870912?e=!1:($i=e=!0,(i===2||i===9||i===3||i===6)&&(i=Rn.current,i!==null&&i.tag===13&&(i.flags|=16384))),tv(t,e)):pc(t)}function pc(e){var t=e;do{if(t.flags&32768){tv(t,$i);return}e=t.return;var n=zb(t.alternate,t,vi);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);ct===0&&(ct=5)}function tv(e,t){do{var n=qb(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);ct=6,je=null}function Rh(e,t,n,i,o,r,c,u,f){e.cancelPendingCommit=null;do xc();while(It!==0);if(qe&6)throw Error(J(327));if(t!==null){if(t===e.current)throw Error(J(177));if(r=t.lanes|t.childLanes,r|=uf,R2(e,n,r,c,u,f),e===Xe&&(je=Xe=null,Ie=0),Ul=t,Ji=e,Tl=n,xd=r,yd=o,Jy=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,iC(Sa,function(){return rv(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=we.T,we.T=null,o=Ge.p,Ge.p=2,c=qe,qe|=4;try{Ob(e,t,n)}finally{qe=c,Ge.p=o,we.T=i}}It=1,nv(),iv(),ov()}}function nv(){if(It===1){It=0;var e=Ji,t=Ul,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=we.T,we.T=null;var i=Ge.p;Ge.p=2;var o=qe;qe|=4;try{$y(t,e);var r=wd,c=Sx(e.containerInfo),u=r.focusedElem,f=r.selectionRange;if(c!==u&&u&&u.ownerDocument&&Tx(u.ownerDocument.documentElement,u)){if(f!==null&&cf(u)){var d=f.start,m=f.end;if(m===void 0&&(m=d),"selectionStart"in u)u.selectionStart=d,u.selectionEnd=Math.min(m,u.value.length);else{var g=u.ownerDocument||document,h=g&&g.defaultView||window;if(h.getSelection){var p=h.getSelection(),b=u.textContent.length,v=Math.min(f.start,b),E=f.end===void 0?v:Math.min(f.end,b);!p.extend&&v>E&&(c=E,E=v,v=c);var C=Zm(u,v),x=Zm(u,E);if(C&&x&&(p.rangeCount!==1||p.anchorNode!==C.node||p.anchorOffset!==C.offset||p.focusNode!==x.node||p.focusOffset!==x.offset)){var S=g.createRange();S.setStart(C.node,C.offset),p.removeAllRanges(),v>E?(p.addRange(S),p.extend(x.node,x.offset)):(S.setEnd(x.node,x.offset),p.addRange(S))}}}}for(g=[],p=u;p=p.parentNode;)p.nodeType===1&&g.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<g.length;u++){var w=g[u];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Ja=!!Sd,wd=Sd=null}finally{qe=o,Ge.p=i,we.T=n}}e.current=t,It=2}}function iv(){if(It===2){It=0;var e=Ji,t=Ul,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=we.T,we.T=null;var i=Ge.p;Ge.p=2;var o=qe;qe|=4;try{Py(e,t.alternate,t)}finally{qe=o,Ge.p=i,we.T=n}}It=3}}function ov(){if(It===4||It===3){It=0,T2();var e=Ji,t=Ul,n=Tl,i=Jy;t.subtreeFlags&10256||t.flags&10256?It=5:(It=0,Ul=Ji=null,lv(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Yi=null),tf(n),t=t.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(as,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=we.T,o=Ge.p,Ge.p=2,we.T=null;try{for(var r=e.onRecoverableError,c=0;c<i.length;c++){var u=i[c];r(u.value,{componentStack:u.stack})}}finally{we.T=t,Ge.p=o}}Tl&3&&xc(),ei(e),o=e.pendingLanes,n&4194090&&o&42?e===vd?$r++:($r=0,vd=e):$r=0,bs(0)}}function lv(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gs(t)))}function xc(e){return nv(),iv(),ov(),rv()}function rv(){if(It!==5)return!1;var e=Ji,t=xd;xd=0;var n=tf(Tl),i=we.T,o=Ge.p;try{Ge.p=32>n?32:n,we.T=null,n=yd,yd=null;var r=Ji,c=Tl;if(It=0,Ul=Ji=null,Tl=0,qe&6)throw Error(J(331));var u=qe;if(qe|=4,Oy(r.current),Hy(r,r.current,c,n),qe=u,bs(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(as,r)}catch{}return!0}finally{Ge.p=o,we.T=i,lv(e,t)}}function jh(e,t,n){t=An(n,t),t=fd(e.stateNode,t,2),e=Oi(e,t,2),e!==null&&(us(e,2),ei(e))}function Je(e,t,n){if(e.tag===3)jh(e,e,n);else for(;t!==null;){if(t.tag===3){jh(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yi===null||!Yi.has(i))){e=An(n,e),n=Sy(2),i=Oi(t,n,2),i!==null&&(wy(n,i,t,e),us(i,2),ei(i));break}}t=t.return}}function Cu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Wb;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(If=!0,o.add(n),e=eC.bind(null,e,t,n),t.then(e,e))}function eC(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xe===e&&(Ie&n)===n&&(ct===4||ct===3&&(Ie&62914560)===Ie&&300>Kn()-Uf?!(qe&2)&&Pl(e,0):Lf|=n,Ll===Ie&&(Ll=0)),ei(e)}function sv(e,t){t===0&&(t=nx()),e=Hl(e,t),e!==null&&(us(e,t),ei(e))}function tC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sv(e,n)}function nC(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(J(314))}i!==null&&i.delete(t),sv(e,n)}function iC(e,t){return Qd(e,t)}var $a=null,el=null,Cd=!1,Ga=!1,Tu=!1,wo=0;function ei(e){e!==el&&e.next===null&&(el===null?$a=el=e:el=el.next=e),Ga=!0,Cd||(Cd=!0,lC())}function bs(e,t){if(!Tu&&Ga){Tu=!0;do for(var n=!1,i=$a;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var r=0;else{var c=i.suspendedLanes,u=i.pingedLanes;r=(1<<31-pn(42|e)+1)-1,r&=o&~(c&~u),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Dh(i,r))}else r=Ie,r=lc(i,i===Xe?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||cs(i,r)||(n=!0,Dh(i,r));i=i.next}while(n);Tu=!1}}function oC(){av()}function av(){Ga=Cd=!1;var e=0;wo!==0&&(mC()&&(e=wo),wo=0);for(var t=Kn(),n=null,i=$a;i!==null;){var o=i.next,r=cv(i,t);r===0?(i.next=null,n===null?$a=o:n.next=o,o===null&&(el=n)):(n=i,(e!==0||r&3)&&(Ga=!0)),i=o}bs(e)}function cv(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var c=31-pn(r),u=1<<c,f=o[c];f===-1?(!(u&n)||u&i)&&(o[c]=_2(u,t)):f<=t&&(e.expiredLanes|=u),r&=~u}if(t=Xe,n=Ie,n=lc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Jc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||cs(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Jc(i),tf(n)){case 2:case 8:n=Qp;break;case 32:n=Sa;break;case 268435456:n=ex;break;default:n=Sa}return i=uv.bind(null,e),n=Qd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Jc(i),e.callbackPriority=2,e.callbackNode=null,2}function uv(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var i=Ie;return i=lc(e,e===Xe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Xy(e,i,t),cv(e,Kn()),e.callbackNode!=null&&e.callbackNode===n?uv.bind(null,e):null)}function Dh(e,t){if(xc())return null;Xy(e,t,!0)}function lC(){gC(function(){qe&6?Qd(Zp,oC):av()})}function Vf(){return wo===0&&(wo=tx()),wo}function Ih(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:la(""+e)}function Lh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function rC(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var r=Ih((o[tn]||null).action),c=i.submitter;c&&(t=(t=c[tn]||null)?Ih(t.formAction):c.getAttribute("formAction"),t!==null&&(r=t,c=null));var u=new rc("action","action",null,i,o);e.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(wo!==0){var f=c?Lh(o,c):new FormData(o);ud(n,{pending:!0,data:f,method:o.method,action:r},null,f)}}else typeof r=="function"&&(u.preventDefault(),f=c?Lh(o,c):new FormData(o),ud(n,{pending:!0,data:f,method:o.method,action:r},r,f))},currentTarget:o}]})}}for(var Su=0;Su<Zu.length;Su++){var wu=Zu[Su],sC=wu.toLowerCase(),aC=wu[0].toUpperCase()+wu.slice(1);Fn(sC,"on"+aC)}Fn(Ex,"onAnimationEnd");Fn(kx,"onAnimationIteration");Fn(Mx,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Eb,"onTransitionRun");Fn(kb,"onTransitionStart");Fn(Mb,"onTransitionCancel");Fn(Ax,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zr));function dv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var c=i.length-1;0<=c;c--){var u=i[c],f=u.instance,d=u.currentTarget;if(u=u.listener,f!==r&&o.isPropagationStopped())break e;r=u,o.currentTarget=d;try{r(o)}catch(m){La(m)}o.currentTarget=null,r=f}else for(c=0;c<i.length;c++){if(u=i[c],f=u.instance,d=u.currentTarget,u=u.listener,f!==r&&o.isPropagationStopped())break e;r=u,o.currentTarget=d;try{r(o)}catch(m){La(m)}o.currentTarget=null,r=f}}}}function Re(e,t){var n=t[qu];n===void 0&&(n=t[qu]=new Set);var i=e+"__bubble";n.has(i)||(fv(t,e,2,!1),n.add(i))}function Eu(e,t,n){var i=0;t&&(i|=4),fv(n,e,i,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Bf(e){if(!e[Js]){e[Js]=!0,rx.forEach(function(n){n!=="selectionchange"&&(cC.has(n)||Eu(n,!1,e),Eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Eu("selectionchange",!1,t))}}function fv(e,t,n,i){switch(wv(t)){case 2:var o=UC;break;case 8:o=PC;break;default:o=Hf}n=o.bind(null,t,n,e),o=void 0,!Wu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ku(e,t,n,i,o){var r=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var u=i.stateNode.containerInfo;if(u===o)break;if(c===4)for(c=i.return;c!==null;){var f=c.tag;if((f===3||f===4)&&c.stateNode.containerInfo===o)return;c=c.return}for(;u!==null;){if(c=ol(u),c===null)return;if(f=c.tag,f===5||f===6||f===26||f===27){i=r=c;continue e}u=u.parentNode}}i=i.return}hx(function(){var d=r,m=lf(n),g=[];e:{var h=Nx.get(e);if(h!==void 0){var p=rc,b=e;switch(e){case"keypress":if(sa(n)===0)break e;case"keydown":case"keyup":p=ib;break;case"focusin":b="focus",p=nu;break;case"focusout":b="blur",p=nu;break;case"beforeblur":case"afterblur":p=nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=q2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rb;break;case Ex:case kx:case Mx:p=J2;break;case Ax:p=ab;break;case"scroll":case"scrollend":p=H2;break;case"wheel":p=ub;break;case"copy":case"cut":case"paste":p=X2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zm;break;case"toggle":case"beforetoggle":p=fb}var v=(t&4)!==0,E=!v&&(e==="scroll"||e==="scrollend"),C=v?h!==null?h+"Capture":null:h;v=[];for(var x=d,S;x!==null;){var w=x;if(S=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||S===null||C===null||(w=Or(x,C),w!=null&&v.push(Qr(x,w,S))),E)break;x=x.return}0<v.length&&(h=new p(h,b,null,n,m),g.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Ju&&(b=n.relatedTarget||n.fromElement)&&(ol(b)||b[$l]))break e;if((p||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=d,b=b?ol(b):null,b!==null&&(E=ss(b),v=b.tag,b!==E||v!==5&&v!==27&&v!==6)&&(b=null)):(p=null,b=d),p!==b)){if(v=Gm,w="onMouseLeave",C="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=zm,w="onPointerLeave",C="onPointerEnter",x="pointer"),E=p==null?h:kr(p),S=b==null?h:kr(b),h=new v(w,x+"leave",p,n,m),h.target=E,h.relatedTarget=S,w=null,ol(m)===d&&(v=new v(C,x+"enter",b,n,m),v.target=S,v.relatedTarget=E,w=v),E=w,p&&b)t:{for(v=p,C=b,x=0,S=v;S;S=Wo(S))x++;for(S=0,w=C;w;w=Wo(w))S++;for(;0<x-S;)v=Wo(v),x--;for(;0<S-x;)C=Wo(C),S--;for(;x--;){if(v===C||C!==null&&v===C.alternate)break t;v=Wo(v),C=Wo(C)}v=null}else v=null;p!==null&&Uh(g,h,p,v,!1),b!==null&&E!==null&&Uh(g,E,b,v,!0)}}e:{if(h=d?kr(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var A=Jm;else if(Ym(h))if(bx)A=Tb;else{A=bb;var D=vb}else p=h.nodeName,!p||p.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?d&&of(d.elementType)&&(A=Jm):A=Cb;if(A&&(A=A(e,d))){vx(g,A,n,m);break e}D&&D(e,h,d),e==="focusout"&&d&&h.type==="number"&&d.memoizedProps.value!=null&&Yu(h,"number",h.value)}switch(D=d?kr(d):window,e){case"focusin":(Ym(D)||D.contentEditable==="true")&&(sl=D,Xu=d,Rr=null);break;case"focusout":Rr=Xu=sl=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Qm(g,n,m);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":Qm(g,n,m)}var _;if(af)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else rl?xx(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(px&&n.locale!=="ko"&&(rl||M!=="onCompositionStart"?M==="onCompositionEnd"&&rl&&(_=gx()):(Fi=m,rf="value"in Fi?Fi.value:Fi.textContent,rl=!0)),D=Ha(d,M),0<D.length&&(M=new Hm(M,e,null,n,m),g.push({event:M,listeners:D}),_?M.data=_:(_=yx(n),_!==null&&(M.data=_)))),(_=hb?gb(e,n):pb(e,n))&&(M=Ha(d,"onBeforeInput"),0<M.length&&(D=new Hm("onBeforeInput","beforeinput",null,n,m),g.push({event:D,listeners:M}),D.data=_)),rC(g,e,d,n,m)}dv(g,t)})}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ha(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=Or(e,n),o!=null&&i.unshift(Qr(e,o,r)),o=Or(e,t),o!=null&&i.push(Qr(e,o,r))),e.tag===3)return i;e=e.return}return[]}function Wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Uh(e,t,n,i,o){for(var r=t._reactName,c=[];n!==null&&n!==i;){var u=n,f=u.alternate,d=u.stateNode;if(u=u.tag,f!==null&&f===i)break;u!==5&&u!==26&&u!==27||d===null||(f=d,o?(d=Or(n,r),d!=null&&c.unshift(Qr(n,d,f))):o||(d=Or(n,r),d!=null&&c.push(Qr(n,d,f)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var uC=/\r\n?/g,dC=/\u0000|\uFFFD/g;function Ph(e){return(typeof e=="string"?e:""+e).replace(uC,`
`).replace(dC,"")}function mv(e,t){return t=Ph(t),Ph(e)===t}function yc(){}function Oe(e,t,n,i,o,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||_l(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&_l(e,""+i);break;case"className":$s(e,"class",i);break;case"tabIndex":$s(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":$s(e,n,i);break;case"style":mx(e,i,r);break;case"data":if(t!=="object"){$s(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=la(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Oe(e,t,"name",o.name,o,null),Oe(e,t,"formEncType",o.formEncType,o,null),Oe(e,t,"formMethod",o.formMethod,o,null),Oe(e,t,"formTarget",o.formTarget,o,null)):(Oe(e,t,"encType",o.encType,o,null),Oe(e,t,"method",o.method,o,null),Oe(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=la(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=yc);break;case"onScroll":i!=null&&Re("scroll",e);break;case"onScrollEnd":i!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(J(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=la(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Re("beforetoggle",e),Re("toggle",e),oa(e,"popover",i);break;case"xlinkActuate":oi(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":oi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":oi(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":oi(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":oi(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":oi(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":oi(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":oi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":oi(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":oa(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$2.get(n)||n,oa(e,n,i))}}function Td(e,t,n,i,o,r){switch(n){case"style":mx(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(J(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"children":typeof i=="string"?_l(e,i):(typeof i=="number"||typeof i=="bigint")&&_l(e,""+i);break;case"onScroll":i!=null&&Re("scroll",e);break;case"onScrollEnd":i!=null&&Re("scrollend",e);break;case"onClick":i!=null&&(e.onclick=yc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sx.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),r=e[tn]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,o),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):oa(e,n,i)}}}function Lt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var i=!1,o=!1,r;for(r in n)if(n.hasOwnProperty(r)){var c=n[r];if(c!=null)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:Oe(e,t,r,c,n,null)}}o&&Oe(e,t,"srcSet",n.srcSet,n,null),i&&Oe(e,t,"src",n.src,n,null);return;case"input":Re("invalid",e);var u=r=c=o=null,f=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":o=m;break;case"type":c=m;break;case"checked":f=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":u=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(J(137,t));break;default:Oe(e,t,i,m,n,null)}}ux(e,r,u,f,d,c,o,!1),wa(e);return;case"select":Re("invalid",e),i=c=r=null;for(o in n)if(n.hasOwnProperty(o)&&(u=n[o],u!=null))switch(o){case"value":r=u;break;case"defaultValue":c=u;break;case"multiple":i=u;default:Oe(e,t,o,u,n,null)}t=r,n=c,e.multiple=!!i,t!=null?pl(e,!!i,t,!1):n!=null&&pl(e,!!i,n,!0);return;case"textarea":Re("invalid",e),r=o=i=null;for(c in n)if(n.hasOwnProperty(c)&&(u=n[c],u!=null))switch(c){case"value":i=u;break;case"defaultValue":o=u;break;case"children":r=u;break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(J(91));break;default:Oe(e,t,c,u,n,null)}fx(e,i,o,r),wa(e);return;case"option":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Oe(e,t,f,i,n,null)}return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(i=0;i<Zr.length;i++)Re(Zr[i],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:Oe(e,t,d,i,n,null)}return;default:if(of(t)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Td(e,t,m,i,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!=null&&Oe(e,t,u,i,n,null))}function fC(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,c=null,u=null,f=null,d=null,m=null;for(p in n){var g=n[p];if(n.hasOwnProperty(p)&&g!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":f=g;default:i.hasOwnProperty(p)||Oe(e,t,p,null,i,g)}}for(var h in i){var p=i[h];if(g=n[h],i.hasOwnProperty(h)&&(p!=null||g!=null))switch(h){case"type":r=p;break;case"name":o=p;break;case"checked":d=p;break;case"defaultChecked":m=p;break;case"value":c=p;break;case"defaultValue":u=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(J(137,t));break;default:p!==g&&Oe(e,t,h,p,i,g)}}Ou(e,c,u,f,d,m,r,o);return;case"select":p=c=u=h=null;for(r in n)if(f=n[r],n.hasOwnProperty(r)&&f!=null)switch(r){case"value":break;case"multiple":p=f;default:i.hasOwnProperty(r)||Oe(e,t,r,null,i,f)}for(o in i)if(r=i[o],f=n[o],i.hasOwnProperty(o)&&(r!=null||f!=null))switch(o){case"value":h=r;break;case"defaultValue":u=r;break;case"multiple":c=r;default:r!==f&&Oe(e,t,o,r,i,f)}t=u,n=c,i=p,h!=null?pl(e,!!n,h,!1):!!i!=!!n&&(t!=null?pl(e,!!n,t,!0):pl(e,!!n,n?[]:"",!1));return;case"textarea":p=h=null;for(u in n)if(o=n[u],n.hasOwnProperty(u)&&o!=null&&!i.hasOwnProperty(u))switch(u){case"value":break;case"children":break;default:Oe(e,t,u,null,i,o)}for(c in i)if(o=i[c],r=n[c],i.hasOwnProperty(c)&&(o!=null||r!=null))switch(c){case"value":h=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(J(91));break;default:o!==r&&Oe(e,t,c,o,i,r)}dx(e,h,p);return;case"option":for(var b in n)if(h=n[b],n.hasOwnProperty(b)&&h!=null&&!i.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Oe(e,t,b,null,i,h)}for(f in i)if(h=i[f],p=n[f],i.hasOwnProperty(f)&&h!==p&&(h!=null||p!=null))switch(f){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Oe(e,t,f,h,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!=null&&!i.hasOwnProperty(v)&&Oe(e,t,v,null,i,h);for(d in i)if(h=i[d],p=n[d],i.hasOwnProperty(d)&&h!==p&&(h!=null||p!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(J(137,t));break;default:Oe(e,t,d,h,i,p)}return;default:if(of(t)){for(var E in n)h=n[E],n.hasOwnProperty(E)&&h!==void 0&&!i.hasOwnProperty(E)&&Td(e,t,E,void 0,i,h);for(m in i)h=i[m],p=n[m],!i.hasOwnProperty(m)||h===p||h===void 0&&p===void 0||Td(e,t,m,h,i,p);return}}for(var C in n)h=n[C],n.hasOwnProperty(C)&&h!=null&&!i.hasOwnProperty(C)&&Oe(e,t,C,null,i,h);for(g in i)h=i[g],p=n[g],!i.hasOwnProperty(g)||h===p||h==null&&p==null||Oe(e,t,g,h,i,p)}var Sd=null,wd=null;function za(e){return e.nodeType===9?e:e.ownerDocument}function Vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hv(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mu=null;function mC(){var e=window.event;return e&&e.type==="popstate"?e===Mu?!1:(Mu=e,!0):(Mu=null,!1)}var gv=typeof setTimeout=="function"?setTimeout:void 0,hC=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(e){return Bh.resolve(null).then(e).catch(pC)}:gv;function pC(e){setTimeout(function(){throw e})}function io(e){return e==="head"}function Fh(e,t){var n=t,i=0,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var c=e.ownerDocument;if(n&1&&Gr(c.documentElement),n&2&&Gr(c.body),n&4)for(n=c.head,Gr(n),c=n.firstChild;c;){var u=c.nextSibling,f=c.nodeName;c[ds]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=u}}if(o===0){e.removeChild(r),os(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);os(t)}function kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kd(n),nf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function xC(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ds])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Bn(e.nextSibling),e===null)break}return null}function yC(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bn(e.nextSibling),e===null))return null;return e}function Md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function vC(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Ad=null;function $h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function pv(e,t,n){switch(t=za(n),e){case"html":if(e=t.documentElement,!e)throw Error(J(452));return e;case"head":if(e=t.head,!e)throw Error(J(453));return e;case"body":if(e=t.body,!e)throw Error(J(454));return e;default:throw Error(J(451))}}function Gr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);nf(e)}var jn=new Map,Gh=new Set;function qa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var bi=Ge.d;Ge.d={f:bC,r:CC,D:TC,C:SC,L:wC,m:EC,X:MC,S:kC,M:AC};function bC(){var e=bi.f(),t=gc();return e||t}function CC(e){var t=Gl(e);t!==null&&t.tag===5&&t.type==="form"?cy(t):bi.r(e)}var ql=typeof document>"u"?null:document;function xv(e,t,n){var i=ql;if(i&&typeof t=="string"&&t){var o=Mn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Gh.has(o)||(Gh.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Lt(t,"link",e),Mt(t),i.head.appendChild(t)))}}function TC(e){bi.D(e),xv("dns-prefetch",e,null)}function SC(e,t){bi.C(e,t),xv("preconnect",e,t)}function wC(e,t,n){bi.L(e,t,n);var i=ql;if(i&&e&&t){var o='link[rel="preload"][as="'+Mn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Mn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Mn(n.imageSizes)+'"]')):o+='[href="'+Mn(e)+'"]';var r=o;switch(t){case"style":r=Vl(e);break;case"script":r=Ol(e)}jn.has(r)||(e=Qe({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),jn.set(r,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Cs(r))||t==="script"&&i.querySelector(Ts(r))||(t=i.createElement("link"),Lt(t,"link",e),Mt(t),i.head.appendChild(t)))}}function EC(e,t){bi.m(e,t);var n=ql;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Mn(i)+'"][href="'+Mn(e)+'"]',r=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ol(e)}if(!jn.has(r)&&(e=Qe({rel:"modulepreload",href:e},t),jn.set(r,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ts(r)))return}i=n.createElement("link"),Lt(i,"link",e),Mt(i),n.head.appendChild(i)}}}function kC(e,t,n){bi.S(e,t,n);var i=ql;if(i&&e){var o=gl(i).hoistableStyles,r=Vl(e);t=t||"default";var c=o.get(r);if(!c){var u={loading:0,preload:null};if(c=i.querySelector(Cs(r)))u.loading=5;else{e=Qe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=jn.get(r))&&Ff(e,n);var f=c=i.createElement("link");Mt(f),Lt(f,"link",e),f._p=new Promise(function(d,m){f.onload=d,f.onerror=m}),f.addEventListener("load",function(){u.loading|=1}),f.addEventListener("error",function(){u.loading|=2}),u.loading|=4,ha(c,t,i)}c={type:"stylesheet",instance:c,count:1,state:u},o.set(r,c)}}}function MC(e,t){bi.X(e,t);var n=ql;if(n&&e){var i=gl(n).hoistableScripts,o=Ol(e),r=i.get(o);r||(r=n.querySelector(Ts(o)),r||(e=Qe({src:e,async:!0},t),(t=jn.get(o))&&$f(e,t),r=n.createElement("script"),Mt(r),Lt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function AC(e,t){bi.M(e,t);var n=ql;if(n&&e){var i=gl(n).hoistableScripts,o=Ol(e),r=i.get(o);r||(r=n.querySelector(Ts(o)),r||(e=Qe({src:e,async:!0,type:"module"},t),(t=jn.get(o))&&$f(e,t),r=n.createElement("script"),Mt(r),Lt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function Hh(e,t,n,i){var o=(o=zi.current)?qa(o):null;if(!o)throw Error(J(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Vl(n.href),n=gl(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Vl(n.href);var r=gl(o).hoistableStyles,c=r.get(e);if(c||(o=o.ownerDocument||o,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,c),(r=o.querySelector(Cs(e)))&&!r._p&&(c.instance=r,c.state.loading=5),jn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jn.set(e,n),r||NC(o,e,n,c.state))),t&&i===null)throw Error(J(528,""));return c}if(t&&i!==null)throw Error(J(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ol(n),n=gl(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(J(444,e))}}function Vl(e){return'href="'+Mn(e)+'"'}function Cs(e){return'link[rel="stylesheet"]['+e+"]"}function yv(e){return Qe({},e,{"data-precedence":e.precedence,precedence:null})}function NC(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Lt(t,"link",n),Mt(t),e.head.appendChild(t))}function Ol(e){return'[src="'+Mn(e)+'"]'}function Ts(e){return"script[async]"+e}function zh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Mn(n.href)+'"]');if(i)return t.instance=i,Mt(i),i;var o=Qe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Mt(i),Lt(i,"style",o),ha(i,n.precedence,e),t.instance=i;case"stylesheet":o=Vl(n.href);var r=e.querySelector(Cs(o));if(r)return t.state.loading|=4,t.instance=r,Mt(r),r;i=yv(n),(o=jn.get(o))&&Ff(i,o),r=(e.ownerDocument||e).createElement("link"),Mt(r);var c=r;return c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(r,"link",i),t.state.loading|=4,ha(r,n.precedence,e),t.instance=r;case"script":return r=Ol(n.src),(o=e.querySelector(Ts(r)))?(t.instance=o,Mt(o),o):(i=n,(o=jn.get(r))&&(i=Qe({},n),$f(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Mt(o),Lt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(J(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,ha(i,n.precedence,e));return t.instance}function ha(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,r=o,c=0;c<i.length;c++){var u=i[c];if(u.dataset.precedence===t)r=u;else if(r!==o)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Ff(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $f(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ga=null;function qh(e,t,n){if(ga===null){var i=new Map,o=ga=new Map;o.set(n,i)}else o=ga,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var r=n[o];if(!(r[ds]||r[Ft]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(t)||"";c=e+c;var u=i.get(c);u?u.push(r):i.set(c,[r])}}return i}function Oh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function _C(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function vv(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var es=null;function RC(){}function jC(e,t,n){if(es===null)throw Error(J(475));var i=es;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=Vl(n.href),r=e.querySelector(Cs(o));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Oa.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,Mt(r);return}r=e.ownerDocument||e,n=yv(n),(o=jn.get(o))&&Ff(n,o),r=r.createElement("link"),Mt(r);var c=r;c._p=new Promise(function(u,f){c.onload=u,c.onerror=f}),Lt(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Oa.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function DC(){if(es===null)throw Error(J(475));var e=es;return e.stylesheets&&e.count===0&&Nd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Nd(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Oa(){if(this.count--,this.count===0){if(this.stylesheets)Nd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ya=null;function Nd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ya=new Map,t.forEach(IC,e),Ya=null,Oa.call(e))}function IC(e,t){if(!(t.state.loading&4)){var n=Ya.get(e);if(n)var i=n.get(null);else{n=new Map,Ya.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var c=o[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),i=c)}i&&n.set(null,i)}o=t.instance,c=o.getAttribute("data-precedence"),r=n.get(c)||i,r===i&&n.set(null,o),n.set(c,o),this.count++,i=Oa.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),r?r.parentNode.insertBefore(o,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ts={$$typeof:ci,Provider:null,Consumer:null,_currentValue:yo,_currentValue2:yo,_threadCount:0};function LC(e,t,n,i,o,r,c,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wc(0),this.hiddenUpdates=Wc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function bv(e,t,n,i,o,r,c,u,f,d,m,g){return e=new LC(e,t,n,c,u,f,d,g),t=1,r===!0&&(t|=24),r=hn(3,null,null,t),e.current=r,r.stateNode=e,t=gf(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},xf(r),e}function Cv(e){return e?(e=ul,e):ul}function Tv(e,t,n,i,o,r){o=Cv(o),i.context===null?i.context=o:i.pendingContext=o,i=qi(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Oi(e,i,t),n!==null&&(yn(n,e,t),Ir(n,e,t))}function Yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gf(e,t){Yh(e,t),(e=e.alternate)&&Yh(e,t)}function Sv(e){if(e.tag===13){var t=Hl(e,67108864);t!==null&&yn(t,e,67108864),Gf(e,67108864)}}var Ja=!0;function UC(e,t,n,i){var o=we.T;we.T=null;var r=Ge.p;try{Ge.p=2,Hf(e,t,n,i)}finally{Ge.p=r,we.T=o}}function PC(e,t,n,i){var o=we.T;we.T=null;var r=Ge.p;try{Ge.p=8,Hf(e,t,n,i)}finally{Ge.p=r,we.T=o}}function Hf(e,t,n,i){if(Ja){var o=_d(i);if(o===null)ku(e,t,i,Wa,n),Jh(e,i);else if(BC(o,e,t,n,i))i.stopPropagation();else if(Jh(e,i),t&4&&-1<VC.indexOf(e)){for(;o!==null;){var r=Gl(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=go(r.pendingLanes);if(c!==0){var u=r;for(u.pendingLanes|=2,u.entangledLanes|=2;c;){var f=1<<31-pn(c);u.entanglements[1]|=f,c&=~f}ei(r),!(qe&6)&&(Ba=Kn()+500,bs(0))}}break;case 13:u=Hl(r,2),u!==null&&yn(u,r,2),gc(),Gf(r,2)}if(r=_d(i),r===null&&ku(e,t,i,Wa,n),r===o)break;o=r}o!==null&&i.stopPropagation()}else ku(e,t,i,null,n)}}function _d(e){return e=lf(e),zf(e)}var Wa=null;function zf(e){if(Wa=null,e=ol(e),e!==null){var t=ss(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Jp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Wa=e,null}function wv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S2()){case Zp:return 2;case Qp:return 8;case Sa:case w2:return 32;case ex:return 268435456;default:return 32}default:return 32}}var Rd=!1,Wi=null,Xi=null,Ki=null,ns=new Map,is=new Map,Vi=[],VC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jh(e,t){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(t.pointerId)}}function br(e,t,n,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=Gl(t),t!==null&&Sv(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function BC(e,t,n,i,o){switch(t){case"focusin":return Wi=br(Wi,e,t,n,i,o),!0;case"dragenter":return Xi=br(Xi,e,t,n,i,o),!0;case"mouseover":return Ki=br(Ki,e,t,n,i,o),!0;case"pointerover":var r=o.pointerId;return ns.set(r,br(ns.get(r)||null,e,t,n,i,o)),!0;case"gotpointercapture":return r=o.pointerId,is.set(r,br(is.get(r)||null,e,t,n,i,o)),!0}return!1}function Ev(e){var t=ol(e.target);if(t!==null){var n=ss(t);if(n!==null){if(t=n.tag,t===13){if(t=Jp(n),t!==null){e.blockedOn=t,j2(e.priority,function(){if(n.tag===13){var i=xn();i=ef(i);var o=Hl(n,i);o!==null&&yn(o,n,i),Gf(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_d(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Ju=i,n.target.dispatchEvent(i),Ju=null}else return t=Gl(n),t!==null&&Sv(t),e.blockedOn=n,!1;t.shift()}return!0}function Wh(e,t,n){pa(e)&&n.delete(t)}function FC(){Rd=!1,Wi!==null&&pa(Wi)&&(Wi=null),Xi!==null&&pa(Xi)&&(Xi=null),Ki!==null&&pa(Ki)&&(Ki=null),ns.forEach(Wh),is.forEach(Wh)}function Ws(e,t){e.blockedOn===t&&(e.blockedOn=null,Rd||(Rd=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,FC)))}var Xs=null;function Xh(e){Xs!==e&&(Xs=e,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,function(){Xs===e&&(Xs=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(zf(i||n)===null)continue;break}var r=Gl(n);r!==null&&(e.splice(t,3),t-=3,ud(r,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function os(e){function t(f){return Ws(f,e)}Wi!==null&&Ws(Wi,e),Xi!==null&&Ws(Xi,e),Ki!==null&&Ws(Ki,e),ns.forEach(t),is.forEach(t);for(var n=0;n<Vi.length;n++){var i=Vi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Vi.length&&(n=Vi[0],n.blockedOn===null);)Ev(n),n.blockedOn===null&&Vi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],r=n[i+1],c=o[tn]||null;if(typeof r=="function")c||Xh(n);else if(c){var u=null;if(r&&r.hasAttribute("formAction")){if(o=r,c=r[tn]||null)u=c.formAction;else if(zf(o)!==null)continue}else u=c.action;typeof u=="function"?n[i+1]=u:(n.splice(i,3),i-=3),Xh(n)}}}function qf(e){this._internalRoot=e}vc.prototype.render=qf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));var n=t.current,i=xn();Tv(n,i,e,t,null,null)};vc.prototype.unmount=qf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tv(e.current,2,null,e,null,null),gc(),t[$l]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var t=lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vi.length&&t!==0&&t<Vi[n].priority;n++);Vi.splice(n,0,e),n===0&&Ev(e)}};var Kh=Op.version;if(Kh!=="19.1.1")throw Error(J(527,Kh,"19.1.1"));Ge.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=p2(t),e=e!==null?Wp(e):null,e=e===null?null:e.stateNode,e};var $C={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:we,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{as=Ks.inject($C),gn=Ks}catch{}}ic.createRoot=function(e,t){if(!Yp(e))throw Error(J(299));var n=!1,i="",o=by,r=Cy,c=Ty,u=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(u=t.unstable_transitionCallbacks)),t=bv(e,1,!1,null,null,n,i,o,r,c,u,null),e[$l]=t.current,Bf(e),new qf(t)};ic.hydrateRoot=function(e,t,n){if(!Yp(e))throw Error(J(299));var i=!1,o="",r=by,c=Cy,u=Ty,f=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(u=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(f=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=bv(e,1,!0,t,n??null,i,o,r,c,u,f,d),t.context=Cv(null),n=t.current,i=xn(),i=ef(i),o=qi(i),o.callback=null,Oi(n,o,i),n=i,t.current.lanes=n,us(t,n),ei(t),e[$l]=t.current,Bf(e),new vc(t)};ic.version="19.1.1";function kv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kv)}catch(e){console.error(e)}}kv(),Fp.exports=ic;var GC=Fp.exports;const HC=_p(GC),Zs=(e,t,n,i)=>{const o=[];for(let r=1;r<=i;r++){const c=r/i,u=1-c,f=u*u*e.x+2*u*c*t.x+c*c*n.x,d=u*u*e.y+2*u*c*t.y+c*c*n.y;o.push({x:f,y:d})}return o},Mv=(e,t)=>{const n=e.length;if(n<2)return e;const i=[],o=8;if(t){if(n<3)return e;const r={x:(e[n-1].x+e[0].x)/2,y:(e[n-1].y+e[0].y)/2};i.push(r);for(let c=0;c<n;c++){const u=e[c],f=e[(c+1)%n],d=u,m={x:(u.x+f.x)/2,y:(u.y+f.y)/2},g=i[i.length-1];i.push(...Zs(g,d,m,o))}}else{if(n<3)return e;i.push(e[0]);const r={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};i.push(...Zs(e[0],e[0],r,o));for(let u=1;u<n-1;u++){const f=e[u-1],d=e[u],m=e[u+1],g={x:(f.x+d.x)/2,y:(f.y+d.y)/2},h=d,p={x:(d.x+m.x)/2,y:(d.y+m.y)/2};i.push(...Zs(g,h,p,o))}const c={x:(e[n-2].x+e[n-1].x)/2,y:(e[n-2].y+e[n-1].y)/2};i.push(...Zs(c,e[n-1],e[n-1],o))}return i},zC=e=>{const t=e.points.filter(n=>n);return t.length<2?t:e.smooth?Mv(t,e.isClosed):t},Sl=(e,t,n)=>{const i=e.filter(c=>c);if(i.length===0)return"";if(i.length<2){let c=`M ${i[0].x} ${i[0].y}`;return n&&(c+=" Z"),c}const o=t?Mv(i,n):i;let r=Wf(o);return n&&(r+=" Z"),r},Of=e=>{const{x:t,y:n,width:i,height:o,start:r,extent:c,style:u}=e;if(i<=0||o<=0||c===0)return"";const f=i/2,d=o/2,m=t+f,g=n+d;if(Math.abs(c)>=360){const A=m+f,D=g,_=m-f,L=`A ${f} ${d} 0 0 0 ${_} ${g}`,P=`A ${f} ${d} 0 0 0 ${A} ${D}`;return`M ${A} ${D} ${L} ${P}`}const h=r*Math.PI/180,p=(r+c)*Math.PI/180,b=m+f*Math.cos(h),v=g-d*Math.sin(h),E=m+f*Math.cos(p),C=g-d*Math.sin(p),x=Math.abs(c)>180?1:0,S=c>0?0:1,w=`A ${f} ${d} 0 ${x} ${S} ${E} ${C}`;return u==="arc"?`M ${b} ${v} ${w}`:u==="chord"?`M ${b} ${v} ${w} Z`:`M ${m} ${g} L ${b} ${v} ${w} Z`},ls=e=>{const{x:t,y:n,width:i,height:o,topVertexOffset:r=0,isFlippedVertically:c}=e,f=t+i/2+r*i;return c?[{x:f,y:n+o},{x:t+i,y:n},{x:t,y:n}]:[{x:f,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Yf=e=>{const{x:t,y:n,width:i,height:o,isFlippedHorizontally:r,isFlippedVertically:c}=e;let u=[{x:t,y:n+o},{x:t,y:n},{x:t+i,y:n+o}];if(r){const f=t+i/2;u=u.map(d=>({x:f-(d.x-f),y:d.y}))}if(c){const f=n+o/2;u=u.map(d=>({x:d.x,y:f-(d.y-f)}))}return u},Jf=e=>{const{x:t,y:n,width:i,height:o}=e;return[{x:t+i/2,y:n},{x:t+i,y:n+o/2},{x:t+i/2,y:n+o},{x:t,y:n+o/2}]},bc=e=>{const{x:t,y:n,width:i,height:o,topLeftOffsetRatio:r,topRightOffsetRatio:c,isFlippedVertically:u}=e,f=i*r,d=i*c;return u?[{x:t,y:n},{x:t+i,y:n},{x:t+i-d,y:n+o},{x:t+f,y:n+o}]:[{x:t+f,y:n},{x:t+i-d,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]},Cc=e=>{const{x:t,y:n,width:i,height:o,angle:r,isFlippedVertically:c}=e;if(o===0)return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}];const f=Math.max(1,Math.min(179,r))*Math.PI/180,d=o/Math.tan(f),m=i-Math.abs(d);return m<0?[{x:t,y:n},{x:t,y:n},{x:t,y:n},{x:t,y:n}]:c?d>=0?[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t+d,y:n+o}]:[{x:t-d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:d>=0?[{x:t+d,y:n},{x:t+i,y:n},{x:t+m,y:n+o},{x:t,y:n+o}]:[{x:t,y:n},{x:t+m,y:n},{x:t+i,y:n+o},{x:t-d,y:n+o}]},Bl=e=>{const t=[],{cx:n,cy:i,radius:o,sides:r,innerRadius:c,isFlippedHorizontally:u,isFlippedVertically:f}=e,d=Math.PI*2/r,m=-Math.PI/2,g=c!==void 0,h=g?r*2:r;for(let p=0;p<h;p++){const b=g&&p%2!==0?c:o;if(b===void 0)continue;const v=p*d/(g?2:1)+m;let E=n+Math.cos(v)*b,C=i+Math.sin(v)*b;u&&(E=n-(E-n)),f&&(C=i-(C-i)),t.push({x:E,y:C})}return t},Wf=e=>{const t=e.filter(o=>o);if(t.length===0)return"";const[n,...i]=t;return`M ${n.x} ${n.y} ${i.map(o=>`L ${o.x} ${o.y}`).join(" ")}`},Av=e=>{if(!e.isClosed)return!1;let t=[...e.points].filter(o=>o);if(t.length>1&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&t.pop(),t.length!==4)return!1;const n=new Set(t.map(o=>o.x)),i=new Set(t.map(o=>o.y));return!(n.size!==2||i.size!==2)},qC=e=>{const{radius:t,sides:n}=e;return n<2?0:2*t*Math.sin(Math.PI/n)},OC=e=>{const{sideLength:t,sides:n}=e;return n<2?0:t/(2*Math.sin(Math.PI/n))},Nv=e=>{const n=document.createElement("canvas").getContext("2d");return n&&(n.font=e),n},Tc=e=>{const{text:t,font:n,fontSize:i,weight:o,slant:r,width:c}=e,u=`${r==="italic"?"italic":"normal"} ${o} ${i}px ${n}`,f=Nv(u);if(!f)return t.split(`
`);const d=t.split(`
`),m=[];return d.forEach(g=>{if(c<=0){m.push(g);return}const h=g.split(" ");let p="";for(let b=0;b<h.length;b++){const v=h[b],E=p+(p?" ":"")+v;f.measureText(E).width>c&&b>0?(m.push(p),p=v):p=E}m.push(p)}),m},to=e=>{const{font:t,fontSize:n,weight:i,slant:o}=e,r=Tc(e);if(r.length===0)return{x:e.x,y:e.y,width:0,height:0};const c=`${o==="italic"?"italic":"normal"} ${i} ${n}px ${t}`,u=Nv(c);if(!u){const C=Math.max(...r.map(x=>x.length))*n*.6;return{x:e.x,y:e.y,width:C,height:r.length*n*1.2}}const f=u.measureText("M"),d=f.fontBoundingBoxAscent??n*.8,m=f.fontBoundingBoxDescent??n*.2,g=d+m,h=n*.2,p=g+(r.length-1)*(g+h),b=Math.max(...r.map(C=>u.measureText(C).width));let{x:v,y:E}=e;return["n","s","center"].includes(e.anchor)?v-=b/2:["ne","e","se"].includes(e.anchor)&&(v-=b),["w","e","center"].includes(e.anchor)?E-=p/2:["sw","s","se"].includes(e.anchor)&&(E-=p),{x:v,y:E,width:b,height:p}},rs=e=>{let t;switch(e.type){case"rectangle":case"arc":return{x:e.x,y:e.y,width:e.width,height:e.height};case"ellipse":return{x:e.cx-e.rx,y:e.cy-e.ry,width:e.rx*2,height:e.ry*2};case"text":return to(e);case"image":case"bitmap":return{x:e.x,y:e.y,width:e.width,height:e.height};case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"polygon":case"star":t=ti({...e,rotation:0})??[];break;case"bezier":case"polyline":t=e.points;break;case"line":case"pencil":t=e.points;break;default:return null}if(!t||t.length===0)return null;const n=t.filter(d=>!!d);if(n.length===0)return null;const i=n.map(d=>d.x),o=n.map(d=>d.y),r=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:r,y:c,width:u-r,height:f-c}},bt=e=>{if("cx"in e&&"cy"in e)return{x:e.cx,y:e.cy};const t="rotation"in e&&e.rotation!==0?{...e,rotation:0}:e,n=rs(t);return n?{x:n.x+n.width/2,y:n.y+n.height/2}:"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x+e.width/2,y:e.y+e.height/2}:null},He=(e,t,n)=>{const i=-n*(Math.PI/180),o=Math.cos(i),r=Math.sin(i),c=e.x-t.x,u=e.y-t.y;return{x:c*o-u*r+t.x,y:c*r+u*o+t.y}};function ti(e,t){let n;switch(e.type){case"line":case"pencil":n=e.points.filter(x=>x);break;case"polyline":case"bezier":n=zC(e);break;case"rectangle":case"image":case"bitmap":n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];break;case"text":{const x=to(e);if(!x)return null;n=[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}]}break;case"triangle":n=ls(e);break;case"right-triangle":n=Yf(e);break;case"rhombus":n=Jf(e);break;case"trapezoid":n=bc(e);break;case"parallelogram":n=Cc(e);break;case"polygon":case"star":n=Bl(e);break;case"ellipse":const i=e,o=Math.max(24,Math.round(Math.max(i.rx,i.ry)/4));n=Bl({id:e.id,cx:i.cx,cy:i.cy,radius:i.rx,sides:o,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth}).map(x=>({x:x.x,y:i.cy+(x.y-i.cy)*(i.ry/i.rx)}));break;case"arc":const{x:r,y:c,width:u,height:f,start:d,extent:m,style:g}=e,h=u/2,p=f/2,b=r+h,v=c+p,E=32,C=m/E;n=[],g==="pieslice"&&n.push({x:b,y:v});for(let x=0;x<=E;x++){const w=(d+x*C)*Math.PI/180;n.push({x:b+h*Math.cos(w),y:v-p*Math.sin(w)})}g==="pieslice"&&n.push({x:b,y:v});break;default:return null}if("rotation"in e&&e.rotation!==0){const i=t??(e.type==="text"?{x:e.x,y:e.y}:bt(e));return i?n.map(o=>He(o,i,e.rotation)):n}return n}const Xa=(e,t)=>{if(e.type==="ellipse"){const{cx:d,cy:m,rx:g,ry:h,rotation:p=0}=e,b=p*Math.PI/180,v=Math.cos(b),E=Math.sin(b),C=Math.pow(g*v,2)+Math.pow(h*E,2),x=Math.pow(g*E,2)+Math.pow(h*v,2),S=2*Math.sqrt(C),w=2*Math.sqrt(x);return{x:d-S/2,y:m-w/2,width:S,height:w}}const n=ti(e,t);if(!n||n.length===0)return"x"in e&&"y"in e&&"width"in e&&"height"in e?{x:e.x,y:e.y,width:e.width,height:e.height}:"cx"in e&&"cy"in e?{x:e.cx,y:e.cy,width:0,height:0}:null;const i=n.map(d=>d.x),o=n.map(d=>d.y),r=Math.min(...i),c=Math.min(...o),u=Math.max(...i),f=Math.max(...o);return{x:r,y:c,width:u-r,height:f-c}},Xf=e=>{if(e.type==="bezier"||e.type==="polyline"||e.type==="pencil"||e.type==="line")return e.points.filter(o=>o);const t={...e,rotation:0},n=ti(t);if(!n||n.length===0)return null;let i=e.type==="arc"&&(e.style==="pieslice"||e.style==="chord")||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","image","bitmap","text"].includes(e.type);if(e.type==="arc"&&e.style==="arc"&&(i=!1),i&&n.length>1){const o=n[0],r=n[n.length-1];if(Math.abs(o.x-r.x)<.01&&Math.abs(o.y-r.y)<.01)return n.slice(0,-1)}return n};function YC(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},r=o.x*o.x+o.y*o.y;if(r===0)return{point:t,t:0};let u=(i.x*o.x+i.y*o.y)/r;return u=Math.max(0,Math.min(1,u)),{point:{x:t.x+o.x*u,y:t.y+o.y*u},t:u}}const it={select:"Вибрати","edit-points":"Редагувати вузли",rectangle:"Прямокутник",square:"Квадрат",circle:"Коло",ellipse:"Еліпс",line:"Лінія",pencil:"Олівець",triangle:"Трикутник","right-triangle":"Прямокутний трикутник",polygon:"Багатокутник",star:"Зірка",polyline:"Ламана",rhombus:"Ромб",trapezoid:"Трапеція",parallelogram:"Паралелограм",bezier:"Крива Без'є",arc:"Дуга",pieslice:"Сектор",chord:"Сегмент",text:"Текст",image:"Зображення",bitmap:"Bitmap"},xa=[{name:"Суцільна лінія",pattern:[],description:"Суцільна лінія без штрихів."},{name:"Простий пунктир",pattern:[5,3],description:"Штрих 5px, пропуск 3px."},{name:"Довгі штрихи",pattern:[10,5],description:"Штрих 10px, пропуск 5px."},{name:"Дрібні точки",pattern:[2,2],description:"Штрих 2px, пропуск 2px (виглядає як точки)."},{name:"Розріджені точки",pattern:[2,4],description:"Штрих 2px, пропуск 4px."},{name:"Штрих-пунктир",pattern:[10,3,2,3],description:"Штрих 10px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Штрих і 2 точки",pattern:[15,3,2,3,2,3],description:"Штрих 15px, пропуск 3px, штрих 2px, пропуск 3px, штрих 2px, пропуск 3px."},{name:"Подвійна точка",pattern:[2,3,2,6],description:"Штрих 2px, пропуск 3px, штрих 2px, пропуск 6px."},{name:"Довгий+короткий штрих",pattern:[20,5,5,5],description:"Штрих 20px, пропуск 5px, штрих 5px, пропуск 5px."}],_v=e=>{if(e.type==="text")return"text";if(e.type==="image")return"image";if(e.type==="bitmap")return"bitmap";if(e.type==="ellipse"&&e.isAspectRatioLocked)return"oval";if(e.type==="arc")return e.rotation===0?"arc":e.style==="arc"?"line":"polygon";if(!("rotation"in e)||e.rotation===0){if(e.type==="rectangle")return"rectangle";if(e.type==="ellipse")return"oval";if(e.type==="polyline"&&e.isClosed&&Av(e))return"rectangle"}return e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed?"line":"polygon"},Yt=e=>{if(e.type==="arc")return it[e.style];const t=_v(e);return t==="polygon"&&e.type!=="polygon"&&e.type!=="star"?"Багатокутник":t==="rectangle"&&e.type==="polyline"?it.rectangle:e.type==="rectangle"&&e.isAspectRatioLocked?it.square:e.type==="ellipse"&&e.isAspectRatioLocked?it.circle:e.type==="polyline"?e.isClosed?"Багатокутник":it.polyline:e.type==="bezier"?e.isClosed?"Багатокутник":it.bezier:it[e.type]},jd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M23 4v6h-6'/%3E%3Cpath d='M20.49 15a9 9 0 1 1-2.12-9.36L23 10'/%3E%3C/svg%3E") 10 10, auto`,Dd=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M3 9 L21 9 L17 5'/%3E%3Cpath d='M21 15 L3 15 L7 19'/%3E%3C/svg%3E") 10 10, auto`,JC=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' style='filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.9))'%3E%3Cpath d='M4.2 3.2l14 8-6 2-2 6-6-14z' fill='white' stroke-width='0'/%3E%3Cpath d='M14 18h6m-3-3v6' stroke='white' stroke-width='2.5' stroke-linecap='round' fill='none'/%3E%3C/svg%3E") 4 3, auto`,Sc=e=>e.startsWith("Tk")?e==="TkFixedFont"?"monospace":"sans-serif":e.includes(" ")?`"${e}", sans-serif`:`${e}, sans-serif`,Rv=new Set(Object.values(it));Rv.add("Багатокутник");const Ka=e=>Rv.has(e),WC=8,XC=24,KC=20,ZC=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";default:return"default"}},QC=({shape:e,setAction:t,svgRef:n,activeTool:i,getSnappedMousePosition:o,viewTransform:r,getPointerPosition:c,activePointIndex:u,setActivePointIndex:f,updateShape:d,action:m})=>{if(!e)return null;const g=WC/r.scale,h=XC/r.scale,p=1/r.scale,b=KC/r.scale,v=e.type==="text"?{x:e.x,y:e.y}:bt(e);if(!v)return null;const E="rotation"in e?e.rotation??0:0,C=T.useMemo(()=>e?(m==null?void 0:m.type)==="point-editing"&&"rotation"in m.initialShape&&m.initialShape.rotation!==0?Xa(e,m.center):Xa(e):null,[e,m]),x=C&&l.jsxs("g",{style:{pointerEvents:"none"},children:[l.jsx("rect",{x:C.x,y:C.y,width:C.width,height:C.height,fill:"none",stroke:"var(--text-tertiary)",strokeWidth:p,strokeDasharray:`${3/r.scale} ${3/r.scale}`}),l.jsx("circle",{cx:C.x,cy:C.y,r:g/2.5,fill:"var(--text-tertiary)"}),l.jsx("circle",{cx:C.x+C.width,cy:C.y+C.height,r:g/2.5,fill:"var(--text-tertiary)"})]}),S=T.useMemo(()=>{if(e.type!=="text")return null;const H=e,oe=g/1.5,le=oe*.6;return l.jsxs("g",{style:{pointerEvents:"none"},"aria-label":"Точка прив'язки тексту",children:[l.jsx("circle",{cx:H.x,cy:H.y,r:oe,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p}),l.jsx("line",{x1:H.x-le,y1:H.y,x2:H.x+le,y2:H.y,stroke:"var(--special-handle-stroke)",strokeWidth:p}),l.jsx("line",{x1:H.x,y1:H.y-le,x2:H.x,y2:H.y+le,stroke:"var(--special-handle-stroke)",strokeWidth:p})]})},[e,g,p]);if(i==="edit-points"&&e.type!=="text"){const H=Xf(e);if(!H)return null;let oe;(m==null?void 0:m.type)==="point-editing"?oe=H.map(G=>He(G,m.center,E)):oe=H.map(G=>He(G,v,E));const le=(G,te)=>{G.stopPropagation(),f(te);const X=bt(e);if(!X)return;let y=e;if(e.type!=="polyline"&&e.type!=="line"&&e.type!=="pencil"&&e.type!=="bezier"){const V=e.type!=="arc"||e.style!=="arc",B=ti({...e,rotation:0});if(!B)return;const me={id:e.id,name:void 0,type:"polyline",points:B,isClosed:V,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&V?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0,stipple:"stipple"in e?e.stipple:void 0,dash:"dash"in e?e.dash:void 0},re=e.name,ye=!re||Ka(re);me.name=ye?Yt(me):re,d(me),y=me}t({type:"point-editing",initialShape:y,pointIndex:te,center:X})},be=(G,te,X)=>{G.preventDefault(),G.stopPropagation();const y=o(c(G)),V=He(y,v,-E),B=H[te],me=H[X],{point:re}=YC(V,B,me),ye=[...H];ye.splice(X,0,re);let Ue;if(e.type==="bezier")Ue={...e,points:ye};else if(e.type==="polyline"||e.type==="line"||e.type==="pencil")Ue={...e,points:ye};else{const _t=e.type!=="arc"||e.style!=="arc",Ut={id:e.id,name:void 0,type:"polyline",points:ye,isClosed:_t,rotation:"rotation"in e?e.rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"&&_t?e.fill:"none",joinstyle:"joinstyle"in e&&e.joinstyle?e.joinstyle:void 0},ut=e.name,on=!ut||Ka(ut);Ut.name=on?Yt(Ut):ut,Ue=Ut}const et=bt(e);et&&(d(Ue),f(X),t({type:"point-editing",initialShape:Ue,pointIndex:X,center:et}))},Ee=e.type==="polyline"&&e.isClosed||e.type==="bezier"&&e.isClosed||["rectangle","ellipse","polygon","star","triangle","right-triangle","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(e.type);return l.jsxs("g",{children:[x,oe.map((G,te)=>{if(!Ee&&te===oe.length-1)return null;const X=(te+1)%oe.length,y=oe[X];return l.jsx("line",{x1:G.x,y1:G.y,x2:y.x,y2:y.y,stroke:"transparent",strokeWidth:h,style:{cursor:m?"inherit":"copy"},onMouseDown:V=>be(V,te,X)},`segment-${te}`)}),oe.map((G,te)=>{const X=te===u;return l.jsxs("g",{onMouseDown:y=>le(y,te),onTouchStart:y=>le(y,te),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[l.jsx("circle",{cx:G.x,cy:G.y,r:X?g*.75:g/2,fill:X?"var(--selection-stroke)":"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:G.x,cy:G.y,r:h/2,fill:"transparent"})]},`point-${te}`)})]})}const w=rs(e);if(!w||w.width<=0&&w.height<=0)return null;if(e.type==="line"){const[H,oe]=e.points,le=He(H,v,E),be=He(oe,v,E),Ee=rs(e),G=e.rotationHandlePosition,te={x:v.x,y:G==="bottom"?Ee.y+Ee.height+b:Ee.y-b},X=He(te,v,E),y=(B,me)=>{B.stopPropagation();const re=bt(e);t({type:"resizing",handle:me,initialShape:e,anchorPointGlobal:me==="line-start"?be:le,initialShapeProps:{rotationCenter:v,geometricCenter:re,bbox:w}})},V=B=>{if(B.stopPropagation(),!n.current)return;const me=bt(e);if(!me)return;const re="touches"in B?B.touches[0]:B;if(!re)return;const ye=o(c(re)),Ue=Math.atan2(ye.y-me.y,ye.x-me.x),_t=e.rotation*Math.PI/180-Ue;t({type:"rotating",initialShape:e,center:me,startAngle:_t})};return l.jsxs(St.Fragment,{children:[x,l.jsxs("g",{children:[l.jsx("line",{x1:le.x,y1:le.y,x2:be.x,y2:be.y,stroke:"var(--selection-stroke)",strokeWidth:6/r.scale,strokeOpacity:"0.3",strokeLinecap:"round",style:{pointerEvents:"none"}}),l.jsxs("g",{onMouseDown:B=>y(B,"line-start"),onTouchStart:B=>y(B,"line-start"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[l.jsx("circle",{cx:le.x,cy:le.y,r:g/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:le.x,cy:le.y,r:h/2,fill:"transparent"})]}),l.jsxs("g",{onMouseDown:B=>y(B,"line-end"),onTouchStart:B=>y(B,"line-end"),"data-handle":"true",style:{cursor:m?"inherit":"grab"},children:[l.jsx("circle",{cx:be.x,cy:be.y,r:g/1.5,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:be.x,cy:be.y,r:h/2,fill:"transparent"})]}),l.jsxs("g",{onMouseDown:V,onTouchStart:V,"data-handle":"true",style:{cursor:m?"inherit":jd},children:[l.jsx("line",{x1:v.x,y1:v.y,x2:X.x,y2:X.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:X.x,cy:X.y,r:g/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${-E} ${X.x} ${X.y})`}),l.jsx("circle",{cx:X.x,cy:X.y,r:h/2,fill:"transparent"})]})]})]})}const A=[{name:"top-left",x:w.x,y:w.y},{name:"top-center",x:w.x+w.width/2,y:w.y},{name:"top-right",x:w.x+w.width,y:w.y},{name:"middle-left",x:w.x,y:w.y+w.height/2},{name:"middle-right",x:w.x+w.width,y:w.y+w.height/2},{name:"bottom-left",x:w.x,y:w.y+w.height},{name:"bottom-center",x:w.x+w.width/2,y:w.y+w.height},{name:"bottom-right",x:w.x+w.width,y:w.y+w.height}],D=(H,oe)=>{H.stopPropagation();const le=bt(e),Ee={"top-left":"bottom-right","top-center":"bottom-center","top-right":"bottom-left","middle-left":"middle-right","middle-right":"middle-left","bottom-left":"top-right","bottom-center":"top-center","bottom-right":"top-left"}[oe],G=A.find(X=>X.name===Ee);if(!G)return;const te=He({x:G.x,y:G.y},v,E);t({type:"resizing",handle:oe,initialShape:e,anchorPointGlobal:te,initialShapeProps:{rotationCenter:v,geometricCenter:le,bbox:w}})},_=e.type==="text"?w.x+w.width/2:v.x,M=e.rotationHandlePosition,L={x:_,y:M==="bottom"?w.y+w.height+b:w.y-b},P=He(L,v,E),Z=H=>{if(H.stopPropagation(),!n.current)return;const oe=bt(e);if(!oe)return;const le="touches"in H?H.touches[0]:H;if(!le)return;const be=o(c(le)),Ee=Math.atan2(-(be.y-oe.y),be.x-oe.x),te=("rotation"in e?e.rotation:0)*Math.PI/180-Ee;t({type:"rotating",initialShape:e,center:oe,startAngle:te})},pe=(H,oe,le)=>{H.stopPropagation();const be="touches"in H?H.touches[0]:H;if(!be)return;const Ee=o(c(be));switch(oe){case"arc-angle":if(e.type!=="arc")return;const G=bt(e),te=Math.atan2(-(Ee.y-G.y),Ee.x-G.x)*180/Math.PI;t({type:"arc-angle-editing",handle:le,initialShape:e,center:G,initialMouseAngle:te});break;case"trapezoid-offset":if(e.type!=="trapezoid")return;t({type:"trapezoid-offset-editing",handle:le,initialShape:e});break;case"parallelogram-angle":if(e.type!=="parallelogram")return;t({type:"parallelogram-angle-editing",initialShape:e});break;case"triangle-vertex":if(e.type!=="triangle")return;t({type:"triangle-vertex-editing",initialShape:e});break;case"star-inner-radius":if(e.type!=="star")return;t({type:"star-inner-radius-editing",initialShape:e,center:bt(e)});break}},Te=(H,oe)=>l.jsxs("g",{onMouseDown:oe,onTouchStart:oe,"data-handle":"true",style:{cursor:m?"inherit":Dd},children:[l.jsx("circle",{cx:H.x,cy:H.y,r:g/1.5,fill:"var(--special-handle-fill)",stroke:"var(--special-handle-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:H.x,cy:H.y,r:h/2,fill:"transparent"})]}),_e=H=>{const{x:oe,y:le,width:be,height:Ee,start:G,extent:te}=H,X=be/2,y=Ee/2,V=oe+X,B=le+y,me=G*Math.PI/180,re=(G+te)*Math.PI/180,ye=(G+te/2)*Math.PI/180,Ue={x:V+X*Math.cos(me),y:B-y*Math.sin(me)},et={x:V+X*Math.cos(re),y:B-y*Math.sin(re)},_t={x:V+X*Math.cos(ye),y:B-y*Math.sin(ye)},Ut=He(Ue,v,E),ut=He(et,v,E),on=He(_t,v,E);return l.jsxs(l.Fragment,{children:[Te(Ut,Rt=>pe(Rt,"arc-angle","start")),Te(ut,Rt=>pe(Rt,"arc-angle","end")),Te(on,Rt=>pe(Rt,"arc-angle","move"))]})},de=H=>{const oe=bc(H),le=oe[H.isFlippedVertically?3:0],be=oe[H.isFlippedVertically?2:1],Ee=He(le,v,E),G=He(be,v,E);return l.jsxs(l.Fragment,{children:[Te(Ee,te=>pe(te,"trapezoid-offset","left")),Te(G,te=>pe(te,"trapezoid-offset","right"))]})},ee=H=>{const le=Cc(H)[H.isFlippedVertically?3:0],be=He(le,v,E);return Te(be,Ee=>pe(Ee,"parallelogram-angle","angle"))},xe=H=>{const le=ls(H)[0],be=He(le,v,E);return Te(be,Ee=>pe(Ee,"triangle-vertex","top"))},O=H=>{const oe=Bl(H);if(oe.length<2||H.innerRadius===void 0)return null;let le=oe[1];if(H.innerRadius===0){const Ee=Math.PI*2/H.sides,G=-Math.PI/2,te=Ee/2+G,X=10/r.scale;le={x:H.cx+Math.cos(te)*X,y:H.cy+Math.sin(te)*X}}const be=He(le,v,E);return Te(be,Ee=>pe(Ee,"star-inner-radius","inner-radius"))};return l.jsxs(St.Fragment,{children:[l.jsx("g",{transform:`rotate(${-E} ${v.x} ${v.y})`,children:l.jsx("rect",{x:w.x,y:w.y,width:w.width,height:w.height,fill:"none",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}})}),x,l.jsxs("g",{children:[A.map(({name:H,x:oe,y:le})=>{const be=He({x:oe,y:le},v,E),Ee=ZC(H);return l.jsxs("g",{onMouseDown:G=>D(G,H),onTouchStart:G=>D(G,H),"data-handle":"true",style:{cursor:m?"inherit":`${Ee}`},children:[l.jsx("rect",{x:be.x-g/2,y:be.y-g/2,width:g,height:g,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${E} ${be.x} ${be.y})`}),l.jsx("rect",{x:be.x-h/2,y:be.y-h/2,width:h,height:h,fill:"transparent"})]},H)}),"rotation"in e&&e.rotation!==void 0&&l.jsxs("g",{onMouseDown:Z,onTouchStart:Z,"data-handle":"true",style:{cursor:m?"inherit":jd},children:[l.jsx("line",{x1:v.x,y1:v.y,x2:P.x,y2:P.y,stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"}}),l.jsx("circle",{cx:P.x,cy:P.y,r:g/2,fill:"var(--bg-primary)",stroke:"var(--selection-stroke)",strokeWidth:p,style:{pointerEvents:"none"},transform:`rotate(${E} ${P.x} ${P.y})`}),l.jsx("circle",{cx:P.x,cy:P.y,r:h/2,fill:"transparent"})]}),S,e.type==="arc"&&_e(e),e.type==="trapezoid"&&de(e),e.type==="parallelogram"&&ee(e),e.type==="triangle"&&xe(e),e.type==="star"&&O(e)]})]})},jv=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),l.jsx("path",{d:"M13 13l6 6"})]}),Dv=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 4H4v16",strokeDasharray:"4 4"}),l.jsx("path",{d:"M4 20L12 12L20 4v16H4"}),l.jsx("circle",{cx:"20",cy:"4",r:"2",fill:"currentColor",strokeWidth:"0"}),l.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",strokeWidth:"0"}),l.jsx("circle",{cx:"4",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),l.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor",strokeWidth:"0"}),l.jsx("circle",{cx:"4",cy:"4",r:"2",fill:"var(--bg-primary)"})]}),Iv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),Lv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"})}),Uv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Pv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"})}),Id=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"16 18 22 12 16 6"}),l.jsx("polyline",{points:"8 6 2 12 8 18"})]}),gt=({size:e=24})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),eT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M4 4v16"}),l.jsx("path",{d:"M4 4h16"}),l.jsx("path",{d:"M4 20l-4-5h8z",fill:"currentColor",strokeWidth:"0"}),l.jsx("path",{d:"M20 4l-5-4v8z",fill:"currentColor",strokeWidth:"0"})]}),tT=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M4 14h-2v6h6v-2H4v-4zm16 0v4h-4v2h6v-6h-2zM4 10V4h6V2H2v8h2zm16-6v6h2V2h-8v2h6z"})}),Vv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"4"})}),Bv=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),l.jsx("circle",{cx:"3",cy:"12",r:"1.5"}),l.jsx("circle",{cx:"8",cy:"5",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"16",r:"1.5"}),l.jsx("circle",{cx:"20",cy:"12",r:"1.5"})]}),Fv=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M 2 20.7 C 4 10, 8 9.4, 15 12.6 S 22 3.5, 22 3.5",fill:"none"}),l.jsx("circle",{cx:"2",cy:"20.7",r:"2.7",strokeWidth:"0",fill:"currentColor"}),l.jsx("circle",{cx:"22",cy:"3.5",r:"2.7",strokeWidth:"0",fill:"currentColor"}),l.jsx("circle",{cx:"8",cy:"9.4",r:"2.7",strokeWidth:"0",fill:"currentColor"}),l.jsx("circle",{cx:"15",cy:"12.6",r:"2.7",strokeWidth:"0",fill:"currentColor"})]}),$v=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2l10 7.5-4 12.5H6L2 9.5z"})}),Gv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Hv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2L2 22h20L12 2z"})}),zv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M3 22L21 22L3 4z"})}),qv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2l8 10-8 10-8-10z"})}),Ov=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M2 20h20L18 4H6z"})}),Yv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M2 20l6-16h14l-6 16H2z"})}),Jv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M 12,22 A 10,10 0 1 1 22,12 L 12,12 Z"})}),Wv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M 22 12 A 10 10 0 1 0 12 22 Z"})}),Xv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M 2 8 C 13 8, 22 12.5, 22 18"})}),Kv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Zv=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M 3 4 H 21 V 7 H 14 V 19 H 17 V 21 H 7 V 19 H 10 V 7 H 3 Z"})}),Qv=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),l.jsx("polyline",{points:"21 15 16 10 5 21"})]}),e0=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M14 6l5 5-5 5M10 18l-5-5 5-5"})}),nT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 17a5 5 0 1 0 0-10H5.5"}),l.jsx("path",{d:"M9.5 11L5.5 7l4-4"})]}),iT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10 17a5 5 0 1 1 0-10h8.5"}),l.jsx("path",{d:"M14.5 11L18.5 7l-4-4"})]}),t0=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"8",y:"8",width:"12",height:"12",rx:"2",ry:"2"}),l.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),wc=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),n0=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),oT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 2 V22 H2",fill:"none",strokeDasharray:"3 3"}),l.jsx("circle",{cx:"2",cy:"2",r:"2",stroke:"none"}),l.jsxs("g",{fill:"none",children:[l.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"2"}),l.jsx("line",{x1:"2",y1:"2",x2:"2",y2:"22"}),l.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),l.jsxs("g",{stroke:"none",children:[l.jsx("polygon",{points:"22,2 19,0.5 19,3.5"}),l.jsx("polygon",{points:"2,22 0.5,19 3.5,19"}),l.jsx("polygon",{points:"22,22 22,19 19,22"})]})]}),lT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"2",width:"20",height:"20",fill:"none",strokeDasharray:"3 3"}),l.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"none"}),l.jsxs("g",{fill:"none",children:[l.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),l.jsx("line",{x1:"21",y1:"3",x2:"3",y2:"21"})]}),l.jsxs("g",{stroke:"none",children:[l.jsx("polygon",{points:"3,3 5.5,3 3,5.5"}),l.jsx("polygon",{points:"21,21 18.5,21 21,18.5"}),l.jsx("polygon",{points:"21,3 18.5,3 21,5.5"}),l.jsx("polygon",{points:"3,21 5.5,21 3,18.5"})]})]}),i0=({size:e=16})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"20 6 9 17 4 12"})}),rT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),sT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),aT=({size:e=16,className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("polyline",{points:"6 9 12 15 18 9"})}),cT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 12l5-7 7 11 5-4"}),l.jsx("path",{d:"M20 12 L3 12",strokeDasharray:"4 2"})]}),uT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"})]}),dT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),fT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),mT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 2v2.5"}),l.jsx("path",{d:"M12 22v-2.5"}),l.jsx("path",{d:"M22 12h-2.5"}),l.jsx("path",{d:"M2 12h2.5"})]}),hT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),gT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("polyline",{points:"19 12 12 19 5 12"})]}),o0=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),l0=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),pT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Kf=({size:e=16,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("polyline",{points:"1 20 1 14 7 14"}),l.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"})]}),xT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),yT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),vT=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),bT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 10h4v4"}),l.jsx("path",{d:"M21 14l-4-4"}),l.jsx("path",{d:"M3 6h12"}),l.jsx("path",{d:"M3 12h12"}),l.jsx("path",{d:"M3 18h12"})]}),CT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"1"}),l.jsx("circle",{cx:"19",cy:"12",r:"1"}),l.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),TT=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),l.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),ST=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M20 12v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5"}),l.jsx("path",{d:"M18 8V2l-4 4"}),l.jsx("path",{d:"M14 2h4a2 2 0 0 1 2 2v2"})]}),wT=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),ET=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),kT=({size:e=16})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),MT=({size:e=16})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M5 3l14 9-14 9V3z"})}),AT=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),NT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),l.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]}),_T=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),l.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]}),RT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),l.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]}),jT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}),l.jsx("path",{d:"M14 12a4 4 0 0 1 0 8H6"}),l.jsx("line",{x1:"4",y1:"12",x2:"18",y2:"12"})]}),DT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),l.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),l.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),l.jsx("line",{x1:"17",y1:"18",x2:"3",y2:"18"})]}),IT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),l.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),l.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),l.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]}),LT=({size:e=20})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),l.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),l.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),l.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]}),UT=({size:e=96,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),l.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),l.jsx("path",{d:"M9 8h.01"}),l.jsx("path",{d:"M15 8h.01"}),l.jsx("path",{d:"M9.5 13a4.6 4.6 0 0 0 5 0"})]}),PT=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})}),VT=({size:e=20})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}),BT=({size:e=20,className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"})}),FT=({size:e=18,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),l.jsx("polyline",{points:"15 3 21 3 21 9"}),l.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),r0=({size:e=20,className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("circle",{cx:"12",cy:"12",r:"8"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),l.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),l.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),l.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"})]}),ho=3,Zh=.05,Qh=30,$T=e=>{switch(e){case"top-left":case"bottom-right":return"nwse-resize";case"top-right":case"bottom-left":return"nesw-resize";case"top-center":case"bottom-center":return"ns-resize";case"middle-left":case"middle-right":return"ew-resize";case"line-start":case"line-end":return"grabbing";default:return"default"}},eg=e=>e%360,si=e=>e.map(t=>`${t.x},${t.y}`).join(" "),GT=e=>{const{width:t,height:n,backgroundColor:i,shapes:o,addShape:r,updateShape:c,activeTool:u,drawMode:f,fillColor:d,strokeColor:m,strokeWidth:g,textColor:h,textFont:p,textFontSize:b,numberOfSides:v,selectedShapeId:E,onSelectShape:C,isDrawingPolyline:x,polylinePoints:S,setPolylinePoints:w,onCompletePolyline:A,onCancelPolyline:D,isDrawingBezier:_,bezierPoints:M,setBezierPoints:L,onCompleteBezier:P,onCancelBezier:Z,showGrid:pe,gridSize:Te,snapStep:_e,viewTransform:de,setViewTransform:ee,activePointIndex:xe,setActivePointIndex:O,showCursorCoords:H,showRotationAngle:oe,pendingImage:le,setPendingImage:be,setCursorPos:Ee,showNotification:G,onStartInlineEdit:te,inlineEditingShapeId:X}=e,[y,V]=T.useState(null),[B,me]=T.useState(null),[re,ye]=T.useState(null),[Ue,et]=T.useState(null),_t=T.useRef(null),Ut=T.useRef(null),ut=T.useRef(!1),on=T.useRef(null),Rt=T.useRef(null),Dn=T.useCallback(k=>{if(!_t.current)return{x:0,y:0};const j=_t.current.getBoundingClientRect();return{x:k.clientX-j.left,y:k.clientY-j.top}},[]),oo=T.useCallback(k=>{const j=(k.x-de.x)/de.scale,K=(k.y-de.y)/de.scale;return _e>0?{x:Math.round(j/_e)*_e,y:Math.round(K/_e)*_e}:{x:j,y:K}},[de,_e]),Uo=T.useCallback(k=>{if(k.button===1){V({type:"panning",initialPos:{x:k.clientX,y:k.clientY}});return}ut.current=!1;const j=oo(Dn(k));if(on.current=j,k.button===2){const Y=k.target.dataset.id,W=Y?o.find($=>$.id===Y):null;if(W){E!==Y&&C(Y);let $;switch(W.type){case"line":$={...W,points:[{...W.points[0]},{...W.points[1]}]};break;case"pencil":case"polyline":case"bezier":$={...W,points:W.points.map(ve=>({...ve}))};break;default:$={...W}}V({type:"duplicating",initialShape:$,startPos:j})}return}if(k.button!==0)return;const K=k.target;if(K.closest('[data-handle="true"]'))return;if(_){L(Y=>[...Y,j]);return}if(x){w(Y=>[...Y,j]);return}const ce=K.dataset.id,ne=o.find(Y=>(Y==null?void 0:Y.id)===ce);if(u==="edit-points"){ne?ne&&ne.state==="normal"&&E!==ne.id&&C(ne.id):C(null);return}if(u==="select"){ne&&ne.state!=="disabled"?(V({type:"dragging",initialShape:ne,startPos:j}),E!==ne.id&&C(ne.id)):V({type:"panning",initialPos:{x:k.clientX,y:k.clientY}});return}C(null);const I=new Date().toISOString();let z=null;switch(u){case"rectangle":z={id:I,name:it[u],type:"rectangle",x:j.x,y:j.y,width:0,height:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",isAspectRatioLocked:!1};break;case"square":z={id:I,name:it[u],type:"rectangle",x:j.x,y:j.y,width:0,height:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",isAspectRatioLocked:!0};break;case"circle":z={id:I,name:it[u],type:"ellipse",cx:j.x,cy:j.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",isAspectRatioLocked:!0};break;case"ellipse":z={id:I,name:it[u],type:"ellipse",cx:j.x,cy:j.y,rx:0,ry:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",isAspectRatioLocked:!1};break;case"line":z={id:I,name:it[u],type:"line",points:[{...j},{...j}],stroke:m,strokeWidth:g,rotation:0,capstyle:"round",arrowshape:[8,10,3],state:"normal"};break;case"pencil":z={id:I,name:it[u],type:"pencil",points:[j],stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"round",capstyle:"round",arrowshape:[8,10,3],isAspectRatioLocked:!1};break;case"triangle":z={id:I,name:it[u],type:"triangle",x:j.x,y:j.y,width:0,height:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",topVertexOffset:0,isAspectRatioLocked:!1};break;case"right-triangle":z={id:I,name:it[u],type:"right-triangle",x:j.x,y:j.y,width:0,height:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"rhombus":z={id:I,name:it[u],type:"rhombus",x:j.x,y:j.y,width:0,height:0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"trapezoid":z={id:I,name:it[u],type:"trapezoid",x:j.x,y:j.y,width:0,height:0,topLeftOffsetRatio:.25,topRightOffsetRatio:.25,isSymmetrical:!0,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"parallelogram":z={id:I,name:it[u],type:"parallelogram",x:j.x,y:j.y,width:0,height:0,angle:75,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",isAspectRatioLocked:!1};break;case"pieslice":case"chord":case"arc":{let Y;u==="pieslice"?Y="pieslice":u==="chord"?Y="chord":Y="arc";const W=Y==="arc"?"none":d,$=Y==="pieslice"||Y==="chord"?270:90;z={id:I,name:it[u],type:"arc",x:j.x,y:j.y,width:0,height:0,fill:W,stroke:m,strokeWidth:g,rotation:0,state:"normal",start:0,extent:$,style:Y,isAspectRatioLocked:!1};break}case"polygon":case"star":z={id:I,name:it[u],type:u,cx:j.x,cy:j.y,radius:0,sides:v,fill:d,stroke:m,strokeWidth:g,rotation:0,state:"normal",joinstyle:"miter",innerRadius:u==="star"?0:void 0,isAspectRatioLocked:!0};break;case"text":{z={id:I,name:it[u],type:"text",x:j.x,y:j.y,text:"Текст",font:p,fontSize:b,weight:"normal",slant:"roman",underline:!1,overstrike:!1,fill:h,stroke:"none",strokeWidth:0,rotation:0,anchor:"nw",justify:"left",width:0,state:"normal",isAspectRatioLocked:!1};break}case"image":{if(le){const Y=new Image;Y.onload=()=>{const W={id:I,name:it[u],type:"image",x:j.x,y:j.y,width:Y.width,height:Y.height,src:le,stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!0};r(W),be(null)},Y.src=le}break}case"bitmap":{z={id:I,name:it[u],type:"bitmap",x:j.x,y:j.y,width:50,height:50,bitmapType:"error",foreground:"#000000",background:"#ffffff",stroke:"none",strokeWidth:0,rotation:0,state:"normal",isAspectRatioLocked:!1};break}}z&&!["text","image","bitmap"].includes(z.type)?V({type:"drawing",shape:z,startPos:j}):z&&r(z)},[u,o,C,d,m,g,h,p,b,v,x,w,_,L,oo,Dn,E,le,be,r]),Kl=T.useCallback(k=>{const j=Dn(k);et(j);const K=oo(j);if(ye(K),Ee(K),!ut.current&&on.current&&Math.hypot(K.x-on.current.x,K.y-on.current.y)>ho&&(ut.current=!0),!y)return;if(y.type==="drawing"){const{shape:I,startPos:z}=y;let Y=I;switch(I.type){case"rectangle":{let W=Math.abs(K.x-z.x),$=Math.abs(K.y-z.y);if((I.isAspectRatioLocked||k.shiftKey)&&(W=$=Math.max(W,$)),f==="corner"){const ve=K.x<z.x?z.x-W:z.x,F=K.y<z.y?z.y-$:z.y;Y={...I,x:ve,y:F,width:W,height:$}}else I.isAspectRatioLocked||k.shiftKey?W=$=Math.max(Math.abs(K.x-z.x),Math.abs(K.y-z.y))*2:(W*=2,$*=2),Y={...I,x:z.x-W/2,y:z.y-$/2,width:W,height:$};break}case"arc":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":{let W=Math.abs(K.x-z.x),$=Math.abs(K.y-z.y);if(("isAspectRatioLocked"in I&&I.isAspectRatioLocked||k.shiftKey)&&(W=$=Math.max(W,$)),f==="corner"){const ve=K.x<z.x?z.x-W:z.x,F=K.y<z.y?z.y-$:z.y;Y={...I,x:ve,y:F,width:W,height:$}}else"isAspectRatioLocked"in I&&I.isAspectRatioLocked||k.shiftKey?W=$=Math.max(Math.abs(K.x-z.x),Math.abs(K.y-z.y))*2:(W*=2,$*=2),Y={...I,x:z.x-W/2,y:z.y-$/2,width:W,height:$};break}case"ellipse":{const W=K.x-z.x,$=K.y-z.y;if(I.isAspectRatioLocked||k.shiftKey){const ve=Math.hypot(W,$),F=f==="center"?ve:ve/2,se=f==="center"?z.x:z.x+W/2,he=f==="center"?z.y:z.y+$/2;Y={...I,cx:se,cy:he,rx:F,ry:F}}else{const ve=f==="center"?Math.abs(W):Math.abs(W)/2,F=f==="center"?Math.abs($):Math.abs($)/2,se=f==="center"?z.x:z.x+W/2,he=z.y+$/2;Y={...I,cx:se,cy:he,rx:ve,ry:F}}break}case"line":{Y={...I,points:[z,K]};break}case"pencil":{Y={...I,points:[...I.points,K]};break}case"polygon":case"star":{let W,$,ve;if(f==="corner"){const se=Math.abs(K.x-z.x),he=Math.abs(K.y-z.y);W=z.x+(K.x-z.x)/2,$=z.y+(K.y-z.y)/2,ve=Math.min(se,he)/2}else W=z.x,$=z.y,ve=Math.hypot(K.x-z.x,K.y-z.y);const F=I.type==="star"?ve/2:void 0;Y={...I,cx:W,cy:$,radius:ve,innerRadius:F};break}}V({...y,shape:Y});return}if(y.type==="panning"){const I=k.clientX-y.initialPos.x,z=k.clientY-y.initialPos.y;ee(Y=>({...Y,x:Y.x+I,y:Y.y+z})),V({type:"panning",initialPos:{x:k.clientX,y:k.clientY}});return}const ce=B??("initialShape"in y?y.initialShape:null);if(!ce)return;let ne=ce;switch(y.type){case"point-editing":{const{pointIndex:I,center:z}=y,Y=ce,W="rotation"in Y?Y.rotation:0;let $=K;W!==0&&($=He(K,z,-W));const ve=[...Y.points];ve[I]=$,ne={...Y,points:ve};break}case"arc-angle-editing":{const{initialShape:I,handle:z,center:Y,initialMouseAngle:W}=y;let ve=Math.atan2(-(K.y-Y.y),K.x-Y.x)*180/Math.PI-W;if(ve>180&&(ve-=360),ve<-180&&(ve+=360),z==="move"||I.isExtentLocked)ne={...I,start:I.start+ve};else if(z==="start"){const F=I.start+ve,se=I.extent-ve;ne={...I,start:F,extent:eg(se)}}else{const F=I.extent+ve;ne={...I,extent:eg(F)}}break}case"triangle-vertex-editing":{const{initialShape:I}=y,z=bt(I);if(!z||I.width===0)break;const W=(He(K,z,-I.rotation).x-(I.x+I.width/2))/I.width;ne={...I,topVertexOffset:W};break}case"star-inner-radius-editing":{const{initialShape:I,center:z}=y;if(I.type!=="star")break;const Y=Math.hypot(K.x-z.x,K.y-z.y),W=Math.max(0,Math.min(Y,I.radius));ne={...I,innerRadius:W};break}case"trapezoid-offset-editing":{const{initialShape:I,handle:z}=y,Y=bt(I);if(!Y||I.width===0)break;const W=He(K,Y,-I.rotation);let $=I.topLeftOffsetRatio,ve=I.topRightOffsetRatio;if(z==="left"?($=(W.x-I.x)/I.width,I.isSymmetrical&&(ve=$)):(ve=(I.x+I.width-W.x)/I.width,I.isSymmetrical&&($=ve)),$=Math.max(0,$),ve=Math.max(0,ve),$+ve>=1)break;ne={...I,topLeftOffsetRatio:$,topRightOffsetRatio:ve};break}case"parallelogram-angle-editing":{const{initialShape:I}=y,z=bt(I);if(!z||I.height===0)break;const W=He(K,z,-I.rotation).x-I.x;if(I.width-Math.abs(W)<=0)break;let ve=Math.atan2(I.height,W)*180/Math.PI;ve=Math.max(1,Math.min(179,ve)),ne={...I,angle:ve};break}case"duplicating":case"dragging":{let I=K.x-y.startPos.x,z=K.y-y.startPos.y;k.shiftKey&&(Math.abs(I)>Math.abs(z)?z=0:I=0);const{initialShape:Y}=y;switch(Y.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":ne={...Y,x:Y.x+I,y:Y.y+z};break;case"ellipse":case"polygon":case"star":ne={...Y,cx:Y.cx+I,cy:Y.cy+z};break;case"line":case"bezier":case"pencil":case"polyline":ne={...Y,points:Y.points.map(W=>({x:W.x+I,y:W.y+z}))};break}break}case"resizing":{const{initialShape:I,handle:z,anchorPointGlobal:Y,initialShapeProps:W}=y,{bbox:$,rotationCenter:ve,geometricCenter:F}=W;if(z==="line-start"||z==="line-end"){ne={...I,points:z==="line-start"?[K,Y]:[Y,K],rotation:0};break}const se=He(K,ve,-I.rotation),he=He(Y,ve,-I.rotation);let Le;const Et=z.includes("left")||z.includes("right"),Gn=z.includes("top")||z.includes("bottom"),Pt="isAspectRatioLocked"in I&&I.isAspectRatioLocked||k.shiftKey;if(Et&&Gn){let ke=Math.abs(se.x-he.x),Pe=Math.abs(se.y-he.y);if(Pt&&($.width>0||$.height>0)){const Fe=$.width/$.height;ke/$.width>Pe/$.height?Pe=ke/Fe:ke=Pe*Fe}const Be=z.includes("left")?he.x-ke:he.x,ft=z.includes("top")?he.y-Pe:he.y;Le={x:Be,y:ft,width:ke,height:Pe}}else if(Pt){const ke=$.height===0||$.width===0?1:$.width/$.height;if(Et){const Pe=Math.abs(se.x-he.x),Be=Pe/ke;Le={x:Math.min(se.x,he.x),y:$.y+$.height/2-Be/2,width:Pe,height:Be}}else{const Pe=Math.abs(se.y-he.y),Be=Pe*ke;Le={x:$.x+$.width/2-Be/2,y:Math.min(se.y,he.y),width:Be,height:Pe}}}else Et?Le={x:Math.min(se.x,he.x),y:$.y,width:Math.abs(se.x-he.x),height:$.height}:Le={x:$.x,y:Math.min(se.y,he.y),width:$.width,height:Math.abs(se.y-he.y)};["line","pencil","polyline","bezier"].includes(I.type)&&(Le.width=Math.max(1,Le.width),Le.height=Math.max(1,Le.height));const{width:De,height:dt}=Le,jt={x:Le.x+De/2,y:Le.y+dt/2},In={x:jt.x-($.x+$.width/2),y:jt.y-($.y+$.height/2)},We=He(In,{x:0,y:0},I.rotation),rt={x:F.x+We.x,y:F.y+We.y};switch(I.type){case"text":{const ke=to(I);if(ke.width<=0)break;const Pe=De/ke.width,Be=Math.max(.1,I.fontSize*Pe),ft={x:rt.x-De/2,y:rt.y-dt/2,width:De,height:dt},Fe=I.anchor;let Ht=ft.x,pt=ft.y;["n","s","center"].includes(Fe)&&(Ht+=ft.width/2),["ne","e","se"].includes(Fe)&&(Ht+=ft.width),["w","e","center"].includes(Fe)&&(pt+=ft.height/2),["sw","s","se"].includes(Fe)&&(pt+=ft.height),ne={...I,fontSize:parseFloat(Be.toFixed(1)),x:Ht,y:pt};break}case"triangle":{const ke=I,Pe=ls(ke),Be=rs({...ke,rotation:0}),ft=Be.width>0?De/Be.width:1,Fe=Be.height>0?dt/Be.height:1,Ht=Pe.map(Bt=>({x:he.x+(Bt.x-he.x)*ft,y:he.y+(Bt.y-he.y)*Fe})),pt=Ht.map(Bt=>Bt.x),Si=Ht.map(Bt=>Bt.y),zt={x:Math.min(...pt),y:Math.min(...Si),width:Math.max(...pt)-Math.min(...pt),height:Math.max(...Si)-Math.min(...Si)},Fo=Ht[0],Vt=[Ht[1],Ht[2]],ro=Math.abs(Vt[0].x-Vt[1].x),ir=Math.abs(Fo.y-Vt[0].y),Ns=Math.min(Vt[0].x,Vt[1].x),or=Fo.y,_s=ro>0?(Fo.x-(Ns+ro/2))/ro:0,so=Ns-zt.x,Rs=or-zt.y,ao=rt.x-zt.width/2,js=rt.y-zt.height/2,jc=ao+so,Ds=js+Rs;ne={...ke,x:jc,y:Ds,width:ro,height:ir,topVertexOffset:_s};break}case"rectangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const ke=rt.x-De/2,Pe=rt.y-dt/2;ne={...I,x:ke,y:Pe,width:De,height:dt};break}case"ellipse":{const ke=De/2,Pe=dt/2;ne={...I,cx:rt.x,cy:rt.y,rx:ke,ry:Pe};break}case"polygon":case"star":{const ke=$.width>0?De/$.width:1,Pe=$.height>0?dt/$.height:1,Be=Math.max(ke,Pe),ft=I.radius*Be;let Fe=I.innerRadius;I.type==="star"&&I.innerRadius!==void 0&&(Fe=I.innerRadius*Be),ne={...I,cx:rt.x,cy:rt.y,radius:ft,innerRadius:Fe};break}case"line":case"bezier":case"pencil":case"polyline":{const ke=$.width!==0?De/$.width:1,Pe=$.height!==0?dt/$.height:1,Be=I.points.map(pt=>({x:Le.x+(pt.x-$.x)*ke,y:Le.y+(pt.y-$.y)*Pe})),ft={x:rt.x-Le.width/2,y:rt.y-Le.height/2},Fe={x:ft.x-Le.x,y:ft.y-Le.y},Ht=Be.map(pt=>({x:pt.x+Fe.x,y:pt.y+Fe.y}));ne={...I,points:Ht};break}}break}case"rotating":{const{center:I,startAngle:z,initialShape:Y}=y;if(!("rotation"in Y))break;let ve=(Math.atan2(-(K.y-I.y),K.x-I.x)+z)*180/Math.PI;ve=Math.round(ve),ne={...Y,rotation:ve};break}}me(ne)},[y,f,B,oo,ee,Dn,Ee]),ni=T.useCallback(k=>{if((y==null?void 0:y.type)==="panning"&&!ut.current&&k.button===0&&C(null),(y==null?void 0:y.type)==="drawing"&&ut.current){const{shape:j}=y;"width"in j&&"height"in j&&(j.width<=ho||j.height<=ho)||"rx"in j&&(j.rx*2<=ho||j.ry*2<=ho)||"radius"in j&&j.radius<=ho||j.type==="line"&&Math.hypot(j.points[1].x-j.points[0].x,j.points[1].y-j.points[0].y)<=ho||j.type==="pencil"&&j.points.length<=2||r(j)}else if((y==null?void 0:y.type)==="duplicating"&&B){if(ut.current){const j={...B,id:new Date().toISOString()};r(j,!0),G("Фігуру дубльовано.")}}else if((y==null?void 0:y.type)==="point-editing"&&B){const{initialShape:j,center:K}=y;let ce=B;const ne=j.name,I=ne&&!Ka(ne);if("rotation"in j&&j.rotation!==0)if(j.type==="bezier"||j.type==="polyline"&&j.smooth){const W=B.points.map(ve=>He(ve,K,j.rotation)),$={...B,points:W,rotation:0,name:void 0};$.name=I?ne:Yt($),ce=$}else{const Y=ti(B,K);if(Y){const W={...B,points:Y,rotation:0,name:void 0};W.name=I?ne:Yt(W),ce=W}}else{const z=B,Y=I?ne:Yt(z);z.name!==Y&&(ce={...z,name:Y})}c(ce)}else B&&c(B);V(null),me(null),ut.current=!1,on.current=null},[y,r,c,C,B,G]),Ac=k=>{if(x){A(!1);return}if(_){P(!1);return}const j=k.target.dataset.id,K=o.find(ce=>ce.id===j);K&&K.type==="text"&&te(K.id)},ws=k=>{ye(null),et(null),Ee(null),on.current&&ni(k)},Nc=k=>{k.preventDefault();const{deltaY:j}=k,K=1.1,ce=Dn(k);ee(ne=>{let I=j<0?ne.scale*K:ne.scale/K;if(I=Math.max(Zh,Math.min(Qh,I)),I===ne.scale)return ne;const z=ce.x-(ce.x-ne.x)*(I/ne.scale),Y=ce.y-(ce.y-ne.y)*(I/ne.scale);return{scale:I,x:z,y:Y}})},Zl=T.useCallback(k=>{if(k.preventDefault(),k.touches.length>=2){const[ce,ne]=[k.touches[0],k.touches[1]],I=Math.hypot(ce.clientX-ne.clientX,ce.clientY-ne.clientY);if(I<1){Rt.current=null;return}const z={x:(ce.clientX+ne.clientX)/2,y:(ce.clientY+ne.clientY)/2};Rt.current={initialDist:I,initialMidpoint:z,initialTransform:de},V(null);return}const j=k.touches[0],K={clientX:j.clientX,clientY:j.clientY,button:0,target:k.target};Uo(K)},[Uo,de]),_c=T.useCallback(k=>{if(k.preventDefault(),k.touches.length===1){const j=k.touches[0],K={clientX:j.clientX,clientY:j.clientY,button:0};Kl(K)}else if(k.touches.length===2&&Rt.current){const{initialDist:j,initialMidpoint:K,initialTransform:ce}=Rt.current;if(j===0)return;const[ne,I]=[k.touches[0],k.touches[1]],z=Math.hypot(ne.clientX-I.clientX,ne.clientY-I.clientY),Y={x:(ne.clientX+I.clientX)/2,y:(ne.clientY+I.clientY)/2};let W=ce.scale*(z/j);W=Math.max(Zh,Math.min(Qh,W));const $=Y.x-K.x,ve=Y.y-K.y,F=Y.x-(Y.x-(ce.x+$))*(W/ce.scale),se=Y.y-(Y.y-(ce.y+ve))*(W/ce.scale);ee({scale:W,x:F,y:se})}},[Kl,ee,Dn]),Po=T.useCallback(k=>{k.preventDefault(),k.touches.length<2&&(Rt.current=null);const j=k.changedTouches[0];if(j){const K={clientX:j.clientX,clientY:j.clientY,button:0,target:k.target};ni(K)}else ni({button:0})},[ni]),Ql=T.useMemo(()=>{let k=[...o];if((y==null?void 0:y.type)==="drawing"&&ut.current)k.push(y.shape);else if((y==null?void 0:y.type)==="duplicating"&&B)k.push(B);else if(B){const j=k.findIndex(K=>(K==null?void 0:K.id)===B.id);j!==-1&&(k[j]=B)}if(x&&S.length>0&&re){const j=S.filter(Boolean);j.length>0&&(k.push({id:"temp-polyline-main",type:"polyline",points:j,isClosed:!1,stroke:m,strokeWidth:g,fill:"none",state:"normal",joinstyle:"round",rotation:0,capstyle:"round"}),k.push({id:"temp-polyline-rubberband",type:"line",points:[j[j.length-1],re],stroke:m,strokeWidth:1,rotation:0,state:"normal",dash:[4,4]}))}if(_&&M.length>0&&re){const j=M.filter(Boolean);if(j.length>0){const K=[...j,re];k.push({id:"temp-bezier-preview-dashed",type:"bezier",points:K,smooth:!0,splinesteps:12,stroke:m,strokeWidth:1,dash:[4,4],capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"}),j.length>1&&k.push({id:"temp-bezier-main-solid",type:"bezier",points:j,smooth:!0,splinesteps:12,stroke:m,strokeWidth:g,capstyle:"round",rotation:0,state:"normal",isClosed:!1,fill:"none",joinstyle:"round"})}}return k},[o,y,ut,B,x,S,re,m,g,_,M]),lo=T.useMemo(()=>{const k=o.find(j=>(j==null?void 0:j.id)===E);return(k==null?void 0:k.id)===(B==null?void 0:B.id)?B:k??null},[o,E,B]),er=(()=>{if(!y)return u==="select"?"grab":u==="edit-points"?"default":u==="image"&&le?"copy":["text","image","bitmap"].includes(u)&&u!=="image"?"crosshair":u==="image"&&!le?"default":"crosshair";switch(y.type){case"panning":case"dragging":case"point-editing":return"grabbing";case"duplicating":return JC;case"arc-angle-editing":return Dd;case"rotating":return jd;case"resizing":return $T(y.handle);case"trapezoid-offset-editing":case"parallelogram-angle-editing":case"triangle-vertex-editing":case"star-inner-radius-editing":return Dd;case"drawing":return"crosshair";default:return u==="select"?"grab":u==="edit-points"?"default":"crosshair"}})(),Rc=k=>{if("rotation"in k&&k.rotation&&k.rotation!==0){const j=k.type==="text"?{x:k.x,y:k.y}:bt(k);if(j)return`rotate(${-k.rotation} ${j.x} ${j.y})`}},tr=T.useMemo(()=>{const k=new Map;return Ql.forEach(j=>{if((j.type==="line"||j.type==="bezier"||j.type==="pencil"||j.type==="polyline"&&!j.isClosed)&&"arrow"in j&&j.arrow&&j.arrow!=="none"&&j.stroke!=="none"&&j.strokeWidth>0&&j.arrowshape){const[K,ce,ne]=j.arrowshape,I=j.strokeWidth>0?j.strokeWidth:1,z=K*I,Y=ce*I,W=ne*I,$=JSON.stringify({color:j.stroke,shape:[z,Y,W]});k.has($)||k.set($,{color:j.stroke,shapeParams:[z,Y,W]})}}),Array.from(k.values())},[Ql]),ln=k=>{const j=k.joinstyle??"miter";return{strokeLinejoin:j,strokeMiterlimit:j==="miter"?10:void 0}},Es=T.useMemo(()=>{const k=x?S:M;if(!((x||_)&&k.length>0))return null;const K=k.length>=2,ce=k.length>=3,ne="flex items-center gap-2 px-3 py-1.5 rounded-md transition-colors duration-200 text-sm font-semibold",I="bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)]",z="bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)]",Y="bg-[var(--bg-disabled)] text-[var(--text-disabled)] cursor-not-allowed";return l.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-[var(--bg-primary)]/80 backdrop-blur-sm p-1 rounded-lg shadow-lg flex items-center gap-2 z-10",onMouseDown:W=>W.stopPropagation(),onTouchStart:W=>W.stopPropagation(),children:[l.jsxs("button",{onClick:()=>x?A(!1):P(!1),title:"Завершити",disabled:!K,className:`${ne} ${K?I:Y}`,children:[l.jsx(sT,{}),l.jsx("span",{children:"Завершити"})]}),l.jsxs("button",{onClick:()=>x?A(!0):P(!0),title:"Замкнути контур",disabled:!ce,className:`${ne} ${ce?I:Y}`,children:[l.jsx(cT,{}),l.jsx("span",{children:"Замкнути"})]}),l.jsxs("button",{onClick:()=>x?D():Z(),title:"Скасувати",className:`${ne} ${z}`,children:[l.jsx(uT,{}),l.jsx("span",{children:"Скасувати"})]})]})},[x,_,S,M,A,P,D,Z]),ks=T.useMemo(()=>{const k=i.replace("#","");if(k.length<6)return"rgba(0, 0, 0, 0.1)";const j=parseInt(k.substring(0,2),16),K=parseInt(k.substring(2,4),16),ce=parseInt(k.substring(4,6),16),ne=(j*299+K*587+ce*114)/1e3,I=.15,z=Math.log10(Math.max(1,de.scale)),Y=Math.min(I+z*.25,.75);return ne<128?`rgba(255, 255, 255, ${Y})`:`rgba(0, 0, 0, ${Y})`},[i,de.scale]),Ms=T.useMemo(()=>{const k=i.replace("#","");if(k.length<6)return"rgba(0, 0, 0, 0.07)";const j=parseInt(k.substring(0,2),16),K=parseInt(k.substring(2,4),16),ce=parseInt(k.substring(4,6),16),ne=(j*299+K*587+ce*114)/1e3,I=.07,z=Math.log10(Math.max(1,de.scale)),Y=Math.min(I+z*.1,.5);return ne<128?`rgba(255, 255, 255, ${Y})`:`rgba(0, 0, 0, ${Y})`},[i,de.scale]),As=k=>Math.round(k*100)/100,Vo=(y==null?void 0:y.type)==="rotating",nr=(y==null?void 0:y.type)==="duplicating",Ti=T.useMemo(()=>{if(Vo&&y.initialShape&&"rotation"in y.initialShape){let k=null;if(B&&"rotation"in B?k=B.rotation:y.initialShape&&"rotation"in y.initialShape&&(k=y.initialShape.rotation),k!==null){const j=y.initialShape.rotation;let K=k-j;return K>180&&(K-=360),K<-180&&(K+=360),{absolute:k,delta:K}}}return null},[y,B,Vo]),Bo=(H||oe&&Vo||nr)&&Ue&&re;return l.jsxs("div",{ref:_t,className:"w-full h-full relative",style:{cursor:er},onMouseDown:Uo,onMouseMove:Kl,onMouseUp:ni,onMouseLeave:ws,onDoubleClick:Ac,onWheel:Nc,onTouchStart:Zl,onTouchMove:_c,onTouchEnd:Po,onTouchCancel:Po,onContextMenu:k=>k.preventDefault(),children:[Es,Bo&&l.jsxs("div",{className:"absolute p-1 px-2 text-xs rounded-md shadow-lg pointer-events-none z-20 bg-[var(--cursor-bg)] text-[var(--cursor-text)] font-mono",style:{left:Ue.x+15,top:Ue.y-15,transform:"translateY(-100%)"},children:[nr&&l.jsx("div",{className:"font-sans font-semibold",children:"Дублювання"}),oe&&Ti&&l.jsx("div",{children:`Кут: ${Ti.absolute.toFixed(0)}° (Δ: ${Ti.delta.toFixed(0)}°)`}),H&&l.jsx("div",{children:`X: ${As(re.x)}, Y: ${As(re.y)}`})]}),l.jsxs("svg",{ref:Ut,className:"rounded-md touch-none w-full h-full",children:[l.jsxs("defs",{children:[l.jsx("filter",{id:"dropshadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:l.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"5",floodColor:"#000000",floodOpacity:"0.3"})}),pe&&l.jsx("pattern",{id:"grid",width:Te,height:Te,patternUnits:"userSpaceOnUse",children:l.jsx("path",{d:`M ${Te} 0 L 0 0 0 ${Te}`,fill:"none",stroke:ks,strokeWidth:1/de.scale})}),pe&&de.scale>10&&l.jsx("pattern",{id:"fine-grid",width:"1",height:"1",patternUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M 1 0 L 0 0 0 1",fill:"none",stroke:Ms,strokeWidth:1/de.scale})}),l.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"3",height:"3",fill:"black"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray12",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),l.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"black"}),l.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray25",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),l.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"black"}),l.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray50",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"white"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),l.jsx("mask",{id:"mask-gray75",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),l.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),l.jsx("mask",{id:"mask-bitmap-error",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),l.jsx("mask",{id:"mask-bitmap-hourglass",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-info",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-questhead",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-question",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-warning",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),tr.map(({color:k,shapeParams:j})=>{const[K,ce,ne]=j;if(ce===0||ne===0)return null;const I=`${k.replace(/[^a-zA-Z0-9]/g,"")}-${K}-${ce}-${ne}`,z=`M 0,0 L ${-ce},${ne} L ${-K},0 L ${-ce},${-ne} Z`,Y=`${-ce*1.1} ${-ne*1.1} ${ce*1.1} ${ne*2.2}`,W=ce,$=ne*2;return l.jsxs(St.Fragment,{children:[l.jsx("marker",{id:`arrow-end-${I}`,viewBox:Y,refX:0,refY:0,markerUnits:"userSpaceOnUse",markerWidth:W,markerHeight:$,orient:"auto",children:l.jsx("path",{d:z,fill:k})}),l.jsx("marker",{id:`arrow-start-${I}`,viewBox:Y,refX:0,refY:0,markerUnits:"userSpaceOnUse",markerWidth:W,markerHeight:$,orient:"auto-start-reverse",children:l.jsx("path",{d:z,fill:k})})]},I)})]}),l.jsxs("g",{transform:`translate(${de.x} ${de.y}) scale(${de.scale})`,children:[l.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:i,filter:"url(#dropshadow)"}),pe&&l.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:"url(#grid)",style:{pointerEvents:"none"}}),pe&&de.scale>10&&l.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:"url(#fine-grid)",style:{pointerEvents:"none"}}),Ql.filter(Boolean).map(k=>{if(k.state==="hidden")return null;const j=k.state==="disabled",K=u!=="select",ce=(y==null?void 0:y.type)==="duplicating"&&k===B,ne=j?"default":K?"inherit":"move",I=Math.max(k.strokeWidth,20/de.scale);let z=Rc(k);if((y==null?void 0:y.type)==="point-editing"&&k.id===y.initialShape.id){const{center:F}=y,se="rotation"in k&&k.rotation?k.rotation:0;se!==0&&F&&(z=`rotate(${-se} ${F.x} ${F.y})`)}const W={stroke:k.stroke,strokeWidth:k.strokeWidth,transform:z,style:{pointerEvents:"none",opacity:j?.5:ce?.6:1}},$={"data-id":k.id,key:`${k.id}-hitbox`,transform:z,stroke:"transparent",strokeWidth:I,style:{cursor:ne}},ve=F=>{const se=F.stroke!=="none"&&F.strokeWidth>0;let he;if("dash"in F&&F.dash&&F.dash.length>0&&F.strokeWidth>0){const De="capstyle"in F&&F.capstyle?F.capstyle:"butt";he=F.dash.map((dt,jt)=>jt%2===0&&dt<=2?De==="round"?.01:F.strokeWidth:dt*F.strokeWidth).join(" ")}const Et="dashoffset"in F?F.dashoffset:void 0,Gn=(F.capstyle==="projecting"?"square":F.capstyle)??"round";let Pt,bn;if(se&&F.arrow&&F.arrow!=="none"&&F.arrowshape){const[De,dt,jt]=F.arrowshape,In=F.strokeWidth>0?F.strokeWidth:1,We=De*In,rt=dt*In,ke=jt*In,Pe=`${F.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${We}-${rt}-${ke}`;(F.arrow==="first"||F.arrow==="both")&&(Pt=`url(#arrow-start-${Pe})`),(F.arrow==="last"||F.arrow==="both")&&(bn=`url(#arrow-end-${Pe})`)}return{strokeDasharray:he,strokeDashoffset:Et,markerStart:Pt,markerEnd:bn,strokeLinecap:Gn}};switch(k.type){case"rectangle":{const F={...W,fill:k.fill,...ln(k)};return k.stipple&&k.fill!=="none"&&(F.mask=`url(#mask-${k.stipple})`),k.dash&&(F.strokeDasharray=k.dash.map(se=>se*k.strokeWidth).join(" ")),k.dashoffset&&(F.strokeDashoffset=k.dashoffset),l.jsxs("g",{children:[l.jsx("rect",{...$,x:k.x,y:k.y,width:k.width,height:k.height,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("rect",{x:k.x,y:k.y,width:k.width,height:k.height,...F})]},k.id)}case"ellipse":{const F=k,se={...W,fill:F.fill};return F.stipple&&F.fill!=="none"&&(se.mask=`url(#mask-${F.stipple})`),F.dash&&(se.strokeDasharray=F.dash.map(he=>he*F.strokeWidth).join(" ")),F.dashoffset&&(se.strokeDashoffset=F.dashoffset),l.jsxs("g",{children:[l.jsx("ellipse",{...$,cx:F.cx,cy:F.cy,rx:F.rx,ry:F.ry,fill:"transparent",style:{...$.style,pointerEvents:j?"none":F.fill==="none"?"stroke":"all"}}),l.jsx("ellipse",{cx:F.cx,cy:F.cy,rx:F.rx,ry:F.ry,...se})]},F.id)}case"arc":{const F=k,se=Of(F),he={...W,fill:F.style==="arc"?"none":F.fill,...ve(F)};return F.stipple&&F.fill!=="none"&&F.style!=="arc"&&(he.mask=`url(#mask-${F.stipple})`),l.jsxs("g",{children:[l.jsx("path",{...$,d:se,fill:"transparent",style:{...$.style,pointerEvents:j?"none":F.fill==="none"||F.style==="arc"?"stroke":"all"}}),l.jsx("path",{d:se,...he})]},k.id)}case"line":return l.jsxs("g",{children:[l.jsx("line",{...$,x1:k.points[0].x,y1:k.points[0].y,x2:k.points[1].x,y2:k.points[1].y,style:{...$.style,pointerEvents:j?"none":"stroke"}}),l.jsx("line",{x1:k.points[0].x,y1:k.points[0].y,x2:k.points[1].x,y2:k.points[1].y,...W,...ve(k)})]},k.id);case"bezier":{const F=Sl(k.points,k.smooth,k.isClosed),se=k.isClosed?k.fill:"none";return l.jsxs("g",{children:[l.jsx("path",{...$,d:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":se==="none"?"stroke":"all"}}),l.jsx("path",{d:F,...W,fill:se,...ve(k),...ln(k)})]},k.id)}case"pencil":{const F=Wf(k.points);return l.jsxs("g",{children:[l.jsx("path",{...$,d:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":"stroke"}}),l.jsx("path",{d:F,...W,fill:"none",strokeLinecap:"round",...ln(k),...ve(k)})]},k.id)}case"polyline":{const F={...W,...ln(k)};k.stipple&&k.isClosed&&k.fill!=="none"&&(F.mask=`url(#mask-${k.stipple})`),k.dash&&(F.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),k.dashoffset&&(F.strokeDashoffset=k.dashoffset);const se=k.isClosed?k.fill:"none";if(k.isClosed||Object.assign(F,ve(k)),k.smooth){const he=Sl(k.points,!0,k.isClosed);return l.jsxs("g",{children:[l.jsx("path",{...$,d:he,fill:"transparent",style:{...$.style,pointerEvents:j?"none":se==="none"?"stroke":"all"}}),l.jsx("path",{...F,d:he,fill:se})]},k.id)}if(k.isClosed){const he=si(k.points);return l.jsxs("g",{children:[l.jsx("polygon",{...$,points:he,fill:"transparent",style:{...$.style,pointerEvents:j?"none":se==="none"?"stroke":"all"}}),l.jsx("polygon",{...F,points:he,fill:se})]},k.id)}return l.jsxs("g",{children:[l.jsx("polyline",{...$,points:si(k.points),fill:"transparent",style:{...$.style,pointerEvents:j?"none":"stroke"}}),l.jsx("polyline",{...F,points:si(k.points),fill:"none"})]},k.id)}case"triangle":{const F=si(ls(k)),se={...W,fill:k.fill,...ln(k)};return k.dash&&(se.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),l.jsxs("g",{children:[l.jsx("polygon",{...$,points:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:F})]},k.id)}case"right-triangle":{const F=si(Yf(k)),se={...W,fill:k.fill,...ln(k)};return k.dash&&(se.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),l.jsxs("g",{children:[l.jsx("polygon",{...$,points:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:F})]},k.id)}case"rhombus":{const F=si(Jf(k)),se={...W,fill:k.fill,...ln(k)};return k.dash&&(se.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),l.jsxs("g",{children:[l.jsx("polygon",{...$,points:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:F})]},k.id)}case"trapezoid":{const F=si(bc(k)),se={...W,fill:k.fill,...ln(k)};return k.dash&&(se.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),l.jsxs("g",{children:[l.jsx("polygon",{...$,points:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:F})]},k.id)}case"parallelogram":{const F=si(Cc(k)),se={...W,fill:k.fill,...ln(k)};return k.dash&&(se.strokeDasharray=k.dash.map(he=>he*k.strokeWidth).join(" ")),l.jsxs("g",{children:[l.jsx("polygon",{...$,points:F,fill:"transparent",style:{...$.style,pointerEvents:j?"none":k.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:F})]},k.id)}case"polygon":case"star":{const F=k,se={...W,fill:F.fill,...ln(F)};if(F.stipple&&F.fill!=="none"&&(se.mask=`url(#mask-${F.stipple})`),F.dash&&(se.strokeDasharray=F.dash.map(Le=>Le*F.strokeWidth).join(" ")),F.dashoffset&&(se.strokeDashoffset=F.dashoffset),F.smooth){const Le=Sl(Bl(k),!0,!0);return l.jsxs("g",{children:[l.jsx("path",{...$,d:Le,fill:"transparent",style:{...$.style,pointerEvents:j?"none":F.fill==="none"?"stroke":"all"}}),l.jsx("path",{...se,d:Le})]},k.id)}const he=si(Bl(k));return l.jsxs("g",{children:[l.jsx("polygon",{...$,points:he,fill:"transparent",style:{...$.style,pointerEvents:j?"none":F.fill==="none"?"stroke":"all"}}),l.jsx("polygon",{...se,points:he})]},k.id)}case"text":{const{text:F,font:se,fontSize:he,weight:Le,slant:Et,underline:Gn,overstrike:Pt,fill:bn,anchor:De,justify:dt,width:jt}=k,In=Tc(k),We=to(k);if(!We)return null;const rt=dt==="center"?"middle":dt==="right"?"end":"start";let ke;rt==="start"?ke=We.x:rt==="middle"?ke=We.x+We.width/2:ke=We.x+We.width,jt>0&&(rt==="middle"?ke=We.x+jt/2:rt==="end"?ke=We.x+jt:ke=We.x);const Pe={fontFamily:Sc(se),fontSize:he,fontWeight:Le,fontStyle:Et==="italic"?"italic":"normal",textDecoration:`${Gn?"underline":""} ${Pt?"line-through":""}`,visibility:k.id===X?"hidden":"visible"};return l.jsxs("g",{"data-id":k.id,children:[l.jsx("rect",{...$,x:We.x,y:We.y,width:We.width,height:We.height,fill:"transparent",style:{...$.style,pointerEvents:j?"none":"all"}}),l.jsx("text",{...W,x:ke,y:We.y,fill:bn,textAnchor:rt,dominantBaseline:"hanging",style:{...W.style,...Pe,whiteSpace:"pre"},children:In.map((Be,ft)=>l.jsx("tspan",{x:ke,dy:ft===0?0:`${he*1.2}px`,children:Be},ft))})]},k.id)}case"image":return l.jsxs("g",{children:[l.jsx("rect",{...$,x:k.x,y:k.y,width:k.width,height:k.height,fill:"transparent",style:{...$.style,pointerEvents:j?"none":"all"}}),l.jsx("image",{href:k.src,x:k.x,y:k.y,width:k.width,height:k.height,...W})]},k.id);case"bitmap":{const{x:F,y:se,width:he,height:Le,bitmapType:Et,foreground:Gn,background:Pt}=k;let bn;return Et.startsWith("gray")?bn=`url(#mask-${Et})`:bn=`url(#mask-bitmap-${Et})`,l.jsxs("g",{children:[l.jsx("rect",{...$,x:F,y:se,width:he,height:Le,fill:"transparent",style:{...$.style,pointerEvents:j?"none":"all"}}),l.jsxs("g",{...W,children:[l.jsx("rect",{x:F,y:se,width:he,height:Le,fill:Pt}),l.jsx("rect",{x:F,y:se,width:he,height:Le,fill:Gn,mask:bn})]})]},k.id)}default:return null}}),lo&&lo.state==="normal"&&l.jsx(QC,{shape:lo,setAction:V,svgRef:Ut,activeTool:u,getSnappedMousePosition:oo,viewTransform:de,getPointerPosition:Dn,activePointIndex:xe,setActivePointIndex:O,updateShape:c,action:y})]})]})]})},HT=(e,t)=>{T.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},zT=({codeLines:e,isLoading:t,error:n,onUpdate:i,onPreview:o,onSaveCode:r,onOpenOrRunCodeOnline:c,hasUnsyncedChanges:u,selectedShapeId:f,highlightCodeOnSelection:d,setHighlightCodeOnSelection:m,showLineNumbers:g,setShowLineNumbers:h,showComments:p,setShowComments:b,generatorType:v,onSwitchToLocalGenerator:E,onOpenSettingsToGenerator:C,codeStringForExport:x})=>{const[S,w]=T.useState(!1),[A,D]=T.useState(!1),[_,M]=T.useState(!1),L=T.useRef(null),P=T.useRef(null);HT(L,()=>M(!1));const Z=T.useMemo(()=>p?e.length>0:e.some(de=>!de.content.trim().startsWith("#")),[e,p]);T.useEffect(()=>{e.length>0&&w(!1)},[e]),T.useEffect(()=>{var de;d&&((de=P.current)==null||de.scrollIntoView({behavior:"smooth",block:"center"}))},[f,e,d]);const pe=()=>{x&&(navigator.clipboard.writeText(x),w(!0),setTimeout(()=>w(!1),2e3))},Te=()=>t?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)]",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-[var(--accent-primary)] rounded-full animate-spin"}),l.jsx("p",{className:"mt-4",children:"Генеруємо Python код..."})]}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 p-4 text-center",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"Помилка генерації"}),l.jsx("p",{className:"text-sm",children:n}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-3",children:[l.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:[l.jsx(n0,{size:16}),l.jsx("span",{children:"Перейти в налаштування"})]}),v==="gemini"&&l.jsx("button",{onClick:E,className:"px-4 py-2 rounded-md font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Перемкнутись на локальний генератор"})]})]}):Z?l.jsx("div",{className:"p-4 overflow-auto text-sm h-full font-mono allow-selection",children:e.map((de,ee)=>{const xe=de.content.trim().startsWith("#");if(!p&&xe)return null;const O=d&&f!==null&&de.shapeId===f,H=O?xe?"code-line-comment-highlighted":"code-line-highlighted":"";return l.jsxs("div",{ref:O?P:null,className:"flex items-start",children:[g&&l.jsx("span",{className:`text-right text-[var(--text-tertiary)] select-none pr-4 w-12 flex-shrink-0 ${O&&!xe?"line-number-highlighted":""}`,"aria-hidden":"true",children:ee+1}),l.jsx("span",{className:`code-line flex-grow ${A?"whitespace-pre-wrap break-words":"whitespace-pre"} ${H?`${H} rounded`:""}`,children:de.content||" "})]},ee)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[var(--text-tertiary)] p-4",children:[l.jsx("h3",{className:"font-bold text-lg",children:"Код з'явиться тут"}),l.jsx("p",{className:"text-sm text-center mt-2",children:!p&&e.length>0?"Коментарі приховані. Увімкніть їх, щоб побачити код.":"Намалюйте фігури та згенеруйте код."})]}),_e=v==="gemini";return l.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[l.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Код Tkinter"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>D(de=>!de),title:A?"Вимкнути перенесення рядків":"Увімкнути перенесення рядків",className:`p-1.5 rounded-md transition-colors duration-200 ${A?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}`,children:l.jsx(bT,{size:16})}),u&&e.length>0&&!t&&l.jsxs("button",{onClick:i,title:"Оновити код",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-yellow-600 hover:bg-yellow-500 text-white ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[l.jsx(Kf,{}),!_e&&l.jsx("span",{children:"Оновити"})]}),e.length>0&&!n&&!t&&l.jsxs("button",{onClick:o,title:"Попередній перегляд",className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[l.jsx(xT,{}),!_e&&l.jsx("span",{children:"Перегляд"})]}),e.length>0&&!n&&l.jsxs("button",{onClick:pe,disabled:S,className:`flex items-center gap-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] disabled:bg-green-600 disabled:text-white ${_e?"p-1.5":"px-2.5 py-1 text-xs"}`,children:[S?l.jsx(i0,{}):l.jsx(pT,{}),!_e&&(S?l.jsx("span",{children:"Скопійовано!"}):l.jsx("span",{children:"Копіювати"}))]}),l.jsxs("div",{ref:L,className:"relative",onMouseLeave:()=>M(!1),children:[l.jsx("button",{onClick:()=>M(de=>!de),title:"Додаткові опції",className:"p-1.5 rounded-md transition-colors duration-200 bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)]",children:l.jsx(CT,{size:16})}),_&&l.jsxs("div",{className:"absolute top-full right-0 mt-0 w-64 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-20 border border-[var(--border-secondary)]",children:[l.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer",title:"Показувати або приховувати коментарі у коді.",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:de=>b(de.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),l.jsx("span",{children:"Показувати коментарі"})]}),l.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Показувати або приховувати номери рядків у вікні коду.",children:[l.jsx("input",{type:"checkbox",checked:g,onChange:de=>h(de.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),l.jsx("span",{children:"Показувати номери рядків"})]}),l.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] cursor-pointer has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed has-[:disabled]:hover:bg-transparent",title:"Автоматично підсвічувати рядок коду, що відповідає вибраній фігурі на полотні. Працює лише з локальним генератором.",children:[l.jsx("input",{type:"checkbox",checked:d,onChange:de=>m(de.target.checked),disabled:_e,className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),l.jsx("span",{children:"Підсвічувати код при виділенні"})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsxs("button",{onClick:()=>{r(),M(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Зберегти згенерований Python код у .py файл.",children:[l.jsx(kT,{size:16}),l.jsx("span",{children:"Зберегти у файл..."})]}),l.jsxs("button",{onClick:()=>{c(!1),M(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити код у онлайн-редакторі ЄPython без запуску.",children:[l.jsx(Id,{size:16}),l.jsx("span",{children:"Відкрити в онлайн IDE..."})]}),l.jsxs("button",{onClick:()=>{c(!0),M(!1)},disabled:e.length===0||!!n,className:"w-full flex items-center gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed",title:"Відкрити та одразу запустити код у онлайн-редакторі ЄPython.",children:[l.jsx(MT,{size:16}),l.jsx("span",{children:"Запустити в онлайн IDE..."})]})]})]})]})]}),l.jsx("div",{className:"flex-grow min-h-[200px] lg:min-h-0",children:Te()})]})},s0=({isOpen:e,onClose:t,onConfirm:n,title:i,message:o,confirmText:r="Продовжити",cancelText:c="Скасувати",variant:u="destructive"})=>{if(!e)return null;const f=u==="primary"?"bg-[var(--accent-primary)] hover:bg-[var(--accent-primary-hover)]":"bg-[var(--destructive-bg)] hover:bg-[var(--destructive-bg-hover)]";return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:d=>d.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:i}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-[var(--text-secondary)]",children:o})}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:c}),l.jsx("button",{onClick:n,className:`px-6 py-2 rounded-lg font-semibold text-[var(--accent-text)] transition-colors ${f}`,children:r})]})]})})},ue=({children:e})=>l.jsx("div",{className:"flex items-center gap-2",children:e}),ae=({htmlFor:e,children:t,title:n})=>l.jsx("label",{htmlFor:e,className:"text-sm font-medium text-[var(--text-secondary)] w-28 flex-shrink-0",title:n,children:t}),Ce=T.forwardRef(({id:e,value:t,onChange:n,disabled:i,step:o=1,min:r,max:c,onFocus:u,title:f,className:d,smartRound:m=!0,unit:g,onBlur:h,onKeyDown:p,autoFocus:b},v)=>{const[E,C]=T.useState(String(t)),x=T.useRef(null);T.useEffect(()=>{const _=x.current;!v||!_||(typeof v=="function"?v(_):v.current=_)},[v]),T.useEffect(()=>{document.activeElement!==x.current&&Number(E)!==t&&C(String(t))},[t,E]);const S=_=>{const M=_.target.value;C(M)},w=_=>{let M=parseFloat(E);if(isNaN(M)||E.trim()===""){C(String(t)),t!==Number(E)&&n(t);return}r!==void 0&&(M=Math.max(r,M)),c!==void 0&&(M=Math.min(c,M)),M!==t&&n(M),C(String(M)),h&&h(_)},A=_=>{let M=parseFloat(E);isNaN(M)&&(M=r??0);let L;m&&M%1!==0?L=_==="up"?Math.ceil(M):Math.floor(M):L=M+(_==="up"?o:-o),r!==void 0&&(L=Math.max(r,L)),c!==void 0&&(L=Math.min(c,L)),C(String(L)),n(L)},D=_=>{_.key==="ArrowUp"?(_.preventDefault(),A("up")):_.key==="ArrowDown"?(_.preventDefault(),A("down")):_.key==="Enter"&&(_.preventDefault(),_.target.blur()),p&&p(_)};return l.jsxs("div",{className:`relative w-full group ${i?"opacity-50":""}`,children:[l.jsx("input",{ref:x,id:e,type:"text",inputMode:"decimal",value:E,onChange:S,onBlur:w,disabled:i,onFocus:u,title:f,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full h-8 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:cursor-not-allowed ${g?"pr-12":"pr-6"} ${d??""}`,onKeyDown:D,autoFocus:b}),g&&!i&&l.jsx("span",{className:"absolute right-7 top-1/2 -translate-y-1/2 text-[var(--text-tertiary)] pointer-events-none",children:g}),!i&&l.jsxs("div",{className:"absolute right-1 top-0 h-full flex-col justify-center items-center opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity hidden sm:flex",children:[l.jsx("button",{onMouseDown:_=>_.preventDefault(),onClick:()=>A("up"),className:"px-1 h-1/2 text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",tabIndex:-1,children:l.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M18 15l-6-6-6 6"})})}),l.jsx("button",{onMouseDown:_=>_.preventDefault(),onClick:()=>A("down"),className:"px-1 h-1/2 text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",tabIndex:-1,children:l.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M6 9l6 6 6-6"})})})]})]})});Ce.displayName="NumberInput";const a0=(e,t)=>{T.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},tg=[{name:"Snow",hex:"#fffafa"},{name:"White",hex:"#ffffff"},{name:"Gainsboro",hex:"#dcdcdc"},{name:"LightGray",hex:"#d3d3d3"},{name:"Silver",hex:"#c0c0c0"},{name:"DarkGray",hex:"#a9a9a9"},{name:"Gray",hex:"#808080"},{name:"DimGray",hex:"#696969"},{name:"Black",hex:"#000000"},{name:"LightCoral",hex:"#f08080"},{name:"Salmon",hex:"#fa8072"},{name:"Crimson",hex:"#dc143c"},{name:"Red",hex:"#ff0000"},{name:"FireBrick",hex:"#b22222"},{name:"DarkRed",hex:"#8b0000"},{name:"LightPink",hex:"#ffb6c1"},{name:"Pink",hex:"#ffc0cb"},{name:"HotPink",hex:"#ff69b4"},{name:"DeepPink",hex:"#ff1493"},{name:"Coral",hex:"#ff7f50"},{name:"Tomato",hex:"#ff6347"},{name:"OrangeRed",hex:"#ff4500"},{name:"DarkOrange",hex:"#ff8c00"},{name:"Orange",hex:"#ffa500"},{name:"Gold",hex:"#ffd700"},{name:"Yellow",hex:"#ffff00"},{name:"LightYellow",hex:"#ffffe0"},{name:"LemonChiffon",hex:"#fffacd"},{name:"Khaki",hex:"#f0e68c"},{name:"Lavender",hex:"#e6e6fa"},{name:"Plum",hex:"#dda0dd"},{name:"Violet",hex:"#ee82ee"},{name:"Fuchsia",hex:"#ff00ff"},{name:"Orchid",hex:"#da70d6"},{name:"MediumPurple",hex:"#9370db"},{name:"BlueViolet",hex:"#8a2be2"},{name:"Purple",hex:"#800080"},{name:"Indigo",hex:"#4b0082"},{name:"GreenYellow",hex:"#adff2f"},{name:"LawnGreen",hex:"#7cfc00"},{name:"Lime",hex:"#00ff00"},{name:"LimeGreen",hex:"#32cd32"},{name:"PaleGreen",hex:"#98fb98"},{name:"SpringGreen",hex:"#00ff7f"},{name:"SeaGreen",hex:"#2e8b57"},{name:"Green",hex:"#008000"},{name:"OliveDrab",hex:"#6b8e23"},{name:"Olive",hex:"#808000"},{name:"DarkSlateGray",hex:"#2f4f4f"},{name:"LightCyan",hex:"#e0ffff"},{name:"Aqua",hex:"#00ffff"},{name:"PowderBlue",hex:"#b0e0e6"},{name:"LightBlue",hex:"#add8e6"},{name:"SkyBlue",hex:"#87ceeb"},{name:"DeepSkyBlue",hex:"#00bfff"},{name:"DodgerBlue",hex:"#1e90ff"},{name:"CornflowerBlue",hex:"#6495ed"},{name:"SteelBlue",hex:"#4682b4"},{name:"RoyalBlue",hex:"#4169e1"},{name:"Blue",hex:"#0000ff"},{name:"MediumBlue",hex:"#0000cd"},{name:"DarkBlue",hex:"#00008b"},{name:"Navy",hex:"#000080"},{name:"MidnightBlue",hex:"#191970"},{name:"Teal",hex:"#008080"},{name:"Cornsilk",hex:"#fff8dc"},{name:"Tan",hex:"#d2b48c"},{name:"RosyBrown",hex:"#bc8f8f"},{name:"SaddleBrown",hex:"#8b4513"},{name:"Peru",hex:"#cd853f"},{name:"Chocolate",hex:"#d2691e"},{name:"Sienna",hex:"#a0522d"},{name:"Brown",hex:"#a52a2a"},{name:"Maroon",hex:"#800000"}],Za=[{name:"AliceBlue",hex:"#f0f8ff"},{name:"AntiqueWhite",hex:"#faebd7"},{name:"AntiqueWhite1",hex:"#ffefdb"},{name:"AntiqueWhite2",hex:"#eedfcc"},{name:"AntiqueWhite3",hex:"#cdc0b0"},{name:"AntiqueWhite4",hex:"#8b8378"},{name:"aqua",hex:"#00ffff"},{name:"aquamarine",hex:"#7fffd4"},{name:"aquamarine1",hex:"#7fffd4"},{name:"aquamarine2",hex:"#76eec6"},{name:"aquamarine3",hex:"#66cdaa"},{name:"aquamarine4",hex:"#458b74"},{name:"azure",hex:"#f0ffff"},{name:"azure1",hex:"#f0ffff"},{name:"azure2",hex:"#e0eeee"},{name:"azure3",hex:"#c1cdcd"},{name:"azure4",hex:"#838b8b"},{name:"beige",hex:"#f5f5dc"},{name:"bisque",hex:"#ffe4c4"},{name:"bisque1",hex:"#ffe4c4"},{name:"bisque2",hex:"#eed5b7"},{name:"bisque3",hex:"#cdb79e"},{name:"bisque4",hex:"#8b7d6b"},{name:"black",hex:"#000000"},{name:"BlanchedAlmond",hex:"#ffebcd"},{name:"blue",hex:"#0000ff"},{name:"blue1",hex:"#0000ff"},{name:"blue2",hex:"#0000ee"},{name:"blue3",hex:"#0000cd"},{name:"blue4",hex:"#00008b"},{name:"BlueViolet",hex:"#8a2be2"},{name:"brown",hex:"#a52a2a"},{name:"brown1",hex:"#ff4040"},{name:"brown2",hex:"#ee3b3b"},{name:"brown3",hex:"#cd3333"},{name:"brown4",hex:"#8b2323"},{name:"burlywood",hex:"#deb887"},{name:"burlywood1",hex:"#ffd39b"},{name:"burlywood2",hex:"#eec591"},{name:"burlywood3",hex:"#cdaa7d"},{name:"burlywood4",hex:"#8b7355"},{name:"CadetBlue",hex:"#5f9ea0"},{name:"CadetBlue1",hex:"#98f5ff"},{name:"CadetBlue2",hex:"#8ee5ee"},{name:"CadetBlue3",hex:"#7ac5cd"},{name:"CadetBlue4",hex:"#53868b"},{name:"chartreuse",hex:"#7fff00"},{name:"chartreuse1",hex:"#7fff00"},{name:"chartreuse2",hex:"#76ee00"},{name:"chartreuse3",hex:"#66cd00"},{name:"chartreuse4",hex:"#458b00"},{name:"chocolate",hex:"#d2691e"},{name:"chocolate1",hex:"#ff7f24"},{name:"chocolate2",hex:"#ee7621"},{name:"chocolate3",hex:"#cd661d"},{name:"chocolate4",hex:"#8b4513"},{name:"coral",hex:"#ff7f50"},{name:"coral1",hex:"#ff7256"},{name:"coral2",hex:"#ee6a50"},{name:"coral3",hex:"#cd5b45"},{name:"coral4",hex:"#8b3e2f"},{name:"CornflowerBlue",hex:"#6495ed"},{name:"cornsilk",hex:"#fff8dc"},{name:"cornsilk1",hex:"#fff8dc"},{name:"cornsilk2",hex:"#eee8cd"},{name:"cornsilk3",hex:"#cdc8b1"},{name:"cornsilk4",hex:"#8b8878"},{name:"crimson",hex:"#dc143c"},{name:"cyan",hex:"#00ffff"},{name:"cyan1",hex:"#00ffff"},{name:"cyan2",hex:"#00eeee"},{name:"cyan3",hex:"#00cdcd"},{name:"cyan4",hex:"#008b8b"},{name:"DarkBlue",hex:"#00008b"},{name:"DarkCyan",hex:"#008b8b"},{name:"DarkGoldenrod",hex:"#b8860b"},{name:"DarkGoldenrod1",hex:"#ffb90f"},{name:"DarkGoldenrod2",hex:"#eead0e"},{name:"DarkGoldenrod3",hex:"#cd950c"},{name:"DarkGoldenrod4",hex:"#8b6508"},{name:"DarkGray",hex:"#a9a9a9"},{name:"DarkGreen",hex:"#006400"},{name:"DarkGrey",hex:"#a9a9a9"},{name:"DarkKhaki",hex:"#bdb76b"},{name:"DarkMagenta",hex:"#8b008b"},{name:"DarkOliveGreen",hex:"#556b2f"},{name:"DarkOliveGreen1",hex:"#caff70"},{name:"DarkOliveGreen2",hex:"#bcee68"},{name:"DarkOliveGreen3",hex:"#a2cd5a"},{name:"DarkOliveGreen4",hex:"#6e8b3d"},{name:"DarkOrange",hex:"#ff8c00"},{name:"DarkOrange1",hex:"#ff7f00"},{name:"DarkOrange2",hex:"#ee7600"},{name:"DarkOrange3",hex:"#cd6600"},{name:"DarkOrange4",hex:"#8b4500"},{name:"DarkOrchid",hex:"#9932cc"},{name:"DarkOrchid1",hex:"#bf3eff"},{name:"DarkOrchid2",hex:"#b23aee"},{name:"DarkOrchid3",hex:"#9a32cd"},{name:"DarkOrchid4",hex:"#68228b"},{name:"DarkRed",hex:"#8b0000"},{name:"DarkSalmon",hex:"#e9967a"},{name:"DarkSeaGreen",hex:"#8fbc8f"},{name:"DarkSeaGreen1",hex:"#c1ffc1"},{name:"DarkSeaGreen2",hex:"#b4eeb4"},{name:"DarkSeaGreen3",hex:"#9bcd9b"},{name:"DarkSeaGreen4",hex:"#698b69"},{name:"DarkSlateBlue",hex:"#483d8b"},{name:"DarkSlateGray",hex:"#2f4f4f"},{name:"DarkSlateGray1",hex:"#97ffff"},{name:"DarkSlateGray2",hex:"#8deeee"},{name:"DarkSlateGray3",hex:"#79cdcd"},{name:"DarkSlateGray4",hex:"#528b8b"},{name:"DarkSlateGrey",hex:"#2f4f4f"},{name:"DarkTurquoise",hex:"#00ced1"},{name:"DarkViolet",hex:"#9400d3"},{name:"DeepPink",hex:"#ff1493"},{name:"DeepPink1",hex:"#ff1493"},{name:"DeepPink2",hex:"#ee1289"},{name:"DeepPink3",hex:"#cd1076"},{name:"DeepPink4",hex:"#8b0a50"},{name:"DeepSkyBlue",hex:"#00bfff"},{name:"DeepSkyBlue1",hex:"#00bfff"},{name:"DeepSkyBlue2",hex:"#00b2ee"},{name:"DeepSkyBlue3",hex:"#009acd"},{name:"DeepSkyBlue4",hex:"#00688b"},{name:"DimGray",hex:"#696969"},{name:"DimGrey",hex:"#696969"},{name:"DodgerBlue",hex:"#1e90ff"},{name:"DodgerBlue1",hex:"#1e90ff"},{name:"DodgerBlue2",hex:"#1c86ee"},{name:"DodgerBlue3",hex:"#1874cd"},{name:"DodgerBlue4",hex:"#104e8b"},{name:"firebrick",hex:"#b22222"},{name:"firebrick1",hex:"#ff3030"},{name:"firebrick2",hex:"#ee2c2c"},{name:"firebrick3",hex:"#cd2626"},{name:"firebrick4",hex:"#8b1a1a"},{name:"FloralWhite",hex:"#fffaf0"},{name:"ForestGreen",hex:"#228b22"},{name:"fuchsia",hex:"#ff00ff"},{name:"gainsboro",hex:"#dcdcdc"},{name:"GhostWhite",hex:"#f8f8ff"},{name:"gold",hex:"#ffd700"},{name:"gold1",hex:"#ffd700"},{name:"gold2",hex:"#eec900"},{name:"gold3",hex:"#cdad00"},{name:"gold4",hex:"#8b7500"},{name:"goldenrod",hex:"#daa520"},{name:"goldenrod1",hex:"#ffc125"},{name:"goldenrod2",hex:"#eeb422"},{name:"goldenrod3",hex:"#cd9b1d"},{name:"goldenrod4",hex:"#8b6914"},{name:"gray",hex:"#808080"},{name:"gray0",hex:"#000000"},{name:"gray1",hex:"#030303"},{name:"gray2",hex:"#050505"},{name:"gray3",hex:"#080808"},{name:"gray4",hex:"#0a0a0a"},{name:"gray5",hex:"#0d0d0d"},{name:"gray6",hex:"#0f0f0f"},{name:"gray7",hex:"#121212"},{name:"gray8",hex:"#141414"},{name:"gray9",hex:"#171717"},{name:"gray10",hex:"#1a1a1a"},{name:"gray11",hex:"#1c1c1c"},{name:"gray12",hex:"#1f1f1f"},{name:"gray13",hex:"#212121"},{name:"gray14",hex:"#242424"},{name:"gray15",hex:"#262626"},{name:"gray16",hex:"#292929"},{name:"gray17",hex:"#2b2b2b"},{name:"gray18",hex:"#2e2e2e"},{name:"gray19",hex:"#303030"},{name:"gray20",hex:"#333333"},{name:"gray21",hex:"#363636"},{name:"gray22",hex:"#383838"},{name:"gray23",hex:"#3b3b3b"},{name:"gray24",hex:"#3d3d3d"},{name:"gray25",hex:"#404040"},{name:"gray26",hex:"#424242"},{name:"gray27",hex:"#454545"},{name:"gray28",hex:"#474747"},{name:"gray29",hex:"#4a4a4a"},{name:"gray30",hex:"#4d4d4d"},{name:"gray31",hex:"#4f4f4f"},{name:"gray32",hex:"#525252"},{name:"gray33",hex:"#545454"},{name:"gray34",hex:"#575757"},{name:"gray35",hex:"#595959"},{name:"gray36",hex:"#5c5c5c"},{name:"gray37",hex:"#5e5e5e"},{name:"gray38",hex:"#616161"},{name:"gray39",hex:"#636363"},{name:"gray40",hex:"#666666"},{name:"gray41",hex:"#696969"},{name:"gray42",hex:"#6b6b6b"},{name:"gray43",hex:"#6e6e6e"},{name:"gray44",hex:"#707070"},{name:"gray45",hex:"#737373"},{name:"gray46",hex:"#757575"},{name:"gray47",hex:"#787878"},{name:"gray48",hex:"#7a7a7a"},{name:"gray49",hex:"#7d7d7d"},{name:"gray50",hex:"#7f7f7f"},{name:"gray51",hex:"#828282"},{name:"gray52",hex:"#858585"},{name:"gray53",hex:"#878787"},{name:"gray54",hex:"#8a8a8a"},{name:"gray55",hex:"#8c8c8c"},{name:"gray56",hex:"#8f8f8f"},{name:"gray57",hex:"#919191"},{name:"gray58",hex:"#949494"},{name:"gray59",hex:"#969696"},{name:"gray60",hex:"#999999"},{name:"gray61",hex:"#9c9c9c"},{name:"gray62",hex:"#9e9e9e"},{name:"gray63",hex:"#a1a1a1"},{name:"gray64",hex:"#a3a3a3"},{name:"gray65",hex:"#a6a6a6"},{name:"gray66",hex:"#a8a8a8"},{name:"gray67",hex:"#ababab"},{name:"gray68",hex:"#adadad"},{name:"gray69",hex:"#b0b0b0"},{name:"gray70",hex:"#b3b3b3"},{name:"gray71",hex:"#b5b5b5"},{name:"gray72",hex:"#b8b8b8"},{name:"gray73",hex:"#bababa"},{name:"gray74",hex:"#bdbdbd"},{name:"gray75",hex:"#bfbfbf"},{name:"gray76",hex:"#c2c2c2"},{name:"gray77",hex:"#c4c4c4"},{name:"gray78",hex:"#c7c7c7"},{name:"gray79",hex:"#c9c9c9"},{name:"gray80",hex:"#cccccc"},{name:"gray81",hex:"#cfcfcf"},{name:"gray82",hex:"#d1d1d1"},{name:"gray83",hex:"#d4d4d4"},{name:"gray84",hex:"#d6d6d6"},{name:"gray85",hex:"#d9d9d9"},{name:"gray86",hex:"#dbdbdb"},{name:"gray87",hex:"#dedede"},{name:"gray88",hex:"#e0e0e0"},{name:"gray89",hex:"#e3e3e3"},{name:"gray90",hex:"#e5e5e5"},{name:"gray91",hex:"#e8e8e8"},{name:"gray92",hex:"#ebebeb"},{name:"gray93",hex:"#ededed"},{name:"gray94",hex:"#f0f0f0"},{name:"gray95",hex:"#f2f2f2"},{name:"gray96",hex:"#f5f5f5"},{name:"gray97",hex:"#f7f7f7"},{name:"gray98",hex:"#fafafa"},{name:"gray99",hex:"#fcfcfc"},{name:"gray100",hex:"#ffffff"},{name:"green",hex:"#008000"},{name:"green1",hex:"#00ff00"},{name:"green2",hex:"#00ee00"},{name:"green3",hex:"#00cd00"},{name:"green4",hex:"#008b00"},{name:"GreenYellow",hex:"#adff2f"},{name:"grey",hex:"#808080"},{name:"grey0",hex:"#000000"},{name:"grey1",hex:"#030303"},{name:"grey2",hex:"#050505"},{name:"grey3",hex:"#080808"},{name:"grey4",hex:"#0a0a0a"},{name:"grey5",hex:"#0d0d0d"},{name:"grey6",hex:"#0f0f0f"},{name:"grey7",hex:"#121212"},{name:"grey8",hex:"#141414"},{name:"grey9",hex:"#171717"},{name:"grey10",hex:"#1a1a1a"},{name:"grey11",hex:"#1c1c1c"},{name:"grey12",hex:"#1f1f1f"},{name:"grey13",hex:"#212121"},{name:"grey14",hex:"#242424"},{name:"grey15",hex:"#262626"},{name:"grey16",hex:"#292929"},{name:"grey17",hex:"#2b2b2b"},{name:"grey18",hex:"#2e2e2e"},{name:"grey19",hex:"#303030"},{name:"grey20",hex:"#333333"},{name:"grey21",hex:"#363636"},{name:"grey22",hex:"#383838"},{name:"grey23",hex:"#3b3b3b"},{name:"grey24",hex:"#3d3d3d"},{name:"grey25",hex:"#404040"},{name:"grey26",hex:"#424242"},{name:"grey27",hex:"#454545"},{name:"grey28",hex:"#474747"},{name:"grey29",hex:"#4a4a4a"},{name:"grey30",hex:"#4d4d4d"},{name:"grey31",hex:"#4f4f4f"},{name:"grey32",hex:"#525252"},{name:"grey33",hex:"#545454"},{name:"grey34",hex:"#575757"},{name:"grey35",hex:"#595959"},{name:"grey36",hex:"#5c5c5c"},{name:"grey37",hex:"#5e5e5e"},{name:"grey38",hex:"#616161"},{name:"grey39",hex:"#636363"},{name:"grey40",hex:"#666666"},{name:"grey41",hex:"#696969"},{name:"grey42",hex:"#6b6b6b"},{name:"grey43",hex:"#6e6e6e"},{name:"grey44",hex:"#707070"},{name:"grey45",hex:"#737373"},{name:"grey46",hex:"#757575"},{name:"grey47",hex:"#787878"},{name:"grey48",hex:"#7a7a7a"},{name:"grey49",hex:"#7d7d7d"},{name:"grey50",hex:"#7f7f7f"},{name:"grey51",hex:"#828282"},{name:"grey52",hex:"#858585"},{name:"grey53",hex:"#878787"},{name:"grey54",hex:"#8a8a8a"},{name:"grey55",hex:"#8c8c8c"},{name:"grey56",hex:"#8f8f8f"},{name:"grey57",hex:"#919191"},{name:"grey58",hex:"#949494"},{name:"grey59",hex:"#969696"},{name:"grey60",hex:"#999999"},{name:"grey61",hex:"#9c9c9c"},{name:"grey62",hex:"#9e9e9e"},{name:"grey63",hex:"#a1a1a1"},{name:"grey64",hex:"#a3a3a3"},{name:"grey65",hex:"#a6a6a6"},{name:"grey66",hex:"#a8a8a8"},{name:"grey67",hex:"#ababab"},{name:"grey68",hex:"#adadad"},{name:"grey69",hex:"#b0b0b0"},{name:"grey70",hex:"#b3b3b3"},{name:"grey71",hex:"#b5b5b5"},{name:"grey72",hex:"#b8b8b8"},{name:"grey73",hex:"#bababa"},{name:"grey74",hex:"#bdbdbd"},{name:"grey75",hex:"#bfbfbf"},{name:"grey76",hex:"#c2c2c2"},{name:"grey77",hex:"#c4c4c4"},{name:"grey78",hex:"#c7c7c7"},{name:"grey79",hex:"#c9c9c9"},{name:"grey80",hex:"#cccccc"},{name:"grey81",hex:"#cfcfcf"},{name:"grey82",hex:"#d1d1d1"},{name:"grey83",hex:"#d4d4d4"},{name:"grey84",hex:"#d6d6d6"},{name:"grey85",hex:"#d9d9d9"},{name:"grey86",hex:"#dbdbdb"},{name:"grey87",hex:"#dedede"},{name:"grey88",hex:"#e0e0e0"},{name:"grey89",hex:"#e3e3e3"},{name:"grey90",hex:"#e5e5e5"},{name:"grey91",hex:"#e8e8e8"},{name:"grey92",hex:"#ebebeb"},{name:"grey93",hex:"#ededed"},{name:"grey94",hex:"#f0f0f0"},{name:"grey95",hex:"#f2f2f2"},{name:"grey96",hex:"#f5f5f5"},{name:"grey97",hex:"#f7f7f7"},{name:"grey98",hex:"#fafafa"},{name:"grey99",hex:"#fcfcfc"},{name:"grey100",hex:"#ffffff"},{name:"honeydew",hex:"#f0fff0"},{name:"honeydew1",hex:"#f0fff0"},{name:"honeydew2",hex:"#e0eee0"},{name:"honeydew3",hex:"#c1cdc1"},{name:"honeydew4",hex:"#838b83"},{name:"HotPink",hex:"#ff69b4"},{name:"HotPink1",hex:"#ff6eb4"},{name:"HotPink2",hex:"#ee6aa7"},{name:"HotPink3",hex:"#cd6090"},{name:"HotPink4",hex:"#8b3a62"},{name:"IndianRed",hex:"#cd5c5c"},{name:"IndianRed1",hex:"#ff6a6a"},{name:"IndianRed2",hex:"#ee6363"},{name:"IndianRed3",hex:"#cd5555"},{name:"IndianRed4",hex:"#8b3a3a"},{name:"indigo",hex:"#4b0082"},{name:"ivory",hex:"#fffff0"},{name:"ivory1",hex:"#fffff0"},{name:"ivory2",hex:"#eeeee0"},{name:"ivory3",hex:"#cdcdc1"},{name:"ivory4",hex:"#8b8b83"},{name:"khaki",hex:"#f0e68c"},{name:"khaki1",hex:"#fff68f"},{name:"khaki2",hex:"#eee685"},{name:"khaki3",hex:"#cdc673"},{name:"khaki4",hex:"#8b864e"},{name:"lavender",hex:"#e6e6fa"},{name:"LavenderBlush",hex:"#fff0f5"},{name:"LavenderBlush1",hex:"#fff0f5"},{name:"LavenderBlush2",hex:"#eee0e5"},{name:"LavenderBlush3",hex:"#cdc1c5"},{name:"LavenderBlush4",hex:"#8b8386"},{name:"LawnGreen",hex:"#7cfc00"},{name:"LemonChiffon",hex:"#fffacd"},{name:"LemonChiffon1",hex:"#fffacd"},{name:"LemonChiffon2",hex:"#eee9bf"},{name:"LemonChiffon3",hex:"#cdc9a5"},{name:"LemonChiffon4",hex:"#8b8970"},{name:"LightBlue",hex:"#add8e6"},{name:"LightBlue1",hex:"#bfefff"},{name:"LightBlue2",hex:"#b2dfee"},{name:"LightBlue3",hex:"#9ac0cd"},{name:"LightBlue4",hex:"#68838b"},{name:"LightCoral",hex:"#f08080"},{name:"LightCyan",hex:"#e0ffff"},{name:"LightCyan1",hex:"#e0ffff"},{name:"LightCyan2",hex:"#d1eeee"},{name:"LightCyan3",hex:"#b4cdcd"},{name:"LightCyan4",hex:"#7a8b8b"},{name:"LightGoldenrod",hex:"#eedd82"},{name:"LightGoldenrod1",hex:"#ffec8b"},{name:"LightGoldenrod2",hex:"#eedc82"},{name:"LightGoldenrod3",hex:"#cdbe70"},{name:"LightGoldenrod4",hex:"#8b814c"},{name:"LightGoldenrodYellow",hex:"#fafad2"},{name:"LightGray",hex:"#d3d3d3"},{name:"LightGreen",hex:"#90ee90"},{name:"LightGrey",hex:"#d3d3d3"},{name:"LightPink",hex:"#ffb6c1"},{name:"LightPink1",hex:"#ffaeb9"},{name:"LightPink2",hex:"#eea2ad"},{name:"LightPink3",hex:"#cd8c95"},{name:"LightPink4",hex:"#8b5f65"},{name:"LightSalmon",hex:"#ffa07a"},{name:"LightSalmon1",hex:"#ffa07a"},{name:"LightSalmon2",hex:"#ee9572"},{name:"LightSalmon3",hex:"#cd8162"},{name:"LightSalmon4",hex:"#8b5742"},{name:"LightSeaGreen",hex:"#20b2aa"},{name:"LightSkyBlue",hex:"#87cefa"},{name:"LightSkyBlue1",hex:"#b0e2ff"},{name:"LightSkyBlue2",hex:"#a4d3ee"},{name:"LightSkyBlue3",hex:"#8db6cd"},{name:"LightSkyBlue4",hex:"#607b8b"},{name:"LightSlateBlue",hex:"#8470ff"},{name:"LightSlateGray",hex:"#778899"},{name:"LightSlateGrey",hex:"#778899"},{name:"LightSteelBlue",hex:"#b0c4de"},{name:"LightSteelBlue1",hex:"#cae1ff"},{name:"LightSteelBlue2",hex:"#bcd2ee"},{name:"LightSteelBlue3",hex:"#a2b5cd"},{name:"LightSteelBlue4",hex:"#6e7b8b"},{name:"LightYellow",hex:"#ffffe0"},{name:"LightYellow1",hex:"#ffffe0"},{name:"LightYellow2",hex:"#eeeed1"},{name:"LightYellow3",hex:"#cdcdb4"},{name:"LightYellow4",hex:"#8b8b7a"},{name:"lime",hex:"#00ff00"},{name:"LimeGreen",hex:"#32cd32"},{name:"linen",hex:"#faf0e6"},{name:"magenta",hex:"#ff00ff"},{name:"magenta1",hex:"#ff00ff"},{name:"magenta2",hex:"#ee00ee"},{name:"magenta3",hex:"#cd00cd"},{name:"magenta4",hex:"#8b008b"},{name:"maroon",hex:"#800000"},{name:"maroon1",hex:"#ff34b3"},{name:"maroon2",hex:"#ee30a7"},{name:"maroon3",hex:"#cd2990"},{name:"maroon4",hex:"#8b1c62"},{name:"MediumAquamarine",hex:"#66cdaa"},{name:"MediumBlue",hex:"#0000cd"},{name:"MediumOrchid",hex:"#ba55d3"},{name:"MediumOrchid1",hex:"#e066ff"},{name:"MediumOrchid2",hex:"#d15fee"},{name:"MediumOrchid3",hex:"#b452cd"},{name:"MediumOrchid4",hex:"#7a378b"},{name:"MediumPurple",hex:"#9370db"},{name:"MediumPurple1",hex:"#ab82ff"},{name:"MediumPurple2",hex:"#9f79ee"},{name:"MediumPurple3",hex:"#8968cd"},{name:"MediumPurple4",hex:"#5d478b"},{name:"MediumSeaGreen",hex:"#3cb371"},{name:"MediumSlateBlue",hex:"#7b68ee"},{name:"MediumSpringGreen",hex:"#00fa9a"},{name:"MediumTurquoise",hex:"#48d1cc"},{name:"MediumVioletRed",hex:"#c71585"},{name:"MidnightBlue",hex:"#191970"},{name:"MintCream",hex:"#f5fffa"},{name:"MistyRose",hex:"#ffe4e1"},{name:"MistyRose1",hex:"#ffe4e1"},{name:"MistyRose2",hex:"#eed5d2"},{name:"MistyRose3",hex:"#cdb7b5"},{name:"MistyRose4",hex:"#8b7d7b"},{name:"moccasin",hex:"#ffe4b5"},{name:"NavajoWhite",hex:"#ffdead"},{name:"NavajoWhite1",hex:"#ffdead"},{name:"NavajoWhite2",hex:"#eecfa1"},{name:"NavajoWhite3",hex:"#cdb38b"},{name:"NavajoWhite4",hex:"#8b795e"},{name:"navy",hex:"#000080"},{name:"NavyBlue",hex:"#000080"},{name:"OldLace",hex:"#fdf5e6"},{name:"olive",hex:"#808000"},{name:"OliveDrab",hex:"#6b8e23"},{name:"OliveDrab1",hex:"#c0ff3e"},{name:"OliveDrab2",hex:"#b3ee3a"},{name:"OliveDrab3",hex:"#9acd32"},{name:"OliveDrab4",hex:"#698b22"},{name:"orange",hex:"#ffa500"},{name:"orange1",hex:"#ffa500"},{name:"orange2",hex:"#ee9a00"},{name:"orange3",hex:"#cd8500"},{name:"orange4",hex:"#8b5a00"},{name:"OrangeRed",hex:"#ff4500"},{name:"OrangeRed1",hex:"#ff4500"},{name:"OrangeRed2",hex:"#ee4000"},{name:"OrangeRed3",hex:"#cd3700"},{name:"OrangeRed4",hex:"#8b2500"},{name:"orchid",hex:"#da70d6"},{name:"orchid1",hex:"#ff83fa"},{name:"orchid2",hex:"#ee7ae9"},{name:"orchid3",hex:"#cd69c9"},{name:"orchid4",hex:"#8b4789"},{name:"PaleGoldenrod",hex:"#eee8aa"},{name:"PaleGreen",hex:"#98fb98"},{name:"PaleGreen1",hex:"#9aff9a"},{name:"PaleGreen2",hex:"#90ee90"},{name:"PaleGreen3",hex:"#7ccd7c"},{name:"PaleGreen4",hex:"#548b54"},{name:"PaleTurquoise",hex:"#afeeee"},{name:"PaleTurquoise1",hex:"#bbffff"},{name:"PaleTurquoise2",hex:"#aeeeee"},{name:"PaleTurquoise3",hex:"#96cdcd"},{name:"PaleTurquoise4",hex:"#668b8b"},{name:"PaleVioletRed",hex:"#db7093"},{name:"PaleVioletRed1",hex:"#ff82ab"},{name:"PaleVioletRed2",hex:"#ee799f"},{name:"PaleVioletRed3",hex:"#cd6889"},{name:"PaleVioletRed4",hex:"#8b475d"},{name:"PapayaWhip",hex:"#ffefd5"},{name:"PeachPuff",hex:"#ffdab9"},{name:"PeachPuff1",hex:"#ffdab9"},{name:"PeachPuff2",hex:"#eecbad"},{name:"PeachPuff3",hex:"#cdaf95"},{name:"PeachPuff4",hex:"#8b7765"},{name:"peru",hex:"#cd853f"},{name:"pink",hex:"#ffc0cb"},{name:"pink1",hex:"#ffb5c5"},{name:"pink2",hex:"#eea9b8"},{name:"pink3",hex:"#cd919e"},{name:"pink4",hex:"#8b636c"},{name:"plum",hex:"#dda0dd"},{name:"plum1",hex:"#ffbbff"},{name:"plum2",hex:"#eeaeee"},{name:"plum3",hex:"#cd96cd"},{name:"plum4",hex:"#8b668b"},{name:"PowderBlue",hex:"#b0e0e6"},{name:"purple",hex:"#800080"},{name:"purple1",hex:"#9b30ff"},{name:"purple2",hex:"#912cee"},{name:"purple3",hex:"#7d26cd"},{name:"purple4",hex:"#551a8b"},{name:"red",hex:"#ff0000"},{name:"red1",hex:"#ff0000"},{name:"red2",hex:"#ee0000"},{name:"red3",hex:"#cd0000"},{name:"red4",hex:"#8b0000"},{name:"RosyBrown",hex:"#bc8f8f"},{name:"RosyBrown1",hex:"#ffc1c1"},{name:"RosyBrown2",hex:"#eeb4b4"},{name:"RosyBrown3",hex:"#cd9b9b"},{name:"RosyBrown4",hex:"#8b6969"},{name:"RoyalBlue",hex:"#4169e1"},{name:"RoyalBlue1",hex:"#4876ff"},{name:"RoyalBlue2",hex:"#436eee"},{name:"RoyalBlue3",hex:"#3a5fcd"},{name:"RoyalBlue4",hex:"#27408b"},{name:"SaddleBrown",hex:"#8b4513"},{name:"salmon",hex:"#fa8072"},{name:"salmon1",hex:"#ff8c69"},{name:"salmon2",hex:"#ee8262"},{name:"salmon3",hex:"#cd7054"},{name:"salmon4",hex:"#8b4c39"},{name:"SandyBrown",hex:"#f4a460"},{name:"SeaGreen",hex:"#2e8b57"},{name:"SeaGreen1",hex:"#54ff9f"},{name:"SeaGreen2",hex:"#4eee94"},{name:"SeaGreen3",hex:"#43cd80"},{name:"SeaGreen4",hex:"#2e8b57"},{name:"seashell",hex:"#fff5ee"},{name:"seashell1",hex:"#fff5ee"},{name:"seashell2",hex:"#eee5de"},{name:"seashell3",hex:"#cdc5bf"},{name:"seashell4",hex:"#8b8682"},{name:"sienna",hex:"#a0522d"},{name:"sienna1",hex:"#ff8247"},{name:"sienna2",hex:"#ee7942"},{name:"sienna3",hex:"#cd6839"},{name:"sienna4",hex:"#8b4726"},{name:"silver",hex:"#c0c0c0"},{name:"SkyBlue",hex:"#87ceeb"},{name:"SkyBlue1",hex:"#87ceff"},{name:"SkyBlue2",hex:"#7ec0ee"},{name:"SkyBlue3",hex:"#6ca6cd"},{name:"SkyBlue4",hex:"#4a708b"},{name:"SlateBlue",hex:"#6a5acd"},{name:"SlateBlue1",hex:"#836fff"},{name:"SlateBlue2",hex:"#7a67ee"},{name:"SlateBlue3",hex:"#6959cd"},{name:"SlateBlue4",hex:"#473c8b"},{name:"SlateGray",hex:"#708090"},{name:"SlateGray1",hex:"#c6e2ff"},{name:"SlateGray2",hex:"#b9d3ee"},{name:"SlateGray3",hex:"#9fb6cd"},{name:"SlateGray4",hex:"#6c7b8b"},{name:"SlateGrey",hex:"#708090"},{name:"snow",hex:"#fffafa"},{name:"snow1",hex:"#fffafa"},{name:"snow2",hex:"#eee9e9"},{name:"snow3",hex:"#cdc9c9"},{name:"snow4",hex:"#8b8989"},{name:"SpringGreen",hex:"#00ff7f"},{name:"SpringGreen1",hex:"#00ff7f"},{name:"SpringGreen2",hex:"#00ee76"},{name:"SpringGreen3",hex:"#00cd66"},{name:"SpringGreen4",hex:"#008b45"},{name:"SteelBlue",hex:"#4682b4"},{name:"SteelBlue1",hex:"#63b8ff"},{name:"SteelBlue2",hex:"#5cacee"},{name:"SteelBlue3",hex:"#4f94cd"},{name:"SteelBlue4",hex:"#36648b"},{name:"tan",hex:"#d2b48c"},{name:"tan1",hex:"#ffa54f"},{name:"tan2",hex:"#ee9a49"},{name:"tan3",hex:"#cd853f"},{name:"tan4",hex:"#8b5a2b"},{name:"teal",hex:"#008080"},{name:"thistle",hex:"#d8bfd8"},{name:"thistle1",hex:"#ffe1ff"},{name:"thistle2",hex:"#eed2ee"},{name:"thistle3",hex:"#cdb5cd"},{name:"thistle4",hex:"#8b7b8b"},{name:"tomato",hex:"#ff6347"},{name:"tomato1",hex:"#ff6347"},{name:"tomato2",hex:"#ee5c42"},{name:"tomato3",hex:"#cd4f39"},{name:"tomato4",hex:"#8b3626"},{name:"turquoise",hex:"#40e0d0"},{name:"turquoise1",hex:"#00f5ff"},{name:"turquoise2",hex:"#00e5ee"},{name:"turquoise3",hex:"#00c5cd"},{name:"turquoise4",hex:"#00868b"},{name:"violet",hex:"#ee82ee"},{name:"VioletRed",hex:"#d02090"},{name:"VioletRed1",hex:"#ff3e96"},{name:"VioletRed2",hex:"#ee3a8c"},{name:"VioletRed3",hex:"#cd3278"},{name:"VioletRed4",hex:"#8b2252"},{name:"wheat",hex:"#f5deb3"},{name:"wheat1",hex:"#ffe1ff"},{name:"wheat2",hex:"#eed2ee"},{name:"wheat3",hex:"#cdb5cd"},{name:"wheat4",hex:"#8b7b8b"},{name:"white",hex:"#ffffff"},{name:"WhiteSmoke",hex:"#f5f5f5"},{name:"yellow",hex:"#ffff00"},{name:"yellow1",hex:"#ffff00"},{name:"yellow2",hex:"#eeee00"},{name:"yellow3",hex:"#cdcd00"},{name:"yellow4",hex:"#8b8b00"},{name:"YellowGreen",hex:"#9acd32"}],Hr=new Map(Za.map(e=>[e.name.toLowerCase(),e.hex])),wl=new Map;for(const e of Za){const t=e.hex.toLowerCase();wl.has(t)||wl.set(t,e.name)}const Xo=e=>{if(!e||typeof e!="string")return null;const t=e.trim(),n=t.toLowerCase();if(Hr.has(n))return Hr.get(n);if(t.startsWith("#")){if(/^#([0-9a-f]{3}){1,2}$/i.test(t)){if(t.length===4){const c=t[1],u=t[2],f=t[3];return`#${c}${c}${u}${u}${f}${f}`.toLowerCase()}return t.toLowerCase()}return null}const i=document.createElement("canvas").getContext("2d");if(!i)return null;i.fillStyle="__invalid_color__";const o=i.fillStyle;i.fillStyle=t;const r=i.fillStyle;return r===o||r==="rgba(0, 0, 0, 0)"?null:r},Au=({label:e,isActive:t,onClick:n,title:i})=>l.jsx("button",{onClick:n,className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors ${t?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-transparent text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,title:i,children:e}),qT=({isOpen:e,onClose:t,onSelect:n,allColors:i})=>{const[o,r]=T.useState(""),[c,u]=T.useState(null),[f,d]=T.useState("group"),m=T.useMemo(()=>c&&wl.get(c.toLowerCase())||null,[c]),g=T.useMemo(()=>{const b=[...i];switch(f){case"alpha":return b.sort((v,E)=>v.name.localeCompare(E.name));case"hex":return b.sort((v,E)=>parseInt(v.hex.substring(1),16)-parseInt(E.hex.substring(1),16));case"group":default:return i}},[f,i]),h=T.useMemo(()=>{if(!o)return g;const b=o.toLowerCase();return g.filter(v=>v.name.toLowerCase().includes(b)||v.hex.toLowerCase().includes(b))},[o,g]),p=()=>{c&&n(c),t()};return T.useEffect(()=>{e&&(u(null),r(""),d("group"))},[e]),e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col",onClick:b=>b.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Усі кольори Tkinter"}),l.jsxs("div",{className:"relative w-64",children:[l.jsx("input",{type:"text",placeholder:"Пошук за назвою або HEX...",value:o,onChange:b=>r(b.target.value),className:"w-full px-3 py-1.5 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-md border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-8"}),o&&l.jsx("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 px-2 flex items-center text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:"Очистити пошук","aria-label":"Очистити пошук",children:l.jsx(gt,{size:16})})]}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"flex justify-start items-center p-2 px-4 border-b border-[var(--border-primary)] flex-shrink-0 gap-2",children:[l.jsx("span",{className:"text-sm font-semibold text-[var(--text-tertiary)]",children:"Сортувати:"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Au,{label:"За групою",isActive:f==="group",onClick:()=>d("group"),title:"Сортувати за логічними групами кольорів"}),l.jsx(Au,{label:"За алфавітом (A-Z)",isActive:f==="alpha",onClick:()=>d("alpha"),title:"Сортувати за назвою в алфавітному порядку"}),l.jsx(Au,{label:"За кодом (#)",isActive:f==="hex",onClick:()=>d("hex"),title:"Сортувати за шістнадцятковим кодом"})]})]}),l.jsx("div",{className:"flex-grow p-4 overflow-y-auto",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:h.map(b=>l.jsxs("button",{onClick:()=>u(b.hex),className:`p-2 rounded-md transition-all duration-150 border-2 ${c===b.hex?"border-[var(--accent-primary)] ring-2 ring-[var(--accent-primary)]":"border-transparent hover:border-white/30"}`,title:`${b.name} (${b.hex})`,children:[l.jsx("div",{className:"w-full h-10 rounded-md border border-white/20",style:{backgroundColor:b.hex}}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xs mt-1.5 truncate text-[var(--text-secondary)]",children:b.name}),l.jsx("div",{className:"text-xs font-mono text-[var(--text-tertiary)] opacity-75",children:b.hex})]})]},b.name))})}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-between items-center flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-sm text-[var(--text-tertiary)]",children:"Вибрано:"}),c?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 rounded border border-white/20",style:{backgroundColor:c}}),l.jsxs("span",{className:"text-sm text-[var(--text-primary)]",children:[m?`${m} `:"",l.jsx("span",{className:"font-mono text-[var(--text-tertiary)]",children:c})]})]}):l.jsx("span",{className:"text-sm text-[var(--text-tertiary)] italic",children:"Нічого"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:p,disabled:!c,className:"px-6 py-2 rounded-lg font-semibold bg-green-600 text-[var(--accent-text)] hover:bg-green-500 transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Застосувати"})]})]})]})}):null},Jt=({id:e,value:t,onChange:n,onPreview:i,onCancel:o,disabled:r,title:c,showNotification:u})=>{const[f,d]=T.useState(t),[m,g]=T.useState(!1),[h,p]=T.useState(!1),[b,v]=T.useState(!1),[E,C]=T.useState(t),[x,S]=T.useState(null),w=T.useRef(null),A=T.useRef(null),[D,_]=T.useState({left:"40px"});T.useEffect(()=>{if(h&&w.current){const X=w.current.getBoundingClientRect(),y=window.innerWidth;X.left+40+224>y-16?_({right:"0px"}):_({left:"40px"})}},[h]),T.useEffect(()=>{m||d(t)},[t,m]);const M=T.useMemo(()=>{if(!f)return tg;const X=f.toLowerCase().trim();return X.startsWith("#")||X===""?tg:Za.filter(y=>y.name.toLowerCase().includes(X)||y.hex.toLowerCase().includes(X))},[f]),L=T.useMemo(()=>Xo(f)||"#000000",[f]),{convertibleTo:P,conversionTarget:Z}=T.useMemo(()=>{const X=f.trim(),y=X.toLowerCase();if(Hr.has(y))return{convertibleTo:"hex",conversionTarget:Hr.get(y)};const V=Xo(X);return V&&wl.has(V.toLowerCase())?{convertibleTo:"name",conversionTarget:wl.get(V.toLowerCase())}:{convertibleTo:null,conversionTarget:null}},[f]),pe=T.useMemo(()=>f.trim().startsWith("#")?"HEX-код у форматі #RRGGBB або #RGB. Дозволені символи: 0-9, a-f.":"Введіть назву кольору (напр., 'Red', 'LightBlue') або HEX-код.",[f]),Te=X=>{if(!X||typeof X!="string"||X.trim().startsWith("#"))return!1;const y=document.createElement("canvas").getContext("2d");if(!y)return!1;y.fillStyle="__invalid_color__";const V=y.fillStyle;y.fillStyle=X.trim();const B=y.fillStyle;return B!==V&&B!=="rgba(0, 0, 0, 0)"},_e=T.useCallback(()=>{m||(C(t),g(!0))},[m,t]),de=()=>{_e(),p(!0)},ee=X=>{_e();const y=X.target.value;let V="";y.startsWith("#")?(V="#"+y.substring(1).replace(/[^0-9a-fA-F]/g,""),V.length>7&&(V=V.substring(0,7))):V=y.replace(/[^a-zA-Z0-9\s]/g,""),d(V),i(Xo(V)),h||p(!0)},xe=X=>{const y=X.target.value;_e(),d(y),i(y)},O=()=>{_e(),p(!1)},H=X=>{var y;_e(),d(X),i(Xo(X)),p(!1),(y=A.current)==null||y.focus()},oe=()=>{Z&&(_e(),d(Z),i(Xo(Z)))},le=T.useCallback(()=>{var X;m&&(d(E),o(),g(!1),p(!1),(X=A.current)==null||X.blur())},[E,o,m]),be=T.useCallback(()=>{if(!m||x)return;const X=f.trim();if(X===""){le();return}const y=Xo(X);if(!y)d(E),o();else if(X.startsWith("#"))n(y);else if(Te(X))n(X);else if(Hr.has(X.toLowerCase())){S({name:X,hex:y});return}else d(E),o();g(!1),p(!1)},[f,n,o,m,E,x,le]),Ee=()=>{x&&(n(x.hex),S(null),g(!1),p(!1))},G=()=>{x&&(n(x.name),S(null),g(!1),p(!1))},te=X=>{var y;X.key==="Enter"?(be(),(y=A.current)==null||y.blur()):X.key==="Escape"&&le()};return a0(w,()=>{m&&be()}),l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:w,className:"relative flex items-center gap-2",children:[l.jsx("input",{id:e,type:"color",value:L,onInput:xe,onClick:O,disabled:r,title:c,className:"w-8 h-8 p-0 border-none rounded cursor-pointer bg-[var(--bg-secondary)] disabled:opacity-50 disabled:cursor-not-allowed"}),l.jsxs("div",{className:"relative w-28",children:[l.jsx("input",{ref:A,type:"text",value:f,onChange:ee,onFocus:de,onKeyDown:te,disabled:r,placeholder:"#rrggbb or name",className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none text-sm disabled:opacity-50 ${P?"pr-8":""}`,title:pe,autoComplete:"off"}),P&&!r&&l.jsx("button",{type:"button",onClick:oe,className:"absolute inset-y-0 right-0 px-2 flex items-center text-[var(--text-tertiary)] hover:text-[var(--text-primary)] z-10",title:`Перетворити на ${P==="hex"?"HEX-код":"назву"}`,children:l.jsx(Kf,{size:16})})]}),m&&!r&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",onClick:le,className:"p-2 rounded-md font-semibold transition-colors duration-200 text-red-500 hover:bg-[var(--destructive-bg)] hover:text-[var(--accent-text)]",title:"Скасувати (Esc)",children:l.jsx(gt,{size:16})}),l.jsx("button",{type:"button",onClick:be,className:"p-2 rounded-md font-semibold transition-colors duration-200 bg-green-600 text-[var(--accent-text)] hover:bg-green-500",title:"Підтвердити (Enter)",children:l.jsx(i0,{size:16})})]}),h&&!r&&l.jsxs("div",{className:"absolute z-20 top-full mt-1 w-[224px] bg-[var(--bg-secondary)] rounded-md shadow-lg border border-[var(--border-secondary)] animate-fade-in-down flex flex-col",style:{...D,animationDuration:"150ms"},children:[l.jsx("div",{className:"max-h-52 overflow-y-auto",children:M.length>0?M.map(X=>l.jsxs("button",{onClick:()=>H(X.name),className:"w-full flex items-center justify-between gap-3 px-3 py-1.5 text-left text-sm text-[var(--text-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[l.jsxs("div",{className:"flex items-center gap-2 truncate",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm border border-white/20 flex-shrink-0",style:{backgroundColor:X.hex}}),l.jsx("span",{className:"truncate",children:X.name})]}),l.jsx("span",{className:"font-mono text-xs text-[var(--text-tertiary)] opacity-75 flex-shrink-0",children:X.hex})]},X.name)):l.jsx("div",{className:"px-3 py-2 text-sm text-[var(--text-tertiary)]",children:"Не знайдено"})}),l.jsx("div",{className:"p-1 border-t border-[var(--border-secondary)]",children:l.jsx("button",{onClick:()=>{p(!1),v(!0)},className:"w-full text-center px-3 py-2 text-sm text-[var(--accent-primary)] hover:bg-[var(--accent-primary)]/10 rounded-md",children:"Усі кольори Tk..."})})]})]}),b&&l.jsx(qT,{isOpen:b,onClose:()=>v(!1),onSelect:X=>{const y=wl.get(X.toLowerCase());y&&(H(y),be())},allColors:Za}),x&&l.jsx(s0,{isOpen:!0,onClose:G,onConfirm:Ee,title:"Нестандартний колір",message:`Колір "${x.name}" не є стандартним веб-кольором. У редакторі він може відображатися чорним. Зберегти назву чи перетворити на HEX (${x.hex}) для коректного відображення?`,confirmText:"Перетворити на HEX",cancelText:"Зберегти назву",variant:"primary"})]})},Pn=({id:e,checked:t,onChange:n,label:i,disabled:o,title:r})=>l.jsxs("div",{className:"flex items-center gap-2",title:r,children:[l.jsx("input",{id:e,type:"checkbox",checked:t,onChange:c=>n(c.target.checked),disabled:o,className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),l.jsx("label",{htmlFor:e,className:`text-sm font-medium ${o?"text-[var(--text-disabled)]":"text-[var(--text-secondary)]"}`,children:i})]}),fn=({id:e,value:t,onChange:n,children:i,disabled:o,title:r,className:c})=>l.jsx("select",{id:e,value:t,onChange:u=>n(u.target.value),disabled:o,title:r,className:`bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1.5 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${c??""}`,children:i}),ng=({id:e,value:t,onChange:n,disabled:i,rows:o=3,title:r,placeholder:c})=>l.jsx("textarea",{id:e,value:t,onChange:u=>n(u.target.value),disabled:i,rows:o,title:r,placeholder:c,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),OT=({id:e,value:t,onChange:n,disabled:i,isCustom:o})=>{const[r,c]=T.useState(!1),u=T.useRef(null);a0(u,()=>c(!1));const f=o?{name:"Користувацький"}:xa.find(m=>JSON.stringify(m.pattern)===JSON.stringify(t??[]))??xa[0],d=m=>{n(m.length>0?m:void 0),c(!1)};return l.jsxs("div",{ref:u,className:"relative w-full",children:[l.jsxs("button",{id:e,type:"button",onClick:()=>c(m=>!m),disabled:i,className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-between",title:"Вибрати готовий стиль штрихування або налаштувати власний",children:[l.jsx("span",{className:"truncate",children:f.name}),l.jsx(aT,{size:16,className:`transform transition-transform text-[var(--text-tertiary)] ${r?"rotate-180":"rotate-0"}`})]}),r&&l.jsx("div",{className:"absolute z-10 top-full right-0 mt-0 bg-[var(--bg-tertiary)] rounded-md shadow-lg max-h-60 overflow-y-auto border border-[var(--border-secondary)] w-[calc(100%+7.5rem)]",children:xa.map(m=>l.jsxs("button",{onClick:()=>d(m.pattern),title:m.description,className:"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-[var(--text-primary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[l.jsx("div",{className:"w-20 flex-shrink-0 flex items-center justify-center h-4 mr-2",children:l.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 4",preserveAspectRatio:"none",children:l.jsx("line",{x1:"0",y1:"2",x2:"100",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeDasharray:m.pattern.join(" "),strokeLinecap:"round"})})}),l.jsx("span",{className:"flex-grow",children:m.name})]},m.name))})]})},Ld=({shape:e,updateShape:t,roundFn:n})=>{const i=e.stroke==="none"||e.strokeWidth===0,o=e.strokeWidth>0?e.strokeWidth:1,r=St.useMemo(()=>!e.dash||e.dash.length===0?!1:!xa.some(m=>JSON.stringify(m.pattern)===JSON.stringify(e.dash)),[e.dash]),c=m=>{t({...e,dash:m,dashoffset:m?e.dashoffset??0:void 0})},u=(m,g)=>{if(!e.dash)return;const h=[...e.dash],p=g>=0?g/o:0;h[m]=p,t({...e,dash:h})},f=()=>{const m=e.dash??[];t({...e,dash:[...m,5,3]})},d=()=>{if(!e.dash||e.dash.length<2)return;const m=e.dash.slice(0,-2);t({...e,dash:m.length>0?m:void 0})};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-dash-select`,title:"Стиль штрихування лінії.",children:"Штрихування:"}),l.jsx(OT,{id:`${e.id}-dash-select`,value:e.dash,onChange:c,disabled:i,isCustom:r})]}),e.dash&&e.dash.length>0&&l.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[l.jsx("div",{className:"space-y-2",children:e.dash.map((m,g)=>l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-dash-${g}`,title:g%2===0?`Довжина ${g/2+1}-го штриха в пікселях.`:`Довжина ${Math.ceil(g/2)}-го пропуску в пікселях.`,children:g%2===0?`Штрих ${g/2+1} (px):`:`Пропуск ${Math.ceil(g/2)} (px):`}),l.jsx(Ce,{id:`${e.id}-dash-${g}`,value:n(m*o),onChange:h=>u(g,h),min:0,disabled:i,title:g%2===0?"Довжина штриха в пікселях":"Довжина пропуску в пікселях"})]},g))}),l.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[l.jsx("button",{onClick:d,disabled:e.dash.length<2,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--destructive-bg)] rounded-md disabled:opacity-50",title:"Видалити останній сегмент (штрих і пропуск)",children:"-"}),l.jsx("button",{onClick:f,className:"px-2 py-1 text-sm bg-[var(--bg-tertiary)] hover:bg-[var(--accent-primary)] rounded-md",title:"Додати сегмент (штрих і пропуск)",children:"+"})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-dashoffset`,title:"Зміщення патерна штрихування вздовж лінії.",children:"Зсув штриха:"}),l.jsx(Ce,{id:`${e.id}-dashoffset`,value:n(e.dashoffset??0),onChange:m=>t({...e,dashoffset:m}),disabled:i,title:"Зміщує початок патерна штрихування вздовж лінії"})]})]})]})},Cn=({shape:e,updateShape:t})=>{const n="fill"in e&&e.fill!=="none";return l.jsxs(l.Fragment,{children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-stipple`,title:"Патерн для заповнення фігури (працює лише на X11).",children:"Патерн заливки:"}),l.jsxs(fn,{id:`${e.id}-stipple`,value:e.stipple??"none",onChange:i=>t({...e,stipple:i==="none"?void 0:i}),disabled:!n,title:"Вибрати патерн для заповнення фігури.",children:[l.jsx("option",{value:"none",children:"Немає"}),l.jsx("option",{value:"gray12",children:"Gray 12%"}),l.jsx("option",{value:"gray25",children:"Gray 25%"}),l.jsx("option",{value:"gray50",children:"Gray 50%"}),l.jsx("option",{value:"gray75",children:"Gray 75%"})]})]}),l.jsx("div",{className:"text-xs text-[var(--text-tertiary)] ml-32 -mt-2 mb-2",children:"Примітка: stipple може працювати лише на X11."})]})},Ln=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,fillColor:o,showNotification:r})=>{const c=e.fill==="none",u=e.type==="arc"&&e.style==="arc"||(e.type==="polyline"||e.type==="bezier")&&!e.isClosed;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{id:`${e.id}-fill-toggle`,type:"checkbox",checked:!c,onChange:f=>{if(f.target.checked){const d=e._previousFill||o;t({...e,fill:d})}else t({...e,fill:"none",_previousFill:e.fill})},disabled:u,title:"Увімкнути або вимкнути заливку фігури.",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),l.jsx(Jt,{id:`${e.id}-fill`,value:c?"#000000":e.fill,onChange:f=>t({...e,fill:f}),onPreview:f=>n(e.id,{fill:f}),onCancel:i,disabled:c||u,title:"Колір заливки фігури.",showNotification:r})]})},Un=({shape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,roundFn:o,strokeColor:r,showNotification:c})=>{const u=e.stroke==="none",f=e.type!=="text";return l.jsxs(l.Fragment,{children:[l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Контур"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{id:`${e.id}-stroke-toggle`,type:"checkbox",checked:!u,onChange:d=>{if(d.target.checked){const m=e._previousStroke||r;t({...e,stroke:m})}else t({...e,stroke:"none",_previousStroke:e.stroke})},title:"Увімкнути або вимкнути контур фігури.",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)] disabled:opacity-50 disabled:cursor-not-allowed"}),l.jsx(Jt,{id:`${e.id}-stroke`,value:u?"#ffffff":e.stroke,onChange:d=>t({...e,stroke:d}),onPreview:d=>n(e.id,{stroke:d}),onCancel:i,disabled:u,title:"Колір контуру фігури.",showNotification:c})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-stroke-width`,title:"Товщина лінії контуру в пікселях.",children:"Товщина:"}),l.jsx(Ce,{id:`${e.id}-stroke-width`,value:o(e.strokeWidth),onChange:d=>t({...e,strokeWidth:d}),min:0,disabled:u,title:"Товщина лінії контуру в пікселях.",smartRound:!1})]}),f&&l.jsx(Ld,{shape:e,updateShape:t,roundFn:o})]})},YT=({points:e,onPointsChange:t,shapeId:n,selectedShape:i,isEditing:o,activePointIndex:r,setActivePointIndex:c,deletePoint:u,addPoint:f,isShapeClosed:d,roundFn:m})=>{const[g,h]=T.useState(e.length<10),p=T.useRef([]),b=T.useRef([]);T.useEffect(()=>{p.current=p.current.slice(0,e.length),b.current=b.current.slice(0,e.length)},[e.length]),T.useEffect(()=>{var S,w;r!==null&&((S=p.current[r])==null||S.scrollIntoView({behavior:"smooth",block:"nearest"}),(w=b.current[r])==null||w.focus({preventScroll:!0}))},[r]);const v=T.useMemo(()=>bt(i),[i]),E=T.useMemo(()=>"rotation"in i?i.rotation:0,[i]),C=T.useMemo(()=>!v||E===0?e:e.map(S=>He(S,v,E)),[e,v,E]),x=(S,w,A)=>{if(!v)return;if(E===0){const P=[...e];P[S]={...P[S],[w]:A},t(P);return}const _={...C[S],[w]:A},M=He(_,v,-E),L=[...e];L[S]=M,t(L)};return l.jsxs("div",{className:"border-t border-[var(--border-secondary)] pt-2 mt-2",children:[l.jsxs("button",{onClick:()=>h(S=>!S),className:"w-full text-left font-semibold text-[var(--text-secondary)] py-1 flex justify-between items-center",title:"Показати/приховати список вузлових точок фігури",children:[l.jsxs("span",{children:["Вузли (",e.length,")"]}),l.jsx("span",{className:`transform transition-transform ${g?"rotate-180":"rotate-0"}`,children:"▼"})]}),g&&l.jsx("div",{className:"space-y-1 mt-2 max-h-60 overflow-y-auto pr-2",children:e.map((S,w)=>l.jsxs(St.Fragment,{children:[l.jsxs("div",{ref:A=>{p.current[w]=A},className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 p-1 rounded-md transition-colors",children:[l.jsxs("span",{className:"text-xs text-[var(--text-tertiary)] font-mono text-right",children:[w,":"]}),l.jsx(Ce,{ref:A=>{b.current[w]=A},id:`${n}-point-${w}-x`,value:m(C[w].x),onChange:A=>x(w,"x",A),disabled:!o,onFocus:()=>c(w),title:`X-координата вузла ${w}`,className:r===w?"bg-[#4f46e5]/30":"",smartRound:!1}),l.jsx(Ce,{id:`${n}-point-${w}-y`,value:m(C[w].y),onChange:A=>x(w,"y",A),disabled:!o,onFocus:()=>c(w),title:`Y-координата вузла ${w}`,className:r===w?"bg-[#4f46e5]/30":"",smartRound:!1}),l.jsx("button",{onClick:()=>u(w),title:"Видалити вузол",className:"p-1 text-[var(--destructive-text)] hover:text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:!o||e.length<=2,children:l.jsx(wc,{size:16})})]},`${n}-point-${w}`),(d||w<e.length-1)&&o&&l.jsxs("div",{className:"grid grid-cols-[2.5rem_1fr_1fr_auto] items-center gap-2 h-4",children:[l.jsx("div",{className:"flex justify-center items-center",children:l.jsx("button",{onClick:()=>f(w+1),title:"Додати вузол між цим та наступним",className:"w-5 h-5 flex justify-center items-center bg-[var(--bg-primary)] text-[var(--text-tertiary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)] rounded-full transition-colors group",children:l.jsxs("svg",{className:"w-3 h-3 text-[var(--text-tertiary)] group-hover:text-[var(--accent-text)]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})}),l.jsx("div",{className:"col-span-3 h-px bg-[var(--border-secondary)]"})]})]},`${n}-point-fragment-${w}`))})]})},JT=({shape:e,updateShape:t,roundFn:n})=>{let i=0,o=0,r=0,c=0;e.type==="rectangle"||e.type==="arc"?(i=e.x,o=e.y,r=e.x+e.width,c=e.y+e.height):e.type==="ellipse"&&(i=e.cx-e.rx,o=e.cy-e.ry,r=e.cx+e.rx,c=e.cy+e.ry);const u=(f,d)=>{if(e.type==="rectangle"||e.type==="arc"){let{x:m,y:g,width:h,height:p}=e;switch(f){case"x1":h=m+h-d,m=d;break;case"y1":p=g+p-d,g=d;break;case"x2":h=d-m;break;case"y2":p=d-g;break}h>=0&&p>=0&&t({...e,x:m,y:g,width:h,height:p})}else if(e.type==="ellipse"){let m=e.cx-e.rx,g=e.cy-e.ry,h=e.cx+e.rx,p=e.cy+e.ry;switch(f){case"x1":m=d;break;case"y1":g=d;break;case"x2":h=d;break;case"y2":p=d;break}const b=(m+h)/2,v=(g+p)/2,E=(h-m)/2,C=(p-g)/2;E>=0&&C>=0&&t({...e,cx:b,cy:v,rx:E,ry:C})}};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-tk-x1`,title:"X-координата верхнього лівого кута рамки Tkinter.",children:"x1:"}),l.jsx(Ce,{id:`${e.id}-tk-x1`,value:n(i),onChange:f=>u("x1",f),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-tk-y1`,title:"Y-координата верхнього лівого кута рамки Tkinter.",children:"y1:"}),l.jsx(Ce,{id:`${e.id}-tk-y1`,value:n(o),onChange:f=>u("y1",f),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-tk-x2`,title:"X-координата нижнього правого кута рамки Tkinter.",children:"x2:"}),l.jsx(Ce,{id:`${e.id}-tk-x2`,value:n(r),onChange:f=>u("x2",f),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-tk-y2`,title:"Y-координата нижнього правого кута рамки Tkinter.",children:"y2:"}),l.jsx(Ce,{id:`${e.id}-tk-y2`,value:n(c),onChange:f=>u("y2",f),smartRound:!1})]})]})},Nu=e=>e?["line","pencil","polyline","bezier"].includes(e.type):!1,WT=({selectedShape:e,updateShape:t,deleteShape:n,duplicateShape:i,activeTool:o,activePointIndex:r,setActivePointIndex:c,deletePoint:u,addPoint:f,convertToPath:d,showNotification:m,setShapePreview:g,cancelShapePreview:h,fillColor:p,strokeColor:b})=>{const[v,E]=T.useState(null),[C,x]=T.useState(!1),[S,w]=T.useState(null),A=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],D={"Популярні Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],"Популярні Serif":["Times New Roman","Georgia","Garamond"],"Популярні Monospace":["Courier New","Consolas","Lucida Console","Monaco"],Декоративні:["Impact","Comic Sans MS","Brush Script MT"]},_=[...Object.values(D).flat(),...A].sort((G,te)=>G.localeCompare(te)),M=G=>Math.round(G*100)/100,L=St.useMemo(()=>e?Xa(e):null,[e]),P=St.useMemo(()=>e?rs({...e,rotation:0}):null,[e]),Z=(G,te)=>{if(!e||!L)return;const X=G==="x"?L.x:L.y,y=te-X,V=G==="x"?y:0,B=G==="y"?y:0;let me={...e};switch(me.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":me.x+=V,me.y+=B;break;case"ellipse":case"polygon":case"star":me.cx+=V,me.cy+=B;break;case"line":case"bezier":case"pencil":case"polyline":me.points=me.points.map(re=>({x:re.x+V,y:re.y+B}));break}t(me)},pe=(G,te)=>{if(!e||!P)return;const X=G==="width"?P.width:P.height,y=bt(e);if(!y)return;let V={...e};const B="isAspectRatioLocked"in e&&e.isAspectRatioLocked;if(X===0&&te>0)switch(V.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const me=V.width,re=V.height,ye=G==="width"||B?te:me,Ue=G==="height"||B?te:re;V.x=y.x-ye/2,V.y=y.y-Ue/2,V.width=ye,V.height=Ue;break}case"ellipse":{const me=V.rx,re=V.ry;V.rx=G==="width"||B?te/2:me,V.ry=G==="height"||B?te/2:re;break}case"text":{const me=to(V);if(!me||me.height===0||me.width===0)break;const re=te/(G==="width"?me.width:me.height);V.fontSize*=re;break}}else{if(X<=0)return;let me=1,re=1;switch(G==="width"?(me=te/X,B&&(re=me)):(re=te/X,B&&(me=re)),V.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"image":case"bitmap":{const ye=V.width*me,Ue=V.height*re;V.x=y.x-ye/2,V.y=y.y-Ue/2,V.width=ye,V.height=Ue;break}case"ellipse":{V.rx*=me,V.ry*=re;break}case"polygon":case"star":{const ye=B||G!=="height"?me:re;V.radius*=ye,V.innerRadius!==void 0&&(V.innerRadius*=ye);break}case"text":{const ye=B||G!=="height"?me:re;V.fontSize*=ye;break}case"line":case"pencil":case"polyline":case"bezier":{V.points=V.points.map(ye=>({x:y.x+(ye.x-y.x)*me,y:y.y+(ye.y-y.y)*re}));break}}}t(V)},Te=G=>{if(e)if(e.type==="polyline"||e.type==="bezier"||e.type==="pencil"||e.type==="line")t({...e,points:G});else{if(!ti(e))return;const X={id:e.id,name:e.name,type:"polyline",points:G,isClosed:!0,rotation:0,state:e.state,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:"fill"in e&&typeof e.fill=="string"?e.fill:"none",joinstyle:"joinstyle"in e&&typeof e.joinstyle=="string"?e.joinstyle:"miter",smooth:"smooth"in e&&typeof e.smooth=="boolean"?e.smooth:void 0,dash:"dash"in e?e.dash:void 0,dashoffset:"dashoffset"in e?e.dashoffset:void 0,isAspectRatioLocked:"isAspectRatioLocked"in e?e.isAspectRatioLocked:!1};t(X)}},_e=async()=>{if(!("queryLocalFonts"in window)){m("Ваш браузер або середовище не підтримує завантаження локальних шрифтів.","error",5e3),E([]);return}try{x(!0);const G=await window.queryLocalFonts();if(G.length===0){m("Локальні шрифти не знайдено або дозвіл не було надано.","info",4e3),E([]);return}const te=new Set;for(const V of G)te.add(V.family);const X=new Set(_),y=Array.from(te).filter(V=>!X.has(V));E(y.sort((V,B)=>V.localeCompare(B))),y.length>0?m(`Завантажено ${y.length} нових системних шрифтів.`,"info"):m("Нових унікальних системних шрифтів не знайдено.","info")}catch(G){console.error("Помилка під час завантаження системних шрифтів:",G),E([]);let te="Не вдалося завантажити шрифти. Дивіться консоль для деталей.",X=5e3;(G instanceof Error?G.toString():String(G)).includes("disallowed by Permissions Policy")||G instanceof DOMException&&G.name==="SecurityError"?(te="Доступ до шрифтів заблоковано політикою безпеки середовища.",X=6e3):G instanceof DOMException&&G.name==="NotAllowedError"&&(te="Ви відхилили дозвіл на доступ до шрифтів."),m(te,"error",X)}finally{x(!1)}},de=async G=>{if(!(!e||e.type!=="text")){if(G==="load-system-fonts"){await _e();return}t({...e,font:G})}},ee=St.useMemo(()=>e?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(e.type):!1,[e]),xe=()=>{if(!e||!L)return null;const G=l.jsx(l.Fragment,{children:l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-state`,title:"Стан видимості та інтерактивності об'єкта.",children:"Стан:"}),l.jsxs(fn,{id:`${e.id}-state`,value:e.state,onChange:y=>t({...e,state:y}),children:[l.jsx("option",{value:"normal",children:"Звичайний"}),l.jsx("option",{value:"hidden",children:"Прихований"}),l.jsx("option",{value:"disabled",children:"Вимкнений"})]})]})}),te=y=>y.type==="polyline"&&y.isClosed&&Nu(y)?null:l.jsx(l.Fragment,{children:l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-joinstyle`,title:"Стиль з'єднання сегментів лінії.",children:"Стиль з'єднання:"}),l.jsxs(fn,{id:`${y.id}-joinstyle`,value:y.joinstyle??"miter",onChange:V=>t({...y,joinstyle:V}),title:"Визначає, як виглядають кути при з'єднанні ліній.",children:[l.jsx("option",{value:"miter",children:"Гострий"}),l.jsx("option",{value:"round",children:"Круглий"}),l.jsx("option",{value:"bevel",children:"Скошений"})]})]})}),X=y=>{if((y.type==="polyline"||y.type==="bezier")&&y.isClosed)return null;const B=y.strokeWidth>0?y.strokeWidth:1,[me,re,ye]=y.arrowshape??[8,10,3],Ue=(et,_t)=>{if(B===0)return;const Ut=[...y.arrowshape??[8,10,3]],ut=_t/B;Ut[et]=parseFloat(ut.toFixed(2)),t({...y,arrowshape:Ut})};return l.jsxs(l.Fragment,{children:[l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-capstyle`,title:"Стиль кінців незамкнених ліній.",children:"Стиль кінця:"}),l.jsxs(fn,{id:`${y.id}-capstyle`,value:y.capstyle??"round",onChange:et=>t({...y,capstyle:et}),title:"Визначає, як виглядають кінці ліній.",children:[l.jsx("option",{value:"butt",children:"Плаский"}),l.jsx("option",{value:"round",children:"Круглий"}),l.jsx("option",{value:"projecting",children:"Квадратний"})]})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-arrow`,title:"Додати стрілки на кінці лінії.",children:"Стрілки:"}),l.jsxs(fn,{id:`${y.id}-arrow`,value:y.arrow??"none",onChange:et=>{const _t={...y,arrow:et};et!=="none"&&!y.arrowshape&&(_t.arrowshape=[8,10,3]),t(_t)},title:"Додати стрілки на початок, кінець або на обидва кінці лінії.",children:[l.jsx("option",{value:"none",children:"Немає"}),l.jsx("option",{value:"first",children:"На початку"}),l.jsx("option",{value:"last",children:"В кінці"}),l.jsx("option",{value:"both",children:"На обох кінцях"})]})]}),y.arrow&&y.arrow!=="none"&&l.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-[var(--border-secondary)] ml-2 mt-2 pt-2",children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-arrow-d1`,title:"Відстань від кінця лінії до вістря стрілки.",children:"Відступ вістря:"}),l.jsx(Ce,{id:`${y.id}-arrow-d1`,value:M(me*B),onChange:et=>Ue(0,et),min:0,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-arrow-d2`,title:"Відстань від кінця лінії до найширшої частини стрілки.",children:"Відступ крил:"}),l.jsx(Ce,{id:`${y.id}-arrow-d2`,value:M(re*B),onChange:et=>Ue(1,et),min:0,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-arrow-d3`,title:"Ширина одного крила стрілки. Загальна ширина буде вдвічі більшою.",children:"Ширина крила:"}),l.jsx(Ce,{id:`${y.id}-arrow-d3`,value:M(ye*B),onChange:et=>Ue(2,et),min:0,smartRound:!1})]})]})]})};switch(e.type){case"rectangle":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"ellipse":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m})]})}case"polygon":case"star":{const y=e,V=qC(y);return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-sides`,title:"Кількість сторін або променів у фігури.",children:"Сторони:"}),l.jsx(Ce,{id:`${y.id}-sides`,value:y.sides,onChange:B=>t({...y,sides:B}),min:3})]}),y.type==="star"&&l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-inner-radius`,title:"Радіус внутрішніх вершин зірки.",children:"Внутр. радіус:"}),l.jsx(Ce,{id:`${y.id}-inner-radius`,value:M(y.innerRadius??0),onChange:B=>t({...y,innerRadius:B}),min:0,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-side-length`,title:"Довжина однієї сторони багатокутника.",children:"Довжина сторони:"}),l.jsx(Ce,{id:`${y.id}-side-length`,value:M(V),onChange:B=>t({...y,radius:OC({sideLength:B,sides:y.sides})}),smartRound:!1})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"triangle":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-top-offset`,title:"Горизонтальне зміщення верхньої вершини відносно центру основи.",children:"Зсув вершини:"}),l.jsx(Ce,{id:`${y.id}-top-offset`,value:M(y.topVertexOffset??0),onChange:V=>t({...y,topVertexOffset:V}),step:.01,smartRound:!1})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"right-triangle":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"rhombus":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"trapezoid":{const y=e,V=(me,re)=>{let ye=Math.max(0,re/100);const Ue={};y.isSymmetrical?(ye>.5&&(ye=.5),Ue.topLeftOffsetRatio=ye,Ue.topRightOffsetRatio=ye):me==="left"?(ye>1-y.topRightOffsetRatio&&(ye=1-y.topRightOffsetRatio),Ue.topLeftOffsetRatio=ye):(ye>1-y.topLeftOffsetRatio&&(ye=1-y.topLeftOffsetRatio),Ue.topRightOffsetRatio=ye),t({...y,...Ue})},B=me=>{const re={...y,isSymmetrical:me};if(me){let ye=(re.topLeftOffsetRatio+re.topRightOffsetRatio)/2;ye>.5&&(ye=.5),re.topLeftOffsetRatio=ye,re.topRightOffsetRatio=ye}t(re)};return l.jsxs(l.Fragment,{children:[G,l.jsx(ue,{children:l.jsx(Pn,{id:`${y.id}-symm`,checked:!!y.isSymmetrical,onChange:B,label:"Симетрична:",title:"Зробити зміщення верхніх кутів однаковим."})}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-topleft`,title:"Зміщення верхнього лівого кута всередину у відсотках від ширини.",children:"Зсув зліва (%):"}),l.jsx(Ce,{id:`${y.id}-topleft`,value:M(y.topLeftOffsetRatio*100),onChange:me=>V("left",me),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-topright`,title:"Зміщення верхнього правого кута всередину у відсотках від ширини.",children:"Зсув справа (%):"}),l.jsx(Ce,{id:`${y.id}-topright`,value:M(y.topRightOffsetRatio*100),onChange:me=>V("right",me),disabled:!!y.isSymmetrical,smartRound:!1})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"parallelogram":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-angle`,title:"Кут нахилу бічних сторін (90 градусів = прямокутник).",children:"Кут (º):"}),l.jsx(Ce,{id:`${y.id}-angle`,value:M(y.angle),onChange:V=>t({...y,angle:V}),min:1,max:179,smartRound:!1})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y)]})}case"line":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsxs("div",{children:[l.jsx(ae,{htmlFor:`${y.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),l.jsx("div",{className:"mt-1",children:l.jsx(Jt,{id:`${y.id}-stroke`,value:y.stroke,onChange:V=>t({...y,stroke:V}),onPreview:V=>g(y.id,{stroke:V}),onCancel:h,showNotification:m})})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),l.jsx(Ce,{id:`${y.id}-stroke-width`,value:M(y.strokeWidth),onChange:V=>t({...y,strokeWidth:V}),min:0,smartRound:!1})]}),l.jsx(Ld,{shape:y,updateShape:t,roundFn:M}),X(y)]})}case"pencil":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsxs("div",{children:[l.jsx(ae,{htmlFor:`${y.id}-stroke`,title:"Колір лінії.",children:"Колір:"}),l.jsx("div",{className:"mt-1",children:l.jsx(Jt,{id:`${y.id}-stroke`,value:y.stroke,onChange:V=>t({...y,stroke:V}),onPreview:V=>g(y.id,{stroke:V}),onCancel:h,showNotification:m})})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-stroke-width`,title:"Товщина лінії в пікселях.",children:"Товщина:"}),l.jsx(Ce,{id:`${y.id}-stroke-width`,value:M(y.strokeWidth),onChange:V=>t({...y,strokeWidth:V}),min:0,smartRound:!1})]}),l.jsx(Ld,{shape:y,updateShape:t,roundFn:M}),te(y),X(y)]})}case"polyline":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx(ue,{children:l.jsx(Pn,{id:`${y.id}-isClosed`,checked:y.isClosed,onChange:V=>t({...y,isClosed:V,name:Yt({...y,isClosed:V})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),l.jsx(ue,{children:l.jsx(Pn,{id:`${y.id}-smooth`,checked:!!y.smooth,onChange:V=>t({...y,smooth:V}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки згладжування:"}),l.jsx(Ce,{id:`${y.id}-splinesteps`,value:y.splinesteps??12,onChange:V=>t({...y,splinesteps:V}),min:1,max:100,disabled:!y.smooth})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y),X(y)]})}case"bezier":{const y=e;return l.jsxs(l.Fragment,{children:[G,l.jsx(ue,{children:l.jsx(Pn,{id:`${y.id}-isClosed`,checked:y.isClosed,onChange:V=>t({...y,isClosed:V,name:Yt({...y,isClosed:V})}),label:"Замкнутий контур",title:"З'єднати початкову та кінцеву точки."})}),l.jsx(ue,{children:l.jsx(Pn,{id:`${y.id}-smooth`,checked:!!y.smooth,onChange:V=>t({...y,smooth:V}),label:"Згладжування",title:"Згладити кути, перетворивши на криву."})}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-splinesteps`,title:"Кількість сегментів для апроксимації кривої.",children:"Кроки сплайна:"}),l.jsx(Ce,{id:`${y.id}-splinesteps`,value:y.splinesteps,onChange:V=>t({...y,splinesteps:V}),min:1,max:100,disabled:!y.smooth})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m}),te(y),X(y)]})}case"arc":{const y=e,V=y.start+y.extent,B=re=>{if(y.isExtentLocked)t({...y,start:re});else{const ye=V-re;t({...y,start:re,extent:ye})}},me=re=>{if(y.isExtentLocked){const ye=re-y.extent;t({...y,start:ye})}else{const ye=re-y.start;t({...y,extent:ye})}};return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-style`,title:"Стиль дуги: Сектор (pieslice), Хорда (chord), або Дуга (arc).",children:"Стиль:"}),l.jsxs(fn,{id:`${y.id}-style`,value:y.style,onChange:re=>{const ye=Yt({...y,style:re});t({...y,style:re,name:ye})},children:[l.jsx("option",{value:"pieslice",children:"Сектор"}),l.jsx("option",{value:"chord",children:"Хорда"}),l.jsx("option",{value:"arc",children:"Дуга"})]})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-start`,title:"Початковий кут дуги в градусах (0 - на 3 години).",children:"Початок (º):"}),l.jsx(Ce,{id:`${y.id}-start`,value:M(y.start),onChange:B,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-end`,title:"Кінцевий кут дуги в градусах.",children:"Кінець (º):"}),l.jsx(Ce,{id:`${y.id}-end`,value:M(V),onChange:me,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-extent`,title:"Довжина дуги в градусах.",children:"Довжина (º):"}),l.jsx(Ce,{id:`${y.id}-extent`,value:M(y.extent),onChange:re=>t({...y,extent:re}),disabled:y.isExtentLocked,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-extent-lock`}),l.jsx(Pn,{id:`${y.id}-extent-lock`,checked:!!y.isExtentLocked,onChange:re=>t({...y,isExtentLocked:re}),label:"Блокувати довжину",title:"Зберігати довжину дуги при зміні її кінців."})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsx(Ln,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,fillColor:p,showNotification:m}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsx(Un,{shape:y,updateShape:t,setShapePreview:g,cancelShapePreview:h,roundFn:M,strokeColor:b,showNotification:m})]})}case"text":{const y=e,V={nw:"Верхній лівий кут",n:"Верхній центр",ne:"Верхній правий кут",w:"Центр ліворуч",center:"Центр",e:"Центр праворуч",sw:"Нижній лівий кут",s:"Нижній центр",se:"Нижній правий кут"};return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-text`,title:"Текст для відображення.",children:"Текст:"}),l.jsx(ng,{id:`${y.id}-text`,value:y.text,onChange:B=>t({...y,text:B})})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-font`,title:"Шрифт для тексту.",children:"Шрифт:"}),l.jsxs(fn,{id:`${y.id}-font`,value:y.font,onChange:de,children:[Object.entries(D).map(([B,me])=>l.jsx("optgroup",{label:B,children:me.map(re=>l.jsx("option",{value:re,children:re},re))},B)),v&&v.length>0&&l.jsx("optgroup",{label:"Системні шрифти",children:v.map(B=>l.jsx("option",{value:B,children:B},B))}),l.jsx("optgroup",{label:"Логічні шрифти Tk",children:A.map(B=>l.jsx("option",{value:B,children:B},B))}),l.jsx("optgroup",{label:"Дії",children:l.jsx("option",{value:"load-system-fonts",disabled:C,children:C?"Завантаження...":"Завантажити системні шрифти"})})]})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-fontSize`,title:"Розмір шрифту.",children:"Розмір:"}),l.jsx(Ce,{id:`${y.id}-fontSize`,value:M(y.fontSize),onChange:B=>t({...y,fontSize:B}),min:1,smartRound:!1})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Заливка"}),l.jsxs("div",{children:[l.jsx(ae,{htmlFor:`${y.id}-fill`,title:"Колір тексту.",children:"Колір:"}),l.jsx("div",{className:"mt-1",children:l.jsx(Jt,{id:`${y.id}-fill`,value:y.fill,onChange:B=>t({...y,fill:B}),onPreview:B=>g(y.id,{fill:B}),onCancel:h,showNotification:m})})]}),l.jsx(Cn,{shape:y,updateShape:t}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-style`,title:"Стилі тексту.",children:"Стиль:"}),l.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[l.jsx(Pn,{id:`${y.id}-bold`,checked:y.weight==="bold",onChange:B=>t({...y,weight:B?"bold":"normal"}),label:"Виразний"}),l.jsx(Pn,{id:`${y.id}-italic`,checked:y.slant==="italic",onChange:B=>t({...y,slant:B?"italic":"roman"}),label:"Курсив"}),l.jsx(Pn,{id:`${y.id}-underline`,checked:y.underline,onChange:B=>t({...y,underline:B}),label:"Підкреслений"}),l.jsx(Pn,{id:`${y.id}-overstrike`,checked:y.overstrike,onChange:B=>t({...y,overstrike:B}),label:"Закреслений"})]})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-anchor`,title:"Точка на тексті, яка буде розташована за вказаними координатами.",children:"Прив'язка:"}),l.jsx(fn,{id:`${y.id}-anchor`,value:y.anchor,onChange:B=>{t({...y,anchor:B})},children:Object.entries(V).map(([B,me])=>l.jsx("option",{value:B,children:me},B))})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-anchor-x`,title:"X-координата точки прив'язки.",children:"X прив'язки:"}),l.jsx(Ce,{id:`${y.id}-anchor-x`,value:M(y.x),onChange:B=>t({...y,x:B}),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-anchor-y`,title:"Y-координата точки прив'язки.",children:"Y прив'язки:"}),l.jsx(Ce,{id:`${y.id}-anchor-y`,value:M(y.y),onChange:B=>t({...y,y:B}),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-justify`,title:"Вирівнювання тексту всередині його рамки.",children:"Вирівнювання:"}),l.jsxs(fn,{id:`${y.id}-justify`,value:y.justify,onChange:B=>t({...y,justify:B}),children:[l.jsx("option",{value:"left",children:"Ліворуч"}),l.jsx("option",{value:"center",children:"Центр"}),l.jsx("option",{value:"right",children:"Праворуч"})]})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-width`,title:"Ширина текстового блока. 0 - без переносу.",children:"Ширина блока:"}),l.jsx(Ce,{id:`${y.id}-width`,value:M(y.width),onChange:B=>t({...y,width:B}),min:0})]})]})}case"image":return l.jsx(l.Fragment,{children:G});case"bitmap":{const y=e,V=["error","gray75","gray50","gray25","gray12","hourglass","info","questhead","question","warning"];return l.jsxs(l.Fragment,{children:[G,l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${y.id}-type`,title:"Стандартний тип бітової карти в Tkinter.",children:"Тип:"}),l.jsx(fn,{id:`${y.id}-type`,value:y.bitmapType,onChange:B=>t({...y,bitmapType:B}),children:V.map(B=>l.jsx("option",{value:B,children:B},B))})]}),l.jsxs("div",{children:[l.jsx(ae,{htmlFor:`${y.id}-fg`,title:"Колір переднього плану бітової карти.",children:"Основний колір:"}),l.jsx("div",{className:"mt-1",children:l.jsx(Jt,{id:`${y.id}-fg`,value:y.foreground,onChange:B=>t({...y,foreground:B}),onPreview:B=>g(y.id,{foreground:B}),onCancel:h,showNotification:m})})]}),l.jsxs("div",{children:[l.jsx(ae,{htmlFor:`${y.id}-bg`,title:"Колір фону бітової карти.",children:"Тловий колір:"}),l.jsx("div",{className:"mt-1",children:l.jsx(Jt,{id:`${y.id}-bg`,value:y.background,onChange:B=>t({...y,background:B}),onPreview:B=>g(y.id,{background:B}),onCancel:h,showNotification:m})})]})]})}default:return l.jsx(l.Fragment,{children:G})}};if(!e)return l.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)] p-4",children:[l.jsx("div",{className:"flex justify-between items-center pb-2 border-b border-[var(--border-primary)]",children:l.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"})}),l.jsx("div",{className:"flex-grow flex items-center justify-center text-center text-[var(--text-tertiary)]",children:l.jsx("p",{className:"text-sm",children:"Виберіть об'єкт, щоб побачити його властивості."})})]});const O=o==="edit-points",H=Xf(e),oe=O&&H&&H.length>0,le="isAspectRatioLocked"in e,be=e.rotation===0&&(e.type==="rectangle"||e.type==="ellipse"||e.type==="arc"),Ee=e?e.type==="polyline"||e.type==="bezier"?e.isClosed:e.type==="line"||e.type==="pencil"?!1:e.type==="arc"?e.style!=="arc":!0:!1;return l.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[l.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Властивості"}),l.jsxs("div",{className:"flex items-center gap-1",children:[ee&&l.jsx("button",{onClick:()=>d(e.id),title:"Перетворити на контур",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:l.jsx(mT,{size:18})}),l.jsx("button",{onClick:()=>i(e.id),title:"Дублювати",className:"p-1.5 rounded hover:bg-[var(--bg-hover)] text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:l.jsx(t0,{size:18})}),l.jsx("button",{onClick:()=>n(e.id),title:"Видалити",className:"p-1.5 rounded hover:bg-[var(--destructive-bg)] text-[var(--destructive-text)] hover:text-[var(--accent-text)]",children:l.jsx(wc,{size:18})})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto p-3 space-y-2",children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-name`,title:"Назва об'єкта.",children:"Назва:"}),l.jsx("input",{id:`${e.id}-name`,type:"text",value:S??e.name??Yt(e),onFocus:G=>w(G.target.value),onBlur:()=>{S!==null&&t({...e,name:S.trim()===""?Yt(e):S.trim()}),w(null)},onChange:G=>w(G.target.value),onKeyDown:G=>{G.key==="Enter"&&G.target.blur(),G.key==="Escape"&&(w(null),G.target.blur())},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-comment`,title:"Додати коментар до коду.",children:"Коментар:"}),l.jsx(ng,{id:`${e.id}-comment`,value:e.comment??"",onChange:G=>t({...e,comment:G}),rows:2,placeholder:"Цей коментар буде додано до коду",title:"Кожен рядок буде окремим коментарем у згенерованому коді."})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Геометрія"}),l.jsx("div",{className:"space-y-2",children:L&&P&&l.jsxs(l.Fragment,{children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-pos-x`,title:"X-координата верхнього лівого кута рамки виділення.",children:"X:"}),l.jsx(Ce,{id:`${e.id}-pos-x`,value:M(L.x),onChange:G=>Z("x",G),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-pos-y`,title:"Y-координата верхнього лівого кута рамки виділення.",children:"Y:"}),l.jsx(Ce,{id:`${e.id}-pos-y`,value:M(L.y),onChange:G=>Z("y",G),smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-width`,title:"Геометрична ширина об'єкта (без обертання).",children:"Ширина:"}),l.jsx(Ce,{id:`${e.id}-width`,value:M(P.width),onChange:G=>pe("width",G),min:Nu(e)?1:0,smartRound:!1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-height`,title:"Геометрична висота об'єкта (без обертання).",children:"Висота:"}),l.jsx(Ce,{id:`${e.id}-height`,value:M(P.height),onChange:G=>pe("height",G),min:Nu(e)?1:0,smartRound:!1})]}),le&&l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"lock-aspect-ratio-toggle"}),l.jsxs("button",{onClick:()=>t({...e,isAspectRatioLocked:!e.isAspectRatioLocked}),className:"flex items-center gap-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)]",title:"Зберегти співвідношення сторін при масштабуванні.",children:[e.isAspectRatioLocked?l.jsx(dT,{size:16}):l.jsx(fT,{size:16}),l.jsx("span",{className:"text-sm",children:e.isAspectRatioLocked?"Пропорції заблоковано":"Зберегти пропорції"})]})]}),"rotation"in e&&l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:`${e.id}-rotation`,title:"Кут обертання об'єкта в градусах.",children:"Обертання:"}),l.jsx(Ce,{id:`${e.id}-rotation`,value:M(e.rotation),onChange:G=>t({...e,rotation:G}),smartRound:!1})]})]})}),be&&l.jsxs(l.Fragment,{children:[l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"}),l.jsx("h3",{className:"font-semibold text-sm text-[var(--text-tertiary)] pt-1",children:"Координати Tkinter"}),l.jsx(JT,{shape:e,updateShape:t,roundFn:M})]}),xe(),oe&&l.jsx(YT,{points:H,onPointsChange:Te,shapeId:e.id,selectedShape:e,isEditing:O,activePointIndex:r,setActivePointIndex:c,deletePoint:G=>u(e.id,G),addPoint:G=>f(e.id,G),isShapeClosed:Ee,roundFn:M})]})]})},Qs={select:l.jsx(jv,{}),"edit-points":l.jsx(Dv,{}),rectangle:l.jsx(Lv,{}),square:l.jsx(Iv,{}),circle:l.jsx(Uv,{}),ellipse:l.jsx(Pv,{}),line:l.jsx(Vv,{}),bezier:l.jsx(Fv,{}),pencil:l.jsx(Gv,{}),triangle:l.jsx(Hv,{}),"right-triangle":l.jsx(zv,{}),polygon:l.jsx($v,{}),star:l.jsx(Kv,{}),polyline:l.jsx(Bv,{}),rhombus:l.jsx(qv,{}),trapezoid:l.jsx(Ov,{}),parallelogram:l.jsx(Yv,{}),arc:l.jsx(Xv,{}),pieslice:l.jsx(Jv,{}),chord:l.jsx(Wv,{}),text:l.jsx(Zv,{}),image:l.jsx(Qv,{}),bitmap:l.jsx(e0,{})},XT=e=>e.type==="arc"?Qs[e.style]:e.type==="rectangle"&&e.isAspectRatioLocked?Qs.square:(e.type==="polyline"||e.type==="bezier")&&e.isClosed?Qs.polygon:Qs[e.type],KT=({shapes:e,selectedShapeId:t,onSelectShape:n,onDeleteShape:i,onMoveShape:o,onUpdateShape:r,onReorderShape:c,showTkinterNames:u})=>{const[f,d]=T.useState(null),[m,g]=T.useState(""),[h,p]=T.useState(null),[b,v]=T.useState(null),[E,C]=T.useState(null),x=T.useRef(null),S=T.useRef({}),[w,A]=T.useState(!0),[D,_]=T.useState(!1),M=()=>{if(t){const O=S.current[t];O==null||O.scrollIntoView({behavior:"smooth",block:"center"})}};T.useEffect(()=>{if(D&&t){const O=setTimeout(()=>{M()},50);return()=>clearTimeout(O)}},[t,D]),T.useEffect(()=>{const O=x.current;if(!O)return;const H=()=>{if(!t){A(!0);return}const le=S.current[t];if(!le){A(!0);return}const be=O.getBoundingClientRect(),Ee=le.getBoundingClientRect(),G=Ee.top>=be.top&&Ee.bottom<=be.bottom;A(G)};H(),O.addEventListener("scroll",H,{passive:!0});const oe=new ResizeObserver(H);return oe.observe(O),()=>{O.removeEventListener("scroll",H),oe.disconnect()}},[t,e]);const L=O=>{d(O.id),g(O.name||Yt(O))},P=()=>{if(f){const O=e.find(H=>H.id===f);O&&m.trim()!==""&&r({...O,name:m.trim()})}d(null)},Z=O=>{O.key==="Enter"?P():O.key==="Escape"&&d(null)},pe=(O,H)=>{O.stopPropagation();const oe=H.state==="hidden"?"normal":"hidden";r({...H,state:oe})},Te=(O,H)=>{p(H),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",H)},_e=(O,H)=>{if(O.preventDefault(),H===h)return;v(H);const oe=O.currentTarget.getBoundingClientRect(),le=oe.top+oe.height/2;C(O.clientY<le?"top":"bottom")},de=()=>{v(null),C(null)},ee=(O,H)=>{O.preventDefault(),h&&h!==H&&E&&c(h,H,E),p(null),v(null),C(null)},xe=()=>{p(null),v(null),C(null)};return l.jsxs("div",{className:"shadow-lg h-full flex flex-col rounded-lg bg-[var(--bg-primary)]",children:[l.jsxs("div",{className:"flex justify-between items-center p-2 px-3 bg-[var(--bg-app)]/50 rounded-t-lg border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"font-semibold text-[var(--text-primary)] text-sm",children:"Об'єкти"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:M,disabled:!t||w||D,title:D?"Автопошук увімкнено":t?w?"Виділений об'єкт вже видимий":"Прокрутити до виділеного об'єкта":"Виберіть об'єкт для пошуку",className:"flex items-center gap-1.5 text-xs text-[var(--text-tertiary)] hover:text-[var(--text-primary)] font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:text-[var(--text-tertiary)]",children:[l.jsx(r0,{size:14}),l.jsx("span",{children:"Знайти у списку"})]}),l.jsx("label",{className:"flex items-center cursor-pointer select-none",title:"Автоматично прокручувати до виділеного об'єкта",children:l.jsx("input",{type:"checkbox",checked:D,onChange:O=>_(O.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--bg-app)] focus:ring-[var(--accent-primary)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"})})]})]}),l.jsx("div",{className:"flex-grow overflow-hidden relative",children:l.jsx("div",{ref:x,className:"h-full overflow-y-auto",children:e.length>0?l.jsx("ul",{className:"p-1 space-y-1",children:[...e].reverse().map((O,H)=>{if(!O)return null;const oe=O.id===t,le=f===O.id,be=e.length-1-H,Ee=be<e.length-1,G=be>0,te=Yt(O),X=b===O.id&&E==="top",y=b===O.id&&E==="bottom";return l.jsxs("li",{ref:V=>{S.current[O.id]=V},onClick:()=>n(O.id),onDoubleClick:()=>L(O),draggable:!le,onDragStart:le?void 0:V=>Te(V,O.id),onDragOver:le?void 0:V=>_e(V,O.id),onDragLeave:le?void 0:de,onDrop:le?void 0:V=>ee(V,O.id),onDragEnd:le?void 0:xe,className:`group flex items-center justify-between p-2 rounded-md transition-all duration-150 cursor-pointer 
                                        ${oe?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"hover:bg-[var(--bg-hover)] text-[var(--text-secondary)]"}
                                        ${h===O.id?"opacity-30":""}
                                        ${X?"border-t-2 border-[var(--selection-stroke)]":"border-t-2 border-transparent -mb-0.5"}
                                        ${y?"border-b-2 border-[var(--selection-stroke)]":"border-b-2 border-transparent -mt-0.5"}
                                    `,children:[l.jsxs("div",{className:"flex items-center gap-3 truncate",children:[l.jsx("button",{onClick:V=>pe(V,O),title:O.state==="hidden"?"Показати":"Приховати",className:"flex-shrink-0 p-1 rounded hover:bg-[var(--bg-hover)]",children:O.state==="hidden"?l.jsx(l0,{}):l.jsx(o0,{})}),l.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",style:{opacity:O.state==="hidden"?.5:1},children:XT(O)}),l.jsx("div",{className:"truncate text-sm",style:{opacity:O.state==="hidden"?.5:1},children:le?l.jsx("input",{type:"text",value:m,onChange:V=>g(V.target.value),onBlur:P,onKeyDown:Z,onClick:V=>V.stopPropagation(),autoFocus:!0,className:"bg-[var(--bg-app)]/80 text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):l.jsxs("span",{className:"truncate",title:O.name||te,children:[O.name||te,u&&l.jsxs("span",{className:"ml-1 text-xs text-[var(--text-tertiary)]",children:["[",_v(O),"]"]})]})})]}),l.jsxs("div",{className:`flex items-center gap-0.5 transition-opacity ${oe&&!le?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[l.jsx("button",{onClick:V=>{V.stopPropagation(),o(O.id,"up")},disabled:!Ee,title:"Перемістити вище",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(hT,{})}),l.jsx("button",{onClick:V=>{V.stopPropagation(),o(O.id,"down")},disabled:!G,title:"Перемістити нижче",className:"p-1 rounded hover:bg-[var(--bg-hover)] disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(gT,{})}),l.jsx("button",{onClick:V=>{V.stopPropagation(),i(O.id)},title:"Видалити",className:"p-1 rounded text-[var(--destructive-text)] hover:bg-[var(--destructive-bg)] hover:text-[var(--accent-text)]",children:l.jsx(wc,{size:16})})]})]},O.id)})}):l.jsx("div",{className:"text-center text-[var(--text-tertiary)] py-8 px-4",children:l.jsx("p",{className:"text-sm",children:"Немає об'єктів."})})})})]})};function ZT(e){const[t,n]=T.useState([e]),[i,o]=T.useState(0),r=T.useCallback(g=>{const h=typeof g=="function"?g(t[i]):g,p=t.slice(0,i+1);p.push(h),n(p),o(p.length-1)},[i,t]),c=T.useCallback(()=>{i>0&&o(g=>g-1)},[i]),u=T.useCallback(()=>{i<t.length-1&&o(g=>g+1)},[i,t.length]),f=T.useCallback(g=>{n([g]),o(0)},[]),d=i>0,m=i<t.length-1;return{state:t[i],setState:r,undo:c,redo:u,canUndo:d,canRedo:m,reset:f}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QT,eS;function tS(){return{geminiUrl:QT,vertexUrl:eS}}function nS(e,t,n,i){var o,r;if(!(e!=null&&e.baseUrl)){const c=tS();return t?(o=c.vertexUrl)!==null&&o!==void 0?o:n:(r=c.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Io{}function ge(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(e,t,n){for(let r=0;r<t.length-1;r++){const c=t[r];if(c.endsWith("[]")){const u=c.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const m=f[d];a(m,t.slice(r+1),n[d])}else for(const d of f)a(d,t.slice(r+1),n)}return}else if(c.endsWith("[0]")){const u=c.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];a(f[0],t.slice(r+1),n);return}(!e[c]||typeof e[c]!="object")&&(e[c]={}),e=e[c]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function s(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in e){const r=e[o];return Array.isArray(r)?r.map(c=>s(c,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iS(e){const t={},n=s(e,["operationName"]);n!=null&&a(t,["operationName"],n);const i=s(e,["resourceName"]);return i!=null&&a(t,["_url","resourceName"],i),t}function oS(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);r!=null&&a(t,["error"],r);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],rS(c)),t}function lS(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);r!=null&&a(t,["error"],r);const c=s(e,["response"]);return c!=null&&a(t,["response"],sS(c)),t}function rS(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>aS(c))),a(t,["generatedVideos"],r)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function sS(e){const t={},n=s(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>cS(c))),a(t,["generatedVideos"],r)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function aS(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],fS(n)),t}function cS(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],mS(n)),t}function uS(e){const t={},n=s(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function dS(e){const t={},n=s(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function fS(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Zf(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function mS(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Zf(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ig;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ig||(ig={}));var og;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(og||(og={}));var Hi;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Hi||(Hi={}));var lg;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(lg||(lg={}));var rg;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(rg||(rg={}));var sg;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(sg||(sg={}));var ag;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ag||(ag={}));var cg;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(cg||(cg={}));var ug;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ug||(ug={}));var dg;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dg||(dg={}));var fg;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(fg||(fg={}));var mg;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(mg||(mg={}));var hg;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hg||(hg={}));var gg;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"})(gg||(gg={}));var pg;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pg||(pg={}));var Qa;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Qa||(Qa={}));var xg;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(xg||(xg={}));var Ud;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ud||(Ud={}));var yg;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yg||(yg={}));var vg;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vg||(vg={}));var bg;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(bg||(bg={}));var Cg;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Cg||(Cg={}));var Tg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Tg||(Tg={}));var Sg;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sg||(Sg={}));var wg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(wg||(wg={}));var Eg;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Eg||(Eg={}));var kg;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(kg||(kg={}));var Mg;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Mg||(Mg={}));var Ag;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ag||(Ag={}));var Ng;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ng||(Ng={}));var _g;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_g||(_g={}));var Rg;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Rg||(Rg={}));var jg;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(jg||(jg={}));var Dg;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Dg||(Dg={}));var Ig;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Ig||(Ig={}));var Lg;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Lg||(Lg={}));var Ug;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Ug||(Ug={}));var Pg;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Pg||(Pg={}));var Vg;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Vg||(Vg={}));var Bg;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Bg||(Bg={}));var Fg;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fg||(Fg={}));var $g;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($g||($g={}));var Gg;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Gg||(Gg={}));var Hg;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Hg||(Hg={}));var zg;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(zg||(zg={}));var qg;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qg||(qg={}));var Og;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Og||(Og={}));var hl;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(hl||(hl={}));class Pd{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Cr{get text(){var t,n,i,o,r,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const g=[];for(const h of(f=(u=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[p,b]of Object.entries(h))p!=="text"&&p!=="thought"&&(b!==null||b!==void 0)&&g.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;m=!0,d+=h.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var t,n,i,o,r,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const g of(f=(u=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,p]of Object.entries(g))h!=="inlineData"&&(p!==null||p!==void 0)&&m.push(h);g.inlineData&&typeof g.inlineData.data=="string"&&(d+=atob(g.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,o,r,c,u,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,o,r,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(f=(u=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,o,r,c,u,f,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(f=(u=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class Yg{}class Jg{}class hS{}class gS{}class pS{}class xS{}class Wg{}class Xg{}class Kg{}class yS{}class ec{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new ec;let o;const r=t;return n?o=lS(r):o=oS(r),Object.assign(i,o),i}}class Zg{}class Qg{}class ep{}class vS{}class bS{}class CS{}class tp{}class TS{get text(){var t,n,i;let o="",r=!1;const c=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&c.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,o+=u.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="";const r=[];for(const c of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(c))u!=="inlineData"&&f!==null&&r.push(u);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class SS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ve(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function c0(e,t){const n=Ve(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function u0(e){return Array.isArray(e)?e.map(t=>tc(t)):[tc(e)]}function tc(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function d0(e){const t=tc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function f0(e){const t=tc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function np(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function m0(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>np(t)):[np(e)]}function Vd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function ip(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function op(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Gt(e){if(e==null)throw new Error("ContentUnion is required");return Vd(e)?e:{role:"user",parts:m0(e)}}function Qf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Gt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Gt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Gt(n)):[Gt(t)]}function _n(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(ip(e)||op(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(e)]}const t=[],n=[],i=Vd(e[0]);for(const o of e){const r=Vd(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(ip(o)||op(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:m0(n)}),t}function wS(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Hi).includes(n[0].toUpperCase())?n[0].toUpperCase():Hi.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Hi).includes(i.toUpperCase())?i.toUpperCase():Hi.TYPE_UNSPECIFIED})}}function El(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&wS(e.type,t);for(const[c,u]of Object.entries(e))if(u!=null)if(c=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Hi).includes(u.toUpperCase())?u.toUpperCase():Hi.TYPE_UNSPECIFIED}else if(n.includes(c))t[c]=El(u);else if(i.includes(c)){const f=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}f.push(El(d))}t[c]=f}else if(o.includes(c)){const f={};for(const[d,m]of Object.entries(u))f[d]=El(m);t[c]=f}else{if(c==="additionalProperties")continue;t[c]=u}return t}function em(e){return El(e)}function tm(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function nm(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Yl(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=El(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=El(t.response));return e}function Jl(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ES(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Ci(e,t){if(typeof t!="string")throw new Error("name must be a string");return ES(e,t,"cachedContents")}function h0(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Lo(e){return Zf(e)}function kS(e){return e!=null&&typeof e=="object"&&"name"in e}function MS(e){return e!=null&&typeof e=="object"&&"video"in e}function AS(e){return e!=null&&typeof e=="object"&&"uri"in e}function g0(e){var t;let n;if(kS(e)&&(n=e.name),!(AS(e)&&(n=e.uri,n===void 0))&&!(MS(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function p0(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function x0(e){for(const t of["models","tunedModels","publisherModels"])if(NS(e,t))return e[t];return[]}function NS(e,t){return e!==null&&typeof e=="object"&&t in e}function _S(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function RS(e,t={}){const n=[],i=new Set;for(const o of e){const r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const c=_S(o,t);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function y0(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jS(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function v0(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const f=c.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Wl(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function b0(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(e){const t={},n=s(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const i=s(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>vw(c))),a(t,["inlinedResponses"],r)}const o=s(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>xw(c))),a(t,["inlinedEmbedContentResponses"],r)}return t}function IS(e){const t={},n=s(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsDestination","outputUriPrefix"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigqueryDestination","outputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function LS(e){const t={},n=s(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsDestination","outputUriPrefix"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigqueryDestination","outputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function tl(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata","displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["metadata","state"]);o!=null&&a(t,["state"],b0(o));const r=s(e,["metadata","createTime"]);r!=null&&a(t,["createTime"],r);const c=s(e,["metadata","endTime"]);c!=null&&a(t,["endTime"],c);const u=s(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const f=s(e,["metadata","model"]);f!=null&&a(t,["model"],f);const d=s(e,["metadata","output"]);return d!=null&&a(t,["dest"],DS(v0(d))),t}function Bd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],b0(o));const r=s(e,["error"]);r!=null&&a(t,["error"],T0(r));const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["startTime"]);u!=null&&a(t,["startTime"],u);const f=s(e,["endTime"]);f!=null&&a(t,["endTime"],f);const d=s(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const m=s(e,["model"]);m!=null&&a(t,["model"],m);const g=s(e,["inputConfig"]);g!=null&&a(t,["src"],US(g));const h=s(e,["outputConfig"]);return h!=null&&a(t,["dest"],IS(v0(h))),t}function US(e){const t={},n=s(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const i=s(e,["gcsSource","uris"]);i!=null&&a(t,["gcsUri"],i);const o=s(e,["bigquerySource","inputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function PS(e,t){const n={};if(s(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=s(t,["fileName"]);i!=null&&a(n,["fileName"],i);const o=s(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>yw(e,c))),a(n,["requests","requests"],r)}return n}function VS(e){const t={},n=s(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const i=s(e,["gcsUri"]);i!=null&&a(t,["gcsSource","uris"],i);const o=s(e,["bigqueryUri"]);if(o!=null&&a(t,["bigquerySource","inputUri"],o),s(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function BS(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function FS(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function $S(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function GS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function HS(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],OS(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],zS(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const r=s(e,["finishReason"]);r!=null&&a(t,["finishReason"],r);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],Gw(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const g=s(e,["safetyRatings"]);return g!=null&&a(t,["safetyRatings"],g),t}function zS(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function qS(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function OS(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Nw(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function C0(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>_w(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function YS(e,t){const n={},i=s(e,["displayName"]);if(t!==void 0&&i!=null&&a(t,["batch","displayName"],i),s(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function JS(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["dest"]);return t!==void 0&&o!=null&&a(t,["outputConfig"],LS(jS(o))),n}function _u(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],PS(e,y0(e,o)));const r=s(t,["config"]);return r!=null&&YS(r,n),n}function WS(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],Ve(e,i));const o=s(t,["src"]);o!=null&&a(n,["inputConfig"],VS(y0(e,o)));const r=s(t,["config"]);return r!=null&&JS(r,n),n}function XS(e,t){const n={},i=s(e,["displayName"]);return t!==void 0&&i!=null&&a(t,["batch","displayName"],i),n}function Ru(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["src"]);o!=null&&a(n,["batch","inputConfig"],ow(e,o));const r=s(t,["config"]);return r!=null&&XS(r,n),n}function KS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function ZS(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function QS(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);return r!=null&&a(t,["error"],im(r)),t}function ew(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);return r!=null&&a(t,["error"],T0(r)),t}function tw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function nw(e,t){const n={},i=s(t,["contents"]);i!=null&&a(n,["requests[]","request","content"],Qf(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],iw(o,n)),n}function iw(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const r=s(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&a(t,["requests[]","outputDimensionality"],r),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ow(e,t){const n={},i=s(t,["fileName"]);i!=null&&a(n,["file_name"],i);const o=s(t,["inlinedRequests"]);return o!=null&&a(n,["requests"],nw(e,o)),n}function lw(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function rw(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function sw(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function aw(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function cw(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function uw(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function dw(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],C0(Gt(o)));const r=s(t,["temperature"]);r!=null&&a(i,["temperature"],r);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const g=s(t,["responseLogprobs"]);g!=null&&a(i,["responseLogprobs"],g);const h=s(t,["logprobs"]);h!=null&&a(i,["logprobs"],h);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const v=s(t,["seed"]);v!=null&&a(i,["seed"],v);const E=s(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(t,["responseSchema"]);C!=null&&a(i,["responseSchema"],Iw(em(C)));const x=s(t,["responseJsonSchema"]);if(x!=null&&a(i,["responseJsonSchema"],x),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=s(t,["safetySettings"]);if(n!==void 0&&S!=null){let Z=S;Array.isArray(Z)&&(Z=Z.map(pe=>Dw(pe))),a(n,["safetySettings"],Z)}const w=s(t,["tools"]);if(n!==void 0&&w!=null){let Z=Jl(w);Array.isArray(Z)&&(Z=Z.map(pe=>$w(Yl(pe)))),a(n,["tools"],Z)}const A=s(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],Fw(A)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=s(t,["cachedContent"]);n!==void 0&&D!=null&&a(n,["cachedContent"],Ci(e,D));const _=s(t,["responseModalities"]);_!=null&&a(i,["responseModalities"],_);const M=s(t,["mediaResolution"]);M!=null&&a(i,["mediaResolution"],M);const L=s(t,["speechConfig"]);if(L!=null&&a(i,["speechConfig"],Pw(tm(L))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=s(t,["thinkingConfig"]);return P!=null&&a(i,["thinkingConfig"],Vw(P)),i}function fw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>HS(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const r=s(e,["promptFeedback"]);r!=null&&a(t,["promptFeedback"],r);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function mw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function hw(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Wl(e,i)),n}function gw(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],tw(n)),t}function pw(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],bw(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function xw(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],Lw(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],im(i)),t}function yw(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["request","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>C0(u))),a(n,["request","contents"],c)}const r=s(t,["config"]);return r!=null&&a(n,["request","generationConfig"],dw(e,r,n)),n}function vw(e){const t={},n=s(e,["response"]);n!=null&&a(t,["response"],fw(n));const i=s(e,["error"]);return i!=null&&a(t,["error"],im(i)),t}function bw(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function im(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function T0(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["code"]);i!=null&&a(t,["code"],i);const o=s(e,["message"]);return o!=null&&a(t,["message"],o),t}function Cw(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function Tw(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);if(t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),s(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Sw(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const r=s(e,["filter"]);return t!==void 0&&r!=null&&a(t,["_query","filter"],r),n}function ww(e){const t={},n=s(e,["config"]);return n!=null&&Tw(n,t),t}function Ew(e){const t={},n=s(e,["config"]);return n!=null&&Sw(n,t),t}function kw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>tl(c))),a(t,["batchJobs"],r)}return t}function Mw(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>Bd(c))),a(t,["batchJobs"],r)}return t}function Aw(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Uw(o))),a(t,["speakerVoiceConfigs"],i)}return t}function Nw(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],qw(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],BS(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],lw(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],sw(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function _w(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Ow(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],FS(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],rw(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],aw(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function Rw(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function jw(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],Cw(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function Dw(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function Iw(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["enum"]);r!=null&&a(t,["enum"],r);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const g=s(e,["maxProperties"]);g!=null&&a(t,["maxProperties"],g);const h=s(e,["maximum"]);h!=null&&a(t,["maximum"],h);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const v=s(e,["minProperties"]);v!=null&&a(t,["minProperties"],v);const E=s(e,["minimum"]);E!=null&&a(t,["minimum"],E);const C=s(e,["nullable"]);C!=null&&a(t,["nullable"],C);const x=s(e,["pattern"]);x!=null&&a(t,["pattern"],x);const S=s(e,["properties"]);S!=null&&a(t,["properties"],S);const w=s(e,["propertyOrdering"]);w!=null&&a(t,["propertyOrdering"],w);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const D=s(e,["title"]);D!=null&&a(t,["title"],D);const _=s(e,["type"]);return _!=null&&a(t,["type"],_),t}function Lw(e){const t={},n=s(e,["embedding"]);n!=null&&a(t,["embedding"],qS(n));const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function Uw(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],S0(i)),t}function Pw(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],S0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],Aw(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Vw(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function Bw(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function Fw(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],cw(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],jw(i)),t}function $w(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>uw(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],pw(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],gw(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],Hw());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],Bw(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Gw(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zw(o))),a(t,["urlMetadata"],i)}return t}function Hw(){return{}}function zw(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function qw(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function Ow(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function S0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],Rw(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var No;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(No||(No={}));class Ss{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(r=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yw extends Io{constructor(t){super(),this.apiClient=t,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const r=n.src;if(!(Array.isArray(n.src)||r.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),f=u.path,d=u.body,m=_u(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()).then(h=>tl(h))},this.createEmbeddings=async n=>{var i,o;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),f=u.path,d=u.body,m=Ru(this.apiClient,n)._query||{};return this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()).then(h=>tl(h))},this.list=async(n={})=>new Ss(No.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=_u(this.apiClient,t),i=n._url,o=ge("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const m of f){const g=Object.assign({},m);if(g.systemInstruction){const h=g.systemInstruction;delete g.systemInstruction;const p=g.request;p.systemInstruction=h,g.request=p}d.push(g)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}createInlinedEmbedContentRequest(t){const n=Ru(this.apiClient,t),i=n._url,o=ge("{model}:asyncBatchEmbedContent",i),u=n.batch.inputConfig.requests,f=u.requests,d=[];delete u.config;for(const m of f){const g=Object.assign({},m),h=g.request;for(const p in g)p!=="request"&&(h[p]=g[p],delete g[p]);d.push(g)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const r=this.getGcsUri(t),c=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=WS(this.apiClient,t);return u=ge("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Bd(m))}else{const d=_u(this.apiClient,t);return u=ge("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>tl(m))}}async createEmbeddingsInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ru(this.apiClient,t);return r=ge("{model}:asyncBatchEmbedContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>tl(f))}}async get(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=hw(this.apiClient,t);return u=ge("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Bd(m))}else{const d=mw(this.apiClient,t);return u=ge("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>tl(m))}}async cancel(t){var n,i,o,r;let c="",u={};if(this.apiClient.isVertexAI()){const f=GS(this.apiClient,t);c=ge("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=$S(this.apiClient,t);c=ge("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=Ew(t);return u=ge("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=Mw(m),h=new tp;return Object.assign(h,g),h})}else{const d=ww(t);return u=ge("batches",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=kw(m),h=new tp;return Object.assign(h,g),h})}}async delete(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=ZS(this.apiClient,t);return u=ge("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>ew(m))}else{const d=KS(this.apiClient,t);return u=ge("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>QS(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jw(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function Ww(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],Jw(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const r=s(e,["httpBasicAuthConfig"]);r!=null&&a(t,["httpBasicAuthConfig"],r);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function Xw(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Kw(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ya(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function va(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["model"]);o!=null&&a(t,["model"],o);const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const c=s(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const u=s(e,["expireTime"]);u!=null&&a(t,["expireTime"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function lp(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>IE(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function rp(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>LE(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Zw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const r=s(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let m=_n(c);Array.isArray(m)&&(m=m.map(g=>lp(g))),a(t,["contents"],m)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],lp(Gt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>GE(g))),a(t,["tools"],m)}const d=s(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],FE(d)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Qw(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const r=s(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const c=s(e,["contents"]);if(t!==void 0&&c!=null){let g=_n(c);Array.isArray(g)&&(g=g.map(h=>rp(h))),a(t,["contents"],g)}const u=s(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],rp(Gt(u)));const f=s(e,["tools"]);if(t!==void 0&&f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>HE(h))),a(t,["tools"],g)}const d=s(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],$E(d));const m=s(e,["kmsKeyName"]);return t!==void 0&&m!=null&&a(t,["encryption_spec","kmsKeyName"],m),n}function eE(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],c0(e,i));const o=s(t,["config"]);return o!=null&&Zw(o,n),n}function tE(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["model"],c0(e,i));const o=s(t,["config"]);return o!=null&&Qw(o,n),n}function nE(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Ci(e,i)),n}function iE(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Ci(e,i)),n}function oE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function lE(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function rE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function sE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function aE(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function cE(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function uE(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function dE(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function fE(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function mE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function hE(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function gE(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function pE(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const r=s(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function xE(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Ci(e,i)),n}function yE(e,t){const n={},i=s(t,["name"]);return i!=null&&a(n,["_url","name"],Ci(e,i)),n}function vE(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],Ww(n)),t}function bE(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],rE(n)),t}function CE(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],sE(n)),t}function TE(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],wE(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function SE(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],EE(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function wE(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function EE(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function kE(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function ME(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function AE(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function NE(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function _E(e){const t={},n=s(e,["config"]);return n!=null&&AE(n,t),t}function RE(e){const t={},n=s(e,["config"]);return n!=null&&NE(n,t),t}function jE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>ya(c))),a(t,["cachedContents"],r)}return t}function DE(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>va(c))),a(t,["cachedContents"],r)}return t}function IE(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],XE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Xw(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],cE(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],dE(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function LE(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],KE(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Kw(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],uE(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],fE(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function UE(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],kE(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function PE(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],ME(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function VE(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function BE(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function FE(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],mE(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],UE(i)),t}function $E(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],hE(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],PE(i)),t}function GE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>gE(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],TE(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],bE(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],JE());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],VE(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function HE(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(h=>pE(h))),a(t,["functionDeclarations"],g)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],SE(o));const r=s(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],CE(r));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],aE(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],vE(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],WE());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],BE(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function zE(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function qE(e,t){const n={},i=s(e,["ttl"]);t!==void 0&&i!=null&&a(t,["ttl"],i);const o=s(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function OE(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],Ci(e,i));const o=s(t,["config"]);return o!=null&&zE(o,n),n}function YE(e,t){const n={},i=s(t,["name"]);i!=null&&a(n,["_url","name"],Ci(e,i));const o=s(t,["config"]);return o!=null&&qE(o,n),n}function JE(){return{}}function WE(){return{}}function XE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function KE(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZE extends Io{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ss(No.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=tE(this.apiClient,t);return u=ge("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>va(m))}else{const d=eE(this.apiClient,t);return u=ge("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>ya(m))}}async get(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=yE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>va(m))}else{const d=xE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>ya(m))}}async delete(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=iE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=lE(m),h=new Qg;return Object.assign(h,g),h})}else{const d=nE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=oE(m),h=new Qg;return Object.assign(h,g),h})}}async update(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=YE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>va(m))}else{const d=OE(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>ya(m))}}async listInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=RE(t);return u=ge("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=DE(m),h=new ep;return Object.assign(h,g),h})}else{const d=_E(t);return u=ge("cachedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=jE(m),h=new ep;return Object.assign(h,g),h})}}}function sp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ze(e){return this instanceof Ze?(this.v=e,this):new Ze(e)}function kl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(p){return function(b){return Promise.resolve(b).then(p,g)}}function u(p,b){i[p]&&(o[p]=function(v){return new Promise(function(E,C){r.push([p,v,E,C])>1||f(p,v)})},b&&(o[p]=b(o[p])))}function f(p,b){try{d(i[p](b))}catch(v){h(r[0][3],v)}}function d(p){p.value instanceof Ze?Promise.resolve(p.value.v).then(m,g):h(r[0][2],p)}function m(p){f("next",p)}function g(p){f("throw",p)}function h(p,b){p(b),r.shift(),r.length&&f(r[0][0],r[0][1])}}function zr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof sp=="function"?sp(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(c){return new Promise(function(u,f){c=e[r](c),o(u,f,c.done,c.value)})}}function o(r,c,u,f){Promise.resolve(f).then(function(d){r({value:d,done:u})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QE(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:w0(n)}function w0(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function ek(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function ap(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!w0(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}class tk{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new nk(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class nk{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),ek(r)}async sendMessage(t){var n;await this.sendPromise;const i=Gt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,c,u;const f=await o,d=(c=(r=f.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content,m=f.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let h=[];m!=null&&(h=(u=m.slice(g))!==null&&u!==void 0?u:[]);const p=d?[d]:[];this.recordHistory(i,p,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=Gt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){const n=t?ap(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,o;return kl(this,arguments,function*(){var c,u,f,d;const m=[];try{for(var g=!0,h=zr(t),p;p=yield Ze(h.next()),c=p.done,!c;g=!0){d=p.value,g=!1;const b=d;if(QE(b)){const v=(o=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;v!==void 0&&m.push(v)}yield yield Ze(b)}}catch(b){u={error:b}}finally{try{!g&&!c&&(f=h.return)&&(yield Ze(f.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,m)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...ap(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ec extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ec.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ik(e){const t={},n=s(e,["file"]);return n!=null&&a(t,["file"],ck(n)),t}function ok(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function lk(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","file"],g0(n)),t}function rk(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Fd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const r=s(e,["sizeBytes"]);r!=null&&a(t,["sizeBytes"],r);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const g=s(e,["downloadUri"]);g!=null&&a(t,["downloadUri"],g);const h=s(e,["state"]);h!=null&&a(t,["state"],h);const p=s(e,["source"]);p!=null&&a(t,["source"],p);const b=s(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const v=s(e,["error"]);return v!=null&&a(t,["error"],sk(v)),t}function sk(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function ak(e){const t={},n=s(e,["details"]);n!=null&&a(t,["details"],n);const i=s(e,["message"]);i!=null&&a(t,["message"],i);const o=s(e,["code"]);return o!=null&&a(t,["code"],o),t}function ck(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);const r=s(e,["sizeBytes"]);r!=null&&a(t,["sizeBytes"],r);const c=s(e,["createTime"]);c!=null&&a(t,["createTime"],c);const u=s(e,["expirationTime"]);u!=null&&a(t,["expirationTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);const m=s(e,["uri"]);m!=null&&a(t,["uri"],m);const g=s(e,["downloadUri"]);g!=null&&a(t,["downloadUri"],g);const h=s(e,["state"]);h!=null&&a(t,["state"],h);const p=s(e,["source"]);p!=null&&a(t,["source"],p);const b=s(e,["videoMetadata"]);b!=null&&a(t,["videoMetadata"],b);const v=s(e,["error"]);return v!=null&&a(t,["error"],ak(v)),t}function uk(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","file"],g0(n)),t}function dk(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function fk(e){const t={},n=s(e,["config"]);return n!=null&&dk(n,t),t}function mk(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>Fd(c))),a(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hk extends Io{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ss(No.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>Fd(n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fk(t);return r=ge("files",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=mk(f),m=new vS;return Object.assign(m,d),m})}}async createInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ik(t);return r=ge("upload/v1beta/files",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=ok(f),m=new bS;return Object.assign(m,d),m})}}async get(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uk(t);return r=ge("files/{file}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Fd(f))}}async delete(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lk(t);return r=ge("files/{file}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=rk(f),m=new CS;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(){return{}}function pk(){return{}}function xk(){return{}}function yk(){return{}}function vk(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function bk(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);i!=null&&a(t,["mimeType"],i);const o=s(e,["sourceMetadata"]);return o!=null&&a(t,["sourceMetadata"],uM(o)),t}function cp(){return{}}function up(){return{}}function Ck(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],vk(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const r=s(e,["httpBasicAuthConfig"]);r!=null&&a(t,["httpBasicAuthConfig"],r);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function Tk(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const r=s(e,["prefixPaddingMs"]);r!=null&&a(t,["prefixPaddingMs"],r);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function Sk(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const r=s(e,["prefixPaddingMs"]);r!=null&&a(t,["prefixPaddingMs"],r);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function wk(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Ek(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kk(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Mk(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Ak(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>AM(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Nk(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>NM(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function _k(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>_M(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Rk(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>RM(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function jk(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],FM(i)),t}function Dk(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],$M(i)),t}function Ik(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function Lk(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function Uk(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function Pk(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Vk(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Bk(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Fk(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function E0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function k0(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function $k(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Gk(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function Hk(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function zk(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const r=s(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function qk(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],Ck(n)),t}function Ok(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Ik(n)),t}function Yk(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],Lk(n)),t}function Jk(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],Xk(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Wk(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],Kk(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function Xk(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function Kk(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function Zk(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const r=s(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const g=s(e,["speechConfig"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","speechConfig"],HM(nm(g)));const h=s(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],_k(Gt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Jl(b);Array.isArray(A)&&(A=A.map(D=>YM(Yl(D)))),a(t,["setup","tools"],A)}const v=s(e,["sessionResumption"]);t!==void 0&&v!=null&&a(t,["setup","sessionResumption"],VM(v));const E=s(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],cp());const C=s(e,["outputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","outputAudioTranscription"],cp());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&a(t,["setup","realtimeInputConfig"],UM(x));const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&a(t,["setup","contextWindowCompression"],jk(S));const w=s(e,["proactivity"]);return t!==void 0&&w!=null&&a(t,["setup","proactivity"],IM(w)),n}function Qk(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const r=s(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const g=s(e,["speechConfig"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","speechConfig"],zM(nm(g)));const h=s(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],Rk(Gt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Jl(b);Array.isArray(A)&&(A=A.map(D=>JM(Yl(D)))),a(t,["setup","tools"],A)}const v=s(e,["sessionResumption"]);t!==void 0&&v!=null&&a(t,["setup","sessionResumption"],BM(v));const E=s(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],up());const C=s(e,["outputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","outputAudioTranscription"],up());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&a(t,["setup","realtimeInputConfig"],PM(x));const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&a(t,["setup","contextWindowCompression"],Dk(S));const w=s(e,["proactivity"]);return t!==void 0&&w!=null&&a(t,["setup","proactivity"],LM(w)),n}function eM(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Ve(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],Zk(o,n)),n}function tM(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Ve(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],Qk(o,n)),n}function nM(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>rA(o))),a(t,["weightedPrompts"],i)}return t}function M0(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>R0(o))),a(t,["weightedPrompts"],i)}return t}function $d(e){const t={},n=s(e,["setup"]);n!=null&&a(t,["setup"],A0(n));const i=s(e,["clientContent"]);i!=null&&a(t,["clientContent"],M0(i));const o=s(e,["musicGenerationConfig"]);o!=null&&a(t,["musicGenerationConfig"],N0(o));const r=s(e,["playbackControl"]);return r!=null&&a(t,["playbackControl"],r),t}function A0(e){const t={},n=s(e,["model"]);return n!=null&&a(t,["model"],n),t}function iM(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["filteredReason"]);return i!=null&&a(t,["filteredReason"],i),t}function oM(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const r=s(e,["guidance"]);r!=null&&a(t,["guidance"],r);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const g=s(e,["muteDrums"]);g!=null&&a(t,["muteDrums"],g);const h=s(e,["onlyBassAndDrums"]);h!=null&&a(t,["onlyBassAndDrums"],h);const p=s(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function N0(e){const t={},n=s(e,["temperature"]);n!=null&&a(t,["temperature"],n);const i=s(e,["topK"]);i!=null&&a(t,["topK"],i);const o=s(e,["seed"]);o!=null&&a(t,["seed"],o);const r=s(e,["guidance"]);r!=null&&a(t,["guidance"],r);const c=s(e,["bpm"]);c!=null&&a(t,["bpm"],c);const u=s(e,["density"]);u!=null&&a(t,["density"],u);const f=s(e,["brightness"]);f!=null&&a(t,["brightness"],f);const d=s(e,["scale"]);d!=null&&a(t,["scale"],d);const m=s(e,["muteBass"]);m!=null&&a(t,["muteBass"],m);const g=s(e,["muteDrums"]);g!=null&&a(t,["muteDrums"],g);const h=s(e,["onlyBassAndDrums"]);h!=null&&a(t,["onlyBassAndDrums"],h);const p=s(e,["musicGenerationMode"]);return p!=null&&a(t,["musicGenerationMode"],p),t}function lM(e){const t={},n=s(e,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bk(o))),a(t,["audioChunks"],i)}return t}function rM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],sM());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],lM(i));const o=s(e,["filteredPrompt"]);return o!=null&&a(t,["filteredPrompt"],iM(o)),t}function sM(){return{}}function aM(e){const t={},n=s(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],N0(n)),t}function cM(e){const t={},n=s(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>R0(o))),a(t,["weightedPrompts"],i)}return t}function uM(e){const t={},n=s(e,["clientContent"]);n!=null&&a(t,["clientContent"],nM(n));const i=s(e,["musicGenerationConfig"]);return i!=null&&a(t,["musicGenerationConfig"],oM(i)),t}function dM(e){const t={},n=s(e,["media"]);if(n!=null){let d=u0(n);Array.isArray(d)&&(d=d.map(m=>m)),a(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&a(t,["audio"],f0(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const r=s(e,["video"]);r!=null&&a(t,["video"],d0(r));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],xk()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],gk()),t}function fM(e){const t={},n=s(e,["media"]);if(n!=null){let d=u0(n);Array.isArray(d)&&(d=d.map(m=>m)),a(t,["mediaChunks"],d)}const i=s(e,["audio"]);i!=null&&a(t,["audio"],f0(i));const o=s(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const r=s(e,["video"]);r!=null&&a(t,["video"],d0(r));const c=s(e,["text"]);return c!=null&&a(t,["text"],c),s(e,["activityStart"])!=null&&a(t,["activityStart"],yk()),s(e,["activityEnd"])!=null&&a(t,["activityEnd"],pk()),t}function mM(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],Ak(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const r=s(e,["groundingMetadata"]);r!=null&&a(t,["groundingMetadata"],r);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],dp(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],dp(f));const d=s(e,["urlContextMetadata"]);d!=null&&a(t,["urlContextMetadata"],WM(d));const m=s(e,["turnCompleteReason"]);m!=null&&a(t,["turnCompleteReason"],m);const g=s(e,["waitingForInput"]);return g!=null&&a(t,["waitingForInput"],g),t}function hM(e){const t={},n=s(e,["modelTurn"]);n!=null&&a(t,["modelTurn"],Nk(n));const i=s(e,["turnComplete"]);i!=null&&a(t,["turnComplete"],i);const o=s(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);const r=s(e,["groundingMetadata"]);r!=null&&a(t,["groundingMetadata"],r);const c=s(e,["generationComplete"]);c!=null&&a(t,["generationComplete"],c);const u=s(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],fp(u));const f=s(e,["outputTranscription"]);f!=null&&a(t,["outputTranscription"],fp(f));const d=s(e,["turnCompleteReason"]);d!=null&&a(t,["turnCompleteReason"],d);const m=s(e,["waitingForInput"]);return m!=null&&a(t,["waitingForInput"],m),t}function gM(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function pM(e){const t={},n=s(e,["timeLeft"]);return n!=null&&a(t,["timeLeft"],n),t}function xM(e){const t={};s(e,["setupComplete"])!=null&&a(t,["setupComplete"],CM());const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],mM(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],EM(o));const r=s(e,["toolCallCancellation"]);r!=null&&a(t,["toolCallCancellation"],SM(r));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],QM(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],gM(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],vM(f)),t}function yM(e){const t={},n=s(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],TM(n));const i=s(e,["serverContent"]);i!=null&&a(t,["serverContent"],hM(i));const o=s(e,["toolCall"]);o!=null&&a(t,["toolCall"],kM(o));const r=s(e,["toolCallCancellation"]);r!=null&&a(t,["toolCallCancellation"],wM(r));const c=s(e,["usageMetadata"]);c!=null&&a(t,["usageMetadata"],eA(c));const u=s(e,["goAway"]);u!=null&&a(t,["goAway"],pM(u));const f=s(e,["sessionResumptionUpdate"]);return f!=null&&a(t,["sessionResumptionUpdate"],bM(f)),t}function vM(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function bM(e){const t={},n=s(e,["newHandle"]);n!=null&&a(t,["newHandle"],n);const i=s(e,["resumable"]);i!=null&&a(t,["resumable"],i);const o=s(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function CM(){return{}}function TM(e){const t={},n=s(e,["sessionId"]);return n!=null&&a(t,["sessionId"],n),t}function SM(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function wM(e){const t={},n=s(e,["ids"]);return n!=null&&a(t,["ids"],n),t}function EM(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>E0(o))),a(t,["functionCalls"],i)}return t}function kM(e){const t={},n=s(e,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>k0(o))),a(t,["functionCalls"],i)}return t}function ea(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function ta(e){const t={},n=s(e,["modality"]);n!=null&&a(t,["modality"],n);const i=s(e,["tokenCount"]);return i!=null&&a(t,["tokenCount"],i),t}function MM(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>GM(o))),a(t,["speakerVoiceConfigs"],i)}return t}function AM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],tA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],wk(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],Pk(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],E0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function NM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],nA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Ek(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],Vk(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],k0(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function _M(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],iA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],kk(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],Bk(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],$k(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function RM(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],oA(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],Mk(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],Fk(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],Gk(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function jM(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function DM(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function IM(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function LM(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function UM(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],Tk(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function PM(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],Sk(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function VM(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function BM(e){const t={},n=s(e,["handle"]);n!=null&&a(t,["handle"],n);const i=s(e,["transparent"]);return i!=null&&a(t,["transparent"],i),t}function FM(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function $M(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function GM(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],_0(i)),t}function HM(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],_0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],MM(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function zM(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],lA(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function qM(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function OM(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function YM(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>Hk(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],Jk(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],Ok(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],XM());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],qM(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function JM(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(h=>zk(h))),a(t,["functionDeclarations"],g)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Wk(o));const r=s(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],Yk(r));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],Uk(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],qk(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],KM());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],OM(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function dp(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function fp(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["finished"]);return i!=null&&a(t,["finished"],i),t}function WM(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ZM(o))),a(t,["urlMetadata"],i)}return t}function XM(){return{}}function KM(){return{}}function ZM(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function QM(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["responseTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const r=s(e,["toolUsePromptTokenCount"]);r!=null&&a(t,["toolUsePromptTokenCount"],r);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>ea(p))),a(t,["promptTokensDetails"],h)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>ea(p))),a(t,["cacheTokensDetails"],h)}const m=s(e,["responseTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(p=>ea(p))),a(t,["responseTokensDetails"],h)}const g=s(e,["toolUsePromptTokensDetails"]);if(g!=null){let h=g;Array.isArray(h)&&(h=h.map(p=>ea(p))),a(t,["toolUsePromptTokensDetails"],h)}return t}function eA(e){const t={},n=s(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const i=s(e,["cachedContentTokenCount"]);i!=null&&a(t,["cachedContentTokenCount"],i);const o=s(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const r=s(e,["toolUsePromptTokenCount"]);r!=null&&a(t,["toolUsePromptTokenCount"],r);const c=s(e,["thoughtsTokenCount"]);c!=null&&a(t,["thoughtsTokenCount"],c);const u=s(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const f=s(e,["promptTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(b=>ta(b))),a(t,["promptTokensDetails"],p)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(b=>ta(b))),a(t,["cacheTokensDetails"],p)}const m=s(e,["candidatesTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(b=>ta(b))),a(t,["responseTokensDetails"],p)}const g=s(e,["toolUsePromptTokensDetails"]);if(g!=null){let p=g;Array.isArray(p)&&(p=p.map(b=>ta(b))),a(t,["toolUsePromptTokensDetails"],p)}const h=s(e,["trafficType"]);return h!=null&&a(t,["trafficType"],h),t}function tA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function nA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function iA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function oA(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function _0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],jM(n)),t}function lA(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],DM(n)),t}function rA(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}function R0(e){const t={},n=s(e,["text"]);n!=null&&a(t,["text"],n);const i=s(e,["weight"]);return i!=null&&a(t,["weight"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(e){const t={},n=s(e,["apiKeyString"]);return n!=null&&a(t,["apiKeyString"],n),t}function aA(e){const t={},n=s(e,["apiKeyConfig"]);n!=null&&a(t,["apiKeyConfig"],sA(n));const i=s(e,["authType"]);i!=null&&a(t,["authType"],i);const o=s(e,["googleServiceAccountConfig"]);o!=null&&a(t,["googleServiceAccountConfig"],o);const r=s(e,["httpBasicAuthConfig"]);r!=null&&a(t,["httpBasicAuthConfig"],r);const c=s(e,["oauthConfig"]);c!=null&&a(t,["oauthConfig"],c);const u=s(e,["oidcConfig"]);return u!=null&&a(t,["oidcConfig"],u),t}function cA(e){const t={},n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function uA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function dA(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function fA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["data"]);i!=null&&a(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function mA(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],SA(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],pA(i));const o=s(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const r=s(e,["finishReason"]);r!=null&&a(t,["finishReason"],r);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],H_(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const g=s(e,["safetyRatings"]);return g!=null&&a(t,["safetyRatings"],g),t}function hA(e){const t={},n=s(e,["content"]);n!=null&&a(t,["content"],wA(n));const i=s(e,["citationMetadata"]);i!=null&&a(t,["citationMetadata"],xA(i));const o=s(e,["finishMessage"]);o!=null&&a(t,["finishMessage"],o);const r=s(e,["finishReason"]);r!=null&&a(t,["finishReason"],r);const c=s(e,["urlContextMetadata"]);c!=null&&a(t,["urlContextMetadata"],z_(c));const u=s(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const f=s(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);const d=s(e,["index"]);d!=null&&a(t,["index"],d);const m=s(e,["logprobsResult"]);m!=null&&a(t,["logprobsResult"],m);const g=s(e,["safetyRatings"]);return g!=null&&a(t,["safetyRatings"],g),t}function gA(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);return o!=null&&a(t,["step"],o),t}function pA(e){const t={},n=s(e,["citationSources"]);return n!=null&&a(t,["citations"],n),t}function xA(e){const t={},n=s(e,["citations"]);return n!=null&&a(t,["citations"],n),t}function yA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let r=_n(o);Array.isArray(r)&&(r=r.map(c=>Xl(c))),a(n,["contents"],r)}return n}function vA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["tokensInfo"]);return i!=null&&a(t,["tokensInfo"],i),t}function bA(e){const t={},n=s(e,["values"]);return n!=null&&a(t,["values"],n),t}function CA(e){const t={},n=s(e,["values"]);n!=null&&a(t,["values"],n);const i=s(e,["statistics"]);return i!=null&&a(t,["statistics"],TA(i)),t}function TA(e){const t={},n=s(e,["truncated"]);n!=null&&a(t,["truncated"],n);const i=s(e,["token_count"]);return i!=null&&a(t,["tokenCount"],i),t}function SA(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>QN(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function wA(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>e_(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function kc(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>t_(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function Xl(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>n_(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function EA(e){const t={},n=s(e,["controlType"]);n!=null&&a(t,["controlType"],n);const i=s(e,["enableControlImageComputation"]);return i!=null&&a(t,["computeControl"],i),t}function kA(e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function MA(e,t){const n={},i=s(e,["systemInstruction"]);t!==void 0&&i!=null&&a(t,["systemInstruction"],Xl(Gt(i)));const o=s(e,["tools"]);if(t!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>U0(u))),a(t,["tools"],c)}const r=s(e,["generationConfig"]);return t!==void 0&&r!=null&&a(t,["generationConfig"],r),n}function AA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>kc(u))),a(n,["contents"],c)}const r=s(t,["config"]);return r!=null&&kA(r),n}function NA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>Xl(u))),a(n,["contents"],c)}const r=s(t,["config"]);return r!=null&&MA(r,n),n}function _A(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);i!=null&&a(t,["totalTokens"],i);const o=s(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function RA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["totalTokens"]);return i!=null&&a(t,["totalTokens"],i),t}function jA(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Ve(e,i)),n}function DA(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Ve(e,i)),n}function IA(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function LA(e){const t={},n=s(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function UA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function PA(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function VA(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const r=s(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const g=s(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&a(t,["parameters","includeSafetyAttributes"],g);const h=s(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const p=s(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=s(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const v=s(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","compressionQuality"],v);const E=s(e,["addWatermark"]);t!==void 0&&E!=null&&a(t,["parameters","addWatermark"],E);const C=s(e,["editMode"]);t!==void 0&&C!=null&&a(t,["parameters","editMode"],C);const x=s(e,["baseSteps"]);return t!==void 0&&x!=null&&a(t,["parameters","editConfig","baseSteps"],x),n}function BA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const r=s(t,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>u_(f))),a(n,["instances[0]","referenceImages"],u)}const c=s(t,["config"]);return c!=null&&VA(c,n),n}function FA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Mc(r))),a(t,["generatedImages"],o)}return t}function $A(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["requests[]","taskType"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const r=s(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&a(t,["requests[]","outputDimensionality"],r),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GA(e,t){const n={},i=s(e,["taskType"]);t!==void 0&&i!=null&&a(t,["instances[]","task_type"],i);const o=s(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);const r=s(e,["outputDimensionality"]);t!==void 0&&r!=null&&a(t,["parameters","outputDimensionality"],r);const c=s(e,["mimeType"]);t!==void 0&&c!=null&&a(t,["instances[]","mimeType"],c);const u=s(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function HA(){return{}}function zA(e){const t={},n=s(e,["billableCharacterCount"]);return n!=null&&a(t,["billableCharacterCount"],n),t}function qA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);o!=null&&a(n,["requests[]","content"],Qf(e,o));const r=s(t,["config"]);r!=null&&$A(r,n);const c=s(t,["model"]);return c!==void 0&&a(n,["requests[]","model"],Ve(e,c)),n}function OA(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);o!=null&&a(n,["instances[]","content"],Qf(e,o));const r=s(t,["config"]);return r!=null&&GA(r,n),n}function YA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>bA(c))),a(t,["embeddings"],r)}return s(e,["metadata"])!=null&&a(t,["metadata"],HA()),t}function JA(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>CA(c))),a(t,["embeddings"],r)}const o=s(e,["metadata"]);return o!=null&&a(t,["metadata"],zA(o)),t}function WA(e){const t={},n=s(e,["endpoint"]);n!=null&&a(t,["name"],n);const i=s(e,["deployedModelId"]);return i!=null&&a(t,["deployedModelId"],i),t}function XA(e){const t={},n=s(e,["excludeDomains"]);return n!=null&&a(t,["excludeDomains"],n),t}function KA(e){const t={},n=s(e,["label"]);n!=null&&a(t,["label"],n);const i=s(e,["score"]);return i!=null&&a(t,["score"],i),t}function ZA(e){const t={},n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function QA(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function eN(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function tN(e){const t={},n=s(e,["displayName"]);n!=null&&a(t,["displayName"],n);const i=s(e,["fileUri"]);i!=null&&a(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function nN(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function iN(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function oN(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function lN(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function rN(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function sN(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["allowedFunctionNames"]);return i!=null&&a(t,["allowedFunctionNames"],i),t}function aN(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function cN(e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(e,["description"]);n!=null&&a(t,["description"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["parameters"]);o!=null&&a(t,["parameters"],o);const r=s(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const c=s(e,["response"]);c!=null&&a(t,["response"],c);const u=s(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function uN(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],kc(Gt(o)));const r=s(t,["temperature"]);r!=null&&a(i,["temperature"],r);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const g=s(t,["responseLogprobs"]);g!=null&&a(i,["responseLogprobs"],g);const h=s(t,["logprobs"]);h!=null&&a(i,["logprobs"],h);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const v=s(t,["seed"]);v!=null&&a(i,["seed"],v);const E=s(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(t,["responseSchema"]);C!=null&&a(i,["responseSchema"],g_(em(C)));const x=s(t,["responseJsonSchema"]);if(x!=null&&a(i,["responseJsonSchema"],x),s(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=s(t,["safetySettings"]);if(n!==void 0&&S!=null){let Z=S;Array.isArray(Z)&&(Z=Z.map(pe=>m_(pe))),a(n,["safetySettings"],Z)}const w=s(t,["tools"]);if(n!==void 0&&w!=null){let Z=Jl(w);Array.isArray(Z)&&(Z=Z.map(pe=>D_(Yl(pe)))),a(n,["tools"],Z)}const A=s(t,["toolConfig"]);if(n!==void 0&&A!=null&&a(n,["toolConfig"],R_(A)),s(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=s(t,["cachedContent"]);n!==void 0&&D!=null&&a(n,["cachedContent"],Ci(e,D));const _=s(t,["responseModalities"]);_!=null&&a(i,["responseModalities"],_);const M=s(t,["mediaResolution"]);M!=null&&a(i,["mediaResolution"],M);const L=s(t,["speechConfig"]);if(L!=null&&a(i,["speechConfig"],S_(tm(L))),s(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=s(t,["thinkingConfig"]);return P!=null&&a(i,["thinkingConfig"],M_(P)),i}function dN(e,t,n){const i={},o=s(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Xl(Gt(o)));const r=s(t,["temperature"]);r!=null&&a(i,["temperature"],r);const c=s(t,["topP"]);c!=null&&a(i,["topP"],c);const u=s(t,["topK"]);u!=null&&a(i,["topK"],u);const f=s(t,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);const d=s(t,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const m=s(t,["stopSequences"]);m!=null&&a(i,["stopSequences"],m);const g=s(t,["responseLogprobs"]);g!=null&&a(i,["responseLogprobs"],g);const h=s(t,["logprobs"]);h!=null&&a(i,["logprobs"],h);const p=s(t,["presencePenalty"]);p!=null&&a(i,["presencePenalty"],p);const b=s(t,["frequencyPenalty"]);b!=null&&a(i,["frequencyPenalty"],b);const v=s(t,["seed"]);v!=null&&a(i,["seed"],v);const E=s(t,["responseMimeType"]);E!=null&&a(i,["responseMimeType"],E);const C=s(t,["responseSchema"]);C!=null&&a(i,["responseSchema"],p_(em(C)));const x=s(t,["responseJsonSchema"]);x!=null&&a(i,["responseJsonSchema"],x);const S=s(t,["routingConfig"]);S!=null&&a(i,["routingConfig"],S);const w=s(t,["modelSelectionConfig"]);w!=null&&a(i,["modelConfig"],KN(w));const A=s(t,["safetySettings"]);if(n!==void 0&&A!=null){let de=A;Array.isArray(de)&&(de=de.map(ee=>h_(ee))),a(n,["safetySettings"],de)}const D=s(t,["tools"]);if(n!==void 0&&D!=null){let de=Jl(D);Array.isArray(de)&&(de=de.map(ee=>U0(Yl(ee)))),a(n,["tools"],de)}const _=s(t,["toolConfig"]);n!==void 0&&_!=null&&a(n,["toolConfig"],j_(_));const M=s(t,["labels"]);n!==void 0&&M!=null&&a(n,["labels"],M);const L=s(t,["cachedContent"]);n!==void 0&&L!=null&&a(n,["cachedContent"],Ci(e,L));const P=s(t,["responseModalities"]);P!=null&&a(i,["responseModalities"],P);const Z=s(t,["mediaResolution"]);Z!=null&&a(i,["mediaResolution"],Z);const pe=s(t,["speechConfig"]);pe!=null&&a(i,["speechConfig"],w_(tm(pe)));const Te=s(t,["audioTimestamp"]);Te!=null&&a(i,["audioTimestamp"],Te);const _e=s(t,["thinkingConfig"]);return _e!=null&&a(i,["thinkingConfig"],A_(_e)),i}function mp(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>kc(u))),a(n,["contents"],c)}const r=s(t,["config"]);return r!=null&&a(n,["generationConfig"],uN(e,r,n)),n}function hp(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["contents"]);if(o!=null){let c=_n(o);Array.isArray(c)&&(c=c.map(u=>Xl(u))),a(n,["contents"],c)}const r=s(t,["config"]);return r!=null&&a(n,["generationConfig"],dN(e,r,n)),n}function gp(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>mA(d))),a(t,["candidates"],f)}const o=s(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const r=s(e,["promptFeedback"]);r!=null&&a(t,["promptFeedback"],r);const c=s(e,["responseId"]);c!=null&&a(t,["responseId"],c);const u=s(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function pp(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(m=>hA(m))),a(t,["candidates"],d)}const o=s(e,["createTime"]);o!=null&&a(t,["createTime"],o);const r=s(e,["modelVersion"]);r!=null&&a(t,["modelVersion"],r);const c=s(e,["promptFeedback"]);c!=null&&a(t,["promptFeedback"],c);const u=s(e,["responseId"]);u!=null&&a(t,["responseId"],u);const f=s(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function fN(e,t){const n={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);const r=s(e,["guidanceScale"]);if(t!==void 0&&r!=null&&a(t,["parameters","guidanceScale"],r),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=s(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const u=s(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const f=s(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&a(t,["parameters","includeSafetyAttributes"],f);const d=s(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);const m=s(e,["language"]);t!==void 0&&m!=null&&a(t,["parameters","language"],m);const g=s(e,["outputMimeType"]);t!==void 0&&g!=null&&a(t,["parameters","outputOptions","mimeType"],g);const h=s(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const p=s(e,["imageSize"]);if(t!==void 0&&p!=null&&a(t,["parameters","sampleImageSize"],p),s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function mN(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const r=s(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const u=s(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const g=s(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&a(t,["parameters","includeSafetyAttributes"],g);const h=s(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const p=s(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const b=s(e,["outputMimeType"]);t!==void 0&&b!=null&&a(t,["parameters","outputOptions","mimeType"],b);const v=s(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","compressionQuality"],v);const E=s(e,["addWatermark"]);t!==void 0&&E!=null&&a(t,["parameters","addWatermark"],E);const C=s(e,["imageSize"]);t!==void 0&&C!=null&&a(t,["parameters","sampleImageSize"],C);const x=s(e,["enhancePrompt"]);return t!==void 0&&x!=null&&a(t,["parameters","enhancePrompt"],x),n}function hN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const r=s(t,["config"]);return r!=null&&fN(r,n),n}function gN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const r=s(t,["config"]);return r!=null&&mN(r,n),n}function pN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>AN(c))),a(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],I0(o)),t}function xN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>Mc(c))),a(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],L0(o)),t}function yN(e,t){const n={},i=s(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=s(e,["aspectRatio"]);t!==void 0&&r!=null&&a(t,["parameters","aspectRatio"],r);const c=s(e,["resolution"]);t!==void 0&&c!=null&&a(t,["parameters","resolution"],c);const u=s(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=s(e,["negativePrompt"]);t!==void 0&&f!=null&&a(t,["parameters","negativePrompt"],f);const d=s(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","enhancePrompt"],d),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(s(e,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(s(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function vN(e,t){const n={},i=s(e,["numberOfVideos"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const r=s(e,["fps"]);t!==void 0&&r!=null&&a(t,["parameters","fps"],r);const c=s(e,["durationSeconds"]);t!==void 0&&c!=null&&a(t,["parameters","durationSeconds"],c);const u=s(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const f=s(e,["aspectRatio"]);t!==void 0&&f!=null&&a(t,["parameters","aspectRatio"],f);const d=s(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);const m=s(e,["personGeneration"]);t!==void 0&&m!=null&&a(t,["parameters","personGeneration"],m);const g=s(e,["pubsubTopic"]);t!==void 0&&g!=null&&a(t,["parameters","pubsubTopic"],g);const h=s(e,["negativePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","negativePrompt"],h);const p=s(e,["enhancePrompt"]);t!==void 0&&p!=null&&a(t,["parameters","enhancePrompt"],p);const b=s(e,["generateAudio"]);t!==void 0&&b!=null&&a(t,["parameters","generateAudio"],b);const v=s(e,["lastFrame"]);t!==void 0&&v!=null&&a(t,["instances[0]","lastFrame"],$n(v));const E=s(e,["referenceImages"]);if(t!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>Z_(w))),a(t,["instances[0]","referenceImages"],S)}const C=s(e,["mask"]);t!==void 0&&C!=null&&a(t,["instances[0]","mask"],K_(C));const x=s(e,["compressionQuality"]);return t!==void 0&&x!=null&&a(t,["parameters","compressionQuality"],x),n}function bN(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);r!=null&&a(t,["error"],r);const c=s(e,["response","generateVideoResponse"]);return c!=null&&a(t,["response"],wN(c)),t}function CN(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["metadata"]);i!=null&&a(t,["metadata"],i);const o=s(e,["done"]);o!=null&&a(t,["done"],o);const r=s(e,["error"]);r!=null&&a(t,["error"],r);const c=s(e,["response"]);return c!=null&&a(t,["response"],EN(c)),t}function TN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const r=s(t,["image"]);if(r!=null&&a(n,["instances[0]","image"],D0(r)),s(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const c=s(t,["source"]);c!=null&&kN(c,n);const u=s(t,["config"]);return u!=null&&yN(u,n),n}function SN(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const r=s(t,["image"]);r!=null&&a(n,["instances[0]","image"],$n(r));const c=s(t,["video"]);c!=null&&a(n,["instances[0]","video"],P0(c));const u=s(t,["source"]);u!=null&&MN(u,n);const f=s(t,["config"]);return f!=null&&vN(f,n),n}function wN(e){const t={},n=s(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>_N(c))),a(t,["generatedVideos"],r)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function EN(e){const t={},n=s(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>RN(c))),a(t,["generatedVideos"],r)}const i=s(e,["raiMediaFilteredCount"]);i!=null&&a(t,["raiMediaFilteredCount"],i);const o=s(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function kN(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);if(t!==void 0&&o!=null&&a(t,["instances[0]","image"],D0(o)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function MN(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],$n(o));const r=s(e,["video"]);return t!==void 0&&r!=null&&a(t,["instances[0]","video"],P0(r)),n}function AN(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],BN(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],I0(o)),t}function Mc(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["image"],j0(n));const i=s(e,["raiFilteredReason"]);i!=null&&a(t,["raiFilteredReason"],i);const o=s(e,["_self"]);o!=null&&a(t,["safetyAttributes"],L0(o));const r=s(e,["prompt"]);return r!=null&&a(t,["enhancedPrompt"],r),t}function NN(e){const t={},n=s(e,["_self"]);n!=null&&a(t,["mask"],j0(n));const i=s(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>KA(r))),a(t,["labels"],o)}return t}function _N(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],W_(n)),t}function RN(e){const t={},n=s(e,["_self"]);return n!=null&&a(t,["video"],X_(n)),t}function jN(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Ve(e,i)),n}function DN(e,t){const n={},i=s(t,["model"]);return i!=null&&a(n,["_url","name"],Ve(e,i)),n}function IN(e){const t={},n=s(e,["authConfig"]);return n!=null&&a(t,["authConfig"],aA(n)),t}function LN(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],UA(n)),t}function UN(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],PA(n)),t}function PN(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],FN(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function VN(e){const t={},n=s(e,["timeRangeFilter"]);n!=null&&a(t,["timeRangeFilter"],$N(n));const i=s(e,["excludeDomains"]);return i!=null&&a(t,["excludeDomains"],i),t}function BN(e){const t={},n=s(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],Lo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function j0(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["imageBytes"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function D0(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],Lo(n));const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function $n(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["imageBytes"]);i!=null&&a(t,["bytesBase64Encoded"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function FN(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function $N(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function GN(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function HN(e){const t={},n=s(e,["latitude"]);n!=null&&a(t,["latitude"],n);const i=s(e,["longitude"]);return i!=null&&a(t,["longitude"],i),t}function zN(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const r=s(t,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],p0(e,u)),i}function qN(e,t,n){const i={},o=s(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const r=s(t,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const c=s(t,["filter"]);n!==void 0&&c!=null&&a(n,["_query","filter"],c);const u=s(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],p0(e,u)),i}function ON(e,t){const n={},i=s(t,["config"]);return i!=null&&zN(e,i,n),n}function YN(e,t){const n={},i=s(t,["config"]);return i!=null&&qN(e,i,n),n}function JN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let r=x0(o);Array.isArray(r)&&(r=r.map(c=>Gd(c))),a(t,["models"],r)}return t}function WN(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let r=x0(o);Array.isArray(r)&&(r=r.map(c=>Hd(c))),a(t,["models"],r)}return t}function XN(e){const t={},n=s(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const i=s(e,["segmentationClasses"]);i!=null&&a(t,["maskClasses"],i);const o=s(e,["maskDilation"]);return o!=null&&a(t,["dilation"],o),t}function Gd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["version"]);r!=null&&a(t,["version"],r);const c=s(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],I_(c));const u=s(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const f=s(e,["outputTokenLimit"]);f!=null&&a(t,["outputTokenLimit"],f);const d=s(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function Hd(e){const t={},n=s(e,["name"]);n!=null&&a(t,["name"],n);const i=s(e,["displayName"]);i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["versionId"]);r!=null&&a(t,["version"],r);const c=s(e,["deployedModels"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>WA(h))),a(t,["endpoints"],g)}const u=s(e,["labels"]);u!=null&&a(t,["labels"],u);const f=s(e,["_self"]);f!=null&&a(t,["tunedModelInfo"],L_(f));const d=s(e,["defaultCheckpointId"]);d!=null&&a(t,["defaultCheckpointId"],d);const m=s(e,["checkpoints"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(h=>gA(h))),a(t,["checkpoints"],g)}return t}function KN(e){const t={},n=s(e,["featureSelectionPreference"]);return n!=null&&a(t,["featureSelectionPreference"],n),t}function ZN(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>T_(o))),a(t,["speakerVoiceConfigs"],i)}return t}function QN(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],Q_(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],cA(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],ZA(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],nN(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function e_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],eR(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],uA(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],QA(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],iN(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function t_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],tR(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],dA(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],eN(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],oN(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function n_(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],nR(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],fA(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],tN(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],lN(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function i_(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function o_(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function l_(e){const t={},n=s(e,["productImage"]);return n!=null&&a(t,["image"],$n(n)),t}function r_(e,t){const n={},i=s(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const o=s(e,["baseSteps"]);t!==void 0&&o!=null&&a(t,["parameters","editConfig","baseSteps"],o);const r=s(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const c=s(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const u=s(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const d=s(e,["addWatermark"]);t!==void 0&&d!=null&&a(t,["parameters","addWatermark"],d);const m=s(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const g=s(e,["outputCompressionQuality"]);t!==void 0&&g!=null&&a(t,["parameters","outputOptions","compressionQuality"],g);const h=s(e,["enhancePrompt"]);return t!==void 0&&h!=null&&a(t,["parameters","enhancePrompt"],h),n}function s_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["source"]);o!=null&&c_(o,n);const r=s(t,["config"]);return r!=null&&r_(r,n),n}function a_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Mc(o))),a(t,["generatedImages"],i)}return t}function c_(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["personImage"]);t!==void 0&&o!=null&&a(t,["instances[0]","personImage","image"],$n(o));const r=s(e,["productImages"]);if(t!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>l_(u))),a(t,["instances[0]","productImages"],c)}return n}function u_(e){const t={},n=s(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],$n(n));const i=s(e,["referenceId"]);i!=null&&a(t,["referenceId"],i);const o=s(e,["referenceType"]);o!=null&&a(t,["referenceType"],o);const r=s(e,["maskImageConfig"]);r!=null&&a(t,["maskImageConfig"],XN(r));const c=s(e,["controlImageConfig"]);c!=null&&a(t,["controlImageConfig"],EA(c));const u=s(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],E_(u));const f=s(e,["subjectImageConfig"]);return f!=null&&a(t,["subjectImageConfig"],k_(f)),t}function d_(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],GN(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function f_(e){const t={},n=s(e,["latLng"]);n!=null&&a(t,["latLng"],HN(n));const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function I0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function L0(e){const t={},n=s(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const i=s(e,["safetyAttributes","scores"]);i!=null&&a(t,["scores"],i);const o=s(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function m_(e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(e,["category"]);n!=null&&a(t,["category"],n);const i=s(e,["threshold"]);return i!=null&&a(t,["threshold"],i),t}function h_(e){const t={},n=s(e,["method"]);n!=null&&a(t,["method"],n);const i=s(e,["category"]);i!=null&&a(t,["category"],i);const o=s(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function g_(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["enum"]);r!=null&&a(t,["enum"],r);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const g=s(e,["maxProperties"]);g!=null&&a(t,["maxProperties"],g);const h=s(e,["maximum"]);h!=null&&a(t,["maximum"],h);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const v=s(e,["minProperties"]);v!=null&&a(t,["minProperties"],v);const E=s(e,["minimum"]);E!=null&&a(t,["minimum"],E);const C=s(e,["nullable"]);C!=null&&a(t,["nullable"],C);const x=s(e,["pattern"]);x!=null&&a(t,["pattern"],x);const S=s(e,["properties"]);S!=null&&a(t,["properties"],S);const w=s(e,["propertyOrdering"]);w!=null&&a(t,["propertyOrdering"],w);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const D=s(e,["title"]);D!=null&&a(t,["title"],D);const _=s(e,["type"]);return _!=null&&a(t,["type"],_),t}function p_(e){const t={},n=s(e,["anyOf"]);n!=null&&a(t,["anyOf"],n);const i=s(e,["default"]);i!=null&&a(t,["default"],i);const o=s(e,["description"]);o!=null&&a(t,["description"],o);const r=s(e,["enum"]);r!=null&&a(t,["enum"],r);const c=s(e,["example"]);c!=null&&a(t,["example"],c);const u=s(e,["format"]);u!=null&&a(t,["format"],u);const f=s(e,["items"]);f!=null&&a(t,["items"],f);const d=s(e,["maxItems"]);d!=null&&a(t,["maxItems"],d);const m=s(e,["maxLength"]);m!=null&&a(t,["maxLength"],m);const g=s(e,["maxProperties"]);g!=null&&a(t,["maxProperties"],g);const h=s(e,["maximum"]);h!=null&&a(t,["maximum"],h);const p=s(e,["minItems"]);p!=null&&a(t,["minItems"],p);const b=s(e,["minLength"]);b!=null&&a(t,["minLength"],b);const v=s(e,["minProperties"]);v!=null&&a(t,["minProperties"],v);const E=s(e,["minimum"]);E!=null&&a(t,["minimum"],E);const C=s(e,["nullable"]);C!=null&&a(t,["nullable"],C);const x=s(e,["pattern"]);x!=null&&a(t,["pattern"],x);const S=s(e,["properties"]);S!=null&&a(t,["properties"],S);const w=s(e,["propertyOrdering"]);w!=null&&a(t,["propertyOrdering"],w);const A=s(e,["required"]);A!=null&&a(t,["required"],A);const D=s(e,["title"]);D!=null&&a(t,["title"],D);const _=s(e,["type"]);return _!=null&&a(t,["type"],_),t}function x_(e){const t={},n=s(e,["image"]);return n!=null&&a(t,["image"],$n(n)),t}function y_(e,t){const n={},i=s(e,["mode"]);t!==void 0&&i!=null&&a(t,["parameters","mode"],i);const o=s(e,["maxPredictions"]);t!==void 0&&o!=null&&a(t,["parameters","maxPredictions"],o);const r=s(e,["confidenceThreshold"]);t!==void 0&&r!=null&&a(t,["parameters","confidenceThreshold"],r);const c=s(e,["maskDilation"]);t!==void 0&&c!=null&&a(t,["parameters","maskDilation"],c);const u=s(e,["binaryColorThreshold"]);return t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u),n}function v_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["source"]);o!=null&&C_(o,n);const r=s(t,["config"]);return r!=null&&y_(r,n),n}function b_(e){const t={},n=s(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>NN(o))),a(t,["generatedMasks"],i)}return t}function C_(e,t){const n={},i=s(e,["prompt"]);t!==void 0&&i!=null&&a(t,["instances[0]","prompt"],i);const o=s(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],$n(o));const r=s(e,["scribbleImage"]);return t!==void 0&&r!=null&&a(t,["instances[0]","scribble"],x_(r)),n}function T_(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],V0(i)),t}function S_(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],V0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],ZN(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function w_(e){const t={},n=s(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],iR(n)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(e,["languageCode"]);return i!=null&&a(t,["languageCode"],i),t}function E_(e){const t={},n=s(e,["styleDescription"]);return n!=null&&a(t,["styleDescription"],n),t}function k_(e){const t={},n=s(e,["subjectType"]);n!=null&&a(t,["subjectType"],n);const i=s(e,["subjectDescription"]);return i!=null&&a(t,["subjectDescription"],i),t}function M_(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function A_(e){const t={},n=s(e,["includeThoughts"]);n!=null&&a(t,["includeThoughts"],n);const i=s(e,["thinkingBudget"]);return i!=null&&a(t,["thinkingBudget"],i),t}function N_(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function __(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function R_(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],rN(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],d_(i)),t}function j_(e){const t={},n=s(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],sN(n));const i=s(e,["retrievalConfig"]);return i!=null&&a(t,["retrievalConfig"],f_(i)),t}function D_(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>aN(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],PN(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],LN(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],q_());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],N_(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function U0(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(h=>cN(h))),a(t,["functionDeclarations"],g)}const i=s(e,["retrieval"]);i!=null&&a(t,["retrieval"],i);const o=s(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],VN(o));const r=s(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],UN(r));const c=s(e,["enterpriseWebSearch"]);c!=null&&a(t,["enterpriseWebSearch"],XA(c));const u=s(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],IN(u)),s(e,["urlContext"])!=null&&a(t,["urlContext"],O_());const d=s(e,["computerUse"]);d!=null&&a(t,["computerUse"],__(d));const m=s(e,["codeExecution"]);return m!=null&&a(t,["codeExecution"],m),t}function I_(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function L_(e){const t={},n=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["createTime"]);i!=null&&a(t,["createTime"],i);const o=s(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function U_(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const r=s(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&a(t,["defaultCheckpointId"],r),n}function P_(e,t){const n={},i=s(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const o=s(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const r=s(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&a(t,["defaultCheckpointId"],r),n}function V_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","name"],Ve(e,i));const o=s(t,["config"]);return o!=null&&U_(o,n),n}function B_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["config"]);return o!=null&&P_(o,n),n}function F_(e,t){const n={},i=s(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const o=s(e,["includeRaiReason"]);t!==void 0&&o!=null&&a(t,["parameters","includeRaiReason"],o);const r=s(e,["outputMimeType"]);t!==void 0&&r!=null&&a(t,["parameters","outputOptions","mimeType"],r);const c=s(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&a(t,["parameters","outputOptions","compressionQuality"],c);const u=s(e,["enhanceInputImage"]);t!==void 0&&u!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],u);const f=s(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=s(e,["numberOfImages"]);t!==void 0&&d!=null&&a(t,["parameters","sampleCount"],d);const m=s(e,["mode"]);return t!==void 0&&m!=null&&a(t,["parameters","mode"],m),n}function $_(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["_url","model"],Ve(e,i));const o=s(t,["image"]);o!=null&&a(n,["instances[0]","image"],$n(o));const r=s(t,["upscaleFactor"]);r!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],r);const c=s(t,["config"]);return c!=null&&F_(c,n),n}function G_(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Mc(r))),a(t,["generatedImages"],o)}return t}function H_(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Y_(o))),a(t,["urlMetadata"],i)}return t}function z_(e){const t={},n=s(e,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>J_(o))),a(t,["urlMetadata"],i)}return t}function q_(){return{}}function O_(){return{}}function Y_(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function J_(e){const t={},n=s(e,["retrievedUrl"]);n!=null&&a(t,["retrievedUrl"],n);const i=s(e,["urlRetrievalStatus"]);return i!=null&&a(t,["urlRetrievalStatus"],i),t}function W_(e){const t={},n=s(e,["video","uri"]);n!=null&&a(t,["uri"],n);const i=s(e,["video","encodedVideo"]);i!=null&&a(t,["videoBytes"],Lo(i));const o=s(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function X_(e){const t={},n=s(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const i=s(e,["bytesBase64Encoded"]);i!=null&&a(t,["videoBytes"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function K_(e){const t={},n=s(e,["image"]);n!=null&&a(t,["_self"],$n(n));const i=s(e,["maskMode"]);return i!=null&&a(t,["maskMode"],i),t}function Z_(e){const t={},n=s(e,["image"]);n!=null&&a(t,["image"],$n(n));const i=s(e,["referenceType"]);return i!=null&&a(t,["referenceType"],i),t}function Q_(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function eR(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function tR(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function nR(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function P0(e){const t={},n=s(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const i=s(e,["videoBytes"]);i!=null&&a(t,["bytesBase64Encoded"],Lo(i));const o=s(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function V0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],i_(n)),t}function iR(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],o_(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oR="Content-Type",lR="X-Server-Timeout",rR="User-Agent",zd="x-goog-api-client",sR="1.21.0",aR=`google-genai-sdk/${sR}`,cR="v1beta1",uR="v1beta",xp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dR{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:cR,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:uR,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[c,u]of Object.entries(t.queryParams))o.searchParams.append(c,String(u));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const o=new AbortController,r=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=r}return n&&n.extraBody!==null&&fR(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await yp(o),new Pd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await yp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return kl(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:u,value:f}=yield Ze(o.read());if(u){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=r.decode(f,{stream:!0});try{const g=JSON.parse(d);if("error"in g){const h=JSON.parse(JSON.stringify(g.error)),p=h.status,b=h.code,v=`got status: ${p}. ${JSON.stringify(g)}`;if(b>=400&&b<600)throw new Ec({message:v,status:b})}}catch(g){if(g.name==="ApiError")throw g}c+=d;let m=c.match(xp);for(;m;){const g=m[1];try{const h=new Response(g,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Ze(new Pd(h)),c=c.slice(m[0].length),m=c.match(xp)}catch(h){throw new Error(`exception parsing stream chunk ${g}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=aR+" "+this.clientOptions.userAgentExtra;return t[rR]=n,t[zd]=n,t[oR]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))n.append(i,o);t.timeout&&t.timeout>0&&n.append(lR,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,c=await r.stat(t);o.sizeBytes=String(c.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,n);return r.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const r={file:t},c=await this.request({path:ge("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function yp(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Ec({message:o,status:n}):new Error(o)}}function fR(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,c){const u=Object.assign({},r);for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const d=c[f],m=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?u[f]=i(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mR="mcp_used/unknown";let hR=!1;function B0(e){for(const t of e)if(gR(t)||typeof t=="object"&&"inputSchema"in t)return!0;return hR}function F0(e){var t;const n=(t=e[zd])!==null&&t!==void 0?t:"";e[zd]=(n+` ${mR}`).trimStart()}function gR(e){return e!==null&&typeof e=="object"&&e instanceof om}function pR(e,t=100){return kl(this,arguments,function*(){let i,o=0;for(;o<t;){const r=yield Ze(e.listTools({cursor:i}));for(const c of r.tools)yield yield Ze(c),o++;if(!r.nextCursor)break;i=r.nextCursor}})}class om{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new om(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const r={},c=[];for(const m of this.mcpClients)try{for(var u=!0,f=(n=void 0,zr(pR(m))),d;d=await f.next(),t=d.done,!t;u=!0){o=d.value,u=!1;const g=o;c.push(g);const h=g.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=m}}catch(g){n={error:g}}finally{try{!u&&!t&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),RS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xR(e,t,n){const i=new SS;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const r=rM(o);Object.assign(i,r),t(i)}class yR{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),c=CR(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const m=new Promise(S=>{d=S}),g=t.callbacks,h=function(){d({})},p=this.apiClient,b={onopen:h,onmessage:S=>{xR(p,g.onmessage,S)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=g==null?void 0:g.onclose)!==null&&i!==void 0?i:function(S){}},v=this.webSocketFactory.create(f,bR(c),b);v.connect(),await m;const E=Ve(this.apiClient,t.model),C=A0({model:E}),x=$d({setup:C});return v.send(JSON.stringify(x)),new vR(v,this.apiClient)}}class vR{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=cM(t),i=M0(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=aM(t),i=$d(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const n=$d({playbackControl:t});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hl.PLAY)}pause(){this.sendPlaybackControl(hl.PAUSE)}stop(){this.sendPlaybackControl(hl.STOP)}resetContext(){this.sendPlaybackControl(hl.RESET_CONTEXT)}close(){this.conn.close()}}function bR(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function CR(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function SR(e,t,n){const i=new TS;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const r=JSON.parse(o);if(e.isVertexAI()){const c=yM(r);Object.assign(i,c)}else{const c=xM(r);Object.assign(i,c)}t(i)}class wR{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new yR(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,c,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const g=this.apiClient.getHeaders();t.config&&t.config.tools&&B0(t.config.tools)&&F0(g);const h=AR(g);if(this.apiClient.isVertexAI())m=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const L=this.apiClient.getApiKey();let P="BidiGenerateContent",Z="key";L!=null&&L.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",Z="access_token"),m=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${P}?${Z}=${L}`}let p=()=>{};const b=new Promise(L=>{p=L}),v=t.callbacks,E=function(){var L;(L=v==null?void 0:v.onopen)===null||L===void 0||L.call(v),p({})},C=this.apiClient,x={onopen:E,onmessage:L=>{SR(C,v.onmessage,L)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(L){}},S=this.webSocketFactory.create(m,MR(h),x);S.connect(),await b;let w=Ve(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const L=this.apiClient.getProject(),P=this.apiClient.getLocation();w=`projects/${L}/locations/${P}/`+w}let A={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Qa.AUDIO]}:t.config.responseModalities=[Qa.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(u=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[],_=[];for(const L of D)if(this.isCallableTool(L)){const P=L;_.push(await P.tool())}else _.push(L);_.length>0&&(t.config.tools=_);const M={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?A=tM(this.apiClient,M):A=eM(this.apiClient,M),delete A.config,S.send(JSON.stringify(A)),new kR(S,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const ER={turnComplete:!0};class kR{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=_n(n.turns),t.isVertexAI()?i=i.map(o=>Xl(o)):i=i.map(o=>kc(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(TR)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},ER),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fM(t)}:n={realtimeInput:dM(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function MR(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function AR(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vp=10;function bp(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const c of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Ml(c)){o=!0;break}if(!o)return!0;const r=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Ml(e){return"callTool"in e&&typeof e.callTool=="function"}function NR(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Ml(o)))!==null&&i!==void 0?i:!1}function _R(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>!Ml(o)))!==null&&i!==void 0?i:!1}function Cp(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RR extends Io{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,c,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!NR(n)||bp(n.config))return await this.generateContentInternal(f);if(_R(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,m;const g=_n(f.contents),h=(r=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:vp;let p=0;for(;p<h&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const b=d.candidates[0].content,v=[];for(const E of(u=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&u!==void 0?u:[])if(Ml(E)){const x=await E.callTool(d.functionCalls);v.push(...x)}p++,m={role:"user",parts:v},f.contents=_n(f.contents),f.contents.push(b),f.contents.push(m),Cp(f.config)&&(g.push(b),g.push(m))}return Cp(f.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),bp(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r;const c=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=f==null?void 0:f.safetyAttributes:c.push(f);let u;return r?u={generatedImages:c,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ss(No.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;const c=await Promise.all(r.map(async f=>Ml(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(u.config.tools=c,t.config&&t.config.tools&&B0(t.config.tools)){const f=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),F0(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,i,o;const r=new Map;for(const c of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ml(c)){const u=c,f=await u.tool();for(const d of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,u)}}return r}async processAfcStream(t){var n,i,o;const r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:vp;let c=!1,u=0;const f=await this.initAfcToolsMap(t);return function(d,m,g){var h,p;return kl(this,arguments,function*(){for(var b,v,E,C;u<r;){c&&(u++,c=!1);const A=yield Ze(d.processParamsMaybeAddMcpUsage(g)),D=yield Ze(d.generateContentStreamInternal(A)),_=[],M=[];try{for(var x=!0,S=(v=void 0,zr(D)),w;w=yield Ze(S.next()),b=w.done,!b;x=!0){C=w.value,x=!1;const L=C;if(yield yield Ze(L),L.candidates&&(!((h=L.candidates[0])===null||h===void 0)&&h.content)){M.push(L.candidates[0].content);for(const P of(p=L.candidates[0].content.parts)!==null&&p!==void 0?p:[])if(u<r&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(P.functionCall.name)){const Z=yield Ze(m.get(P.functionCall.name).callTool([P.functionCall]));_.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(L){v={error:L}}finally{try{!x&&!b&&(E=S.return)&&(yield Ze(E.call(S)))}finally{if(v)throw v.error}}if(_.length>0){c=!0;const L=new Cr;L.candidates=[{content:{role:"user",parts:_}}],yield yield Ze(L);const P=[];P.push(...M),P.push({role:"user",parts:_});const Z=_n(g.contents).concat(P);g.contents=Z}else break}})}(this,f,t)}async generateContentInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=hp(this.apiClient,t);return u=ge("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=pp(m),h=new Cr;return Object.assign(h,g),h})}else{const d=mp(this.apiClient,t);return u=ge("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=gp(m),h=new Cr;return Object.assign(h,g),h})}}async generateContentStreamInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=hp(this.apiClient,t);return u=ge("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(g){return kl(this,arguments,function*(){var h,p,b,v;try{for(var E=!0,C=zr(g),x;x=yield Ze(C.next()),h=x.done,!h;E=!0){v=x.value,E=!1;const S=v,w=pp(yield Ze(S.json()));w.sdkHttpResponse={headers:S.headers};const A=new Cr;Object.assign(A,w),yield yield Ze(A)}}catch(S){p={error:S}}finally{try{!E&&!h&&(b=C.return)&&(yield Ze(b.call(C)))}finally{if(p)throw p.error}}})})}else{const d=mp(this.apiClient,t);return u=ge("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(g){return kl(this,arguments,function*(){var h,p,b,v;try{for(var E=!0,C=zr(g),x;x=yield Ze(C.next()),h=x.done,!h;E=!0){v=x.value,E=!1;const S=v,w=gp(yield Ze(S.json()));w.sdkHttpResponse={headers:S.headers};const A=new Cr;Object.assign(A,w),yield yield Ze(A)}}catch(S){p={error:S}}finally{try{!E&&!h&&(b=C.return)&&(yield Ze(b.call(C)))}finally{if(p)throw p.error}}})})}}async embedContent(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=OA(this.apiClient,t);return u=ge("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=JA(m),h=new Yg;return Object.assign(h,g),h})}else{const d=qA(this.apiClient,t);return u=ge("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=YA(m),h=new Yg;return Object.assign(h,g),h})}}async generateImagesInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=gN(this.apiClient,t);return u=ge("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=xN(m),h=new Jg;return Object.assign(h,g),h})}else{const d=hN(this.apiClient,t);return u=ge("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=pN(m),h=new Jg;return Object.assign(h,g),h})}}async editImageInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=BA(this.apiClient,t);return r=ge("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=FA(f),m=new hS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=$_(this.apiClient,t);return r=ge("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=G_(f),m=new gS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=s_(this.apiClient,t);return r=ge("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=a_(f),m=new pS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=v_(this.apiClient,t);return r=ge("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const d=b_(f),m=new xS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=DN(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Hd(m))}else{const d=jN(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>Gd(m))}}async listInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=YN(this.apiClient,t);return u=ge("{models_url}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=WN(m),h=new Wg;return Object.assign(h,g),h})}else{const d=ON(this.apiClient,t);return u=ge("{models_url}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=JN(m),h=new Wg;return Object.assign(h,g),h})}}async update(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=B_(this.apiClient,t);return u=ge("{model}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>Hd(m))}else{const d=V_(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>Gd(m))}}async delete(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=DA(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=LA(m),h=new Xg;return Object.assign(h,g),h})}else{const d=jA(this.apiClient,t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=IA(m),h=new Xg;return Object.assign(h,g),h})}}async countTokens(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=NA(this.apiClient,t);return u=ge("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=RA(m),h=new Kg;return Object.assign(h,g),h})}else{const d=AA(this.apiClient,t);return u=ge("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=_A(m),h=new Kg;return Object.assign(h,g),h})}}async computeTokens(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=yA(this.apiClient,t);return r=ge("{model}:computeTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const d=vA(f),m=new yS;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=SN(this.apiClient,t);return u=ge("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c.then(m=>{const g=CN(m),h=new ec;return Object.assign(h,g),h})}else{const d=TN(this.apiClient,t);return u=ge("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c.then(m=>{const g=bN(m),h=new ec;return Object.assign(h,g),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jR extends Io{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=dS(t);return u=ge("{operationName}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),c}else{const d=uS(t);return u=ge("{operationName}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),c}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=iS(t);return r=ge("{resourceName}:fetchPredictOperation",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tp(){return{}}function DR(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["name"],n),t}function IR(e){const t={},n=s(e,["disabled"]);n!=null&&a(t,["disabled"],n);const i=s(e,["startOfSpeechSensitivity"]);i!=null&&a(t,["startOfSpeechSensitivity"],i);const o=s(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);const r=s(e,["prefixPaddingMs"]);r!=null&&a(t,["prefixPaddingMs"],r);const c=s(e,["silenceDurationMs"]);return c!=null&&a(t,["silenceDurationMs"],c),t}function LR(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["data"]);n!=null&&a(t,["data"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function UR(e){const t={},n=s(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>XR(r))),a(t,["parts"],o)}const i=s(e,["role"]);return i!=null&&a(t,["role"],i),t}function PR(e){const t={},n=s(e,["triggerTokens"]);n!=null&&a(t,["triggerTokens"],n);const i=s(e,["slidingWindow"]);return i!=null&&a(t,["slidingWindow"],t3(i)),t}function VR(e,t,n){const i={},o=s(t,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const r=s(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&a(n,["newSessionExpireTime"],r);const c=s(t,["uses"]);n!==void 0&&c!=null&&a(n,["uses"],c);const u=s(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],JR(e,u));const f=s(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&a(n,["fieldMask"],f),i}function BR(e,t){const n={},i=s(t,["config"]);return i!=null&&a(n,["config"],VR(e,i,n)),n}function FR(e){const t={},n=s(e,["mode"]);n!=null&&a(t,["mode"],n);const i=s(e,["dynamicThreshold"]);return i!=null&&a(t,["dynamicThreshold"],i),t}function $R(e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const i=s(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function GR(e){const t={},n=s(e,["id"]);n!=null&&a(t,["id"],n);const i=s(e,["args"]);i!=null&&a(t,["args"],i);const o=s(e,["name"]);return o!=null&&a(t,["name"],o),t}function HR(e){const t={},n=s(e,["behavior"]);n!=null&&a(t,["behavior"],n);const i=s(e,["description"]);i!=null&&a(t,["description"],i);const o=s(e,["name"]);o!=null&&a(t,["name"],o);const r=s(e,["parameters"]);r!=null&&a(t,["parameters"],r);const c=s(e,["parametersJsonSchema"]);c!=null&&a(t,["parametersJsonSchema"],c);const u=s(e,["response"]);u!=null&&a(t,["response"],u);const f=s(e,["responseJsonSchema"]);return f!=null&&a(t,["responseJsonSchema"],f),t}function zR(e){const t={},n=s(e,["dynamicRetrievalConfig"]);return n!=null&&a(t,["dynamicRetrievalConfig"],FR(n)),t}function qR(e){const t={},n=s(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],OR(n)),s(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function OR(e){const t={},n=s(e,["startTime"]);n!=null&&a(t,["startTime"],n);const i=s(e,["endTime"]);return i!=null&&a(t,["endTime"],i),t}function YR(e,t){const n={},i=s(e,["generationConfig"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig"],i);const o=s(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const r=s(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const c=s(e,["topP"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","topP"],c);const u=s(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const f=s(e,["maxOutputTokens"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","maxOutputTokens"],f);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const m=s(e,["seed"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","seed"],m);const g=s(e,["speechConfig"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","speechConfig"],i3(nm(g)));const h=s(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],h);const p=s(e,["systemInstruction"]);t!==void 0&&p!=null&&a(t,["setup","systemInstruction"],UR(Gt(p)));const b=s(e,["tools"]);if(t!==void 0&&b!=null){let A=Jl(b);Array.isArray(A)&&(A=A.map(D=>l3(Yl(D)))),a(t,["setup","tools"],A)}const v=s(e,["sessionResumption"]);t!==void 0&&v!=null&&a(t,["setup","sessionResumption"],e3(v));const E=s(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&a(t,["setup","inputAudioTranscription"],Tp());const C=s(e,["outputAudioTranscription"]);t!==void 0&&C!=null&&a(t,["setup","outputAudioTranscription"],Tp());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&a(t,["setup","realtimeInputConfig"],QR(x));const S=s(e,["contextWindowCompression"]);t!==void 0&&S!=null&&a(t,["setup","contextWindowCompression"],PR(S));const w=s(e,["proactivity"]);return t!==void 0&&w!=null&&a(t,["setup","proactivity"],ZR(w)),n}function JR(e,t){const n={},i=s(t,["model"]);i!=null&&a(n,["setup","model"],Ve(e,i));const o=s(t,["config"]);return o!=null&&a(n,["config"],YR(o,n)),n}function WR(e){const t={},n=s(e,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>n3(o))),a(t,["speakerVoiceConfigs"],i)}return t}function XR(e){const t={},n=s(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],s3(n));const i=s(e,["thought"]);i!=null&&a(t,["thought"],i);const o=s(e,["inlineData"]);o!=null&&a(t,["inlineData"],LR(o));const r=s(e,["fileData"]);r!=null&&a(t,["fileData"],$R(r));const c=s(e,["thoughtSignature"]);c!=null&&a(t,["thoughtSignature"],c);const u=s(e,["functionCall"]);u!=null&&a(t,["functionCall"],GR(u));const f=s(e,["codeExecutionResult"]);f!=null&&a(t,["codeExecutionResult"],f);const d=s(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const m=s(e,["functionResponse"]);m!=null&&a(t,["functionResponse"],m);const g=s(e,["text"]);return g!=null&&a(t,["text"],g),t}function KR(e){const t={},n=s(e,["voiceName"]);return n!=null&&a(t,["voiceName"],n),t}function ZR(e){const t={},n=s(e,["proactiveAudio"]);return n!=null&&a(t,["proactiveAudio"],n),t}function QR(e){const t={},n=s(e,["automaticActivityDetection"]);n!=null&&a(t,["automaticActivityDetection"],IR(n));const i=s(e,["activityHandling"]);i!=null&&a(t,["activityHandling"],i);const o=s(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function e3(e){const t={},n=s(e,["handle"]);if(n!=null&&a(t,["handle"],n),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function t3(e){const t={},n=s(e,["targetTokens"]);return n!=null&&a(t,["targetTokens"],n),t}function n3(e){const t={},n=s(e,["speaker"]);n!=null&&a(t,["speaker"],n);const i=s(e,["voiceConfig"]);return i!=null&&a(t,["voiceConfig"],$0(i)),t}function i3(e){const t={},n=s(e,["voiceConfig"]);n!=null&&a(t,["voiceConfig"],$0(n));const i=s(e,["multiSpeakerVoiceConfig"]);i!=null&&a(t,["multiSpeakerVoiceConfig"],WR(i));const o=s(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function o3(e){const t={},n=s(e,["environment"]);n!=null&&a(t,["environment"],n);const i=s(e,["excludedPredefinedFunctions"]);return i!=null&&a(t,["excludedPredefinedFunctions"],i),t}function l3(e){const t={},n=s(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>HR(d))),a(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],qR(i));const o=s(e,["googleSearchRetrieval"]);if(o!=null&&a(t,["googleSearchRetrieval"],zR(o)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&a(t,["urlContext"],r3());const c=s(e,["computerUse"]);c!=null&&a(t,["computerUse"],o3(c));const u=s(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function r3(){return{}}function s3(e){const t={},n=s(e,["fps"]);n!=null&&a(t,["fps"],n);const i=s(e,["endOffset"]);i!=null&&a(t,["endOffset"],i);const o=s(e,["startOffset"]);return o!=null&&a(t,["startOffset"],o),t}function $0(e){const t={},n=s(e,["prebuiltVoiceConfig"]);return n!=null&&a(t,["prebuiltVoiceConfig"],KR(n)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a3(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function c3(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=a3(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?e.fieldMask=r:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(d=>c.includes(d)?`generationConfig.${d}`:d));const f=[];r&&f.push(r),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class u3 extends Io{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=BR(this.apiClient,t);r=ge("auth_tokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=c3(u,t.config);return o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>DR(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d3(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function f3(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function m3(e,t){const n={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=s(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&a(t,["displayName"],i),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(e,["epochCount"]);t!==void 0&&o!=null&&a(t,["tuningTask","hyperparameters","epochCount"],o);const r=s(e,["learningRateMultiplier"]);if(r!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=s(e,["batchSize"]);t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","batchSize"],c);const u=s(e,["learningRate"]);if(t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","learningRate"],u),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function h3(e,t){const n={},i=s(e,["validationDataset"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec"],j3(i,n));const o=s(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&a(t,["tunedModelDisplayName"],o);const r=s(e,["description"]);t!==void 0&&r!=null&&a(t,["description"],r);const c=s(e,["epochCount"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],c);const u=s(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=s(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=s(e,["adapterSize"]);if(t!==void 0&&d!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],d),s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=s(e,["labels"]);return t!==void 0&&m!=null&&a(t,["labels"],m),n}function g3(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["tuningTask","trainingData"],A3(o));const r=s(e,["config"]);return r!=null&&m3(r,t),t}function p3(e){const t={},n=s(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const i=s(e,["preTunedModel"]);i!=null&&a(t,["preTunedModel"],i);const o=s(e,["trainingDataset"]);o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],N3(o,t));const r=s(e,["config"]);return r!=null&&h3(r,t),t}function x3(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function y3(e){const t={},n=s(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function v3(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const r=s(e,["filter"]);return t!==void 0&&r!=null&&a(t,["_query","filter"],r),n}function b3(e,t){const n={},i=s(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const o=s(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const r=s(e,["filter"]);return t!==void 0&&r!=null&&a(t,["_query","filter"],r),n}function C3(e){const t={},n=s(e,["config"]);return n!=null&&v3(n,t),t}function T3(e){const t={},n=s(e,["config"]);return n!=null&&b3(n,t),t}function S3(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tunedModels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>G0(c))),a(t,["tuningJobs"],r)}return t}function w3(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);const o=s(e,["tuningJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>qd(c))),a(t,["tuningJobs"],r)}return t}function E3(e){const t={},n=s(e,["checkpointId"]);n!=null&&a(t,["checkpointId"],n);const i=s(e,["epoch"]);i!=null&&a(t,["epoch"],i);const o=s(e,["step"]);o!=null&&a(t,["step"],o);const r=s(e,["endpoint"]);return r!=null&&a(t,["endpoint"],r),t}function k3(e){const t={},n=s(e,["name"]);n!=null&&a(t,["model"],n);const i=s(e,["name"]);return i!=null&&a(t,["endpoint"],i),t}function M3(e){const t={},n=s(e,["model"]);n!=null&&a(t,["model"],n);const i=s(e,["endpoint"]);i!=null&&a(t,["endpoint"],i);const o=s(e,["checkpoints"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>E3(c))),a(t,["checkpoints"],r)}return t}function A3(e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=s(e,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_3(o))),a(t,["examples","examples"],i)}return t}function N3(e,t){const n={},i=s(e,["gcsUri"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);if(t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function _3(e){const t={},n=s(e,["textInput"]);n!=null&&a(t,["textInput"],n);const i=s(e,["output"]);return i!=null&&a(t,["output"],i),t}function G0(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],h0(o));const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const c=s(e,["tuningTask","startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["tuningTask","completeTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["description"]);d!=null&&a(t,["description"],d);const m=s(e,["baseModel"]);m!=null&&a(t,["baseModel"],m);const g=s(e,["_self"]);g!=null&&a(t,["tunedModel"],k3(g));const h=s(e,["customBaseModel"]);h!=null&&a(t,["customBaseModel"],h);const p=s(e,["experiment"]);p!=null&&a(t,["experiment"],p);const b=s(e,["labels"]);b!=null&&a(t,["labels"],b);const v=s(e,["outputUri"]);v!=null&&a(t,["outputUri"],v);const E=s(e,["pipelineJob"]);E!=null&&a(t,["pipelineJob"],E);const C=s(e,["serviceAccount"]);C!=null&&a(t,["serviceAccount"],C);const x=s(e,["tunedModelDisplayName"]);return x!=null&&a(t,["tunedModelDisplayName"],x),t}function qd(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["state"]);o!=null&&a(t,["state"],h0(o));const r=s(e,["createTime"]);r!=null&&a(t,["createTime"],r);const c=s(e,["startTime"]);c!=null&&a(t,["startTime"],c);const u=s(e,["endTime"]);u!=null&&a(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&a(t,["updateTime"],f);const d=s(e,["error"]);d!=null&&a(t,["error"],d);const m=s(e,["description"]);m!=null&&a(t,["description"],m);const g=s(e,["baseModel"]);g!=null&&a(t,["baseModel"],g);const h=s(e,["tunedModel"]);h!=null&&a(t,["tunedModel"],M3(h));const p=s(e,["preTunedModel"]);p!=null&&a(t,["preTunedModel"],p);const b=s(e,["supervisedTuningSpec"]);b!=null&&a(t,["supervisedTuningSpec"],b);const v=s(e,["tuningDataStats"]);v!=null&&a(t,["tuningDataStats"],v);const E=s(e,["encryptionSpec"]);E!=null&&a(t,["encryptionSpec"],E);const C=s(e,["partnerModelTuningSpec"]);C!=null&&a(t,["partnerModelTuningSpec"],C);const x=s(e,["customBaseModel"]);x!=null&&a(t,["customBaseModel"],x);const S=s(e,["experiment"]);S!=null&&a(t,["experiment"],S);const w=s(e,["labels"]);w!=null&&a(t,["labels"],w);const A=s(e,["outputUri"]);A!=null&&a(t,["outputUri"],A);const D=s(e,["pipelineJob"]);D!=null&&a(t,["pipelineJob"],D);const _=s(e,["serviceAccount"]);_!=null&&a(t,["serviceAccount"],_);const M=s(e,["tunedModelDisplayName"]);return M!=null&&a(t,["tunedModelDisplayName"],M),t}function R3(e){const t={},n=s(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const i=s(e,["name"]);i!=null&&a(t,["name"],i);const o=s(e,["metadata"]);o!=null&&a(t,["metadata"],o);const r=s(e,["done"]);r!=null&&a(t,["done"],r);const c=s(e,["error"]);return c!=null&&a(t,["error"],c),t}function j3(e,t){const n={},i=s(e,["gcsUri"]);i!=null&&a(n,["validationDatasetUri"],i);const o=s(e,["vertexDatasetResource"]);return t!==void 0&&o!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3 extends Io{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ss(No.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),r=await this.tuneMldevInternal(o);let c="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?c=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(c=r.name.split("/operations/")[0]),{name:c,state:Ud.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=y3(t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>qd(m))}else{const d=x3(t);return u=ge("{name}",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>G0(m))}}async listInternal(t){var n,i,o,r;let c,u="",f={};if(this.apiClient.isVertexAI()){const d=T3(t);return u=ge("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=w3(m),h=new Zg;return Object.assign(h,g),h})}else{const d=C3(t);return u=ge("tunedModels",d._url),f=d._query,delete d._url,delete d._query,c=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:m.headers},h})),c.then(m=>{const g=S3(m),h=new Zg;return Object.assign(h,g),h})}}async cancel(t){var n,i,o,r;let c="",u={};if(this.apiClient.isVertexAI()){const f=f3(t);c=ge("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=d3(t);c=ge("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI()){const u=p3(t);return r=ge("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>qd(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g3(t);return r=ge("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>R3(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I3{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const L3=1024*1024*8,U3=3,P3=1e3,V3=2,ju="x-goog-upload-status";async function B3(e,t,n){var i,o,r;let c=0,u=0,f=new Pd(new Response),d="upload";for(c=e.size;u<c;){const g=Math.min(L3,c-u),h=e.slice(u,u+g);u+g>=c&&(d+=", finalize");let p=0,b=P3;for(;p<U3&&(f=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[ju]));)p++,await $3(b),b=b*V3;if(u+=g,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[ju])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(f==null?void 0:f.json());if(((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[ju])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function F3(e){return{size:e.size,type:e.type}}function $3(e){return new Promise(t=>setTimeout(t,e))}class G3{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await B3(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await F3(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H3{create(t,n,i){return new z3(t,n,i)}}class z3{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sp="x-goog-api-key";class q3{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(Sp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Sp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O3="gl-node/";class Y3{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=nS(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new q3(this.apiKey);this.apiClient=new dR({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:O3+"web",uploader:new G3,downloader:new I3}),this.models=new RR(this.apiClient),this.live=new wR(this.apiClient,o,new H3),this.batches=new Yw(this.apiClient),this.chats=new tk(this.models,this.apiClient),this.caches=new ZE(this.apiClient),this.files=new hk(this.apiClient),this.operations=new jR(this.apiClient),this.authTokens=new u3(this.apiClient),this.tunings=new D3(this.apiClient)}}const J3={а:"a",б:"b",в:"v",г:"h",ґ:"g",д:"d",е:"e",є:"ie",ж:"zh",з:"z",и:"y",і:"i",ї:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ь:"",ю:"iu",я:"ia",А:"A",Б:"B",В:"V",Г:"H",Ґ:"G",Д:"D",Е:"E",Є:"Ie",Ж:"Zh",З:"Z",И:"Y",І:"I",Ї:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Shch",Ь:"",Ю:"Iu",Я:"Ia"};function na(e){return e&&e.split("").map(t=>J3[t]||t).join("")}async function W3(e,t,n,i,o,r,c,u,f){if(!e)throw new Error("API ключ не надано. Будь ласка, введіть ваш ключ у налаштуваннях.");const d=new Y3({apiKey:e}),m=na(r),g=t.map(b=>{const v={...b};return v.type==="rectangle"&&delete v.joinstyle,(v.type==="arc"||v.type==="pieslice"||v.type==="chord")&&(delete v.capstyle,delete v.arrow,delete v.arrowshape),(v.type==="polyline"||v.type==="bezier")&&v.isClosed&&(delete v.capstyle,delete v.arrow,delete v.arrowshape),v.name&&(v.name=na(v.name)),v.comment&&(v.comment=na(v.comment)),v.type==="text"&&(v.text=na(v.text)),v}),h=`
Generate a complete Python script using the Tkinter library to draw a scene. The output must be only the Python code, with no explanations, introductions, or markdown formatting.

Here are the specifications:

1.  **Window and Canvas:**
    *   The main window should be titled "${m}".
    *   The canvas variable must be named "${c}".
    *   The canvas dimensions must be ${n}x${i} pixels.
    *   The canvas background color must be "${o}".

2.  **Script Structure:**
    *   Import tkinter: \`from tkinter import *\`.
    *   Create the root window: \`root = Tk()\`.
    *   Set the window title and geometry.
    *   Create the canvas: \`${c} = Canvas(root, ...)\`.
    *   Pack the canvas: \`${c}.pack()\`.
    *   Draw all the shapes provided below.
    *   For each shape, you MUST add a comment with its unique ID right before the drawing command, in the format: \`# ID:shape-id-123\`. This is critical for mapping code back to the editor.
    *   ${u?"Add a short, descriptive comment for each shape based on its properties (e.g., `# A blue square`).":`Do not add any descriptive comments unless one is provided in the shape object's "comment" property.`}
    ${f?'*   **Important Rule for Outlines:** For any closed shape that has a fill color but no stroke (stroke is "none" or strokeWidth is 0), you MUST add `outline=""` to its drawing command. This prevents Tkinter from adding a default 1px black border. This rule applies to rectangles, ovals, polygons, pieslices, and chords.':""}
    *   End the script with \`root.mainloop()\`.

3.  **Shapes to Draw (JSON format):**
    ${JSON.stringify(g,null,2)}

Please generate only the Python code as a single block of text.
`,p="You are an expert Python developer specializing in the Tkinter library. Your task is to generate a complete, self-contained Python script based on a JSON description of shapes and canvas properties. The output must be only the Python code, with no surrounding text, explanations, or markdown formatting.";try{return(await d.models.generateContent({model:"gemini-2.5-flash",contents:h,config:{systemInstruction:p,temperature:.1}})).text.replace(/^```(python)?\n/i,"").replace(/```$/,"").trim()}catch(b){throw console.error("Error calling Gemini API:",b),b instanceof Error?b.message.includes("API key not valid")?new Error("Наданий ключ Gemini API недійсний. Будь ласка, перевірте його та спробуйте знову."):new Error(`Сталася помилка під час зв'язку з Gemini API: ${b.message}`):new Error("Невідома помилка під час генерації коду за допомогою Gemini.")}}const Ke=e=>Math.round(e*100)/100,Tn=e=>{const t=Object.entries(e).filter(([,n])=>n!=null&&!(Array.isArray(n)&&n.length===0)).map(([n,i])=>{if(typeof i=="string"){if(["first","last","both","pieslice","chord","arc","miter","round","bevel","butt","projecting","normal","hidden","disabled"].includes(i))return`${n}="${i}"`;const o=i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return`${n}="${o}"`}return Array.isArray(i)?`${n}=(${i.join(", ")})`:`${n}=${i}`});return t.length>0?`, ${t.join(", ")}`:""},X3=e=>e.name||Yt(e);function K3(e,t,n,i){if(e.state==="hidden")return null;const o={},r=e.type==="line"||e.type==="pencil"||e.type==="polyline"&&!e.isClosed||e.type==="bezier"&&!e.isClosed||e.type==="arc"&&e.style==="arc",c="fill"in e&&e.fill!=="none"&&!r,u=e.stroke!=="none"&&e.strokeWidth>0;if(c&&(o.fill=e.fill),u?(o.width=Ke(e.strokeWidth),r?o.fill=e.stroke:o.outline=e.stroke):c&&i&&!r&&(o.outline=""),e.state!=="normal"&&(o.state=e.state),e.type!=="rectangle"&&"joinstyle"in e&&e.joinstyle&&(o.joinstyle=e.joinstyle),"stipple"in e&&e.stipple&&"fill"in e&&e.fill!=="none"&&(o.stipple=e.stipple),"dash"in e&&e.dash){const h=e.strokeWidth>0?e.strokeWidth:1;o.dash=e.dash.map(p=>Ke(p*h)),"dashoffset"in e&&e.dashoffset!==void 0&&(o.dashoffset=Ke(e.dashoffset))}const f=h=>{const p=(h.type==="polyline"||h.type==="bezier")&&h.isClosed;if(h.arrow&&h.arrow!=="none"&&h.arrowshape&&!p){o.arrow=h.arrow;const b=h.strokeWidth>0?h.strokeWidth:1;o.arrowshape=h.arrowshape.map(v=>Ke(v*b))}h.capstyle&&!p&&(o.capstyle=h.capstyle)};if((e.type==="bezier"||e.type==="polyline")&&e.smooth){o.smooth="True","splinesteps"in e&&e.splinesteps&&(o.splinesteps=e.splinesteps),f(e);let h=e.points;if(e.rotation!==0){const b=bt(e);b&&(h=e.points.map(v=>He(v,b,e.rotation)))}const p=h.flatMap(b=>[Ke(b.x),Ke(b.y)]).join(", ");return e.isClosed?`${n}.create_polygon(${p}${Tn(o)})`:`${n}.create_line(${p}${Tn(o)})`}if((e.type==="line"||e.type==="bezier"||e.type==="polyline"||e.type==="pencil")&&f(e),e.type==="text"){const h=[e.font,Math.round(e.fontSize)];e.weight==="bold"&&h.push("bold"),e.slant==="italic"&&h.push("italic"),e.underline&&h.push("underline"),e.overstrike&&h.push("overstrike"),o.font=h.join(" "),o.text=e.text,e.fill!=="none"&&(o.fill=e.fill),o.anchor=e.anchor,e.width>0&&(o.width=Ke(e.width)),e.justify&&(o.justify=e.justify),e.rotation!==0&&(o.angle=Ke(e.rotation)),e.stipple&&e.fill!=="none"&&(o.stipple=e.stipple);const p=[Ke(e.x),Ke(e.y)].join(", ");return`${n}.create_text(${p}${Tn(o)})`}if(e.type==="image"){o.image=t.get(e.id);const h=[Ke(e.x+e.width/2),Ke(e.y+e.height/2)].join(", ");let p=`${n}.create_image(${h}${Tn(o)})`;return e.rotation!==0&&(p+=" # Tkinter не підтримує обертання для цього об'єкта."),p}if(e.type==="bitmap"){o.bitmap=e.bitmapType,o.foreground=e.foreground,o.background=e.background;const h=[Ke(e.x+e.width/2),Ke(e.y+e.height/2)].join(", ");let p=`${n}.create_bitmap(${h}${Tn(o)})`;return e.rotation!==0&&(p+=" # Tkinter не підтримує обертання для цього об'єкта."),p}if(!("rotation"in e)||e.rotation===0||e.type==="ellipse"&&e.isAspectRatioLocked)switch(e.type){case"rectangle":const h=e,p=[h.x,h.y,h.x+h.width,h.y+h.height].map(Ke).join(", ");return`${n}.create_rectangle(${p}${Tn(o)})`;case"ellipse":const b=e,v=[b.cx-b.rx,b.cy-b.ry,b.cx+b.rx,b.cy+b.ry].map(Ke).join(", ");return`${n}.create_oval(${v}${Tn(o)})`;case"arc":const E=e;o.start=Ke(E.start),o.extent=Ke(E.extent),E.style!=="pieslice"&&(o.style=E.style),E.style==="arc"&&o.fill&&(o.outline=o.fill,delete o.fill);const C=[E.x,E.y,E.x+E.width,E.y+E.height].map(Ke).join(", ");return`${n}.create_arc(${C}${Tn(o)})`}if(e.type==="arc"&&e.rotation!==0){const h=e;if(h.width===h.height){o.start=Ke(h.start+h.rotation),o.extent=Ke(h.extent),h.style!=="pieslice"&&(o.style=h.style),h.style==="arc"&&o.fill&&(o.outline=o.fill,delete o.fill);const p=[h.x,h.y,h.x+h.width,h.y+h.height].map(Ke).join(", ");return`${n}.create_arc(${p}${Tn(o)})`}}if(e.type==="polyline"&&e.isClosed&&!e.rotation&&Av(e)){const h=e.points.map(v=>v.x),p=e.points.map(v=>v.y),b=[Math.min(...h),Math.min(...p),Math.max(...h),Math.max(...p)].map(Ke).join(", ");return`${n}.create_rectangle(${b}${Tn(o)})`}const m=ti(e);if(!m||m.length<2)return null;"smooth"in e&&e.smooth&&(o.smooth="True","splinesteps"in e&&e.splinesteps&&(o.splinesteps=e.splinesteps));const g=m.flatMap(h=>[Ke(h.x),Ke(h.y)]).join(", ");return r?`${n}.create_line(${g}${Tn(o)})`:`${n}.create_polygon(${g}${Tn(o)})`}async function wp(e,t,n,i,o,r,c,u){const f=r.trim()||"c",d=e.filter(p=>p.type==="image"),m=new Map;let g="";d.length>0&&(g+=`from PIL import Image, ImageTk
`,g+=`import base64
`,g+=`import io

`,d.forEach((p,b)=>{const v=`img_photo_${b}`,E=p.src.split(",")[1];g+=`img_data_${b} = base64.b64decode(b'${E}')
`,g+=`img_pil_${b} = Image.open(io.BytesIO(img_data_${b}))
`,g+=`${v} = ImageTk.PhotoImage(img_pil_${b})
`,m.set(p.id,v)}),g+=`
`);const h=[];return h.push({content:"from tkinter import *",shapeId:null}),g.trim()&&(h.push({content:`
# --- Image setup ---`,shapeId:null}),g.split(`
`).forEach(p=>h.push({content:p,shapeId:null}))),h.push({content:"",shapeId:null}),h.push({content:"root = Tk()",shapeId:null}),h.push({content:`root.title("${o}")`,shapeId:null}),h.push({content:`root.geometry("${t}x${n}")`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:`${f} = Canvas(root, width=${t}, height=${n}, bg="${i}")`,shapeId:null}),h.push({content:`${f}.pack()`,shapeId:null}),h.push({content:"",shapeId:null}),h.push({content:"# --- Фігури (Об'єкти) ---",shapeId:null}),e.length===0?h.push({content:"# Об'єкти для малювання відсутні",shapeId:null}):e.forEach(p=>{const b=K3(p,m,f,u);if(b){let v=p.comment;c&&!v&&(v=X3(p)),v&&v.split(`
`).forEach(E=>{h.push({content:E.trim()===""?"#":`# ${E}`,shapeId:p.id})}),h.push({content:b,shapeId:p.id})}}),h.push({content:"",shapeId:null}),h.push({content:"root.mainloop()",shapeId:null}),Promise.resolve({codeLines:h})}const Z3=e=>{const[t,n]=T.useState(e.initialTab||"canvas"),[i,o]=T.useState(null),[r,c]=T.useState(""),u=T.useRef(null);T.useEffect(()=>{i&&u.current&&(u.current.focus(),u.current.select())},[i]);const f=v=>{o(v.id),c(v.name)},d=()=>{o(null),c("")},m=()=>{i&&r.trim()!==""&&e.onRenameTemplate(i,r.trim()),d()},g=v=>{v.key==="Enter"?m():v.key==="Escape"&&d()},h=v=>{let E=v.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(E)&&(E="_"+E),e.setCanvasVarName(E)},p=v=>{e.setGeneratorType(v)},b=({tab:v,label:E})=>l.jsx("button",{onClick:()=>n(v),className:`w-full text-left px-3 py-2 rounded-md font-semibold transition ${t===v?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:E});return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e.onClose,children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",onClick:v=>v.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Налаштування"}),l.jsx("button",{onClick:e.onClose,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"flex flex-grow min-h-0",children:[l.jsxs("nav",{className:"w-48 flex-shrink-0 border-r border-[var(--border-primary)] p-4 space-y-2",children:[l.jsx(b,{tab:"canvas",label:"Полотно"}),l.jsx(b,{tab:"grid",label:"Сітка"}),l.jsx(b,{tab:"appearance",label:"Вигляд"}),l.jsx(b,{tab:"code",label:"Код"}),l.jsx(b,{tab:"templates",label:"Шаблони"})]}),l.jsxs("div",{className:"flex-grow p-6 space-y-4 overflow-y-auto",children:[t==="canvas"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Розмір полотна"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasWidth",children:"Ширина:"}),l.jsx(Ce,{id:"canvasWidth",value:e.canvasWidth,onChange:e.setCanvasWidth,min:100,step:10})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasHeight",children:"Висота:"}),l.jsx(Ce,{id:"canvasHeight",value:e.canvasHeight,onChange:e.setCanvasHeight,min:100,step:10})]}),l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Тло"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasBgColor",children:"Колір тла:"}),l.jsx(Jt,{id:"canvasBgColor",value:e.canvasBgColor,onChange:e.setCanvasBgColor,onPreview:e.setPreviewCanvasBgColor,onCancel:()=>e.setPreviewCanvasBgColor(null)})]}),l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)] pt-2",children:"Відображення в коді"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasVarName",children:"Назва полотна:"}),l.jsx("input",{id:"canvasVarName",type:"text",value:e.canvasVarName,onChange:v=>h(v.target.value),onBlur:v=>{v.target.value.trim()===""&&e.setCanvasVarName("c")},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),l.jsx("div",{className:"pl-32 -mt-3",children:l.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})})]}),t==="grid"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Налаштування сітки"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"gridSize",children:"Крок сітки:"}),l.jsx(Ce,{id:"gridSize",value:e.gridSize,onChange:e.setGridSize,min:1,step:1})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"gridSnapStep",children:"Крок прив'язки:"}),l.jsx(Ce,{id:"gridSnapStep",value:e.gridSnapStep,onChange:e.setGridSnapStep,min:1,step:1})]})]}),t==="appearance"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Інтерфейс"}),l.jsxs("div",{className:"flex items-start pt-2",children:[l.jsx("input",{id:"showTkinterNames",type:"checkbox",checked:e.showTkinterNames,onChange:v=>e.setShowTkinterNames(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("label",{htmlFor:"showTkinterNames",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати назви команд Tkinter",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:'Наприклад: "Прямокутник [rectangle]".'})]})]}),l.jsxs("div",{className:"flex items-start pt-2",children:[l.jsx("input",{id:"showAxes",type:"checkbox",checked:e.showAxes,onChange:v=>e.setShowAxes(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("label",{htmlFor:"showAxes",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати лінійки",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Відображає лінійки зліва та зверху від полотна."})]})]}),l.jsxs("div",{className:"flex items-start pt-2",children:[l.jsx("input",{id:"showCursorCoords",type:"checkbox",checked:e.showCursorCoords,onChange:v=>e.setShowCursorCoords(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("label",{htmlFor:"showCursorCoords",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати координати біля курсора",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає координати X/Y поруч з курсором."})]})]}),l.jsxs("div",{className:"flex items-start pt-2",children:[l.jsx("input",{id:"showRotationAngle",type:"checkbox",checked:e.showRotationAngle,onChange:v=>e.setShowRotationAngle(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("label",{htmlFor:"showRotationAngle",className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Показувати кут при обертанні",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Динамічно відображає кут у підказці біля курсора."})]})]})]}),t==="code"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Метод генерації"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[l.jsx("input",{type:"radio",name:"generatorType",value:"local",checked:e.generatorType==="local",onChange:()=>p("local"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Локальний генератор"}),l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Швидко, працює офлайн. Рекомендовано."})]})]}),l.jsxs("label",{className:"flex items-start p-3 rounded-lg border-2 border-transparent has-[:checked]:border-[var(--accent-primary)] has-[:checked]:bg-[var(--accent-primary)]/10 transition-colors cursor-pointer",children:[l.jsx("input",{type:"radio",name:"generatorType",value:"gemini",checked:e.generatorType==="gemini",onChange:()=>p("gemini"),className:"w-4 h-4 mt-1 text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("span",{className:"font-semibold text-sm text-[var(--text-primary)]",children:"Gemini API"}),l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Вимагає ключ API та інтернет-з'єднання."})]})]})]}),e.generatorType==="gemini"&&l.jsx("button",{onClick:e.onOpenApiKeyModal,className:"w-full text-center px-4 py-2 rounded-md font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Керувати ключем API"}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-4"}),l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Налаштування коду"}),l.jsxs("label",{htmlFor:"outlineWithFill",className:"flex items-start pt-2",children:[l.jsx("input",{id:"outlineWithFill",type:"checkbox",checked:e.outlineWithFill,onChange:v=>e.setOutlineWithFill(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:['Додавати `outline=""`',l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Для фігур із заливкою, але без контуру, щоб уникнути рамки в 1px."})]})]}),l.jsxs("label",{htmlFor:"autoGenerateComments",className:"flex items-start pt-2",children:[l.jsx("input",{id:"autoGenerateComments",type:"checkbox",checked:e.autoGenerateComments,onChange:v=>e.setAutoGenerateComments(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Автоматичні коментарі",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Додає опис для кожної фігури у коді."})]})]}),l.jsxs("label",{htmlFor:"showLineNumbers",className:"flex items-start pt-2",children:[l.jsx("input",{id:"showLineNumbers",type:"checkbox",checked:e.showLineNumbers,onChange:v=>e.setShowLineNumbers(v.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Номери рядків",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Показувати номери рядків у вікні коду."})]})]}),l.jsxs("label",{htmlFor:"highlightCodeOnSelection",className:"flex items-start pt-2 has-[:disabled]:opacity-50 has-[:disabled]:cursor-not-allowed",children:[l.jsx("input",{id:"highlightCodeOnSelection",type:"checkbox",checked:e.highlightCodeOnSelection,onChange:v=>e.setHighlightCodeOnSelection(v.target.checked),disabled:e.generatorType==="gemini",className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsxs("div",{className:"ml-3 text-sm font-medium text-[var(--text-secondary)]",children:["Підсвічувати код",l.jsx("p",{className:"text-xs text-[var(--text-tertiary)] mt-1",children:"Підсвічувати рядок коду, що відповідає вибраній фігурі."})]})]})]}),t==="templates"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-secondary)]",children:"Шаблони проєктів"}),e.templates.length>0?l.jsx("div",{className:"space-y-2",children:e.templates.map(v=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-secondary)] rounded-md",children:[i===v.id?l.jsx("input",{ref:u,type:"text",value:r,onChange:E=>c(E.target.value),onBlur:m,onKeyDown:g,className:"bg-[var(--bg-app)] text-sm text-[var(--text-primary)] p-0.5 -m-0.5 rounded outline-none ring-2 ring-[var(--accent-primary)] w-full"}):l.jsx("span",{className:"text-sm text-[var(--text-primary)] truncate",title:v.name,children:v.name}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>f(v),disabled:!!i,className:"text-xs px-2 py-1 rounded-md bg-[var(--bg-tertiary)] hover:bg-[var(--bg-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Перейменувати"}),l.jsx("button",{onClick:()=>e.onDeleteTemplate(v.id),disabled:!!i,className:"text-xs px-2 py-1 rounded-md bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Видалити"})]})]},v.id))}):l.jsx("p",{className:"text-sm text-[var(--text-tertiary)]",children:'Шаблони не збережено. Ви можете зберегти поточне полотно як шаблон через меню "Файл".'})]})]})]}),l.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end flex-shrink-0 border-t border-[var(--border-primary)]",children:l.jsx("button",{onClick:e.onClose,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})})},_i=e=>e.map(t=>`${t.x},${t.y}`).join(" "),Q3=({projectName:e,shapes:t,width:n,height:i,backgroundColor:o,onClose:r})=>{const c=d=>{if("rotation"in d&&d.rotation&&d.rotation!==0){const m=d.type==="text"?{x:d.x,y:d.y}:bt(d);if(m)return`rotate(${-d.rotation} ${m.x} ${m.y})`}},u=T.useMemo(()=>{const d=new Map;return t.forEach(m=>{if(m&&(m.type==="line"||m.type==="bezier"||m.type==="pencil"||m.type==="polyline"&&!m.isClosed)&&m.arrow&&m.arrow!=="none"&&m.stroke!=="none"&&m.strokeWidth>0&&m.arrowshape){const[g,h,p]=m.arrowshape,b=m.strokeWidth,v=g*b,E=h*b,C=p*b,x=JSON.stringify({color:m.stroke,shape:[v,E,C]});d.has(x)||d.set(x,{color:m.stroke,shapeParams:[v,E,C]})}}),Array.from(d.values())},[t]),f=d=>{const m=d.joinstyle??"miter";return{strokeLinejoin:m,strokeMiterlimit:m==="miter"?10:void 0}};return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:r,children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl flex flex-col max-w-full max-h-full",onClick:d=>d.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-2 px-4 border-b border-[var(--border-primary)] bg-[var(--bg-app)] rounded-t-lg flex-shrink-0",children:[l.jsxs("h2",{className:"text-sm font-bold text-[var(--text-primary)] truncate",title:`Попередній перегляд: ${e}`,children:["Попередній перегляд: ",e]}),l.jsx("button",{onClick:r,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:l.jsx(gt,{})})]}),l.jsx("div",{className:"p-4 bg-[var(--bg-secondary)]/50 overflow-auto",children:l.jsxs("svg",{width:n,height:i,style:{backgroundColor:o,boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},className:"rounded-md flex-shrink-0",children:[l.jsxs("defs",{children:[l.jsxs("pattern",{id:"pattern-gray12",width:"3",height:"3",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"3",height:"3",fill:"black"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray12",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray12)"})}),l.jsxs("pattern",{id:"pattern-gray25",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"black"}),l.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray25",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray25)"})}),l.jsxs("pattern",{id:"pattern-gray50",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"black"}),l.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:"white"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"white"})]}),l.jsx("mask",{id:"mask-gray50",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsxs("pattern",{id:"pattern-gray75",width:"2",height:"2",patternUnits:"userSpaceOnUse",children:[l.jsx("rect",{width:"2",height:"2",fill:"white"}),l.jsx("rect",{x:"1",y:"1",width:"1",height:"1",fill:"black"})]}),l.jsx("mask",{id:"mask-gray75",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray75)"})}),l.jsx("pattern",{id:"pattern-bitmap-error",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M0,0 L8,8 M8,0 L0,8",stroke:"currentColor",strokeWidth:"1",shapeRendering:"crispEdges"})}),l.jsx("mask",{id:"mask-bitmap-error",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-bitmap-error)"})}),l.jsx("mask",{id:"mask-bitmap-hourglass",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-info",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-questhead",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-question",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),l.jsx("mask",{id:"mask-bitmap-warning",children:l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern-gray50)"})}),u.map(({color:d,shapeParams:m})=>{const[g,h,p]=m;if(h===0||p===0)return null;const b=`${d.replace(/[^a-zA-Z0-9]/g,"")}-${g}-${h}-${p}`,v=`M 0,0 L ${-h},${p} L ${-g},0 L ${-h},${-p} Z`,E=`${-h*1.1} ${-p*1.1} ${h*1.1} ${p*2.2}`,C=h,x=p*2;return l.jsxs(St.Fragment,{children:[l.jsx("marker",{id:`arrow-end-${b}`,viewBox:E,refX:0,refY:0,markerUnits:"userSpaceOnUse",markerWidth:C,markerHeight:x,orient:"auto",children:l.jsx("path",{d:v,fill:d})}),l.jsx("marker",{id:`arrow-start-${b}`,viewBox:E,refX:0,refY:0,markerUnits:"userSpaceOnUse",markerWidth:C,markerHeight:x,orient:"auto-start-reverse",children:l.jsx("path",{d:v,fill:d})})]},b)})]}),l.jsx("rect",{x:"0",y:"0",width:n,height:i,fill:o}),t.map(d=>{if(!d||d.state==="hidden")return null;const m={stroke:d.stroke,strokeWidth:d.strokeWidth,style:{opacity:d.state==="disabled"?.5:1},transform:c(d)},g=h=>{const p=h.stroke!=="none"&&h.strokeWidth>0;let b;if("dash"in h&&h.dash&&h.dash.length>0&&h.strokeWidth>0){const w="capstyle"in h&&h.capstyle?h.capstyle:"butt";b=h.dash.map((A,D)=>D%2===0&&A<=2?w==="round"?.01:h.strokeWidth:A*h.strokeWidth).join(" ")}const E="dashoffset"in h?h.dashoffset:void 0,C=(h.capstyle==="projecting"?"square":h.capstyle)??"butt";let x,S;if(p&&h.arrow&&h.arrow!=="none"&&h.arrowshape){const[w,A,D]=h.arrowshape,_=h.strokeWidth,M=w*_,L=A*_,P=D*_,Z=`${h.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${M}-${L}-${P}`;(h.arrow==="first"||h.arrow==="both")&&(x=`url(#arrow-start-${Z})`),(h.arrow==="last"||h.arrow==="both")&&(S=`url(#arrow-end-${Z})`)}return{strokeDasharray:b,strokeDashoffset:E,markerStart:x,markerEnd:S,strokeLinecap:C}};switch(d.type){case"rectangle":{const p={...m,x:d.x,y:d.y,width:d.width,height:d.height,fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("rect",{...p},d.id)}case"ellipse":{const p=d,b={...m,cx:p.cx,cy:p.cy,rx:p.rx,ry:p.ry,fill:p.fill};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(v=>v*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),l.jsx("ellipse",{...b},p.id)}case"arc":{const p=d,b={...m,d:Of(p),fill:p.style==="arc"?"none":p.fill};return p.stipple&&p.fill!=="none"&&p.style!=="arc"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(v=>v*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),l.jsx("path",{...b},d.id)}case"line":return l.jsx("line",{...m,x1:d.points[0].x,y1:d.points[0].y,x2:d.points[1].x,y2:d.points[1].y,...g(d)},d.id);case"bezier":const h=d.isClosed?d.fill:"none";return l.jsx("path",{...m,d:Sl(d.points,d.smooth,d.isClosed),fill:h,...g(d),...f(d)},d.id);case"pencil":return l.jsx("path",{...m,d:Wf(d.points),fill:"none",strokeLinecap:"round",...f(d),...g(d)},d.id);case"polyline":{const p={...m,...f(d)};return d.stipple&&d.isClosed&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),d.isClosed?p.fill=d.fill:(p.fill="none",Object.assign(p,g(d))),d.smooth?l.jsx("path",{...p,d:Sl(d.points,!0,d.isClosed)},d.id):d.isClosed?l.jsx("polygon",{...p,points:_i(d.points)},d.id):l.jsx("polyline",{...p,points:_i(d.points),fill:"none"},d.id)}case"triangle":{const p={...m,points:_i(ls(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("polygon",{...p},d.id)}case"right-triangle":{const p={...m,points:_i(Yf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("polygon",{...p},d.id)}case"rhombus":{const p={...m,points:_i(Jf(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("polygon",{...p},d.id)}case"trapezoid":{const p={...m,points:_i(bc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("polygon",{...p},d.id)}case"parallelogram":{const p={...m,points:_i(Cc(d)),fill:d.fill,...f(d)};return d.stipple&&d.fill!=="none"&&(p.mask=`url(#mask-${d.stipple})`),d.dash&&(p.strokeDasharray=d.dash.map(b=>b*d.strokeWidth).join(" ")),d.dashoffset&&(p.strokeDashoffset=d.dashoffset),l.jsx("polygon",{...p},d.id)}case"polygon":case"star":{const p=d,b={...m,fill:p.fill,...f(p)};return p.stipple&&p.fill!=="none"&&(b.mask=`url(#mask-${p.stipple})`),p.dash&&(b.strokeDasharray=p.dash.map(v=>v*p.strokeWidth).join(" ")),p.dashoffset&&(b.strokeDashoffset=p.dashoffset),p.smooth?l.jsx("path",{...b,d:Sl(ti(d),!0,!0)},d.id):l.jsx("polygon",{...b,points:_i(Bl(d))},d.id)}case"text":{const p=d,{font:b,fontSize:v,weight:E,slant:C,underline:x,overstrike:S,fill:w,justify:A}=p,D=Tc(p),_=to(p);if(!_)return null;const M=A==="center"?"middle":A==="right"?"end":"start";let L;M==="start"?L=_.x:M==="middle"?L=_.x+_.width/2:L=_.x+_.width,p.width>0&&(M==="middle"?L=_.x+p.width/2:M==="end"?L=_.x+p.width:L=_.x);const P={fontFamily:Sc(b),fontSize:v,fontWeight:E,fontStyle:C==="italic"?"italic":"normal",textDecoration:`${x?"underline":""} ${S?"line-through":""}`.trim(),whiteSpace:"pre"};return l.jsx("text",{...m,x:L,y:_.y,fill:w,textAnchor:M,dominantBaseline:"hanging",style:{...m.style,...P},children:D.map((Z,pe)=>l.jsx("tspan",{x:L,dy:pe===0?0:`${v*1.2}px`,children:Z},pe))},p.id)}case"image":{const p=d;return l.jsx("image",{href:p.src,x:p.x,y:p.y,width:p.width,height:p.height,...m},p.id)}case"bitmap":{const p=d,{x:b,y:v,width:E,height:C,bitmapType:x,foreground:S,background:w}=p,A=x.startsWith("gray")?`url(#mask-${x})`:`url(#mask-bitmap-${x})`;return l.jsxs("g",{...m,children:[l.jsx("rect",{x:b,y:v,width:E,height:C,fill:w}),l.jsx("rect",{x:b,y:v,width:E,height:C,fill:S,mask:A})]},p.id)}default:return null}})]})})]})})},e4=({onClose:e,onExport:t})=>{const[n,i]=T.useState("png"),[o,r]=T.useState(1),[c,u]=T.useState(90),f=()=>{t({format:n,scale:o,quality:c})},d=({value:m,label:g})=>l.jsx("button",{onClick:()=>i(m),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition ${n===m?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:g});return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:m=>m.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Експортувати зображення"}),l.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx(ae,{htmlFor:"format-group",title:"Оберіть формат файлу для експорту.",children:"Формат:"}),l.jsxs("div",{id:"format-group",className:"flex items-center gap-2 mt-2 p-1 bg-[var(--bg-app)] rounded-lg",children:[l.jsx(d,{value:"svg",label:"SVG"}),l.jsx(d,{value:"png",label:"PNG"}),l.jsx(d,{value:"jpeg",label:"JPEG"})]})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"export-scale",title:"Множник розміру зображення. 2x зробить зображення вдвічі більшим.",children:"Масштаб:"}),l.jsx(Ce,{id:"export-scale",value:o,onChange:r,min:.1,max:10,step:.1})]}),n==="jpeg"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"export-quality",title:"Якість стиснення JPEG від 0 (низька) до 100 (висока).",children:"Якість:"}),l.jsx(Ce,{id:"export-quality",value:c,onChange:u,min:0,max:100,step:1})]}),l.jsx("div",{className:"flex items-center gap-2 ml-32",children:l.jsx("input",{type:"range",min:"0",max:"100",value:c,onChange:m=>u(Number(m.target.value)),className:"w-full h-2 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer"})})]})]}),l.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end",children:l.jsx("button",{onClick:f,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Експорт"})})]})})},t4=({onClose:e,onCreate:t,initialSettings:n,templates:i})=>{const[o,r]=T.useState((i.length>0,"blank")),[c,u]=T.useState(""),[f,d]=T.useState(n.width),[m,g]=T.useState(n.height),[h,p]=T.useState(n.bgColor),[b,v]=T.useState(n.canvasVarName);T.useEffect(()=>{if(o==="blank")u(n.projectName),d(n.width),g(n.height),p(n.bgColor),v(n.canvasVarName);else{const x=i.find(S=>S.id===o);if(x){const{settings:S}=x;u(S.projectName),d(S.width),g(S.height),p(S.bgColor),v(S.canvasVarName)}}},[o,i,n]);const E=()=>{t({projectName:c,width:f,height:m,bgColor:h,canvasVarName:b.trim()||"c"},o==="blank"?null:o)},C=x=>{let S=x.replace(/[^a-zA-Z0-9_]/g,"");/^[0-9]/.test(S)&&(S="_"+S),v(S)};return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:x=>x.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Новий проєкт"}),l.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[i.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"template-selection",children:"Створити з:"}),l.jsxs(fn,{id:"template-selection",value:o,onChange:r,children:[l.jsx("option",{value:"blank",children:"Чисте полотно"}),l.jsx("optgroup",{label:"Ваші шаблони",children:i.map(x=>l.jsxs("option",{value:x.id,children:[x.name," (",x.settings.width,"x",x.settings.height,", ",x.shapes.length," об.)"]},x.id))})]})]}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-2"})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"projectName",children:"Назва проєкту:"}),l.jsx("input",{id:"projectName",type:"text",value:c,onChange:x=>u(x.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]}),l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-tertiary)] pt-2",children:"Налаштування полотна"}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasWidth",children:"Ширина:"}),l.jsx(Ce,{id:"canvasWidth",value:f,onChange:d,min:100,step:10})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasHeight",children:"Висота:"}),l.jsx(Ce,{id:"canvasHeight",value:m,onChange:g,min:100,step:10})]}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasVarName",children:"Назва полотна:"}),l.jsx("input",{id:"canvasVarName",type:"text",value:b,onChange:x=>C(x.target.value),className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none"})]}),l.jsx("div",{className:"pl-28 -mt-3",children:l.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:'(Лише латинські літери, цифри та "_". Не може починатись з цифри)'})}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"canvasBgColor",children:"Колір тла:"}),l.jsx(Jt,{id:"canvasBgColor",value:h,onChange:p,onPreview:()=>{},onCancel:()=>{}})]})]}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:E,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Створити"})]})]})})},n4=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,r]=T.useState(i),c=()=>{o.trim()&&n(o.trim())};return e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:u=>u.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як..."}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"newProjectName",children:"Назва проєкту:"}),l.jsx("input",{id:"newProjectName",type:"text",value:o,onChange:u=>r(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:c,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},i4=({isOpen:e,onClose:t,version:n})=>e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:i=>i.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:'Про редактор "ВереTkа"'}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-6 space-y-4 text-sm text-[var(--text-secondary)]",children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це простий векторний редактор, призначений для швидкого створення графічних примітивів та генерації відповідного Python коду для бібліотеки Tkinter."]}),l.jsx("p",{children:"Він використовує локальний генератор коду для миттєвого та надійного результату, а також може використовувати Google Gemini API для експериментальних можливостей."}),l.jsx("hr",{className:"border-[var(--border-secondary)]"}),l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Ідея та розробка:"})," Віталій Кушнір"]}),l.jsxs("p",{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Підтримка:"})," AI-асистент на базі Google Gemini."]}),l.jsxs("p",{className:"mt-2",children:["Створено за допомогою ",l.jsx("a",{href:"https://aistudio.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"AI Studio Google"}),"."]})]}),l.jsxs("p",{className:"text-xs text-center text-[var(--text-tertiary)] pt-4",children:["Версія ",n]})]}),l.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Закрити"})})]})}):null,o4=(e,t)=>{const[n,i]=T.useState(e);return T.useEffect(()=>{const o=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(o)}},[e,t]),n},l4=({isOpen:e,onClose:t})=>{if(!e)return null;const n=T.useRef(null),[i,o]=T.useState(""),r=o4(i,300),[c,u]=T.useState(0),[f,d]=T.useState(-1),m=.875,g=m*.75,h=m*2,p=m*.05,[b,v]=T.useState(m),E=[{id:"intro",title:"1. Вступ"},{id:"interface",title:"2. Огляд інтерфейсу"},{id:"projects",title:"3. Робота з проєктами"},{id:"templates",title:"4. Робота з шаблонами"},{id:"shapes",title:"5. Робота з об'єктами"},{id:"code-export",title:"6. Код та експорт"},{id:"feedback",title:"7. Зворотний зв'язок"},{id:"hotkeys",title:"8. Гарячі клавіші"}],C=(P,Z)=>{var Te;P.preventDefault();const pe=(Te=n.current)==null?void 0:Te.querySelector(`#${Z}`);pe&&pe.scrollIntoView({behavior:"smooth",block:"start"})};T.useEffect(()=>{if(!n.current)return;if(!r.trim()){u(0),d(-1);return}const P=n.current.querySelectorAll("mark");u(P.length),d(P.length>0?0:-1)},[r]),T.useEffect(()=>{if(!n.current||f===-1)return;const P=Array.from(n.current.querySelectorAll("mark"));P.length!==0&&P.forEach((Z,pe)=>{pe===f?(Z.classList.add("bg-orange-500","text-white"),Z.classList.remove("bg-yellow-400/80","text-black"),Z.scrollIntoView({behavior:"smooth",block:"center"})):(Z.classList.remove("bg-orange-500","text-white"),Z.classList.add("bg-yellow-400/80","text-black"))})},[f,r]);const x=()=>{c!==0&&d(P=>(P+1)%c)},S=()=>{c!==0&&d(P=>(P-1+c)%c)},w=(P,Z)=>{if(typeof P=="string")return Z.trim()?P.split(new RegExp(`(${Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((Te,_e)=>Te.toLowerCase()===Z.toLowerCase()?l.jsx("mark",{className:"bg-yellow-400/80 text-black px-0.5 rounded-sm",children:Te},_e):Te):P;if(St.isValidElement(P)){const pe=P;if(pe.props.children)return St.cloneElement(pe,{...pe.props,children:St.Children.map(pe.props.children,Te=>w(Te,Z))})}return Array.isArray(P)?P.map((pe,Te)=>l.jsx(St.Fragment,{children:w(pe,Z)},Te)):P},A=({id:P,children:Z})=>l.jsx("h2",{id:P,className:"text-xl font-bold text-[var(--text-primary)] mt-6 mb-3 pb-2 border-b border-[var(--border-secondary)] scroll-mt-4",children:w(Z,r)}),D=({children:P})=>l.jsx("h3",{className:"text-md font-semibold text-[var(--text-primary)] mt-4 mb-2",children:w(P,r)}),_=({children:P})=>l.jsx("p",{className:"mb-2 leading-relaxed",children:w(P,r)}),M=({children:P})=>l.jsx("code",{className:"bg-[var(--bg-tertiary)] text-[var(--text-primary)] px-1.5 py-0.5 rounded-md font-mono",style:{fontSize:"0.9em"},children:P}),L=({children:P})=>l.jsx("li",{className:"mb-2 pl-2",children:w(P,r)});return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col",onClick:P=>P.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0 gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)] whitespace-nowrap",children:"Довідка та інструкції"}),l.jsxs("div",{className:"flex-grow max-w-sm relative",children:[l.jsx("input",{type:"text",placeholder:"Пошук у довідці...",value:i,onChange:P=>o(P.target.value),className:"w-full px-3 py-1.5 bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-md border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-28"}),l.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 h-full flex items-center gap-1 bg-[var(--bg-secondary)] pl-2",children:[i&&l.jsx("button",{onClick:()=>o(""),className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:"Очистити пошук","aria-label":"Очистити пошук",children:l.jsx(gt,{size:16})}),r.trim()&&l.jsxs(l.Fragment,{children:[i&&l.jsx("div",{className:"w-px h-4 bg-[var(--border-secondary)]"}),l.jsx("div",{className:"flex items-center text-xs text-[var(--text-tertiary)]",children:c>0?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-mono",children:[f+1,"/",c]}),l.jsx("button",{onClick:S,className:"p-1 hover:text-[var(--text-primary)]",title:"Попередній","aria-label":"Попередній результат",children:"▲"}),l.jsx("button",{onClick:x,className:"p-1 hover:text-[var(--text-primary)]",title:"Наступний","aria-label":"Наступний результат",children:"▼"})]}):l.jsx("span",{className:"px-1",children:"Не знайдено"})})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-secondary)]",title:"Масштаб тексту довідки",children:[l.jsx("span",{className:"text-xs cursor-pointer hover:text-[var(--text-primary)]",title:"Зменшити шрифт на 5%",onClick:()=>v(P=>Math.max(g,P-p)),children:"А"}),l.jsx("input",{id:"zoom-slider",type:"range",min:g,max:h,step:"0.01",value:b,onChange:P=>v(parseFloat(P.target.value)),className:"w-20 h-1 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--accent-primary)]",title:"Змінити розмір шрифту довідки"}),l.jsx("span",{className:"text-lg cursor-pointer hover:text-[var(--text-primary)]",title:"Збільшити шрифт на 5%",onClick:()=>v(P=>Math.min(h,P+p)),children:"А"}),l.jsxs("button",{onClick:()=>v(m),className:"w-12 text-center text-xs font-mono hover:text-[var(--text-primary)] transition-colors",title:"Скинути масштаб до 100%",children:[Math.round(b/m*100),"%"]})]}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"flex flex-grow min-h-0",children:[l.jsx("nav",{className:"w-64 flex-shrink-0 border-r border-[var(--border-secondary)] p-4 overflow-y-auto",children:l.jsx("ul",{className:"space-y-1",children:E.map(P=>l.jsx("li",{children:l.jsx("a",{href:`#${P.id}`,onClick:Z=>C(Z,P.id),className:"block p-2 rounded-md text-sm text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:P.title})},P.id))})}),l.jsxs("div",{ref:n,className:"flex-grow p-6 text-[var(--text-secondary)] overflow-y-auto scroll-smooth allow-selection",style:{fontSize:`${b}rem`},children:[l.jsxs("section",{children:[l.jsx(A,{id:"intro",children:"1. Вступ"}),l.jsxs(_,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"ВереTkа"})," — це простий веб-інструмент, розроблений для візуального створення графічних елементів та автоматичної генерації коду для бібліотеки Tkinter у Python. Редактор слугує мостом між дизайном та розробкою, дозволяючи швидко прототипувати, створювати складні сцени та отримувати чистий, готовий до використання код."]}),l.jsx(_,{children:"Ця інструкція допоможе вам освоїти всі можливості редактора, від базових операцій до просунутих технік."})]}),l.jsxs("section",{children:[l.jsx(A,{id:"interface",children:"2. Огляд інтерфейсу"}),l.jsx(_,{children:"Інтерфейс редактора логічно поділений на функціональні зони для максимальної зручності:"}),l.jsxs("ul",{className:"list-decimal list-inside space-y-3 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Головне меню:"})," Розташоване у верхній частині, надає доступ до глобальних операцій: керування файлами (",l.jsx(M,{children:"Файл"}),"), історія змін та робота з буфером обміну (",l.jsx(M,{children:"Редагувати"}),"), операції над об'єктами (",l.jsx(M,{children:"Об'єкт"}),"), налаштування видимості (",l.jsx(M,{children:"Вигляд"}),") та довідкова інформація (",l.jsx(M,{children:"Довідка"}),"). Праворуч у меню розташовані кнопки для швидкої зміни теми, переходу в повноекранний режим та виклику вікна налаштувань."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Панелі інструментів:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Верхня панель:"})," Динамічна панель, що відображає налаштування для активного інструмента (наприклад, колір заливки для прямокутника) або властивості виділеного об'єкта. Це дозволяє швидко змінювати параметри, не звертаючись до правої панелі."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ліва панель:"})," Основний набір інструментів для створення фігур. Згруповані за типом: примітиви, лінії та криві, багатокутники та інше."]})]})]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Робоча область (Полотно):"})," Центральна частина, де ви малюєте та редагуєте об'єкти. Полотно має налаштовуваний розмір та колір тла. Навколо нього можуть бути розташовані лінійки для точного позиціонування. При масштабі понад 1000% з'являється додаткова, світліша сітка з кроком в 1 піксель для надточного вирівнювання."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:'Панель "Код Tkinter":'})," Знаходиться зліва під панеллю інструментів. Тут у реальному часі (при використанні локального генератора) відображається Python-код, що відповідає вашому малюнку. Має кнопки для копіювання, попереднього перегляду та оновлення коду."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:`Праві панелі ("Об'єкти" та "Властивості"):`}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-6 mt-1",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Список об'єктів:"})," Ієрархічний список усіх фігур на полотні. Тут ви можете змінювати їх порядок (шари), перейменовувати, приховувати та блокувати."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Редактор властивостей:"})," Детальна панель для налаштування параметрів виділеного об'єкта: координати, розміри, кольори, товщина контуру, специфічні атрибути (наприклад, кількість сторін у багатокутника) та вузлові точки для контурів."]})]})]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Рядок стану:"})," Нижня панель, що відображає поточний рівень масштабування та координати курсора на полотні. Клацніть на відсотковому значенні масштабу, щоб вручну ввести точне значення за допомогою поля вводу та стрілок."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Вікно довідки:"})," Має власні елементи керування у заголовку: поле для пошуку по тексту та повзунок для масштабування розміру шрифту (від 75% до 200%). Для зручності, зліва від повзунка є маленька літера 'А', а справа — велика, натискання на які змінює масштаб на 5%. Клацання на відсотковому значенні миттєво повертає масштаб до стандартних 100%."]})]}),l.jsx(D,{children:"Повноекранний режим"}),l.jsxs(_,{children:["Для максимального занурення в роботу ви можете увімкнути повноекранний режим через меню ",l.jsx(M,{children:"Вигляд"})," → ",l.jsx(M,{children:"Повноекранний режим"})," або натиснувши клавішу ",l.jsx(M,{children:"F11"}),". Це приховає інтерфейс браузера, надавши більше простору для творчості."]}),l.jsxs(_,{children:["Щоб вийти з цього режиму, натисніть ",l.jsx(M,{children:"F11"})," ще раз. Клавіша ",l.jsx(M,{children:"Escape (Esc)"})," повністю заблокована у повноекранному режимі, щоб запобігти випадковому виходу."]})]}),l.jsxs("section",{children:[l.jsx(A,{id:"projects",children:"3. Робота з проєктами"}),l.jsx(D,{children:"Створення нового проєкту"}),l.jsxs(_,{children:["Ви можете створити новий проєкт через меню ",l.jsx(M,{children:"Файл"})," → ",l.jsx(M,{children:"Новий проєкт..."})," або з головного екрана. У вікні створення можна налаштувати назву, розміри та колір тла полотна, а також назву змінної для Tkinter Canvas у коді."]}),l.jsx(D,{children:"Збереження та завантаження"}),l.jsxs(_,{children:["Проєкти зберігаються у форматі ",l.jsx(M,{children:".vec.json"})," — це текстовий файл, що містить повну інформацію про всі об'єкти, налаштування полотна та інтерфейсу."]}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx(M,{children:"Зберегти"})," (",l.jsx(M,{children:"Ctrl+S"}),'): Зберігає поточні зміни у відкритий файл. Якщо проєкт новий, відкриється діалог "Зберегти як...".']}),l.jsxs(L,{children:[l.jsx(M,{children:"Зберегти як..."}),": Дозволяє зберегти проєкт у новий файл, можливо, з іншою назвою."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Завантажити проєкт..."}),": Відкриває діалогове вікно для вибору та завантаження файлу ",l.jsx(M,{children:".vec.json"}),"."]})]}),l.jsx(_,{children:"Редактор також веде список останніх відкритих проєктів, доступний на головному екрані для швидкого доступу."}),l.jsx(D,{children:"Повернення до активного проєкту"}),l.jsxs(_,{children:["Якщо ви перейшли на головний екран, не зберігши поточний проєкт, редактор не видаляє вашу роботу. На головному екрані з'явиться кнопка ",l.jsx("strong",{className:"text-[var(--text-primary)]",children:'"Повернутися до проєкту"'}),", яка дозволить вам миттєво продовжити редагування з того місця, де ви зупинилися. Це запобігає випадковій втраті незбережених змін."]}),l.jsx(D,{children:"Автозбереження та відновлення"}),l.jsx(_,{children:"Щоб запобігти втраті роботи, редактор автоматично зберігає поточний стан вашого проєкту кожні 2 хвилини, якщо є незбережені зміни. Ця резервна копія зберігається локально у вашому браузері."}),l.jsx(_,{children:"Якщо ви випадково закриєте вкладку або браузер, при наступному запуску редактора на головному екрані з'явиться банер із пропозицією відновити автозбережену сесію. Ви можете відновити роботу або відхилити пропозицію, видаливши резервну копію."}),l.jsxs(_,{children:["Автозбережена версія автоматично видаляється після успішного ручного збереження проєкту (",l.jsx(M,{children:"Зберегти"}),", ",l.jsx(M,{children:"Зберегти як..."}),"), створення нового проєкту або повного очищення полотна."]})]}),l.jsxs("section",{children:[l.jsx(A,{id:"templates",children:"4. Робота з шаблонами"}),l.jsx(D,{children:"Призначення та переваги"}),l.jsx(_,{children:"Шаблони — це потужний інструмент для стандартизації та прискорення вашої роботи. Шаблон зберігає повний стан поточного проєкту: розміри та колір полотна, налаштування сітки, а також усі намальовані об'єкти."}),l.jsx(_,{children:"Використання шаблонів є корисним, якщо ви:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsx(L,{children:"Часто створюєте проєкти з однаковими налаштуваннями полотна."}),l.jsx(L,{children:"Хочете мати стартовий набір об'єктів (наприклад, фірмовий логотип, рамку, сітку координат)."}),l.jsx(L,{children:"Розробляєте серію ілюстрацій в єдиному стилі."})]}),l.jsx(D,{children:"Створення та використання"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Створення:"})," Налаштуйте полотно та намалюйте потрібні об'єкти. Потім перейдіть до меню ",l.jsx(M,{children:"Файл"})," → ",l.jsx(M,{children:"Зберегти як шаблон..."}),". Введіть зрозумілу назву для шаблону та збережіть."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Використання:"})," При створенні нового проєкту (",l.jsx(M,{children:"Файл"})," → ",l.jsx(M,{children:"Новий проєкт..."}),`) у модальному вікні з'явиться випадаючий список "Створити з:". Виберіть потрібний шаблон зі списку. Усі налаштування та об'єкти з шаблону будуть автоматично застосовані до нового проєкту.`]})]}),l.jsx(D,{children:"Керування шаблонами"}),l.jsxs(_,{children:["Ви можете керувати вашими шаблонами у вікні налаштувань. Перейдіть до ",l.jsx(M,{children:"Налаштування"})," (у правому верхньому куті) та відкрийте вкладку ",l.jsx(M,{children:"Шаблони"}),". Тут ви можете перейменовувати або видаляти непотрібні шаблони."]}),l.jsx(D,{children:"Де зберігаються шаблони?"}),l.jsxs(_,{children:["Шаблони зберігаються локально у вашому браузері за допомогою технології ",l.jsx(M,{children:"localStorage"}),". Це означає, що вони доступні лише на тому пристрої та в тому браузері, де були створені."]}),l.jsxs(_,{children:[l.jsx("strong",{className:"text-[var(--destructive-text)]",children:"Увага:"})," Якщо ви очистите дані сайту (кеш, cookies) у налаштуваннях браузера, ваші шаблони буде видалено."]})]}),l.jsxs("section",{children:[l.jsx(A,{id:"shapes",children:"5. Робота з об'єктами"}),l.jsx(D,{children:"Створення об'єктів"}),l.jsxs(_,{children:["Виберіть інструмент на лівій панелі та клацніть на полотні, щоб почати малювати. Для більшості фігур потрібно затиснути ліву кнопку миші та потягнути, щоб визначити розмір. Інструменти, як-от ",l.jsx(M,{children:"Ламана"})," та ",l.jsx(M,{children:"Крива Без'є"}),", вимагають послідовних клацань для додавання вузлів."]}),l.jsxs(_,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Порада:"})," Утримуйте клавішу ",l.jsx(M,{children:"Shift"})," під час малювання, щоб отримати фігури з однаковими візуальними шириною та висотою (наприклад при малюванні прямокутника або еліпса, щоб створити ідеальний квадрат або коло відповідно)."]}),l.jsx(D,{children:"Виділення та трансформація"}),l.jsxs(_,{children:["Використовуйте інструмент ",l.jsx(M,{children:"Вибрати"})," (гаряча клавіша ",l.jsx(M,{children:"V"}),"), щоб виділяти об'єкти. Навколо виділеного об'єкта з'явиться рамка з маніпуляторами:"]}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Переміщення:"})," Затисніть ліву кнопку миші на самому об'єкті та перетягуйте. Утримуйте ",l.jsx(M,{children:"Shift"})," під час переміщення, щоб заблокувати рух по горизонтальній або вертикальній осі. Це також працює при дублюванні об'єкта правою кнопкою миші."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Масштабування:"})," Потягніть за квадратні маніпулятори на кутах або сторонах рамки. Утримуйте ",l.jsx(M,{children:"Shift"})," для збереження пропорцій."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Обертання:"})," Потягніть за круглий маніпулятор, що знаходиться над рамкою."]})]}),l.jsx(D,{children:"Редагування вузлів"}),l.jsxs(_,{children:["Для контурних об'єктів (лінії, полігони, криві) доступний режим редагування вузлів (гаряча клавіша ",l.jsx(M,{children:"A"}),"). У цьому режимі ви можете переміщувати окремі вузлові точки, додавати нові (клацаючи на сегменті між точками) або видаляти існуючі (",l.jsx(M,{children:"Delete"})," або ",l.jsx(M,{children:"Backspace"})," на виділеному вузлі)."]}),l.jsx(D,{children:"Вибір кольору"}),l.jsx(_,{children:'Редактор "ВереTkа" надає потужний та гнучкий інструмент для роботи з кольорами, який поєднує зручність та відповідність стандартам Tkinter. Елемент вибору кольору складається з кількох частин:'}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Зразок кольору:"})," Квадратик, що відображає поточний колір. Клацання по ньому відкриває стандартну системну палітру кольорів."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Поле вводу:"})," Дозволяє вводити назву кольору (напр., ",l.jsx(M,{children:"Red"}),") або його HEX-код (напр., ",l.jsx(M,{children:"#ff0000"}),"). Поле має валідацію, що запобігає вводу некоректних символів."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Кнопки Підтвердити (✓) та Скасувати (X):"})," Будь-яка зміна кольору є попереднім переглядом. Щоб застосувати зміну, натисніть галочку або клавішу ",l.jsx(M,{children:"Enter"}),". Щоб скасувати, натисніть хрестик або ",l.jsx(M,{children:"Escape"}),"."]})]}),l.jsx(D,{children:"Списки кольорів"}),l.jsx(_,{children:"При фокусуванні на полі вводу з'являється випадаючий список з двома рівнями доступу до кольорів:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Основний список:"})," Містить набір найпоширеніших веб-кольорів, які гарантовано коректно відображаються у браузері. Поруч з назвою для зручності вказано HEX-код, вирівняний по правому краю."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Усі кольори Tkinter:"})," Натиснувши на посилання ",l.jsx(M,{children:"Усі кольори Tk..."})," внизу списку, ви відкриєте модальне вікно з повною палітрою з понад 700 кольорів, які підтримує Tkinter. У цьому вікні ви можете:",l.jsxs("ul",{className:"list-circle list-inside space-y-1 pl-6 mt-1",children:[l.jsx(L,{children:"Переглядати зразки кольорів разом з їх назвою та HEX-кодом."}),l.jsx(L,{children:"Шукати колір за назвою або HEX-кодом."}),l.jsx(L,{children:"Сортувати список за групами (стандартний вигляд), за алфавітом або за HEX-кодом."}),l.jsx(L,{children:'Очищувати поле пошуку за допомогою іконки "х".'})]})]})]}),l.jsx(D,{children:"Сумісність кольорів"}),l.jsx(_,{children:"Бібліотека Tkinter та веб-браузери підтримують різні набори іменованих кольорів. Редактор обробляє цю різницю наступним чином:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Веб-сумісні кольори:"})," Якщо ви обираєте колір, назва якого підтримується браузерами (наприклад, ",l.jsx(M,{children:"SteelBlue"}),"), редактор збереже саме назву. Вона буде відображатися в полі та використовуватиметься у згенерованому коді."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Специфічні кольори Tkinter:"})," Якщо ви обираєте колір, який є лише в Tkinter (напр., ",l.jsx(M,{children:"IndianRed4"}),"), з'явиться діалогове вікно. Воно пояснить, що цей колір може некоректно відображатися в редакторі (чорним кольором), і запропонує вибір:",l.jsxs("ul",{className:"list-circle list-inside space-y-1 pl-6 mt-1",children:[l.jsxs(L,{children:[l.jsx(M,{children:"Зберегти назву"}),": у коді Tkinter буде використано назву, але в редакторі вигляд може бути неправильним."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Перетворити на HEX"}),": колір буде збережено як HEX-код, що гарантує однакове відображення всюди."]})]})]})]}),l.jsxs(_,{children:["Також важливо знати, що деякі базові назви (напр., ",l.jsx(M,{children:"Maroon"}),", ",l.jsx(M,{children:"Green"}),") мають різні HEX-коди у веб-стандарті та у Tkinter. Редактор використовує офіційні значення Tkinter для генерації коду, щоб гарантувати повну відповідність результату."]}),l.jsx(D,{children:"Порядок (Шари)"}),l.jsx(_,{children:"Усі об'єкти розташовані у списку на правій панелі. Цей список визначає порядок їх відображення: об'єкти, що знаходяться вище у списку, будуть намальовані поверх тих, що нижче. Ви можете змінювати порядок, перетягуючи елементи у списку або використовуючи іконки-стрілочки, що з'являються при наведенні."})]}),l.jsxs("section",{children:[l.jsx(A,{id:"code-export",children:"6. Код та експорт"}),l.jsx(D,{children:"Генерація коду"}),l.jsx(_,{children:'Панель "Код Tkinter" автоматично оновлює код при будь-яких змінах на полотні (якщо ввімкнено локальний генератор). Якщо ви використовуєте Gemini API, натисніть кнопку "Згенерувати код", щоб надіслати запит.'}),l.jsx(_,{children:"Згенерований код є повністю самодостатнім Python-скриптом. Ви можете скопіювати його, зберегти у файл або одразу відкрити та запустити в онлайн-середовищі ЄPython."}),l.jsx(D,{children:"Збереження коду у файл"}),l.jsxs(_,{children:["Щоб зберегти згенерований код, скористайтеся опцією ",l.jsx(M,{children:"Зберегти у файл..."})," у випадаючому меню (",l.jsx(M,{children:"..."}),') на панелі "Код Tkinter". Відкриється модальне вікно, де ви можете налаштувати збереження.']}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Назва файлу та розширення:"})," Введіть бажану назву для файлу. Праворуч від поля вводу ви можете вибрати розширення:",l.jsxs("ul",{className:"list-circle list-inside space-y-1 pl-6 mt-1",children:[l.jsxs(L,{children:[l.jsx(M,{children:".py"})," — стандартний формат для Python-скриптів. Файл можна буде виконати. Це опція за замовчуванням."]}),l.jsxs(L,{children:[l.jsx(M,{children:".txt"})," — звичайний текстовий файл. Корисний для перегляду коду, документування або коли виконання не потрібне."]})]})]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Зберігати із номерами рядків:"})," Ця опція з'являється лише при виборі розширення ",l.jsx(M,{children:".txt"}),". Якщо її увімкнути, кожний рядок у збереженому текстовому файлі буде починатися з номера рядка та розділювача (",l.jsx(M,{children:"|"}),"), що може бути зручно для аналізу або обговорення коду."]})]}),l.jsx(D,{children:"Експорт зображень"}),l.jsxs(_,{children:["Ви можете експортувати ваш малюнок у растрових (",l.jsx(M,{children:"PNG"}),", ",l.jsx(M,{children:"JPEG"}),") або векторному (",l.jsx(M,{children:"SVG"}),") форматах. Для цього перейдіть до меню ",l.jsx(M,{children:"Файл"})," → ",l.jsx(M,{children:"Експортувати як..."}),". У вікні експорту можна налаштувати формат, масштаб та якість (для JPEG)."]})]}),l.jsxs("section",{children:[l.jsx(A,{id:"feedback",children:"7. Зворотний зв'язок"}),l.jsx(_,{children:'Ваш відгук є надзвичайно важливим для подальшого розвитку редактора "ВереTkа". Ви можете легко повідомити про помилку, запропонувати нову функцію або просто поділитися враженнями через спеціальну форму.'}),l.jsx(D,{children:"Як залишити відгук"}),l.jsxs(_,{children:["Щоб відкрити вікно для відгуку, перейдіть до головного меню та виберіть ",l.jsx(M,{children:"Довідка"})," → ",l.jsx(M,{children:"Залишити відгук"}),". У модальному вікні, що з'явиться, буде кнопка для переходу до Google Форми."]}),l.jsx(D,{children:"Автоматична передача даних"}),l.jsx(_,{children:"Для того, щоб зробити процес повідомлення про помилки максимально ефективним, редактор автоматично додає до вашого відгуку деяку технічну інформацію. Це допомагає розробнику швидше зрозуміти проблему та знайти її причину."}),l.jsx(_,{children:"Автоматично передаються наступні дані:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Версія редактора:"}),' Точна версія "ВереTkа", яку ви використовуєте (напр., 1.0.3).']}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Операційна система:"})," Ваша ОС та її версія (напр., Windows 10, macOS Sonoma)."]}),l.jsxs(L,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Веб-браузер:"})," Назва та версія вашого браузера (напр., Chrome 126, Firefox 127)."]})]}),l.jsxs(_,{children:[l.jsx("strong",{className:"text-[var(--text-primary)]",children:"Примітка про приватність:"})," Ця інформація не містить жодних особистих даних і використовується виключно для технічних цілей діагностики помилок."]})]}),l.jsxs("section",{children:[l.jsx(A,{id:"hotkeys",children:"8. Гарячі клавіші"}),l.jsx(_,{children:"Використовуйте ці комбінації для прискорення робочого процесу."}),l.jsx(D,{children:"Робота з файлами та історією"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx(M,{children:"Ctrl+S"})," — Зберегти проєкт."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Ctrl+Z"})," — Скасувати останню дію."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Ctrl+Y"})," (або ",l.jsx(M,{children:"Ctrl+Shift+Z"}),") — Повернути скасовану дію."]})]}),l.jsx(D,{children:"Інструменти та виділення"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx(M,{children:"V"}),' — Активувати інструмент "Вибрати".']}),l.jsxs(L,{children:[l.jsx(M,{children:"A"}),' — Активувати інструмент "Редагувати вузли".']}),l.jsxs(L,{children:[l.jsx(M,{children:"Ctrl+D"})," — Дублювати виділений об'єкт."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Delete"})," / ",l.jsx(M,{children:"Backspace"})," — Видалити виділений об'єкт або вузол."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Стрілки"})," — Перемістити виділений об'єкт на 1 піксель."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Shift + Стрілки"})," — Перемістити виділений об'єкт на 10 пікселів."]})]}),l.jsx(D,{children:"Навігація та Загальне"}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-2",children:[l.jsxs(L,{children:[l.jsx(M,{children:"Коліщатко миші"})," — Масштабування полотна."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Середня кнопка (коліщатко) миші (натиснути й тягнути)"})," — Панорамування полотна."]}),l.jsxs(L,{children:[l.jsx(M,{children:"F11"})," — Вхід / вихід з повноекранного режиму."]}),l.jsxs(L,{children:[l.jsx(M,{children:"Escape (Esc)"})," — Скасовує поточну дію (наприклад, малювання полілінії), знімає виділення з об'єкта або закриває активні модальні вікна. У повноекранному режимі ця клавіша заблокована, щоб запобігти випадковому виходу."]})]})]})]})]})]})})},r4=({isOpen:e,onClose:t,onSave:n,currentApiKey:i})=>{const[o,r]=T.useState(i||""),[c,u]=T.useState(!1),[f,d]=T.useState(!1);T.useEffect(()=>{e&&(r(i||""),d(!1))},[e,i]);const m=()=>{n(o.trim()===""?null:o.trim()),t()},g=()=>{r(""),n(null),t()};return e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",onClick:h=>h.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Керування ключем Gemini API"}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:f?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>d(!1),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline mb-4",children:"← Повернутися до введення ключа"}),l.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:"Як отримати ключ Gemini API"}),l.jsxs("div",{className:"space-y-3 text-sm text-[var(--text-secondary)]",children:[l.jsx("p",{children:"Ви можете безкоштовно отримати ключ API для доступу до моделей Gemini у Google AI Studio."}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 pl-2",children:[l.jsxs("li",{children:["Перейдіть на сайт ",l.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)]",children:"Google AI Studio"}),"."]}),l.jsx("li",{children:"Увійдіть за допомогою вашого Google акаунту."}),l.jsxs("li",{children:["На сторінці, що відкриється, натисніть на кнопку ",l.jsx("strong",{children:'"Create API key in new project"'}),"."]}),l.jsx("li",{children:"Через декілька секунд буде згенеровано ваш ключ. Він виглядатиме як довгий рядок з випадкових символів."}),l.jsx("li",{children:"Натисніть на іконку копіювання поруч з ключем."}),l.jsx("li",{children:"Поверніться сюди та вставте скопійований ключ у поле вище."})]}),l.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:l.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[l.jsx("strong",{children:"Важливо:"})," Зберігайте ваш ключ у безпечному місці та не діліться ним ні з ким. Редактор не зберігає ключ на постійній основі і не передає його нікуди, окрім як безпосередньо до Google API при генерації коду."]})})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-3 bg-[var(--bg-secondary)] rounded-lg",children:l.jsxs("p",{className:"text-xs text-[var(--text-tertiary)]",children:[l.jsx("strong",{children:"Важливо:"})," Ваш ключ API зберігатиметься лише на час поточної сесії і буде видалений після оновлення або закриття сторінки. Він не зберігається назавжди для вашої безпеки."]})}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:c?"text":"password",value:o,onChange:h=>r(h.target.value),placeholder:"Вставте ваш API ключ сюди",className:"w-full bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-3 py-2 border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none pr-10"}),l.jsx("button",{onClick:()=>u(h=>!h),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[var(--text-tertiary)] hover:text-[var(--text-primary)]",title:c?"Приховати ключ":"Показати ключ",children:c?l.jsx(l0,{size:18}):l.jsx(o0,{size:18})})]}),l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:()=>d(!0),className:"text-sm text-[var(--accent-primary)] hover:text-[var(--accent-primary-hover)] underline",children:"Де взяти API ключ?"})})]})}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-between items-center flex-shrink-0",children:[l.jsx("div",{children:i&&l.jsx("button",{onClick:g,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] transition-colors",children:"Видалити ключ"})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:m,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Зберегти"})]})]})]})}):null},s4=()=>{if(typeof navigator>"u")return{browser:"Unknown",os:"Unknown"};const e=navigator.userAgent;let t="Unknown Browser",n="Unknown OS";e.includes("Win")&&(n="Windows"),e.includes("Mac")&&(n="macOS"),e.includes("Linux")&&(n="Linux"),e.includes("Android")&&(n="Android"),/(iPhone|iPad|iPod)/.test(e)&&(n="iOS"),/Windows NT 10.0/.test(e)?n="Windows 10/11":/Windows NT 6.3/.test(e)?n="Windows 8.1":/Windows NT 6.2/.test(e)?n="Windows 8":/Windows NT 6.1/.test(e)&&(n="Windows 7");let i;return(i=e.match(/(Edg|Edge)\/([\d.]+)/))?t=`Edge ${i[2]}`:(i=e.match(/Firefox\/([\d.]+)/))?t=`Firefox ${i[1]}`:(i=e.match(/Chrome\/([\d.]+)/))?t=`Chrome ${i[1]}`:(i=e.match(/Version\/([\d.]+).*Safari/))&&(t=`Safari ${i[1]}`),{browser:t,os:n}},a4=({onClose:e,appVersion:t})=>{const{browser:n,os:i}=T.useMemo(()=>s4(),[]),o="https://docs.google.com/forms/d/e/1FAIpQLSdTUJruu59--TShiM49xMQYohQ53K3ULIf0VpcCLWylFS-uzQ/viewform",r="entry.1570252682",c="entry.271524049",u="entry.1270693046",f=T.useMemo(()=>{const d=new URLSearchParams({usp:"pp_url",[r]:t,[c]:i,[u]:n});return`${o}?${d.toString()}`},[t,i,n]);return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:e,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",onClick:d=>d.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)] flex-shrink-0",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Залишити відгук"}),l.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto text-center",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx(BT,{size:48,className:"text-[var(--accent-primary)]"})}),l.jsx("p",{className:"text-md text-[var(--text-secondary)]",children:'Ваш відгук надзвичайно важливий для покращення редактора. Повідомлення про помилки, нові ідеї та просто враження допомагають робити "ВереTkа" кращою.'}),l.jsx("p",{className:"text-sm text-[var(--text-tertiary)]",children:"Найзручніший спосіб поділитися думками — заповнити спеціальну Google Форму. Це займе лише кілька хвилин."}),l.jsxs("div",{className:"text-xs text-[var(--text-tertiary)] bg-[var(--bg-secondary)] p-2 rounded-md",children:[l.jsx("strong",{children:"Примітка:"})," Дані про версію редактора, вашу ОС та браузер будуть додані до форми автоматично."]}),l.jsx("div",{children:l.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",onClick:e,className:"inline-flex items-center gap-3 px-6 py-3 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors text-lg",children:[l.jsx("span",{children:"Перейти до форми відгуків"}),l.jsx(FT,{size:20})]})})]}),l.jsx("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end flex-shrink-0",children:l.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Закрити"})})]})})},c4=["001","002","000"],u4=({isOpen:e,onClose:t,onActivate:n,showNotification:i})=>{const[o,r]=T.useState(""),c=()=>{const u=o.trim(),f=u.match(/^#(\d{3})$/);if(f){const d=f[1];c4.includes(d)?(n(d),i(d==="000"?"Усі активні чит-коди скинуто.":`Чит-код "${u}" активовано!`,"info"),t()):i(`Невірний чит-код: "${u}"`,"error")}else i('Неправильний формат коду. Очікується "#000".',"error");r("")};return e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:u=>u.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Введення чит-коду"}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("p",{className:"text-sm text-center text-[var(--text-tertiary)]",children:"Введіть код у форматі #000"}),l.jsx("input",{type:"text",value:o,onChange:u=>r(u.target.value),onKeyDown:u=>{u.key==="Enter"&&c()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] text-center text-lg font-mono rounded px-2 py-2 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:c,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors",children:"Активувати"})]})]})}):null};function Du(e,t,n){const i=e instanceof Blob?e:new Blob([e],{type:n}),o=URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}async function d4(){if(typeof window.showOpenFilePicker!="function")return null;try{const[e]=await window.showOpenFilePicker({types:[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}]}),n=await(await e.getFile()).text();return{handle:e,content:n}}catch(e){const t=e;if(t.name==="AbortError"||t.name==="SecurityError")return console.log(`File picker failed gracefully: ${t.name}. Falling back.`),null;throw e}}async function H0(e,t){const n=await e.createWritable();await n.write(t),await n.close()}async function Tr(e,t,n,i){if(typeof window.showSaveFilePicker=="function")try{const o=await window.showSaveFilePicker({suggestedName:t,types:n});return await H0(o,e),o}catch(o){const r=o;return r.name==="AbortError"||r.name==="SecurityError"?(console.log(`File picker failed gracefully (${r.name}), falling back to download.`),Du(e,t,i),null):(console.error("Unexpected error with File System Access API, falling back to download:",o),Du(e,t,i),null)}else return Du(e,t,i),null}function f4(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m4(e){if(e.state==="hidden")return"";const t=c=>{if("rotation"in c&&c.rotation&&c.rotation!==0){const u=c.type==="text"?{x:c.x,y:c.y}:bt(c);if(u)return`transform="rotate(${c.rotation} ${u.x} ${u.y})"`}return""},n=c=>{let u=`stroke="${c.stroke}" stroke-width="${c.strokeWidth}" ${t(c)}`;return c.state==="disabled"&&(u+=' opacity="0.5"'),u},i=c=>c.fill==="none"?'fill="none"':"stipple"in c&&c.stipple?`fill="url(#pattern-${c.stipple}-fill)"`:`fill="${c.fill}"`,o=c=>{const u=c.joinstyle??"miter";return`stroke-linejoin="${u}" ${u==="miter"?'stroke-miterlimit="10"':""}`},r=c=>{let u=`stroke-linecap="${(c.capstyle==="projecting"?"square":c.capstyle)??"butt"}"`;if("dash"in c&&c.dash&&c.dash.length>0&&c.strokeWidth>0&&(u+=` stroke-dasharray="${c.dash.map(f=>f*c.strokeWidth).join(" ")}"`,"dashoffset"in c&&c.dashoffset&&(u+=` stroke-dashoffset="${c.dashoffset}"`)),c.arrow&&c.arrow!=="none"&&c.arrowshape){const[f,d,m]=c.arrowshape,g=c.strokeWidth>0?c.strokeWidth:1,h=`${c.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${f*g}-${d*g}-${m*g}`;(c.arrow==="first"||c.arrow==="both")&&(u+=` marker-start="url(#arrow-start-${h})"`),(c.arrow==="last"||c.arrow==="both")&&(u+=` marker-end="url(#arrow-end-${h})"`)}return u};switch(e.type){case"rectangle":return`<rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${n(e)} ${i(e)} ${o(e)} />`;case"ellipse":return`<ellipse cx="${e.cx}" cy="${e.cy}" rx="${e.rx}" ry="${e.ry}" ${n(e)} ${i(e)} />`;case"image":return`<image href="${e.src}" x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" ${t(e)} />`;case"bitmap":return`<g ${t(e)}><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="${e.background}" /><rect x="${e.x}" y="${e.y}" width="${e.width}" height="${e.height}" fill="url(#pattern-bitmap-${e.bitmapType}-fill)" /></g>`;case"text":{if(!to(e))return"";const u=()=>["n","ne","nw"].includes(e.anchor)?"hanging":["w","center","e"].includes(e.anchor)?"middle":"alphabetic",f=e.justify==="center"?"middle":e.justify==="right"?"end":"start",d=`font-family='${Sc(e.font)}' font-size='${e.fontSize}px' font-weight='${e.weight}' font-style='${e.slant==="italic"?"italic":"normal"}'`,m=`text-decoration='${e.underline?"underline":""} ${e.overstrike?"line-through":""}'`,h=Tc(e).map((p,b)=>{let v=0;return e.justify==="center"&&e.width>0&&(v=e.width/2),e.justify==="right"&&e.width>0&&(v=e.width),`<tspan x="${e.x+v}" dy="${b===0?"0":`${e.fontSize*1.2}px`}">${f4(p)}</tspan>`}).join("");return`<text x="${e.x}" y="${e.y}" ${t(e)} dominant-baseline="${u()}" text-anchor="${f}" fill="${e.fill}" ${d} ${m} style="white-space: pre">${h}</text>`}case"arc":{const c=e.style==="arc"?"none":e.fill;return`<path d="${Of(e)}" ${n(e)} fill="${c}" />`}default:{const c=ti(e);if(!c||c.length===0)return"";const u=c.map((h,p)=>`${p===0?"M":"L"}${h.x},${h.y}`).join(" "),f=e.type!=="line"&&e.type!=="pencil"&&!(e.type==="polyline"&&!e.isClosed)&&!(e.type==="bezier"&&!e.isClosed),d=`${u} ${f?"Z":""}`,m=f&&"fill"in e?i(e):'fill="none"',g={...e};return"rotation"in g&&(g.rotation=0),`<path d="${d}" ${n(g)} ${m} ${r(e)} ${o(e)} />`}}}function Ep(e,t,n,i){const o=new Set,r=new Set,c=new Map;e.forEach(h=>{if(h&&("stipple"in h&&h.stipple&&o.add(h.stipple),h.type==="bitmap"&&r.add(h.bitmapType),(h.type==="line"||h.type==="bezier"||h.type==="pencil"||h.type==="polyline"&&!h.isClosed)&&h.arrow&&h.arrow!=="none"&&h.stroke!=="none"&&h.strokeWidth>0&&h.arrowshape)){const[p,b,v]=h.arrowshape,E=h.strokeWidth>0?h.strokeWidth:1,C=`${h.stroke.replace(/[^a-zA-Z0-9]/g,"")}-${p*E}-${b*E}-${v*E}`;c.has(C)||c.set(C,{color:h.stroke,shapeParams:[p*E,b*E,v*E]})}});const u=Array.from(o).map(h=>h==="gray12"?`<pattern id="pattern-gray12-fill" width="3" height="3" patternUnits="userSpaceOnUse"><rect width="3" height="3" fill="${i}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#333":"#000"}"/></pattern>`:h==="gray25"?`<pattern id="pattern-gray25-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#444":"#000"}"/></pattern>`:h==="gray50"?`<pattern id="pattern-gray50-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i}"/><rect x="0" y="0" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/><rect x="1" y="1" width="1" height="1" fill="${i==="#000000"?"#555":"#000"}"/></pattern>`:h==="gray75"?`<pattern id="pattern-gray75-fill" width="2" height="2" patternUnits="userSpaceOnUse"><rect width="2" height="2" fill="${i==="#fff"?"#000":"#fff"}"/><rect x="1" y="1" width="1" height="1" fill="${i}"/></pattern>`:"").join(`
`),f=Array.from(r).map(h=>`<pattern id="pattern-bitmap-${h}-fill" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M0,0 L8,8 M8,0 L0,8" stroke="currentColor" stroke-width="1" shape-rendering="crispEdges"/></pattern>`).join(`
`),d=Array.from(c.values()).map(({color:h,shapeParams:p})=>{const[b,v,E]=p;if(v===0||E===0)return null;const C=`${h.replace(/[^a-zA-Z0-9]/g,"")}-${b}-${v}-${E}`,x=`M 0,0 L ${-v},${E} L ${-b},0 L ${-v},${-E} Z`,S=`${-v*1.1} ${-E*1.1} ${v*1.1} ${E*2.2}`,w=v,A=E*2;return`
            <marker id="arrow-end-${C}" viewBox="${S}" refX="0" refY="0" markerUnits="userSpaceOnUse" markerWidth="${w}" markerHeight="${A}" orient="auto">
                <path d="${x}" fill="${h}" />
            </marker>
            <marker id="arrow-start-${C}" viewBox="${S}" refX="0" refY="0" markerUnits="userSpaceOnUse" markerWidth="${w}" markerHeight="${A}" orient="auto-start-reverse">
                <path d="${x}" fill="${h}" />
            </marker>`}).join(`
`),m=`<defs>${u}${f}${d}</defs>`,g=e.map(m4).join(`
`);return`<svg width="${t}" height="${n}" viewBox="0 0 ${t} ${n}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        ${m}
        <rect x="0" y="0" width="${t}" height="${n}" fill="${i}" />
        ${g}
    </svg>`}async function h4(e,t,n,i,o,r){return new Promise((c,u)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d)return u(new Error("Не вдалося отримати контекст canvas."));const m=n*o,g=i*o;f.width=m,f.height=g;const h=new Image;h.onload=()=>{d.drawImage(h,0,0,m,g);const v=e==="png"?"image/png":"image/jpeg",E=f.toDataURL(v,r/100);c(E)},h.onerror=v=>{console.error("Помилка завантаження SVG в зображення:",v),u(new Error("Не вдалося завантажити SVG для конвертації."))};const p=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p);h.src=b})}const qn=24,kp=(e,t)=>{if(t<=0)return 100;const n=e/t,i=Math.floor(Math.log10(n)),o=Math.pow(10,i),r=n/o;let c;return r<1.5?c=1:r<3.5?c=2:r<7.5?c=5:c=10,c*o},Mp=({orientation:e,transform:t,length:n,canvasSize:i})=>{const o=e==="horizontal",r=o?n:qn,c=o?qn:n,u=T.useMemo(()=>{if(n<=0)return[];const f=kp(60,t.scale),d=kp(15,t.scale),m=o?-t.x/t.scale:-t.y/t.scale,g=m+n/t.scale,h=[],p=Math.floor(m/d)*d,b=2e3;let v=0;for(let E=p;E<=g&&v<b;E+=d){v++;const C=o?i.width:i.height;if(E<0||E>C)continue;const x=E*t.scale+(o?t.x:t.y);if(x<0||x>n)continue;const S=d/100,w=Math.abs(E%f)<S;let A,D=null;if(w)A=qn,D=(Math.round(E*100)/100).toString();else{if(d*t.scale<5)continue;A=qn*.3}h.push({value:D,position:x,tickHeight:A})}return h},[n,t,o,i.width,i.height]);return r<=0||c<=0?null:l.jsx("svg",{width:r,height:c,className:"bg-[var(--ruler-bg)]",children:l.jsx("g",{children:u.map(({value:f,position:d,tickHeight:m},g)=>l.jsxs(St.Fragment,{children:[l.jsx("line",{x1:o?d:qn-m,y1:o?qn-m:d,x2:o?d:qn,y2:o?qn:d,stroke:"var(--ruler-tick)",strokeWidth:1}),f!==null&&l.jsx("text",{x:o?d+4:qn/2,y:o?qn/2:d+4,fill:"var(--ruler-text)",fontSize:10,textAnchor:o?"start":"middle",dominantBaseline:"middle",children:f})]},`${e}-${d}-${g}`))})})},Iu=.05,Lu=30,g4=({zoomLevel:e,cursorPos:t,onZoomChange:n,onResetZoom:i,onLocateSelectedShape:o,selectedShapeId:r})=>{const[c,u]=T.useState(!1),f=E=>Math.round(E*100)/100,d=`${Math.round(e*100)}%`,m=Math.log(Iu),h=Math.log(Lu)-m,p=E=>{if(h===0)return 0;const C=Math.max(Iu,Math.min(Lu,E));return(Math.log(C)-m)/h*100},b=E=>Math.exp(m+h*E/100),v=E=>{const C=b(Number(E.target.value));n(C)};return l.jsxs("div",{className:"bg-[var(--bg-primary)]/80 h-6 flex-shrink-0 px-3 flex items-center justify-between text-xs text-[var(--text-tertiary)] select-none",children:[l.jsx("div",{className:"font-mono w-48",children:t?`X: ${f(t.x)} Y: ${f(t.y)}`:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:p(e),onChange:v,className:"w-24 h-1 bg-[var(--bg-secondary)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[var(--accent-primary)]",title:`Масштаб: ${d}`}),c?l.jsx("div",{className:"w-20",children:l.jsx(Ce,{id:"zoom-input",value:Math.round(e*100),onChange:E=>n(E/100),onBlur:()=>u(!1),onKeyDown:E=>{(E.key==="Enter"||E.key==="Escape")&&E.target.blur()},autoFocus:!0,min:Math.round(Iu*100),max:Math.round(Lu*100),unit:"%",smartRound:!1})}):l.jsx("button",{onClick:()=>u(!0),className:"w-16 text-center hover:text-[var(--text-primary)]",title:"Натисніть, щоб змінити масштаб",children:d}),l.jsx("button",{onClick:o,disabled:!r,className:"p-1 rounded-md text-[var(--text-tertiary)] hover:text-[var(--text-primary)] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:text-[var(--text-tertiary)]",title:"Показати виділений об'єкт",children:l.jsx(r0,{size:14})})]})]})},p4=({onCreateNew:e,onLoadProject:t,recentProjects:n,onOpenRecent:i,onRemoveProject:o,onClearAllProjects:r,hasActiveProject:c,onReturnToProject:u,autosavedProjectData:f,onRestoreAutosave:d,onDismissAutosave:m})=>{var p;const g=b=>{const E=Math.round((new Date().getTime()-b.getTime())/1e3),C=Math.floor(E/86400);return C===0?"Сьогодні":C===1?"Вчора":C<7?`${C} дні тому`:b.toLocaleDateString()},h=T.useMemo(()=>{if(!f)return null;try{const b=JSON.parse(f);return{name:b.projectName,timestamp:b.autosaveTimestamp?new Date(b.autosaveTimestamp):null}}catch{return null}},[f]);return l.jsx("div",{className:"w-full h-full bg-[var(--bg-app)] rounded-lg flex flex-col p-8 sm:p-12 lg:p-16 overflow-y-auto",children:l.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[h&&l.jsxs("div",{className:"bg-yellow-900/50 border border-yellow-500/50 text-yellow-200 text-sm rounded-lg p-4 mb-12 flex items-center justify-between gap-4 animate-fade-in-down",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Kf,{size:24,className:"flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-yellow-100",children:"Знайдено автозбережену версію!"}),l.jsxs("p",{children:['Проєкт "',h.name,'" був збережений ',((p=h.timestamp)==null?void 0:p.toLocaleString("uk-UA"))??"нещодавно","."]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:d,className:"px-4 py-1.5 rounded-md font-semibold bg-yellow-600 text-white hover:bg-yellow-500 transition-colors",children:"Відновити"}),l.jsx("button",{onClick:m,className:"p-2 rounded-md hover:bg-white/10",title:"Відхилити та видалити автозбережену версію",children:l.jsx(gt,{size:16})})]})]}),l.jsxs("header",{className:"text-center mb-16 animate-fade-in-down",children:[l.jsxs("div",{className:"inline-flex items-center gap-6 mb-6",children:[l.jsx("div",{className:"h-32 w-32 text-indigo-400 flex-shrink-0",children:l.jsxs("svg",{viewBox:"342 42 615 610",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:[l.jsx("path",{d:"M0 377 167.354 0 382 0 214.646 377Z",fill:"#404040",transform:"matrix(-1 -8.74228e-08 -8.74228e-08 1 745 274)"}),l.jsx("path",{d:"M0 11.6394C-1.43639e-15 5.21113 5.21115-1.43638e-15 11.6394-2.87276e-15L11.6394 0C18.0677-1.43638e-15 23.2788 5.21113 23.2788 11.6394L23.2787 78.6188C23.2787 85.047 18.0676 90.2582 11.6393 90.2582L11.6394 90.2581C5.21115 90.2581 0 85.0469 0 78.6187Z",fill:"#404040",transform:"matrix(0.913545 -0.406737 -0.406737 -0.913545 566.02 303.751)"}),l.jsx("path",{d:"M0 11.6394C-1.43639e-15 5.21113 5.21115-1.43638e-15 11.6394-2.87276e-15L11.6394 0C18.0677-1.43638e-15 23.2788 5.21113 23.2788 11.6394L23.2787 78.6188C23.2787 85.047 18.0676 90.2582 11.6393 90.2582L11.6394 90.2581C5.21115 90.2581 0 85.0469 0 78.6187Z",fill:"#404040",transform:"matrix(0.913545 -0.406737 -0.406737 -0.913545 518.456 303.751)"}),l.jsx("path",{d:"M0 11.6394C-1.43639e-15 5.21113 5.21115-1.43638e-15 11.6394-2.87276e-15L11.6394 0C18.0677-1.43638e-15 23.2788 5.21113 23.2788 11.6394L23.2787 78.6188C23.2787 85.047 18.0676 90.2582 11.6393 90.2582L11.6394 90.2581C5.21115 90.2581 0 85.0469 0 78.6187Z",fill:"#404040",transform:"matrix(0.913545 -0.406737 -0.406737 -0.913545 470.892 303.751)"}),l.jsx("path",{d:"M0 11.6394C-1.43639e-15 5.21113 5.21115-1.43638e-15 11.6394-2.87276e-15L11.6394 0C18.0677-1.43638e-15 23.2788 5.21113 23.2788 11.6394L23.2787 78.6188C23.2787 85.047 18.0676 90.2582 11.6393 90.2582L11.6394 90.2581C5.21115 90.2581 0 85.0469 0 78.6187Z",fill:"#404040",transform:"matrix(0.913545 -0.406737 -0.406737 -0.913545 423.328 303.751)"}),l.jsx("path",{d:"M0 11.6394C-1.43639e-15 5.21113 5.21115-1.43638e-15 11.6394-2.87276e-15L11.6394 0C18.0677-1.43638e-15 23.2788 5.21113 23.2788 11.6394L23.2787 78.6188C23.2787 85.047 18.0676 90.2582 11.6393 90.2582L11.6394 90.2581C5.21115 90.2581 0 85.0469 0 78.6187Z",fill:"#404040",transform:"matrix(0.913545 -0.406737 -0.406737 -0.913545 375.764 303.751)"}),l.jsx("path",{d:"M719.154 224 935 224 745.846 651 530 651Z",fill:"#FFC000"}),l.jsx("path",{d:"M718.88 224 936 224 745.774 651C740.758 520.059 718.505 482.011 660 355.825Z",fill:"#0070C0"}),l.jsx("path",{d:"M736.193 243.192C733.561 249.104 726.635 251.762 720.724 249.13L720.724 249.13C714.812 246.498 712.154 239.572 714.786 233.661L741.966 172.613C744.598 166.702 751.524 164.043 757.435 166.675L757.435 166.675C763.346 169.307 766.005 176.233 763.373 182.145Z",fill:"#0070C0"}),l.jsx("path",{d:"M784.072 243.192C781.44 249.104 774.514 251.762 768.603 249.13L768.603 249.13C762.691 246.498 760.033 239.572 762.665 233.661L789.845 172.613C792.477 166.702 799.403 164.043 805.314 166.675L805.314 166.675C811.226 169.307 813.884 176.233 811.252 182.145Z",fill:"#0070C0"}),l.jsx("path",{d:"M831.951 243.192C829.319 249.104 822.393 251.762 816.482 249.13L816.482 249.13C810.571 246.498 807.912 239.572 810.544 233.661L837.724 172.613C840.356 166.702 847.282 164.043 853.193 166.675L853.193 166.675C859.105 169.307 861.763 176.233 859.131 182.145Z",fill:"#0070C0"}),l.jsx("path",{d:"M879.83 243.192C877.198 249.104 870.273 251.762 864.361 249.13L864.361 249.13C858.45 246.498 855.791 239.572 858.423 233.661L885.603 172.613C888.235 166.702 895.161 164.043 901.073 166.675L901.072 166.675C906.984 169.307 909.642 176.233 907.01 182.145Z",fill:"#0070C0"}),l.jsx("path",{d:"M927.71 243.192C925.078 249.104 918.152 251.762 912.24 249.13L912.24 249.13C906.329 246.498 903.67 239.573 906.302 233.661L933.483 172.613C936.115 166.702 943.04 164.043 948.952 166.675L948.952 166.675C954.863 169.307 957.522 176.233 954.89 182.145Z",fill:"#0070C0"}),l.jsx("path",{d:"M0.955665-6.59781 395.318 50.5239 393.407 63.7195-0.955665 6.59781ZM-4.77833 32.9891C-22.9977 30.3501-35.6281 13.441-32.9891-4.77833-30.3501-22.9977-13.441-35.6281 4.77833-32.9891 22.9977-30.3501 35.6281-13.441 32.9891 4.77833 30.3501 22.9977 13.441 35.6281-4.77833 32.9891ZM399.141 24.1326C417.36 26.7716 429.99 43.6806 427.351 61.9 424.712 80.1194 407.803 92.7497 389.584 90.1107 371.365 87.4717 358.734 70.5627 361.373 52.3434 364.012 34.124 380.921 21.4936 399.141 24.1326Z",fill:"#0070C0",transform:"matrix(1 0 0 -1 434.5 133.622)"}),l.jsx("path",{d:"M220.27 30.5573C192.814 23.3587 144.253-8.25427 80.72 2.04285 17.1869 12.34-0.996792 71.4324 0.0414646 89.5092 1.07972 107.586 6.28948 135.309 15.8645 153.298 30.0006 179.858 56.4739 190.887 78.0564 183.531 99.6389 176.175 105.088 139.242 86.2557 123.988 67.423 108.734 38.8872 120.07 32.6043 134.374 26.3214 148.678 31.1916 168.911 48.5587 209.813 62.0437 243.951 85.9893 284.104 71.4443 348.273",stroke:"#0070C0",strokeWidth:"5.33333",strokeMiterlimit:"8",fill:"none",transform:"matrix(-0.944285 0.329128 0.329128 0.944285 627.56 27.8097)"})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-7xl md:text-7xl font-extrabold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"ВереTkа"}),l.jsxs("p",{className:"text-xl md:text-2xl text-[var(--text-secondary)] font-medium italic mt-2",children:["Перетворюйте ваші малюнки",l.jsx("br",{})," на готовий код для Canvas Tkinter"]})]})]}),l.jsxs("div",{className:"mt-4 max-w-3xl mx-auto",children:[l.jsx("hr",{className:"my-2 border-[var(--border-secondary)] w-1/2 mx-auto"}),l.jsxs("p",{className:"text-md text-[var(--text-tertiary)] mt-2",children:["Простий векторний редактор ",l.jsx("br",{}),"із функцією швидкої генерації коду Python (Tkinter) на основі ваших малюнків"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16 animate-fade-in-up",children:[l.jsxs("button",{onClick:e,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[l.jsx(TT,{size:32,className:"text-indigo-400 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Створити новий проєкт"}),l.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Почати з чистого полотна та нових ідей."})]})]}),l.jsxs("button",{onClick:t,className:"group flex items-center gap-6 p-6 bg-[var(--bg-primary)] rounded-lg text-left hover:bg-[var(--bg-hover)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[l.jsx(ST,{size:32,className:"text-purple-400 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-[var(--text-primary)]",children:"Завантажити проєкт"}),l.jsx("p",{className:"text-sm text-[var(--text-tertiary)] mt-1",children:"Відкрити існуючий файл .vec.json."})]})]})]}),c&&l.jsxs("div",{className:"mb-12 animate-fade-in-up",children:[l.jsx("hr",{className:"my-12 border-[var(--border-secondary)] w-1/4 mx-auto"}),l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-full md:w-[calc(50%-0.75rem)]",children:l.jsxs("button",{onClick:u,className:"w-full group flex items-center gap-3 p-3 bg-[var(--accent-primary)] text-[var(--accent-text)] rounded-lg text-left hover:bg-[var(--accent-primary-hover)] border border-transparent transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[l.jsx(ET,{size:32,className:"flex-shrink-0 transition-transform group-hover:translate-x-1"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Повернутися до проєкту"}),l.jsx("p",{className:"text-sm text-[var(--accent-text)] opacity-80 mt-1",children:"Продовжити редагування вашого малюнка."})]})]})})})]}),l.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(wT,{size:20,className:"text-[var(--text-tertiary)]"}),l.jsx("h2",{className:"text-xl font-semibold text-[var(--text-secondary)]",children:"Останні проєкти"})]}),n.length>0&&l.jsx("button",{onClick:r,className:"text-xs text-[var(--destructive-text)] hover:underline",children:"Очистити список"})]}),n.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((b,v)=>l.jsxs("div",{className:"w-full flex flex-col rounded-lg bg-[var(--bg-primary)] border border-[var(--border-primary)] hover:border-[var(--border-secondary)] transition-all duration-200 ease-in-out text-left group relative",children:[l.jsx("button",{onClick:E=>{E.stopPropagation(),o(b)},className:"absolute top-1 right-1 z-10 p-1 rounded-full bg-[var(--bg-secondary)]/50 text-[var(--text-tertiary)] hover:bg-[var(--destructive-bg)] hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Видалити зі списку",children:l.jsx(gt,{size:14})}),l.jsxs("button",{onClick:()=>i(b),className:"w-full h-full flex flex-col",children:[l.jsx("div",{className:"w-full h-32 bg-[var(--bg-secondary)] flex items-center justify-center rounded-t-lg overflow-hidden",children:b.thumbnail?l.jsx("img",{src:b.thumbnail,alt:`Ескіз ${b.name}`,className:"w-full h-full object-contain"}):l.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:"Немає ескізу"})}),l.jsxs("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[l.jsx("p",{className:"font-semibold text-[var(--text-primary)] break-words line-clamp-2",title:b.name.replace(/\.vec\.json$/,""),children:b.name.replace(/\.vec\.json$/,"")}),l.jsxs("p",{className:"text-xs text-[var(--text-tertiary)] mt-2",children:["Відкрито: ",g(new Date(b.lastOpened))]})]})]})]},b.name+v))}):l.jsxs("div",{className:"text-center text-[var(--text-tertiary)] py-10 border-2 border-dashed border-[var(--border-primary)] rounded-lg",children:[l.jsx("p",{children:"Список останніх проєктів порожній."}),l.jsx("p",{className:"text-xs mt-1",children:"Почніть роботу, створивши або завантаживши проєкт."})]})]})]})})},x4="VeretkaDB",y4=1,Yn="recentProjects",v4=10;let Uu=null;const ia=()=>(Uu||(Uu=new Promise((e,t)=>{const n=indexedDB.open(x4,y4);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{const i=n.result;i.objectStoreNames.contains(Yn)||i.createObjectStore(Yn,{keyPath:"name"})}})),Uu),b4=()=>{const[e,t]=T.useState([]),n=T.useCallback(async()=>{try{const m=(await ia()).transaction(Yn,"readonly").objectStore(Yn).getAll();m.onsuccess=()=>{const g=m.result;g.sort((h,p)=>new Date(p.lastOpened).getTime()-new Date(h.lastOpened).getTime()),t(g)},m.onerror=()=>{console.error("Could not load recent projects from DB:",m.error)}}catch(u){console.error("Failed to open IndexedDB:",u)}},[]);T.useEffect(()=>{typeof indexedDB<"u"&&n()},[n]);const i=T.useCallback(async(u,f)=>{if(!(!u||typeof indexedDB>"u"))try{const m=(await ia()).transaction(Yn,"readwrite"),g=m.objectStore(Yn),h={name:u.name,handle:u,lastOpened:new Date,thumbnail:f};g.put(h);const p=g.getAll();p.onsuccess=()=>{if(p.result.length>v4){const b=p.result;b.sort((E,C)=>new Date(E.lastOpened).getTime()-new Date(C.lastOpened).getTime());const v=b[0].name;g.delete(v)}},m.oncomplete=()=>{n()}}catch(d){console.error("Failed to add recent project:",d)}},[n]),o=T.useCallback(async u=>{if(!(typeof indexedDB>"u"))try{const d=(await ia()).transaction(Yn,"readwrite");d.objectStore(Yn).delete(u),d.oncomplete=()=>{n()}}catch(f){console.error("Failed to remove recent project:",f)}},[n]),r=T.useCallback(async()=>{if(!(typeof indexedDB>"u"))try{const f=(await ia()).transaction(Yn,"readwrite");f.objectStore(Yn).clear(),f.oncomplete=()=>{n()}}catch(u){console.error("Failed to clear recent projects:",u)}},[n]),c=T.useCallback(async u=>{try{if(await u.handle.queryPermission({mode:"read"})!=="granted"&&await u.handle.requestPermission({mode:"read"})!=="granted")throw new Error("Permission to read file was denied.");const d=await(await u.handle.getFile()).text();return await i(u.handle,u.thumbnail),d}catch(f){throw console.error(`Failed to open recent project ${u.name}:`,f),await o(u.name),f}},[i,o]);return{projects:e,addRecentProject:i,openRecentProject:c,removeRecentProject:o,clearAllProjects:r}},C4=({isOpen:e,onClose:t,onSave:n,currentProjectName:i})=>{const[o,r]=T.useState(i),[c,u]=T.useState(".py"),[f,d]=T.useState(!1),m=()=>{o.trim()&&n(o.trim(),c,c===".txt"?f:!1)};return e?l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:g=>g.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти код як..."}),l.jsx("button",{onClick:t,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Задайте назву та оберіть необхідне розширення (тип) файлу."}),l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"codeFileName",title:"Введіть назву для вашого файлу.",children:"Назва файлу:"}),l.jsxs("div",{className:"flex items-center w-full",children:[l.jsx("input",{id:"codeFileName",type:"text",value:o,onChange:g=>r(g.target.value),onKeyDown:g=>{g.key==="Enter"&&m()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded-l px-2 py-1 h-[38px] w-full border border-r-0 border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0}),l.jsxs("select",{value:c,onChange:g=>u(g.target.value),className:"bg-[var(--bg-tertiary)] text-[var(--text-secondary)] h-[38px] px-3 py-1 rounded-r border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none appearance-none cursor-pointer",title:"Вибрати розширення файлу",children:[l.jsx("option",{value:".py",children:".py"}),l.jsx("option",{value:".txt",children:".txt"})]})]})]}),c===".txt"&&l.jsxs("div",{className:"pl-[104px]",children:[" ",l.jsx(Pn,{id:"includeLineNumbers",checked:f,onChange:d,label:"Зберігати із номерами рядків",title:"Додати номери рядків на початок кожного рядка у текстовому файлі"})]})]}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:m,disabled:!o.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})}):null},T4=({shape:e,viewTransform:t,onUpdateText:n,onStopEditing:i})=>{const o=T.useRef(null),[r]=T.useState(e.text);T.useEffect(()=>{const D=o.current;D&&(D.focus(),D.select(),D.style.height="auto",D.style.height=`${D.scrollHeight}px`)},[]);const c=D=>{n(D.target.value),D.target.style.height="auto",D.target.style.height=`${D.target.scrollHeight}px`},u=D=>{D.key==="Escape"&&(n(r),i())},f=()=>{i()},d=T.useMemo(()=>to({...e}),[e]);if(!d)return null;const{scale:m,x:g,y:h}=t,p={x:d.x-e.x,y:d.y-e.y},b=e.rotation*Math.PI/180,v=Math.cos(b),E=Math.sin(b),C={x:p.x*v-p.y*E,y:p.x*E+p.y*v},x={x:e.x*m+g,y:e.y*m+h},S=x.x+C.x*m,w=x.y+C.y*m,A={position:"absolute",left:`${S}px`,top:`${w}px`,width:`${d.width*m}px`,height:`${Math.max(d.height*m,e.fontSize*1.2*m)}px`,padding:0,margin:0,border:"none",outline:"1px dashed var(--selection-stroke)",overflow:"hidden",resize:"none",backgroundColor:"transparent",color:e.fill,lineHeight:1.2,fontFamily:Sc(e.font),fontSize:`${e.fontSize*m}px`,fontWeight:e.weight,fontStyle:e.slant==="italic"?"italic":"normal",textAlign:e.justify,transform:`rotate(${-e.rotation}deg)`,transformOrigin:"0 0",whiteSpace:"pre-wrap",cursor:"text",zIndex:10};return l.jsx("textarea",{ref:o,value:e.text,onChange:c,onBlur:f,onKeyDown:u,style:A,className:"allow-selection"})},S4=({onClose:e,onSave:t})=>{const[n,i]=T.useState("Новий шаблон"),o=()=>{n.trim()&&t(n.trim())};return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg shadow-2xl w-full max-w-md flex flex-col",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-[var(--border-primary)]",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Зберегти як шаблон"}),l.jsx("button",{onClick:e,className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] rounded-full","aria-label":"Закрити",children:l.jsx(gt,{})})]}),l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs(ue,{children:[l.jsx(ae,{htmlFor:"templateName",children:"Назва шаблону:"}),l.jsx("input",{id:"templateName",type:"text",value:n,onChange:r=>i(r.target.value),onKeyDown:r=>{r.key==="Enter"&&o()},className:"bg-[var(--bg-secondary)] text-[var(--text-primary)] rounded px-2 py-1 w-full border border-[var(--border-secondary)] focus:ring-2 focus:ring-[var(--accent-primary)] focus:outline-none",autoFocus:!0})]})}),l.jsxs("footer",{className:"p-4 bg-[var(--bg-app)]/50 rounded-b-lg flex justify-end gap-3",children:[l.jsx("button",{onClick:e,className:"px-6 py-2 rounded-lg font-semibold bg-[var(--bg-tertiary)] text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-colors",children:"Скасувати"}),l.jsx("button",{onClick:o,disabled:!n.trim(),className:"px-6 py-2 rounded-lg font-semibold bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] transition-colors disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:"Зберегти"})]})]})})},Ap="1.2.11",Ri=24,w4=.05,Np=30,E4=1024,On="veretka-autosave-session",k4=2*60*1e3,M4=(e,t)=>{T.useEffect(()=>{const n=i=>{!e.current||e.current.contains(i.target)||t(i)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[e,t])},Sr=()=>{const[e,t]=T.useState(!1),n=T.useRef(null),i=T.useCallback(()=>t(!1),[]);return M4(n,i),{isOpen:e,toggle:()=>t(c=>!c),close:i,wrapperProps:{ref:n,onMouseLeave:i}}},A4=St.memo(e=>{const{isOpen:t,toggle:n,close:i,wrapperProps:o}=Sr(),{isOpen:r,toggle:c,close:u,wrapperProps:f}=Sr(),{isOpen:d,toggle:m,close:g,wrapperProps:h}=Sr(),{isOpen:p,toggle:b,close:v,wrapperProps:E}=Sr(),{isOpen:C,toggle:x,close:S,wrapperProps:w}=Sr(),A=(M,L)=>{M(),L()},D=({onClick:M,children:L,disabled:P,shortcut:Z,selected:pe})=>l.jsxs("button",{onClick:M,disabled:P,className:`flex justify-between items-center w-full px-3 py-1.5 text-left text-sm ${pe?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent disabled:cursor-not-allowed`,children:[l.jsx("span",{children:L}),Z&&l.jsx("span",{className:"text-xs text-[var(--text-tertiary)]",children:Z})]}),_=({checked:M,onChange:L,children:P})=>l.jsxs("label",{className:"flex items-center w-full px-3 py-1.5 text-left text-sm text-[var(--text-secondary)] hover:bg-[var(--accent-primary)] hover:text-[var(--accent-text)]",children:[l.jsx("input",{type:"checkbox",checked:M,onChange:Z=>L(Z.target.checked),className:"mr-3 h-4 w-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-secondary)]"}),l.jsx("span",{children:P})]});return l.jsxs("nav",{className:"bg-[var(--bg-primary)] text-sm font-medium flex items-center px-2 select-none h-8 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center",children:[e.isProjectActive&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:e.onGoHome,title:"На головну",className:"px-2 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:l.jsx(AT,{size:18})}),l.jsx("div",{className:"w-px h-5 bg-[var(--border-secondary)] mx-1"})]}),l.jsxs("div",{...o,className:"relative",children:[l.jsx("button",{onClick:n,className:`px-3 py-1 rounded-md ${t?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Файл"}),t&&l.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[l.jsx(D,{onClick:()=>A(e.onNewProject,i),children:"Новий проєкт..."}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx(D,{onClick:()=>A(e.onSaveProject,i),disabled:!e.canSave,shortcut:"Ctrl+S",children:"Зберегти"}),l.jsx(D,{onClick:()=>A(e.onSaveProjectAs,i),disabled:!e.isProjectActive,children:"Зберегти як..."}),l.jsx(D,{onClick:()=>A(e.onSaveAsTemplate,i),disabled:!e.isProjectActive,children:"Зберегти як шаблон..."}),l.jsx(D,{onClick:()=>A(e.onLoadProject,i),children:"Завантажити проєкт..."}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx(D,{onClick:()=>A(e.onExport,i),disabled:!e.isProjectActive,children:"Експортувати як..."}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),e.showGenerateButton&&l.jsx(D,{onClick:()=>A(e.onGenerate,i),disabled:!e.isProjectActive,children:"Згенерувати код..."})]})]}),l.jsxs("div",{...f,className:"relative",children:[l.jsx("button",{onClick:c,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${r?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Редагувати"}),r&&e.isProjectActive&&l.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[l.jsx(D,{onClick:()=>A(e.onUndo,u),disabled:!e.canUndo,shortcut:"Ctrl+Z",children:"Скасувати"}),l.jsx(D,{onClick:()=>A(e.onRedo,u),disabled:!e.canRedo,shortcut:"Ctrl+Y",children:"Повернути"}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx(D,{onClick:()=>A(e.onDuplicate,u),disabled:!e.isShapeSelected,shortcut:"Ctrl+D",children:"Дублювати"}),l.jsx(D,{onClick:()=>A(e.onDelete,u),disabled:!e.isShapeSelected,shortcut:"Del",children:"Видалити"})]})]}),l.jsxs("div",{...h,className:"relative",children:[l.jsx("button",{onClick:m,disabled:!e.isProjectActive,className:`px-3 py-1 rounded-md ${d?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"} disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent`,children:"Об'єкт"}),d&&e.isProjectActive&&l.jsx("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:l.jsx(D,{onClick:()=>A(e.onConvertToPath,g),disabled:!e.canConvertToPath,children:"Перетворити на контур"})})]}),l.jsxs("div",{...E,className:"relative",children:[l.jsx("button",{onClick:b,className:`px-3 py-1 rounded-md ${p?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Вигляд"}),p&&l.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[l.jsx(D,{onClick:()=>A(e.onFitCanvasToView,v),disabled:!e.isProjectActive,children:"Показати все полотно"}),l.jsx(D,{onClick:()=>A(e.onToggleFullscreen,v),shortcut:"F11",children:e.isFullscreen?"Вийти з повноекранного режиму":"Повноекранний режим"}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx(_,{checked:e.showGrid,onChange:e.setShowGrid,children:"Сітка"}),l.jsx(_,{checked:e.snapToGrid,onChange:e.setSnapToGrid,children:"Прив'язка до сітки"}),l.jsx(_,{checked:e.showAxes,onChange:e.setShowAxes,children:"Лінійки"}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx("div",{className:"px-3 py-1.5 text-xs text-[var(--text-tertiary)]",children:"Тема"}),l.jsx(D,{onClick:()=>{e.setTheme("dark"),v()},selected:e.theme==="dark",children:"Темна"}),l.jsx(D,{onClick:()=>{e.setTheme("light"),v()},selected:e.theme==="light",children:"Світла"})]})]}),l.jsxs("div",{...w,className:"relative",children:[l.jsx("button",{onClick:x,className:`px-3 py-1 rounded-md ${C?"bg-[var(--bg-secondary)]":"hover:bg-[var(--bg-secondary)]"}`,children:"Довідка"}),C&&l.jsxs("div",{className:"absolute top-full left-0 mt-0 w-56 bg-[var(--bg-secondary)] rounded-md shadow-lg py-1 z-50 border border-[var(--border-secondary)]",children:[l.jsx(D,{onClick:()=>A(e.onOpenAbout,S),children:"Про редактор"}),l.jsx("hr",{className:"border-[var(--border-secondary)] my-1"}),l.jsx(D,{onClick:()=>A(e.onOpenHelp,S),children:"Довідка"}),l.jsx(D,{onClick:()=>A(e.onOpenFeedback,S),children:"Залишити відгук"})]})]})]}),l.jsx("div",{className:"flex-grow flex justify-center items-center text-sm text-[var(--text-tertiary)] truncate px-4",children:l.jsx("span",{className:"truncate",title:e.projectName,children:e.isProjectActive?e.projectName:""})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>e.setTheme(e.theme==="dark"?"light":"dark"),title:"Змінити тему",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:e.theme==="dark"?l.jsx(yT,{size:18}):l.jsx(vT,{size:18})}),l.jsx("button",{onClick:e.onToggleFullscreen,title:e.isFullscreen?"Вийти з повноекранного режиму (F11)":"Повноекранний режим (F11)",className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:e.isFullscreen?l.jsx(VT,{size:18}):l.jsx(PT,{size:18})}),l.jsx("div",{className:"relative",children:l.jsxs("button",{onClick:e.onOpenSettings,className:"flex items-center gap-2 px-3 py-1 rounded-md hover:bg-[var(--bg-secondary)]",children:[l.jsx(n0,{size:16}),l.jsx("span",{children:"Налаштування"})]})})]})]})}),N4=St.memo(({activeTool:e,setActiveTool:t,activeCheats:n})=>{const o=[{name:"rectangle",label:"Прямокутник",icon:l.jsx(Lv,{size:18}),group:1},{name:"square",label:"Квадрат",icon:l.jsx(Iv,{size:18}),group:1},{name:"ellipse",label:"Еліпс",icon:l.jsx(Pv,{size:18}),group:1},{name:"circle",label:"Коло",icon:l.jsx(Uv,{size:18}),group:1},{name:"line",label:"Лінія",icon:l.jsx(Vv,{size:18}),group:2},{name:"polyline",label:"Ламана",icon:l.jsx(Bv,{size:18}),group:2},{name:"bezier",label:"Крива Без'є",icon:l.jsx(Fv,{size:18}),group:2},{name:"arc",label:"Дуга",icon:l.jsx(Xv,{size:18}),group:2},{name:"pieslice",label:"Сектор",icon:l.jsx(Jv,{size:18}),group:2},{name:"chord",label:"Сегмент",icon:l.jsx(Wv,{size:18}),group:2},{name:"polygon",label:"Багатокутник",icon:l.jsx($v,{size:18}),group:3},{name:"star",label:"Зірка",icon:l.jsx(Kv,{size:18}),group:3},{name:"triangle",label:"Трикутник",icon:l.jsx(Hv,{size:18}),group:3},{name:"right-triangle",label:"Прямокутний трикутник",icon:l.jsx(zv,{size:18}),group:3},{name:"rhombus",label:"Ромб",icon:l.jsx(qv,{size:18}),group:3},{name:"trapezoid",label:"Трапеція",icon:l.jsx(Ov,{size:18}),group:3},{name:"parallelogram",label:"Паралелограм",icon:l.jsx(Yv,{size:18}),group:3},{name:"text",label:"Текст",icon:l.jsx(Zv,{size:18}),group:3},{name:"pencil",label:"Олівець",icon:l.jsx(Gv,{size:18}),group:4},{name:"image",label:"Зображення",icon:l.jsx(Qv,{size:18}),group:4,disabled:!n.has("001")&&!n.has("002")},{name:"bitmap",label:"Bitmap",icon:l.jsx(e0,{size:18}),group:4,disabled:!0}];return l.jsx("aside",{className:"bg-[var(--bg-primary)] rounded-lg p-1 flex flex-col items-center",children:l.jsx("div",{className:"grid grid-cols-10 gap-0.5 w-full",role:"group","aria-label":"Інструменти",children:o.map((r,c)=>{const u=c>0?o[c-1].group:-1,f=r.group!==u&&c>0;return l.jsxs(St.Fragment,{children:[f&&l.jsx("div",{className:"col-span-10 h-px bg-[var(--border-secondary)] my-0.5"}),l.jsx("button",{onClick:()=>t(r.name),"aria-label":r.label,title:r.label,disabled:r.disabled,className:`p-1 rounded-md transition-colors duration-200 aspect-square flex items-center justify-center ${e===r.name?"bg-[var(--accent-primary)] text-[var(--accent-text)] shadow-md":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--icon-hover-text)]"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent`,children:r.icon})]},r.name)})})})}),en=({label:e,htmlFor:t,children:n})=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("label",{htmlFor:t,className:"text-sm font-medium text-[var(--text-secondary)] whitespace-nowrap",children:[e,":"]}),n]}),_4=({drawMode:e,setDrawMode:t,isFillEnabled:n,setIsFillEnabled:i,fillColor:o,setFillColor:r,setPreviewFillColor:c,isStrokeEnabled:u,setIsStrokeEnabled:f,strokeColor:d,setStrokeColor:m,setPreviewStrokeColor:g,strokeWidth:h,setStrokeWidth:p,numberOfSides:b,setNumberOfSides:v,activeTool:E,textColor:C,setTextColor:x,setPreviewTextColor:S,textFont:w,setTextFont:A,textFontSize:D,setTextFontSize:_})=>{const M=T.useCallback(()=>c(null),[c]),L=T.useCallback(()=>g(null),[g]),P=T.useCallback(()=>S(null),[S]),Z=T.useMemo(()=>["rectangle","square","circle","ellipse","triangle","right-triangle","polygon","star","rhombus","trapezoid","parallelogram","arc","pieslice","chord"].includes(E),[E]),pe=T.useMemo(()=>["rectangle","square","circle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","pieslice","chord","polygon","star","polyline","bezier"].includes(E),[E]),Te=T.useMemo(()=>!["select","edit-points","image","bitmap","text"].includes(E),[E]),_e=T.useMemo(()=>["polygon","star"].includes(E),[E]),de=T.useMemo(()=>E==="text",[E]),ee=T.useMemo(()=>["polyline","bezier"].includes(E),[E]),xe={"Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],Serif:["Times New Roman","Georgia","Garamond"],Monospace:["Courier New","Consolas","Lucida Console","Monaco"]},O=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"];return l.jsxs(l.Fragment,{children:[Z&&l.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-app)] p-1 rounded-lg",children:[l.jsx("button",{title:"Малювати від кута",onClick:()=>t("corner"),className:`p-1.5 rounded ${e==="corner"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(oT,{})}),l.jsx("button",{title:"Малювати від центру",onClick:()=>t("center"),className:`p-1.5 rounded ${e==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(lT,{})})]}),pe&&l.jsxs(en,{label:"Заливка",htmlFor:"fillColor",children:[l.jsx("input",{id:"fillEnable",type:"checkbox",checked:n&&!ee,onChange:H=>i(H.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]",disabled:ee}),l.jsx(Jt,{id:"fillColor",value:o,onChange:r,onPreview:c,onCancel:M,disabled:!n||ee})]}),Te&&l.jsxs(l.Fragment,{children:[l.jsxs(en,{label:"Контур",htmlFor:"strokeColor",children:[l.jsx("input",{id:"strokeEnable",type:"checkbox",checked:u,onChange:H=>f(H.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsx(Jt,{id:"strokeColor",value:d,onChange:m,onPreview:g,onCancel:L,disabled:!u})]}),l.jsx(en,{label:"Товщина",htmlFor:"strokeWidth",children:l.jsx("div",{className:"w-16",children:l.jsx(Ce,{id:"strokeWidth",min:1,max:100,value:h,onChange:p,disabled:!u})})})]}),_e&&l.jsx(en,{label:"Сторони",htmlFor:"sides",children:l.jsx("div",{className:"w-20",children:l.jsx(Ce,{id:"sides",min:3,max:50,value:b,onChange:v})})}),de&&l.jsxs(l.Fragment,{children:[l.jsx(en,{label:"Колір",htmlFor:"textColor",children:l.jsx(Jt,{id:"textColor",value:C,onChange:x,onPreview:S,onCancel:P})}),l.jsx(en,{label:"Шрифт",htmlFor:"textFont",children:l.jsxs(fn,{id:"textFont",value:w,onChange:A,className:"w-32 py-0.5",children:[Object.entries(xe).map(([H,oe])=>l.jsx("optgroup",{label:H,children:oe.map(le=>l.jsx("option",{value:le,children:le},le))},H)),l.jsx("optgroup",{label:"Шрифти Tkinter",children:O.map(H=>l.jsx("option",{value:H,children:H},H))})]})}),l.jsx(en,{label:"Розмір",htmlFor:"textFontSize",children:l.jsx("div",{className:"w-20",children:l.jsx(Ce,{id:"textFontSize",min:1,value:D,onChange:_})})})]})]})},R4=({selectedShape:e,updateShape:t,setShapePreview:n,cancelShapePreview:i,fillColor:o,strokeColor:r})=>{const c={"Sans-Serif":["Arial","Calibri","Helvetica","Segoe UI","Tahoma","Trebuchet MS","Verdana"],Serif:["Times New Roman","Georgia","Garamond"],Monospace:["Courier New","Consolas","Lucida Console","Monaco"]},u=["TkDefaultFont","TkTextFont","TkFixedFont","TkMenuFont","TkHeadingFont","TkCaptionFont","TkSmallCaptionFont","TkIconFont","TkTooltipFont"],f=e,d=x=>{t({...e,...x})},m=x=>{if("fill"in e)if(x){const S=e._previousFill||o;d({fill:S})}else d({fill:"none",_previousFill:e.fill})},g=x=>{if(x){const S=e._previousStroke||r;d({stroke:S})}else d({stroke:"none",_previousStroke:e.stroke})},h="fill"in e&&e.type!=="text",p=T.useMemo(()=>!e||e.type==="arc"&&e.style==="arc"||(e.type==="polyline"||e.type==="bezier")&&!e.isClosed,[e]),b="stroke"in e&&"strokeWidth"in e&&!["image","bitmap","text"].includes(e.type),v=e.type==="polygon"||e.type==="star",E=e.type==="text",C=x=>Math.round(x*100)/100;return l.jsxs(l.Fragment,{children:[h&&l.jsxs(en,{label:"Заливка",htmlFor:`${e.id}-ctx-fill`,children:[l.jsx("input",{type:"checkbox",checked:e.fill!=="none"&&!p,onChange:x=>m(x.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]",disabled:p}),l.jsx(Jt,{id:`${e.id}-ctx-fill`,value:e.fill==="none"?"#000000":e.fill,onChange:x=>d({fill:x}),onPreview:x=>n(e.id,{fill:x}),onCancel:i,disabled:e.fill==="none"||p})]}),b&&l.jsxs(l.Fragment,{children:[l.jsxs(en,{label:"Контур",htmlFor:`${e.id}-ctx-stroke`,children:[l.jsx("input",{type:"checkbox",checked:e.stroke!=="none",onChange:x=>g(x.target.checked),className:"w-4 h-4 rounded text-[var(--accent-primary)] focus:ring-[var(--accent-primary-hover)] bg-[var(--bg-secondary)] border-[var(--border-primary)]"}),l.jsx(Jt,{id:`${e.id}-ctx-stroke`,value:e.stroke==="none"?"#ffffff":e.stroke,onChange:x=>d({stroke:x}),onPreview:x=>n(e.id,{stroke:x}),onCancel:i,disabled:e.stroke==="none"})]}),l.jsx(en,{label:"Товщина",htmlFor:`${e.id}-ctx-strokeWidth`,children:l.jsx("div",{className:"w-16",children:l.jsx(Ce,{id:`${e.id}-ctx-strokeWidth`,min:0,value:e.strokeWidth,onChange:x=>d({strokeWidth:x}),disabled:e.stroke==="none"})})})]}),v&&l.jsx(en,{label:"Сторони",htmlFor:`${e.id}-ctx-sides`,children:l.jsx("div",{className:"w-20",children:l.jsx(Ce,{id:`${e.id}-ctx-sides`,min:3,max:50,value:e.sides,onChange:x=>d({sides:x})})})}),E&&l.jsxs(l.Fragment,{children:[l.jsx(en,{label:"Колір",htmlFor:`${f.id}-ctx-fill`,children:l.jsx(Jt,{id:`${f.id}-ctx-fill`,value:f.fill,onChange:x=>d({fill:x}),onPreview:x=>n(f.id,{fill:x}),onCancel:i})}),l.jsx(en,{label:"Шрифт",htmlFor:`${f.id}-ctx-font`,children:l.jsxs(fn,{id:`${f.id}-ctx-font`,value:f.font,onChange:x=>d({font:x}),className:"w-32 py-0.5",children:[Object.entries(c).map(([x,S])=>l.jsx("optgroup",{label:x,children:S.map(w=>l.jsx("option",{value:w,children:w},w))},x)),l.jsx("optgroup",{label:"Шрифти Tkinter",children:u.map(x=>l.jsx("option",{value:x,children:x},x))})]})}),l.jsx(en,{label:"Розмір",htmlFor:`${f.id}-ctx-fontSize`,children:l.jsx("div",{className:"w-20",children:l.jsx(Ce,{id:`${f.id}-ctx-fontSize`,min:1,value:C(f.fontSize),onChange:x=>d({fontSize:x})})})}),l.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[l.jsx("button",{title:"Виразний",onClick:()=>d({weight:f.weight==="bold"?"normal":"bold"}),className:`p-1.5 rounded ${f.weight==="bold"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(NT,{size:16})}),l.jsx("button",{title:"Курсив",onClick:()=>d({slant:f.slant==="italic"?"roman":"italic"}),className:`p-1.5 rounded ${f.slant==="italic"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(_T,{size:16})}),l.jsx("button",{title:"Підкреслений",onClick:()=>d({underline:!f.underline}),className:`p-1.5 rounded ${f.underline?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(RT,{size:16})}),l.jsx("button",{title:"Закреслений",onClick:()=>d({overstrike:!f.overstrike}),className:`p-1.5 rounded ${f.overstrike?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(jT,{size:16})})]}),l.jsxs("div",{className:"flex items-center gap-0.5 bg-[var(--bg-app)] p-0.5 rounded-md",children:[l.jsx("button",{title:"Ліворуч",onClick:()=>d({justify:"left"}),className:`p-1.5 rounded ${f.justify==="left"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(DT,{size:16})}),l.jsx("button",{title:"Центр",onClick:()=>d({justify:"center"}),className:`p-1.5 rounded ${f.justify==="center"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(IT,{size:16})}),l.jsx("button",{title:"Праворуч",onClick:()=>d({justify:"right"}),className:`p-1.5 rounded ${f.justify==="right"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)]"}`,children:l.jsx(LT,{size:16})})]})]})]})},j4=St.memo(e=>{const{isGenerating:t,hasShapes:n,onUndo:i,onRedo:o,canUndo:r,canRedo:c,onDuplicate:u,isShapeSelected:f,onOpenMobileLeft:d,onOpenMobileRight:m,selectedShape:g,activeTool:h,setActiveTool:p,onGenerate:b,showGenerateButton:v,onClear:E}=e;return l.jsxs("div",{className:"bg-[var(--bg-primary)] p-2 flex-shrink-0 flex flex-wrap items-center justify-between gap-x-3 gap-y-2 select-none",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{title:"Скасувати (Ctrl+Z)",onClick:i,disabled:!r,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:l.jsx(nT,{})}),l.jsx("button",{title:"Повернути (Ctrl+Y)",onClick:o,disabled:!c,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:l.jsx(iT,{})}),l.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),l.jsx("button",{title:"Вибрати (V)",onClick:()=>p("select"),className:`p-2 rounded-md ${h==="select"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:l.jsx(jv,{})}),l.jsx("button",{title:"Редагувати вузли (A)",onClick:()=>p("edit-points"),className:`p-2 rounded-md ${h==="edit-points"?"bg-[var(--accent-primary)] text-[var(--accent-text)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:l.jsx(Dv,{})}),l.jsx("button",{title:"Дублювати (Ctrl+D)",onClick:u,disabled:!f,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] disabled:text-[var(--text-disabled)] disabled:hover:bg-transparent",children:l.jsx(t0,{})}),l.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1"}),l.jsx("div",{className:"md:hidden flex items-center gap-2",children:l.jsx("button",{onClick:d,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:l.jsx(rT,{})})})]}),l.jsx("div",{className:"flex items-center gap-x-2 gap-y-2 flex-wrap",children:g?l.jsx(R4,{...e}):l.jsx(_4,{...e})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"md:hidden flex items-center gap-2",children:l.jsx("button",{onClick:m,className:"p-2 rounded-md text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]",children:l.jsx(Id,{})})}),l.jsx("div",{className:"w-px h-6 bg-[var(--border-secondary)] mx-1 md:hidden"}),l.jsxs("button",{onClick:E,disabled:!n,className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--destructive-bg)] text-[var(--accent-text)] hover:bg-[var(--destructive-bg-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[l.jsx(wc,{size:16}),l.jsx("span",{children:"Очистити"})]}),v&&l.jsxs("button",{onClick:b,disabled:t||!n,className:"flex items-center gap-2 px-4 py-1.5 text-sm rounded-md font-semibold transition-colors duration-200 bg-[var(--accent-primary)] text-[var(--accent-text)] hover:bg-[var(--accent-primary-hover)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed",children:[l.jsx(Id,{}),l.jsx("span",{children:t?"Генерація...":"Згенерувати код"})]})]})]})});function D4(){const{state:e,setState:t,undo:n,redo:i,canUndo:o,canRedo:r,reset:c}=ZT([]),[u,f]=T.useState("Новий малюнок. ВереTkа"),[d,m]=T.useState("select"),[g,h]=T.useState(null),[p,b]=T.useState(null),[v,E]=T.useState(!1),[C,x]=T.useState([]),[S,w]=T.useState(!1),[A,D]=T.useState([]),[_,M]=T.useState(null),[L,P]=T.useState("corner"),[Z,pe]=T.useState(!0),[Te,_e]=T.useState(!0),[de,ee]=T.useState("#4f46e5"),[xe,O]=T.useState("#000000"),[H,oe]=T.useState(1),[le,be]=T.useState(5),[Ee,G]=T.useState("#000000"),[te,X]=T.useState(null),[y,V]=T.useState("Arial"),[B,me]=T.useState(24),[re,ye]=T.useState([]),[Ue,et]=T.useState(!1),[_t,Ut]=T.useState(null),[ut,on]=T.useState(null),[Rt,Dn]=T.useState(null),[oo,Uo]=T.useState(!1),[Kl,ni]=T.useState(!1),[Ac,ws]=T.useState("canvas"),[Nc,Zl]=T.useState(!1),[_c,Po]=T.useState(!1),[Ql,lo]=T.useState(!1),[lm,er]=T.useState(!1),[Rc,tr]=T.useState(!1),[ln,Es]=T.useState(!1),[ks,Ms]=T.useState(!1),[As,Vo]=T.useState(!1),[nr,Ti]=T.useState(!1),[Bo,k]=T.useState(null),[j,K]=T.useState(800),[ce,ne]=T.useState(600),[I,z]=T.useState("#ffffff"),[Y,W]=T.useState("c"),[$,ve]=T.useState(!0),[F,se]=T.useState(10),[he,Le]=T.useState(!0),[Et,Gn]=T.useState(1),[Pt,bn]=T.useState(!0),[De,dt]=T.useState(!0),[jt,In]=T.useState(!0),[We,rt]=T.useState(!0),[ke,Pe]=T.useState(!0),[Be,ft]=T.useState(!0),[Fe,Ht]=T.useState("local"),[pt,Si]=T.useState(!0),[zt,Fo]=T.useState(!0),[Vt,ro]=T.useState(!0),[ir,Ns]=T.useState(!!document.fullscreenElement),[or,_s]=T.useState({}),[so,Rs]=T.useState(null),[ao,js]=T.useState(null),[jc,Ds]=T.useState(null),[Bt,$o]=T.useState({scale:1,x:50,y:50}),[q0,O0]=T.useState(null),lr=T.useRef(null),[rn,Y0]=T.useState({width:0,height:0}),[J0,rm]=T.useState(!1),[W0,sm]=T.useState(!1),[X0,Dc]=T.useState(null),am=T.useRef(null),cm=T.useRef(null),[co,um]=T.useState("dark"),[Go,Ho]=T.useState(null),[uo,sn]=T.useState(null),[qt,Is]=T.useState(!1),{projects:Ic,addRecentProject:fo,openRecentProject:dm,removeRecentProject:fm,clearAllProjects:mm}=b4(),[hm,K0]=T.useState(!1),[Ls,Us]=T.useState([]),[Z0,gm]=T.useState(!1),[Lc,Uc]=T.useState(null),[pm,xm]=T.useState(!1),[rr,Pc]=T.useState(new Set),Q0=T.useCallback(R=>{Pc(R==="000"?new Set:N=>new Set(N).add(R))},[]);T.useEffect(()=>{const R=N=>{N.ctrlKey&&N.altKey&&N.key.toLowerCase()==="c"&&(N.preventDefault(),xm(!0))};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[]);const sr=T.useMemo(()=>(Be?re:re.filter(N=>!N.content.trim().startsWith("#"))).map(N=>N.content).join(`
`),[re,Be]);T.useEffect(()=>{try{const R=localStorage.getItem("veretka-project-templates");if(R){const N=JSON.parse(R);Array.isArray(N)&&Us(N)}}catch(R){console.error("Failed to load project templates from localStorage",R)}},[]),T.useEffect(()=>{const R=()=>{K0(window.innerWidth<E4)};return R(),window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}},[]),T.useEffect(()=>{document.body.className=`${co}-theme bg-[var(--bg-app)] text-[var(--text-primary)] font-sans`},[co]),T.useEffect(()=>{Fe==="gemini"&&Si(!1)},[Fe]);const ym=T.useCallback((R,N,q,U)=>{const Q=Ep(R,N,q,U),ie=unescape(encodeURIComponent(Q));return`data:image/svg+xml;base64,${btoa(ie)}`},[]),an=T.useCallback((R,N)=>JSON.stringify({projectName:R,shapes:N,canvasSettings:{width:j,height:ce,bgColor:I,varName:Y},uiSettings:{theme:co,showGrid:$,gridSize:F,snapToGrid:he,gridSnapStep:Et,showAxes:De,showCursorCoords:jt,showRotationAngle:We,showLineNumbers:ke,showTkinterNames:Pt,generatorType:Fe,highlightCodeOnSelection:pt,autoGenerateComments:zt,showComments:Be,outlineWithFill:Vt}}),[j,ce,I,Y,co,$,F,he,Et,De,jt,We,ke,Pt,Fe,pt,zt,Be,Vt]),Hn=T.useRef(""),[ii,e1]=T.useState(!1);T.useEffect(()=>{if(!qt)return;const R=an(u,e);Hn.current===""&&(Hn.current=R),e1(R!==Hn.current)},[u,e,an,qt]),T.useEffect(()=>{const R=N=>{ii&&(N.preventDefault(),N.returnValue="")};return window.addEventListener("beforeunload",R),()=>{window.removeEventListener("beforeunload",R)}},[ii]);const t1=T.useMemo(()=>Object.keys(or).length===0?e:e.map(R=>{const N=or[R.id];return N?{...R,...N}:R}),[e,or]),zo=T.useCallback(()=>{_s({})},[]);T.useEffect(()=>{zo()},[g,zo]);const wi=T.useCallback(()=>{if(rn.width===0||rn.height===0)return;const R=10,N=De?Ri:0,q=rn.width-N,U=rn.height-N;if(q<=0||U<=0)return;const Q=q-R*2,ie=U-R*2,Se=Q/j,Ae=ie/ce,tt=Math.min(Se,Ae,Np),cn=j*tt,vt=ce*tt,Mi=(q-cn)/2,fr=(U-vt)/2;$o({scale:tt,x:Mi,y:fr})},[j,ce,rn,De]),vm=T.useRef(!1);T.useEffect(()=>{!vm.current&&rn.width>0&&rn.height>0&&(wi(),vm.current=!0)},[rn,wi]),T.useEffect(()=>{const R=lr.current;if(!R||!qt)return;const N=new ResizeObserver(q=>{for(let U of q)Y0({width:U.contentRect.width,height:U.contentRect.height})});return N.observe(R),()=>N.disconnect()},[qt]);const fe=T.useCallback((R,N="info",q=3e3)=>{on({message:R,type:N}),setTimeout(()=>on(null),q)},[]),ar=T.useCallback((R,N=!1)=>{t(q=>[...q,R]),(N||R.type!=="polyline"&&R.type!=="bezier")&&(h(R.id),m("select"))},[t]),Ei=T.useCallback(R=>{zo(),t(N=>N.map(q=>q.id===R.id?R:q)),R.id===g&&R.state!=="normal"&&(h(null),M(null))},[t,g,zo]),bm=T.useCallback((R,N)=>{_s({[R]:N})},[]),qo=T.useCallback(R=>{t(N=>N.filter(q=>q.id!==R)),g===R&&(h(null),M(null))},[g,t]),Vc=T.useCallback((R,N)=>{t(q=>q.map(U=>{if(U.id===R&&"points"in U&&U.points.length>2){const Q=[...U.points];switch(Q.splice(N,1),U.type){case"pencil":case"polyline":case"bezier":return{...U,points:Q};default:return U}}return U})),M(null)},[t]),n1=T.useCallback((R,N)=>{const q=U=>{if(["polyline","bezier","line","pencil"].includes(U.type))return U;const Q=Xf(U);if(!Q)return null;const ie=U.type==="arc"?U.style!=="arc":!0,Se={id:U.id,name:void 0,type:"polyline",points:Q,isClosed:ie,rotation:"rotation"in U?U.rotation:0,state:U.state,stroke:U.stroke,strokeWidth:U.strokeWidth,fill:"fill"in U&&typeof U.fill=="string"&&ie?U.fill:"none",joinstyle:"joinstyle"in U&&U.joinstyle?U.joinstyle:void 0};return Se.name=Yt(Se),Se};t(U=>{const Q=U.findIndex(fr=>fr.id===R);if(Q===-1)return U;let ie=U[Q],Se=q(ie);if(!Se)return U;const Ae=[...Se.points],tt=Ae[N-1],cn=Se.isClosed?Ae[N%Ae.length]:Ae[N];if(!tt||!cn)return U;const vt={x:(tt.x+cn.x)/2,y:(tt.y+cn.y)/2};Ae.splice(N,0,vt),Se.points=Ae;const Mi=[...U];return Mi[Q]=Se,Mi}),M(N)},[t]),cr=T.useCallback(R=>{const N=e.find(Q=>Q.id===R);if(!N)return;let q;switch(N.type){case"line":q={...N,points:[{...N.points[0]},{...N.points[1]}]};break;case"pencil":case"polyline":case"bezier":q={...N,points:N.points.map(Q=>({...Q}))};break;default:q={...N}}q.id=new Date().toISOString();const U=10;switch(q.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":q.x+=U,q.y+=U;break;case"ellipse":case"polygon":case"star":q.cx+=U,q.cy+=U;break;case"line":q.points[0].x+=U,q.points[0].y+=U,q.points[1].x+=U,q.points[1].y+=U;break;case"pencil":case"polyline":case"bezier":q.points=q.points.map(Q=>({x:Q.x+U,y:Q.y+U}));break}t(Q=>[...Q,q]),h(q.id),fe("Фігуру дубльовано.")},[e,t,fe]),i1=T.useCallback((R,N)=>{t(q=>{const U=q.findIndex(Se=>Se.id===R);if(U===-1)return q;const Q=[...q],ie=N==="up"?U+1:U-1;return ie<0||ie>=Q.length?q:([Q[U],Q[ie]]=[Q[ie],Q[U]],Q)})},[t]),o1=T.useCallback((R,N,q)=>{t(U=>{const Q=U.findIndex(vt=>vt.id===R),ie=U.findIndex(vt=>vt.id===N);if(Q===-1||ie===-1||Q===ie)return U;const Se=[...U],[Ae]=Se.splice(Q,1),tt=Se.findIndex(vt=>vt.id===N),cn=q==="top"?tt+1:tt;return Se.splice(cn,0,Ae),Se})},[t]),Bc=T.useCallback(R=>{const N=e.find(Ae=>Ae.id===R);if(!N||["polyline","bezier","pencil","line","text","image","bitmap"].includes(N.type))return;const q=ti(N);if(!q)return;const U=N.type!=="arc"||N.style!=="arc",Q={id:N.id,name:void 0,type:"polyline",points:q,isClosed:U,rotation:0,state:N.state,stroke:N.stroke,strokeWidth:N.strokeWidth,fill:"fill"in N&&typeof N.fill=="string"&&U?N.fill:"none",joinstyle:"joinstyle"in N&&N.joinstyle?N.joinstyle:void 0,dash:"dash"in N?N.dash:void 0,dashoffset:"dashoffset"in N?N.dashoffset:void 0,smooth:"smooth"in N?N.smooth:void 0,stipple:"stipple"in N?N.stipple:void 0,capstyle:void 0,arrow:void 0,arrowshape:void 0,activeStroke:void 0,isAspectRatioLocked:"isAspectRatioLocked"in N?N.isAspectRatioLocked:!1},ie=N.name,Se=!ie||Ka(ie);Q.name=Se?Yt(Q):ie,Ei(Q),m("edit-points"),fe("Фігуру перетворено на контур.")},[e,Ei,fe]),Cm=T.useCallback(R=>{h(R),E(!1),x([]),w(!1),D([]),M(null),(R===null&&d==="edit-points"||R&&d!=="edit-points")&&m("select")},[d]),Fc=T.useCallback(R=>{const N=C.filter(Q=>Q);if(N.length<2){E(!1),x([]);return}let q=[...N];if(q.length>1){const Q=q[q.length-1],ie=q[q.length-2];Q&&ie&&Q.x===ie.x&&Q.y===ie.y&&q.pop()}if(q.length<2){E(!1),x([]);return}const U={id:new Date().toISOString(),name:R?"Багатокутник":"Ламана",type:"polyline",points:q,isClosed:R,fill:R&&Z?so??de:"none",stroke:Te?ao??xe:"none",strokeWidth:Te?H:0,state:"normal",rotation:0,capstyle:"round",isAspectRatioLocked:!1};ar(U),E(!1),x([]),m("select"),h(U.id)},[C,ar,Z,de,Te,xe,H,so,ao]),l1=T.useCallback(()=>{E(!1),x([]),m("select")},[]),r1=T.useCallback(R=>{const N=A.filter(Boolean);if(N.length<2){w(!1),D([]);return}let q=[...N];if(q.length>1){const Q=q[q.length-1],ie=q[q.length-2];Q&&ie&&Q.x===ie.x&&Q.y===ie.y&&q.pop()}if(q.length<2){w(!1),D([]);return}const U={id:new Date().toISOString(),name:R?"Багатокутник":"Крива Без'є",type:"bezier",points:q,smooth:!0,splinesteps:12,stroke:Te?ao??xe:"none",strokeWidth:Te?H:0,rotation:0,capstyle:"round",state:"normal",isClosed:R,fill:R&&Z?so??de:"none",isAspectRatioLocked:!1};ar(U),w(!1),D([]),m("select"),h(U.id)},[A,ar,Te,xe,H,Z,de,so,ao]),$c=T.useCallback(()=>{w(!1),D([]),m("select")},[]),s1=R=>{var q;const N=(q=R.target.files)==null?void 0:q[0];if(N){const U=new FileReader;U.onload=Q=>{var Se;const ie=(Se=Q.target)==null?void 0:Se.result;Dc(ie),m("image"),fe("Клацніть на полотні, щоб розмістити зображення.")},U.readAsDataURL(N)}R.target&&(R.target.value="")},ur=T.useCallback(R=>{var q;if(R==="edit-points"){const U=e.find(Q=>Q.id===g);if((U==null?void 0:U.type)==="text"){fe("Режим редагування вузлів недоступний для тексту.","info");return}}v&&Fc(!1),S&&$c(),M(null),R==="select"||R==="edit-points"||h(null),R==="polyline"?(E(!0),x([])):E(!1),R==="bezier"?(w(!0),D([])):w(!1),R==="image"?(q=am.current)==null||q.click():(Dc(null),m(R))},[v,S,Fc,$c,e,g,fe]),dr=T.useMemo(()=>{const R=e.find(N=>(N==null?void 0:N.id)===g)??null;return R?{...R}:null},[e,g]),Tm=T.useMemo(()=>p&&e.find(R=>R.id===p)||null,[e,p]),Gc=T.useCallback(async()=>{if(e.length===0){fe("Спочатку намалюйте щось на полотні!","info");return}if(Fe==="gemini"&&!Bo){fe("Будь ласка, введіть ваш ключ Gemini API у налаштуваннях.","info"),Ti(!0);return}et(!0),Ut(null),ye([]);let R=e;rr.has("002")&&(R=e.filter(N=>N.type!=="image"));try{if(Fe==="local"){const{codeLines:N}=await wp(R,j,ce,I,u,Y,zt,Vt);ye(N)}else{const U=(await W3(Bo,R,j,ce,I,u,Y,zt,Vt)).split(`
`).map(Q=>{const ie=Q.match(/(.*?) # ID:([a-zA-Z0-9.-]+)/);return ie&&ie[1]&&ie[2]?{content:ie[1].trim(),shapeId:ie[2]}:{content:Q,shapeId:null}});ye(U)}Dn(JSON.parse(JSON.stringify(e))),fe("Код успішно згенеровано!","info")}catch(N){const q=N instanceof Error?N.message:"Сталася невідома помилка.";Ut(`Не вдалося згенерувати код: ${q}`),fe("Помилка генерації коду.","error",5e3)}finally{et(!1)}},[e,j,ce,I,u,Fe,Y,zt,Bo,rr,Vt,fe]);T.useEffect(()=>{Fe==="local"&&qt&&(async()=>{let N=e;rr.has("002")&&(N=e.filter(U=>U.type!=="image"));const{codeLines:q}=await wp(N,j,ce,I,u,Y,zt,Vt);ye(q),Dn(JSON.parse(JSON.stringify(e)))})()},[e,j,ce,I,Fe,u,qt,Y,zt,rr,Vt]);const a1=T.useMemo(()=>Rt?JSON.stringify(e)!==JSON.stringify(Rt):!1,[e,Rt]),Hc=()=>{c([]),ye([]),Ut(null),h(null),M(null),E(!1),x([]),w(!1),D([]),Dn(null),Pc(new Set),Ho(null),localStorage.removeItem(On)},ki=T.useCallback((R,N,q,U,Q,ie)=>{if(!ii){R();return}sn({title:N,message:q,onConfirm:()=>{R(),sn(null)},confirmText:U,cancelText:Q,variant:ie})},[ii]),c1=T.useCallback(()=>{ki(()=>{Hc(),fe("Полотно очищено.")},"Очистити полотно?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[ki,fe]),u1=T.useCallback((R,N)=>{if(Hc(),f(R.projectName),K(R.width),ne(R.height),z(R.bgColor),W(R.canvasVarName),N){const q=Ls.find(U=>U.id===N);if(q){const U=JSON.parse(JSON.stringify(q.shapes));c(U),Hn.current=an(R.projectName,U)}else c([]),Hn.current=an(R.projectName,[])}else c([]),Hn.current=an(R.projectName,[]);localStorage.removeItem(On),gm(!0),Po(!1),Is(!0),setTimeout(wi,0)},[an,wi,Ls,c]),Sm=T.useCallback(()=>{ki(()=>Po(!0),"Створити новий проєкт?","Усі незбережені зміни в поточному проєкті буде втрачено. Ви впевнені?")},[ki]),d1=T.useCallback(()=>{ki(()=>Is(!1),"Повернутись на головну?","У вас є незбережені зміни. Ваша робота періодично автозберігається. Якщо ви вийдете, ви зможете відновити останню автозбережену версію при наступному запуску. Продовжити вихід на головний екран?","Так, вийти","Скасувати","primary")},[ki]),Oo=T.useCallback(R=>({projectName:R,shapes:e,thumbnail:ym(e,j,ce,I),canvasSettings:{width:j,height:ce,bgColor:I,varName:Y},viewTransform:Bt,uiSettings:{theme:co,showGrid:$,gridSize:F,snapToGrid:he,gridSnapStep:Et,showAxes:De,showCursorCoords:jt,showRotationAngle:We,showLineNumbers:ke,showTkinterNames:Pt,generatorType:Fe,highlightCodeOnSelection:pt,autoGenerateComments:zt,showComments:Be,outlineWithFill:Vt}}),[e,j,ce,I,Y,Bt,co,$,F,he,Et,De,jt,We,ke,Pt,Fe,pt,zt,Be,Vt,ym]),zc=T.useCallback(async()=>{if(!ii&&Go){fe("Незбережених змін немає.","info");return}const R=Oo(u);if(Go)try{await H0(Go,JSON.stringify(R,null,2)),Hn.current=an(u,e),fo(Go,R.thumbnail),fe("Проєкт збережено.","info"),localStorage.removeItem(On)}catch(N){console.error("Не вдалося зберегти у файл",N),fe('Не вдалося зберегти у файл. Спробуйте "Зберегти як...".',"error")}else try{const N=JSON.stringify(R,null,2),q=await Tr(N,`${u}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(q){const U=q.name.replace(/\.vec.json$/,"");Ho(q),f(U),Hn.current=an(U,e),fo(q,R.thumbnail),fe("Проєкт збережено.","info"),localStorage.removeItem(On)}}catch(N){console.error("Не вдалося зберегти проєкт",N),fe("Не вдалося зберегти проєкт.","error")}},[ii,Go,Oo,u,an,e,fo,fe]),f1=T.useCallback(async R=>{lo(!1);try{const N=Oo(R),q=JSON.stringify(N,null,2),U=await Tr(q,`${R}.vec.json`,[{description:"Векторний проєкт",accept:{"application/json":[".vec.json",".json"]}}],"application/json");if(U){const Q=U.name.replace(/\.vec.json$/,"");Ho(U),f(Q),Hn.current=an(Q,e),fo(U,N.thumbnail),fe("Проєкт збережено.","info"),localStorage.removeItem(On)}}catch(N){console.error("Не вдалося зберегти проєкт",N),fe("Не вдалося зберегти проєкт.","error")}},[Oo,e,fo,an,fe]),m1=T.useCallback(R=>{const N={id:Date.now().toString(),name:R,settings:{projectName:`Проєкт (з шаблону "${R}")`,width:j,height:ce,bgColor:I,canvasVarName:Y},shapes:JSON.parse(JSON.stringify(e))};Us(q=>{const U=[...q,N];try{localStorage.setItem("veretka-project-templates",JSON.stringify(U)),fe(`Шаблон "${R}" збережено.`,"info")}catch(Q){console.error("Failed to save project templates to localStorage",Q),fe("Не вдалося зберегти шаблон.","error")}return U}),tr(!1)},[e,j,ce,I,Y,fe]),h1=T.useCallback(R=>{sn({title:"Видалити шаблон?",message:"Ця дія назавжди видалить цей шаблон. Ви впевнені?",onConfirm:()=>{Us(N=>{const q=N.filter(U=>U.id!==R);try{localStorage.setItem("veretka-project-templates",JSON.stringify(q)),fe("Шаблон видалено.","info")}catch(U){console.error("Failed to delete project template from localStorage",U),fe("Не вдалося видалити шаблон.","error")}return q}),sn(null)}})},[fe]),g1=T.useCallback((R,N)=>{Us(q=>{const U=q.map(Q=>Q.id===R?{...Q,name:N}:Q);try{localStorage.setItem("veretka-project-templates",JSON.stringify(U)),fe("Шаблон перейменовано.","info")}catch(Q){console.error("Failed to rename project template in localStorage",Q),fe("Не вдалося перейменувати шаблон.","error")}return U})},[fe]),Yo=T.useCallback((R,N,q)=>{try{const U=JSON.parse(R);if(U.shapes&&U.canvasSettings&&U.viewTransform){const Q=U.projectName||(N?N.replace(/\.vec.json$/,""):"Завантажений проєкт");Hc(),c(U.shapes),f(Q),K(U.canvasSettings.width),ne(U.canvasSettings.height),z(U.canvasSettings.bgColor),W(U.canvasSettings.varName||"c"),$o(U.viewTransform);const ie=U.uiSettings||{};um(ie.theme||"dark"),ve(ie.showGrid??!0),se(ie.gridSize||10),Le(ie.snapToGrid??!0),Gn(ie.gridSnapStep||1),dt(ie.showAxes??!0),In(ie.showCursorCoords??!0),rt(ie.showRotationAngle??!0),Pe(ie.showLineNumbers??!0),ft(ie.showComments??!0),bn(ie.showTkinterNames??!0),Ht(ie.generatorType||"local"),Si(ie.highlightCodeOnSelection??!0),Fo(ie.autoGenerateComments??!0),ro(ie.outlineWithFill??!0),Hn.current=an(Q,U.shapes),(d==="polyline"||d==="bezier")&&m("select"),gm(!0),Is(!0),q&&fo(q,U.thumbnail),fe("Проєкт успішно завантажено.","info"),localStorage.removeItem(On),setTimeout(wi,0)}else fe("Неправильний формат файлу проєкту.","error")}catch(U){console.error("Помилка парсингу файлу проєкту",U),fe("Не вдалося завантажити проєкт. Файл пошкоджено.","error")}},[c,an,fo,wi,d,fe]),wm=T.useCallback(async()=>{var N;let R=null;if(typeof window.showOpenFilePicker=="function")try{R=await d4()}catch(q){console.error("Не вдалося завантажити проєкт через API",q),fe("Не вдалося завантажити проєкт.","error");return}R?(Yo(R.content,R.handle.name,R.handle),Ho(R.handle)):(N=cm.current)==null||N.click()},[Yo,fe]),Em=T.useCallback(()=>{ki(wm,"Завантажити проєкт?","Усі незбережені зміни буде втрачено. Ви впевнені?")},[ki,wm]),p1=R=>{var U;const N=(U=R.target.files)==null?void 0:U[0];if(!N)return;const q=new FileReader;q.onload=Q=>{var ie;try{const Se=(ie=Q.target)==null?void 0:ie.result;Ho(null),Yo(Se,N.name)}catch(Se){console.error("Не вдалося завантажити проєкт",Se),fe("Не вдалося завантажити проєкт. Файл може бути пошкоджений.","error")}},q.onerror=()=>{fe("Не вдалося прочитати файл.","error")},q.readAsText(N),R.target&&(R.target.value="")},x1=T.useCallback(async R=>{Zl(!1),fe("Експорт зображення...","info",1500);try{const N=Ep(e,j,ce,I),q=`${u}.${R.format}`;if(R.format==="svg")await Tr(N,q,[{description:"SVG Зображення",accept:{"image/svg+xml":[".svg"]}}],"image/svg+xml");else{const U=await h4(R.format,N,j,ce,R.scale,R.quality),ie=await(await fetch(U)).blob(),Se=R.format==="png"?"image/png":"image/jpeg",Ae=R.format==="png"?"PNG Зображення":"JPEG Зображення";await Tr(ie,q,[{description:Ae,accept:{[Se]:[`.${R.format}`]}}],Se)}fe("Зображення успішно експортовано!","info")}catch(N){console.error("Помилка експорту:",N),fe("Не вдалося експортувати зображення.","error")}},[e,j,ce,I,u,fe]),y1=T.useCallback(async R=>{try{const N=await dm(R);N&&(Yo(N,R.name,R.handle),Ho(R.handle))}catch(N){console.error("Не вдалося відкрити останній проєкт:",N),fe(`Не вдалося відкрити проєкт: ${N instanceof Error?N.message:"Невідома помилка"}.`,"error",5e3)}},[dm,Yo,fe]),v1=T.useCallback(R=>{sn({title:`Видалити "${R.name.replace(/\.vec\.json$/,"")}"?`,message:"Ця дія видалить проєкт лише зі списку останніх, а не сам файл. Ви впевнені?",onConfirm:()=>{fm(R.name),fe("Проєкт видалено зі списку."),sn(null)}})},[fm,fe]),b1=T.useCallback(()=>{Ic.length!==0&&sn({title:"Очистити список останніх проєктів?",message:"Ця дія видалить усі проєкти зі списку, але не самі файли. Ви впевнені?",onConfirm:()=>{mm(),fe("Список останніх проєктів очищено."),sn(null)}})},[mm,Ic.length,fe]),C1=T.useCallback(async(R,N,q)=>{er(!1);let U,Q,ie,Se;if(N===".txt"&&q?U=re.filter(Ae=>Be||!Ae.content.trim().startsWith("#")).map((Ae,tt)=>`${String(tt+1).padStart(4," ")} | ${Ae.content}`).join(`
`):U=sr,!U){fe("Немає коду для збереження.","error");return}N===".py"?(Q="Python файл",ie="text/python",Se={[ie]:[".py"]}):(Q="Текстовий файл",ie="text/plain",Se={[ie]:[".txt"]});try{await Tr(U,`${R}${N}`,[{description:Q,accept:Se}],ie),fe("Файл успішно збережено.","info")}catch(Ae){console.error("Не вдалося зберегти файл:",Ae),fe("Не вдалося зберегти файл.","error")}},[sr,re,Be,fe]),T1=T.useCallback(R=>{const N=sr;if(!N){fe("Немає коду для запуску.","error");return}const q=()=>{try{const ie=new TextEncoder().encode(N);let Se="";ie.forEach(vt=>{Se+=String.fromCharCode(vt)});const Ae=btoa(Se),cn=`https://yepython.pp.ua/?${R?"runcode":"code"}=${Ae}`;window.open(cn,"_blank","noopener,noreferrer")}catch(Q){console.error("Error creating online IDE link:",Q),fe("Не вдалося створити посилання для онлайн IDE.","error")}};N.length>1500?sn({title:"Код занадто великий",message:"Згенерований код може бути занадто великим для прямого відкриття в онлайн IDE, що може спричинити помилку 'URI Too Long'. Рекомендується скопіювати код або зберегти його у файл і відкрити вручну. Бажаєте продовжити спробу відкриття?",onConfirm:()=>{q(),sn(null)},variant:"primary",confirmText:"Спробувати все одно",cancelText:"Скасувати"}):sn({title:"Перехід на зовнішній ресурс",message:"Ви збираєтеся відкрити код у онлайн-редакторі ЄPython. Деякі елементи (напр. специфічні шрифти, кольори) можуть відображатися інакше, ніж у редакторі. Продовжити?",onConfirm:()=>{q(),sn(null)},variant:"primary",confirmText:"Так, перейти",cancelText:"Залишитись"})},[sr,fe]),km=T.useCallback(()=>{g&&cr(g)},[g,cr]),S1=T.useCallback(()=>{g&&qo(g)},[g,qo]),w1=T.useMemo(()=>dr?["rectangle","ellipse","triangle","right-triangle","rhombus","trapezoid","parallelogram","polygon","star","arc"].includes(dr.type):!1,[dr]),qc=T.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(R=>{fe(`Не вдалося увійти в повноекранний режим: ${R.message}`,"error")})},[fe]),E1=T.useCallback(()=>{if(!g||!lr.current)return;const R=e.find(O1=>O1.id===g);if(!R)return;const N=Xa(R);if(!N||N.width===0||N.height===0)return;const q=De?Ri:0,U=rn.width-q,Q=rn.height-q,ie=.8,Se=U*ie,Ae=Q*ie,tt=Se/N.width,cn=Ae/N.height;let vt=Math.min(tt,cn);vt=Math.max(w4,Math.min(Np,vt));const Mi=N.x+N.width/2,fr=N.y+N.height/2,G1=U/2,H1=Q/2,z1=G1-Mi*vt,q1=H1-fr*vt;$o({scale:vt,x:z1,y:q1})},[g,e,De,rn,$o]);T.useEffect(()=>{const R=()=>{Ns(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",R),()=>{document.removeEventListener("fullscreenchange",R)}},[]),T.useEffect(()=>{const R=N=>{if(N.key==="F11"){N.preventDefault(),qc();return}if(N.key==="Escape"&&ir&&N.preventDefault(),!(N.target.matches('input, textarea, [contenteditable="true"]')||p)){if(N.ctrlKey||N.metaKey)switch(N.code){case"KeyD":g&&(N.preventDefault(),cr(g));return;case"KeyZ":N.preventDefault(),N.shiftKey?r&&i():o&&n();return;case"KeyY":N.preventDefault(),r&&i();return;case"KeyS":N.preventDefault(),zc();return}if(g&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(N.code)){N.preventDefault();const U=e.find(tt=>tt.id===g);if(!U)return;const Q=N.shiftKey?10:1;let ie=0,Se=0;switch(N.code){case"ArrowUp":Se=-Q;break;case"ArrowDown":Se=Q;break;case"ArrowLeft":ie=-Q;break;case"ArrowRight":ie=Q;break}if(ie===0&&Se===0)return;let Ae;switch(U.type){case"line":Ae={...U,points:[{...U.points[0]},{...U.points[1]}]};break;case"pencil":case"polyline":case"bezier":Ae={...U,points:U.points.map(tt=>({...tt}))};break;default:Ae={...U}}switch(Ae.type){case"rectangle":case"triangle":case"right-triangle":case"rhombus":case"trapezoid":case"parallelogram":case"arc":case"text":case"image":case"bitmap":Ae.x+=ie,Ae.y+=Se;break;case"ellipse":case"polygon":case"star":Ae.cx+=ie,Ae.cy+=Se;break;case"line":case"pencil":case"polyline":case"bezier":Ae.points=Ae.points.map(tt=>({x:tt.x+ie,y:tt.y+Se}));break}Ei(Ae);return}switch(N.code){case"KeyV":N.preventDefault(),ur("select");return;case"KeyA":N.preventDefault(),ur("edit-points");return;case"Delete":case"Backspace":N.preventDefault(),d==="edit-points"&&g&&_!==null?Vc(g,_):g&&qo(g);return}}};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[g,d,_,Vc,qo,cr,n,i,o,r,zc,ur,e,Ei,p,qc,ir]);const Oc=T.useCallback(R=>{if(!lr.current)return;const{width:N,height:q}=lr.current.getBoundingClientRect(),{scale:U,x:Q,y:ie}=Bt,Se=N/2,Ae=q/2,tt=(Se-Q)/U,cn=(Ae-ie)/U,vt=Se-tt*R,Mi=Ae-cn*R;$o({scale:R,x:vt,y:Mi})},[Bt]),k1=T.useCallback(()=>{Oc(1)},[Oc]),M1=T.useCallback(()=>{g&&Bc(g)},[g,Bc]),A1=T.useCallback(()=>{ws("canvas"),ni(!0)},[]),N1=T.useCallback(()=>{rm(R=>!R)},[]),_1=T.useCallback(()=>{sm(R=>!R)},[]),R1=T.useCallback(()=>{Ht("local"),Ut(null),fe("Перемкнено на локальний генератор. Код буде оновлено автоматично.","info")},[fe]),j1=T.useCallback(()=>{ws("code"),ni(!0)},[]),D1=T.useCallback(R=>{b(R),h(R)},[]),I1=T.useCallback(()=>{e.find(N=>N.id===p)&&t(e),b(null)},[p,e,t]),L1=T.useCallback(R=>{if(!p)return;const N=e.map(U=>U.id===p&&U.type==="text"?{...U,text:R}:U),q=t._internal_setHistory;q?q(U=>{const Q=[...U];return Q[Q.length-1]=N,Q}):t(N)},[p,e,t]),U1=T.useCallback(R=>{k(R),Ti(!1),fe(R?"Ключ API збережено для поточної сесії.":"Ключ API видалено.","info")},[fe]),P1=T.useCallback(R=>{ee(R),Rs(null)},[]),V1=T.useCallback(R=>{O(R),js(null)},[]),B1=T.useCallback(R=>{G(R),X(null)},[]);T.useEffect(()=>{try{const R=localStorage.getItem(On);R&&Uc(R)}catch(R){console.error("Failed to read autosave from localStorage",R)}},[]),T.useEffect(()=>{if(!qt||!ii)return;const R=setInterval(()=>{try{const q={...Oo(u),autosaveTimestamp:new Date().toISOString()};localStorage.setItem(On,JSON.stringify(q)),fe("Проєкт автоматично збережено.","info",1500)}catch(N){console.error("Failed to autosave project to localStorage",N),fe("Помилка автозбереження.","error")}},k4);return()=>clearInterval(R)},[qt,ii,Oo,u,fe]);const F1=()=>{Lc&&(Yo(Lc),Uc(null),localStorage.removeItem(On))},$1=()=>{localStorage.removeItem(On),Uc(null),fe("Автозбережену версію видалено.","info")};return l.jsxs("div",{className:"h-screen bg-[var(--bg-app)] text-[var(--text-primary)] font-sans flex flex-col selection:bg-[var(--accent-primary)] selection:text-[var(--accent-text)] overflow-hidden",children:[hm&&l.jsx("div",{className:"fixed inset-0 bg-[var(--bg-app)] flex items-center justify-center z-[100] text-center p-8",children:l.jsxs("div",{className:"flex flex-col items-center gap-6",children:[l.jsx(UT,{size:96,className:"text-[var(--text-tertiary)]"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-[var(--text-primary)] mb-4",children:"Розмір екрана замалий"}),l.jsxs("p",{className:"text-[var(--text-secondary)]",children:['На жаль, для коректної роботи редактора "ВереTkа" потрібен більший екран.',l.jsx("br",{}),"Будь ласка, відкрийте цей застосунок на комп'ютері чи планшеті або оберніть екран."]})]})]})}),l.jsxs("div",{className:hm?"hidden":"h-full flex flex-col",children:[l.jsx("input",{type:"file",ref:am,style:{display:"none"},accept:"image/png, image/jpeg, image/gif, image/webp",onChange:s1}),l.jsx("input",{type:"file",ref:cm,style:{display:"none"},accept:".json,.vec.json",onChange:p1}),ut&&l.jsx("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 ${ut.type==="error"?"bg-[var(--destructive-bg)]":"bg-[var(--accent-primary)]"} text-[var(--accent-text)] py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in-down`,children:ut.message}),l.jsx(A4,{onGenerate:Gc,showGenerateButton:Fe==="gemini",onNewProject:Sm,onSaveProject:zc,canSave:qt&&(ii||!Go),onSaveProjectAs:()=>lo(!0),onSaveAsTemplate:()=>tr(!0),onLoadProject:Em,onExport:()=>Zl(!0),onUndo:n,onRedo:i,canUndo:o,canRedo:r,onDuplicate:km,isShapeSelected:!!g,onDelete:S1,onConvertToPath:M1,canConvertToPath:w1,onFitCanvasToView:wi,onToggleFullscreen:qc,isFullscreen:ir,showGrid:$,setShowGrid:ve,snapToGrid:he,setSnapToGrid:Le,showAxes:De,setShowAxes:dt,onOpenSettings:A1,theme:co,setTheme:um,projectName:u,isProjectActive:qt,onGoHome:d1,onOpenAbout:()=>Es(!0),onOpenHelp:()=>Ms(!0),onOpenFeedback:()=>Vo(!0)}),qt&&l.jsx(j4,{activeTool:d,setActiveTool:ur,drawMode:L,setDrawMode:P,isFillEnabled:Z,setIsFillEnabled:pe,isStrokeEnabled:Te,setIsStrokeEnabled:_e,fillColor:de,setFillColor:P1,setPreviewFillColor:Rs,strokeColor:xe,setStrokeColor:V1,setPreviewStrokeColor:js,strokeWidth:H,setStrokeWidth:oe,numberOfSides:le,setNumberOfSides:be,onGenerate:Gc,showGenerateButton:Fe==="gemini",onClear:c1,isGenerating:Ue,hasShapes:e.length>0,onUndo:n,onRedo:i,canUndo:o,canRedo:r,onDuplicate:km,isShapeSelected:!!g,onOpenMobileLeft:N1,onOpenMobileRight:_1,selectedShape:dr,updateShape:Ei,setShapePreview:bm,cancelShapePreview:zo,textColor:Ee,setTextColor:B1,setPreviewTextColor:X,textFont:y,setTextFont:V,textFontSize:B,setTextFontSize:me}),l.jsxs("main",{className:"flex-grow grid grid-cols-1 md:grid-cols-[380px_1fr] lg:grid-cols-[380px_1fr_280px] min-h-0",children:[qt&&l.jsxs("aside",{className:`${J0?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} md:static md:bg-transparent md:z-auto md:p-0 md:flex flex-col gap-4 min-h-0 bg-[var(--bg-primary)]/50 md:p-2`,children:[l.jsx("div",{className:"md:hidden flex justify-end mb-4",children:l.jsx("button",{onClick:()=>rm(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:l.jsx(gt,{})})}),l.jsx(N4,{activeTool:d,setActiveTool:ur,activeCheats:rr}),l.jsx("div",{className:"flex-1 min-h-0 mt-2",children:l.jsx(zT,{codeLines:re,isLoading:Ue,error:_t,onUpdate:Gc,onPreview:()=>Uo(!0),hasUnsyncedChanges:a1,opacity:1,setOpacity:()=>{},selectedShapeId:g,highlightCodeOnSelection:pt,setHighlightCodeOnSelection:Si,showLineNumbers:ke,setShowLineNumbers:Pe,showComments:Be,setShowComments:ft,generatorType:Fe,onSwitchToLocalGenerator:R1,onOpenSettingsToGenerator:j1,onSaveCode:()=>er(!0),onOpenOrRunCodeOnline:T1,codeStringForExport:sr})})]}),l.jsx("div",{className:`flex flex-col min-w-0 min-h-0 p-2 md:p-4 ${!qt&&"md:col-start-1 lg:col-start-1 md:col-span-3 lg:col-span-3"}`,children:qt?l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:lr,className:"bg-[var(--bg-secondary)] rounded-lg shadow-inner flex-grow overflow-hidden relative grid",style:{gridTemplateRows:De?`${Ri}px 1fr`:"1fr",gridTemplateColumns:De?`${Ri}px 1fr`:"1fr"},children:[De&&l.jsx("div",{className:"bg-[var(--ruler-bg)] z-10 flex items-center justify-center p-1",children:l.jsx(eT,{size:16})}),De&&l.jsx(Mp,{orientation:"horizontal",transform:Bt,length:rn.width-Ri,canvasSize:{width:j,height:ce}}),De&&l.jsx(Mp,{orientation:"vertical",transform:Bt,length:rn.height-Ri,canvasSize:{width:j,height:ce}}),l.jsxs("div",{className:"relative overflow-hidden",style:{gridRow:De?2:"1 / -1",gridColumn:De?2:"1 / -1"},children:[Tm&&l.jsx(T4,{shape:Tm,viewTransform:Bt,onUpdateText:L1,onStopEditing:I1,canvasOffset:{left:De?Ri:0,top:De?Ri:0}}),l.jsx(GT,{width:j,height:ce,backgroundColor:jc??I,shapes:t1,addShape:ar,updateShape:Ei,activeTool:d,drawMode:L,fillColor:Z?so??de:"none",strokeColor:Te?ao??xe:"none",strokeWidth:Te?H:0,textColor:te??Ee,textFont:y,textFontSize:B,numberOfSides:le,selectedShapeId:g,onSelectShape:Cm,isDrawingPolyline:v,polylinePoints:C,setPolylinePoints:x,onCompletePolyline:Fc,onCancelPolyline:l1,isDrawingBezier:S,bezierPoints:A,setBezierPoints:D,onCompleteBezier:r1,onCancelBezier:$c,showGrid:$,gridSize:F,snapStep:he?Et:1,viewTransform:Bt,setViewTransform:$o,activePointIndex:_,setActivePointIndex:M,showCursorCoords:jt,showRotationAngle:We,pendingImage:X0,setPendingImage:Dc,setCursorPos:O0,showNotification:fe,onStartInlineEdit:D1,inlineEditingShapeId:p})]}),l.jsx("button",{onClick:wi,title:"Показати все полотно",className:"absolute bottom-4 right-4 z-10 p-2 bg-[var(--bg-primary)] text-[var(--text-secondary)] rounded-full shadow-lg hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)] transition-colors",children:l.jsx(tT,{})})]}),l.jsx(g4,{zoomLevel:Bt.scale,cursorPos:q0,onZoomChange:Oc,onResetZoom:k1,onLocateSelectedShape:E1,selectedShapeId:g})]}):l.jsx(p4,{onCreateNew:Sm,onLoadProject:Em,recentProjects:Ic,onOpenRecent:y1,onRemoveProject:v1,onClearAllProjects:b1,hasActiveProject:Z0,onReturnToProject:()=>Is(!0),autosavedProjectData:Lc,onRestoreAutosave:F1,onDismissAutosave:$1})}),qt&&l.jsxs("aside",{className:`${W0?"fixed inset-0 bg-[var(--bg-app)]/95 backdrop-blur-sm z-40 p-4 flex flex-col":"hidden"} lg:static lg:bg-transparent lg:z-auto lg:p-0 lg:flex flex-col gap-4 overflow-y-auto md:p-2`,children:[l.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:l.jsx("button",{onClick:()=>sm(!1),className:"p-2 rounded-lg text-[var(--accent-text)]",children:l.jsx(gt,{})})}),l.jsx("div",{className:"flex-1 min-h-0",children:l.jsx(KT,{shapes:e,selectedShapeId:g,onSelectShape:Cm,onDeleteShape:qo,onMoveShape:i1,onUpdateShape:Ei,onReorderShape:o1,showTkinterNames:Pt})}),l.jsx("div",{className:"flex-[2_2_0%] min-h-0",children:l.jsx(WT,{selectedShape:dr,updateShape:Ei,deleteShape:qo,duplicateShape:cr,activeTool:d,activePointIndex:_,setActivePointIndex:M,deletePoint:Vc,addPoint:n1,convertToPath:Bc,showNotification:fe,setShapePreview:bm,cancelShapePreview:zo,fillColor:de,strokeColor:xe})})]})]}),pm&&l.jsx(u4,{isOpen:pm,onClose:()=>xm(!1),onActivate:Q0,showNotification:fe}),Kl&&l.jsx(Z3,{initialTab:Ac,onClose:()=>ni(!1),onOpenApiKeyModal:()=>Ti(!0),onDeleteTemplate:h1,onRenameTemplate:g1,templates:Ls,canvasWidth:j,setCanvasWidth:K,canvasHeight:ce,setCanvasHeight:ne,canvasBgColor:I,setCanvasBgColor:R=>{z(R),Ds(null)},setPreviewCanvasBgColor:Ds,canvasVarName:Y,setCanvasVarName:W,gridSize:F,setGridSize:se,gridSnapStep:Et,setGridSnapStep:Gn,showTkinterNames:Pt,setShowTkinterNames:bn,showAxes:De,setShowAxes:dt,showCursorCoords:jt,setShowCursorCoords:In,showRotationAngle:We,setShowRotationAngle:rt,showLineNumbers:ke,setShowLineNumbers:Pe,generatorType:Fe,setGeneratorType:Ht,highlightCodeOnSelection:pt,setHighlightCodeOnSelection:Si,autoGenerateComments:zt,setAutoGenerateComments:Fo,outlineWithFill:Vt,setOutlineWithFill:ro}),nr&&l.jsx(r4,{isOpen:nr,onClose:()=>Ti(!1),onSave:U1,currentApiKey:Bo}),oo&&Rt&&l.jsx(Q3,{projectName:u,shapes:Rt,width:j,height:ce,backgroundColor:I,onClose:()=>Uo(!1)}),Nc&&l.jsx(e4,{onClose:()=>Zl(!1),onExport:x1}),_c&&l.jsx(t4,{onClose:()=>Po(!1),onCreate:u1,initialSettings:{projectName:"Новий малюнок. ВереTkа",width:j,height:ce,bgColor:"#ffffff",canvasVarName:"c"},templates:Ls}),uo&&l.jsx(s0,{isOpen:!0,title:uo.title,message:uo.message,onConfirm:uo.onConfirm,onClose:()=>sn(null),confirmText:uo.confirmText,cancelText:uo.cancelText,variant:uo.variant}),Ql&&l.jsx(n4,{isOpen:!0,onClose:()=>lo(!1),onSave:f1,currentProjectName:u}),lm&&l.jsx(C4,{isOpen:!0,onClose:()=>er(!1),onSave:C1,currentProjectName:u}),Rc&&l.jsx(S4,{onClose:()=>tr(!1),onSave:m1}),ln&&l.jsx(i4,{isOpen:ln,onClose:()=>Es(!1),version:Ap}),ks&&l.jsx(l4,{isOpen:ks,onClose:()=>Ms(!1)}),As&&l.jsx(a4,{onClose:()=>Vo(!1),appVersion:Ap})]})]})}const z0=document.getElementById("root");if(!z0)throw new Error("Could not find root element to mount to");const I4=HC.createRoot(z0);I4.render(l.jsx(St.StrictMode,{children:l.jsx(D4,{})}));
